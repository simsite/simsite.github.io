(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{"+Hau":function(Ge,U,S){"use strict";S.d(U,"d",function(){return y}),S.d(U,"c",function(){return ot}),S.d(U,"b",function(){return it}),S.d(U,"a",function(){return Q}),S.d(U,"e",function(){return Y}),S.d(U,"i",function(){return N}),S.d(U,"B",function(){return lt}),S.d(U,"y",function(){return at}),S.d(U,"m",function(){return gt}),S.d(U,"q",function(){return Tt}),S.d(U,"l",function(){return bt}),S.d(U,"h",function(){return nt}),S.d(U,"r",function(){return W}),S.d(U,"n",function(){return et}),S.d(U,"j",function(){return k}),S.d(U,"w",function(){return st}),S.d(U,"f",function(){return $}),S.d(U,"o",function(){return D}),S.d(U,"u",function(){return T}),S.d(U,"z",function(){return O}),S.d(U,"s",function(){return C}),S.d(U,"k",function(){return L}),S.d(U,"x",function(){return w}),S.d(U,"g",function(){return z}),S.d(U,"p",function(){return pt}),S.d(U,"v",function(){return At}),S.d(U,"A",function(){return rt}),S.d(U,"t",function(){return _t});var B=S("bYtY"),mt=S("OELB"),H=S("71kh"),ht=S("Qxkt"),y=1e3,ot=y*60,it=ot*60,Q=it*24,Y=Q*365,G={year:"{yyyy}",month:"{MMM}",day:"{d}",hour:"{HH}:{mm}",minute:"{HH}:{mm}",second:"{HH}:{mm}:{ss}",millisecond:"{hh}:{mm}:{ss} {SSS}",none:"{yyyy}-{MM}-{dd} {hh}:{mm}:{ss} {SSS}"},q="{yyyy}-{MM}-{dd}",N={year:"{yyyy}",month:"{yyyy}-{MM}",day:q,hour:q+" "+G.hour,minute:q+" "+G.minute,second:q+" "+G.second,millisecond:G.none},V=["year","month","day","hour","minute","second","millisecond"],lt=["year","half-year","quarter","month","week","half-week","day","half-day","quarter-day","hour","minute","second","millisecond"];function at(xt,ft){return xt+="","0000".substr(0,ft-xt.length)+xt}function gt(xt){switch(xt){case"half-year":case"quarter":return"month";case"week":case"half-week":return"day";case"half-day":case"quarter-day":return"hour";default:return xt}}function Tt(xt){return xt===gt(xt)}function bt(xt){switch(xt){case"year":case"month":return"day";case"millisecond":return"millisecond";default:return"second"}}function nt(xt,ft,Mt,K){var R=mt.n(xt),tt=R[k(Mt)](),Z=R[st(Mt)]()+1,ct=Math.floor((Z-1)/4)+1,vt=R[$(Mt)](),Ct=R["get"+(Mt?"UTC":"")+"Day"](),Bt=R[D(Mt)](),It=(Bt-1)%12+1,Wt=R[T(Mt)](),ee=R[O(Mt)](),ae=R[C(Mt)](),ye=K instanceof ht.a?K:Object(H.d)(K||H.a)||Object(H.c)(),Le=ye.getModel("time"),_e=Le.get("month"),De=Le.get("monthAbbr"),er=Le.get("dayOfWeek"),Ie=Le.get("dayOfWeekAbbr");return(ft||"").replace(/{yyyy}/g,tt+"").replace(/{yy}/g,tt%100+"").replace(/{Q}/g,ct+"").replace(/{MMMM}/g,_e[Z-1]).replace(/{MMM}/g,De[Z-1]).replace(/{MM}/g,at(Z,2)).replace(/{M}/g,Z+"").replace(/{dd}/g,at(vt,2)).replace(/{d}/g,vt+"").replace(/{eeee}/g,er[Ct]).replace(/{ee}/g,Ie[Ct]).replace(/{e}/g,Ct+"").replace(/{HH}/g,at(Bt,2)).replace(/{H}/g,Bt+"").replace(/{hh}/g,at(It+"",2)).replace(/{h}/g,It+"").replace(/{mm}/g,at(Wt,2)).replace(/{m}/g,Wt+"").replace(/{ss}/g,at(ee,2)).replace(/{s}/g,ee+"").replace(/{SSS}/g,at(ae,3)).replace(/{S}/g,ae+"")}function W(xt,ft,Mt,K,R){var tt=null;if(typeof Mt=="string")tt=Mt;else if(typeof Mt=="function")tt=Mt(xt.value,ft,{level:xt.level});else{var Z=B.extend({},G);if(xt.level>0)for(var ct=0;ct<V.length;++ct)Z[V[ct]]="{primary|"+Z[V[ct]]+"}";var vt=Mt?Mt.inherit===!1?Mt:B.defaults(Mt,Z):Z,Ct=X(xt.value,R);if(vt[Ct])tt=vt[Ct];else if(vt.inherit){for(var Bt=lt.indexOf(Ct),ct=Bt-1;ct>=0;--ct)if(vt[Ct]){tt=vt[Ct];break}tt=tt||Z.none}if(B.isArray(tt)){var It=xt.level==null?0:xt.level>=0?xt.level:tt.length+xt.level;It=Math.min(It,tt.length-1),tt=tt[It]}}return nt(new Date(xt.value),tt,R,K)}function X(xt,ft){var Mt=mt.n(xt),K=Mt[st(ft)]()+1,R=Mt[$(ft)](),tt=Mt[D(ft)](),Z=Mt[T(ft)](),ct=Mt[O(ft)](),vt=Mt[C(ft)](),Ct=vt===0,Bt=Ct&&ct===0,It=Bt&&Z===0,Wt=It&&tt===0,ee=Wt&&R===1,ae=ee&&K===1;return ae?"year":ee?"month":Wt?"day":It?"hour":Bt?"minute":Ct?"second":"millisecond"}function et(xt,ft,Mt){var K=typeof xt=="number"?mt.n(xt):xt;switch(ft=ft||X(xt,Mt),ft){case"year":return K[k(Mt)]();case"half-year":return K[st(Mt)]()>=6?1:0;case"quarter":return Math.floor((K[st(Mt)]()+1)/4);case"month":return K[st(Mt)]();case"day":return K[$(Mt)]();case"half-day":return K[D(Mt)]()/24;case"hour":return K[D(Mt)]();case"minute":return K[T(Mt)]();case"second":return K[O(Mt)]();case"millisecond":return K[C(Mt)]()}}function k(xt){return xt?"getUTCFullYear":"getFullYear"}function st(xt){return xt?"getUTCMonth":"getMonth"}function $(xt){return xt?"getUTCDate":"getDate"}function D(xt){return xt?"getUTCHours":"getHours"}function T(xt){return xt?"getUTCMinutes":"getMinutes"}function O(xt){return xt?"getUTCSeconds":"getSeconds"}function C(xt){return xt?"getUTCSeconds":"getSeconds"}function L(xt){return xt?"setUTCFullYear":"setFullYear"}function w(xt){return xt?"setUTCMonth":"setMonth"}function z(xt){return xt?"setUTCDate":"setDate"}function pt(xt){return xt?"setUTCHours":"setHours"}function At(xt){return xt?"setUTCMinutes":"setMinutes"}function rt(xt){return xt?"setUTCSeconds":"setSeconds"}function _t(xt){return xt?"setUTCSeconds":"setSeconds"}},"+TT/":function(Ge,U,S){"use strict";S.d(U,"a",function(){return ot}),S.d(U,"b",function(){return Y}),S.d(U,"e",function(){return N}),S.d(U,"g",function(){return V}),S.d(U,"i",function(){return lt}),S.d(U,"j",function(){return at}),S.d(U,"d",function(){return gt}),S.d(U,"h",function(){return Tt}),S.d(U,"f",function(){return bt}),S.d(U,"c",function(){return nt});var B=S("bYtY"),mt=S("mFDi"),H=S("OELB"),ht=S("7aKB"),y=B.each,ot=["left","right","top","bottom","width","height"],it=[["width","left","right"],["height","top","bottom"]];function Q(W,X,et,k,st){var $=0,D=0;k==null&&(k=Infinity),st==null&&(st=Infinity);var T=0;X.eachChild(function(O,C){var L=O.getBoundingRect(),w=X.childAt(C+1),z=w&&w.getBoundingRect(),pt,At;if(W==="horizontal"){var rt=L.width+(z?-z.x+L.x:0);pt=$+rt,pt>k||O.newline?($=0,pt=rt,D+=T+et,T=L.height):T=Math.max(T,L.height)}else{var _t=L.height+(z?-z.y+L.y:0);At=D+_t,At>st||O.newline?($+=T+et,D=0,At=_t,T=L.width):T=Math.max(T,L.width)}O.newline||(O.x=$,O.y=D,O.markRedraw(),W==="horizontal"?$=pt+et:D=At+et)})}var Y=Q,G=B.curry(Q,"vertical"),q=B.curry(Q,"horizontal");function N(W,X,et){var k=X.width,st=X.height,$=Object(H.o)(W.left,k),D=Object(H.o)(W.top,st),T=Object(H.o)(W.right,k),O=Object(H.o)(W.bottom,st);return(isNaN($)||isNaN(parseFloat(W.left)))&&($=0),(isNaN(T)||isNaN(parseFloat(W.right)))&&(T=k),(isNaN(D)||isNaN(parseFloat(W.top)))&&(D=0),(isNaN(O)||isNaN(parseFloat(W.bottom)))&&(O=st),et=ht.j(et||0),{width:Math.max(T-$-et[1]-et[3],0),height:Math.max(O-D-et[0]-et[2],0)}}function V(W,X,et){et=ht.j(et||0);var k=X.width,st=X.height,$=Object(H.o)(W.left,k),D=Object(H.o)(W.top,st),T=Object(H.o)(W.right,k),O=Object(H.o)(W.bottom,st),C=Object(H.o)(W.width,k),L=Object(H.o)(W.height,st),w=et[2]+et[0],z=et[1]+et[3],pt=W.aspect;switch(isNaN(C)&&(C=k-T-z-$),isNaN(L)&&(L=st-O-w-D),pt!=null&&(isNaN(C)&&isNaN(L)&&(pt>k/st?C=k*.8:L=st*.8),isNaN(C)&&(C=pt*L),isNaN(L)&&(L=C/pt)),isNaN($)&&($=k-T-C-z),isNaN(D)&&(D=st-O-L-w),W.left||W.right){case"center":$=k/2-C/2-et[3];break;case"right":$=k-C-z;break}switch(W.top||W.bottom){case"middle":case"center":D=st/2-L/2-et[0];break;case"bottom":D=st-L-w;break}$=$||0,D=D||0,isNaN(C)&&(C=k-z-$-(T||0)),isNaN(L)&&(L=st-w-D-(O||0));var At=new mt.a($+et[3],D+et[0],C,L);return At.margin=et,At}function lt(W,X,et,k,st){var $=!st||!st.hv||st.hv[0],D=!st||!st.hv||st.hv[1],T=st&&st.boundingMode||"all";if(!(!$&&!D)){var O;if(T==="raw")O=W.type==="group"?new mt.a(0,0,+X.width||0,+X.height||0):W.getBoundingRect();else if(O=W.getBoundingRect(),W.needLocalTransform()){var C=W.getLocalTransform();O=O.clone(),O.applyTransform(C)}var L=V(B.defaults({width:O.width,height:O.height},X),et,k),w=$?L.x-O.x:0,z=D?L.y-O.y:0;T==="raw"?(W.x=w,W.y=z):(W.x+=w,W.y+=z),W.markRedraw()}}function at(W,X){return W[it[X][0]]!=null||W[it[X][1]]!=null&&W[it[X][2]]!=null}function gt(W){var X=W.layoutMode||W.constructor.layoutMode;return B.isObject(X)?X:X?{type:X}:null}function Tt(W,X,et){var k=et&&et.ignoreSize;!B.isArray(k)&&(k=[k,k]);var st=D(it[0],0),$=D(it[1],1);C(it[0],W,st),C(it[1],W,$);function D(L,w){var z={},pt=0,At={},rt=0,_t=2;if(y(L,function(Mt){At[Mt]=W[Mt]}),y(L,function(Mt){T(X,Mt)&&(z[Mt]=At[Mt]=X[Mt]),O(z,Mt)&&pt++,O(At,Mt)&&rt++}),k[w])return O(X,L[1])?At[L[2]]=null:O(X,L[2])&&(At[L[1]]=null),At;if(rt===_t||!pt)return At;if(pt>=_t)return z;for(var xt=0;xt<L.length;xt++){var ft=L[xt];if(!T(z,ft)&&T(W,ft)){z[ft]=W[ft];break}}return z}function T(L,w){return L.hasOwnProperty(w)}function O(L,w){return L[w]!=null&&L[w]!=="auto"}function C(L,w,z){y(L,function(pt){w[pt]=z[pt]})}}function bt(W){return nt({},W)}function nt(W,X){return X&&W&&y(ot,function(et){X.hasOwnProperty(et)&&(W[et]=X[et])}),W}},"+V6l":function(Ge,U,S){"use strict";S.d(U,"a",function(){return $});var B=S("LPTA"),mt=S("bYtY"),H=S("IaEH"),ht=S("b9Ot"),y=S("1bdT"),ot=S("NDc/"),it=S("UhB0"),Q=S("mFDi");function Y(){return!1}function G(D,T,O){var C=mt.createCanvas(),L=T.getWidth(),w=T.getHeight(),z=C.style;return z&&(z.position="absolute",z.left="0",z.top="0",z.width=L+"px",z.height=w+"px",C.setAttribute("data-zr-dom-id",D)),C.width=L*O,C.height=w*O,C}var q=function(D){Object(H.a)(T,D);function T(O,C,L){var w=D.call(this)||this;w.motionBlur=!1,w.lastFrameAlpha=.7,w.dpr=1,w.virtual=!1,w.config={},w.incremental=!1,w.zlevel=0,w.maxRepaintRectCount=5,w.__dirty=!0,w.__firstTimePaint=!0,w.__used=!1,w.__drawIndex=0,w.__startIndex=0,w.__endIndex=0,w.__prevStartIndex=null,w.__prevEndIndex=null;var z;L=L||B.e,typeof O=="string"?z=G(O,C,L):mt.isObject(O)&&(z=O,O=z.id),w.id=O,w.dom=z;var pt=z.style;return pt&&(z.onselectstart=Y,pt.webkitUserSelect="none",pt.userSelect="none",pt.webkitTapHighlightColor="rgba(0,0,0,0)",pt["-webkit-touch-callout"]="none",pt.padding="0",pt.margin="0",pt.borderWidth="0"),w.domBack=null,w.ctxBack=null,w.painter=C,w.config=null,w.dpr=L,w}return T.prototype.getElementCount=function(){return this.__endIndex-this.__startIndex},T.prototype.afterBrush=function(){this.__prevStartIndex=this.__startIndex,this.__prevEndIndex=this.__endIndex},T.prototype.initContext=function(){this.ctx=this.dom.getContext("2d"),this.ctx.dpr=this.dpr},T.prototype.setUnpainted=function(){this.__firstTimePaint=!0},T.prototype.createBackBuffer=function(){var O=this.dpr;this.domBack=G("back-"+this.id,this.painter,O),this.ctxBack=this.domBack.getContext("2d"),O!==1&&this.ctxBack.scale(O,O)},T.prototype.createRepaintRects=function(O,C,L,w){if(this.__firstTimePaint)return this.__firstTimePaint=!1,null;var z=[],pt=this.maxRepaintRectCount,At=!1,rt=new Q.a(0,0,0,0);function _t(ct){if(!(!ct.isFinite()||ct.isZero()))if(z.length===0){var vt=new Q.a(0,0,0,0);vt.copy(ct),z.push(vt)}else{for(var Ct=!1,Bt=Infinity,It=0,Wt=0;Wt<z.length;++Wt){var ee=z[Wt];if(ee.intersect(ct)){var ae=new Q.a(0,0,0,0);ae.copy(ee),ae.union(ct),z[Wt]=ae,Ct=!0;break}else if(At){rt.copy(ct),rt.union(ee);var ye=ct.width*ct.height,Le=ee.width*ee.height,_e=rt.width*rt.height,De=_e-ye-Le;De<Bt&&(Bt=De,It=Wt)}}if(At&&(z[It].union(ct),Ct=!0),!Ct){var vt=new Q.a(0,0,0,0);vt.copy(ct),z.push(vt)}At||(At=z.length>=pt)}}for(var xt=this.__startIndex;xt<this.__endIndex;++xt){var ft=O[xt];if(ft){var Mt=ft.shouldBePainted(L,w,!0,!0),K=ft.__isRendered&&(ft.__dirty&y.a.REDARAW_BIT||!Mt)?ft.getPrevPaintRect():null;K&&_t(K);var R=Mt&&(ft.__dirty&y.a.REDARAW_BIT||!ft.__isRendered)?ft.getPaintRect():null;R&&_t(R)}}for(var xt=this.__prevStartIndex;xt<this.__prevEndIndex;++xt){var ft=C[xt],Mt=ft.shouldBePainted(L,w,!0,!0);if(ft&&(!Mt||!ft.__zr)&&ft.__isRendered){var K=ft.getPrevPaintRect();K&&_t(K)}}var tt;do{tt=!1;for(var xt=0;xt<z.length;){if(z[xt].isZero()){z.splice(xt,1);continue}for(var Z=xt+1;Z<z.length;)z[xt].intersect(z[Z])?(tt=!0,z[xt].union(z[Z]),z.splice(Z,1)):Z++;xt++}}while(tt);return this._paintRects=z,z},T.prototype.debugGetPaintRects=function(){return(this._paintRects||[]).slice()},T.prototype.resize=function(O,C){var L=this.dpr,w=this.dom,z=w.style,pt=this.domBack;z&&(z.width=O+"px",z.height=C+"px"),w.width=O*L,w.height=C*L,pt&&(pt.width=O*L,pt.height=C*L,L!==1&&this.ctxBack.scale(L,L))},T.prototype.clear=function(O,C,L){var w=this.dom,z=this.ctx,pt=w.width,At=w.height;C=C||this.clearColor;var rt=this.motionBlur&&!O,_t=this.lastFrameAlpha,xt=this.dpr,ft=this;rt&&(this.domBack||this.createBackBuffer(),this.ctxBack.globalCompositeOperation="copy",this.ctxBack.drawImage(w,0,0,pt/xt,At/xt));var Mt=this.domBack;function K(R,tt,Z,ct){if(z.clearRect(R,tt,Z,ct),C&&C!=="transparent"){var vt=void 0;mt.isGradientObject(C)?(vt=C.__canvasGradient||Object(ot.a)(z,C,{x:0,y:0,width:Z,height:ct}),C.__canvasGradient=vt):mt.isPatternObject(C)&&(vt=Object(it.c)(z,C,{dirty:function(){ft.setUnpainted(),ft.__painter.refresh()}})),z.save(),z.fillStyle=vt||C,z.fillRect(R,tt,Z,ct),z.restore()}rt&&(z.save(),z.globalAlpha=_t,z.drawImage(Mt,R,tt,Z,ct),z.restore())}!L||rt?K(0,0,pt,At):L.length&&mt.each(L,function(R){K(R.x*xt,R.y*xt,R.width*xt,R.height*xt)})},T}(ht.a),N=q,V=S("mLcG"),lt=S("Dagg"),at=S("ItGF"),gt=1e5,Tt=314159,bt=.01,nt=.001;function W(D){return parseInt(D,10)}function X(D){return D?D.__builtin__?!0:!(typeof D.resize!="function"||typeof D.refresh!="function"):!1}function et(D,T){var O=document.createElement("div");return O.style.cssText=["position:relative","width:"+D+"px","height:"+T+"px","padding:0","margin:0","border-width:0"].join(";")+";",O}var k=function(){function D(T,O,C,L){this.type="canvas",this._zlevelList=[],this._prevDisplayList=[],this._layers={},this._layerConfig={},this._needsManuallyCompositing=!1,this.type="canvas";var w=!T.nodeName||T.nodeName.toUpperCase()==="CANVAS";this._opts=C=mt.extend({},C||{}),this.dpr=C.devicePixelRatio||B.e,this._singleCanvas=w,this.root=T;var z=T.style;z&&(z.webkitTapHighlightColor="transparent",z.webkitUserSelect="none",z.userSelect="none",z["-webkit-touch-callout"]="none",T.innerHTML=""),this.storage=O;var pt=this._zlevelList;this._prevDisplayList=[];var At=this._layers;if(w){var _t=T,xt=_t.width,ft=_t.height;C.width!=null&&(xt=C.width),C.height!=null&&(ft=C.height),this.dpr=C.devicePixelRatio||1,_t.width=xt*this.dpr,_t.height=ft*this.dpr,this._width=xt,this._height=ft;var Mt=new N(_t,this,this.dpr);Mt.__builtin__=!0,Mt.initContext(),At[Tt]=Mt,Mt.zlevel=Tt,pt.push(Tt),this._domRoot=T}else{this._width=this._getSize(0),this._height=this._getSize(1);var rt=this._domRoot=et(this._width,this._height);T.appendChild(rt)}}return D.prototype.getType=function(){return"canvas"},D.prototype.isSingleCanvas=function(){return this._singleCanvas},D.prototype.getViewportRoot=function(){return this._domRoot},D.prototype.getViewportRootOffset=function(){var T=this.getViewportRoot();if(T)return{offsetLeft:T.offsetLeft||0,offsetTop:T.offsetTop||0}},D.prototype.refresh=function(T){var O=this.storage.getDisplayList(!0),C=this._prevDisplayList,L=this._zlevelList;this._redrawId=Math.random(),this._paintList(O,C,T,this._redrawId);for(var w=0;w<L.length;w++){var z=L[w],pt=this._layers[z];if(!pt.__builtin__&&pt.refresh){var At=w===0?this._backgroundColor:null;pt.refresh(At)}}return this._opts.useDirtyRect&&(this._prevDisplayList=O.slice()),this},D.prototype.refreshHover=function(){this._paintHoverList(this.storage.getDisplayList(!1))},D.prototype._paintHoverList=function(T){var O=T.length,C=this._hoverlayer;if(C&&C.clear(),!!O){for(var L={inHover:!0,viewWidth:this._width,viewHeight:this._height},w,z=0;z<O;z++){var pt=T[z];pt.__inHover&&(C||(C=this._hoverlayer=this.getLayer(gt)),w||(w=C.ctx,w.save()),Object(it.a)(w,pt,L,z===O-1))}w&&w.restore()}},D.prototype.getHoverLayer=function(){return this.getLayer(gt)},D.prototype.paintOne=function(T,O){Object(it.b)(T,O)},D.prototype._paintList=function(T,O,C,L){if(this._redrawId===L){C=C||!1,this._updateLayerStatus(T);var w=this._doPaintList(T,O,C),z=w.finished,pt=w.needsRefreshHover;if(this._needsManuallyCompositing&&this._compositeManually(),pt&&this._paintHoverList(T),z)this.eachLayer(function(rt){rt.afterBrush&&rt.afterBrush()});else{var At=this;Object(V.a)(function(){At._paintList(T,O,C,L)})}}},D.prototype._compositeManually=function(){var T=this.getLayer(Tt).ctx,O=this._domRoot.width,C=this._domRoot.height;T.clearRect(0,0,O,C),this.eachBuiltinLayer(function(L){L.virtual&&T.drawImage(L.dom,0,0,O,C)})},D.prototype._doPaintList=function(T,O,C){for(var L=this,w=[],z=this._opts.useDirtyRect,pt=0;pt<this._zlevelList.length;pt++){var At=this._zlevelList[pt],rt=this._layers[At];rt.__builtin__&&rt!==this._hoverlayer&&(rt.__dirty||C)&&w.push(rt)}for(var _t=!0,xt=!1,ft=function(tt){var Z=w[tt],ct=Z.ctx,vt=z&&Z.createRepaintRects(T,O,Mt._width,Mt._height);ct.save();var Ct=C?Z.__startIndex:Z.__drawIndex,Bt=!C&&Z.incremental&&Date.now,It=Bt&&Date.now(),Wt=Z.zlevel===Mt._zlevelList[0]?Mt._backgroundColor:null;if(Z.__startIndex===Z.__endIndex)Z.clear(!1,Wt,vt);else if(Ct===Z.__startIndex){var ee=T[Ct];(!ee.incremental||!ee.notClear||C)&&Z.clear(!1,Wt,vt)}Ct===-1&&(console.error("For some unknown reason. drawIndex is -1"),Ct=Z.__startIndex);var ae,ye=function(Ie){var Fe={inHover:!1,allClipped:!1,prevEl:null,viewWidth:L._width,viewHeight:L._height};for(ae=Ct;ae<Z.__endIndex;ae++){var He=T[ae];if(He.__inHover&&(xt=!0),L._doPaintEl(He,Z,z,Ie,Fe,ae===Z.__endIndex-1),Bt){var ur=Date.now()-It;if(ur>15)break}}Fe.prevElClipPaths&&ct.restore()};if(vt)if(vt.length===0)ae=Z.__endIndex;else for(var Le=Mt.dpr,_e=0;_e<vt.length;++_e){var De=vt[_e];ct.save(),ct.beginPath(),ct.rect(De.x*Le,De.y*Le,De.width*Le,De.height*Le),ct.clip(),ye(De),ct.restore()}else ct.save(),ye(),ct.restore();Z.__drawIndex=ae,Z.__drawIndex<Z.__endIndex&&(_t=!1)},Mt=this,K=0;K<w.length;K++)ft(K);return at.a.wxa&&mt.each(this._layers,function(R){R&&R.ctx&&R.ctx.draw&&R.ctx.draw()}),{finished:_t,needsRefreshHover:xt}},D.prototype._doPaintEl=function(T,O,C,L,w,z){var pt=O.ctx;if(C){var At=T.getPaintRect();(!L||At&&At.intersect(L))&&(Object(it.a)(pt,T,w,z),T.setPrevPaintRect(At))}else Object(it.a)(pt,T,w,z)},D.prototype.getLayer=function(T,O){this._singleCanvas&&!this._needsManuallyCompositing&&(T=Tt);var C=this._layers[T];return C||(C=new N("zr_"+T,this,this.dpr),C.zlevel=T,C.__builtin__=!0,this._layerConfig[T]?mt.merge(C,this._layerConfig[T],!0):this._layerConfig[T-bt]&&mt.merge(C,this._layerConfig[T-bt],!0),O&&(C.virtual=O),this.insertLayer(T,C),C.initContext()),C},D.prototype.insertLayer=function(T,O){var C=this._layers,L=this._zlevelList,w=L.length,z=this._domRoot,pt=null,At=-1;if(C[T]){mt.logError("ZLevel "+T+" has been used already");return}if(!X(O)){mt.logError("Layer of zlevel "+T+" is not valid");return}if(w>0&&T>L[0]){for(At=0;At<w-1&&!(L[At]<T&&L[At+1]>T);At++);pt=C[L[At]]}if(L.splice(At+1,0,T),C[T]=O,!O.virtual)if(pt){var rt=pt.dom;rt.nextSibling?z.insertBefore(O.dom,rt.nextSibling):z.appendChild(O.dom)}else z.firstChild?z.insertBefore(O.dom,z.firstChild):z.appendChild(O.dom);O.__painter=this},D.prototype.eachLayer=function(T,O){for(var C=this._zlevelList,L=0;L<C.length;L++){var w=C[L];T.call(O,this._layers[w],w)}},D.prototype.eachBuiltinLayer=function(T,O){for(var C=this._zlevelList,L=0;L<C.length;L++){var w=C[L],z=this._layers[w];z.__builtin__&&T.call(O,z,w)}},D.prototype.eachOtherLayer=function(T,O){for(var C=this._zlevelList,L=0;L<C.length;L++){var w=C[L],z=this._layers[w];z.__builtin__||T.call(O,z,w)}},D.prototype.getLayers=function(){return this._layers},D.prototype._updateLayerStatus=function(T){this.eachBuiltinLayer(function(xt,ft){xt.__dirty=xt.__used=!1});function O(xt){w&&(w.__endIndex!==xt&&(w.__dirty=!0),w.__endIndex=xt)}if(this._singleCanvas)for(var C=1;C<T.length;C++){var L=T[C];if(L.zlevel!==T[C-1].zlevel||L.incremental){this._needsManuallyCompositing=!0;break}}var w=null,z=0,pt,At;for(At=0;At<T.length;At++){var L=T[At],rt=L.zlevel,_t=void 0;pt!==rt&&(pt=rt,z=0),L.incremental?(_t=this.getLayer(rt+nt,this._needsManuallyCompositing),_t.incremental=!0,z=1):_t=this.getLayer(rt+(z>0?bt:0),this._needsManuallyCompositing),_t.__builtin__||mt.logError("ZLevel "+rt+" has been used by unkown layer "+_t.id),_t!==w&&(_t.__used=!0,_t.__startIndex!==At&&(_t.__dirty=!0),_t.__startIndex=At,_t.incremental?_t.__drawIndex=-1:_t.__drawIndex=At,O(At),w=_t),L.__dirty&y.a.REDARAW_BIT&&!L.__inHover&&(_t.__dirty=!0,_t.incremental&&_t.__drawIndex<0&&(_t.__drawIndex=At))}O(At),this.eachBuiltinLayer(function(xt,ft){!xt.__used&&xt.getElementCount()>0&&(xt.__dirty=!0,xt.__startIndex=xt.__endIndex=xt.__drawIndex=0),xt.__dirty&&xt.__drawIndex<0&&(xt.__drawIndex=xt.__startIndex)})},D.prototype.clear=function(){return this.eachBuiltinLayer(this._clearLayer),this},D.prototype._clearLayer=function(T){T.clear()},D.prototype.setBackgroundColor=function(T){this._backgroundColor=T,mt.each(this._layers,function(O){O.setUnpainted()})},D.prototype.configLayer=function(T,O){if(O){var C=this._layerConfig;C[T]?mt.merge(C[T],O,!0):C[T]=O;for(var L=0;L<this._zlevelList.length;L++){var w=this._zlevelList[L];if(w===T||w===T+bt){var z=this._layers[w];mt.merge(z,C[T],!0)}}}},D.prototype.delLayer=function(T){var O=this._layers,C=this._zlevelList,L=O[T];!L||(L.dom.parentNode.removeChild(L.dom),delete O[T],C.splice(mt.indexOf(C,T),1))},D.prototype.resize=function(T,O){if(this._domRoot.style){var C=this._domRoot;C.style.display="none";var L=this._opts;if(T!=null&&(L.width=T),O!=null&&(L.height=O),T=this._getSize(0),O=this._getSize(1),C.style.display="",this._width!==T||O!==this._height){C.style.width=T+"px",C.style.height=O+"px";for(var w in this._layers)this._layers.hasOwnProperty(w)&&this._layers[w].resize(T,O);this.refresh(!0)}this._width=T,this._height=O}else{if(T==null||O==null)return;this._width=T,this._height=O,this.getLayer(Tt).resize(T,O)}return this},D.prototype.clearLayer=function(T){var O=this._layers[T];O&&O.clear()},D.prototype.dispose=function(){this.root.innerHTML="",this.root=this.storage=this._domRoot=this._layers=null},D.prototype.getRenderedCanvas=function(T){if(T=T||{},this._singleCanvas&&!this._compositeManually)return this._layers[Tt].dom;var O=new N("image",this,T.pixelRatio||this.dpr);O.initContext(),O.clear(!1,T.backgroundColor||this._backgroundColor);var C=O.ctx;if(T.pixelRatio<=this.dpr){this.refresh();var L=O.dom.width,w=O.dom.height;this.eachLayer(function(xt){xt.__builtin__?C.drawImage(xt.dom,0,0,L,w):xt.renderToCanvas&&(C.save(),xt.renderToCanvas(C),C.restore())})}else for(var z={inHover:!1,viewWidth:this._width,viewHeight:this._height},pt=this.storage.getDisplayList(!0),At=0,rt=pt.length;At<rt;At++){var _t=pt[At];Object(it.a)(C,_t,z,At===rt-1)}return O.dom},D.prototype.getWidth=function(){return this._width},D.prototype.getHeight=function(){return this._height},D.prototype._getSize=function(T){var O=this._opts,C=["width","height"][T],L=["clientWidth","clientHeight"][T],w=["paddingLeft","paddingTop"][T],z=["paddingRight","paddingBottom"][T];if(O[C]!=null&&O[C]!=="auto")return parseFloat(O[C]);var pt=this.root,At=document.defaultView.getComputedStyle(pt);return(pt[L]||W(At[C])||W(pt.style[C]))-(W(At[w])||0)-(W(At[z])||0)|0},D.prototype.pathToImage=function(T,O){O=O||this.dpr;var C=document.createElement("canvas"),L=C.getContext("2d"),w=T.getBoundingRect(),z=T.style,pt=z.shadowBlur*O,At=z.shadowOffsetX*O,rt=z.shadowOffsetY*O,_t=T.hasStroke()?z.lineWidth:0,xt=Math.max(_t/2,-At+pt),ft=Math.max(_t/2,At+pt),Mt=Math.max(_t/2,-rt+pt),K=Math.max(_t/2,rt+pt),R=w.width+xt+ft,tt=w.height+Mt+K;C.width=R*O,C.height=tt*O,L.scale(O,O),L.clearRect(0,0,R,tt),L.dpr=O;var Z={x:T.x,y:T.y,scaleX:T.scaleX,scaleY:T.scaleY,rotation:T.rotation,originX:T.originX,originY:T.originY};T.x=xt-w.x,T.y=Mt-w.y,T.rotation=0,T.scaleX=1,T.scaleY=1,T.updateTransform(),T&&Object(it.a)(L,T,{inHover:!1,viewWidth:this._width,viewHeight:this._height},!0);var ct=new lt.a({style:{x:0,y:0,image:C}});return mt.extend(T,Z),ct},D}(),st=k;function $(D){D.registerPainter("canvas",st)}},"+t0R":function(Ge,U,S){"use strict";S.d(U,"a",function(){return B});function B(mt,H,ht){for(var y;mt&&!(H(mt)&&(y=mt,ht));)mt=mt.__hostTarget||mt.parent;return y}},"14J3":function(Ge,U,S){"use strict";var B=S("cIOH"),mt=S.n(B),H=S("1GLa")},"1AkM":function(Ge,U,S){"use strict";S.d(U,"c",function(){return y}),S.d(U,"a",function(){return Y}),S.d(U,"b",function(){return V});var B=S("Xnb7"),mt=S("bYtY"),H=S("6GrX"),ht=/\{([a-zA-Z0-9_]+)\|([^}]*)\}/g;function y(nt,W,X,et,k){if(!W)return"";var st=(nt+"").split(`
`);k=ot(W,X,et,k);for(var $=0,D=st.length;$<D;$++)st[$]=it(st[$],k);return st.join(`
`)}function ot(nt,W,X,et){et=et||{};var k=Object(mt.extend)({},et);k.font=W,X=Object(mt.retrieve2)(X,"..."),k.maxIterations=Object(mt.retrieve2)(et.maxIterations,2);var st=k.minChar=Object(mt.retrieve2)(et.minChar,0);k.cnCharWidth=Object(H.g)("\u56FD",W);var $=k.ascCharWidth=Object(H.g)("a",W);k.placeholder=Object(mt.retrieve2)(et.placeholder,"");for(var D=nt=Math.max(0,nt-1),T=0;T<st&&D>=$;T++)D-=$;var O=Object(H.g)(X,W);return O>D&&(X="",O=0),D=nt-O,k.ellipsis=X,k.ellipsisWidth=O,k.contentWidth=D,k.containerWidth=nt,k}function it(nt,W){var X=W.containerWidth,et=W.font,k=W.contentWidth;if(!X)return"";var st=Object(H.g)(nt,et);if(st<=X)return nt;for(var $=0;;$++){if(st<=k||$>=W.maxIterations){nt+=W.ellipsis;break}var D=$===0?Q(nt,k,W.ascCharWidth,W.cnCharWidth):st>0?Math.floor(nt.length*k/st):0;nt=nt.substr(0,D),st=Object(H.g)(nt,et)}return nt===""&&(nt=W.placeholder),nt}function Q(nt,W,X,et){for(var k=0,st=0,$=nt.length;st<$&&k<W;st++){var D=nt.charCodeAt(st);k+=0<=D&&D<=127?X:et}return st}function Y(nt,W){nt!=null&&(nt+="");var X=W.overflow,et=W.padding,k=W.font,st=X==="truncate",$=Object(H.f)(k),D=Object(mt.retrieve2)(W.lineHeight,$),T=W.lineOverflow==="truncate",O=W.width,C;O!=null&&X==="break"||X==="breakAll"?C=nt?bt(nt,W.font,O,X==="breakAll",0).lines:[]:C=nt?nt.split(`
`):[];var L=C.length*D,w=Object(mt.retrieve2)(W.height,L);if(L>w&&T){var z=Math.floor(w/D);C=C.slice(0,z)}var pt=w,At=O;if(et&&(pt+=et[0]+et[2],At!=null&&(At+=et[1]+et[3])),nt&&st&&At!=null)for(var rt=ot(O,k,W.ellipsis,{minChar:W.truncateMinChar,placeholder:W.placeholder}),_t=0;_t<C.length;_t++)C[_t]=it(C[_t],rt);if(O==null){for(var xt=0,_t=0;_t<C.length;_t++)xt=Math.max(Object(H.g)(C[_t],k),xt);O=xt}return{lines:C,height:w,outerHeight:pt,lineHeight:D,calculatedLineHeight:$,contentHeight:L,width:O}}var G=function(){function nt(){}return nt}(),q=function(){function nt(W){this.tokens=[],W&&(this.tokens=W)}return nt}(),N=function(){function nt(){this.width=0,this.height=0,this.contentWidth=0,this.contentHeight=0,this.outerWidth=0,this.outerHeight=0,this.lines=[]}return nt}();function V(nt,W){var X=new N;if(nt!=null&&(nt+=""),!nt)return X;for(var et=W.width,k=W.height,st=W.overflow,$=(st==="break"||st==="breakAll")&&et!=null?{width:et,accumWidth:0,breakAll:st==="breakAll"}:null,D=ht.lastIndex=0,T;(T=ht.exec(nt))!=null;){var O=T.index;O>D&&lt(X,nt.substring(D,O),W,$),lt(X,T[2],W,$,T[1]),D=ht.lastIndex}D<nt.length&&lt(X,nt.substring(D,nt.length),W,$);var C=[],L=0,w=0,z=W.padding,pt=st==="truncate",At=W.lineOverflow==="truncate";function rt(Le,_e,De){Le.width=_e,Le.lineHeight=De,L+=De,w=Math.max(w,_e)}t:for(var _t=0;_t<X.lines.length;_t++){for(var xt=X.lines[_t],ft=0,Mt=0,K=0;K<xt.tokens.length;K++){var R=xt.tokens[K],tt=R.styleName&&W.rich[R.styleName]||{},Z=R.textPadding=tt.padding,ct=Z?Z[1]+Z[3]:0,vt=R.font=tt.font||W.font;R.contentHeight=Object(H.f)(vt);var Ct=Object(mt.retrieve2)(tt.height,R.contentHeight);if(R.innerHeight=Ct,Z&&(Ct+=Z[0]+Z[2]),R.height=Ct,R.lineHeight=Object(mt.retrieve3)(tt.lineHeight,W.lineHeight,Ct),R.align=tt&&tt.align||W.align,R.verticalAlign=tt&&tt.verticalAlign||"middle",At&&k!=null&&L+R.lineHeight>k){K>0?(xt.tokens=xt.tokens.slice(0,K),rt(xt,Mt,ft),X.lines=X.lines.slice(0,_t+1)):X.lines=X.lines.slice(0,_t);break t}var Bt=tt.width,It=Bt==null||Bt==="auto";if(typeof Bt=="string"&&Bt.charAt(Bt.length-1)==="%")R.percentWidth=Bt,C.push(R),R.contentWidth=Object(H.g)(R.text,vt);else{if(It){var Wt=tt.backgroundColor,ee=Wt&&Wt.image;ee&&(ee=B.b(ee),B.c(ee)&&(R.width=Math.max(R.width,ee.width*Ct/ee.height)))}var ae=pt&&et!=null?et-Mt:null;ae!=null&&ae<R.width?!It||ae<ct?(R.text="",R.width=R.contentWidth=0):(R.text=y(R.text,ae-ct,vt,W.ellipsis,{minChar:W.truncateMinChar}),R.width=R.contentWidth=Object(H.g)(R.text,vt)):R.contentWidth=Object(H.g)(R.text,vt)}R.width+=ct,Mt+=R.width,tt&&(ft=Math.max(ft,R.lineHeight))}rt(xt,Mt,ft)}X.outerWidth=X.width=Object(mt.retrieve2)(et,w),X.outerHeight=X.height=Object(mt.retrieve2)(k,L),X.contentHeight=L,X.contentWidth=w,z&&(X.outerWidth+=z[1]+z[3],X.outerHeight+=z[0]+z[2]);for(var _t=0;_t<C.length;_t++){var R=C[_t],ye=R.percentWidth;R.width=parseInt(ye,10)/100*X.width}return X}function lt(nt,W,X,et,k){var st=W==="",$=k&&X.rich[k]||{},D=nt.lines,T=$.font||X.font,O=!1,C,L;if(et){var w=$.padding,z=w?w[1]+w[3]:0;if($.width!=null&&$.width!=="auto"){var pt=Object(H.h)($.width,et.width)+z;D.length>0&&pt+et.accumWidth>et.width&&(C=W.split(`
`),O=!0),et.accumWidth=pt}else{var At=bt(W,T,et.width,et.breakAll,et.accumWidth);et.accumWidth=At.accumWidth+z,L=At.linesWidths,C=At.lines}}else C=W.split(`
`);for(var rt=0;rt<C.length;rt++){var _t=C[rt],xt=new G;if(xt.styleName=k,xt.text=_t,xt.isLineHolder=!_t&&!st,typeof $.width=="number"?xt.width=$.width:xt.width=L?L[rt]:Object(H.g)(_t,T),!rt&&!O){var ft=(D[D.length-1]||(D[0]=new q)).tokens,Mt=ft.length;Mt===1&&ft[0].isLineHolder?ft[0]=xt:(_t||!Mt||st)&&ft.push(xt)}else D.push(new q([xt]))}}function at(nt){var W=nt.charCodeAt(0);return W>=33&&W<=255}var gt=Object(mt.reduce)(",&?/;] ".split(""),function(nt,W){return nt[W]=!0,nt},{});function Tt(nt){return at(nt)?!!gt[nt]:!0}function bt(nt,W,X,et,k){for(var st=[],$=[],D="",T="",O=0,C=0,L=0;L<nt.length;L++){var w=nt.charAt(L);if(w===`
`){T&&(D+=T,C+=O),st.push(D),$.push(C),D="",T="",O=0,C=0;continue}var z=Object(H.g)(w,W),pt=et?!1:!Tt(w);if(st.length?C+z>X:k+C+z>X){C?(D||T)&&(pt?(D||(D=T,T="",O=0,C=O),st.push(D),$.push(C-O),T+=w,O+=z,D="",C=O):(T&&(D+=T,C+=O,T="",O=0),st.push(D),$.push(C),D=w,C=z)):pt?(st.push(T),$.push(O),T=w,O=z):(st.push(w),$.push(z));continue}C+=z,pt?(T+=w,O+=z):(T&&(D+=T,T="",O=0),D+=w)}return!st.length&&!D&&(D=nt,T="",O=0),T&&(D+=T),D&&(st.push(D),$.push(C)),st.length===1&&(C+=k),{accumWidth:C,lines:st,linesWidths:$}}},"1Jh7":function(Ge,U,S){"use strict";var B=S("IaEH"),mt=S("y+Vt"),H=S("T6xi"),ht=function(){function ot(){this.points=null,this.percent=1,this.smooth=0,this.smoothConstraint=null}return ot}(),y=function(ot){Object(B.a)(it,ot);function it(Q){return ot.call(this,Q)||this}return it.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},it.prototype.getDefaultShape=function(){return new ht},it.prototype.buildPath=function(Q,Y){H.a(Q,Y,!1)},it}(mt.b);y.prototype.type="polyline",U.a=y},"1MYJ":function(Ge,U,S){"use strict";var B=S("IaEH"),mt=S("y+Vt"),H=function(ht){Object(B.a)(y,ht);function y(){var ot=ht!==null&&ht.apply(this,arguments)||this;return ot.type="compound",ot}return y.prototype._updatePathDirty=function(){for(var ot=this.shape.paths,it=this.shapeChanged(),Q=0;Q<ot.length;Q++)it=it||ot[Q].shapeChanged();it&&this.dirtyShape()},y.prototype.beforeBrush=function(){this._updatePathDirty();for(var ot=this.shape.paths||[],it=this.getGlobalScale(),Q=0;Q<ot.length;Q++)ot[Q].path||ot[Q].createPathProxy(),ot[Q].path.setScale(it[0],it[1],ot[Q].segmentIgnoreThreshold)},y.prototype.buildPath=function(ot,it){for(var Q=it.paths||[],Y=0;Y<Q.length;Y++)Q[Y].buildPath(ot,Q[Y].shape,!0)},y.prototype.afterBrush=function(){for(var ot=this.shape.paths||[],it=0;it<ot.length;it++)ot[it].pathUpdated()},y.prototype.getBoundingRect=function(){return this._updatePathDirty.call(this),mt.b.prototype.getBoundingRect.call(this)},y}(mt.b);U.a=H},"1RvN":function(Ge,U,S){"use strict";var B=function(){function ht(y){this.value=y}return ht}(),mt=function(){function ht(){this._len=0}return ht.prototype.insert=function(y){var ot=new B(y);return this.insertEntry(ot),ot},ht.prototype.insertEntry=function(y){this.head?(this.tail.next=y,y.prev=this.tail,y.next=null,this.tail=y):this.head=this.tail=y,this._len++},ht.prototype.remove=function(y){var ot=y.prev,it=y.next;ot?ot.next=it:this.head=it,it?it.prev=ot:this.tail=ot,y.next=y.prev=null,this._len--},ht.prototype.len=function(){return this._len},ht.prototype.clear=function(){this.head=this.tail=null,this._len=0},ht}(),H=function(){function ht(y){this._list=new mt,this._maxSize=10,this._map={},this._maxSize=y}return ht.prototype.put=function(y,ot){var it=this._list,Q=this._map,Y=null;if(Q[y]==null){var G=it.len(),q=this._lastRemovedEntry;if(G>=this._maxSize&&G>0){var N=it.head;it.remove(N),delete Q[N.key],Y=N.value,this._lastRemovedEntry=N}q?q.value=ot:q=new B(ot),q.key=y,it.insertEntry(q),Q[y]=q}return Y},ht.prototype.get=function(y){var ot=this._map[y],it=this._list;if(ot!=null)return ot!==it.tail&&(it.remove(ot),it.insertEntry(ot)),ot.value},ht.prototype.clear=function(){this._list.clear(),this._map={}},ht.prototype.len=function(){return this._list.len()},ht}();U.a=H},"1bdT":function(Ge,U,S){"use strict";var B=S("hYLj"),mt=S("Bq2U"),H=S("mFDi"),ht=S("b9Ot"),y=S("6GrX"),ot=S("bYtY"),it=S("LPTA"),Q=S("Qe9p"),Y=S("ItGF"),G="__zr_normal__",q=["x","y","scaleX","scaleY","originX","originY","rotation","ignore"],N={x:!0,y:!0,scaleX:!0,scaleY:!0,originX:!0,originY:!0,rotation:!0,ignore:!1},V={},lt=new H.a(0,0,0,0),at=function(){function X(et){this.id=Object(ot.guid)(),this.animators=[],this.currentStates=[],this.states={},this._init(et)}return X.prototype._init=function(et){this.attr(et)},X.prototype.drift=function(et,k,st){switch(this.draggable){case"horizontal":k=0;break;case"vertical":et=0;break}var $=this.transform;$||($=this.transform=[1,0,0,1,0,0]),$[4]+=et,$[5]+=k,this.decomposeTransform(),this.markRedraw()},X.prototype.beforeUpdate=function(){},X.prototype.afterUpdate=function(){},X.prototype.update=function(){this.updateTransform(),this.__dirty&&this.updateInnerText()},X.prototype.updateInnerText=function(et){var k=this._textContent;if(k&&(!k.ignore||et)){this.textConfig||(this.textConfig={});var st=this.textConfig,$=st.local,D=k.attachedTransform,T=void 0,O=void 0,C=!1;$?D.parent=this:D.parent=null;var L=!1;if(D.x=k.x,D.y=k.y,D.originX=k.originX,D.originY=k.originY,D.rotation=k.rotation,D.scaleX=k.scaleX,D.scaleY=k.scaleY,st.position!=null){var w=lt;st.layoutRect?w.copy(st.layoutRect):w.copy(this.getBoundingRect()),$||w.applyTransform(this.transform),this.calculateTextPosition?this.calculateTextPosition(V,st,w):Object(y.d)(V,st,w),D.x=V.x,D.y=V.y,T=V.align,O=V.verticalAlign;var z=st.origin;if(z&&st.rotation!=null){var pt=void 0,At=void 0;z==="center"?(pt=w.width*.5,At=w.height*.5):(pt=Object(y.h)(z[0],w.width),At=Object(y.h)(z[1],w.height)),L=!0,D.originX=-D.x+pt+($?0:w.x),D.originY=-D.y+At+($?0:w.y)}}st.rotation!=null&&(D.rotation=st.rotation);var rt=st.offset;rt&&(D.x+=rt[0],D.y+=rt[1],L||(D.originX=-rt[0],D.originY=-rt[1]));var _t=st.inside==null?typeof st.position=="string"&&st.position.indexOf("inside")>=0:st.inside,xt=this._innerTextDefaultStyle||(this._innerTextDefaultStyle={}),ft=void 0,Mt=void 0,K=void 0;_t&&this.canBeInsideText()?(ft=st.insideFill,Mt=st.insideStroke,(ft==null||ft==="auto")&&(ft=this.getInsideTextFill()),(Mt==null||Mt==="auto")&&(Mt=this.getInsideTextStroke(ft),K=!0)):(ft=st.outsideFill,Mt=st.outsideStroke,(ft==null||ft==="auto")&&(ft=this.getOutsideFill()),(Mt==null||Mt==="auto")&&(Mt=this.getOutsideStroke(ft),K=!0)),ft=ft||"#000",(ft!==xt.fill||Mt!==xt.stroke||K!==xt.autoStroke||T!==xt.align||O!==xt.verticalAlign)&&(C=!0,xt.fill=ft,xt.stroke=Mt,xt.autoStroke=K,xt.align=T,xt.verticalAlign=O,k.setDefaultTextStyle(xt)),C&&k.dirtyStyle(),k.markRedraw()}},X.prototype.canBeInsideText=function(){return!0},X.prototype.getInsideTextFill=function(){return"#fff"},X.prototype.getInsideTextStroke=function(et){return"#000"},X.prototype.getOutsideFill=function(){return this.__zr&&this.__zr.isDarkMode()?it.d:it.a},X.prototype.getOutsideStroke=function(et){var k=this.__zr&&this.__zr.getBackgroundColor(),st=typeof k=="string"&&Object(Q.parse)(k);st||(st=[255,255,255,1]);for(var $=st[3],D=this.__zr.isDarkMode(),T=0;T<3;T++)st[T]=st[T]*$+(D?0:255)*(1-$);return st[3]=1,Object(Q.stringify)(st,"rgba")},X.prototype.traverse=function(et,k){},X.prototype.attrKV=function(et,k){et==="textConfig"?this.setTextConfig(k):et==="textContent"?this.setTextContent(k):et==="clipPath"?this.setClipPath(k):et==="extra"?(this.extra=this.extra||{},Object(ot.extend)(this.extra,k)):this[et]=k},X.prototype.hide=function(){this.ignore=!0,this.markRedraw()},X.prototype.show=function(){this.ignore=!1,this.markRedraw()},X.prototype.attr=function(et,k){if(typeof et=="string")this.attrKV(et,k);else if(Object(ot.isObject)(et))for(var st=et,$=Object(ot.keys)(st),D=0;D<$.length;D++){var T=$[D];this.attrKV(T,et[T])}return this.markRedraw(),this},X.prototype.saveCurrentToNormalState=function(et){this._innerSaveToNormal(et);for(var k=this._normalState,st=0;st<this.animators.length;st++){var $=this.animators[st],D=$.__fromStateTransition;if(!(D&&D!==G)){var T=$.targetName,O=T?k[T]:k;$.saveFinalToTarget(O)}}},X.prototype._innerSaveToNormal=function(et){var k=this._normalState;k||(k=this._normalState={}),et.textConfig&&!k.textConfig&&(k.textConfig=this.textConfig),this._savePrimaryToNormal(et,k,q)},X.prototype._savePrimaryToNormal=function(et,k,st){for(var $=0;$<st.length;$++){var D=st[$];et[D]!=null&&!(D in k)&&(k[D]=this[D])}},X.prototype.hasState=function(){return this.currentStates.length>0},X.prototype.getState=function(et){return this.states[et]},X.prototype.ensureState=function(et){var k=this.states;return k[et]||(k[et]={}),k[et]},X.prototype.clearStates=function(et){this.useState(G,!1,et)},X.prototype.useState=function(et,k,st){var $=et===G,D=this.hasState();if(!(!D&&$)){var T=this.currentStates,O=this.stateTransition;if(!(Object(ot.indexOf)(T,et)>=0&&(k||T.length===1))){var C;if(this.stateProxy&&!$&&(C=this.stateProxy(et)),C||(C=this.states&&this.states[et]),!C&&!$){Object(ot.logError)("State "+et+" not exists.");return}$||this.saveCurrentToNormalState(C);var L=!!(C&&C.hoverLayer);return L&&this._toggleHoverLayerFlag(!0),this._applyStateObj(et,C,this._normalState,k,!st&&!this.__inHover&&O&&O.duration>0,O),this._textContent&&this._textContent.useState(et,k),this._textGuide&&this._textGuide.useState(et,k),$?(this.currentStates=[],this._normalState={}):k?this.currentStates.push(et):this.currentStates=[et],this._updateAnimationTargets(),this.markRedraw(),!L&&this.__inHover&&(this._toggleHoverLayerFlag(!1),this.__dirty&=~X.REDARAW_BIT),C}}},X.prototype.useStates=function(et,k){if(!et.length)this.clearStates();else{var st=[],$=this.currentStates,D=et.length,T=D===$.length;if(T){for(var O=0;O<D;O++)if(et[O]!==$[O]){T=!1;break}}if(T)return;for(var O=0;O<D;O++){var C=et[O],L=void 0;this.stateProxy&&(L=this.stateProxy(C,et)),L||(L=this.states[C]),L&&st.push(L)}var w=!!(st[D-1]&&st[D-1].hoverLayer);w&&this._toggleHoverLayerFlag(!0);var z=this._mergeStates(st),pt=this.stateTransition;this.saveCurrentToNormalState(z),this._applyStateObj(et.join(","),z,this._normalState,!1,!k&&!this.__inHover&&pt&&pt.duration>0,pt),this._textContent&&this._textContent.useStates(et),this._textGuide&&this._textGuide.useStates(et),this._updateAnimationTargets(),this.currentStates=et.slice(),this.markRedraw(),!w&&this.__inHover&&(this._toggleHoverLayerFlag(!1),this.__dirty&=~X.REDARAW_BIT)}},X.prototype._updateAnimationTargets=function(){for(var et=0;et<this.animators.length;et++){var k=this.animators[et];k.targetName&&k.changeTarget(this[k.targetName])}},X.prototype.removeState=function(et){var k=Object(ot.indexOf)(this.currentStates,et);if(k>=0){var st=this.currentStates.slice();st.splice(k,1),this.useStates(st)}},X.prototype.replaceState=function(et,k,st){var $=this.currentStates.slice(),D=Object(ot.indexOf)($,et),T=Object(ot.indexOf)($,k)>=0;D>=0?T?$.splice(D,1):$[D]=k:st&&!T&&$.push(k),this.useStates($)},X.prototype.toggleState=function(et,k){k?this.useState(et,!0):this.removeState(et)},X.prototype._mergeStates=function(et){for(var k={},st,$=0;$<et.length;$++){var D=et[$];Object(ot.extend)(k,D),D.textConfig&&(st=st||{},Object(ot.extend)(st,D.textConfig))}return st&&(k.textConfig=st),k},X.prototype._applyStateObj=function(et,k,st,$,D,T){var O=!(k&&$);k&&k.textConfig?(this.textConfig=Object(ot.extend)({},$?this.textConfig:st.textConfig),Object(ot.extend)(this.textConfig,k.textConfig)):O&&st.textConfig&&(this.textConfig=st.textConfig);for(var C={},L=!1,w=0;w<q.length;w++){var z=q[w],pt=D&&N[z];k&&k[z]!=null?pt?(L=!0,C[z]=k[z]):this[z]=k[z]:O&&st[z]!=null&&(pt?(L=!0,C[z]=st[z]):this[z]=st[z])}if(!D)for(var w=0;w<this.animators.length;w++){var At=this.animators[w],rt=At.targetName;At.__changeFinalValue(rt?(k||st)[rt]:k||st)}L&&this._transitionState(et,C,T)},X.prototype._attachComponent=function(et){if(et.__zr&&!et.__hostTarget)throw new Error("Text element has been added to zrender.");if(et===this)throw new Error("Recursive component attachment.");var k=this.__zr;k&&et.addSelfToZr(k),et.__zr=k,et.__hostTarget=this},X.prototype._detachComponent=function(et){et.__zr&&et.removeSelfFromZr(et.__zr),et.__zr=null,et.__hostTarget=null},X.prototype.getClipPath=function(){return this._clipPath},X.prototype.setClipPath=function(et){this._clipPath&&this._clipPath!==et&&this.removeClipPath(),this._attachComponent(et),this._clipPath=et,this.markRedraw()},X.prototype.removeClipPath=function(){var et=this._clipPath;et&&(this._detachComponent(et),this._clipPath=null,this.markRedraw())},X.prototype.getTextContent=function(){return this._textContent},X.prototype.setTextContent=function(et){var k=this._textContent;if(k!==et){if(k&&k!==et&&this.removeTextContent(),et.__zr&&!et.__hostTarget)throw new Error("Text element has been added to zrender.");et.attachedTransform=new B.a,this._attachComponent(et),this._textContent=et,this.markRedraw()}},X.prototype.setTextConfig=function(et){this.textConfig||(this.textConfig={}),Object(ot.extend)(this.textConfig,et),this.markRedraw()},X.prototype.removeTextConfig=function(){this.textConfig=null,this.markRedraw()},X.prototype.removeTextContent=function(){var et=this._textContent;et&&(et.attachedTransform=null,this._detachComponent(et),this._textContent=null,this._innerTextDefaultStyle=null,this.markRedraw())},X.prototype.getTextGuideLine=function(){return this._textGuide},X.prototype.setTextGuideLine=function(et){this._textGuide&&this._textGuide!==et&&this.removeTextGuideLine(),this._attachComponent(et),this._textGuide=et,this.markRedraw()},X.prototype.removeTextGuideLine=function(){var et=this._textGuide;et&&(this._detachComponent(et),this._textGuide=null,this.markRedraw())},X.prototype.markRedraw=function(){this.__dirty|=X.REDARAW_BIT;var et=this.__zr;et&&(this.__inHover?et.refreshHover():et.refresh()),this.__hostTarget&&this.__hostTarget.markRedraw()},X.prototype.dirty=function(){this.markRedraw()},X.prototype._toggleHoverLayerFlag=function(et){this.__inHover=et;var k=this._textContent,st=this._textGuide;k&&(k.__inHover=et),st&&(st.__inHover=et)},X.prototype.addSelfToZr=function(et){this.__zr=et;var k=this.animators;if(k)for(var st=0;st<k.length;st++)et.animation.addAnimator(k[st]);this._clipPath&&this._clipPath.addSelfToZr(et),this._textContent&&this._textContent.addSelfToZr(et),this._textGuide&&this._textGuide.addSelfToZr(et)},X.prototype.removeSelfFromZr=function(et){this.__zr=null;var k=this.animators;if(k)for(var st=0;st<k.length;st++)et.animation.removeAnimator(k[st]);this._clipPath&&this._clipPath.removeSelfFromZr(et),this._textContent&&this._textContent.removeSelfFromZr(et),this._textGuide&&this._textGuide.removeSelfFromZr(et)},X.prototype.animate=function(et,k){var st=et?this[et]:this;if(!st){Object(ot.logError)('Property "'+et+'" is not existed in element '+this.id);return}var $=new mt.b(st,k);return this.addAnimator($,et),$},X.prototype.addAnimator=function(et,k){var st=this.__zr,$=this;et.during(function(){$.updateDuringAnimation(k)}).done(function(){var D=$.animators,T=Object(ot.indexOf)(D,et);T>=0&&D.splice(T,1)}),this.animators.push(et),st&&st.animation.addAnimator(et),st&&st.wakeUp()},X.prototype.updateDuringAnimation=function(et){this.markRedraw()},X.prototype.stopAnimation=function(et,k){for(var st=this.animators,$=st.length,D=[],T=0;T<$;T++){var O=st[T];!et||et===O.scope?O.stop(k):D.push(O)}return this.animators=D,this},X.prototype.animateTo=function(et,k,st){gt(this,et,k,st)},X.prototype.animateFrom=function(et,k,st){gt(this,et,k,st,!0)},X.prototype._transitionState=function(et,k,st,$){for(var D=gt(this,k,st,$),T=0;T<D.length;T++)D[T].__fromStateTransition=et},X.prototype.getBoundingRect=function(){return null},X.prototype.getPaintRect=function(){return null},X.REDARAW_BIT=1,X.initDefaultProps=function(){var et=X.prototype;et.type="element",et.name="",et.ignore=!1,et.silent=!1,et.isGroup=!1,et.draggable=!1,et.dragging=!1,et.ignoreClip=!1,et.__inHover=!1,et.__dirty=X.REDARAW_BIT;var k={};function st(D,T,O){k[D+T+O]||(console.warn("DEPRECATED: '"+D+"' has been deprecated. use '"+T+"', '"+O+"' instead"),k[D+T+O]=!0)}function $(D,T,O,C){Object.defineProperty(et,D,{get:function(){if(st(D,O,C),!this[T]){var z=this[T]=[];L(this,z)}return this[T]},set:function(z){st(D,O,C),this[O]=z[0],this[C]=z[1],this[T]=z,L(this,z)}});function L(w,z){Object.defineProperty(z,0,{get:function(){return w[O]},set:function(At){w[O]=At}}),Object.defineProperty(z,1,{get:function(){return w[C]},set:function(At){w[C]=At}})}}Object.defineProperty&&(!Y.a.browser.ie||Y.a.browser.version>8)&&($("position","_legacyPos","x","y"),$("scale","_legacyScale","scaleX","scaleY"),$("origin","_legacyOrigin","originX","originY"))}(),X}();Object(ot.mixin)(at,ht.a),Object(ot.mixin)(at,B.a);function gt(X,et,k,st,$){k=k||{};var D=[];W(X,"",X,et,k,st,D,$);var T=D.length,O=!1,C=k.done,L=k.aborted,w=function(){O=!0,T--,T<=0&&(O?C&&C():L&&L())},z=function(){T--,T<=0&&(O?C&&C():L&&L())};T||C&&C(),D.length>0&&k.during&&D[0].during(function(rt,_t){k.during(_t)});for(var pt=0;pt<D.length;pt++){var At=D[pt];w&&At.done(w),z&&At.aborted(z),At.start(k.easing,k.force)}return D}function Tt(X,et,k){for(var st=0;st<k;st++)X[st]=et[st]}function bt(X){return Object(ot.isArrayLike)(X[0])}function nt(X,et,k){if(Object(ot.isArrayLike)(et[k]))if(Object(ot.isArrayLike)(X[k])||(X[k]=[]),Object(ot.isTypedArray)(et[k])){var st=et[k].length;X[k].length!==st&&(X[k]=new et[k].constructor(st),Tt(X[k],et[k],st))}else{var $=et[k],D=X[k],T=$.length;if(bt($))for(var O=$[0].length,C=0;C<T;C++)D[C]?Tt(D[C],$[C],O):D[C]=Array.prototype.slice.call($[C]);else Tt(D,$,T);D.length=$.length}else X[k]=et[k]}function W(X,et,k,st,$,D,T,O){for(var C=[],L=[],w=Object(ot.keys)(st),z=$.duration,pt=$.delay,At=$.additive,rt=$.setToFinal,_t=!Object(ot.isObject)(D),xt=0;xt<w.length;xt++){var ft=w[xt];if(k[ft]!=null&&st[ft]!=null&&(_t||D[ft]))if(Object(ot.isObject)(st[ft])&&!Object(ot.isArrayLike)(st[ft])){if(et){O||(k[ft]=st[ft],X.updateDuringAnimation(et));continue}W(X,ft,k[ft],st[ft],$,D&&D[ft],T,O)}else C.push(ft),L.push(ft);else O||(k[ft]=st[ft],X.updateDuringAnimation(et),L.push(ft))}var Mt=C.length;if(Mt>0||$.force&&!T.length){for(var K=X.animators,R=[],tt=0;tt<K.length;tt++)K[tt].targetName===et&&R.push(K[tt]);if(!At&&R.length)for(var tt=0;tt<R.length;tt++){var Z=R[tt].stopTracks(L);if(Z){var ct=Object(ot.indexOf)(K,R[tt]);K.splice(ct,1)}}var vt=void 0,Ct=void 0,Bt=void 0;if(O){Ct={},rt&&(vt={});for(var tt=0;tt<Mt;tt++){var ft=C[tt];Ct[ft]=k[ft],rt?vt[ft]=st[ft]:k[ft]=st[ft]}}else if(rt){Bt={};for(var tt=0;tt<Mt;tt++){var ft=C[tt];Bt[ft]=Object(mt.a)(k[ft]),nt(k,st,ft)}}var It=new mt.b(k,!1,At?R:null);It.targetName=et,$.scope&&(It.scope=$.scope),rt&&vt&&It.whenWithKeys(0,vt,C),Bt&&It.whenWithKeys(0,Bt,C),It.whenWithKeys(z==null?500:z,O?Ct:st,C).delay(pt||0),X.addAnimator(It,et),T.push(It)}}U.a=at},"24YM":function(Ge,U,S){"use strict";Object.defineProperty(U,"__esModule",{value:!0}),U.SensorTabIndex=U.SensorClassName=U.SizeSensorId=void 0;var B="size-sensor-id";U.SizeSensorId=B;var mt="size-sensor-object";U.SensorClassName=mt;var H="-1";U.SensorTabIndex=H},"2fw6":function(Ge,U,S){"use strict";var B=S("IaEH"),mt=S("y+Vt"),H=function(){function y(){this.cx=0,this.cy=0,this.r=0}return y}(),ht=function(y){Object(B.a)(ot,y);function ot(it){return y.call(this,it)||this}return ot.prototype.getDefaultShape=function(){return new H},ot.prototype.buildPath=function(it,Q,Y){Y&&it.moveTo(Q.cx+Q.r,Q.cy),it.arc(Q.cx,Q.cy,Q.r,0,Math.PI*2)},ot}(mt.b);ht.prototype.type="circle",U.a=ht},"3Oj7":function(Ge,U,S){"use strict";var B=function(){function mt(H,ht){this.x=H||0,this.y=ht||0}return mt.prototype.copy=function(H){return this.x=H.x,this.y=H.y,this},mt.prototype.clone=function(){return new mt(this.x,this.y)},mt.prototype.set=function(H,ht){return this.x=H,this.y=ht,this},mt.prototype.equal=function(H){return H.x===this.x&&H.y===this.y},mt.prototype.add=function(H){return this.x+=H.x,this.y+=H.y,this},mt.prototype.scale=function(H){this.x*=H,this.y*=H},mt.prototype.scaleAndAdd=function(H,ht){this.x+=H.x*ht,this.y+=H.y*ht},mt.prototype.sub=function(H){return this.x-=H.x,this.y-=H.y,this},mt.prototype.dot=function(H){return this.x*H.x+this.y*H.y},mt.prototype.len=function(){return Math.sqrt(this.x*this.x+this.y*this.y)},mt.prototype.lenSquare=function(){return this.x*this.x+this.y*this.y},mt.prototype.normalize=function(){var H=this.len();return this.x/=H,this.y/=H,this},mt.prototype.distance=function(H){var ht=this.x-H.x,y=this.y-H.y;return Math.sqrt(ht*ht+y*y)},mt.prototype.distanceSquare=function(H){var ht=this.x-H.x,y=this.y-H.y;return ht*ht+y*y},mt.prototype.negate=function(){return this.x=-this.x,this.y=-this.y,this},mt.prototype.transform=function(H){if(!!H){var ht=this.x,y=this.y;return this.x=H[0]*ht+H[2]*y+H[4],this.y=H[1]*ht+H[3]*y+H[5],this}},mt.prototype.toArray=function(H){return H[0]=this.x,H[1]=this.y,H},mt.prototype.fromArray=function(H){this.x=H[0],this.y=H[1]},mt.set=function(H,ht,y){H.x=ht,H.y=y},mt.copy=function(H,ht){H.x=ht.x,H.y=ht.y},mt.len=function(H){return Math.sqrt(H.x*H.x+H.y*H.y)},mt.lenSquare=function(H){return H.x*H.x+H.y*H.y},mt.dot=function(H,ht){return H.x*ht.x+H.y*ht.y},mt.add=function(H,ht,y){H.x=ht.x+y.x,H.y=ht.y+y.y},mt.sub=function(H,ht,y){H.x=ht.x-y.x,H.y=ht.y-y.y},mt.scale=function(H,ht,y){H.x=ht.x*y,H.y=ht.y*y},mt.scaleAndAdd=function(H,ht,y,ot){H.x=ht.x+y.x*ot,H.y=ht.y+y.y*ot},mt.lerp=function(H,ht,y,ot){var it=1-ot;H.x=it*ht.x+ot*y.x,H.y=it*ht.y+ot*y.y},mt}();U.a=B},"3U8f":function(Ge,U,S){"use strict";var B=S("IaEH"),mt=S("Gev7"),H=S("6GrX"),ht=S("y+Vt"),y=S("bYtY"),ot=Object(y.defaults)({strokeFirst:!0,font:H.a,x:0,y:0,textAlign:"left",textBaseline:"top",miterLimit:2},ht.a),it=function(Q){Object(B.a)(Y,Q);function Y(){return Q!==null&&Q.apply(this,arguments)||this}return Y.prototype.hasStroke=function(){var G=this.style,q=G.stroke;return q!=null&&q!=="none"&&G.lineWidth>0},Y.prototype.hasFill=function(){var G=this.style,q=G.fill;return q!=null&&q!=="none"},Y.prototype.createStyle=function(G){return Object(y.createObject)(ot,G)},Y.prototype.setBoundingRect=function(G){this._rect=G},Y.prototype.getBoundingRect=function(){var G=this.style;if(!this._rect){var q=G.text;q!=null?q+="":q="";var N=Object(H.e)(q,G.font,G.textAlign,G.textBaseline);if(N.x+=G.x||0,N.y+=G.y||0,this.hasStroke()){var V=G.lineWidth;N.x-=V/2,N.y-=V/2,N.width+=V,N.height+=V}this._rect=N}return this._rect},Y.initDefaultProps=function(){var G=Y.prototype;G.dirtyRectTolerance=10}(),Y}(mt.c);it.prototype.type="tspan",U.a=it},"3e3G":function(Ge,U,S){"use strict";var B=S("IaEH"),mt=S("QuXc"),H=function(ht){Object(B.a)(y,ht);function y(ot,it,Q,Y,G){var q=ht.call(this,Y)||this;return q.x=ot==null?.5:ot,q.y=it==null?.5:it,q.r=Q==null?.5:Q,q.type="radial",q.global=G||!1,q}return y}(mt.a);U.a=H},"45y5":function(Ge,U,S){"use strict";var B=S("qnTB"),mt=S("IrRn"),H=S("G+eS"),ht=S("+V6l"),y=S("XoG2");Object(mt.a)([ht.a,y.a]);var ot={init:function(){return H.l.apply(null,arguments)}};function it(n,e,o){typeof e=="object"&&(o=e,e=null);var u=this,c;if(!(n instanceof Function)){c=[];for(var v in n)n.hasOwnProperty(v)&&c.push(v)}var g=function _(M){if(u.apply(this,arguments),n instanceof Function?Q(this,n.call(this,M)):Y(this,n,c),this.constructor===_)for(var I=_.__initializers__,F=0;F<I.length;F++)I[F].apply(this,arguments)};g.__super__=u,u.__initializers__?g.__initializers__=u.__initializers__.slice():g.__initializers__=[],e&&g.__initializers__.push(e);var x=function(){};return x.prototype=u.prototype,g.prototype=new x,g.prototype.constructor=g,Q(g.prototype,o),g.extend=u.extend,g.derive=u.extend,g}function Q(n,e){if(!!e)for(var o in e)e.hasOwnProperty(o)&&(n[o]=e[o])}function Y(n,e,o){for(var u=0;u<o.length;u++){var c=o[u];n[c]=e[c]}}var G={extend:it,derive:it};function q(n,e){this.action=n,this.context=e}var N={trigger:function(e){if(!!this.hasOwnProperty("__handlers__")&&!!this.__handlers__.hasOwnProperty(e)){var o=this.__handlers__[e],u=o.length,c=-1,v=arguments;switch(v.length){case 1:for(;++c<u;)o[c].action.call(o[c].context);return;case 2:for(;++c<u;)o[c].action.call(o[c].context,v[1]);return;case 3:for(;++c<u;)o[c].action.call(o[c].context,v[1],v[2]);return;case 4:for(;++c<u;)o[c].action.call(o[c].context,v[1],v[2],v[3]);return;case 5:for(;++c<u;)o[c].action.call(o[c].context,v[1],v[2],v[3],v[4]);return;default:for(;++c<u;)o[c].action.apply(o[c].context,Array.prototype.slice.call(v,1));return}}},on:function(e,o,u){if(!(!e||!o)){var c=this.__handlers__||(this.__handlers__={});if(!c[e])c[e]=[];else if(this.has(e,o))return;var v=new q(o,u||this);return c[e].push(v),this}},once:function(e,o,u){if(!e||!o)return;var c=this;function v(){c.off(e,v),o.apply(this,arguments)}return this.on(e,v,u)},before:function(e,o,u){if(!(!e||!o))return e="before"+e,this.on(e,o,u)},after:function(e,o,u){if(!(!e||!o))return e="after"+e,this.on(e,o,u)},success:function(e,o){return this.once("success",e,o)},error:function(e,o){return this.once("error",e,o)},off:function(e,o){var u=this.__handlers__||(this.__handlers__={});if(!o){u[e]=[];return}if(u[e]){for(var c=u[e],v=[],g=0;g<c.length;g++)o&&c[g].action!==o&&v.push(c[g]);u[e]=v}return this},has:function(e,o){var u=this.__handlers__;if(!u||!u[e])return!1;for(var c=u[e],v=0;v<c.length;v++)if(c[v].action===o)return!0}},V=N,lt=0,at=Array.prototype,gt=at.forEach,Tt={genGUID:function(){return++lt},relative2absolute:function(e,o){if(!o||e.match(/^\//))return e;for(var u=e.split("/"),c=o.split("/"),v=u[0];v==="."||v==="..";)v===".."&&c.pop(),u.shift(),v=u[0];return c.join("/")+"/"+u.join("/")},extend:function(e,o){if(o)for(var u in o)o.hasOwnProperty(u)&&(e[u]=o[u]);return e},defaults:function(e,o){if(o)for(var u in o)e[u]===void 0&&(e[u]=o[u]);return e},extendWithPropList:function(e,o,u){if(o)for(var c=0;c<u.length;c++){var v=u[c];e[v]=o[v]}return e},defaultsWithPropList:function(e,o,u){if(o)for(var c=0;c<u.length;c++){var v=u[c];e[v]==null&&(e[v]=o[v])}return e},each:function(e,o,u){if(!!(e&&o))if(e.forEach&&e.forEach===gt)e.forEach(o,u);else if(e.length===+e.length)for(var c=0,v=e.length;c<v;c++)o.call(u,e[c],c,e);else for(var g in e)e.hasOwnProperty(g)&&o.call(u,e[g],g,e)},isObject:function(e){return e===Object(e)},isArray:function(e){return Array.isArray(e)},isArrayLike:function(e){return e?e.length===+e.length:!1},clone:function(e){if(Tt.isObject(e)){if(Tt.isArray(e))return e.slice();if(Tt.isArrayLike(e)){for(var o=new e.constructor(e.length),u=0;u<e.length;u++)o[u]=e[u];return o}else return Tt.extend({},e)}else return e}},bt=Tt,nt=function(){this.__uid__=bt.genGUID()};nt.__initializers__=[function(n){bt.extend(this,n)}],bt.extend(nt,G),bt.extend(nt.prototype,V);var W=nt,X=["OES_texture_float","OES_texture_half_float","OES_texture_float_linear","OES_texture_half_float_linear","OES_standard_derivatives","OES_vertex_array_object","OES_element_index_uint","WEBGL_compressed_texture_s3tc","WEBGL_depth_texture","EXT_texture_filter_anisotropic","EXT_shader_texture_lod","WEBGL_draw_buffers","EXT_frag_depth","EXT_sRGB","ANGLE_instanced_arrays"],et=["MAX_TEXTURE_SIZE","MAX_CUBE_MAP_TEXTURE_SIZE"];function k(n){for(var e={},o={},u=0;u<X.length;u++){var c=X[u];g(c)}for(var u=0;u<et.length;u++){var v=et[u];o[v]=n.getParameter(n[v])}this.getExtension=function(x){return x in e||g(x),e[x]},this.getParameter=function(x){return o[x]};function g(x){if(n.getExtension){var _=n.getExtension(x);_||(_=n.getExtension("MOZ_"+x)),_||(_=n.getExtension("WEBKIT_"+x)),e[x]=_}}}var st=k,$={DEPTH_BUFFER_BIT:256,STENCIL_BUFFER_BIT:1024,COLOR_BUFFER_BIT:16384,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,ZERO:0,ONE:1,SRC_COLOR:768,ONE_MINUS_SRC_COLOR:769,SRC_ALPHA:770,ONE_MINUS_SRC_ALPHA:771,DST_ALPHA:772,ONE_MINUS_DST_ALPHA:773,DST_COLOR:774,ONE_MINUS_DST_COLOR:775,SRC_ALPHA_SATURATE:776,FUNC_ADD:32774,BLEND_EQUATION:32777,BLEND_EQUATION_RGB:32777,BLEND_EQUATION_ALPHA:34877,FUNC_SUBTRACT:32778,FUNC_REVERSE_SUBTRACT:32779,BLEND_DST_RGB:32968,BLEND_SRC_RGB:32969,BLEND_DST_ALPHA:32970,BLEND_SRC_ALPHA:32971,CONSTANT_COLOR:32769,ONE_MINUS_CONSTANT_COLOR:32770,CONSTANT_ALPHA:32771,ONE_MINUS_CONSTANT_ALPHA:32772,BLEND_COLOR:32773,ARRAY_BUFFER:34962,ELEMENT_ARRAY_BUFFER:34963,ARRAY_BUFFER_BINDING:34964,ELEMENT_ARRAY_BUFFER_BINDING:34965,STREAM_DRAW:35040,STATIC_DRAW:35044,DYNAMIC_DRAW:35048,BUFFER_SIZE:34660,BUFFER_USAGE:34661,CURRENT_VERTEX_ATTRIB:34342,FRONT:1028,BACK:1029,FRONT_AND_BACK:1032,CULL_FACE:2884,BLEND:3042,DITHER:3024,STENCIL_TEST:2960,DEPTH_TEST:2929,SCISSOR_TEST:3089,POLYGON_OFFSET_FILL:32823,SAMPLE_ALPHA_TO_COVERAGE:32926,SAMPLE_COVERAGE:32928,NO_ERROR:0,INVALID_ENUM:1280,INVALID_VALUE:1281,INVALID_OPERATION:1282,OUT_OF_MEMORY:1285,CW:2304,CCW:2305,LINE_WIDTH:2849,ALIASED_POINT_SIZE_RANGE:33901,ALIASED_LINE_WIDTH_RANGE:33902,CULL_FACE_MODE:2885,FRONT_FACE:2886,DEPTH_RANGE:2928,DEPTH_WRITEMASK:2930,DEPTH_CLEAR_VALUE:2931,DEPTH_FUNC:2932,STENCIL_CLEAR_VALUE:2961,STENCIL_FUNC:2962,STENCIL_FAIL:2964,STENCIL_PASS_DEPTH_FAIL:2965,STENCIL_PASS_DEPTH_PASS:2966,STENCIL_REF:2967,STENCIL_VALUE_MASK:2963,STENCIL_WRITEMASK:2968,STENCIL_BACK_FUNC:34816,STENCIL_BACK_FAIL:34817,STENCIL_BACK_PASS_DEPTH_FAIL:34818,STENCIL_BACK_PASS_DEPTH_PASS:34819,STENCIL_BACK_REF:36003,STENCIL_BACK_VALUE_MASK:36004,STENCIL_BACK_WRITEMASK:36005,VIEWPORT:2978,SCISSOR_BOX:3088,COLOR_CLEAR_VALUE:3106,COLOR_WRITEMASK:3107,UNPACK_ALIGNMENT:3317,PACK_ALIGNMENT:3333,MAX_TEXTURE_SIZE:3379,MAX_VIEWPORT_DIMS:3386,SUBPIXEL_BITS:3408,RED_BITS:3410,GREEN_BITS:3411,BLUE_BITS:3412,ALPHA_BITS:3413,DEPTH_BITS:3414,STENCIL_BITS:3415,POLYGON_OFFSET_UNITS:10752,POLYGON_OFFSET_FACTOR:32824,TEXTURE_BINDING_2D:32873,SAMPLE_BUFFERS:32936,SAMPLES:32937,SAMPLE_COVERAGE_VALUE:32938,SAMPLE_COVERAGE_INVERT:32939,COMPRESSED_TEXTURE_FORMATS:34467,DONT_CARE:4352,FASTEST:4353,NICEST:4354,GENERATE_MIPMAP_HINT:33170,BYTE:5120,UNSIGNED_BYTE:5121,SHORT:5122,UNSIGNED_SHORT:5123,INT:5124,UNSIGNED_INT:5125,FLOAT:5126,DEPTH_COMPONENT:6402,ALPHA:6406,RGB:6407,RGBA:6408,LUMINANCE:6409,LUMINANCE_ALPHA:6410,UNSIGNED_SHORT_4_4_4_4:32819,UNSIGNED_SHORT_5_5_5_1:32820,UNSIGNED_SHORT_5_6_5:33635,FRAGMENT_SHADER:35632,VERTEX_SHADER:35633,MAX_VERTEX_ATTRIBS:34921,MAX_VERTEX_UNIFORM_VECTORS:36347,MAX_VARYING_VECTORS:36348,MAX_COMBINED_TEXTURE_IMAGE_UNITS:35661,MAX_VERTEX_TEXTURE_IMAGE_UNITS:35660,MAX_TEXTURE_IMAGE_UNITS:34930,MAX_FRAGMENT_UNIFORM_VECTORS:36349,SHADER_TYPE:35663,DELETE_STATUS:35712,LINK_STATUS:35714,VALIDATE_STATUS:35715,ATTACHED_SHADERS:35717,ACTIVE_UNIFORMS:35718,ACTIVE_ATTRIBUTES:35721,SHADING_LANGUAGE_VERSION:35724,CURRENT_PROGRAM:35725,NEVER:512,LESS:513,EQUAL:514,LEQUAL:515,GREATER:516,NOTEQUAL:517,GEQUAL:518,ALWAYS:519,KEEP:7680,REPLACE:7681,INCR:7682,DECR:7683,INVERT:5386,INCR_WRAP:34055,DECR_WRAP:34056,VENDOR:7936,RENDERER:7937,VERSION:7938,NEAREST:9728,LINEAR:9729,NEAREST_MIPMAP_NEAREST:9984,LINEAR_MIPMAP_NEAREST:9985,NEAREST_MIPMAP_LINEAR:9986,LINEAR_MIPMAP_LINEAR:9987,TEXTURE_MAG_FILTER:10240,TEXTURE_MIN_FILTER:10241,TEXTURE_WRAP_S:10242,TEXTURE_WRAP_T:10243,TEXTURE_2D:3553,TEXTURE:5890,TEXTURE_CUBE_MAP:34067,TEXTURE_BINDING_CUBE_MAP:34068,TEXTURE_CUBE_MAP_POSITIVE_X:34069,TEXTURE_CUBE_MAP_NEGATIVE_X:34070,TEXTURE_CUBE_MAP_POSITIVE_Y:34071,TEXTURE_CUBE_MAP_NEGATIVE_Y:34072,TEXTURE_CUBE_MAP_POSITIVE_Z:34073,TEXTURE_CUBE_MAP_NEGATIVE_Z:34074,MAX_CUBE_MAP_TEXTURE_SIZE:34076,TEXTURE0:33984,TEXTURE1:33985,TEXTURE2:33986,TEXTURE3:33987,TEXTURE4:33988,TEXTURE5:33989,TEXTURE6:33990,TEXTURE7:33991,TEXTURE8:33992,TEXTURE9:33993,TEXTURE10:33994,TEXTURE11:33995,TEXTURE12:33996,TEXTURE13:33997,TEXTURE14:33998,TEXTURE15:33999,TEXTURE16:34e3,TEXTURE17:34001,TEXTURE18:34002,TEXTURE19:34003,TEXTURE20:34004,TEXTURE21:34005,TEXTURE22:34006,TEXTURE23:34007,TEXTURE24:34008,TEXTURE25:34009,TEXTURE26:34010,TEXTURE27:34011,TEXTURE28:34012,TEXTURE29:34013,TEXTURE30:34014,TEXTURE31:34015,ACTIVE_TEXTURE:34016,REPEAT:10497,CLAMP_TO_EDGE:33071,MIRRORED_REPEAT:33648,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,INT_VEC2:35667,INT_VEC3:35668,INT_VEC4:35669,BOOL:35670,BOOL_VEC2:35671,BOOL_VEC3:35672,BOOL_VEC4:35673,FLOAT_MAT2:35674,FLOAT_MAT3:35675,FLOAT_MAT4:35676,SAMPLER_2D:35678,SAMPLER_CUBE:35680,VERTEX_ATTRIB_ARRAY_ENABLED:34338,VERTEX_ATTRIB_ARRAY_SIZE:34339,VERTEX_ATTRIB_ARRAY_STRIDE:34340,VERTEX_ATTRIB_ARRAY_TYPE:34341,VERTEX_ATTRIB_ARRAY_NORMALIZED:34922,VERTEX_ATTRIB_ARRAY_POINTER:34373,VERTEX_ATTRIB_ARRAY_BUFFER_BINDING:34975,COMPILE_STATUS:35713,LOW_FLOAT:36336,MEDIUM_FLOAT:36337,HIGH_FLOAT:36338,LOW_INT:36339,MEDIUM_INT:36340,HIGH_INT:36341,FRAMEBUFFER:36160,RENDERBUFFER:36161,RGBA4:32854,RGB5_A1:32855,RGB565:36194,DEPTH_COMPONENT16:33189,STENCIL_INDEX:6401,STENCIL_INDEX8:36168,DEPTH_STENCIL:34041,RENDERBUFFER_WIDTH:36162,RENDERBUFFER_HEIGHT:36163,RENDERBUFFER_INTERNAL_FORMAT:36164,RENDERBUFFER_RED_SIZE:36176,RENDERBUFFER_GREEN_SIZE:36177,RENDERBUFFER_BLUE_SIZE:36178,RENDERBUFFER_ALPHA_SIZE:36179,RENDERBUFFER_DEPTH_SIZE:36180,RENDERBUFFER_STENCIL_SIZE:36181,FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE:36048,FRAMEBUFFER_ATTACHMENT_OBJECT_NAME:36049,FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL:36050,FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE:36051,COLOR_ATTACHMENT0:36064,DEPTH_ATTACHMENT:36096,STENCIL_ATTACHMENT:36128,DEPTH_STENCIL_ATTACHMENT:33306,NONE:0,FRAMEBUFFER_COMPLETE:36053,FRAMEBUFFER_INCOMPLETE_ATTACHMENT:36054,FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:36055,FRAMEBUFFER_INCOMPLETE_DIMENSIONS:36057,FRAMEBUFFER_UNSUPPORTED:36061,FRAMEBUFFER_BINDING:36006,RENDERBUFFER_BINDING:36007,MAX_RENDERBUFFER_SIZE:34024,INVALID_FRAMEBUFFER_OPERATION:1286,UNPACK_FLIP_Y_WEBGL:37440,UNPACK_PREMULTIPLY_ALPHA_WEBGL:37441,CONTEXT_LOST_WEBGL:37442,UNPACK_COLORSPACE_CONVERSION_WEBGL:37443,BROWSER_DEFAULT_WEBGL:37444},D=S("YgoH"),T=function(){this.head=null,this.tail=null,this._length=0};T.prototype.insert=function(n){var e=new T.Entry(n);return this.insertEntry(e),e},T.prototype.insertAt=function(n,e){if(!(n<0)){for(var o=this.head,u=0;o&&u!=n;)o=o.next,u++;if(o){var c=new T.Entry(e),v=o.prev;v?(v.next=c,c.prev=v):this.head=c,c.next=o,o.prev=c}else this.insert(e)}},T.prototype.insertBeforeEntry=function(n,e){var o=new T.Entry(n),u=e.prev;u?(u.next=o,o.prev=u):this.head=o,o.next=e,e.prev=o,this._length++},T.prototype.insertEntry=function(n){this.head?(this.tail.next=n,n.prev=this.tail,this.tail=n):this.head=this.tail=n,this._length++},T.prototype.remove=function(n){var e=n.prev,o=n.next;e?e.next=o:this.head=o,o?o.prev=e:this.tail=e,n.next=n.prev=null,this._length--},T.prototype.removeAt=function(n){if(!(n<0)){for(var e=this.head,o=0;e&&o!=n;)e=e.next,o++;if(e)return this.remove(e),e.value}},T.prototype.getHead=function(){if(this.head)return this.head.value},T.prototype.getTail=function(){if(this.tail)return this.tail.value},T.prototype.getAt=function(n){if(!(n<0)){for(var e=this.head,o=0;e&&o!=n;)e=e.next,o++;return e.value}},T.prototype.indexOf=function(n){for(var e=this.head,o=0;e;){if(e.value===n)return o;e=e.next,o++}},T.prototype.length=function(){return this._length},T.prototype.isEmpty=function(){return this._length===0},T.prototype.forEach=function(n,e){for(var o=this.head,u=0,c=typeof e!="undefined";o;)c?n.call(e,o.value,u):n(o.value,u),o=o.next,u++},T.prototype.clear=function(){this.tail=this.head=null,this._length=0},T.Entry=function(n){this.value=n,this.next=null,this.prev=null};var O=T,C=function(e){this._list=new O,this._map={},this._maxSize=e||10};C.prototype.setMaxSize=function(n){this._maxSize=n},C.prototype.put=function(n,e){if(!this._map.hasOwnProperty(n)){var o=this._list.length();if(o>=this._maxSize&&o>0){var u=this._list.head;this._list.remove(u),delete this._map[u.key]}var c=this._list.insert(e);c.key=n,this._map[n]=c}},C.prototype.get=function(n){var e=this._map[n];if(this._map.hasOwnProperty(n))return e!==this._list.tail&&(this._list.remove(e),this._list.insertEntry(e)),e.value},C.prototype.remove=function(n){var e=this._map[n];typeof e!="undefined"&&(delete this._map[n],this._list.remove(e))},C.prototype.clear=function(){this._list.clear(),this._map={}};var L=C,w={},z={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function pt(n){return n=Math.round(n),n<0?0:n>255?255:n}function At(n){return n=Math.round(n),n<0?0:n>360?360:n}function rt(n){return n<0?0:n>1?1:n}function _t(n){return n.length&&n.charAt(n.length-1)==="%"?pt(parseFloat(n)/100*255):pt(parseInt(n,10))}function xt(n){return n.length&&n.charAt(n.length-1)==="%"?rt(parseFloat(n)/100):rt(parseFloat(n))}function ft(n,e,o){return o<0?o+=1:o>1&&(o-=1),o*6<1?n+(e-n)*o*6:o*2<1?e:o*3<2?n+(e-n)*(2/3-o)*6:n}function Mt(n,e,o){return n+(e-n)*o}function K(n,e,o,u,c){return n[0]=e,n[1]=o,n[2]=u,n[3]=c,n}function R(n,e){return n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=e[3],n}var tt=new L(20),Z=null;function ct(n,e){Z&&R(Z,e),Z=tt.put(n,Z||e.slice())}w.parse=function(n,e){if(!!n){e=e||[];var o=tt.get(n);if(o)return R(e,o);n=n+"";var u=n.replace(/ /g,"").toLowerCase();if(u in z)return R(e,z[u]),ct(n,e),e;if(u.charAt(0)==="#"){if(u.length===4){var c=parseInt(u.substr(1),16);if(!(c>=0&&c<=4095)){K(e,0,0,0,1);return}return K(e,(c&3840)>>4|(c&3840)>>8,c&240|(c&240)>>4,c&15|(c&15)<<4,1),ct(n,e),e}else if(u.length===7){var c=parseInt(u.substr(1),16);if(!(c>=0&&c<=16777215)){K(e,0,0,0,1);return}return K(e,(c&16711680)>>16,(c&65280)>>8,c&255,1),ct(n,e),e}return}var v=u.indexOf("("),g=u.indexOf(")");if(v!==-1&&g+1===u.length){var x=u.substr(0,v),_=u.substr(v+1,g-(v+1)).split(","),M=1;switch(x){case"rgba":if(_.length!==4){K(e,0,0,0,1);return}M=xt(_.pop());case"rgb":if(_.length!==3){K(e,0,0,0,1);return}return K(e,_t(_[0]),_t(_[1]),_t(_[2]),M),ct(n,e),e;case"hsla":if(_.length!==4){K(e,0,0,0,1);return}return _[3]=xt(_[3]),vt(_,e),ct(n,e),e;case"hsl":if(_.length!==3){K(e,0,0,0,1);return}return vt(_,e),ct(n,e),e;default:return}}K(e,0,0,0,1)}},w.parseToFloat=function(n,e){if(e=w.parse(n,e),!!e)return e[0]/=255,e[1]/=255,e[2]/=255,e};function vt(n,e){var o=(parseFloat(n[0])%360+360)%360/360,u=xt(n[1]),c=xt(n[2]),v=c<=.5?c*(u+1):c+u-c*u,g=c*2-v;return e=e||[],K(e,pt(ft(g,v,o+1/3)*255),pt(ft(g,v,o)*255),pt(ft(g,v,o-1/3)*255),1),n.length===4&&(e[3]=n[3]),e}function Ct(n){if(!!n){var e=n[0]/255,o=n[1]/255,u=n[2]/255,c=Math.min(e,o,u),v=Math.max(e,o,u),g=v-c,x=(v+c)/2,_,M;if(g===0)_=0,M=0;else{x<.5?M=g/(v+c):M=g/(2-v-c);var I=((v-e)/6+g/2)/g,F=((v-o)/6+g/2)/g,ut=((v-u)/6+g/2)/g;e===v?_=ut-F:o===v?_=1/3+I-ut:u===v&&(_=2/3+F-I),_<0&&(_+=1),_>1&&(_-=1)}var yt=[_*360,M,x];return n[3]!=null&&yt.push(n[3]),yt}}w.lift=function(n,e){var o=w.parse(n);if(o){for(var u=0;u<3;u++)e<0?o[u]=o[u]*(1-e)|0:o[u]=(255-o[u])*e+o[u]|0;return w.stringify(o,o.length===4?"rgba":"rgb")}},w.toHex=function(n){var e=w.parse(n);if(e)return((1<<24)+(e[0]<<16)+(e[1]<<8)+ +e[2]).toString(16).slice(1)},w.fastLerp=function(n,e,o){if(!(!(e&&e.length)||!(n>=0&&n<=1))){o=o||[];var u=n*(e.length-1),c=Math.floor(u),v=Math.ceil(u),g=e[c],x=e[v],_=u-c;return o[0]=pt(Mt(g[0],x[0],_)),o[1]=pt(Mt(g[1],x[1],_)),o[2]=pt(Mt(g[2],x[2],_)),o[3]=rt(Mt(g[3],x[3],_)),o}},w.fastMapToColor=w.fastLerp,w.lerp=function(n,e,o){if(!(!(e&&e.length)||!(n>=0&&n<=1))){var u=n*(e.length-1),c=Math.floor(u),v=Math.ceil(u),g=w.parse(e[c]),x=w.parse(e[v]),_=u-c,M=w.stringify([pt(Mt(g[0],x[0],_)),pt(Mt(g[1],x[1],_)),pt(Mt(g[2],x[2],_)),rt(Mt(g[3],x[3],_))],"rgba");return o?{color:M,leftIndex:c,rightIndex:v,value:u}:M}},w.mapToColor=w.lerp,w.modifyHSL=function(n,e,o,u){if(n=w.parse(n),n)return n=Ct(n),e!=null&&(n[0]=At(e)),o!=null&&(n[1]=xt(o)),u!=null&&(n[2]=xt(u)),w.stringify(vt(n),"rgba")},w.modifyAlpha=function(n,e){if(n=w.parse(n),n&&e!=null)return n[3]=rt(e),w.stringify(n,"rgba")},w.stringify=function(n,e){if(!(!n||!n.length)){var o=n[0]+","+n[1]+","+n[2];return(e==="rgba"||e==="hsva"||e==="hsla")&&(o+=","+n[3]),e+"("+o+")"}};var Bt=w,It=Bt.parseToFloat,Wt={};function ee(n){var e=Object.keys(n);e.sort();for(var o=[],u=0;u<e.length;u++){var c=e[u],v=n[c];v===null?o.push(c):o.push(c+" "+v.toString())}return o.join(`
`)}function ae(n,e,o){o.sort();for(var u=[],c=0;c<o.length;c++){var v=o[c];u.push(v)}var g=ee(n)+`
`+ee(e)+`
`+u.join(`
`);if(Wt[g])return Wt[g];var x=bt.genGUID();return Wt[g]=x,x}var ye=W.extend(function(){return{name:"",depthTest:!0,depthMask:!0,transparent:!1,blend:null,autoUpdateTextureStatus:!0,uniforms:{},vertexDefines:{},fragmentDefines:{},_textureStatus:{},_enabledUniforms:null}},function(){this.name||(this.name="MATERIAL_"+this.__uid__),this.shader&&this.attachShader(this.shader,!0)},{precision:"highp",setUniform:function(e,o){o===void 0&&console.warn('Uniform value "'+e+'" is undefined');var u=this.uniforms[e];u&&(typeof o=="string"&&(o=It(o)||o),u.value=o,this.autoUpdateTextureStatus&&u.type==="t"&&(o?this.enableTexture(e):this.disableTexture(e)))},setUniforms:function(e){for(var o in e){var u=e[o];this.setUniform(o,u)}},isUniformEnabled:function(e){return this._enabledUniforms.indexOf(e)>=0},getEnabledUniforms:function(){return this._enabledUniforms},getTextureUniforms:function(){return this._textureUniforms},set:function(e,o){if(typeof e=="object")for(var u in e){var c=e[u];this.setUniform(u,c)}else this.setUniform(e,o)},get:function(e){var o=this.uniforms[e];if(o)return o.value},attachShader:function(e,o){var u=this.uniforms;this.uniforms=e.createUniforms(),this.shader=e;var c=this.uniforms;this._enabledUniforms=Object.keys(c),this._enabledUniforms.sort(),this._textureUniforms=this._enabledUniforms.filter(function(I){var F=this.uniforms[I].type;return F==="t"||F==="tv"},this);var v=this.vertexDefines,g=this.fragmentDefines;if(this.vertexDefines=bt.clone(e.vertexDefines),this.fragmentDefines=bt.clone(e.fragmentDefines),o){for(var x in u)c[x]&&(c[x].value=u[x].value);bt.defaults(this.vertexDefines,v),bt.defaults(this.fragmentDefines,g)}var _={};for(var M in e.textures)_[M]={shaderType:e.textures[M].shaderType,type:e.textures[M].type,enabled:o&&this._textureStatus[M]?this._textureStatus[M].enabled:!1};this._textureStatus=_,this._programKey=""},clone:function(){var e=new this.constructor({name:this.name,shader:this.shader});for(var o in this.uniforms)e.uniforms[o].value=this.uniforms[o].value;return e.depthTest=this.depthTest,e.depthMask=this.depthMask,e.transparent=this.transparent,e.blend=this.blend,e.vertexDefines=bt.clone(this.vertexDefines),e.fragmentDefines=bt.clone(this.fragmentDefines),e.enableTexture(this.getEnabledTextures()),e.precision=this.precision,e},define:function(e,o,u){var c=this.vertexDefines,v=this.fragmentDefines;e!=="vertex"&&e!=="fragment"&&e!=="both"&&arguments.length<3&&(u=o,o=e,e="both"),u=u!=null?u:null,(e==="vertex"||e==="both")&&c[o]!==u&&(c[o]=u,this._programKey=""),(e==="fragment"||e==="both")&&v[o]!==u&&(v[o]=u,e!=="both"&&(this._programKey=""))},undefine:function(e,o){e!=="vertex"&&e!=="fragment"&&e!=="both"&&arguments.length<2&&(o=e,e="both"),(e==="vertex"||e==="both")&&this.isDefined("vertex",o)&&(delete this.vertexDefines[o],this._programKey=""),(e==="fragment"||e==="both")&&this.isDefined("fragment",o)&&(delete this.fragmentDefines[o],e!=="both"&&(this._programKey=""))},isDefined:function(e,o){switch(e){case"vertex":return this.vertexDefines[o]!==void 0;case"fragment":return this.fragmentDefines[o]!==void 0}},getDefine:function(e,o){switch(e){case"vertex":return this.vertexDefines[o];case"fragment":return this.fragmentDefines[o]}},enableTexture:function(e){if(Array.isArray(e)){for(var o=0;o<e.length;o++)this.enableTexture(e[o]);return}var u=this._textureStatus[e];if(u){var c=u.enabled;c||(u.enabled=!0,this._programKey="")}},enableTexturesAll:function(){var e=this._textureStatus;for(var o in e)e[o].enabled=!0;this._programKey=""},disableTexture:function(e){if(Array.isArray(e)){for(var o=0;o<e.length;o++)this.disableTexture(e[o]);return}var u=this._textureStatus[e];if(u){var c=!u.enabled;c||(u.enabled=!1,this._programKey="")}},disableTexturesAll:function(){var e=this._textureStatus;for(var o in e)e[o].enabled=!1;this._programKey=""},isTextureEnabled:function(e){var o=this._textureStatus;return!!o[e]&&o[e].enabled},getEnabledTextures:function(){var e=[],o=this._textureStatus;for(var u in o)o[u].enabled&&e.push(u);return e},dirtyDefines:function(){this._programKey=""},getProgramKey:function(){return this._programKey||(this._programKey=ae(this.vertexDefines,this.fragmentDefines,this.getEnabledTextures())),this._programKey}}),Le=ye,_e=1e-6,De=Array,er=Math.random,Ie={};Ie.create=function(){var n=new De(2);return n[0]=0,n[1]=0,n},Ie.clone=function(n){var e=new De(2);return e[0]=n[0],e[1]=n[1],e},Ie.fromValues=function(n,e){var o=new De(2);return o[0]=n,o[1]=e,o},Ie.copy=function(n,e){return n[0]=e[0],n[1]=e[1],n},Ie.set=function(n,e,o){return n[0]=e,n[1]=o,n},Ie.add=function(n,e,o){return n[0]=e[0]+o[0],n[1]=e[1]+o[1],n},Ie.subtract=function(n,e,o){return n[0]=e[0]-o[0],n[1]=e[1]-o[1],n},Ie.sub=Ie.subtract,Ie.multiply=function(n,e,o){return n[0]=e[0]*o[0],n[1]=e[1]*o[1],n},Ie.mul=Ie.multiply,Ie.divide=function(n,e,o){return n[0]=e[0]/o[0],n[1]=e[1]/o[1],n},Ie.div=Ie.divide,Ie.min=function(n,e,o){return n[0]=Math.min(e[0],o[0]),n[1]=Math.min(e[1],o[1]),n},Ie.max=function(n,e,o){return n[0]=Math.max(e[0],o[0]),n[1]=Math.max(e[1],o[1]),n},Ie.scale=function(n,e,o){return n[0]=e[0]*o,n[1]=e[1]*o,n},Ie.scaleAndAdd=function(n,e,o,u){return n[0]=e[0]+o[0]*u,n[1]=e[1]+o[1]*u,n},Ie.distance=function(n,e){var o=e[0]-n[0],u=e[1]-n[1];return Math.sqrt(o*o+u*u)},Ie.dist=Ie.distance,Ie.squaredDistance=function(n,e){var o=e[0]-n[0],u=e[1]-n[1];return o*o+u*u},Ie.sqrDist=Ie.squaredDistance,Ie.length=function(n){var e=n[0],o=n[1];return Math.sqrt(e*e+o*o)},Ie.len=Ie.length,Ie.squaredLength=function(n){var e=n[0],o=n[1];return e*e+o*o},Ie.sqrLen=Ie.squaredLength,Ie.negate=function(n,e){return n[0]=-e[0],n[1]=-e[1],n},Ie.inverse=function(n,e){return n[0]=1/e[0],n[1]=1/e[1],n},Ie.normalize=function(n,e){var o=e[0],u=e[1],c=o*o+u*u;return c>0&&(c=1/Math.sqrt(c),n[0]=e[0]*c,n[1]=e[1]*c),n},Ie.dot=function(n,e){return n[0]*e[0]+n[1]*e[1]},Ie.cross=function(n,e,o){var u=e[0]*o[1]-e[1]*o[0];return n[0]=n[1]=0,n[2]=u,n},Ie.lerp=function(n,e,o,u){var c=e[0],v=e[1];return n[0]=c+u*(o[0]-c),n[1]=v+u*(o[1]-v),n},Ie.random=function(n,e){e=e||1;var o=GLMAT_RANDOM()*2*Math.PI;return n[0]=Math.cos(o)*e,n[1]=Math.sin(o)*e,n},Ie.transformMat2=function(n,e,o){var u=e[0],c=e[1];return n[0]=o[0]*u+o[2]*c,n[1]=o[1]*u+o[3]*c,n},Ie.transformMat2d=function(n,e,o){var u=e[0],c=e[1];return n[0]=o[0]*u+o[2]*c+o[4],n[1]=o[1]*u+o[3]*c+o[5],n},Ie.transformMat3=function(n,e,o){var u=e[0],c=e[1];return n[0]=o[0]*u+o[3]*c+o[6],n[1]=o[1]*u+o[4]*c+o[7],n},Ie.transformMat4=function(n,e,o){var u=e[0],c=e[1];return n[0]=o[0]*u+o[4]*c+o[12],n[1]=o[1]*u+o[5]*c+o[13],n},Ie.forEach=function(){var n=Ie.create();return function(e,o,u,c,v,g){var x,_;for(o||(o=2),u||(u=0),c?_=Math.min(c*o+u,e.length):_=e.length,x=u;x<_;x+=o)n[0]=e[x],n[1]=e[x+1],v(n,n,g),e[x]=n[0],e[x+1]=n[1];return e}}();var Fe=Ie,He=function(e,o){e=e||0,o=o||0,this.array=Fe.fromValues(e,o),this._dirty=!0};if(He.prototype={constructor:He,add:function(e){return Fe.add(this.array,this.array,e.array),this._dirty=!0,this},set:function(e,o){return this.array[0]=e,this.array[1]=o,this._dirty=!0,this},setArray:function(e){return this.array[0]=e[0],this.array[1]=e[1],this._dirty=!0,this},clone:function(){return new He(this.x,this.y)},copy:function(e){return Fe.copy(this.array,e.array),this._dirty=!0,this},cross:function(e,o){return Fe.cross(e.array,this.array,o.array),e._dirty=!0,this},dist:function(e){return Fe.dist(this.array,e.array)},distance:function(e){return Fe.distance(this.array,e.array)},div:function(e){return Fe.div(this.array,this.array,e.array),this._dirty=!0,this},divide:function(e){return Fe.divide(this.array,this.array,e.array),this._dirty=!0,this},dot:function(e){return Fe.dot(this.array,e.array)},len:function(){return Fe.len(this.array)},length:function(){return Fe.length(this.array)},lerp:function(e,o,u){return Fe.lerp(this.array,e.array,o.array,u),this._dirty=!0,this},min:function(e){return Fe.min(this.array,this.array,e.array),this._dirty=!0,this},max:function(e){return Fe.max(this.array,this.array,e.array),this._dirty=!0,this},mul:function(e){return Fe.mul(this.array,this.array,e.array),this._dirty=!0,this},multiply:function(e){return Fe.multiply(this.array,this.array,e.array),this._dirty=!0,this},negate:function(){return Fe.negate(this.array,this.array),this._dirty=!0,this},normalize:function(){return Fe.normalize(this.array,this.array),this._dirty=!0,this},random:function(e){return Fe.random(this.array,e),this._dirty=!0,this},scale:function(e){return Fe.scale(this.array,this.array,e),this._dirty=!0,this},scaleAndAdd:function(e,o){return Fe.scaleAndAdd(this.array,this.array,e.array,o),this._dirty=!0,this},sqrDist:function(e){return Fe.sqrDist(this.array,e.array)},squaredDistance:function(e){return Fe.squaredDistance(this.array,e.array)},sqrLen:function(){return Fe.sqrLen(this.array)},squaredLength:function(){return Fe.squaredLength(this.array)},sub:function(e){return Fe.sub(this.array,this.array,e.array),this._dirty=!0,this},subtract:function(e){return Fe.subtract(this.array,this.array,e.array),this._dirty=!0,this},transformMat2:function(e){return Fe.transformMat2(this.array,this.array,e.array),this._dirty=!0,this},transformMat2d:function(e){return Fe.transformMat2d(this.array,this.array,e.array),this._dirty=!0,this},transformMat3:function(e){return Fe.transformMat3(this.array,this.array,e.array),this._dirty=!0,this},transformMat4:function(e){return Fe.transformMat4(this.array,this.array,e.array),this._dirty=!0,this},toString:function(){return"["+Array.prototype.join.call(this.array,",")+"]"},toArray:function(){return Array.prototype.slice.call(this.array)}},Object.defineProperty){var ur=He.prototype;Object.defineProperty(ur,"x",{get:function(){return this.array[0]},set:function(e){this.array[0]=e,this._dirty=!0}}),Object.defineProperty(ur,"y",{get:function(){return this.array[1]},set:function(e){this.array[1]=e,this._dirty=!0}})}He.add=function(n,e,o){return Fe.add(n.array,e.array,o.array),n._dirty=!0,n},He.set=function(n,e,o){return Fe.set(n.array,e,o),n._dirty=!0,n},He.copy=function(n,e){return Fe.copy(n.array,e.array),n._dirty=!0,n},He.cross=function(n,e,o){return Fe.cross(n.array,e.array,o.array),n._dirty=!0,n},He.dist=function(n,e){return Fe.distance(n.array,e.array)},He.distance=He.dist,He.div=function(n,e,o){return Fe.divide(n.array,e.array,o.array),n._dirty=!0,n},He.divide=He.div,He.dot=function(n,e){return Fe.dot(n.array,e.array)},He.len=function(n){return Fe.length(n.array)},He.lerp=function(n,e,o,u){return Fe.lerp(n.array,e.array,o.array,u),n._dirty=!0,n},He.min=function(n,e,o){return Fe.min(n.array,e.array,o.array),n._dirty=!0,n},He.max=function(n,e,o){return Fe.max(n.array,e.array,o.array),n._dirty=!0,n},He.mul=function(n,e,o){return Fe.multiply(n.array,e.array,o.array),n._dirty=!0,n},He.multiply=He.mul,He.negate=function(n,e){return Fe.negate(n.array,e.array),n._dirty=!0,n},He.normalize=function(n,e){return Fe.normalize(n.array,e.array),n._dirty=!0,n},He.random=function(n,e){return Fe.random(n.array,e),n._dirty=!0,n},He.scale=function(n,e,o){return Fe.scale(n.array,e.array,o),n._dirty=!0,n},He.scaleAndAdd=function(n,e,o,u){return Fe.scaleAndAdd(n.array,e.array,o.array,u),n._dirty=!0,n},He.sqrDist=function(n,e){return Fe.sqrDist(n.array,e.array)},He.squaredDistance=He.sqrDist,He.sqrLen=function(n){return Fe.sqrLen(n.array)},He.squaredLength=He.sqrLen,He.sub=function(n,e,o){return Fe.subtract(n.array,e.array,o.array),n._dirty=!0,n},He.subtract=He.sub,He.transformMat2=function(n,e,o){return Fe.transformMat2(n.array,e.array,o.array),n._dirty=!0,n},He.transformMat2d=function(n,e,o){return Fe.transformMat2d(n.array,e.array,o.array),n._dirty=!0,n},He.transformMat3=function(n,e,o){return Fe.transformMat3(n.array,e.array,o.array),n._dirty=!0,n},He.transformMat4=function(n,e,o){return Fe.transformMat4(n.array,e.array,o.array),n._dirty=!0,n};var br=He,kr=1,Xe=2,Ut=3,Qt={};function Yt(n){for(var e=n.split(`
`),o=0,u=e.length;o<u;o++)e[o]=o+1+": "+e[o];return e.join(`
`)}function Zt(n,e,o){if(!n.getShaderParameter(e,n.COMPILE_STATUS))return[n.getShaderInfoLog(e),Yt(o)].join(`
`)}var ce=new D.a.Float32Array(16),xe=W.extend({uniformSemantics:{},attributes:{}},function(){this._locations={},this._textureSlot=0,this._program=null},{bind:function(e){this._textureSlot=0,e.gl.useProgram(this._program)},hasUniform:function(e){var o=this._locations[e];return o!=null},useTextureSlot:function(e,o,u){o&&(e.gl.activeTexture(e.gl.TEXTURE0+u),o.isRenderable()?o.bind(e):o.unbind(e))},currentTextureSlot:function(){return this._textureSlot},resetTextureSlot:function(e){this._textureSlot=e||0},takeCurrentTextureSlot:function(e,o){var u=this._textureSlot;return this.useTextureSlot(e,o,u),this._textureSlot++,u},setUniform:function(e,o,u,c){var v=this._locations,g=v[u];if(g==null)return!1;switch(o){case"m4":if(!(c instanceof Float32Array)){for(var x=0;x<c.length;x++)ce[x]=c[x];c=ce}e.uniformMatrix4fv(g,!1,c);break;case"2i":e.uniform2i(g,c[0],c[1]);break;case"2f":e.uniform2f(g,c[0],c[1]);break;case"3i":e.uniform3i(g,c[0],c[1],c[2]);break;case"3f":e.uniform3f(g,c[0],c[1],c[2]);break;case"4i":e.uniform4i(g,c[0],c[1],c[2],c[3]);break;case"4f":e.uniform4f(g,c[0],c[1],c[2],c[3]);break;case"1i":e.uniform1i(g,c);break;case"1f":e.uniform1f(g,c);break;case"1fv":e.uniform1fv(g,c);break;case"1iv":e.uniform1iv(g,c);break;case"2iv":e.uniform2iv(g,c);break;case"2fv":e.uniform2fv(g,c);break;case"3iv":e.uniform3iv(g,c);break;case"3fv":e.uniform3fv(g,c);break;case"4iv":e.uniform4iv(g,c);break;case"4fv":e.uniform4fv(g,c);break;case"m2":case"m2v":e.uniformMatrix2fv(g,!1,c);break;case"m3":case"m3v":e.uniformMatrix3fv(g,!1,c);break;case"m4v":if(Array.isArray(c)&&Array.isArray(c[0])){for(var _=new D.a.Float32Array(c.length*16),M=0,x=0;x<c.length;x++)for(var I=c[x],F=0;F<16;F++)_[M++]=I[F];e.uniformMatrix4fv(g,!1,_)}else e.uniformMatrix4fv(g,!1,c);break}return!0},setUniformOfSemantic:function(e,o,u){var c=this.uniformSemantics[o];return c?this.setUniform(e,c.type,c.symbol,u):!1},enableAttributes:function(e,o,u){var c=e.gl,v=this._program,g=this._locations,x;u?x=u.__enabledAttributeList:x=Qt[e.__uid__],x||(u?x=u.__enabledAttributeList=[]:x=Qt[e.__uid__]=[]);for(var _=[],M=0;M<o.length;M++){var I=o[M];if(!this.attributes[I]){_[M]=-1;continue}var F=g[I];if(F==null){if(F=c.getAttribLocation(v,I),F===-1){_[M]=-1;continue}g[I]=F}_[M]=F,x[F]?x[F]=Xe:x[F]=kr}for(var M=0;M<x.length;M++)switch(x[M]){case kr:c.enableVertexAttribArray(M),x[M]=Ut;break;case Xe:x[M]=Ut;break;case Ut:c.disableVertexAttribArray(M),x[M]=0;break}return _},getAttribLocation:function(e,o){var u=this._locations,c=u[o];return c==null&&(c=e.getAttribLocation(this._program,o),u[o]=c),c},buildProgram:function(e,o,u,c){var v=e.createShader(e.VERTEX_SHADER),g=e.createProgram();e.shaderSource(v,u),e.compileShader(v);var x=e.createShader(e.FRAGMENT_SHADER);e.shaderSource(x,c),e.compileShader(x);var _=Zt(e,v,u);if(_||(_=Zt(e,x,c),_))return _;if(e.attachShader(g,v),e.attachShader(g,x),o.attributeSemantics.POSITION)e.bindAttribLocation(g,0,o.attributeSemantics.POSITION.symbol);else{var M=Object.keys(this.attributes);e.bindAttribLocation(g,0,M[0])}if(e.linkProgram(g),e.deleteShader(v),e.deleteShader(x),this._program=g,this.vertexCode=u,this.fragmentCode=c,!e.getProgramParameter(g,e.LINK_STATUS))return`Could not link program
`+e.getProgramInfoLog(g);for(var I=0;I<o.uniforms.length;I++){var F=o.uniforms[I];this._locations[F]=e.getUniformLocation(g,F)}}}),Kt=xe,Rt=/for\s*?\(int\s*?_idx_\s*\=\s*([\w-]+)\;\s*_idx_\s*<\s*([\w-]+);\s*_idx_\s*\+\+\s*\)\s*\{\{([\s\S]+?)(?=\}\})\}\}/g;function Jt(n,e,o){function u(g,x,_,M){var I="";isNaN(x)&&(x in e?x=e[x]:x=c[x]),isNaN(_)&&(_ in e?_=e[_]:_=c[_]);for(var F=parseInt(x);F<parseInt(_);F++)I+="{"+M.replace(/float\s*\(\s*_idx_\s*\)/g,F.toFixed(1)).replace(/_idx_/g,F)+"}";return I}var c={};for(var v in o)c[v+"_COUNT"]=o[v];return n.replace(Rt,u)}function Xt(n,e,o){var u=[];if(e)for(var c in e){var v=e[c];v>0&&u.push("#define "+c.toUpperCase()+"_COUNT "+v)}if(o)for(var g=0;g<o.length;g++){var x=o[g];u.push("#define "+x.toUpperCase()+"_ENABLED")}for(var x in n){var _=n[x];_===null?u.push("#define "+x):u.push("#define "+x+" "+_.toString())}return u.join(`
`)}function fe(n){for(var e=[],o=0;o<n.length;o++)e.push("#extension GL_"+n[o]+" : enable");return e.join(`
`)}function be(n){return["precision",n,"float"].join(" ")+`;
`+["precision",n,"int"].join(" ")+`;
`+["precision",n,"sampler2D"].join(" ")+`;
`}function Ae(n){this._renderer=n,this._cache={}}Ae.prototype.getProgram=function(n,e,o){var u=this._cache,c=n.isSkinnedMesh&&n.isSkinnedMesh(),v=n.isInstancedMesh&&n.isInstancedMesh(),g="s"+e.shader.shaderID+"m"+e.getProgramKey();o&&(g+="se"+o.getProgramKey(n.lightGroup)),c&&(g+=",sk"+n.joints.length),v&&(g+=",is");var x=u[g];if(x)return x;var _=o?o.getLightsNumbers(n.lightGroup):{},M=this._renderer,I=M.gl,F=e.getEnabledTextures(),ut="";if(c){var yt={SKINNING:null,JOINT_COUNT:n.joints.length};n.joints.length>M.getMaxJointNumber()&&(yt.USE_SKIN_MATRICES_TEXTURE=null),ut+=`
`+Xt(yt)+`
`}v&&(ut+=`
#define INSTANCING
`);var Dt=ut+Xt(e.vertexDefines,_,F),Et=ut+Xt(e.fragmentDefines,_,F),Pt=Dt+`
`+e.shader.vertex,Ht=["OES_standard_derivatives","EXT_shader_texture_lod"].filter(function(he){return M.getGLExtension(he)!=null});Ht.indexOf("EXT_shader_texture_lod")>=0&&(Et+=`
#define SUPPORT_TEXTURE_LOD`),Ht.indexOf("OES_standard_derivatives")>=0&&(Et+=`
#define SUPPORT_STANDARD_DERIVATIVES`);var $t=fe(Ht)+`
`+be(e.precision)+`
`+Et+`
`+e.shader.fragment,qt=Jt(Pt,e.vertexDefines,_),le=Jt($t,e.fragmentDefines,_),x=new Kt;x.uniformSemantics=e.shader.uniformSemantics,x.attributes=e.shader.attributes;var ie=x.buildProgram(I,e.shader,qt,le);return x.__error=ie,u[g]=x,x};var Ve=Ae,nr=/uniform\s+(bool|float|int|vec2|vec3|vec4|ivec2|ivec3|ivec4|mat2|mat3|mat4|sampler2D|samplerCube)\s+([\s\S]*?);/g,de=/attribute\s+(float|int|vec2|vec3|vec4)\s+([\s\S]*?);/g,_r=/#define\s+(\w+)?(\s+[\d-.]+)?\s*;?\s*\n/g,Nr={bool:"1i",int:"1i",sampler2D:"t",samplerCube:"t",float:"1f",vec2:"2f",vec3:"3f",vec4:"4f",ivec2:"2i",ivec3:"3i",ivec4:"4i",mat2:"m2",mat3:"m3",mat4:"m4"};function lr(n){for(var e=[],o=0;o<n;o++)e[o]=0;return e}var pr={bool:function(){return!0},int:function(){return 0},float:function(){return 0},sampler2D:function(){return null},samplerCube:function(){return null},vec2:function(){return lr(2)},vec3:function(){return lr(3)},vec4:function(){return lr(4)},ivec2:function(){return lr(2)},ivec3:function(){return lr(3)},ivec4:function(){return lr(4)},mat2:function(){return lr(4)},mat3:function(){return lr(9)},mat4:function(){return lr(16)},array:function(){return[]}},zn=["POSITION","NORMAL","BINORMAL","TANGENT","TEXCOORD","TEXCOORD_0","TEXCOORD_1","COLOR","JOINT","WEIGHT"],sa=["SKIN_MATRIX","VIEWPORT_SIZE","VIEWPORT","DEVICEPIXELRATIO","WINDOW_SIZE","NEAR","FAR","TIME"],Ze=["WORLD","VIEW","PROJECTION","WORLDVIEW","VIEWPROJECTION","WORLDVIEWPROJECTION","WORLDINVERSE","VIEWINVERSE","PROJECTIONINVERSE","WORLDVIEWINVERSE","VIEWPROJECTIONINVERSE","WORLDVIEWPROJECTIONINVERSE","WORLDTRANSPOSE","VIEWTRANSPOSE","PROJECTIONTRANSPOSE","WORLDVIEWTRANSPOSE","VIEWPROJECTIONTRANSPOSE","WORLDVIEWPROJECTIONTRANSPOSE","WORLDINVERSETRANSPOSE","VIEWINVERSETRANSPOSE","PROJECTIONINVERSETRANSPOSE","WORLDVIEWINVERSETRANSPOSE","VIEWPROJECTIONINVERSETRANSPOSE","WORLDVIEWPROJECTIONINVERSETRANSPOSE"],Ur={vec4:4,vec3:3,vec2:2,float:1},qe={},Ne={};function tl(n,e){var o="vertex:"+n+"fragment:"+e;if(qe[o])return qe[o];var u=bt.genGUID();return qe[o]=u,Ne[u]={vertex:n,fragment:e},u}function Oa(n){return n.replace(/[ \t]*\/\/.*\n/g,"").replace(/[ \t]*\/\*[\s\S]*?\*\//g,"")}function Aa(){console.error("Wrong uniform/attributes syntax")}function Ar(n,e){for(var o=/[,=\(\):]/,u=e.replace(/:\s*\[\s*(.*)\s*\]/g,"="+n+"($1)").replace(/\s+/g,"").split(/(?=[,=\(\):])/g),c=[],v=0;v<u.length;v++)u[v].match(o)?c.push(u[v].charAt(0),u[v].slice(1)):c.push(u[v]);u=c;var g=0,x=1,_=2,M=3,I=4,F=5,ut=g,yt={},Dt=null,Et;Pt(u[0]);function Pt(qt){qt||Aa();var le=qt.match(/\[(.*?)\]/);Et=qt.replace(/\[(.*?)\]/,""),yt[Et]={},le&&(yt[Et].isArray=!0,yt[Et].arraySize=le[1])}for(var v=1;v<u.length;v++){var Ht=u[v];if(!!Ht){if(Ht==="="){if(ut!==g&&ut!==M){Aa();break}ut=x;continue}else if(Ht===":"){ut=I;continue}else if(Ht===","){if(ut===_){if(!(Dt instanceof Array)){Aa();break}Dt.push(+u[++v])}else ut=F;continue}else if(Ht===")"){yt[Et].value=new D.a.Float32Array(Dt),Dt=null,ut=F;continue}else if(Ht==="("){if(ut!==_){Aa();break}if(!(Dt instanceof Array)){Aa();break}Dt.push(+u[++v]);continue}else if(Ht.indexOf("vec")>=0){if(ut!==x&&ut!==I){Aa();break}ut=_,Dt=[];continue}else if(ut===x){n==="bool"?yt[Et].value=Ht==="true":yt[Et].value=parseFloat(Ht),Dt=null;continue}else if(ut===I){var $t=Ht;zn.indexOf($t)>=0||sa.indexOf($t)>=0||Ze.indexOf($t)>=0?yt[Et].semantic=$t:$t==="ignore"||$t==="unconfigurable"?yt[Et].ignore=!0:n==="bool"?yt[Et].value=$t==="true":yt[Et].value=parseFloat($t);continue}Pt(Ht),ut=g}}return yt}function Tn(n,e){typeof n=="object"&&(e=n.fragment,n=n.vertex),n=Oa(n),e=Oa(e),this._shaderID=tl(n,e),this._vertexCode=Tn.parseImport(n),this._fragmentCode=Tn.parseImport(e),this.attributeSemantics={},this.matrixSemantics={},this.uniformSemantics={},this.matrixSemanticKeys=[],this.uniformTemplates={},this.attributes={},this.textures={},this.vertexDefines={},this.fragmentDefines={},this._parseAttributes(),this._parseUniforms(),this._parseDefines()}Tn.prototype={constructor:Tn,createUniforms:function(){var e={};for(var o in this.uniformTemplates){var u=this.uniformTemplates[o];e[o]={type:u.type,value:u.value()}}return e},_parseImport:function(){this._vertexCode=Tn.parseImport(this.vertex),this._fragmentCode=Tn.parseImport(this.fragment)},_addSemanticUniform:function(e,o,u){if(zn.indexOf(u)>=0)this.attributeSemantics[u]={symbol:e,type:o};else if(Ze.indexOf(u)>=0){var c=!1,v=u;u.match(/TRANSPOSE$/)&&(c=!0,v=u.slice(0,-9)),this.matrixSemantics[u]={symbol:e,type:o,isTranspose:c,semanticNoTranspose:v}}else sa.indexOf(u)>=0&&(this.uniformSemantics[u]={symbol:e,type:o})},_addMaterialUniform:function(e,o,u,c,v,g){g[e]={type:u,value:v?pr.array:c||pr[o],semantic:null}},_parseUniforms:function(){var e={},o=this,u="vertex";this._uniformList=[],this._vertexCode=this._vertexCode.replace(nr,v),u="fragment",this._fragmentCode=this._fragmentCode.replace(nr,v),o.matrixSemanticKeys=Object.keys(this.matrixSemantics);function c(g){return g!=null?function(){return g}:null}function v(g,x,_){var M=Ar(x,_),I=[];for(var F in M){var ut=M[F],yt=ut.semantic,Dt=F,Et=Nr[x],Pt=c(M[F].value);M[F].isArray&&(Dt+="["+M[F].arraySize+"]",Et+="v"),I.push(Dt),o._uniformList.push(F),ut.ignore||((x==="sampler2D"||x==="samplerCube")&&(o.textures[F]={shaderType:u,type:x}),yt?o._addSemanticUniform(F,Et,yt):o._addMaterialUniform(F,x,Et,Pt,M[F].isArray,e))}return I.length>0?"uniform "+x+" "+I.join(",")+`;
`:""}this.uniformTemplates=e},_parseAttributes:function(){var e={},o=this;this._vertexCode=this._vertexCode.replace(de,u);function u(c,v,g){var x=Ar(v,g),_=Ur[v]||1,M=[];for(var I in x){var F=x[I].semantic;if(e[I]={type:"float",size:_,semantic:F||null},F){if(zn.indexOf(F)<0)throw new Error('Unkown semantic "'+F+'"');o.attributeSemantics[F]={symbol:I,type:v}}M.push(I)}return"attribute "+v+" "+M.join(",")+`;
`}this.attributes=e},_parseDefines:function(){var e=this,o="vertex";this._vertexCode=this._vertexCode.replace(_r,u),o="fragment",this._fragmentCode=this._fragmentCode.replace(_r,u);function u(c,v,g){var x=o==="vertex"?e.vertexDefines:e.fragmentDefines;return x[v]||(g==="false"?x[v]=!1:g==="true"?x[v]=!0:x[v]=g?isNaN(parseFloat(g))?g.trim():parseFloat(g):null),""}},clone:function(){var e=Ne[this._shaderID],o=new Tn(e.vertex,e.fragment);return o}},Object.defineProperty&&(Object.defineProperty(Tn.prototype,"shaderID",{get:function(){return this._shaderID}}),Object.defineProperty(Tn.prototype,"vertex",{get:function(){return this._vertexCode}}),Object.defineProperty(Tn.prototype,"fragment",{get:function(){return this._fragmentCode}}),Object.defineProperty(Tn.prototype,"uniforms",{get:function(){return this._uniformList}}));var hf=/(@import)\s*([0-9a-zA-Z_\-\.]*)/g;Tn.parseImport=function(n){return n=n.replace(hf,function(e,o,u){var e=Tn.source(u);return e?Tn.parseImport(e):(console.error('Shader chunk "'+u+'" not existed in library'),"")}),n};var Ma=/(@export)\s*([0-9a-zA-Z_\-\.]*)\s*\n([\s\S]*?)@end/g;Tn.import=function(n){n.replace(Ma,function(e,o,u,c){var c=c.replace(/(^[\s\t\xa0\u3000]+)|([\u3000\xa0\s\t]+\x24)/g,"");if(c){for(var v=u.split("."),g=Tn.codes,x=0,_;x<v.length-1;)_=v[x++],g[_]||(g[_]={}),g=g[_];_=v[x],g[_]=c}return c})},Tn.codes={},Tn.source=function(n){for(var e=n.split("."),o=Tn.codes,u=0;o&&u<e.length;){var c=e[u++];o=o[c]}return typeof o!="string"?(console.error('Shader "'+n+'" not existed in library'),""):o};var cr=Tn,el=`@export clay.prez.vertex
uniform mat4 WVP : WORLDVIEWPROJECTION;
attribute vec3 pos : POSITION;
attribute vec2 uv : TEXCOORD_0;
uniform vec2 uvRepeat : [1.0, 1.0];
uniform vec2 uvOffset : [0.0, 0.0];
@import clay.chunk.skinning_header
@import clay.chunk.instancing_header
varying vec2 v_Texcoord;
void main()
{
 vec4 P = vec4(pos, 1.0);
#ifdef SKINNING
 @import clay.chunk.skin_matrix
 P = skinMatrixWS * P;
#endif
#ifdef INSTANCING
 @import clay.chunk.instancing_matrix
 P = instanceMat * P;
#endif
 gl_Position = WVP * P;
 v_Texcoord = uv * uvRepeat + uvOffset;
}
@end
@export clay.prez.fragment
uniform sampler2D alphaMap;
uniform float alphaCutoff: 0.0;
varying vec2 v_Texcoord;
void main()
{
 if (alphaCutoff > 0.0) {
 if (texture2D(alphaMap, v_Texcoord).a <= alphaCutoff) {
 discard;
 }
 }
 gl_FragColor = vec4(0.0,0.0,0.0,1.0);
}
@end`,sn={};sn.create=function(){var n=new De(16);return n[0]=1,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=1,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[10]=1,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,n},sn.clone=function(n){var e=new De(16);return e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e[4]=n[4],e[5]=n[5],e[6]=n[6],e[7]=n[7],e[8]=n[8],e[9]=n[9],e[10]=n[10],e[11]=n[11],e[12]=n[12],e[13]=n[13],e[14]=n[14],e[15]=n[15],e},sn.copy=function(n,e){return n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=e[3],n[4]=e[4],n[5]=e[5],n[6]=e[6],n[7]=e[7],n[8]=e[8],n[9]=e[9],n[10]=e[10],n[11]=e[11],n[12]=e[12],n[13]=e[13],n[14]=e[14],n[15]=e[15],n},sn.identity=function(n){return n[0]=1,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=1,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[10]=1,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,n},sn.transpose=function(n,e){if(n===e){var o=e[1],u=e[2],c=e[3],v=e[6],g=e[7],x=e[11];n[1]=e[4],n[2]=e[8],n[3]=e[12],n[4]=o,n[6]=e[9],n[7]=e[13],n[8]=u,n[9]=v,n[11]=e[14],n[12]=c,n[13]=g,n[14]=x}else n[0]=e[0],n[1]=e[4],n[2]=e[8],n[3]=e[12],n[4]=e[1],n[5]=e[5],n[6]=e[9],n[7]=e[13],n[8]=e[2],n[9]=e[6],n[10]=e[10],n[11]=e[14],n[12]=e[3],n[13]=e[7],n[14]=e[11],n[15]=e[15];return n},sn.invert=function(n,e){var o=e[0],u=e[1],c=e[2],v=e[3],g=e[4],x=e[5],_=e[6],M=e[7],I=e[8],F=e[9],ut=e[10],yt=e[11],Dt=e[12],Et=e[13],Pt=e[14],Ht=e[15],$t=o*x-u*g,qt=o*_-c*g,le=o*M-v*g,ie=u*_-c*x,he=u*M-v*x,Re=c*M-v*_,ze=I*Et-F*Dt,Pe=I*Pt-ut*Dt,Ke=I*Ht-yt*Dt,rr=F*Pt-ut*Et,Ue=F*Ht-yt*Et,hr=ut*Ht-yt*Pt,ke=$t*hr-qt*Ue+le*rr+ie*Ke-he*Pe+Re*ze;return ke?(ke=1/ke,n[0]=(x*hr-_*Ue+M*rr)*ke,n[1]=(c*Ue-u*hr-v*rr)*ke,n[2]=(Et*Re-Pt*he+Ht*ie)*ke,n[3]=(ut*he-F*Re-yt*ie)*ke,n[4]=(_*Ke-g*hr-M*Pe)*ke,n[5]=(o*hr-c*Ke+v*Pe)*ke,n[6]=(Pt*le-Dt*Re-Ht*qt)*ke,n[7]=(I*Re-ut*le+yt*qt)*ke,n[8]=(g*Ue-x*Ke+M*ze)*ke,n[9]=(u*Ke-o*Ue-v*ze)*ke,n[10]=(Dt*he-Et*le+Ht*$t)*ke,n[11]=(F*le-I*he-yt*$t)*ke,n[12]=(x*Pe-g*rr-_*ze)*ke,n[13]=(o*rr-u*Pe+c*ze)*ke,n[14]=(Et*qt-Dt*ie-Pt*$t)*ke,n[15]=(I*ie-F*qt+ut*$t)*ke,n):null},sn.adjoint=function(n,e){var o=e[0],u=e[1],c=e[2],v=e[3],g=e[4],x=e[5],_=e[6],M=e[7],I=e[8],F=e[9],ut=e[10],yt=e[11],Dt=e[12],Et=e[13],Pt=e[14],Ht=e[15];return n[0]=x*(ut*Ht-yt*Pt)-F*(_*Ht-M*Pt)+Et*(_*yt-M*ut),n[1]=-(u*(ut*Ht-yt*Pt)-F*(c*Ht-v*Pt)+Et*(c*yt-v*ut)),n[2]=u*(_*Ht-M*Pt)-x*(c*Ht-v*Pt)+Et*(c*M-v*_),n[3]=-(u*(_*yt-M*ut)-x*(c*yt-v*ut)+F*(c*M-v*_)),n[4]=-(g*(ut*Ht-yt*Pt)-I*(_*Ht-M*Pt)+Dt*(_*yt-M*ut)),n[5]=o*(ut*Ht-yt*Pt)-I*(c*Ht-v*Pt)+Dt*(c*yt-v*ut),n[6]=-(o*(_*Ht-M*Pt)-g*(c*Ht-v*Pt)+Dt*(c*M-v*_)),n[7]=o*(_*yt-M*ut)-g*(c*yt-v*ut)+I*(c*M-v*_),n[8]=g*(F*Ht-yt*Et)-I*(x*Ht-M*Et)+Dt*(x*yt-M*F),n[9]=-(o*(F*Ht-yt*Et)-I*(u*Ht-v*Et)+Dt*(u*yt-v*F)),n[10]=o*(x*Ht-M*Et)-g*(u*Ht-v*Et)+Dt*(u*M-v*x),n[11]=-(o*(x*yt-M*F)-g*(u*yt-v*F)+I*(u*M-v*x)),n[12]=-(g*(F*Pt-ut*Et)-I*(x*Pt-_*Et)+Dt*(x*ut-_*F)),n[13]=o*(F*Pt-ut*Et)-I*(u*Pt-c*Et)+Dt*(u*ut-c*F),n[14]=-(o*(x*Pt-_*Et)-g*(u*Pt-c*Et)+Dt*(u*_-c*x)),n[15]=o*(x*ut-_*F)-g*(u*ut-c*F)+I*(u*_-c*x),n},sn.determinant=function(n){var e=n[0],o=n[1],u=n[2],c=n[3],v=n[4],g=n[5],x=n[6],_=n[7],M=n[8],I=n[9],F=n[10],ut=n[11],yt=n[12],Dt=n[13],Et=n[14],Pt=n[15],Ht=e*g-o*v,$t=e*x-u*v,qt=e*_-c*v,le=o*x-u*g,ie=o*_-c*g,he=u*_-c*x,Re=M*Dt-I*yt,ze=M*Et-F*yt,Pe=M*Pt-ut*yt,Ke=I*Et-F*Dt,rr=I*Pt-ut*Dt,Ue=F*Pt-ut*Et;return Ht*Ue-$t*rr+qt*Ke+le*Pe-ie*ze+he*Re},sn.multiply=function(n,e,o){var u=e[0],c=e[1],v=e[2],g=e[3],x=e[4],_=e[5],M=e[6],I=e[7],F=e[8],ut=e[9],yt=e[10],Dt=e[11],Et=e[12],Pt=e[13],Ht=e[14],$t=e[15],qt=o[0],le=o[1],ie=o[2],he=o[3];return n[0]=qt*u+le*x+ie*F+he*Et,n[1]=qt*c+le*_+ie*ut+he*Pt,n[2]=qt*v+le*M+ie*yt+he*Ht,n[3]=qt*g+le*I+ie*Dt+he*$t,qt=o[4],le=o[5],ie=o[6],he=o[7],n[4]=qt*u+le*x+ie*F+he*Et,n[5]=qt*c+le*_+ie*ut+he*Pt,n[6]=qt*v+le*M+ie*yt+he*Ht,n[7]=qt*g+le*I+ie*Dt+he*$t,qt=o[8],le=o[9],ie=o[10],he=o[11],n[8]=qt*u+le*x+ie*F+he*Et,n[9]=qt*c+le*_+ie*ut+he*Pt,n[10]=qt*v+le*M+ie*yt+he*Ht,n[11]=qt*g+le*I+ie*Dt+he*$t,qt=o[12],le=o[13],ie=o[14],he=o[15],n[12]=qt*u+le*x+ie*F+he*Et,n[13]=qt*c+le*_+ie*ut+he*Pt,n[14]=qt*v+le*M+ie*yt+he*Ht,n[15]=qt*g+le*I+ie*Dt+he*$t,n},sn.multiplyAffine=function(n,e,o){var u=e[0],c=e[1],v=e[2],g=e[4],x=e[5],_=e[6],M=e[8],I=e[9],F=e[10],ut=e[12],yt=e[13],Dt=e[14],Et=o[0],Pt=o[1],Ht=o[2];return n[0]=Et*u+Pt*g+Ht*M,n[1]=Et*c+Pt*x+Ht*I,n[2]=Et*v+Pt*_+Ht*F,Et=o[4],Pt=o[5],Ht=o[6],n[4]=Et*u+Pt*g+Ht*M,n[5]=Et*c+Pt*x+Ht*I,n[6]=Et*v+Pt*_+Ht*F,Et=o[8],Pt=o[9],Ht=o[10],n[8]=Et*u+Pt*g+Ht*M,n[9]=Et*c+Pt*x+Ht*I,n[10]=Et*v+Pt*_+Ht*F,Et=o[12],Pt=o[13],Ht=o[14],n[12]=Et*u+Pt*g+Ht*M+ut,n[13]=Et*c+Pt*x+Ht*I+yt,n[14]=Et*v+Pt*_+Ht*F+Dt,n},sn.mul=sn.multiply,sn.mulAffine=sn.multiplyAffine,sn.translate=function(n,e,o){var u=o[0],c=o[1],v=o[2],g,x,_,M,I,F,ut,yt,Dt,Et,Pt,Ht;return e===n?(n[12]=e[0]*u+e[4]*c+e[8]*v+e[12],n[13]=e[1]*u+e[5]*c+e[9]*v+e[13],n[14]=e[2]*u+e[6]*c+e[10]*v+e[14],n[15]=e[3]*u+e[7]*c+e[11]*v+e[15]):(g=e[0],x=e[1],_=e[2],M=e[3],I=e[4],F=e[5],ut=e[6],yt=e[7],Dt=e[8],Et=e[9],Pt=e[10],Ht=e[11],n[0]=g,n[1]=x,n[2]=_,n[3]=M,n[4]=I,n[5]=F,n[6]=ut,n[7]=yt,n[8]=Dt,n[9]=Et,n[10]=Pt,n[11]=Ht,n[12]=g*u+I*c+Dt*v+e[12],n[13]=x*u+F*c+Et*v+e[13],n[14]=_*u+ut*c+Pt*v+e[14],n[15]=M*u+yt*c+Ht*v+e[15]),n},sn.scale=function(n,e,o){var u=o[0],c=o[1],v=o[2];return n[0]=e[0]*u,n[1]=e[1]*u,n[2]=e[2]*u,n[3]=e[3]*u,n[4]=e[4]*c,n[5]=e[5]*c,n[6]=e[6]*c,n[7]=e[7]*c,n[8]=e[8]*v,n[9]=e[9]*v,n[10]=e[10]*v,n[11]=e[11]*v,n[12]=e[12],n[13]=e[13],n[14]=e[14],n[15]=e[15],n},sn.rotate=function(n,e,o,u){var c=u[0],v=u[1],g=u[2],x=Math.sqrt(c*c+v*v+g*g),_,M,I,F,ut,yt,Dt,Et,Pt,Ht,$t,qt,le,ie,he,Re,ze,Pe,Ke,rr,Ue,hr,ke,Lr;return Math.abs(x)<_e?null:(x=1/x,c*=x,v*=x,g*=x,_=Math.sin(o),M=Math.cos(o),I=1-M,F=e[0],ut=e[1],yt=e[2],Dt=e[3],Et=e[4],Pt=e[5],Ht=e[6],$t=e[7],qt=e[8],le=e[9],ie=e[10],he=e[11],Re=c*c*I+M,ze=v*c*I+g*_,Pe=g*c*I-v*_,Ke=c*v*I-g*_,rr=v*v*I+M,Ue=g*v*I+c*_,hr=c*g*I+v*_,ke=v*g*I-c*_,Lr=g*g*I+M,n[0]=F*Re+Et*ze+qt*Pe,n[1]=ut*Re+Pt*ze+le*Pe,n[2]=yt*Re+Ht*ze+ie*Pe,n[3]=Dt*Re+$t*ze+he*Pe,n[4]=F*Ke+Et*rr+qt*Ue,n[5]=ut*Ke+Pt*rr+le*Ue,n[6]=yt*Ke+Ht*rr+ie*Ue,n[7]=Dt*Ke+$t*rr+he*Ue,n[8]=F*hr+Et*ke+qt*Lr,n[9]=ut*hr+Pt*ke+le*Lr,n[10]=yt*hr+Ht*ke+ie*Lr,n[11]=Dt*hr+$t*ke+he*Lr,e!==n&&(n[12]=e[12],n[13]=e[13],n[14]=e[14],n[15]=e[15]),n)},sn.rotateX=function(n,e,o){var u=Math.sin(o),c=Math.cos(o),v=e[4],g=e[5],x=e[6],_=e[7],M=e[8],I=e[9],F=e[10],ut=e[11];return e!==n&&(n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=e[3],n[12]=e[12],n[13]=e[13],n[14]=e[14],n[15]=e[15]),n[4]=v*c+M*u,n[5]=g*c+I*u,n[6]=x*c+F*u,n[7]=_*c+ut*u,n[8]=M*c-v*u,n[9]=I*c-g*u,n[10]=F*c-x*u,n[11]=ut*c-_*u,n},sn.rotateY=function(n,e,o){var u=Math.sin(o),c=Math.cos(o),v=e[0],g=e[1],x=e[2],_=e[3],M=e[8],I=e[9],F=e[10],ut=e[11];return e!==n&&(n[4]=e[4],n[5]=e[5],n[6]=e[6],n[7]=e[7],n[12]=e[12],n[13]=e[13],n[14]=e[14],n[15]=e[15]),n[0]=v*c-M*u,n[1]=g*c-I*u,n[2]=x*c-F*u,n[3]=_*c-ut*u,n[8]=v*u+M*c,n[9]=g*u+I*c,n[10]=x*u+F*c,n[11]=_*u+ut*c,n},sn.rotateZ=function(n,e,o){var u=Math.sin(o),c=Math.cos(o),v=e[0],g=e[1],x=e[2],_=e[3],M=e[4],I=e[5],F=e[6],ut=e[7];return e!==n&&(n[8]=e[8],n[9]=e[9],n[10]=e[10],n[11]=e[11],n[12]=e[12],n[13]=e[13],n[14]=e[14],n[15]=e[15]),n[0]=v*c+M*u,n[1]=g*c+I*u,n[2]=x*c+F*u,n[3]=_*c+ut*u,n[4]=M*c-v*u,n[5]=I*c-g*u,n[6]=F*c-x*u,n[7]=ut*c-_*u,n},sn.fromRotationTranslation=function(n,e,o){var u=e[0],c=e[1],v=e[2],g=e[3],x=u+u,_=c+c,M=v+v,I=u*x,F=u*_,ut=u*M,yt=c*_,Dt=c*M,Et=v*M,Pt=g*x,Ht=g*_,$t=g*M;return n[0]=1-(yt+Et),n[1]=F+$t,n[2]=ut-Ht,n[3]=0,n[4]=F-$t,n[5]=1-(I+Et),n[6]=Dt+Pt,n[7]=0,n[8]=ut+Ht,n[9]=Dt-Pt,n[10]=1-(I+yt),n[11]=0,n[12]=o[0],n[13]=o[1],n[14]=o[2],n[15]=1,n},sn.fromQuat=function(n,e){var o=e[0],u=e[1],c=e[2],v=e[3],g=o+o,x=u+u,_=c+c,M=o*g,I=u*g,F=u*x,ut=c*g,yt=c*x,Dt=c*_,Et=v*g,Pt=v*x,Ht=v*_;return n[0]=1-F-Dt,n[1]=I+Ht,n[2]=ut-Pt,n[3]=0,n[4]=I-Ht,n[5]=1-M-Dt,n[6]=yt+Et,n[7]=0,n[8]=ut+Pt,n[9]=yt-Et,n[10]=1-M-F,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,n},sn.frustum=function(n,e,o,u,c,v,g){var x=1/(o-e),_=1/(c-u),M=1/(v-g);return n[0]=v*2*x,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=v*2*_,n[6]=0,n[7]=0,n[8]=(o+e)*x,n[9]=(c+u)*_,n[10]=(g+v)*M,n[11]=-1,n[12]=0,n[13]=0,n[14]=g*v*2*M,n[15]=0,n},sn.perspective=function(n,e,o,u,c){var v=1/Math.tan(e/2),g=1/(u-c);return n[0]=v/o,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=v,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[10]=(c+u)*g,n[11]=-1,n[12]=0,n[13]=0,n[14]=2*c*u*g,n[15]=0,n},sn.ortho=function(n,e,o,u,c,v,g){var x=1/(e-o),_=1/(u-c),M=1/(v-g);return n[0]=-2*x,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=-2*_,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[10]=2*M,n[11]=0,n[12]=(e+o)*x,n[13]=(c+u)*_,n[14]=(g+v)*M,n[15]=1,n},sn.lookAt=function(n,e,o,u){var c,v,g,x,_,M,I,F,ut,yt,Dt=e[0],Et=e[1],Pt=e[2],Ht=u[0],$t=u[1],qt=u[2],le=o[0],ie=o[1],he=o[2];return Math.abs(Dt-le)<_e&&Math.abs(Et-ie)<_e&&Math.abs(Pt-he)<_e?sn.identity(n):(I=Dt-le,F=Et-ie,ut=Pt-he,yt=1/Math.sqrt(I*I+F*F+ut*ut),I*=yt,F*=yt,ut*=yt,c=$t*ut-qt*F,v=qt*I-Ht*ut,g=Ht*F-$t*I,yt=Math.sqrt(c*c+v*v+g*g),yt?(yt=1/yt,c*=yt,v*=yt,g*=yt):(c=0,v=0,g=0),x=F*g-ut*v,_=ut*c-I*g,M=I*v-F*c,yt=Math.sqrt(x*x+_*_+M*M),yt?(yt=1/yt,x*=yt,_*=yt,M*=yt):(x=0,_=0,M=0),n[0]=c,n[1]=x,n[2]=I,n[3]=0,n[4]=v,n[5]=_,n[6]=F,n[7]=0,n[8]=g,n[9]=M,n[10]=ut,n[11]=0,n[12]=-(c*Dt+v*Et+g*Pt),n[13]=-(x*Dt+_*Et+M*Pt),n[14]=-(I*Dt+F*Et+ut*Pt),n[15]=1,n)},sn.frob=function(n){return Math.sqrt(Math.pow(n[0],2)+Math.pow(n[1],2)+Math.pow(n[2],2)+Math.pow(n[3],2)+Math.pow(n[4],2)+Math.pow(n[5],2)+Math.pow(n[6],2)+Math.pow(n[7],2)+Math.pow(n[8],2)+Math.pow(n[9],2)+Math.pow(n[10],2)+Math.pow(n[11],2)+Math.pow(n[12],2)+Math.pow(n[13],2)+Math.pow(n[14],2)+Math.pow(n[15],2))};var ir=sn,Er={};Er.create=function(){var n=new De(3);return n[0]=0,n[1]=0,n[2]=0,n},Er.clone=function(n){var e=new De(3);return e[0]=n[0],e[1]=n[1],e[2]=n[2],e},Er.fromValues=function(n,e,o){var u=new De(3);return u[0]=n,u[1]=e,u[2]=o,u},Er.copy=function(n,e){return n[0]=e[0],n[1]=e[1],n[2]=e[2],n},Er.set=function(n,e,o,u){return n[0]=e,n[1]=o,n[2]=u,n},Er.add=function(n,e,o){return n[0]=e[0]+o[0],n[1]=e[1]+o[1],n[2]=e[2]+o[2],n},Er.subtract=function(n,e,o){return n[0]=e[0]-o[0],n[1]=e[1]-o[1],n[2]=e[2]-o[2],n},Er.sub=Er.subtract,Er.multiply=function(n,e,o){return n[0]=e[0]*o[0],n[1]=e[1]*o[1],n[2]=e[2]*o[2],n},Er.mul=Er.multiply,Er.divide=function(n,e,o){return n[0]=e[0]/o[0],n[1]=e[1]/o[1],n[2]=e[2]/o[2],n},Er.div=Er.divide,Er.min=function(n,e,o){return n[0]=Math.min(e[0],o[0]),n[1]=Math.min(e[1],o[1]),n[2]=Math.min(e[2],o[2]),n},Er.max=function(n,e,o){return n[0]=Math.max(e[0],o[0]),n[1]=Math.max(e[1],o[1]),n[2]=Math.max(e[2],o[2]),n},Er.scale=function(n,e,o){return n[0]=e[0]*o,n[1]=e[1]*o,n[2]=e[2]*o,n},Er.scaleAndAdd=function(n,e,o,u){return n[0]=e[0]+o[0]*u,n[1]=e[1]+o[1]*u,n[2]=e[2]+o[2]*u,n},Er.distance=function(n,e){var o=e[0]-n[0],u=e[1]-n[1],c=e[2]-n[2];return Math.sqrt(o*o+u*u+c*c)},Er.dist=Er.distance,Er.squaredDistance=function(n,e){var o=e[0]-n[0],u=e[1]-n[1],c=e[2]-n[2];return o*o+u*u+c*c},Er.sqrDist=Er.squaredDistance,Er.length=function(n){var e=n[0],o=n[1],u=n[2];return Math.sqrt(e*e+o*o+u*u)},Er.len=Er.length,Er.squaredLength=function(n){var e=n[0],o=n[1],u=n[2];return e*e+o*o+u*u},Er.sqrLen=Er.squaredLength,Er.negate=function(n,e){return n[0]=-e[0],n[1]=-e[1],n[2]=-e[2],n},Er.inverse=function(n,e){return n[0]=1/e[0],n[1]=1/e[1],n[2]=1/e[2],n},Er.normalize=function(n,e){var o=e[0],u=e[1],c=e[2],v=o*o+u*u+c*c;return v>0&&(v=1/Math.sqrt(v),n[0]=e[0]*v,n[1]=e[1]*v,n[2]=e[2]*v),n},Er.dot=function(n,e){return n[0]*e[0]+n[1]*e[1]+n[2]*e[2]},Er.cross=function(n,e,o){var u=e[0],c=e[1],v=e[2],g=o[0],x=o[1],_=o[2];return n[0]=c*_-v*x,n[1]=v*g-u*_,n[2]=u*x-c*g,n},Er.lerp=function(n,e,o,u){var c=e[0],v=e[1],g=e[2];return n[0]=c+u*(o[0]-c),n[1]=v+u*(o[1]-v),n[2]=g+u*(o[2]-g),n},Er.random=function(n,e){e=e||1;var o=er()*2*Math.PI,u=er()*2-1,c=Math.sqrt(1-u*u)*e;return n[0]=Math.cos(o)*c,n[1]=Math.sin(o)*c,n[2]=u*e,n},Er.transformMat4=function(n,e,o){var u=e[0],c=e[1],v=e[2],g=o[3]*u+o[7]*c+o[11]*v+o[15];return g=g||1,n[0]=(o[0]*u+o[4]*c+o[8]*v+o[12])/g,n[1]=(o[1]*u+o[5]*c+o[9]*v+o[13])/g,n[2]=(o[2]*u+o[6]*c+o[10]*v+o[14])/g,n},Er.transformMat3=function(n,e,o){var u=e[0],c=e[1],v=e[2];return n[0]=u*o[0]+c*o[3]+v*o[6],n[1]=u*o[1]+c*o[4]+v*o[7],n[2]=u*o[2]+c*o[5]+v*o[8],n},Er.transformQuat=function(n,e,o){var u=e[0],c=e[1],v=e[2],g=o[0],x=o[1],_=o[2],M=o[3],I=M*u+x*v-_*c,F=M*c+_*u-g*v,ut=M*v+g*c-x*u,yt=-g*u-x*c-_*v;return n[0]=I*M+yt*-g+F*-_-ut*-x,n[1]=F*M+yt*-x+ut*-g-I*-_,n[2]=ut*M+yt*-_+I*-x-F*-g,n},Er.rotateX=function(n,e,o,u){var c=[],v=[];return c[0]=e[0]-o[0],c[1]=e[1]-o[1],c[2]=e[2]-o[2],v[0]=c[0],v[1]=c[1]*Math.cos(u)-c[2]*Math.sin(u),v[2]=c[1]*Math.sin(u)+c[2]*Math.cos(u),n[0]=v[0]+o[0],n[1]=v[1]+o[1],n[2]=v[2]+o[2],n},Er.rotateY=function(n,e,o,u){var c=[],v=[];return c[0]=e[0]-o[0],c[1]=e[1]-o[1],c[2]=e[2]-o[2],v[0]=c[2]*Math.sin(u)+c[0]*Math.cos(u),v[1]=c[1],v[2]=c[2]*Math.cos(u)-c[0]*Math.sin(u),n[0]=v[0]+o[0],n[1]=v[1]+o[1],n[2]=v[2]+o[2],n},Er.rotateZ=function(n,e,o,u){var c=[],v=[];return c[0]=e[0]-o[0],c[1]=e[1]-o[1],c[2]=e[2]-o[2],v[0]=c[0]*Math.cos(u)-c[1]*Math.sin(u),v[1]=c[0]*Math.sin(u)+c[1]*Math.cos(u),v[2]=c[2],n[0]=v[0]+o[0],n[1]=v[1]+o[1],n[2]=v[2]+o[2],n},Er.forEach=function(){var n=Er.create();return function(e,o,u,c,v,g){var x,_;for(o||(o=3),u||(u=0),c?_=Math.min(c*o+u,e.length):_=e.length,x=u;x<_;x+=o)n[0]=e[x],n[1]=e[x+1],n[2]=e[x+2],v(n,n,g),e[x]=n[0],e[x+1]=n[1],e[x+2]=n[2];return e}}(),Er.angle=function(n,e){var o=Er.fromValues(n[0],n[1],n[2]),u=Er.fromValues(e[0],e[1],e[2]);Er.normalize(o,o),Er.normalize(u,u);var c=Er.dot(o,u);return c>1?0:Math.acos(c)};var Te=Er;cr.import(el);var fn=ir.create,tu={};function rl(n){return n.material}function nl(n,e,o){return e.uniforms[o].value}function vf(n,e,o,u){return o!==u}function Qa(n){return!0}function Ja(){}var il={float:$.FLOAT,byte:$.BYTE,ubyte:$.UNSIGNED_BYTE,short:$.SHORT,ushort:$.UNSIGNED_SHORT};function $a(n,e,o){this.availableAttributes=n,this.availableAttributeSymbols=e,this.indicesBuffer=o,this.vao=null}function en(n){var e,o;this.bind=function(u){e||(e=D.a.createCanvas(),e.width=e.height=1,e.getContext("2d"));var c=u.gl,v=!o;v&&(o=c.createTexture()),c.bindTexture(c.TEXTURE_2D,o),v&&c.texImage2D(c.TEXTURE_2D,0,c.RGBA,c.RGBA,c.UNSIGNED_BYTE,e)},this.unbind=function(u){u.gl.bindTexture(u.gl.TEXTURE_2D,null)},this.isRenderable=function(){return!0}}var sr=W.extend(function(){return{canvas:null,_width:100,_height:100,devicePixelRatio:typeof window!="undefined"&&window.devicePixelRatio||1,clearColor:[0,0,0,0],clearBit:17664,alpha:!0,depth:!0,stencil:!1,antialias:!0,premultipliedAlpha:!0,preserveDrawingBuffer:!1,throwError:!0,gl:null,viewport:{},maxJointNumber:20,__currentFrameBuffer:null,_viewportStack:[],_clearStack:[],_sceneRendering:null}},function(){this.canvas||(this.canvas=D.a.createCanvas());var n=this.canvas;try{var e={alpha:this.alpha,depth:this.depth,stencil:this.stencil,antialias:this.antialias,premultipliedAlpha:this.premultipliedAlpha,preserveDrawingBuffer:this.preserveDrawingBuffer};if(this.gl=n.getContext("webgl",e)||n.getContext("experimental-webgl",e),!this.gl)throw new Error;this._glinfo=new st(this.gl),this.gl.targetRenderer&&console.error("Already created a renderer"),this.gl.targetRenderer=this,this.resize()}catch(o){throw"Error creating WebGL Context "+o}this._programMgr=new Ve(this),this._placeholderTexture=new en(this)},{resize:function(e,o){var u=this.canvas,c=this.devicePixelRatio;e!=null?(u.style&&(u.style.width=e+"px",u.style.height=o+"px"),u.width=e*c,u.height=o*c,this._width=e,this._height=o):(this._width=u.width/c,this._height=u.height/c),this.setViewport(0,0,this._width,this._height)},getWidth:function(){return this._width},getHeight:function(){return this._height},getViewportAspect:function(){var e=this.viewport;return e.width/e.height},setDevicePixelRatio:function(e){this.devicePixelRatio=e,this.resize(this._width,this._height)},getDevicePixelRatio:function(){return this.devicePixelRatio},getGLExtension:function(e){return this._glinfo.getExtension(e)},getGLParameter:function(e){return this._glinfo.getParameter(e)},setViewport:function(e,o,u,c,v){if(typeof e=="object"){var g=e;e=g.x,o=g.y,u=g.width,c=g.height,v=g.devicePixelRatio}v=v||this.devicePixelRatio,this.gl.viewport(e*v,o*v,u*v,c*v),this.viewport={x:e,y:o,width:u,height:c,devicePixelRatio:v}},saveViewport:function(){this._viewportStack.push(this.viewport)},restoreViewport:function(){this._viewportStack.length>0&&this.setViewport(this._viewportStack.pop())},saveClear:function(){this._clearStack.push({clearBit:this.clearBit,clearColor:this.clearColor})},restoreClear:function(){if(this._clearStack.length>0){var e=this._clearStack.pop();this.clearColor=e.clearColor,this.clearBit=e.clearBit}},bindSceneRendering:function(e){this._sceneRendering=e},render:function(e,o,u,c){var v=this.gl,g=this.clearColor;if(this.clearBit){v.colorMask(!0,!0,!0,!0),v.depthMask(!0);var x=this.viewport,_=!1,M=x.devicePixelRatio;(x.width!==this._width||x.height!==this._height||M&&M!==this.devicePixelRatio||x.x||x.y)&&(_=!0,v.enable(v.SCISSOR_TEST),v.scissor(x.x*M,x.y*M,x.width*M,x.height*M)),v.clearColor(g[0],g[1],g[2],g[3]),v.clear(this.clearBit),_&&v.disable(v.SCISSOR_TEST)}if(u||e.update(!1),e.updateLights(),o=o||e.getMainCamera(),!o){console.error("Can't find camera in the scene.");return}o.update();var I=e.updateRenderList(o,!0);this._sceneRendering=e;var F=I.opaque,ut=I.transparent,yt=e.material;e.trigger("beforerender",this,e,o,I),c?(this.renderPreZ(F,e,o),v.depthFunc(v.LEQUAL)):v.depthFunc(v.LESS);for(var Dt=fn(),Et=Te.create(),Pt=0;Pt<ut.length;Pt++){var Ht=ut[Pt];ir.multiplyAffine(Dt,o.viewMatrix.array,Ht.worldTransform.array),Te.transformMat4(Et,Ht.position.array,Dt),Ht.__depth=Et[2]}this.renderPass(F,o,{getMaterial:function(qt){return yt||qt.material},sortCompare:this.opaqueSortCompare}),this.renderPass(ut,o,{getMaterial:function(qt){return yt||qt.material},sortCompare:this.transparentSortCompare}),e.trigger("afterrender",this,e,o,I),this._sceneRendering=null},getProgram:function(e,o,u){return o=o||e.material,this._programMgr.getProgram(e,o,u)},validateProgram:function(e){if(e.__error){var o=e.__error;if(tu[e.__uid__])return;if(tu[e.__uid__]=!0,this.throwError)throw new Error(o);this.trigger("error",o)}},updatePrograms:function(e,o,u){var c=u&&u.getMaterial||rl;o=o||null;for(var v=0;v<e.length;v++){var g=e[v],x=c.call(this,g);if(v>0){var _=e[v-1],M=_.joints?_.joints.length:0,I=g.joints?g.joints.length:0;if(I===M&&g.material===_.material&&g.lightGroup===_.lightGroup){g.__program=_.__program;continue}}var F=this._programMgr.getProgram(g,x,o);this.validateProgram(F),g.__program=F}},renderPass:function(e,o,u){this.trigger("beforerenderpass",this,e,o,u),u=u||{},u.getMaterial=u.getMaterial||rl,u.getUniform=u.getUniform||nl,u.isMaterialChanged=u.isMaterialChanged||vf,u.beforeRender=u.beforeRender||Ja,u.afterRender=u.afterRender||Ja;var c=u.ifRender||Qa;this.updatePrograms(e,this._sceneRendering,u),u.sortCompare&&e.sort(u.sortCompare);var v=this.viewport,g=v.devicePixelRatio,x=[v.x*g,v.y*g,v.width*g,v.height*g],_=this.devicePixelRatio,M=this.__currentFrameBuffer?[this.__currentFrameBuffer.getTextureWidth(),this.__currentFrameBuffer.getTextureHeight()]:[this._width*_,this._height*_],I=[x[2],x[3]],F=Date.now();o?(ir.copy(un.VIEW,o.viewMatrix.array),ir.copy(un.PROJECTION,o.projectionMatrix.array),ir.copy(un.VIEWINVERSE,o.worldTransform.array)):(ir.identity(un.VIEW),ir.identity(un.PROJECTION),ir.identity(un.VIEWINVERSE)),ir.multiply(un.VIEWPROJECTION,un.PROJECTION,un.VIEW),ir.invert(un.PROJECTIONINVERSE,un.PROJECTION),ir.invert(un.VIEWPROJECTIONINVERSE,un.VIEWPROJECTION);for(var ut=this.gl,yt=this._sceneRendering,Dt,Et,Pt,Ht,$t,qt,le,ie,he,Re,ze,Pe,Ke=null,rr=0;rr<e.length;rr++){var Ue=e[rr],hr=Ue.worldTransform!=null,ke;if(!!c(Ue)){hr&&(ke=Ue.isSkinnedMesh&&Ue.isSkinnedMesh()?Ue.offsetMatrix?Ue.offsetMatrix.array:un.IDENTITY:Ue.worldTransform.array);var Lr=Ue.geometry,yr=u.getMaterial.call(this,Ue),xr=Ue.__program,Sr=yr.shader,mr=Lr.__uid__+"-"+xr.__uid__,on=mr!==Re;Re=mr,on&&Ke&&Ke.bindVertexArrayOES(null),hr&&(ir.copy(un.WORLD,ke),ir.multiply(un.WORLDVIEWPROJECTION,un.VIEWPROJECTION,ke),ir.multiplyAffine(un.WORLDVIEW,un.VIEW,ke),(Sr.matrixSemantics.WORLDINVERSE||Sr.matrixSemantics.WORLDINVERSETRANSPOSE)&&ir.invert(un.WORLDINVERSE,ke),(Sr.matrixSemantics.WORLDVIEWINVERSE||Sr.matrixSemantics.WORLDVIEWINVERSETRANSPOSE)&&ir.invert(un.WORLDVIEWINVERSE,un.WORLDVIEW),(Sr.matrixSemantics.WORLDVIEWPROJECTIONINVERSE||Sr.matrixSemantics.WORLDVIEWPROJECTIONINVERSETRANSPOSE)&&ir.invert(un.WORLDVIEWPROJECTIONINVERSE,un.WORLDVIEWPROJECTION)),Ue.beforeRender&&Ue.beforeRender(this),u.beforeRender.call(this,Ue,yr,Dt);var Or=xr!==Et;Or?(xr.bind(this),xr.setUniformOfSemantic(ut,"VIEWPORT",x),xr.setUniformOfSemantic(ut,"WINDOW_SIZE",M),o&&(xr.setUniformOfSemantic(ut,"NEAR",o.near),xr.setUniformOfSemantic(ut,"FAR",o.far)),xr.setUniformOfSemantic(ut,"DEVICEPIXELRATIO",g),xr.setUniformOfSemantic(ut,"TIME",F),xr.setUniformOfSemantic(ut,"VIEWPORT_SIZE",I),yt&&yt.setLightUniforms(xr,Ue.lightGroup,this)):xr=Et,(Or||u.isMaterialChanged(Ue,Pt,yr,Dt))&&(yr.depthTest!==Ht&&(yr.depthTest?ut.enable(ut.DEPTH_TEST):ut.disable(ut.DEPTH_TEST),Ht=yr.depthTest),yr.depthMask!==$t&&(ut.depthMask(yr.depthMask),$t=yr.depthMask),yr.transparent!==he&&(yr.transparent?ut.enable(ut.BLEND):ut.disable(ut.BLEND),he=yr.transparent),yr.transparent&&(yr.blend?yr.blend(ut):(ut.blendEquationSeparate(ut.FUNC_ADD,ut.FUNC_ADD),ut.blendFuncSeparate(ut.SRC_ALPHA,ut.ONE_MINUS_SRC_ALPHA,ut.ONE,ut.ONE_MINUS_SRC_ALPHA))),Pe=this._bindMaterial(Ue,yr,xr,Pt||null,Dt||null,Et||null,u.getUniform),Dt=yr);var Sn=Sr.matrixSemanticKeys;if(hr)for(var rn=0;rn<Sn.length;rn++){var mn=Sn[rn],En=Sr.matrixSemantics[mn],tn=un[mn];if(En.isTranspose){var li=un[En.semanticNoTranspose];ir.transpose(tn,li)}xr.setUniform(ut,En.type,En.symbol,tn)}Ue.cullFace!==le&&(le=Ue.cullFace,ut.cullFace(le)),Ue.frontFace!==ie&&(ie=Ue.frontFace,ut.frontFace(ie)),Ue.culling!==qt&&(qt=Ue.culling,qt?ut.enable(ut.CULL_FACE):ut.disable(ut.CULL_FACE)),this._updateSkeleton(Ue,xr,Pe),on&&(ze=this._bindVAO(Ke,Sr,Lr,xr)),this._renderObject(Ue,ze,xr),u.afterRender(this,Ue),Ue.afterRender&&Ue.afterRender(this),Et=xr,Pt=Ue}}Ke&&Ke.bindVertexArrayOES(null),this.trigger("afterrenderpass",this,e,o,u)},getMaxJointNumber:function(){return this.maxJointNumber},_updateSkeleton:function(e,o,u){var c=this.gl,v=e.skeleton;if(v)if(v.update(),e.joints.length>this.getMaxJointNumber()){var g=v.getSubSkinMatricesTexture(e.__uid__,e.joints);o.useTextureSlot(this,g,u),o.setUniform(c,"1i","skinMatricesTexture",u),o.setUniform(c,"1f","skinMatricesTextureSize",g.width)}else{var x=v.getSubSkinMatrices(e.__uid__,e.joints);o.setUniformOfSemantic(c,"SKIN_MATRIX",x)}},_renderObject:function(e,o,u){var c=this.gl,v=e.geometry,g=e.mode;g==null&&(g=4);var x=null,_=e.isInstancedMesh&&e.isInstancedMesh();if(_&&(x=this.getGLExtension("ANGLE_instanced_arrays"),!x)){console.warn("Device not support ANGLE_instanced_arrays extension");return}var M;if(_&&(M=this._bindInstancedAttributes(e,u,x)),o.indicesBuffer){var I=this.getGLExtension("OES_element_index_uint"),F=I&&v.indices instanceof Uint32Array,ut=F?c.UNSIGNED_INT:c.UNSIGNED_SHORT;_?x.drawElementsInstancedANGLE(g,o.indicesBuffer.count,ut,0,e.getInstanceCount()):c.drawElements(g,o.indicesBuffer.count,ut,0)}else _?x.drawArraysInstancedANGLE(g,0,v.vertexCount,e.getInstanceCount()):c.drawArrays(g,0,v.vertexCount);if(_)for(var yt=0;yt<M.length;yt++)c.disableVertexAttribArray(M[yt])},_bindInstancedAttributes:function(e,o,u){for(var c=this.gl,v=e.getInstancedAttributesBuffers(this),g=[],x=0;x<v.length;x++){var _=v[x],M=o.getAttribLocation(c,_.symbol);if(!(M<0)){var I=il[_.type]||c.FLOAT;c.enableVertexAttribArray(M),c.bindBuffer(c.ARRAY_BUFFER,_.buffer),c.vertexAttribPointer(M,_.size,I,!1,0,0),u.vertexAttribDivisorANGLE(M,_.divisor),g.push(M)}}return g},_bindMaterial:function(e,o,u,c,v,g,x){for(var _=this.gl,M=g===u,I=u.currentTextureSlot(),F=o.getEnabledUniforms(),ut=o.getTextureUniforms(),yt=this._placeholderTexture,Dt=0;Dt<ut.length;Dt++){var Et=ut[Dt],Pt=x(e,o,Et),Ht=o.uniforms[Et].type;if(Ht==="t"&&Pt)Pt.__slot=-1;else if(Ht==="tv")for(var $t=0;$t<Pt.length;$t++)Pt[$t]&&(Pt[$t].__slot=-1)}yt.__slot=-1;for(var Dt=0;Dt<F.length;Dt++){var Et=F[Dt],qt=o.uniforms[Et],Pt=x(e,o,Et),Ht=qt.type,le=Ht==="t";if(le&&(!Pt||!Pt.isRenderable())&&(Pt=yt),v&&M){var ie=x(c,v,Et);if(le&&(!ie||!ie.isRenderable())&&(ie=yt),ie===Pt){if(le)u.takeCurrentTextureSlot(this,null);else if(Ht==="tv"&&Pt)for(var $t=0;$t<Pt.length;$t++)u.takeCurrentTextureSlot(this,null);continue}}if(Pt!=null)if(le)if(Pt.__slot<0){var he=u.currentTextureSlot(),Re=u.setUniform(_,"1i",Et,he);Re&&(u.takeCurrentTextureSlot(this,Pt),Pt.__slot=he)}else u.setUniform(_,"1i",Et,Pt.__slot);else if(Array.isArray(Pt)){if(Pt.length===0)continue;if(Ht==="tv"){if(!u.hasUniform(Et))continue;for(var ze=[],$t=0;$t<Pt.length;$t++){var Pe=Pt[$t];if(Pe.__slot<0){var he=u.currentTextureSlot();ze.push(he),u.takeCurrentTextureSlot(this,Pe),Pe.__slot=he}else ze.push(Pe.__slot)}u.setUniform(_,"1iv",Et,ze)}else u.setUniform(_,qt.type,Et,Pt)}else u.setUniform(_,qt.type,Et,Pt)}var Ke=u.currentTextureSlot();return u.resetTextureSlot(I),Ke},_bindVAO:function(e,o,u,c){var v=!u.dynamic,g=this.gl,x=this.__uid__+"-"+c.__uid__,_=u.__vaoCache[x];if(!_){var M=u.getBufferChunks(this);if(!M||!M.length)return;for(var I=M[0],F=I.attributeBuffers,ie=I.indicesBuffer,le=[],ut=[],yt=0;yt<F.length;yt++){var Dt=F[yt],Et=Dt.name,Pt=Dt.semantic,Ht;if(Pt){var $t=o.attributeSemantics[Pt];Ht=$t&&$t.symbol}else Ht=Et;Ht&&c.attributes[Ht]&&(le.push(Dt),ut.push(Ht))}_=new $a(le,ut,ie),v&&(u.__vaoCache[x]=_)}var qt=!0;e&&v&&(_.vao==null?_.vao=e.createVertexArrayOES():qt=!1,e.bindVertexArrayOES(_.vao));var le=_.availableAttributes,ie=_.indicesBuffer;if(qt){for(var he=c.enableAttributes(this,_.availableAttributeSymbols,e&&v&&_),yt=0;yt<le.length;yt++){var Re=he[yt];if(Re!==-1){var Dt=le[yt],ze=Dt.buffer,Pe=Dt.size,Ke=il[Dt.type]||g.FLOAT;g.bindBuffer(g.ARRAY_BUFFER,ze),g.vertexAttribPointer(Re,Pe,Ke,!1,0,0)}}u.isUseIndices()&&g.bindBuffer(g.ELEMENT_ARRAY_BUFFER,ie.buffer)}return _},renderPreZ:function(e,o,u){var c=this.gl,v=this._prezMaterial||new Le({shader:new cr(cr.source("clay.prez.vertex"),cr.source("clay.prez.fragment"))});this._prezMaterial=v,c.colorMask(!1,!1,!1,!1),c.depthMask(!0),this.renderPass(e,u,{ifRender:function(x){return!x.ignorePreZ},isMaterialChanged:function(x,_){var M=x.material,I=_.material;return M.get("diffuseMap")!==I.get("diffuseMap")||(M.get("alphaCutoff")||0)!==(I.get("alphaCutoff")||0)},getUniform:function(x,_,M){if(M==="alphaMap")return x.material.get("diffuseMap");if(M==="alphaCutoff"){if(x.material.isDefined("fragment","ALPHA_TEST")&&x.material.get("diffuseMap")){var I=x.material.get("alphaCutoff");return I||0}return 0}else return M==="uvRepeat"?x.material.get("uvRepeat"):M==="uvOffset"?x.material.get("uvOffset"):_.get(M)},getMaterial:function(){return v},sort:this.opaqueSortCompare}),c.colorMask(!0,!0,!0,!0),c.depthMask(!0)},disposeScene:function(e){this.disposeNode(e,!0,!0),e.dispose()},disposeNode:function(e,o,u){e.getParent()&&e.getParent().remove(e);var c={};e.traverse(function(v){var g=v.material;if(v.geometry&&o&&v.geometry.dispose(this),u&&g&&!c[g.__uid__]){for(var x=g.getTextureUniforms(),_=0;_<x.length;_++){var M=x[_],I=g.uniforms[M].value,F=g.uniforms[M].type;if(!!I){if(F==="t")I.dispose&&I.dispose(this);else if(F==="tv")for(var ut=0;ut<I.length;ut++)I[ut]&&I[ut].dispose&&I[ut].dispose(this)}}c[g.__uid__]=!0}v.dispose&&v.dispose(this)},this)},disposeGeometry:function(e){e.dispose(this)},disposeTexture:function(e){e.dispose(this)},disposeFrameBuffer:function(e){e.dispose(this)},dispose:function(){},screenToNDC:function(e,o,u){u||(u=new br),o=this._height-o;var c=this.viewport,v=u.array;return v[0]=(e-c.x)/c.width,v[0]=v[0]*2-1,v[1]=(o-c.y)/c.height,v[1]=v[1]*2-1,u}});sr.opaqueSortCompare=sr.prototype.opaqueSortCompare=function(n,e){return n.renderOrder===e.renderOrder?n.__program===e.__program?n.material===e.material?n.geometry.__uid__-e.geometry.__uid__:n.material.__uid__-e.material.__uid__:n.__program&&e.__program?n.__program.__uid__-e.__program.__uid__:0:n.renderOrder-e.renderOrder},sr.transparentSortCompare=sr.prototype.transparentSortCompare=function(n,e){return n.renderOrder===e.renderOrder?n.__depth===e.__depth?n.__program===e.__program?n.material===e.material?n.geometry.__uid__-e.geometry.__uid__:n.material.__uid__-e.material.__uid__:n.__program&&e.__program?n.__program.__uid__-e.__program.__uid__:0:n.__depth-e.__depth:n.renderOrder-e.renderOrder};var un={IDENTITY:fn(),WORLD:fn(),VIEW:fn(),PROJECTION:fn(),WORLDVIEW:fn(),VIEWPROJECTION:fn(),WORLDVIEWPROJECTION:fn(),WORLDINVERSE:fn(),VIEWINVERSE:fn(),PROJECTIONINVERSE:fn(),WORLDVIEWINVERSE:fn(),VIEWPROJECTIONINVERSE:fn(),WORLDVIEWPROJECTIONINVERSE:fn(),WORLDTRANSPOSE:fn(),VIEWTRANSPOSE:fn(),PROJECTIONTRANSPOSE:fn(),WORLDVIEWTRANSPOSE:fn(),VIEWPROJECTIONTRANSPOSE:fn(),WORLDVIEWPROJECTIONTRANSPOSE:fn(),WORLDINVERSETRANSPOSE:fn(),VIEWINVERSETRANSPOSE:fn(),PROJECTIONINVERSETRANSPOSE:fn(),WORLDVIEWINVERSETRANSPOSE:fn(),VIEWPROJECTIONINVERSETRANSPOSE:fn(),WORLDVIEWPROJECTIONINVERSETRANSPOSE:fn()};sr.COLOR_BUFFER_BIT=$.COLOR_BUFFER_BIT,sr.DEPTH_BUFFER_BIT=$.DEPTH_BUFFER_BIT,sr.STENCIL_BUFFER_BIT=$.STENCIL_BUFFER_BIT;var bi=sr,vr=function(e,o,u){e=e||0,o=o||0,u=u||0,this.array=Te.fromValues(e,o,u),this._dirty=!0};vr.prototype={constructor:vr,add:function(e){return Te.add(this.array,this.array,e.array),this._dirty=!0,this},set:function(e,o,u){return this.array[0]=e,this.array[1]=o,this.array[2]=u,this._dirty=!0,this},setArray:function(e){return this.array[0]=e[0],this.array[1]=e[1],this.array[2]=e[2],this._dirty=!0,this},clone:function(){return new vr(this.x,this.y,this.z)},copy:function(e){return Te.copy(this.array,e.array),this._dirty=!0,this},cross:function(e,o){return Te.cross(this.array,e.array,o.array),this._dirty=!0,this},dist:function(e){return Te.dist(this.array,e.array)},distance:function(e){return Te.distance(this.array,e.array)},div:function(e){return Te.div(this.array,this.array,e.array),this._dirty=!0,this},divide:function(e){return Te.divide(this.array,this.array,e.array),this._dirty=!0,this},dot:function(e){return Te.dot(this.array,e.array)},len:function(){return Te.len(this.array)},length:function(){return Te.length(this.array)},lerp:function(e,o,u){return Te.lerp(this.array,e.array,o.array,u),this._dirty=!0,this},min:function(e){return Te.min(this.array,this.array,e.array),this._dirty=!0,this},max:function(e){return Te.max(this.array,this.array,e.array),this._dirty=!0,this},mul:function(e){return Te.mul(this.array,this.array,e.array),this._dirty=!0,this},multiply:function(e){return Te.multiply(this.array,this.array,e.array),this._dirty=!0,this},negate:function(){return Te.negate(this.array,this.array),this._dirty=!0,this},normalize:function(){return Te.normalize(this.array,this.array),this._dirty=!0,this},random:function(e){return Te.random(this.array,e),this._dirty=!0,this},scale:function(e){return Te.scale(this.array,this.array,e),this._dirty=!0,this},scaleAndAdd:function(e,o){return Te.scaleAndAdd(this.array,this.array,e.array,o),this._dirty=!0,this},sqrDist:function(e){return Te.sqrDist(this.array,e.array)},squaredDistance:function(e){return Te.squaredDistance(this.array,e.array)},sqrLen:function(){return Te.sqrLen(this.array)},squaredLength:function(){return Te.squaredLength(this.array)},sub:function(e){return Te.sub(this.array,this.array,e.array),this._dirty=!0,this},subtract:function(e){return Te.subtract(this.array,this.array,e.array),this._dirty=!0,this},transformMat3:function(e){return Te.transformMat3(this.array,this.array,e.array),this._dirty=!0,this},transformMat4:function(e){return Te.transformMat4(this.array,this.array,e.array),this._dirty=!0,this},transformQuat:function(e){return Te.transformQuat(this.array,this.array,e.array),this._dirty=!0,this},applyProjection:function(e){var o=this.array;if(e=e.array,e[15]===0){var u=-1/o[2];o[0]=e[0]*o[0]*u,o[1]=e[5]*o[1]*u,o[2]=(e[10]*o[2]+e[14])*u}else o[0]=e[0]*o[0]+e[12],o[1]=e[5]*o[1]+e[13],o[2]=e[10]*o[2]+e[14];return this._dirty=!0,this},eulerFromQuat:function(e,o){vr.eulerFromQuat(this,e,o)},eulerFromMat3:function(e,o){vr.eulerFromMat3(this,e,o)},toString:function(){return"["+Array.prototype.join.call(this.array,",")+"]"},toArray:function(){return Array.prototype.slice.call(this.array)}};var Ni=Object.defineProperty;if(Ni){var Bi=vr.prototype;Ni(Bi,"x",{get:function(){return this.array[0]},set:function(e){this.array[0]=e,this._dirty=!0}}),Ni(Bi,"y",{get:function(){return this.array[1]},set:function(e){this.array[1]=e,this._dirty=!0}}),Ni(Bi,"z",{get:function(){return this.array[2]},set:function(e){this.array[2]=e,this._dirty=!0}})}vr.add=function(n,e,o){return Te.add(n.array,e.array,o.array),n._dirty=!0,n},vr.set=function(n,e,o,u){Te.set(n.array,e,o,u),n._dirty=!0},vr.copy=function(n,e){return Te.copy(n.array,e.array),n._dirty=!0,n},vr.cross=function(n,e,o){return Te.cross(n.array,e.array,o.array),n._dirty=!0,n},vr.dist=function(n,e){return Te.distance(n.array,e.array)},vr.distance=vr.dist,vr.div=function(n,e,o){return Te.divide(n.array,e.array,o.array),n._dirty=!0,n},vr.divide=vr.div,vr.dot=function(n,e){return Te.dot(n.array,e.array)},vr.len=function(n){return Te.length(n.array)},vr.lerp=function(n,e,o,u){return Te.lerp(n.array,e.array,o.array,u),n._dirty=!0,n},vr.min=function(n,e,o){return Te.min(n.array,e.array,o.array),n._dirty=!0,n},vr.max=function(n,e,o){return Te.max(n.array,e.array,o.array),n._dirty=!0,n},vr.mul=function(n,e,o){return Te.multiply(n.array,e.array,o.array),n._dirty=!0,n},vr.multiply=vr.mul,vr.negate=function(n,e){return Te.negate(n.array,e.array),n._dirty=!0,n},vr.normalize=function(n,e){return Te.normalize(n.array,e.array),n._dirty=!0,n},vr.random=function(n,e){return Te.random(n.array,e),n._dirty=!0,n},vr.scale=function(n,e,o){return Te.scale(n.array,e.array,o),n._dirty=!0,n},vr.scaleAndAdd=function(n,e,o,u){return Te.scaleAndAdd(n.array,e.array,o.array,u),n._dirty=!0,n},vr.sqrDist=function(n,e){return Te.sqrDist(n.array,e.array)},vr.squaredDistance=vr.sqrDist,vr.sqrLen=function(n){return Te.sqrLen(n.array)},vr.squaredLength=vr.sqrLen,vr.sub=function(n,e,o){return Te.subtract(n.array,e.array,o.array),n._dirty=!0,n},vr.subtract=vr.sub,vr.transformMat3=function(n,e,o){return Te.transformMat3(n.array,e.array,o.array),n._dirty=!0,n},vr.transformMat4=function(n,e,o){return Te.transformMat4(n.array,e.array,o.array),n._dirty=!0,n},vr.transformQuat=function(n,e,o){return Te.transformQuat(n.array,e.array,o.array),n._dirty=!0,n};function hi(n,e,o){return n<e?e:n>o?o:n}var an=Math.atan2,ji=Math.asin,la=Math.abs;vr.eulerFromQuat=function(n,e,o){n._dirty=!0,e=e.array;var u=n.array,c=e[0],v=e[1],g=e[2],x=e[3],_=c*c,M=v*v,I=g*g,F=x*x,o=(o||"XYZ").toUpperCase();switch(o){case"XYZ":u[0]=an(2*(c*x-v*g),F-_-M+I),u[1]=ji(hi(2*(c*g+v*x),-1,1)),u[2]=an(2*(g*x-c*v),F+_-M-I);break;case"YXZ":u[0]=ji(hi(2*(c*x-v*g),-1,1)),u[1]=an(2*(c*g+v*x),F-_-M+I),u[2]=an(2*(c*v+g*x),F-_+M-I);break;case"ZXY":u[0]=ji(hi(2*(c*x+v*g),-1,1)),u[1]=an(2*(v*x-g*c),F-_-M+I),u[2]=an(2*(g*x-c*v),F-_+M-I);break;case"ZYX":u[0]=an(2*(c*x+g*v),F-_-M+I),u[1]=ji(hi(2*(v*x-c*g),-1,1)),u[2]=an(2*(c*v+g*x),F+_-M-I);break;case"YZX":u[0]=an(2*(c*x-g*v),F-_+M-I),u[1]=an(2*(v*x-c*g),F+_-M-I),u[2]=ji(hi(2*(c*v+g*x),-1,1));break;case"XZY":u[0]=an(2*(c*x+v*g),F-_+M-I),u[1]=an(2*(c*g+v*x),F+_-M-I),u[2]=ji(hi(2*(g*x-c*v),-1,1));break;default:console.warn("Unkown order: "+o)}return n},vr.eulerFromMat3=function(n,e,o){var u=e.array,c=u[0],v=u[3],g=u[6],x=u[1],_=u[4],M=u[7],I=u[2],F=u[5],ut=u[8],yt=n.array,o=(o||"XYZ").toUpperCase();switch(o){case"XYZ":yt[1]=ji(hi(g,-1,1)),la(g)<.99999?(yt[0]=an(-M,ut),yt[2]=an(-v,c)):(yt[0]=an(F,_),yt[2]=0);break;case"YXZ":yt[0]=ji(-hi(M,-1,1)),la(M)<.99999?(yt[1]=an(g,ut),yt[2]=an(x,_)):(yt[1]=an(-I,c),yt[2]=0);break;case"ZXY":yt[0]=ji(hi(F,-1,1)),la(F)<.99999?(yt[1]=an(-I,ut),yt[2]=an(-v,_)):(yt[1]=0,yt[2]=an(x,c));break;case"ZYX":yt[1]=ji(-hi(I,-1,1)),la(I)<.99999?(yt[0]=an(F,ut),yt[2]=an(x,c)):(yt[0]=0,yt[2]=an(-v,_));break;case"YZX":yt[2]=ji(hi(x,-1,1)),la(x)<.99999?(yt[0]=an(-M,_),yt[1]=an(-I,c)):(yt[0]=0,yt[1]=an(g,ut));break;case"XZY":yt[2]=ji(-hi(v,-1,1)),la(v)<.99999?(yt[0]=an(F,_),yt[1]=an(g,c)):(yt[0]=an(-M,ut),yt[1]=0);break;default:console.warn("Unkown order: "+o)}return n._dirty=!0,n},Object.defineProperties(vr,{POSITIVE_X:{get:function(){return new vr(1,0,0)}},NEGATIVE_X:{get:function(){return new vr(-1,0,0)}},POSITIVE_Y:{get:function(){return new vr(0,1,0)}},NEGATIVE_Y:{get:function(){return new vr(0,-1,0)}},POSITIVE_Z:{get:function(){return new vr(0,0,1)}},NEGATIVE_Z:{get:function(){return new vr(0,0,-1)}},UP:{get:function(){return new vr(0,1,0)}},ZERO:{get:function(){return new vr}}});var or=vr,yn=1e-5,nn=function(e,o){this.origin=e||new or,this.direction=o||new or};nn.prototype={constructor:nn,intersectPlane:function(e,o){var u=e.normal.array,c=e.distance,v=this.origin.array,g=this.direction.array,x=Te.dot(u,g);if(x===0)return null;o||(o=new or);var _=(Te.dot(u,v)-c)/x;return Te.scaleAndAdd(o.array,v,g,-_),o._dirty=!0,o},mirrorAgainstPlane:function(e){var o=Te.dot(e.normal.array,this.direction.array);Te.scaleAndAdd(this.direction.array,this.direction.array,e.normal.array,-o*2),this.direction._dirty=!0},distanceToPoint:function(){var n=Te.create();return function(e){Te.sub(n,e,this.origin.array);var o=Te.dot(n,this.direction.array);if(o<0)return Te.distance(this.origin.array,e);var u=Te.lenSquared(n);return Math.sqrt(u-o*o)}}(),intersectSphere:function(){var n=Te.create();return function(e,o,u){var c=this.origin.array,v=this.direction.array;e=e.array,Te.sub(n,e,c);var g=Te.dot(n,v),x=Te.squaredLength(n),_=x-g*g,M=o*o;if(!(_>M)){var I=Math.sqrt(M-_),F=g-I,ut=g+I;return u||(u=new or),F<0?ut<0?null:(Te.scaleAndAdd(u.array,c,v,ut),u):(Te.scaleAndAdd(u.array,c,v,F),u)}}}(),intersectBoundingBox:function(e,o){var u=this.direction.array,c=this.origin.array,v=e.min.array,g=e.max.array,x=1/u[0],_=1/u[1],M=1/u[2],I,F,ut,yt,Dt,Et;if(x>=0?(I=(v[0]-c[0])*x,F=(g[0]-c[0])*x):(F=(v[0]-c[0])*x,I=(g[0]-c[0])*x),_>=0?(ut=(v[1]-c[1])*_,yt=(g[1]-c[1])*_):(yt=(v[1]-c[1])*_,ut=(g[1]-c[1])*_),I>yt||ut>F||((ut>I||I!==I)&&(I=ut),(yt<F||F!==F)&&(F=yt),M>=0?(Dt=(v[2]-c[2])*M,Et=(g[2]-c[2])*M):(Et=(v[2]-c[2])*M,Dt=(g[2]-c[2])*M),I>Et||Dt>F)||((Dt>I||I!==I)&&(I=Dt),(Et<F||F!==F)&&(F=Et),F<0))return null;var Pt=I>=0?I:F;return o||(o=new or),Te.scaleAndAdd(o.array,c,u,Pt),o},intersectTriangle:function(){var n=Te.create(),e=Te.create(),o=Te.create(),u=Te.create();return function(c,v,g,x,_,M){var I=this.direction.array,F=this.origin.array;c=c.array,v=v.array,g=g.array,Te.sub(n,v,c),Te.sub(e,g,c),Te.cross(u,e,I);var ut=Te.dot(n,u);if(x){if(ut>-yn)return null}else if(ut>-yn&&ut<yn)return null;Te.sub(o,F,c);var yt=Te.dot(u,o)/ut;if(yt<0||yt>1)return null;Te.cross(u,n,o);var Dt=Te.dot(I,u)/ut;if(Dt<0||Dt>1||yt+Dt>1)return null;Te.cross(u,n,e);var Et=-Te.dot(o,u)/ut;return Et<0?null:(_||(_=new or),M&&or.set(M,1-yt-Dt,yt,Dt),Te.scaleAndAdd(_.array,F,I,Et),_)}}(),applyTransform:function(e){or.add(this.direction,this.direction,this.origin),or.transformMat4(this.origin,this.origin,e),or.transformMat4(this.direction,this.direction,e),or.sub(this.direction,this.direction,this.origin),or.normalize(this.direction,this.direction)},copy:function(e){or.copy(this.origin,e.origin),or.copy(this.direction,e.direction)},clone:function(){var e=new nn;return e.copy(this),e}};var vi=nn,Hr={};Hr.create=function(){var n=new De(4);return n[0]=0,n[1]=0,n[2]=0,n[3]=0,n},Hr.clone=function(n){var e=new De(4);return e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e},Hr.fromValues=function(n,e,o,u){var c=new De(4);return c[0]=n,c[1]=e,c[2]=o,c[3]=u,c},Hr.copy=function(n,e){return n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=e[3],n},Hr.set=function(n,e,o,u,c){return n[0]=e,n[1]=o,n[2]=u,n[3]=c,n},Hr.add=function(n,e,o){return n[0]=e[0]+o[0],n[1]=e[1]+o[1],n[2]=e[2]+o[2],n[3]=e[3]+o[3],n},Hr.subtract=function(n,e,o){return n[0]=e[0]-o[0],n[1]=e[1]-o[1],n[2]=e[2]-o[2],n[3]=e[3]-o[3],n},Hr.sub=Hr.subtract,Hr.multiply=function(n,e,o){return n[0]=e[0]*o[0],n[1]=e[1]*o[1],n[2]=e[2]*o[2],n[3]=e[3]*o[3],n},Hr.mul=Hr.multiply,Hr.divide=function(n,e,o){return n[0]=e[0]/o[0],n[1]=e[1]/o[1],n[2]=e[2]/o[2],n[3]=e[3]/o[3],n},Hr.div=Hr.divide,Hr.min=function(n,e,o){return n[0]=Math.min(e[0],o[0]),n[1]=Math.min(e[1],o[1]),n[2]=Math.min(e[2],o[2]),n[3]=Math.min(e[3],o[3]),n},Hr.max=function(n,e,o){return n[0]=Math.max(e[0],o[0]),n[1]=Math.max(e[1],o[1]),n[2]=Math.max(e[2],o[2]),n[3]=Math.max(e[3],o[3]),n},Hr.scale=function(n,e,o){return n[0]=e[0]*o,n[1]=e[1]*o,n[2]=e[2]*o,n[3]=e[3]*o,n},Hr.scaleAndAdd=function(n,e,o,u){return n[0]=e[0]+o[0]*u,n[1]=e[1]+o[1]*u,n[2]=e[2]+o[2]*u,n[3]=e[3]+o[3]*u,n},Hr.distance=function(n,e){var o=e[0]-n[0],u=e[1]-n[1],c=e[2]-n[2],v=e[3]-n[3];return Math.sqrt(o*o+u*u+c*c+v*v)},Hr.dist=Hr.distance,Hr.squaredDistance=function(n,e){var o=e[0]-n[0],u=e[1]-n[1],c=e[2]-n[2],v=e[3]-n[3];return o*o+u*u+c*c+v*v},Hr.sqrDist=Hr.squaredDistance,Hr.length=function(n){var e=n[0],o=n[1],u=n[2],c=n[3];return Math.sqrt(e*e+o*o+u*u+c*c)},Hr.len=Hr.length,Hr.squaredLength=function(n){var e=n[0],o=n[1],u=n[2],c=n[3];return e*e+o*o+u*u+c*c},Hr.sqrLen=Hr.squaredLength,Hr.negate=function(n,e){return n[0]=-e[0],n[1]=-e[1],n[2]=-e[2],n[3]=-e[3],n},Hr.inverse=function(n,e){return n[0]=1/e[0],n[1]=1/e[1],n[2]=1/e[2],n[3]=1/e[3],n},Hr.normalize=function(n,e){var o=e[0],u=e[1],c=e[2],v=e[3],g=o*o+u*u+c*c+v*v;return g>0&&(g=1/Math.sqrt(g),n[0]=e[0]*g,n[1]=e[1]*g,n[2]=e[2]*g,n[3]=e[3]*g),n},Hr.dot=function(n,e){return n[0]*e[0]+n[1]*e[1]+n[2]*e[2]+n[3]*e[3]},Hr.lerp=function(n,e,o,u){var c=e[0],v=e[1],g=e[2],x=e[3];return n[0]=c+u*(o[0]-c),n[1]=v+u*(o[1]-v),n[2]=g+u*(o[2]-g),n[3]=x+u*(o[3]-x),n},Hr.random=function(n,e){return e=e||1,n[0]=er(),n[1]=er(),n[2]=er(),n[3]=er(),Hr.normalize(n,n),Hr.scale(n,n,e),n},Hr.transformMat4=function(n,e,o){var u=e[0],c=e[1],v=e[2],g=e[3];return n[0]=o[0]*u+o[4]*c+o[8]*v+o[12]*g,n[1]=o[1]*u+o[5]*c+o[9]*v+o[13]*g,n[2]=o[2]*u+o[6]*c+o[10]*v+o[14]*g,n[3]=o[3]*u+o[7]*c+o[11]*v+o[15]*g,n},Hr.transformQuat=function(n,e,o){var u=e[0],c=e[1],v=e[2],g=o[0],x=o[1],_=o[2],M=o[3],I=M*u+x*v-_*c,F=M*c+_*u-g*v,ut=M*v+g*c-x*u,yt=-g*u-x*c-_*v;return n[0]=I*M+yt*-g+F*-_-ut*-x,n[1]=F*M+yt*-x+ut*-g-I*-_,n[2]=ut*M+yt*-_+I*-x-F*-g,n},Hr.forEach=function(){var n=Hr.create();return function(e,o,u,c,v,g){var x,_;for(o||(o=4),u||(u=0),c?_=Math.min(c*o+u,e.length):_=e.length,x=u;x<_;x+=o)n[0]=e[x],n[1]=e[x+1],n[2]=e[x+2],n[3]=e[x+3],v(n,n,g),e[x]=n[0],e[x+1]=n[1],e[x+2]=n[2],e[x+3]=n[3];return e}}();var dr=Hr,On={};On.create=function(){var n=new De(9);return n[0]=1,n[1]=0,n[2]=0,n[3]=0,n[4]=1,n[5]=0,n[6]=0,n[7]=0,n[8]=1,n},On.fromMat4=function(n,e){return n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=e[4],n[4]=e[5],n[5]=e[6],n[6]=e[8],n[7]=e[9],n[8]=e[10],n},On.clone=function(n){var e=new De(9);return e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e[4]=n[4],e[5]=n[5],e[6]=n[6],e[7]=n[7],e[8]=n[8],e},On.copy=function(n,e){return n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=e[3],n[4]=e[4],n[5]=e[5],n[6]=e[6],n[7]=e[7],n[8]=e[8],n},On.identity=function(n){return n[0]=1,n[1]=0,n[2]=0,n[3]=0,n[4]=1,n[5]=0,n[6]=0,n[7]=0,n[8]=1,n},On.transpose=function(n,e){if(n===e){var o=e[1],u=e[2],c=e[5];n[1]=e[3],n[2]=e[6],n[3]=o,n[5]=e[7],n[6]=u,n[7]=c}else n[0]=e[0],n[1]=e[3],n[2]=e[6],n[3]=e[1],n[4]=e[4],n[5]=e[7],n[6]=e[2],n[7]=e[5],n[8]=e[8];return n},On.invert=function(n,e){var o=e[0],u=e[1],c=e[2],v=e[3],g=e[4],x=e[5],_=e[6],M=e[7],I=e[8],F=I*g-x*M,ut=-I*v+x*_,yt=M*v-g*_,Dt=o*F+u*ut+c*yt;return Dt?(Dt=1/Dt,n[0]=F*Dt,n[1]=(-I*u+c*M)*Dt,n[2]=(x*u-c*g)*Dt,n[3]=ut*Dt,n[4]=(I*o-c*_)*Dt,n[5]=(-x*o+c*v)*Dt,n[6]=yt*Dt,n[7]=(-M*o+u*_)*Dt,n[8]=(g*o-u*v)*Dt,n):null},On.adjoint=function(n,e){var o=e[0],u=e[1],c=e[2],v=e[3],g=e[4],x=e[5],_=e[6],M=e[7],I=e[8];return n[0]=g*I-x*M,n[1]=c*M-u*I,n[2]=u*x-c*g,n[3]=x*_-v*I,n[4]=o*I-c*_,n[5]=c*v-o*x,n[6]=v*M-g*_,n[7]=u*_-o*M,n[8]=o*g-u*v,n},On.determinant=function(n){var e=n[0],o=n[1],u=n[2],c=n[3],v=n[4],g=n[5],x=n[6],_=n[7],M=n[8];return e*(M*v-g*_)+o*(-M*c+g*x)+u*(_*c-v*x)},On.multiply=function(n,e,o){var u=e[0],c=e[1],v=e[2],g=e[3],x=e[4],_=e[5],M=e[6],I=e[7],F=e[8],ut=o[0],yt=o[1],Dt=o[2],Et=o[3],Pt=o[4],Ht=o[5],$t=o[6],qt=o[7],le=o[8];return n[0]=ut*u+yt*g+Dt*M,n[1]=ut*c+yt*x+Dt*I,n[2]=ut*v+yt*_+Dt*F,n[3]=Et*u+Pt*g+Ht*M,n[4]=Et*c+Pt*x+Ht*I,n[5]=Et*v+Pt*_+Ht*F,n[6]=$t*u+qt*g+le*M,n[7]=$t*c+qt*x+le*I,n[8]=$t*v+qt*_+le*F,n},On.mul=On.multiply,On.translate=function(n,e,o){var u=e[0],c=e[1],v=e[2],g=e[3],x=e[4],_=e[5],M=e[6],I=e[7],F=e[8],ut=o[0],yt=o[1];return n[0]=u,n[1]=c,n[2]=v,n[3]=g,n[4]=x,n[5]=_,n[6]=ut*u+yt*g+M,n[7]=ut*c+yt*x+I,n[8]=ut*v+yt*_+F,n},On.rotate=function(n,e,o){var u=e[0],c=e[1],v=e[2],g=e[3],x=e[4],_=e[5],M=e[6],I=e[7],F=e[8],ut=Math.sin(o),yt=Math.cos(o);return n[0]=yt*u+ut*g,n[1]=yt*c+ut*x,n[2]=yt*v+ut*_,n[3]=yt*g-ut*u,n[4]=yt*x-ut*c,n[5]=yt*_-ut*v,n[6]=M,n[7]=I,n[8]=F,n},On.scale=function(n,e,o){var u=o[0],c=o[1];return n[0]=u*e[0],n[1]=u*e[1],n[2]=u*e[2],n[3]=c*e[3],n[4]=c*e[4],n[5]=c*e[5],n[6]=e[6],n[7]=e[7],n[8]=e[8],n},On.fromMat2d=function(n,e){return n[0]=e[0],n[1]=e[1],n[2]=0,n[3]=e[2],n[4]=e[3],n[5]=0,n[6]=e[4],n[7]=e[5],n[8]=1,n},On.fromQuat=function(n,e){var o=e[0],u=e[1],c=e[2],v=e[3],g=o+o,x=u+u,_=c+c,M=o*g,I=u*g,F=u*x,ut=c*g,yt=c*x,Dt=c*_,Et=v*g,Pt=v*x,Ht=v*_;return n[0]=1-F-Dt,n[3]=I-Ht,n[6]=ut+Pt,n[1]=I+Ht,n[4]=1-M-Dt,n[7]=yt-Et,n[2]=ut-Pt,n[5]=yt+Et,n[8]=1-M-F,n},On.normalFromMat4=function(n,e){var o=e[0],u=e[1],c=e[2],v=e[3],g=e[4],x=e[5],_=e[6],M=e[7],I=e[8],F=e[9],ut=e[10],yt=e[11],Dt=e[12],Et=e[13],Pt=e[14],Ht=e[15],$t=o*x-u*g,qt=o*_-c*g,le=o*M-v*g,ie=u*_-c*x,he=u*M-v*x,Re=c*M-v*_,ze=I*Et-F*Dt,Pe=I*Pt-ut*Dt,Ke=I*Ht-yt*Dt,rr=F*Pt-ut*Et,Ue=F*Ht-yt*Et,hr=ut*Ht-yt*Pt,ke=$t*hr-qt*Ue+le*rr+ie*Ke-he*Pe+Re*ze;return ke?(ke=1/ke,n[0]=(x*hr-_*Ue+M*rr)*ke,n[1]=(_*Ke-g*hr-M*Pe)*ke,n[2]=(g*Ue-x*Ke+M*ze)*ke,n[3]=(c*Ue-u*hr-v*rr)*ke,n[4]=(o*hr-c*Ke+v*Pe)*ke,n[5]=(u*Ke-o*Ue-v*ze)*ke,n[6]=(Et*Re-Pt*he+Ht*ie)*ke,n[7]=(Pt*le-Dt*Re-Ht*qt)*ke,n[8]=(Dt*he-Et*le+Ht*$t)*ke,n):null},On.frob=function(n){return Math.sqrt(Math.pow(n[0],2)+Math.pow(n[1],2)+Math.pow(n[2],2)+Math.pow(n[3],2)+Math.pow(n[4],2)+Math.pow(n[5],2)+Math.pow(n[6],2)+Math.pow(n[7],2)+Math.pow(n[8],2))};var Fr=On,Pr={};Pr.create=function(){var n=new De(4);return n[0]=0,n[1]=0,n[2]=0,n[3]=1,n},Pr.rotationTo=function(){var n=Te.create(),e=Te.fromValues(1,0,0),o=Te.fromValues(0,1,0);return function(u,c,v){var g=Te.dot(c,v);return g<-.999999?(Te.cross(n,e,c),Te.length(n)<1e-6&&Te.cross(n,o,c),Te.normalize(n,n),Pr.setAxisAngle(u,n,Math.PI),u):g>.999999?(u[0]=0,u[1]=0,u[2]=0,u[3]=1,u):(Te.cross(n,c,v),u[0]=n[0],u[1]=n[1],u[2]=n[2],u[3]=1+g,Pr.normalize(u,u))}}(),Pr.setAxes=function(){var n=Fr.create();return function(e,o,u,c){return n[0]=u[0],n[3]=u[1],n[6]=u[2],n[1]=c[0],n[4]=c[1],n[7]=c[2],n[2]=-o[0],n[5]=-o[1],n[8]=-o[2],Pr.normalize(e,Pr.fromMat3(e,n))}}(),Pr.clone=dr.clone,Pr.fromValues=dr.fromValues,Pr.copy=dr.copy,Pr.set=dr.set,Pr.identity=function(n){return n[0]=0,n[1]=0,n[2]=0,n[3]=1,n},Pr.setAxisAngle=function(n,e,o){o=o*.5;var u=Math.sin(o);return n[0]=u*e[0],n[1]=u*e[1],n[2]=u*e[2],n[3]=Math.cos(o),n},Pr.add=dr.add,Pr.multiply=function(n,e,o){var u=e[0],c=e[1],v=e[2],g=e[3],x=o[0],_=o[1],M=o[2],I=o[3];return n[0]=u*I+g*x+c*M-v*_,n[1]=c*I+g*_+v*x-u*M,n[2]=v*I+g*M+u*_-c*x,n[3]=g*I-u*x-c*_-v*M,n},Pr.mul=Pr.multiply,Pr.scale=dr.scale,Pr.rotateX=function(n,e,o){o*=.5;var u=e[0],c=e[1],v=e[2],g=e[3],x=Math.sin(o),_=Math.cos(o);return n[0]=u*_+g*x,n[1]=c*_+v*x,n[2]=v*_-c*x,n[3]=g*_-u*x,n},Pr.rotateY=function(n,e,o){o*=.5;var u=e[0],c=e[1],v=e[2],g=e[3],x=Math.sin(o),_=Math.cos(o);return n[0]=u*_-v*x,n[1]=c*_+g*x,n[2]=v*_+u*x,n[3]=g*_-c*x,n},Pr.rotateZ=function(n,e,o){o*=.5;var u=e[0],c=e[1],v=e[2],g=e[3],x=Math.sin(o),_=Math.cos(o);return n[0]=u*_+c*x,n[1]=c*_-u*x,n[2]=v*_+g*x,n[3]=g*_-v*x,n},Pr.calculateW=function(n,e){var o=e[0],u=e[1],c=e[2];return n[0]=o,n[1]=u,n[2]=c,n[3]=Math.sqrt(Math.abs(1-o*o-u*u-c*c)),n},Pr.dot=dr.dot,Pr.lerp=dr.lerp,Pr.slerp=function(n,e,o,u){var c=e[0],v=e[1],g=e[2],x=e[3],_=o[0],M=o[1],I=o[2],F=o[3],ut,yt,Dt,Et,Pt;return yt=c*_+v*M+g*I+x*F,yt<0&&(yt=-yt,_=-_,M=-M,I=-I,F=-F),1-yt>1e-6?(ut=Math.acos(yt),Dt=Math.sin(ut),Et=Math.sin((1-u)*ut)/Dt,Pt=Math.sin(u*ut)/Dt):(Et=1-u,Pt=u),n[0]=Et*c+Pt*_,n[1]=Et*v+Pt*M,n[2]=Et*g+Pt*I,n[3]=Et*x+Pt*F,n},Pr.invert=function(n,e){var o=e[0],u=e[1],c=e[2],v=e[3],g=o*o+u*u+c*c+v*v,x=g?1/g:0;return n[0]=-o*x,n[1]=-u*x,n[2]=-c*x,n[3]=v*x,n},Pr.conjugate=function(n,e){return n[0]=-e[0],n[1]=-e[1],n[2]=-e[2],n[3]=e[3],n},Pr.length=dr.length,Pr.len=Pr.length,Pr.squaredLength=dr.squaredLength,Pr.sqrLen=Pr.squaredLength,Pr.normalize=dr.normalize,Pr.fromMat3=function(n,e){var o=e[0]+e[4]+e[8],u;if(o>0)u=Math.sqrt(o+1),n[3]=.5*u,u=.5/u,n[0]=(e[5]-e[7])*u,n[1]=(e[6]-e[2])*u,n[2]=(e[1]-e[3])*u;else{var c=0;e[4]>e[0]&&(c=1),e[8]>e[c*3+c]&&(c=2);var v=(c+1)%3,g=(c+2)%3;u=Math.sqrt(e[c*3+c]-e[v*3+v]-e[g*3+g]+1),n[c]=.5*u,u=.5/u,n[3]=(e[v*3+g]-e[g*3+v])*u,n[v]=(e[v*3+c]+e[c*3+v])*u,n[g]=(e[g*3+c]+e[c*3+g])*u}return n};var Br=Pr,cn=function(){this._axisX=new or,this._axisY=new or,this._axisZ=new or,this.array=ir.create(),this._dirty=!0};cn.prototype={constructor:cn,setArray:function(e){for(var o=0;o<this.array.length;o++)this.array[o]=e[o];return this._dirty=!0,this},adjoint:function(){return ir.adjoint(this.array,this.array),this._dirty=!0,this},clone:function(){return new cn().copy(this)},copy:function(e){return ir.copy(this.array,e.array),this._dirty=!0,this},determinant:function(){return ir.determinant(this.array)},fromQuat:function(e){return ir.fromQuat(this.array,e.array),this._dirty=!0,this},fromRotationTranslation:function(e,o){return ir.fromRotationTranslation(this.array,e.array,o.array),this._dirty=!0,this},fromMat2d:function(e){return cn.fromMat2d(this,e),this},frustum:function(e,o,u,c,v,g){return ir.frustum(this.array,e,o,u,c,v,g),this._dirty=!0,this},identity:function(){return ir.identity(this.array),this._dirty=!0,this},invert:function(){return ir.invert(this.array,this.array),this._dirty=!0,this},lookAt:function(e,o,u){return ir.lookAt(this.array,e.array,o.array,u.array),this._dirty=!0,this},mul:function(e){return ir.mul(this.array,this.array,e.array),this._dirty=!0,this},mulLeft:function(e){return ir.mul(this.array,e.array,this.array),this._dirty=!0,this},multiply:function(e){return ir.multiply(this.array,this.array,e.array),this._dirty=!0,this},multiplyLeft:function(e){return ir.multiply(this.array,e.array,this.array),this._dirty=!0,this},ortho:function(e,o,u,c,v,g){return ir.ortho(this.array,e,o,u,c,v,g),this._dirty=!0,this},perspective:function(e,o,u,c){return ir.perspective(this.array,e,o,u,c),this._dirty=!0,this},rotate:function(e,o){return ir.rotate(this.array,this.array,e,o.array),this._dirty=!0,this},rotateX:function(e){return ir.rotateX(this.array,this.array,e),this._dirty=!0,this},rotateY:function(e){return ir.rotateY(this.array,this.array,e),this._dirty=!0,this},rotateZ:function(e){return ir.rotateZ(this.array,this.array,e),this._dirty=!0,this},scale:function(e){return ir.scale(this.array,this.array,e.array),this._dirty=!0,this},translate:function(e){return ir.translate(this.array,this.array,e.array),this._dirty=!0,this},transpose:function(){return ir.transpose(this.array,this.array),this._dirty=!0,this},decomposeMatrix:function(){var n=Te.create(),e=Te.create(),o=Te.create(),u=Fr.create();return function(c,v,g){var x=this.array;Te.set(n,x[0],x[1],x[2]),Te.set(e,x[4],x[5],x[6]),Te.set(o,x[8],x[9],x[10]);var _=Te.length(n),M=Te.length(e),I=Te.length(o),F=this.determinant();F<0&&(_=-_),c&&c.set(_,M,I),g.set(x[12],x[13],x[14]),Fr.fromMat4(u,x),u[0]/=_,u[1]/=_,u[2]/=_,u[3]/=M,u[4]/=M,u[5]/=M,u[6]/=I,u[7]/=I,u[8]/=I,Br.fromMat3(v.array,u),Br.normalize(v.array,v.array),v._dirty=!0,g._dirty=!0}}(),toString:function(){return"["+Array.prototype.join.call(this.array,",")+"]"},toArray:function(){return Array.prototype.slice.call(this.array)}};var Ao=Object.defineProperty;if(Ao){var Mo=cn.prototype;Ao(Mo,"z",{get:function(){var e=this.array;return this._axisZ.set(e[8],e[9],e[10]),this._axisZ},set:function(e){var o=this.array;e=e.array,o[8]=e[0],o[9]=e[1],o[10]=e[2],this._dirty=!0}}),Ao(Mo,"y",{get:function(){var e=this.array;return this._axisY.set(e[4],e[5],e[6]),this._axisY},set:function(e){var o=this.array;e=e.array,o[4]=e[0],o[5]=e[1],o[6]=e[2],this._dirty=!0}}),Ao(Mo,"x",{get:function(){var e=this.array;return this._axisX.set(e[0],e[1],e[2]),this._axisX},set:function(e){var o=this.array;e=e.array,o[0]=e[0],o[1]=e[1],o[2]=e[2],this._dirty=!0}})}cn.adjoint=function(n,e){return ir.adjoint(n.array,e.array),n._dirty=!0,n},cn.copy=function(n,e){return ir.copy(n.array,e.array),n._dirty=!0,n},cn.determinant=function(n){return ir.determinant(n.array)},cn.identity=function(n){return ir.identity(n.array),n._dirty=!0,n},cn.ortho=function(n,e,o,u,c,v,g){return ir.ortho(n.array,e,o,u,c,v,g),n._dirty=!0,n},cn.perspective=function(n,e,o,u,c){return ir.perspective(n.array,e,o,u,c),n._dirty=!0,n},cn.lookAt=function(n,e,o,u){return ir.lookAt(n.array,e.array,o.array,u.array),n._dirty=!0,n},cn.invert=function(n,e){return ir.invert(n.array,e.array),n._dirty=!0,n},cn.mul=function(n,e,o){return ir.mul(n.array,e.array,o.array),n._dirty=!0,n},cn.multiply=cn.mul,cn.fromQuat=function(n,e){return ir.fromQuat(n.array,e.array),n._dirty=!0,n},cn.fromRotationTranslation=function(n,e,o){return ir.fromRotationTranslation(n.array,e.array,o.array),n._dirty=!0,n},cn.fromMat2d=function(n,e){n._dirty=!0;var e=e.array,n=n.array;return n[0]=e[0],n[4]=e[2],n[12]=e[4],n[1]=e[1],n[5]=e[3],n[13]=e[5],n},cn.rotate=function(n,e,o,u){return ir.rotate(n.array,e.array,o,u.array),n._dirty=!0,n},cn.rotateX=function(n,e,o){return ir.rotateX(n.array,e.array,o),n._dirty=!0,n},cn.rotateY=function(n,e,o){return ir.rotateY(n.array,e.array,o),n._dirty=!0,n},cn.rotateZ=function(n,e,o){return ir.rotateZ(n.array,e.array,o),n._dirty=!0,n},cn.scale=function(n,e,o){return ir.scale(n.array,e.array,o.array),n._dirty=!0,n},cn.transpose=function(n,e){return ir.transpose(n.array,e.array),n._dirty=!0,n},cn.translate=function(n,e,o){return ir.translate(n.array,e.array,o.array),n._dirty=!0,n};var gr=cn,Zr=function(e,o,u,c){e=e||0,o=o||0,u=u||0,c=c===void 0?1:c,this.array=Br.fromValues(e,o,u,c),this._dirty=!0};Zr.prototype={constructor:Zr,add:function(e){return Br.add(this.array,this.array,e.array),this._dirty=!0,this},calculateW:function(){return Br.calculateW(this.array,this.array),this._dirty=!0,this},set:function(e,o,u,c){return this.array[0]=e,this.array[1]=o,this.array[2]=u,this.array[3]=c,this._dirty=!0,this},setArray:function(e){return this.array[0]=e[0],this.array[1]=e[1],this.array[2]=e[2],this.array[3]=e[3],this._dirty=!0,this},clone:function(){return new Zr(this.x,this.y,this.z,this.w)},conjugate:function(){return Br.conjugate(this.array,this.array),this._dirty=!0,this},copy:function(e){return Br.copy(this.array,e.array),this._dirty=!0,this},dot:function(e){return Br.dot(this.array,e.array)},fromMat3:function(e){return Br.fromMat3(this.array,e.array),this._dirty=!0,this},fromMat4:function(){var n=Fr.create();return function(e){return Fr.fromMat4(n,e.array),Fr.transpose(n,n),Br.fromMat3(this.array,n),this._dirty=!0,this}}(),identity:function(){return Br.identity(this.array),this._dirty=!0,this},invert:function(){return Br.invert(this.array,this.array),this._dirty=!0,this},len:function(){return Br.len(this.array)},length:function(){return Br.length(this.array)},lerp:function(e,o,u){return Br.lerp(this.array,e.array,o.array,u),this._dirty=!0,this},mul:function(e){return Br.mul(this.array,this.array,e.array),this._dirty=!0,this},mulLeft:function(e){return Br.multiply(this.array,e.array,this.array),this._dirty=!0,this},multiply:function(e){return Br.multiply(this.array,this.array,e.array),this._dirty=!0,this},multiplyLeft:function(e){return Br.multiply(this.array,e.array,this.array),this._dirty=!0,this},normalize:function(){return Br.normalize(this.array,this.array),this._dirty=!0,this},rotateX:function(e){return Br.rotateX(this.array,this.array,e),this._dirty=!0,this},rotateY:function(e){return Br.rotateY(this.array,this.array,e),this._dirty=!0,this},rotateZ:function(e){return Br.rotateZ(this.array,this.array,e),this._dirty=!0,this},rotationTo:function(e,o){return Br.rotationTo(this.array,e.array,o.array),this._dirty=!0,this},setAxes:function(e,o,u){return Br.setAxes(this.array,e.array,o.array,u.array),this._dirty=!0,this},setAxisAngle:function(e,o){return Br.setAxisAngle(this.array,e.array,o),this._dirty=!0,this},slerp:function(e,o,u){return Br.slerp(this.array,e.array,o.array,u),this._dirty=!0,this},sqrLen:function(){return Br.sqrLen(this.array)},squaredLength:function(){return Br.squaredLength(this.array)},fromEuler:function(e,o){return Zr.fromEuler(this,e,o)},toString:function(){return"["+Array.prototype.join.call(this.array,",")+"]"},toArray:function(){return Array.prototype.slice.call(this.array)}};var Do=Object.defineProperty;if(Do){var Da=Zr.prototype;Do(Da,"x",{get:function(){return this.array[0]},set:function(e){this.array[0]=e,this._dirty=!0}}),Do(Da,"y",{get:function(){return this.array[1]},set:function(e){this.array[1]=e,this._dirty=!0}}),Do(Da,"z",{get:function(){return this.array[2]},set:function(e){this.array[2]=e,this._dirty=!0}}),Do(Da,"w",{get:function(){return this.array[3]},set:function(e){this.array[3]=e,this._dirty=!0}})}Zr.add=function(n,e,o){return Br.add(n.array,e.array,o.array),n._dirty=!0,n},Zr.set=function(n,e,o,u,c){Br.set(n.array,e,o,u,c),n._dirty=!0},Zr.copy=function(n,e){return Br.copy(n.array,e.array),n._dirty=!0,n},Zr.calculateW=function(n,e){return Br.calculateW(n.array,e.array),n._dirty=!0,n},Zr.conjugate=function(n,e){return Br.conjugate(n.array,e.array),n._dirty=!0,n},Zr.identity=function(n){return Br.identity(n.array),n._dirty=!0,n},Zr.invert=function(n,e){return Br.invert(n.array,e.array),n._dirty=!0,n},Zr.dot=function(n,e){return Br.dot(n.array,e.array)},Zr.len=function(n){return Br.length(n.array)},Zr.lerp=function(n,e,o,u){return Br.lerp(n.array,e.array,o.array,u),n._dirty=!0,n},Zr.slerp=function(n,e,o,u){return Br.slerp(n.array,e.array,o.array,u),n._dirty=!0,n},Zr.mul=function(n,e,o){return Br.multiply(n.array,e.array,o.array),n._dirty=!0,n},Zr.multiply=Zr.mul,Zr.rotateX=function(n,e,o){return Br.rotateX(n.array,e.array,o),n._dirty=!0,n},Zr.rotateY=function(n,e,o){return Br.rotateY(n.array,e.array,o),n._dirty=!0,n},Zr.rotateZ=function(n,e,o){return Br.rotateZ(n.array,e.array,o),n._dirty=!0,n},Zr.setAxisAngle=function(n,e,o){return Br.setAxisAngle(n.array,e.array,o),n._dirty=!0,n},Zr.normalize=function(n,e){return Br.normalize(n.array,e.array),n._dirty=!0,n},Zr.sqrLen=function(n){return Br.sqrLen(n.array)},Zr.squaredLength=Zr.sqrLen,Zr.fromMat3=function(n,e){return Br.fromMat3(n.array,e.array),n._dirty=!0,n},Zr.setAxes=function(n,e,o,u){return Br.setAxes(n.array,e.array,o.array,u.array),n._dirty=!0,n},Zr.rotationTo=function(n,e,o){return Br.rotationTo(n.array,e.array,o.array),n._dirty=!0,n},Zr.fromEuler=function(n,e,o){n._dirty=!0,e=e.array;var u=n.array,c=Math.cos(e[0]/2),v=Math.cos(e[1]/2),g=Math.cos(e[2]/2),x=Math.sin(e[0]/2),_=Math.sin(e[1]/2),M=Math.sin(e[2]/2),o=(o||"XYZ").toUpperCase();switch(o){case"XYZ":u[0]=x*v*g+c*_*M,u[1]=c*_*g-x*v*M,u[2]=c*v*M+x*_*g,u[3]=c*v*g-x*_*M;break;case"YXZ":u[0]=x*v*g+c*_*M,u[1]=c*_*g-x*v*M,u[2]=c*v*M-x*_*g,u[3]=c*v*g+x*_*M;break;case"ZXY":u[0]=x*v*g-c*_*M,u[1]=c*_*g+x*v*M,u[2]=c*v*M+x*_*g,u[3]=c*v*g-x*_*M;break;case"ZYX":u[0]=x*v*g-c*_*M,u[1]=c*_*g+x*v*M,u[2]=c*v*M-x*_*g,u[3]=c*v*g+x*_*M;break;case"YZX":u[0]=x*v*g+c*_*M,u[1]=c*_*g+x*v*M,u[2]=c*v*M-x*_*g,u[3]=c*v*g-x*_*M;break;case"XZY":u[0]=x*v*g-c*_*M,u[1]=c*_*g-x*v*M,u[2]=c*v*M+x*_*g,u[3]=c*v*g+x*_*M;break}};var Co=Zr,ua=Te.set,fs=Te.copy,Ca=function(e,o){this.min=e||new or(Infinity,Infinity,Infinity),this.max=o||new or(-Infinity,-Infinity,-Infinity),this.vertices=null};Ca.prototype={constructor:Ca,updateFromVertices:function(e){if(e.length>0){var o=this.min,u=this.max,c=o.array,v=u.array;fs(c,e[0]),fs(v,e[0]);for(var g=1;g<e.length;g++){var x=e[g];x[0]<c[0]&&(c[0]=x[0]),x[1]<c[1]&&(c[1]=x[1]),x[2]<c[2]&&(c[2]=x[2]),x[0]>v[0]&&(v[0]=x[0]),x[1]>v[1]&&(v[1]=x[1]),x[2]>v[2]&&(v[2]=x[2])}o._dirty=!0,u._dirty=!0}},union:function(e){var o=this.min,u=this.max;return Te.min(o.array,o.array,e.min.array),Te.max(u.array,u.array,e.max.array),o._dirty=!0,u._dirty=!0,this},intersection:function(e){var o=this.min,u=this.max;return Te.max(o.array,o.array,e.min.array),Te.min(u.array,u.array,e.max.array),o._dirty=!0,u._dirty=!0,this},intersectBoundingBox:function(e){var o=this.min.array,u=this.max.array,c=e.min.array,v=e.max.array;return!(o[0]>v[0]||o[1]>v[1]||o[2]>v[2]||u[0]<c[0]||u[1]<c[1]||u[2]<c[2])},containBoundingBox:function(e){var o=this.min.array,u=this.max.array,c=e.min.array,v=e.max.array;return o[0]<=c[0]&&o[1]<=c[1]&&o[2]<=c[2]&&u[0]>=v[0]&&u[1]>=v[1]&&u[2]>=v[2]},containPoint:function(e){var o=this.min.array,u=this.max.array,c=e.array;return o[0]<=c[0]&&o[1]<=c[1]&&o[2]<=c[2]&&u[0]>=c[0]&&u[1]>=c[1]&&u[2]>=c[2]},isFinite:function(n){function e(){return n.apply(this,arguments)}return e.toString=function(){return n.toString()},e}(function(){var n=this.min.array,e=this.max.array;return isFinite(n[0])&&isFinite(n[1])&&isFinite(n[2])&&isFinite(e[0])&&isFinite(e[1])&&isFinite(e[2])}),applyTransform:function(e){this.transformFrom(this,e)},transformFrom:function(){var n=Te.create(),e=Te.create(),o=Te.create(),u=Te.create(),c=Te.create(),v=Te.create();return function(g,x){var _=g.min.array,M=g.max.array,I=x.array;return n[0]=I[0]*_[0],n[1]=I[1]*_[0],n[2]=I[2]*_[0],e[0]=I[0]*M[0],e[1]=I[1]*M[0],e[2]=I[2]*M[0],o[0]=I[4]*_[1],o[1]=I[5]*_[1],o[2]=I[6]*_[1],u[0]=I[4]*M[1],u[1]=I[5]*M[1],u[2]=I[6]*M[1],c[0]=I[8]*_[2],c[1]=I[9]*_[2],c[2]=I[10]*_[2],v[0]=I[8]*M[2],v[1]=I[9]*M[2],v[2]=I[10]*M[2],_=this.min.array,M=this.max.array,_[0]=Math.min(n[0],e[0])+Math.min(o[0],u[0])+Math.min(c[0],v[0])+I[12],_[1]=Math.min(n[1],e[1])+Math.min(o[1],u[1])+Math.min(c[1],v[1])+I[13],_[2]=Math.min(n[2],e[2])+Math.min(o[2],u[2])+Math.min(c[2],v[2])+I[14],M[0]=Math.max(n[0],e[0])+Math.max(o[0],u[0])+Math.max(c[0],v[0])+I[12],M[1]=Math.max(n[1],e[1])+Math.max(o[1],u[1])+Math.max(c[1],v[1])+I[13],M[2]=Math.max(n[2],e[2])+Math.max(o[2],u[2])+Math.max(c[2],v[2])+I[14],this.min._dirty=!0,this.max._dirty=!0,this}}(),applyProjection:function(e){var o=this.min.array,u=this.max.array,c=e.array,v=o[0],g=o[1],x=o[2],_=u[0],M=u[1],I=o[2],F=u[0],ut=u[1],yt=u[2];if(c[15]===1)o[0]=c[0]*v+c[12],o[1]=c[5]*g+c[13],u[2]=c[10]*x+c[14],u[0]=c[0]*F+c[12],u[1]=c[5]*ut+c[13],o[2]=c[10]*yt+c[14];else{var Dt=-1/x;o[0]=c[0]*v*Dt,o[1]=c[5]*g*Dt,u[2]=(c[10]*x+c[14])*Dt,Dt=-1/I,u[0]=c[0]*_*Dt,u[1]=c[5]*M*Dt,Dt=-1/yt,o[2]=(c[10]*yt+c[14])*Dt}return this.min._dirty=!0,this.max._dirty=!0,this},updateVertices:function(){var e=this.vertices;if(!e){e=[];for(var o=0;o<8;o++)e[o]=Te.fromValues(0,0,0);this.vertices=e}var u=this.min.array,c=this.max.array;return ua(e[0],u[0],u[1],u[2]),ua(e[1],u[0],c[1],u[2]),ua(e[2],c[0],u[1],u[2]),ua(e[3],c[0],c[1],u[2]),ua(e[4],u[0],u[1],c[2]),ua(e[5],u[0],c[1],c[2]),ua(e[6],c[0],u[1],c[2]),ua(e[7],c[0],c[1],c[2]),this},copy:function(e){var o=this.min,u=this.max;return fs(o.array,e.min.array),fs(u.array,e.max.array),o._dirty=!0,u._dirty=!0,this},clone:function(){var e=new Ca;return e.copy(this),e}};var di=Ca,eu=0,al=W.extend({name:"",position:null,rotation:null,scale:null,worldTransform:null,localTransform:null,autoUpdateLocalTransform:!0,_parent:null,_scene:null,_needsUpdateWorldTransform:!0,_inIterating:!1,__depth:0},function(){this.name||(this.name=(this.type||"NODE")+"_"+eu++),this.position||(this.position=new or),this.rotation||(this.rotation=new Co),this.scale||(this.scale=new or(1,1,1)),this.worldTransform=new gr,this.localTransform=new gr,this._children=[]},{target:null,invisible:!1,isSkinnedMesh:function(){return!1},isRenderable:function(){return!1},setName:function(e){var o=this._scene;if(o){var u=o._nodeRepository;delete u[this.name],u[e]=this}this.name=e},add:function(e){var o=e._parent;if(o!==this){o&&o.remove(e),e._parent=this,this._children.push(e);var u=this._scene;u&&u!==e.scene&&e.traverse(this._addSelfToScene,this),e._needsUpdateWorldTransform=!0}},remove:function(e){var o=this._children,u=o.indexOf(e);u<0||(o.splice(u,1),e._parent=null,this._scene&&e.traverse(this._removeSelfFromScene,this))},removeAll:function(){for(var e=this._children,o=0;o<e.length;o++)e[o]._parent=null,this._scene&&e[o].traverse(this._removeSelfFromScene,this);this._children=[]},getScene:function(){return this._scene},getParent:function(){return this._parent},_removeSelfFromScene:function(e){e._scene.removeFromScene(e),e._scene=null},_addSelfToScene:function(e){this._scene.addToScene(e),e._scene=this._scene},isAncestor:function(e){for(var o=e._parent;o;){if(o===this)return!0;o=o._parent}return!1},children:function(){return this._children.slice()},childAt:function(e){return this._children[e]},getChildByName:function(e){for(var o=this._children,u=0;u<o.length;u++)if(o[u].name===e)return o[u]},getDescendantByName:function(e){for(var o=this._children,u=0;u<o.length;u++){var c=o[u];if(c.name===e)return c;var v=c.getDescendantByName(e);if(v)return v}},queryNode:function(e){if(!!e){for(var o=e.split("/"),u=this,c=0;c<o.length;c++){var v=o[c];if(!!v){for(var g=!1,x=u._children,_=0;_<x.length;_++){var M=x[_];if(M.name===v){u=M,g=!0;break}}if(!g)return}}return u}},getPath:function(e){if(!this._parent)return"/";for(var o=this._parent,u=this.name;o._parent&&(u=o.name+"/"+u,o._parent!=e);)o=o._parent;return!o._parent&&e?null:u},traverse:function(e,o){e.call(o,this);for(var u=this._children,c=0,v=u.length;c<v;c++)u[c].traverse(e,o)},eachChild:function(e,o){for(var u=this._children,c=0,v=u.length;c<v;c++){var g=u[c];e.call(o,g,c)}},setLocalTransform:function(e){ir.copy(this.localTransform.array,e.array),this.decomposeLocalTransform()},decomposeLocalTransform:function(e){var o=e?null:this.scale;this.localTransform.decomposeMatrix(o,this.rotation,this.position)},setWorldTransform:function(e){ir.copy(this.worldTransform.array,e.array),this.decomposeWorldTransform()},decomposeWorldTransform:function(){var n=ir.create();return function(e){var o=this.localTransform,u=this.worldTransform;this._parent?(ir.invert(n,this._parent.worldTransform.array),ir.multiply(o.array,n,u.array)):ir.copy(o.array,u.array);var c=e?null:this.scale;o.decomposeMatrix(c,this.rotation,this.position)}}(),transformNeedsUpdate:function(){return this.position._dirty||this.rotation._dirty||this.scale._dirty},updateLocalTransform:function(){var e=this.position,o=this.rotation,u=this.scale;if(this.transformNeedsUpdate()){var c=this.localTransform.array;ir.fromRotationTranslation(c,o.array,e.array),ir.scale(c,c,u.array),o._dirty=!1,u._dirty=!1,e._dirty=!1,this._needsUpdateWorldTransform=!0}},_updateWorldTransformTopDown:function(){var e=this.localTransform.array,o=this.worldTransform.array;this._parent?ir.multiplyAffine(o,this._parent.worldTransform.array,e):ir.copy(o,e)},updateWorldTransform:function(){for(var e=this;e&&e.getParent()&&e.getParent().transformNeedsUpdate();)e=e.getParent();e.update()},update:function(e){this.autoUpdateLocalTransform?this.updateLocalTransform():e=!0,(e||this._needsUpdateWorldTransform)&&(this._updateWorldTransformTopDown(),e=!0,this._needsUpdateWorldTransform=!1);for(var o=this._children,u=0,c=o.length;u<c;u++)o[u].update(e)},getBoundingBox:function(){function n(c){return!c.invisible&&c.geometry}var e=new di,o=new gr,u=new gr;return function(c,v){return v=v||new di,c=c||n,this._parent?gr.invert(u,this._parent.worldTransform):gr.identity(u),this.traverse(function(g){g.geometry&&g.geometry.boundingBox&&(e.copy(g.geometry.boundingBox),gr.multiply(o,u,g.worldTransform),e.applyTransform(o),v.union(e))},this,n),v}}(),getWorldPosition:function(e){this.transformNeedsUpdate()&&this.updateWorldTransform();var o=this.worldTransform.array;if(e){var u=e.array;return u[0]=o[12],u[1]=o[13],u[2]=o[14],e}else return new or(o[12],o[13],o[14])},clone:function(){var e=new this.constructor,o=this._children;e.setName(this.name),e.position.copy(this.position),e.rotation.copy(this.rotation),e.scale.copy(this.scale);for(var u=0;u<o.length;u++)e.add(o[u].clone());return e},rotateAround:function(){var n=new or,e=new gr;return function(o,u,c){n.copy(this.position).subtract(o);var v=this.localTransform;v.identity(),v.translate(o),v.rotate(c,u),e.fromRotationTranslation(this.rotation,n),v.multiply(e),v.scale(this.scale),this.decomposeLocalTransform(),this._needsUpdateWorldTransform=!0}}(),lookAt:function(){var n=new gr;return function(e,o){n.lookAt(this.position,e,o||this.localTransform.y).invert(),this.setLocalTransform(n),this.target=e}}()}),Mi=al,Si=Mi.extend({material:null,geometry:null,mode:$.TRIANGLES,_renderInfo:null},{__program:null,lightGroup:0,renderOrder:0,culling:!0,cullFace:$.BACK,frontFace:$.CCW,frustumCulling:!0,receiveShadow:!0,castShadow:!0,ignorePicking:!1,ignorePreZ:!1,ignoreGBuffer:!1,isRenderable:function(){return this.geometry&&this.material&&this.material.shader&&!this.invisible&&this.geometry.vertexCount>0},beforeRender:function(e){},afterRender:function(e,o){},getBoundingBox:function(e,o){return o=Mi.prototype.getBoundingBox.call(this,e,o),this.geometry&&this.geometry.boundingBox&&o.union(this.geometry.boundingBox),o},clone:function(){var n=["castShadow","receiveShadow","mode","culling","cullFace","frontFace","frustumCulling","renderOrder","lineWidth","ignorePicking","ignorePreZ","ignoreGBuffer"];return function(){var e=Mi.prototype.clone.call(this);e.geometry=this.geometry,e.material=this.material;for(var o=0;o<n.length;o++){var u=n[o];e[u]!==this[u]&&(e[u]=this[u])}return e}}()});Si.POINTS=$.POINTS,Si.LINES=$.LINES,Si.LINE_LOOP=$.LINE_LOOP,Si.LINE_STRIP=$.LINE_STRIP,Si.TRIANGLES=$.TRIANGLES,Si.TRIANGLE_STRIP=$.TRIANGLE_STRIP,Si.TRIANGLE_FAN=$.TRIANGLE_FAN,Si.BACK=$.BACK,Si.FRONT=$.FRONT,Si.FRONT_AND_BACK=$.FRONT_AND_BACK,Si.CW=$.CW,Si.CCW=$.CCW;var qa=Si,fa=W.extend({scene:null,camera:null,renderer:null},function(){this._ray=new vi,this._ndc=new br},{pick:function(e,o,u){var c=this.pickAll(e,o,[],u);return c[0]||null},pickAll:function(e,o,u,c){return this.renderer.screenToNDC(e,o,this._ndc),this.camera.castRay(this._ndc,this._ray),u=u||[],this._intersectNode(this.scene,u,c||!1),u.sort(this._intersectionCompareFunc),u},_intersectNode:function(e,o,u){e instanceof qa&&e.isRenderable()&&(!e.ignorePicking||u)&&(e.mode===$.TRIANGLES&&e.geometry.isUseIndices()||e.geometry.pickByRay||e.geometry.pick)&&this._intersectRenderable(e,o);for(var c=0;c<e._children.length;c++)this._intersectNode(e._children[c],o,u)},_intersectRenderable:function(){var n=new or,e=new or,o=new or,u=new vi,c=new gr;return function(v,g){var x=v.isSkinnedMesh();u.copy(this._ray),gr.invert(c,v.worldTransform),x||u.applyTransform(c);var _=v.geometry,M=x?v.skeleton.boundingBox:_.boundingBox;if(!(M&&!u.intersectBoundingBox(M))){if(_.pick){_.pick(this._ndc.x,this._ndc.y,this.renderer,this.camera,v,g);return}else if(_.pickByRay){_.pickByRay(u,v,g);return}var I=v.cullFace===$.BACK&&v.frontFace===$.CCW||v.cullFace===$.FRONT&&v.frontFace===$.CW,F,ut=_.indices,yt=_.attributes.position,Dt=_.attributes.weight,Et=_.attributes.joint,Pt,Ht=[];if(!(!yt||!yt.value||!ut)){if(x){Pt=v.skeleton.getSubSkinMatrices(v.__uid__,v.joints);for(var $t=0;$t<v.joints.length;$t++){Ht[$t]=Ht[$t]||[];for(var qt=0;qt<16;qt++)Ht[$t][qt]=Pt[$t*16+qt]}var le=[],ie=[],he=[],Re=[],ze=[],Pe=_.attributes.skinnedPosition;(!Pe||!Pe.value)&&(_.createAttribute("skinnedPosition","f",3),Pe=_.attributes.skinnedPosition,Pe.init(_.vertexCount));for(var $t=0;$t<_.vertexCount;$t++){yt.get($t,le),Dt.get($t,ie),Et.get($t,he),ie[3]=1-ie[0]-ie[1]-ie[2],Te.set(Re,0,0,0);for(var qt=0;qt<4;qt++)he[qt]>=0&&ie[qt]>1e-4&&(Te.transformMat4(ze,le,Ht[he[qt]]),Te.scaleAndAdd(Re,Re,ze,ie[qt]));Pe.set($t,Re)}}for(var $t=0;$t<ut.length;$t+=3){var Ke=ut[$t],rr=ut[$t+1],Ue=ut[$t+2],hr=x?_.attributes.skinnedPosition:yt;if(hr.get(Ke,n.array),hr.get(rr,e.array),hr.get(Ue,o.array),I?F=u.intersectTriangle(n,e,o,v.culling):F=u.intersectTriangle(n,o,e,v.culling),F){var ke=new or;x?or.copy(ke,F):or.transformMat4(ke,F,v.worldTransform),g.push(new fa.Intersection(F,ke,v,[Ke,rr,Ue],$t/3,or.dist(ke,this._ray.origin)))}}}}}}(),_intersectionCompareFunc:function(e,o){return e.distance-o.distance}});fa.Intersection=function(n,e,o,u,c,v){this.point=n,this.pointWorld=e,this.target=o,this.triangle=u,this.triangleIndex=c,this.distance=v};var df=fa,pn="__dt__",Eo=function(){this._contextId=0,this._caches=[],this._context={}};Eo.prototype={use:function(e,o){var u=this._caches;u[e]||(u[e]={},o&&(u[e]=o())),this._contextId=e,this._context=u[e]},put:function(e,o){this._context[e]=o},get:function(e){return this._context[e]},dirty:function(e){e=e||"";var o=pn+e;this.put(o,!0)},dirtyAll:function(e){e=e||"";for(var o=pn+e,u=this._caches,c=0;c<u.length;c++)u[c]&&(u[c][o]=!0)},fresh:function(e){e=e||"";var o=pn+e;this.put(o,!1)},freshAll:function(e){e=e||"";for(var o=pn+e,u=this._caches,c=0;c<u.length;c++)u[c]&&(u[c][o]=!1)},isDirty:function(e){e=e||"";var o=pn+e,u=this._context;return!u.hasOwnProperty(o)||u[o]===!0},deleteContext:function(e){delete this._caches[e],this._context={}},delete:function(e){delete this._context[e]},clearAll:function(){this._caches={}},getContext:function(){return this._context},eachContext:function(e,o){var u=Object.keys(this._caches);u.forEach(function(c){e&&e.call(o,c)})},miss:function(e){return!this._context.hasOwnProperty(e)}},Eo.prototype.constructor=Eo;var Ea=Eo,Wr=W.extend({width:512,height:512,type:$.UNSIGNED_BYTE,format:$.RGBA,wrapS:$.REPEAT,wrapT:$.REPEAT,minFilter:$.LINEAR_MIPMAP_LINEAR,magFilter:$.LINEAR,useMipmap:!0,anisotropic:1,flipY:!0,sRGB:!0,unpackAlignment:4,premultiplyAlpha:!1,dynamic:!1,NPOT:!1,__used:0},function(){this._cache=new Ea},{getWebGLTexture:function(e){var o=e.gl,u=this._cache;return u.use(e.__uid__),u.miss("webgl_texture")&&u.put("webgl_texture",o.createTexture()),this.dynamic?this.update(e):u.isDirty()&&(this.update(e),u.fresh()),u.get("webgl_texture")},bind:function(){},unbind:function(){},dirty:function(){this._cache&&this._cache.dirtyAll()},update:function(e){},updateCommon:function(e){var o=e.gl;o.pixelStorei(o.UNPACK_FLIP_Y_WEBGL,this.flipY),o.pixelStorei(o.UNPACK_PREMULTIPLY_ALPHA_WEBGL,this.premultiplyAlpha),o.pixelStorei(o.UNPACK_ALIGNMENT,this.unpackAlignment),this.format===$.DEPTH_COMPONENT&&(this.useMipmap=!1);var u=e.getGLExtension("EXT_sRGB");this.format===Wr.SRGB&&!u&&(this.format=Wr.RGB),this.format===Wr.SRGB_ALPHA&&!u&&(this.format=Wr.RGBA),this.NPOT=!this.isPowerOfTwo()},getAvailableWrapS:function(){return this.NPOT?$.CLAMP_TO_EDGE:this.wrapS},getAvailableWrapT:function(){return this.NPOT?$.CLAMP_TO_EDGE:this.wrapT},getAvailableMinFilter:function(){var e=this.minFilter;return this.NPOT||!this.useMipmap?e===$.NEAREST_MIPMAP_NEAREST||e===$.NEAREST_MIPMAP_LINEAR?$.NEAREST:e===$.LINEAR_MIPMAP_LINEAR||e===$.LINEAR_MIPMAP_NEAREST?$.LINEAR:e:e},getAvailableMagFilter:function(){return this.magFilter},nextHighestPowerOfTwo:function(e){--e;for(var o=1;o<32;o<<=1)e=e|e>>o;return e+1},dispose:function(e){var o=this._cache;o.use(e.__uid__);var u=o.get("webgl_texture");u&&e.gl.deleteTexture(u),o.deleteContext(e.__uid__)},isRenderable:function(){},isPowerOfTwo:function(){}});Object.defineProperty(Wr.prototype,"width",{get:function(){return this._width},set:function(e){this._width=e}}),Object.defineProperty(Wr.prototype,"height",{get:function(){return this._height},set:function(e){this._height=e}}),Wr.BYTE=$.BYTE,Wr.UNSIGNED_BYTE=$.UNSIGNED_BYTE,Wr.SHORT=$.SHORT,Wr.UNSIGNED_SHORT=$.UNSIGNED_SHORT,Wr.INT=$.INT,Wr.UNSIGNED_INT=$.UNSIGNED_INT,Wr.FLOAT=$.FLOAT,Wr.HALF_FLOAT=36193,Wr.UNSIGNED_INT_24_8_WEBGL=34042,Wr.DEPTH_COMPONENT=$.DEPTH_COMPONENT,Wr.DEPTH_STENCIL=$.DEPTH_STENCIL,Wr.ALPHA=$.ALPHA,Wr.RGB=$.RGB,Wr.RGBA=$.RGBA,Wr.LUMINANCE=$.LUMINANCE,Wr.LUMINANCE_ALPHA=$.LUMINANCE_ALPHA,Wr.SRGB=35904,Wr.SRGB_ALPHA=35906,Wr.COMPRESSED_RGB_S3TC_DXT1_EXT=33776,Wr.COMPRESSED_RGBA_S3TC_DXT1_EXT=33777,Wr.COMPRESSED_RGBA_S3TC_DXT3_EXT=33778,Wr.COMPRESSED_RGBA_S3TC_DXT5_EXT=33779,Wr.NEAREST=$.NEAREST,Wr.LINEAR=$.LINEAR,Wr.NEAREST_MIPMAP_NEAREST=$.NEAREST_MIPMAP_NEAREST,Wr.LINEAR_MIPMAP_NEAREST=$.LINEAR_MIPMAP_NEAREST,Wr.NEAREST_MIPMAP_LINEAR=$.NEAREST_MIPMAP_LINEAR,Wr.LINEAR_MIPMAP_LINEAR=$.LINEAR_MIPMAP_LINEAR,Wr.REPEAT=$.REPEAT,Wr.CLAMP_TO_EDGE=$.CLAMP_TO_EDGE,Wr.MIRRORED_REPEAT=$.MIRRORED_REPEAT;var Mr=Wr,ri=qa.extend({skeleton:null,joints:null},function(){this.joints||(this.joints=[])},{offsetMatrix:null,isInstancedMesh:function(){return!1},isSkinnedMesh:function(){return!!(this.skeleton&&this.joints&&this.joints.length>0)},clone:function(){var e=qa.prototype.clone.call(this);return e.skeleton=this.skeleton,this.joints&&(e.joints=this.joints.slice()),e}});ri.POINTS=$.POINTS,ri.LINES=$.LINES,ri.LINE_LOOP=$.LINE_LOOP,ri.LINE_STRIP=$.LINE_STRIP,ri.TRIANGLES=$.TRIANGLES,ri.TRIANGLE_STRIP=$.TRIANGLE_STRIP,ri.TRIANGLE_FAN=$.TRIANGLE_FAN,ri.BACK=$.BACK,ri.FRONT=$.FRONT,ri.FRONT_AND_BACK=$.FRONT_AND_BACK,ri.CW=$.CW,ri.CCW=$.CCW;var ni=ri,cs={};cs.isPowerOfTwo=function(n){return(n&n-1)==0},cs.nextPowerOfTwo=function(n){return n--,n|=n>>1,n|=n>>2,n|=n>>4,n|=n>>8,n|=n>>16,n++,n},cs.nearestPowerOfTwo=function(n){return Math.pow(2,Math.round(Math.log(n)/Math.LN2))};var ru=cs,ca=ru.isPowerOfTwo;function nu(n){return Math.pow(2,Math.round(Math.log(n)/Math.LN2))}function pf(n,e){var o=nu(n.width),u=nu(n.height);e=e||document.createElement("canvas"),e.width=o,e.height=u;var c=e.getContext("2d");return c.drawImage(n.image,0,0,o,u),e}var Lo=Mr.extend(function(){return{image:null,pixels:null,mipmaps:[],convertToPOT:!1}},{textureType:"texture2D",update:function(e){var o=e.gl;o.bindTexture(o.TEXTURE_2D,this._cache.get("webgl_texture")),this.updateCommon(e);var u=this.format,c=this.type,v=!!(this.convertToPOT&&!this.mipmaps.length&&this.image&&(this.wrapS===Mr.REPEAT||this.wrapT===Mr.REPEAT)&&this.NPOT);o.texParameteri(o.TEXTURE_2D,o.TEXTURE_WRAP_S,v?this.wrapS:this.getAvailableWrapS()),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_WRAP_T,v?this.wrapT:this.getAvailableWrapT()),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MAG_FILTER,v?this.magFilter:this.getAvailableMagFilter()),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MIN_FILTER,v?this.minFilter:this.getAvailableMinFilter());var g=e.getGLExtension("EXT_texture_filter_anisotropic");if(g&&this.anisotropic>1&&o.texParameterf(o.TEXTURE_2D,g.TEXTURE_MAX_ANISOTROPY_EXT,this.anisotropic),c===36193){var x=e.getGLExtension("OES_texture_half_float");x||(c=$.FLOAT)}if(this.mipmaps.length)for(var _=this.width,M=this.height,I=0;I<this.mipmaps.length;I++){var F=this.mipmaps[I];this._updateTextureData(o,F,I,_,M,u,c,!1),_/=2,M/=2}else this._updateTextureData(o,this,0,this.width,this.height,u,c,v),this.useMipmap&&(!this.NPOT||v)&&o.generateMipmap(o.TEXTURE_2D);o.bindTexture(o.TEXTURE_2D,null)},_updateTextureData:function(e,o,u,c,v,g,x,_){if(o.image){var M=o.image;_&&(this._potCanvas=pf(this,this._potCanvas),M=this._potCanvas),e.texImage2D(e.TEXTURE_2D,u,g,g,x,M)}else g<=Mr.COMPRESSED_RGBA_S3TC_DXT5_EXT&&g>=Mr.COMPRESSED_RGB_S3TC_DXT1_EXT?e.compressedTexImage2D(e.TEXTURE_2D,u,g,c,v,0,o.pixels):e.texImage2D(e.TEXTURE_2D,u,g,c,v,0,g,x,o.pixels)},generateMipmap:function(e){var o=e.gl;this.useMipmap&&!this.NPOT&&(o.bindTexture(o.TEXTURE_2D,this._cache.get("webgl_texture")),o.generateMipmap(o.TEXTURE_2D))},isPowerOfTwo:function(){return ca(this.width)&&ca(this.height)},isRenderable:function(){return this.image?this.image.width>0&&this.image.height>0:!!(this.width&&this.height)},bind:function(e){e.gl.bindTexture(e.gl.TEXTURE_2D,this.getWebGLTexture(e))},unbind:function(e){e.gl.bindTexture(e.gl.TEXTURE_2D,null)},load:function(e,o){var u=D.a.createImage();o&&(u.crossOrigin=o);var c=this;return u.onload=function(){c.dirty(),c.trigger("success",c)},u.onerror=function(){c.trigger("error",c)},u.src=e,this.image=u,this}});Object.defineProperty(Lo.prototype,"width",{get:function(){return this.image?this.image.width:this._width},set:function(e){this.image?console.warn("Texture from image can't set width"):(this._width!==e&&this.dirty(),this._width=e)}}),Object.defineProperty(Lo.prototype,"height",{get:function(){return this.image?this.image.height:this._height},set:function(e){this.image?console.warn("Texture from image can't set height"):(this._height!==e&&this.dirty(),this._height=e)}});var Gr=Lo;function hs(n){return{byte:D.a.Int8Array,ubyte:D.a.Uint8Array,short:D.a.Int16Array,ushort:D.a.Uint16Array}[n]||D.a.Float32Array}function La(n){return"attr_"+n}function Pa(n,e,o,u){switch(this.name=n,this.type=e,this.size=o,this.semantic=u||"",this.value=null,o){case 1:this.get=function(c){return this.value[c]},this.set=function(c,v){this.value[c]=v},this.copy=function(c,v){this.value[c]=this.value[c]};break;case 2:this.get=function(c,v){var g=this.value;return v[0]=g[c*2],v[1]=g[c*2+1],v},this.set=function(c,v){var g=this.value;g[c*2]=v[0],g[c*2+1]=v[1]},this.copy=function(c,v){var g=this.value;v*=2,c*=2,g[c]=g[v],g[c+1]=g[v+1]};break;case 3:this.get=function(c,v){var g=c*3,x=this.value;return v[0]=x[g],v[1]=x[g+1],v[2]=x[g+2],v},this.set=function(c,v){var g=c*3,x=this.value;x[g]=v[0],x[g+1]=v[1],x[g+2]=v[2]},this.copy=function(c,v){var g=this.value;v*=3,c*=3,g[c]=g[v],g[c+1]=g[v+1],g[c+2]=g[v+2]};break;case 4:this.get=function(c,v){var g=this.value,x=c*4;return v[0]=g[x],v[1]=g[x+1],v[2]=g[x+2],v[3]=g[x+3],v},this.set=function(c,v){var g=this.value,x=c*4;g[x]=v[0],g[x+1]=v[1],g[x+2]=v[2],g[x+3]=v[3]},this.copy=function(c,v){var g=this.value;v*=4,c*=4,g[c]=g[v],g[c+1]=g[v+1],g[c+2]=g[v+2],g[c+3]=g[v+3]}}}Pa.prototype.init=function(n){if(!this.value||this.value.length!==n*this.size){var e=hs(this.type);this.value=new e(n*this.size)}},Pa.prototype.fromArray=function(n){var e=hs(this.type),o;if(n[0]&&n[0].length){var u=0,c=this.size;o=new e(n.length*c);for(var v=0;v<n.length;v++)for(var g=0;g<c;g++)o[u++]=n[v][g]}else o=new e(n);this.value=o},Pa.prototype.clone=function(n){var e=new Pa(this.name,this.type,this.size,this.semantic);return n&&console.warn("todo"),e};function iu(n,e,o,u,c){this.name=n,this.type=e,this.buffer=o,this.size=u,this.semantic=c,this.symbol="",this.needsRemove=!1}function to(n){this.buffer=n,this.count=0}var Ki=W.extend(function(){return{attributes:{},indices:null,dynamic:!0,_enabledAttributes:null,__used:0}},function(){this._cache=new Ea,this._attributeList=Object.keys(this.attributes),this.__vaoCache={}},{mainAttribute:"",pick:null,pickByRay:null,dirty:function(){for(var e=this.getEnabledAttributes(),o=0;o<e.length;o++)this.dirtyAttribute(e[o]);this.dirtyIndices(),this._enabledAttributes=null,this._cache.dirty("any")},dirtyIndices:function(){this._cache.dirtyAll("indices")},dirtyAttribute:function(e){this._cache.dirtyAll(La(e)),this._cache.dirtyAll("attributes")},getTriangleIndices:function(e,o){if(e<this.triangleCount&&e>=0){o||(o=[]);var u=this.indices;return o[0]=u[e*3],o[1]=u[e*3+1],o[2]=u[e*3+2],o}},setTriangleIndices:function(e,o){var u=this.indices;u[e*3]=o[0],u[e*3+1]=o[1],u[e*3+2]=o[2]},isUseIndices:function(){return!!this.indices},initIndicesFromArray:function(e){var o,u=this.vertexCount>65535?D.a.Uint32Array:D.a.Uint16Array;if(e[0]&&e[0].length){var c=0,v=3;o=new u(e.length*v);for(var g=0;g<e.length;g++)for(var x=0;x<v;x++)o[c++]=e[g][x]}else o=new u(e);this.indices=o},createAttribute:function(e,o,u,c){var v=new Pa(e,o,u,c);return this.attributes[e]&&this.removeAttribute(e),this.attributes[e]=v,this._attributeList.push(e),v},removeAttribute:function(e){var o=this._attributeList,u=o.indexOf(e);return u>=0?(o.splice(u,1),delete this.attributes[e],!0):!1},getAttribute:function(e){return this.attributes[e]},getEnabledAttributes:function(){var e=this._enabledAttributes,o=this._attributeList;if(e)return e;for(var u=[],c=this.vertexCount,v=0;v<o.length;v++){var g=o[v],x=this.attributes[g];x.value&&x.value.length===c*x.size&&u.push(g)}return this._enabledAttributes=u,u},getBufferChunks:function(e){var o=this._cache;o.use(e.__uid__);var u=o.isDirty("attributes"),c=o.isDirty("indices");if(u||c){this._updateBuffer(e.gl,u,c);for(var v=this.getEnabledAttributes(),g=0;g<v.length;g++)o.fresh(La(v[g]));o.fresh("attributes"),o.fresh("indices")}return o.fresh("any"),o.get("chunks")},_updateBuffer:function(e,o,u){var c=this._cache,v=c.get("chunks"),g=!1;v||(v=[],v[0]={attributeBuffers:[],indicesBuffer:null},c.put("chunks",v),g=!0);var x=v[0],_=x.attributeBuffers,M=x.indicesBuffer;if(o||g){var I=this.getEnabledAttributes(),F={};if(!g)for(var ut=0;ut<_.length;ut++)F[_[ut].name]=_[ut];for(var yt=0;yt<I.length;yt++){var Dt=I[yt],Et=this.attributes[Dt],Pt;g||(Pt=F[Dt]);var Ht;Pt?Ht=Pt.buffer:Ht=e.createBuffer(),c.isDirty(La(Dt))&&(e.bindBuffer(e.ARRAY_BUFFER,Ht),e.bufferData(e.ARRAY_BUFFER,Et.value,this.dynamic?e.DYNAMIC_DRAW:e.STATIC_DRAW)),_[yt]=new iu(Dt,Et.type,Ht,Et.size,Et.semantic)}for(var ut=yt;ut<_.length;ut++)e.deleteBuffer(_[ut].buffer);_.length=yt}this.isUseIndices()&&(u||g)&&(M||(M=new to(e.createBuffer()),x.indicesBuffer=M),M.count=this.indices.length,e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,M.buffer),e.bufferData(e.ELEMENT_ARRAY_BUFFER,this.indices,this.dynamic?e.DYNAMIC_DRAW:e.STATIC_DRAW))},dispose:function(e){var o=this._cache;o.use(e.__uid__);var u=o.get("chunks");if(u)for(var c=0;c<u.length;c++){for(var v=u[c],g=0;g<v.attributeBuffers.length;g++){var x=v.attributeBuffers[g];e.gl.deleteBuffer(x.buffer)}v.indicesBuffer&&e.gl.deleteBuffer(v.indicesBuffer.buffer)}if(this.__vaoCache){var _=e.getGLExtension("OES_vertex_array_object");for(var M in this.__vaoCache){var I=this.__vaoCache[M].vao;I&&_.deleteVertexArrayOES(I)}}this.__vaoCache={},o.deleteContext(e.__uid__)}});Object.defineProperty&&(Object.defineProperty(Ki.prototype,"vertexCount",{enumerable:!1,get:function(){var e=this.attributes[this.mainAttribute];return e||(e=this.attributes[this._attributeList[0]]),!e||!e.value?0:e.value.length/e.size}}),Object.defineProperty(Ki.prototype,"triangleCount",{enumerable:!1,get:function(){var e=this.indices;return e?e.length/3:0}})),Ki.STATIC_DRAW=$.STATIC_DRAW,Ki.DYNAMIC_DRAW=$.DYNAMIC_DRAW,Ki.STREAM_DRAW=$.STREAM_DRAW,Ki.AttributeBuffer=iu,Ki.IndicesBuffer=to,Ki.Attribute=Pa;var wa=Ki,ii=Te.create,ki=Te.add,Ia=Te.set,Fn=wa.Attribute,_i=wa.extend(function(){return{attributes:{position:new Fn("position","float",3,"POSITION"),texcoord0:new Fn("texcoord0","float",2,"TEXCOORD_0"),texcoord1:new Fn("texcoord1","float",2,"TEXCOORD_1"),normal:new Fn("normal","float",3,"NORMAL"),tangent:new Fn("tangent","float",4,"TANGENT"),color:new Fn("color","float",4,"COLOR"),weight:new Fn("weight","float",3,"WEIGHT"),joint:new Fn("joint","float",4,"JOINT"),barycentric:new Fn("barycentric","float",3,null)},boundingBox:null}},{mainAttribute:"position",updateBoundingBox:function(){var e=this.boundingBox;e||(e=this.boundingBox=new di);var o=this.attributes.position.value;if(o&&o.length){var u=e.min,c=e.max,v=u.array,g=c.array;Te.set(v,o[0],o[1],o[2]),Te.set(g,o[0],o[1],o[2]);for(var x=3;x<o.length;){var _=o[x++],M=o[x++],I=o[x++];_<v[0]&&(v[0]=_),M<v[1]&&(v[1]=M),I<v[2]&&(v[2]=I),_>g[0]&&(g[0]=_),M>g[1]&&(g[1]=M),I>g[2]&&(g[2]=I)}u._dirty=!0,c._dirty=!0}},generateVertexNormals:function(){if(!!this.vertexCount){var e=this.indices,o=this.attributes,u=o.position.value,c=o.normal.value;if(!c||c.length!==u.length)c=o.normal.value=new D.a.Float32Array(u.length);else for(var v=0;v<c.length;v++)c[v]=0;for(var g=ii(),x=ii(),_=ii(),M=ii(),I=ii(),F=ii(),ut=e?e.length:this.vertexCount,yt,Dt,Et,Pt=0;Pt<ut;){e?(yt=e[Pt++],Dt=e[Pt++],Et=e[Pt++]):(yt=Pt++,Dt=Pt++,Et=Pt++),Ia(g,u[yt*3],u[yt*3+1],u[yt*3+2]),Ia(x,u[Dt*3],u[Dt*3+1],u[Dt*3+2]),Ia(_,u[Et*3],u[Et*3+1],u[Et*3+2]),Te.sub(M,g,x),Te.sub(I,x,_),Te.cross(F,M,I);for(var v=0;v<3;v++)c[yt*3+v]=c[yt*3+v]+F[v],c[Dt*3+v]=c[Dt*3+v]+F[v],c[Et*3+v]=c[Et*3+v]+F[v]}for(var v=0;v<c.length;)Ia(F,c[v],c[v+1],c[v+2]),Te.normalize(F,F),c[v++]=F[0],c[v++]=F[1],c[v++]=F[2];this.dirty()}},generateFaceNormals:function(){if(!!this.vertexCount){this.isUniqueVertex()||this.generateUniqueVertex();var e=this.indices,o=this.attributes,u=o.position.value,c=o.normal.value,v=ii(),g=ii(),x=ii(),_=ii(),M=ii(),I=ii();c||(c=o.normal.value=new Float32Array(u.length));for(var F=e?e.length:this.vertexCount,ut,yt,Dt,Et=0;Et<F;){e?(ut=e[Et++],yt=e[Et++],Dt=e[Et++]):(ut=Et++,yt=Et++,Dt=Et++),Ia(v,u[ut*3],u[ut*3+1],u[ut*3+2]),Ia(g,u[yt*3],u[yt*3+1],u[yt*3+2]),Ia(x,u[Dt*3],u[Dt*3+1],u[Dt*3+2]),Te.sub(_,v,g),Te.sub(M,g,x),Te.cross(I,_,M),Te.normalize(I,I);for(var Pt=0;Pt<3;Pt++)c[ut*3+Pt]=I[Pt],c[yt*3+Pt]=I[Pt],c[Dt*3+Pt]=I[Pt]}this.dirty()}},generateTangents:function(){if(!!this.vertexCount){var e=this.vertexCount,o=this.attributes;o.tangent.value||(o.tangent.value=new Float32Array(e*4));var u=o.texcoord0.value,c=o.position.value,v=o.tangent.value,g=o.normal.value;if(!u){console.warn("Geometry without texcoords can't generate tangents.");return}for(var x=[],_=[],M=0;M<e;M++)x[M]=[0,0,0],_[M]=[0,0,0];for(var I=[0,0,0],F=[0,0,0],ut=this.indices,yt=ut?ut.length:this.vertexCount,Dt,Et,Pt,M=0;M<yt;){ut?(Dt=ut[M++],Et=ut[M++],Pt=ut[M++]):(Dt=M++,Et=M++,Pt=M++);var Ht=u[Dt*2],$t=u[Et*2],qt=u[Pt*2],le=u[Dt*2+1],ie=u[Et*2+1],he=u[Pt*2+1],Re=c[Dt*3],ze=c[Et*3],Pe=c[Pt*3],Ke=c[Dt*3+1],rr=c[Et*3+1],Ue=c[Pt*3+1],hr=c[Dt*3+2],ke=c[Et*3+2],Lr=c[Pt*3+2],yr=ze-Re,xr=Pe-Re,Sr=rr-Ke,mr=Ue-Ke,on=ke-hr,Or=Lr-hr,Sn=$t-Ht,rn=qt-Ht,mn=ie-le,En=he-le,tn=1/(Sn*En-mn*rn);I[0]=(En*yr-mn*xr)*tn,I[1]=(En*Sr-mn*mr)*tn,I[2]=(En*on-mn*Or)*tn,F[0]=(Sn*xr-rn*yr)*tn,F[1]=(Sn*mr-rn*Sr)*tn,F[2]=(Sn*Or-rn*on)*tn,ki(x[Dt],x[Dt],I),ki(x[Et],x[Et],I),ki(x[Pt],x[Pt],I),ki(_[Dt],_[Dt],F),ki(_[Et],_[Et],F),ki(_[Pt],_[Pt],F)}for(var li=ii(),Ln=ii(),jn=ii(),M=0;M<e;M++){jn[0]=g[M*3],jn[1]=g[M*3+1],jn[2]=g[M*3+2];var ui=x[M];Te.scale(li,jn,Te.dot(jn,ui)),Te.sub(li,ui,li),Te.normalize(li,li),Te.cross(Ln,jn,ui),v[M*4]=li[0],v[M*4+1]=li[1],v[M*4+2]=li[2],v[M*4+3]=Te.dot(Ln,_[M])<0?-1:1}this.dirty()}},isUniqueVertex:function(){return this.isUseIndices()?this.vertexCount===this.indices.length:!0},generateUniqueVertex:function(){if(!(!this.vertexCount||!this.indices)){this.indices.length>65535&&(this.indices=new D.a.Uint32Array(this.indices));for(var e=this.attributes,o=this.indices,u=this.getEnabledAttributes(),c={},v=0;v<u.length;v++){var g=u[v];c[g]=e[g].value,e[g].init(this.indices.length)}for(var x=0,_=0;_<o.length;_++){for(var M=o[_],v=0;v<u.length;v++)for(var g=u[v],I=e[g].value,F=e[g].size,ut=0;ut<F;ut++)I[x*F+ut]=c[g][M*F+ut];o[_]=x,x++}this.dirty()}},generateBarycentric:function(){if(!!this.vertexCount){this.isUniqueVertex()||this.generateUniqueVertex();var e=this.attributes,o=e.barycentric.value,u=this.indices;if(!(o&&o.length===u.length*3)){o=e.barycentric.value=new Float32Array(u.length*3);for(var c=0;c<(u?u.length:this.vertexCount/3);)for(var v=0;v<3;v++){var g=u?u[c++]:c*3+v;o[g*3+v]=1}this.dirty()}}},applyTransform:function(e){var o=this.attributes,u=o.position.value,c=o.normal.value,v=o.tangent.value;e=e.array;var g=ir.create();ir.invert(g,e),ir.transpose(g,g);var x=Te.transformMat4,_=Te.forEach;_(u,3,0,null,x,e),c&&_(c,3,0,null,x,g),v&&_(v,4,0,null,x,g),this.boundingBox&&this.updateBoundingBox()},dispose:function(e){var o=this._cache;o.use(e.__uid__);var u=o.get("chunks");if(u)for(var c=0;c<u.length;c++){for(var v=u[c],g=0;g<v.attributeBuffers.length;g++){var x=v.attributeBuffers[g];e.gl.deleteBuffer(x.buffer)}v.indicesBuffer&&e.gl.deleteBuffer(v.indicesBuffer.buffer)}if(this.__vaoCache){var _=e.getGLExtension("OES_vertex_array_object");for(var M in this.__vaoCache){var I=this.__vaoCache[M].vao;I&&_.deleteVertexArrayOES(I)}}this.__vaoCache={},o.deleteContext(e.__uid__)}});_i.STATIC_DRAW=wa.STATIC_DRAW,_i.DYNAMIC_DRAW=wa.DYNAMIC_DRAW,_i.STREAM_DRAW=wa.STREAM_DRAW,_i.AttributeBuffer=wa.AttributeBuffer,_i.IndicesBuffer=wa.IndicesBuffer,_i.Attribute=Fn;var $r=_i,ol=`vec3 calcAmbientSHLight(int idx, vec3 N) {
 int offset = 9 * idx;
 return ambientSHLightCoefficients[0]
 + ambientSHLightCoefficients[1] * N.x
 + ambientSHLightCoefficients[2] * N.y
 + ambientSHLightCoefficients[3] * N.z
 + ambientSHLightCoefficients[4] * N.x * N.z
 + ambientSHLightCoefficients[5] * N.z * N.y
 + ambientSHLightCoefficients[6] * N.y * N.x
 + ambientSHLightCoefficients[7] * (3.0 * N.z * N.z - 1.0)
 + ambientSHLightCoefficients[8] * (N.x * N.x - N.y * N.y);
}`,Ti="uniform vec3 ",Ra="uniform float ",eo="@export clay.header.",ro="@end",Xn=":unconfigurable;",sl=[eo+"directional_light",Ti+"directionalLightDirection[DIRECTIONAL_LIGHT_COUNT]"+Xn,Ti+"directionalLightColor[DIRECTIONAL_LIGHT_COUNT]"+Xn,ro,eo+"ambient_light",Ti+"ambientLightColor[AMBIENT_LIGHT_COUNT]"+Xn,ro,eo+"ambient_sh_light",Ti+"ambientSHLightColor[AMBIENT_SH_LIGHT_COUNT]"+Xn,Ti+"ambientSHLightCoefficients[AMBIENT_SH_LIGHT_COUNT * 9]"+Xn,ol,ro,eo+"ambient_cubemap_light",Ti+"ambientCubemapLightColor[AMBIENT_CUBEMAP_LIGHT_COUNT]"+Xn,"uniform samplerCube ambientCubemapLightCubemap[AMBIENT_CUBEMAP_LIGHT_COUNT]"+Xn,"uniform sampler2D ambientCubemapLightBRDFLookup[AMBIENT_CUBEMAP_LIGHT_COUNT]"+Xn,ro,eo+"point_light",Ti+"pointLightPosition[POINT_LIGHT_COUNT]"+Xn,Ra+"pointLightRange[POINT_LIGHT_COUNT]"+Xn,Ti+"pointLightColor[POINT_LIGHT_COUNT]"+Xn,ro,eo+"spot_light",Ti+"spotLightPosition[SPOT_LIGHT_COUNT]"+Xn,Ti+"spotLightDirection[SPOT_LIGHT_COUNT]"+Xn,Ra+"spotLightRange[SPOT_LIGHT_COUNT]"+Xn,Ra+"spotLightUmbraAngleCosine[SPOT_LIGHT_COUNT]"+Xn,Ra+"spotLightPenumbraAngleCosine[SPOT_LIGHT_COUNT]"+Xn,Ra+"spotLightFalloffFactor[SPOT_LIGHT_COUNT]"+Xn,Ti+"spotLightColor[SPOT_LIGHT_COUNT]"+Xn,ro].join(`
`);cr.import(sl);var au=Mi.extend(function(){return{color:[1,1,1],intensity:1,castShadow:!0,shadowResolution:512,group:0}},{type:"",clone:function(){var e=Mi.prototype.clone.call(this);return e.color=Array.prototype.slice.call(this.color),e.intensity=this.intensity,e.castShadow=this.castShadow,e.shadowResolution=this.shadowResolution,e}}),zi=au,Po=function(e,o){this.normal=e||new or(0,1,0),this.distance=o||0};Po.prototype={constructor:Po,distanceToPoint:function(e){return Te.dot(e.array,this.normal.array)-this.distance},projectPoint:function(e,o){o||(o=new or);var u=this.distanceToPoint(e);return Te.scaleAndAdd(o.array,e.array,this.normal.array,-u),o._dirty=!0,o},normalize:function(){var e=1/Te.len(this.normal.array);Te.scale(this.normal.array,e),this.distance*=e},intersectFrustum:function(e){for(var o=e.vertices,u=this.normal.array,c=Te.dot(o[0].array,u)>this.distance,v=1;v<8;v++)if(Te.dot(o[v].array,u)>this.distance!=c)return!0},intersectLine:function(){var n=Te.create();return function(e,o,u){var c=this.distanceToPoint(e),v=this.distanceToPoint(o);if(c>0&&v>0||c<0&&v<0)return null;var g=this.normal.array,x=this.distance,_=e.array;Te.sub(n,o.array,e.array),Te.normalize(n,n);var M=Te.dot(g,n);if(M===0)return null;u||(u=new or);var I=(Te.dot(g,_)-x)/M;return Te.scaleAndAdd(u.array,_,n,-I),u._dirty=!0,u}}(),applyTransform:function(){var n=ir.create(),e=dr.create(),o=dr.create();return o[3]=1,function(u){u=u.array,Te.scale(o,this.normal.array,this.distance),dr.transformMat4(o,o,u),this.distance=Te.dot(o,this.normal.array),ir.invert(n,u),ir.transpose(n,n),e[3]=0,Te.copy(e,this.normal.array),dr.transformMat4(e,e,n),Te.copy(this.normal.array,e)}}(),copy:function(e){Te.copy(this.normal.array,e.normal.array),this.normal._dirty=!0,this.distance=e.distance},clone:function(){var e=new Po;return e.copy(this),e}};var ha=Po,Tr=Te.set,va=Te.copy,Qi=Te.transformMat4,wo=Math.min,Io=Math.max,da=function(){this.planes=[];for(var e=0;e<6;e++)this.planes.push(new ha);this.boundingBox=new di,this.vertices=[];for(var e=0;e<8;e++)this.vertices[e]=Te.fromValues(0,0,0)};da.prototype={setFromProjection:function(e){var o=this.planes,u=e.array,c=u[0],v=u[1],g=u[2],x=u[3],_=u[4],M=u[5],I=u[6],F=u[7],ut=u[8],yt=u[9],Dt=u[10],Et=u[11],Pt=u[12],Ht=u[13],$t=u[14],qt=u[15];Tr(o[0].normal.array,x-c,F-_,Et-ut),o[0].distance=-(qt-Pt),o[0].normalize(),Tr(o[1].normal.array,x+c,F+_,Et+ut),o[1].distance=-(qt+Pt),o[1].normalize(),Tr(o[2].normal.array,x+v,F+M,Et+yt),o[2].distance=-(qt+Ht),o[2].normalize(),Tr(o[3].normal.array,x-v,F-M,Et-yt),o[3].distance=-(qt-Ht),o[3].normalize(),Tr(o[4].normal.array,x-g,F-I,Et-Dt),o[4].distance=-(qt-$t),o[4].normalize(),Tr(o[5].normal.array,x+g,F+I,Et+Dt),o[5].distance=-(qt+$t),o[5].normalize();var le=this.boundingBox,ie=this.vertices;if(qt===0){var he=M/c,Re=-$t/(Dt-1),ze=-$t/(Dt+1),Pe=-ze/M,Ke=-Re/M;le.min.set(-Pe*he,-Pe,ze),le.max.set(Pe*he,Pe,Re),Tr(ie[0],-Pe*he,-Pe,ze),Tr(ie[1],-Pe*he,Pe,ze),Tr(ie[2],Pe*he,-Pe,ze),Tr(ie[3],Pe*he,Pe,ze),Tr(ie[4],-Ke*he,-Ke,Re),Tr(ie[5],-Ke*he,Ke,Re),Tr(ie[6],Ke*he,-Ke,Re),Tr(ie[7],Ke*he,Ke,Re)}else{var rr=(-1-Pt)/c,Ue=(1-Pt)/c,hr=(1-Ht)/M,ke=(-1-Ht)/M,Lr=(-1-$t)/Dt,yr=(1-$t)/Dt;le.min.set(Math.min(rr,Ue),Math.min(ke,hr),Math.min(yr,Lr)),le.max.set(Math.max(Ue,rr),Math.max(hr,ke),Math.max(Lr,yr));var xr=le.min.array,Sr=le.max.array;Tr(ie[0],xr[0],xr[1],xr[2]),Tr(ie[1],xr[0],Sr[1],xr[2]),Tr(ie[2],Sr[0],xr[1],xr[2]),Tr(ie[3],Sr[0],Sr[1],xr[2]),Tr(ie[4],xr[0],xr[1],Sr[2]),Tr(ie[5],xr[0],Sr[1],Sr[2]),Tr(ie[6],Sr[0],xr[1],Sr[2]),Tr(ie[7],Sr[0],Sr[1],Sr[2])}},getTransformedBoundingBox:function(){var n=Te.create();return function(e,o){var u=this.vertices,c=o.array,v=e.min,g=e.max,x=v.array,_=g.array,M=u[0];Qi(n,M,c),va(x,n),va(_,n);for(var I=1;I<8;I++)M=u[I],Qi(n,M,c),x[0]=wo(n[0],x[0]),x[1]=wo(n[1],x[1]),x[2]=wo(n[2],x[2]),_[0]=Io(n[0],_[0]),_[1]=Io(n[1],_[1]),_[2]=Io(n[2],_[2]);return v._dirty=!0,g._dirty=!0,e}}()};var pi=da,pa=Mi.extend(function(){return{projectionMatrix:new gr,invProjectionMatrix:new gr,viewMatrix:new gr,frustum:new pi}},function(){this.update(!0)},{update:function(e){Mi.prototype.update.call(this,e),gr.invert(this.viewMatrix,this.worldTransform),this.updateProjectionMatrix(),gr.invert(this.invProjectionMatrix,this.projectionMatrix),this.frustum.setFromProjection(this.projectionMatrix)},setViewMatrix:function(e){gr.copy(this.viewMatrix,e),gr.invert(this.worldTransform,e),this.decomposeWorldTransform()},decomposeProjectionMatrix:function(){},setProjectionMatrix:function(e){gr.copy(this.projectionMatrix,e),gr.invert(this.invProjectionMatrix,e),this.decomposeProjectionMatrix()},updateProjectionMatrix:function(){},castRay:function(){var n=dr.create();return function(e,o){var u=o!==void 0?o:new vi,c=e.array[0],v=e.array[1];return dr.set(n,c,v,-1,1),dr.transformMat4(n,n,this.invProjectionMatrix.array),dr.transformMat4(n,n,this.worldTransform.array),Te.scale(u.origin.array,n,1/n[3]),dr.set(n,c,v,1,1),dr.transformMat4(n,n,this.invProjectionMatrix.array),dr.transformMat4(n,n,this.worldTransform.array),Te.scale(n,n,1/n[3]),Te.sub(u.direction.array,n,u.origin.array),Te.normalize(u.direction.array,u.direction.array),u.direction._dirty=!0,u.origin._dirty=!0,u}}()}),Fi=pa,ou=ir.create(),no=ir.create(),io={};function su(n){var e=[],o=Object.keys(n);o.sort();for(var u=0;u<o.length;u++){var c=o[u];e.push(c+" "+n[c])}var v=e.join(`
`);if(io[v])return io[v];var g=bt.genGUID();return io[v]=g,g}function ga(){this.opaque=[],this.transparent=[],this._opaqueCount=0,this._transparentCount=0}ga.prototype.startCount=function(){this._opaqueCount=0,this._transparentCount=0},ga.prototype.add=function(n,e){e?this.transparent[this._transparentCount++]=n:this.opaque[this._opaqueCount++]=n},ga.prototype.endCount=function(){this.transparent.length=this._transparentCount,this.opaque.length=this._opaqueCount};var Ro=Mi.extend(function(){return{material:null,lights:[],viewBoundingBoxLastFrame:new di,shadowUniforms:{},_cameraList:[],_lightUniforms:{},_previousLightNumber:{},_lightNumber:{},_lightProgramKeys:{},_nodeRepository:{},_renderLists:new L(20)}},function(){this._scene=this},{addToScene:function(e){e instanceof Fi?(this._cameraList.length>0&&console.warn("Found multiple camera in one scene. Use the fist one."),this._cameraList.push(e)):e instanceof zi&&this.lights.push(e),e.name&&(this._nodeRepository[e.name]=e)},removeFromScene:function(e){var o;e instanceof Fi?(o=this._cameraList.indexOf(e),o>=0&&this._cameraList.splice(o,1)):e instanceof zi&&(o=this.lights.indexOf(e),o>=0&&this.lights.splice(o,1)),e.name&&delete this._nodeRepository[e.name]},getNode:function(e){return this._nodeRepository[e]},setMainCamera:function(e){var o=this._cameraList.indexOf(e);o>=0&&this._cameraList.splice(o,1),this._cameraList.unshift(e)},getMainCamera:function(){return this._cameraList[0]},getLights:function(){return this.lights},updateLights:function(){var e=this.lights;this._previousLightNumber=this._lightNumber;for(var o={},u=0;u<e.length;u++){var c=e[u];if(!c.invisible){var v=c.group;o[v]||(o[v]={}),o[v][c.type]=o[v][c.type]||0,o[v][c.type]++}}this._lightNumber=o;for(var g in o)this._lightProgramKeys[g]=su(o[g]);this._updateLightUniforms()},cloneNode:function(e){var o=e.clone(),u={};function c(v,g){u[v.__uid__]=g;for(var x=0;x<v._children.length;x++){var _=v._children[x],M=g._children[x];c(_,M)}}return c(e,o),o.traverse(function(v){v.skeleton&&(v.skeleton=v.skeleton.clone(u)),v.material&&(v.material=v.material.clone())}),o},updateRenderList:function(e,o){var u=e.__uid__,c=this._renderLists.get(u);c||(c=new ga,this._renderLists.put(u,c)),c.startCount(),o&&(this.viewBoundingBoxLastFrame.min.set(Infinity,Infinity,Infinity),this.viewBoundingBoxLastFrame.max.set(-Infinity,-Infinity,-Infinity));var v=this.material&&this.material.transparent||!1;return this._doUpdateRenderList(this,e,v,c,o),c.endCount(),c},getRenderList:function(e){return this._renderLists.get(e.__uid__)},_doUpdateRenderList:function(e,o,u,c,v){if(!e.invisible)for(var g=0;g<e._children.length;g++){var x=e._children[g];if(x.isRenderable()){var _=x.isSkinnedMesh()?ou:x.worldTransform.array,M=x.geometry;ir.multiplyAffine(no,o.viewMatrix.array,_),(v&&!M.boundingBox||!this.isFrustumCulled(x,o,no))&&c.add(x,x.material.transparent||u)}x._children.length>0&&this._doUpdateRenderList(x,o,u,c,v)}},isFrustumCulled:function(){var n=new di,e=new gr;return function(o,u,c){var v=o.boundingBox;if(v||(o.skeleton&&o.skeleton.boundingBox?v=o.skeleton.boundingBox:v=o.geometry.boundingBox),!v)return!1;if(e.array=c,n.transformFrom(v,e),o.castShadow&&this.viewBoundingBoxLastFrame.union(n),o.frustumCulling){if(!n.intersectBoundingBox(u.frustum.boundingBox))return!0;e.array=u.projectionMatrix.array,n.max.array[2]>0&&n.min.array[2]<0&&(n.max.array[2]=-1e-20),n.applyProjection(e);var g=n.min.array,x=n.max.array;if(x[0]<-1||g[0]>1||x[1]<-1||g[1]>1||x[2]<-1||g[2]>1)return!0}return!1}}(),_updateLightUniforms:function(){var e=this.lights;e.sort(Na);var o=this._lightUniforms;for(var u in o)for(var c in o[u])o[u][c].value.length=0;for(var v=0;v<e.length;v++){var g=e[v];if(!g.invisible){var u=g.group;for(var c in g.uniformTemplates){var x=g.uniformTemplates[c],_=x.value(g);if(_!=null){o[u]||(o[u]={}),o[u][c]||(o[u][c]={type:"",value:[]});var M=o[u][c];switch(M.type=x.type+"v",x.type){case"1i":case"1f":case"t":M.value.push(_);break;case"2f":case"3f":case"4f":for(var I=0;I<_.length;I++)M.value.push(_[I]);break;default:console.error("Unkown light uniform type "+x.type)}}}}}},getLightGroups:function(){var e=[];for(var o in this._lightNumber)e.push(o);return e},getNumberChangedLightGroups:function(){var e=[];for(var o in this._lightNumber)this.isLightNumberChanged(o)&&e.push(o);return e},isLightNumberChanged:function(e){var o=this._previousLightNumber,u=this._lightNumber;for(var c in u[e])if(!o[e]||u[e][c]!==o[e][c])return!0;for(var c in o[e])if(!u[e]||u[e][c]!==o[e][c])return!0;return!1},getLightsNumbers:function(e){return this._lightNumber[e]},getProgramKey:function(e){return this._lightProgramKeys[e]},setLightUniforms:function(){function n(e,o,u){for(var c in e){var v=e[c];if(v.type==="tv"){if(!o.hasUniform(c))continue;for(var g=[],x=0;x<v.value.length;x++){var _=v.value[x],M=o.takeCurrentTextureSlot(u,_);g.push(M)}o.setUniform(u.gl,"1iv",c,g)}else o.setUniform(u.gl,v.type,c,v.value)}}return function(e,o,u){n(this._lightUniforms[o],e,u),n(this.shadowUniforms,e,u)}}(),dispose:function(){this.material=null,this._opaqueList=[],this._transparentList=[],this.lights=[],this._lightUniforms={},this._lightNumber={},this._nodeRepository={}}});function Na(n,e){if(e.castShadow&&!n.castShadow)return!0}var ra=Ro,lu=S("1RvN"),gi=ru.isPowerOfTwo,No=["px","nx","py","ny","pz","nz"],Zn=Mr.extend(function(){return{image:{px:null,nx:null,py:null,ny:null,pz:null,nz:null},pixels:{px:null,nx:null,py:null,ny:null,pz:null,nz:null},mipmaps:[]}},{textureType:"textureCube",update:function(e){var o=e.gl;o.bindTexture(o.TEXTURE_CUBE_MAP,this._cache.get("webgl_texture")),this.updateCommon(e);var u=this.format,c=this.type;o.texParameteri(o.TEXTURE_CUBE_MAP,o.TEXTURE_WRAP_S,this.getAvailableWrapS()),o.texParameteri(o.TEXTURE_CUBE_MAP,o.TEXTURE_WRAP_T,this.getAvailableWrapT()),o.texParameteri(o.TEXTURE_CUBE_MAP,o.TEXTURE_MAG_FILTER,this.getAvailableMagFilter()),o.texParameteri(o.TEXTURE_CUBE_MAP,o.TEXTURE_MIN_FILTER,this.getAvailableMinFilter());var v=e.getGLExtension("EXT_texture_filter_anisotropic");if(v&&this.anisotropic>1&&o.texParameterf(o.TEXTURE_CUBE_MAP,v.TEXTURE_MAX_ANISOTROPY_EXT,this.anisotropic),c===36193){var g=e.getGLExtension("OES_texture_half_float");g||(c=$.FLOAT)}if(this.mipmaps.length)for(var x=this.width,_=this.height,M=0;M<this.mipmaps.length;M++){var I=this.mipmaps[M];this._updateTextureData(o,I,M,x,_,u,c),x/=2,_/=2}else this._updateTextureData(o,this,0,this.width,this.height,u,c),!this.NPOT&&this.useMipmap&&o.generateMipmap(o.TEXTURE_CUBE_MAP);o.bindTexture(o.TEXTURE_CUBE_MAP,null)},_updateTextureData:function(e,o,u,c,v,g,x){for(var _=0;_<6;_++){var M=No[_],I=o.image&&o.image[M];I?e.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+_,u,g,g,x,I):e.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+_,u,g,c,v,0,g,x,o.pixels&&o.pixels[M])}},generateMipmap:function(e){var o=e.gl;this.useMipmap&&!this.NPOT&&(o.bindTexture(o.TEXTURE_CUBE_MAP,this._cache.get("webgl_texture")),o.generateMipmap(o.TEXTURE_CUBE_MAP))},bind:function(e){e.gl.bindTexture(e.gl.TEXTURE_CUBE_MAP,this.getWebGLTexture(e))},unbind:function(e){e.gl.bindTexture(e.gl.TEXTURE_CUBE_MAP,null)},isPowerOfTwo:function(){return this.image.px?gi(this.image.px.width)&&gi(this.image.px.height):gi(this.width)&&gi(this.height)},isRenderable:function(){return this.image.px?Di(this.image.px)&&Di(this.image.nx)&&Di(this.image.py)&&Di(this.image.ny)&&Di(this.image.pz)&&Di(this.image.nz):!!(this.width&&this.height)},load:function(e,o){var u=0,c=this;return bt.each(e,function(v,g){var x=D.a.createImage();o&&(x.crossOrigin=o),x.onload=function(){u--,u===0&&(c.dirty(),c.trigger("success",c))},x.onerror=function(){u--},u++,x.src=v,c.image[g]=x}),this}});Object.defineProperty(Zn.prototype,"width",{get:function(){return this.image&&this.image.px?this.image.px.width:this._width},set:function(e){this.image&&this.image.px?console.warn("Texture from image can't set width"):(this._width!==e&&this.dirty(),this._width=e)}}),Object.defineProperty(Zn.prototype,"height",{get:function(){return this.image&&this.image.px?this.image.px.height:this._height},set:function(e){this.image&&this.image.px?console.warn("Texture from image can't set height"):(this._height!==e&&this.dirty(),this._height=e)}});function Di(n){return n.width>0&&n.height>0}var ma=Zn,Ci=Fi.extend({fov:50,aspect:1,near:.1,far:2e3},{updateProjectionMatrix:function(){var e=this.fov/180*Math.PI;this.projectionMatrix.perspective(e,this.aspect,this.near,this.far)},decomposeProjectionMatrix:function(){var e=this.projectionMatrix.array,o=Math.atan(1/e[5])*2;this.fov=o/Math.PI*180,this.aspect=e[5]/e[0],this.near=e[14]/(e[10]-1),this.far=e[14]/(e[10]+1)},clone:function(){var e=Fi.prototype.clone.call(this);return e.fov=this.fov,e.aspect=this.aspect,e.near=this.near,e.far=this.far,e}}),xn=Ci,ya="framebuffer",Ui="renderbuffer",vs=Ui+"_width",ds=Ui+"_height",Bo=Ui+"_attached",Ba="depthtexture_attached",na=$.FRAMEBUFFER,ja=$.RENDERBUFFER,Ei=$.DEPTH_ATTACHMENT,jo=$.COLOR_ATTACHMENT0,zo=W.extend({depthBuffer:!0,viewport:null,_width:0,_height:0,_textures:null,_boundRenderer:null},function(){this._cache=new Ea,this._textures={}},{getTextureWidth:function(){return this._width},getTextureHeight:function(){return this._height},bind:function(e){if(e.__currentFrameBuffer){if(e.__currentFrameBuffer===this)return;console.warn("Renderer already bound with another framebuffer. Unbind it first")}e.__currentFrameBuffer=this;var o=e.gl;o.bindFramebuffer(na,this._getFrameBufferGL(e)),this._boundRenderer=e;var u=this._cache;u.put("viewport",e.viewport);var c=!1,v,g;for(var x in this._textures){c=!0;var _=this._textures[x];_&&(v=_.texture.width,g=_.texture.height,this._doAttach(e,_.texture,x,_.target))}this._width=v,this._height=g,!c&&this.depthBuffer&&console.error("Must attach texture before bind, or renderbuffer may have incorrect width and height."),this.viewport?e.setViewport(this.viewport):e.setViewport(0,0,v,g,1);var M=u.get("attached_textures");if(M){for(var x in M)if(!this._textures[x]){var I=M[x];this._doDetach(o,x,I)}}if(!u.get(Ba)&&this.depthBuffer){u.miss(Ui)&&u.put(Ui,o.createRenderbuffer());var F=u.get(Ui);(v!==u.get(vs)||g!==u.get(ds))&&(o.bindRenderbuffer(ja,F),o.renderbufferStorage(ja,o.DEPTH_COMPONENT16,v,g),u.put(vs,v),u.put(ds,g),o.bindRenderbuffer(ja,null)),u.get(Bo)||(o.framebufferRenderbuffer(na,Ei,ja,F),u.put(Bo,!0))}},unbind:function(e){e.__currentFrameBuffer=null;var o=e.gl;o.bindFramebuffer(na,null),this._boundRenderer=null,this._cache.use(e.__uid__);var u=this._cache.get("viewport");u&&e.setViewport(u),this.updateMipmap(e)},updateMipmap:function(e){var o=e.gl;for(var u in this._textures){var c=this._textures[u];if(c){var v=c.texture;if(!v.NPOT&&v.useMipmap&&v.minFilter===Mr.LINEAR_MIPMAP_LINEAR){var g=v.textureType==="textureCube"?$.TEXTURE_CUBE_MAP:$.TEXTURE_2D;o.bindTexture(g,v.getWebGLTexture(e)),o.generateMipmap(g),o.bindTexture(g,null)}}}},checkStatus:function(e){return e.checkFramebufferStatus(na)},_getFrameBufferGL:function(e){var o=this._cache;return o.use(e.__uid__),o.miss(ya)&&o.put(ya,e.gl.createFramebuffer()),o.get(ya)},attach:function(e,o,u){if(!e.width)throw new Error("The texture attached to color buffer is not a valid.");o=o||jo,u=u||$.TEXTURE_2D;var c=this._boundRenderer,v=c&&c.gl,g;if(v){var x=this._cache;x.use(c.__uid__),g=x.get("attached_textures")}var _=this._textures[o];if(!(_&&_.target===u&&_.texture===e&&g&&g[o]!=null)){var M=!0;c&&(M=this._doAttach(c,e,o,u),this.viewport||c.setViewport(0,0,e.width,e.height,1)),M&&(this._textures[o]=this._textures[o]||{},this._textures[o].texture=e,this._textures[o].target=u)}},_doAttach:function(e,o,u,c){var v=e.gl,g=o.getWebGLTexture(e),x=this._cache.get("attached_textures");if(x&&x[u]){var _=x[u];if(_.texture===o&&_.target===c)return}u=+u;var M=!0;if(u===Ei||u===$.DEPTH_STENCIL_ATTACHMENT){var I=e.getGLExtension("WEBGL_depth_texture");if(I||(console.error("Depth texture is not supported by the browser"),M=!1),o.format!==$.DEPTH_COMPONENT&&o.format!==$.DEPTH_STENCIL&&(console.error("The texture attached to depth buffer is not a valid."),M=!1),M){var F=this._cache.get(Ui);F&&(v.framebufferRenderbuffer(na,Ei,ja,null),v.deleteRenderbuffer(F),this._cache.put(Ui,!1)),this._cache.put(Bo,!1),this._cache.put(Ba,!0)}}return v.framebufferTexture2D(na,u,c,g,0),x||(x={},this._cache.put("attached_textures",x)),x[u]=x[u]||{},x[u].texture=o,x[u].target=c,M},_doDetach:function(e,o,u){e.framebufferTexture2D(na,o,u,null,0);var c=this._cache.get("attached_textures");c&&c[o]&&(c[o]=null),(o===Ei||o===$.DEPTH_STENCIL_ATTACHMENT)&&this._cache.put(Ba,!1)},detach:function(e,o){if(this._textures[e]=null,this._boundRenderer){var u=this._cache;u.use(this._boundRenderer.__uid__),this._doDetach(this._boundRenderer.gl,e,o)}},dispose:function(e){var o=e.gl,u=this._cache;u.use(e.__uid__);var c=u.get(Ui);c&&o.deleteRenderbuffer(c);var v=u.get(ya);v&&o.deleteFramebuffer(v),u.deleteContext(e.__uid__),this._textures={}}});zo.DEPTH_ATTACHMENT=Ei,zo.COLOR_ATTACHMENT0=jo,zo.STENCIL_ATTACHMENT=$.STENCIL_ATTACHMENT,zo.DEPTH_STENCIL_ATTACHMENT=$.DEPTH_STENCIL_ATTACHMENT;var Kn=zo,ll=["px","nx","py","ny","pz","nz"],Vn=W.extend(function(){var n={position:new or,far:1e3,near:.1,texture:null,shadowMapPass:null},e=n._cameras={px:new xn({fov:90}),nx:new xn({fov:90}),py:new xn({fov:90}),ny:new xn({fov:90}),pz:new xn({fov:90}),nz:new xn({fov:90})};return e.px.lookAt(or.POSITIVE_X,or.NEGATIVE_Y),e.nx.lookAt(or.NEGATIVE_X,or.NEGATIVE_Y),e.py.lookAt(or.POSITIVE_Y,or.POSITIVE_Z),e.ny.lookAt(or.NEGATIVE_Y,or.NEGATIVE_Z),e.pz.lookAt(or.POSITIVE_Z,or.NEGATIVE_Y),e.nz.lookAt(or.NEGATIVE_Z,or.NEGATIVE_Y),n._frameBuffer=new Kn,n},{getCamera:function(e){return this._cameras[e]},render:function(e,o,u){var c=e.gl;u||o.update();for(var v=this.texture.width,g=2*Math.atan(v/(v-.5))/Math.PI*180,x=0;x<6;x++){var _=ll[x],M=this._cameras[_];if(or.copy(M.position,this.position),M.far=this.far,M.near=this.near,M.fov=g,this.shadowMapPass){M.update();var I=o.getBoundingBox();I.applyTransform(M.viewMatrix),o.viewBoundingBoxLastFrame.copy(I),this.shadowMapPass.render(e,o,M,!0)}this._frameBuffer.attach(this.texture,c.COLOR_ATTACHMENT0,c.TEXTURE_CUBE_MAP_POSITIVE_X+x),this._frameBuffer.bind(e),e.render(o,M,!0),this._frameBuffer.unbind(e)}},dispose:function(e){this._frameBuffer.dispose(e)}}),An=Vn,uu=$r.extend({dynamic:!1,widthSegments:1,heightSegments:1},function(){this.build()},{build:function(){for(var e=this.heightSegments,o=this.widthSegments,u=this.attributes,c=[],v=[],g=[],x=[],_=0;_<=e;_++)for(var M=_/e,I=0;I<=o;I++){var F=I/o;if(c.push([2*F-1,2*M-1,0]),v&&v.push([F,M]),g&&g.push([0,0,1]),I<o&&_<e){var ut=I+_*(o+1);x.push([ut,ut+1,ut+o+1]),x.push([ut+o+1,ut+1,ut+o+2])}}u.position.fromArray(c),u.texcoord0.fromArray(v),u.normal.fromArray(g),this.initIndicesFromArray(x),this.boundingBox=new di,this.boundingBox.min.set(-1,-1,0),this.boundingBox.max.set(1,1,0)}}),ps=uu,hn=new gr,ao=$r.extend({dynamic:!1,widthSegments:1,heightSegments:1,depthSegments:1,inside:!1},function(){this.build()},{build:function(){var e={px:Fo("px",this.depthSegments,this.heightSegments),nx:Fo("nx",this.depthSegments,this.heightSegments),py:Fo("py",this.widthSegments,this.depthSegments),ny:Fo("ny",this.widthSegments,this.depthSegments),pz:Fo("pz",this.widthSegments,this.heightSegments),nz:Fo("nz",this.widthSegments,this.heightSegments)},o=["position","texcoord0","normal"],u=0,c=0;for(var v in e)u+=e[v].vertexCount,c+=e[v].indices.length;for(var g=0;g<o.length;g++)this.attributes[o[g]].init(u);this.indices=new D.a.Uint16Array(c);var x=0,_=0;for(var v in e){for(var M=e[v],g=0;g<o.length;g++)for(var I=o[g],F=M.attributes[I].value,ut=M.attributes[I].size,yt=I==="normal",Dt=0;Dt<F.length;Dt++){var Et=F[Dt];this.inside&&yt&&(Et=-Et),this.attributes[I].value[Dt+ut*_]=Et}for(var Pt=M.indices.length,Dt=0;Dt<M.indices.length;Dt++)this.indices[Dt+x]=_+M.indices[this.inside?Pt-Dt-1:Dt];x+=M.indices.length,_+=M.vertexCount}this.boundingBox=new di,this.boundingBox.max.set(1,1,1),this.boundingBox.min.set(-1,-1,-1)}});function Fo(n,e,o){hn.identity();var u=new ps({widthSegments:e,heightSegments:o});switch(n){case"px":gr.translate(hn,hn,or.POSITIVE_X),gr.rotateY(hn,hn,Math.PI/2);break;case"nx":gr.translate(hn,hn,or.NEGATIVE_X),gr.rotateY(hn,hn,-Math.PI/2);break;case"py":gr.translate(hn,hn,or.POSITIVE_Y),gr.rotateX(hn,hn,-Math.PI/2);break;case"ny":gr.translate(hn,hn,or.NEGATIVE_Y),gr.rotateX(hn,hn,Math.PI/2);break;case"pz":gr.translate(hn,hn,or.POSITIVE_Z);break;case"nz":gr.translate(hn,hn,or.NEGATIVE_Z),gr.rotateY(hn,hn,Math.PI);break}return u.applyTransform(hn),u}var Vo=ao,fu=`@export clay.skybox.vertex
#define SHADER_NAME skybox
uniform mat4 world : WORLD;
uniform mat4 worldViewProjection : WORLDVIEWPROJECTION;
attribute vec3 position : POSITION;
varying vec3 v_WorldPosition;
void main()
{
 v_WorldPosition = (world * vec4(position, 1.0)).xyz;
 gl_Position = worldViewProjection * vec4(position, 1.0);
}
@end
@export clay.skybox.fragment
#define PI 3.1415926
uniform mat4 viewInverse : VIEWINVERSE;
#ifdef EQUIRECTANGULAR
uniform sampler2D environmentMap;
#else
uniform samplerCube environmentMap;
#endif
uniform float lod: 0.0;
varying vec3 v_WorldPosition;
@import clay.util.rgbm
@import clay.util.srgb
@import clay.util.ACES
void main()
{
 vec3 eyePos = viewInverse[3].xyz;
 vec3 V = normalize(v_WorldPosition - eyePos);
#ifdef EQUIRECTANGULAR
 float phi = acos(V.y);
 float theta = atan(-V.x, V.z) + PI * 0.5;
 vec2 uv = vec2(theta / 2.0 / PI, phi / PI);
 vec4 texel = decodeHDR(texture2D(environmentMap, fract(uv)));
#else
 #if defined(LOD) || defined(SUPPORT_TEXTURE_LOD)
 vec4 texel = decodeHDR(textureCubeLodEXT(environmentMap, V, lod));
 #else
 vec4 texel = decodeHDR(textureCube(environmentMap, V));
 #endif
#endif
#ifdef SRGB_DECODE
 texel = sRGBToLinear(texel);
#endif
#ifdef TONEMAPPING
 texel.rgb = ACESToneMapping(texel.rgb);
#endif
#ifdef SRGB_ENCODE
 texel = linearTosRGB(texel);
#endif
 gl_FragColor = encodeHDR(vec4(texel.rgb, 1.0));
}
@end`;cr.import(fu);var gs=ni.extend(function(){var n=new cr({vertex:cr.source("clay.skybox.vertex"),fragment:cr.source("clay.skybox.fragment")}),e=new Le({shader:n,depthMask:!1});return{scene:null,geometry:new Vo,material:e,environmentMap:null,culling:!1,_dummyCamera:new xn}},function(){var n=this.scene;n&&this.attachScene(n),this.environmentMap&&this.setEnvironmentMap(this.environmentMap)},{attachScene:function(e){this.scene&&this.detachScene(),e.skybox=this,this.scene=e,e.on("beforerender",this._beforeRenderScene,this)},detachScene:function(){this.scene&&(this.scene.off("beforerender",this._beforeRenderScene),this.scene.skybox=null),this.scene=null},dispose:function(e){this.detachScene(),this.geometry.dispose(e)},setEnvironmentMap:function(e){e.textureType==="texture2D"?(this.material.define("EQUIRECTANGULAR"),e.minFilter=Mr.LINEAR):this.material.undefine("EQUIRECTANGULAR"),this.material.set("environmentMap",e)},getEnvironmentMap:function(){return this.material.get("environmentMap")},_beforeRenderScene:function(e,o,u){this.renderSkybox(e,u)},renderSkybox:function(e,o){var u=this._dummyCamera;u.aspect=e.getViewportAspect(),u.fov=o.fov||50,u.updateProjectionMatrix(),gr.invert(u.invProjectionMatrix,u.projectionMatrix),u.worldTransform.copy(o.worldTransform),u.viewMatrix.copy(o.viewMatrix),this.position.copy(o.getWorldPosition()),this.update(),e.gl.disable(e.gl.BLEND),this.material.get("lod")>0?this.material.define("fragment","LOD"):this.material.undefine("fragment","LOD"),e.renderPass([this],u)}}),ms=gs,cu=ms,za=542327876,Qc=1,Jc=2,Go=4,Fa=8,Bn=4096,ai=131072,gf=524288,vn=8388608,Ir=8,hu=4194304,mf=4096,yf=512,Nt=1024,Ft=2048,Lt=4096,Vt=8192,Gt=16384,re=32768,oe=2097152,je=1,Be=2,ne=4,pe=64,ge=512,Se=131072;function Ce(n){return n.charCodeAt(0)+(n.charCodeAt(1)<<8)+(n.charCodeAt(2)<<16)+(n.charCodeAt(3)<<24)}function Ye(n){return String.fromCharCode(n&255,n>>8&255,n>>16&255,n>>24&255)}var Qe=31,tr=Ce("DXT1"),ar=Ce("DXT3"),Cr=Ce("DXT5"),Rr=0,Dr=1,Qr=2,Mn=3,dn=4,Oi=7,Uo=20,ul=21,Vi=27,Ji=28,xf=29,$c=30,bf={parse:function(e,o){var u=new Int32Array(e,0,Qe);if(u[Rr]!==za||!u(Uo)&ne)return null;var c=u(ul),v=u[dn],g=u[Mn],x=u[Ji]&yf,_=u[Qr]&ai,M,I;switch(c){case tr:M=8,I=Mr.COMPRESSED_RGB_S3TC_DXT1_EXT;break;case ar:M=16,I=Mr.COMPRESSED_RGBA_S3TC_DXT3_EXT;break;case Cr:M=16,I=Mr.COMPRESSED_RGBA_S3TC_DXT5_EXT;break;default:return null}var F=u[Dr]+4,ut=x?6:1,yt=1;_&&(yt=Math.max(1,u[Oi]));for(var Dt=[],Et=0;Et<ut;Et++){var Pt=v,Ht=g;Dt[Et]=new Gr({width:Pt,height:Ht,format:I});for(var $t=[],qt=0;qt<yt;qt++){var le=Math.max(4,Pt)/4*Math.max(4,Ht)/4*M,ie=new Uint8Array(e,F,le);F+=le,Pt*=.5,Ht*=.5,$t[qt]=ie}Dt[Et].pixels=$t[0],_&&(Dt[Et].mipmaps=$t)}if(o)o.width=Dt[0].width,o.height=Dt[0].height,o.format=Dt[0].format,o.pixels=Dt[0].pixels,o.mipmaps=Dt[0].mipmaps;else return Dt[0]}},Sf=bf,ys=String.fromCharCode,Yd=8,_f=32767;function Xd(n,e,o,u){if(n[3]>0){var c=Math.pow(2,n[3]-128-8+u);e[o+0]=n[0]*c,e[o+1]=n[1]*c,e[o+2]=n[2]*c}else e[o+0]=0,e[o+1]=0,e[o+2]=0;return e[o+3]=1,e}function Tf(n,e,o){for(var u="",c=e;c<o;c++)u+=ys(n[c]);return u}function fl(n,e){e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3]}function Of(n,e,o,u){for(var c=0,v=0,g=u;g>0;)if(n[v][0]=e[o++],n[v][1]=e[o++],n[v][2]=e[o++],n[v][3]=e[o++],n[v][0]===1&&n[v][1]===1&&n[v][2]===1){for(var x=n[v][3]<<c>>>0;x>0;x--)fl(n[v-1],n[v]),v++,g--;c+=8}else v++,g--,c=0;return o}function Zd(n,e,o,u){if(u<Yd|u>_f)return Of(n,e,o,u);var c=e[o++];if(c!=2)return Of(n,e,o-1,u);if(n[0][1]=e[o++],n[0][2]=e[o++],c=e[o++],(n[0][2]<<8>>>0|c)>>>0!==u)return null;for(var c=0;c<4;c++)for(var v=0;v<u;){var g=e[o++];if(g>128){g=(g&127)>>>0;for(var x=e[o++];g--;)n[v++][c]=x}else for(;g--;)n[v++][c]=e[o++]}return o}var Ho={parseRGBE:function(e,o,u){u==null&&(u=0);var c=new Uint8Array(e),v=c.length;if(Tf(c,0,2)==="#?"){for(var g=2;g<v&&!(ys(c[g])===`
`&&ys(c[g+1])===`
`);g++);if(!(g>=v)){g+=2;for(var x="";g<v;g++){var _=ys(c[g]);if(_===`
`)break;x+=_}var M=x.split(" "),I=parseInt(M[1]),F=parseInt(M[3]);if(!(!F||!I)){for(var ut=g+1,yt=[],Dt=0;Dt<F;Dt++){yt[Dt]=[];for(var Et=0;Et<4;Et++)yt[Dt][Et]=0}for(var Pt=new Float32Array(F*I*4),Ht=0,$t=0;$t<I;$t++){var ut=Zd(yt,c,ut,F);if(!ut)return null;for(var Dt=0;Dt<F;Dt++)Xd(yt[Dt],Pt,Ht,u),Ht+=4}return o||(o=new Gr),o.width=F,o.height=I,o.pixels=Pt,o.type=Mr.FLOAT,o}}}},parseRGBEFromPNG:function(e){}},Af=Ho,cl={loadTexture:function(e,o,u,c){var v;if(typeof o=="function"?(u=o,c=u,o={}):o=o||{},typeof e=="string"){if(e.match(/.hdr$/)||o.fileType==="hdr")return v=new Gr({width:0,height:0,sRGB:!1}),cl._fetchTexture(e,function(g){Af.parseRGBE(g,v,o.exposure),v.dirty(),u&&u(v)},c),v;e.match(/.dds$/)||o.fileType==="dds"?(v=new Gr({width:0,height:0}),cl._fetchTexture(e,function(g){Sf.parse(g,v),v.dirty(),u&&u(v)},c)):(v=new Gr,v.load(e),v.success(u),v.error(c))}else typeof e=="object"&&typeof e.px!="undefined"&&(v=new ma,v.load(e),v.success(u),v.error(c));return v},loadPanorama:function(e,o,u,c,v,g){var x=this;typeof c=="function"?(v=c,g=v,c={}):c=c||{},cl.loadTexture(o,c,function(_){_.flipY=c.flipY||!1,x.panoramaToCubeMap(e,_,u,c),_.dispose(e),v&&v(u)},g)},panoramaToCubeMap:function(e,o,u,c){var v=new An,g=new cu({scene:new ra});return g.setEnvironmentMap(o),c=c||{},c.encodeRGBM&&g.material.define("fragment","RGBM_ENCODE"),u.sRGB=o.sRGB,v.texture=u,v.render(e,g.scene),v.texture=null,v.dispose(e),u},heightToNormal:function(e,o){var u=document.createElement("canvas"),c=u.width=e.width,v=u.height=e.height,g=u.getContext("2d");g.drawImage(e,0,0,c,v),o=o||!1;for(var x=g.getImageData(0,0,c,v),_=g.createImageData(c,v),M=0;M<x.data.length;M+=4){if(o){var I=x.data[M],F=x.data[M+1],ut=x.data[M+2],yt=Math.abs(I-F)+Math.abs(F-ut);if(yt>20)return console.warn("Given image is not a height map"),e}var Dt,Et,Pt,Ht;M%(c*4)==0?(Dt=x.data[M],Pt=x.data[M+4]):M%(c*4)==(c-1)*4?(Dt=x.data[M-4],Pt=x.data[M]):(Dt=x.data[M-4],Pt=x.data[M+4]),M<c*4?(Et=x.data[M],Ht=x.data[M+c*4]):M>c*(v-1)*4?(Et=x.data[M-c*4],Ht=x.data[M]):(Et=x.data[M-c*4],Ht=x.data[M+c*4]),_.data[M]=Dt-Pt+127,_.data[M+1]=Et-Ht+127,_.data[M+2]=255,_.data[M+3]=255}return g.putImageData(_,0,0),u},isHeightImage:function(e,o,u){if(!e||!e.width||!e.height)return!1;var c=document.createElement("canvas"),v=c.getContext("2d"),g=o||32;u=u||20,c.width=c.height=g,v.drawImage(e,0,0,g,g);for(var x=v.getImageData(0,0,g,g),_=0;_<x.data.length;_+=4){var M=x.data[_],I=x.data[_+1],F=x.data[_+2],ut=Math.abs(M-I)+Math.abs(I-F);if(ut>u)return!1}return!0},_fetchTexture:function(e,o,u){D.a.request.get({url:e,responseType:"arraybuffer",onload:o,onerror:u})},createChessboard:function(e,o,u,c){e=e||512,o=o||64,u=u||"black",c=c||"white";var v=Math.ceil(e/o),g=document.createElement("canvas");g.width=e,g.height=e;var x=g.getContext("2d");x.fillStyle=c,x.fillRect(0,0,e,e),x.fillStyle=u;for(var _=0;_<v;_++)for(var M=0;M<v;M++){var I=M%2?_%2:_%2-1;I&&x.fillRect(_*o,M*o,o,o)}var F=new Gr({image:g,anisotropic:8});return F},createBlank:function(e){var o=document.createElement("canvas");o.width=1,o.height=1;var u=o.getContext("2d");u.fillStyle=e,u.fillRect(0,0,1,1);var c=new Gr({image:o});return c}},oo=cl,Mf=["mousedown","mouseup","mousemove","mouseover","mouseout","click","dblclick","contextmenu"];function Df(n){return"_on"+n}var hl=function(e){var o=this;this._texture=new Gr({anisotropic:32,flipY:!1,surface:this,dispose:function(c){o.dispose(),Gr.prototype.dispose.call(this,c)}}),Mf.forEach(function(u){this[Df(u)]=function(c){!c.triangle||this._meshes.forEach(function(v){this.dispatchEvent(u,v,c.triangle,c.point)},this)}},this),this._meshes=[],e&&this.setECharts(e),this.onupdate=null};hl.prototype={constructor:hl,getTexture:function(){return this._texture},setECharts:function(e){this._chart=e;var o=e.getDom();if(!(o instanceof HTMLCanvasElement))console.error("ECharts must init on canvas if it is used as texture."),o=document.createElement("canvas");else{var u=this,c=e.getZr(),v=c.__oldRefreshImmediately||c.refreshImmediately;c.refreshImmediately=function(){v.call(this),u._texture.dirty(),u.onupdate&&u.onupdate()},c.__oldRefreshImmediately=v}this._texture.image=o,this._texture.dirty(),this.onupdate&&this.onupdate()},dispatchEvent:function(){var n=new or,e=new or,o=new or,u=new br,c=new br,v=new br,g=new br,x=new or;return function(_,M,I,F){var ut=M.geometry,yt=ut.attributes.position,Dt=ut.attributes.texcoord0,Et=or.dot,Pt=or.cross;yt.get(I[0],n.array),yt.get(I[1],e.array),yt.get(I[2],o.array),Dt.get(I[0],u.array),Dt.get(I[1],c.array),Dt.get(I[2],v.array),Pt(x,e,o);var Ht=Et(n,x),$t=Et(F,x)/Ht;Pt(x,o,n);var qt=Et(F,x)/Ht;Pt(x,n,e);var le=Et(F,x)/Ht;br.scale(g,u,$t),br.scaleAndAdd(g,g,c,qt),br.scaleAndAdd(g,g,v,le);var ie=g.x*this._chart.getWidth(),he=g.y*this._chart.getHeight();this._chart.getZr().handler.dispatch(_,{zrX:ie,zrY:he})}}(),attachToMesh:function(e){this._meshes.indexOf(e)>=0||(Mf.forEach(function(o){e.on(o,this[Df(o)],this)},this),this._meshes.push(e))},detachFromMesh:function(e){var o=this._meshes.indexOf(e);o>=0&&this._meshes.splice(o,1),Mf.forEach(function(u){e.off(u,this[Df(u)])},this)},dispose:function(){this._meshes.forEach(function(e){this.detachFromMesh(e)},this)}};var Kd=hl,qc=Fi.extend({left:-1,right:1,near:-1,far:1,top:1,bottom:-1},{updateProjectionMatrix:function(){this.projectionMatrix.ortho(this.left,this.right,this.bottom,this.top,this.near,this.far)},decomposeProjectionMatrix:function(){var e=this.projectionMatrix.array;this.left=(-1-e[12])/e[0],this.right=(1-e[12])/e[0],this.top=(1-e[13])/e[5],this.bottom=(-1-e[13])/e[5],this.near=-(-1-e[14])/e[10],this.far=-(1-e[14])/e[10]},clone:function(){var e=Fi.prototype.clone.call(this);return e.left=this.left,e.right=this.right,e.near=this.near,e.far=this.far,e.top=this.top,e.bottom=this.bottom,e}}),xs=qc,Xy=`
@export clay.compositor.vertex
uniform mat4 worldViewProjection : WORLDVIEWPROJECTION;
attribute vec3 position : POSITION;
attribute vec2 texcoord : TEXCOORD_0;
varying vec2 v_Texcoord;
void main()
{
 v_Texcoord = texcoord;
 gl_Position = worldViewProjection * vec4(position, 1.0);
}
@end`;cr.import(Xy);var kd=new ps,Cf=new ni({geometry:kd,frustumCulling:!1}),th=new xs,Qd=W.extend(function(){return{fragment:"",outputs:null,material:null,blendWithPrevious:!1,clearColor:!1,clearDepth:!0}},function(){var n=new cr(cr.source("clay.compositor.vertex"),this.fragment),e=new Le({shader:n});e.enableTexturesAll(),this.material=e},{setUniform:function(e,o){this.material.setUniform(e,o)},getUniform:function(e){var o=this.material.uniforms[e];if(o)return o.value},attachOutput:function(e,o){this.outputs||(this.outputs={}),o=o||$.COLOR_ATTACHMENT0,this.outputs[o]=e},detachOutput:function(e){for(var o in this.outputs)this.outputs[o]===e&&(this.outputs[o]=null)},bind:function(e,o){if(this.outputs)for(var u in this.outputs){var c=this.outputs[u];c&&o.attach(c,u)}o&&o.bind(e)},unbind:function(e,o){o.unbind(e)},render:function(e,o){var u=e.gl;if(o){this.bind(e,o);var c=e.getGLExtension("EXT_draw_buffers");if(c&&this.outputs){var v=[];for(var g in this.outputs)g=+g,g>=u.COLOR_ATTACHMENT0&&g<=u.COLOR_ATTACHMENT0+8&&v.push(g);c.drawBuffersEXT(v)}}this.trigger("beforerender",this,e);var x=this.clearDepth?u.DEPTH_BUFFER_BIT:0;if(u.depthMask(!0),this.clearColor){x=x|u.COLOR_BUFFER_BIT,u.colorMask(!0,!0,!0,!0);var _=this.clearColor;Array.isArray(_)&&u.clearColor(_[0],_[1],_[2],_[3])}u.clear(x),this.blendWithPrevious?(u.enable(u.BLEND),this.material.transparent=!0):(u.disable(u.BLEND),this.material.transparent=!1),this.renderQuad(e),this.trigger("afterrender",this,e),o&&this.unbind(e,o)},renderQuad:function(e){Cf.material=this.material,e.renderPass([Cf],th)},dispose:function(e){}}),Gn=Qd,eh=`#define SAMPLE_NUMBER 1024
#define PI 3.14159265358979
uniform sampler2D normalDistribution;
uniform vec2 viewportSize : [512, 256];
const vec3 N = vec3(0.0, 0.0, 1.0);
const float fSampleNumber = float(SAMPLE_NUMBER);
vec3 importanceSampleNormal(float i, float roughness, vec3 N) {
 vec3 H = texture2D(normalDistribution, vec2(roughness, i)).rgb;
 vec3 upVector = abs(N.y) > 0.999 ? vec3(1.0, 0.0, 0.0) : vec3(0.0, 1.0, 0.0);
 vec3 tangentX = normalize(cross(N, upVector));
 vec3 tangentZ = cross(N, tangentX);
 return normalize(tangentX * H.x + N * H.y + tangentZ * H.z);
}
float G_Smith(float roughness, float NoV, float NoL) {
 float k = roughness * roughness / 2.0;
 float G1V = NoV / (NoV * (1.0 - k) + k);
 float G1L = NoL / (NoL * (1.0 - k) + k);
 return G1L * G1V;
}
void main() {
 vec2 uv = gl_FragCoord.xy / viewportSize;
 float NoV = uv.x;
 float roughness = uv.y;
 vec3 V;
 V.x = sqrt(1.0 - NoV * NoV);
 V.y = 0.0;
 V.z = NoV;
 float A = 0.0;
 float B = 0.0;
 for (int i = 0; i < SAMPLE_NUMBER; i++) {
 vec3 H = importanceSampleNormal(float(i) / fSampleNumber, roughness, N);
 vec3 L = reflect(-V, H);
 float NoL = clamp(L.z, 0.0, 1.0);
 float NoH = clamp(H.z, 0.0, 1.0);
 float VoH = clamp(dot(V, H), 0.0, 1.0);
 if (NoL > 0.0) {
 float G = G_Smith(roughness, NoV, NoL);
 float G_Vis = G * VoH / (NoH * NoV);
 float Fc = pow(1.0 - VoH, 5.0);
 A += (1.0 - Fc) * G_Vis;
 B += Fc * G_Vis;
 }
 }
 gl_FragColor = vec4(vec2(A, B) / fSampleNumber, 0.0, 1.0);
}
`,rh=`#define SHADER_NAME prefilter
#define SAMPLE_NUMBER 1024
#define PI 3.14159265358979
uniform mat4 viewInverse : VIEWINVERSE;
uniform samplerCube environmentMap;
uniform sampler2D normalDistribution;
uniform float roughness : 0.5;
varying vec2 v_Texcoord;
varying vec3 v_WorldPosition;
@import clay.util.rgbm
vec3 importanceSampleNormal(float i, float roughness, vec3 N) {
 vec3 H = texture2D(normalDistribution, vec2(roughness, i)).rgb;
 vec3 upVector = abs(N.y) > 0.999 ? vec3(1.0, 0.0, 0.0) : vec3(0.0, 1.0, 0.0);
 vec3 tangentX = normalize(cross(N, upVector));
 vec3 tangentZ = cross(N, tangentX);
 return normalize(tangentX * H.x + N * H.y + tangentZ * H.z);
}
void main() {
 vec3 eyePos = viewInverse[3].xyz;
 vec3 V = normalize(v_WorldPosition - eyePos);
 vec3 N = V;
 vec3 prefilteredColor = vec3(0.0);
 float totalWeight = 0.0;
 float fMaxSampleNumber = float(SAMPLE_NUMBER);
 for (int i = 0; i < SAMPLE_NUMBER; i++) {
 vec3 H = importanceSampleNormal(float(i) / fMaxSampleNumber, roughness, N);
 vec3 L = reflect(-V, H);
 float NoL = clamp(dot(N, L), 0.0, 1.0);
 if (NoL > 0.0) {
 prefilteredColor += decodeHDR(textureCube(environmentMap, L)).rgb * NoL;
 totalWeight += NoL;
 }
 }
 gl_FragColor = encodeHDR(vec4(prefilteredColor / totalWeight, 1.0));
}
`,Wo={},Hi=["px","nx","py","ny","pz","nz"];Wo.prefilterEnvironmentMap=function(n,e,o,u,c){(!c||!u)&&(u=Wo.generateNormalDistribution(),c=Wo.integrateBRDF(n,u)),o=o||{};var v=o.width||64,g=o.height||64,x=o.type||e.type,_=new ma({width:v,height:g,type:x,flipY:!1,mipmaps:[]});_.isPowerOfTwo()||console.warn("Width and height must be power of two to enable mipmap.");var M=Math.min(v,g),I=Math.log(M)/Math.log(2)+1,F=new Le({shader:new cr({vertex:cr.source("clay.skybox.vertex"),fragment:rh})});F.set("normalDistribution",u),o.encodeRGBM&&F.define("fragment","RGBM_ENCODE"),o.decodeRGBM&&F.define("fragment","RGBM_DECODE");var ut=new ra,yt;if(e.textureType==="texture2D"){var Dt=new ma({width:v,height:g,type:x===Mr.FLOAT?Mr.HALF_FLOAT:x});oo.panoramaToCubeMap(n,e,Dt,{encodeRGBM:o.decodeRGBM}),e=Dt}yt=new ms({scene:ut,material:F}),yt.material.set("environmentMap",e);var Et=new An({texture:_});o.encodeRGBM&&(x=_.type=Mr.UNSIGNED_BYTE);for(var Pt=new Gr({width:v,height:g,type:x}),Ht=new Kn({depthBuffer:!1}),$t=D.a[x===Mr.UNSIGNED_BYTE?"Uint8Array":"Float32Array"],qt=0;qt<I;qt++){_.mipmaps[qt]={pixels:{}},yt.material.set("roughness",qt/(I-1));for(var le=Pt.width,ie=2*Math.atan(le/(le-.5))/Math.PI*180,he=0;he<Hi.length;he++){var Re=new $t(Pt.width*Pt.height*4);Ht.attach(Pt),Ht.bind(n);var ze=Et.getCamera(Hi[he]);ze.fov=ie,n.render(ut,ze),n.gl.readPixels(0,0,Pt.width,Pt.height,Mr.RGBA,x,Re),Ht.unbind(n),_.mipmaps[qt].pixels[Hi[he]]=Re}Pt.width/=2,Pt.height/=2,Pt.dirty()}return Ht.dispose(n),Pt.dispose(n),yt.dispose(n),u.dispose(n),{environmentMap:_,brdfLookup:c,normalDistribution:u,maxMipmapLevel:I}},Wo.integrateBRDF=function(n,e){e=e||Wo.generateNormalDistribution();var o=new Kn({depthBuffer:!1}),u=new Gn({fragment:eh}),c=new Gr({width:512,height:256,type:Mr.HALF_FLOAT,wrapS:Mr.CLAMP_TO_EDGE,wrapT:Mr.CLAMP_TO_EDGE,minFilter:Mr.NEAREST,magFilter:Mr.NEAREST,useMipmap:!1});return u.setUniform("normalDistribution",e),u.setUniform("viewportSize",[512,256]),u.attachOutput(c),u.render(n,o),o.dispose(n),c},Wo.generateNormalDistribution=function(n,e){for(var n=n||256,e=e||1024,o=new Gr({width:n,height:e,type:Mr.FLOAT,minFilter:Mr.NEAREST,magFilter:Mr.NEAREST,wrapS:Mr.CLAMP_TO_EDGE,wrapT:Mr.CLAMP_TO_EDGE,useMipmap:!1}),u=new Float32Array(e*n*4),c=[],v=0;v<n;v++){for(var g=v/n,x=g*g,_=0;_<e;_++){var M=(_<<16|_>>>16)>>>0;M=((M&1431655765)<<1|(M&2863311530)>>>1)>>>0,M=((M&858993459)<<2|(M&3435973836)>>>2)>>>0,M=((M&252645135)<<4|(M&4042322160)>>>4)>>>0,M=(((M&16711935)<<8|(M&4278255360)>>>8)>>>0)/4294967296;var I=Math.sqrt((1-M)/(1+(x*x-1)*M));c[_]=I}for(var _=0;_<e;_++){var F=(_*n+v)*4,I=c[_],ut=Math.sqrt(1-I*I),yt=_/e,Dt=2*Math.PI*yt;u[F]=ut*Math.cos(Dt),u[F+1]=I,u[F+2]=ut*Math.sin(Dt),u[F+3]=1}}return o.pixels=u,o};var vu=Wo,Jd=zi.extend({cubemap:null,castShadow:!1,_normalDistribution:null,_brdfLookup:null},{type:"AMBIENT_CUBEMAP_LIGHT",prefilter:function(e,o){if(!e.getGLExtension("EXT_shader_texture_lod")){console.warn("Device not support textureCubeLodEXT");return}this._brdfLookup||(this._normalDistribution=vu.generateNormalDistribution(),this._brdfLookup=vu.integrateBRDF(e,this._normalDistribution));var u=this.cubemap;if(!u.__prefiltered){var c=vu.prefilterEnvironmentMap(e,u,{encodeRGBM:!0,width:o,height:o},this._normalDistribution,this._brdfLookup);this.cubemap=c.environmentMap,this.cubemap.__prefiltered=!0,u.dispose(e)}},getBRDFLookup:function(){return this._brdfLookup},uniformTemplates:{ambientCubemapLightColor:{type:"3f",value:function(e){var o=e.color,u=e.intensity;return[o[0]*u,o[1]*u,o[2]*u]}},ambientCubemapLightCubemap:{type:"t",value:function(e){return e.cubemap}},ambientCubemapLightBRDFLookup:{type:"t",value:function(e){return e._brdfLookup}}}}),$d=Jd,wn=zi.extend({castShadow:!1,coefficients:[]},function(){this._coefficientsTmpArr=new D.a.Float32Array(9*3)},{type:"AMBIENT_SH_LIGHT",uniformTemplates:{ambientSHLightColor:{type:"3f",value:function(e){var o=e.color,u=e.intensity;return[o[0]*u,o[1]*u,o[2]*u]}},ambientSHLightCoefficients:{type:"3f",value:function(e){for(var o=e._coefficientsTmpArr,u=0;u<e.coefficients.length;u++)o[u]=e.coefficients[u];return o}}}}),qd=wn,tp=`uniform samplerCube environmentMap;
varying vec2 v_Texcoord;
#define TEXTURE_SIZE 16
mat3 front = mat3(
 1.0, 0.0, 0.0,
 0.0, 1.0, 0.0,
 0.0, 0.0, 1.0
);
mat3 back = mat3(
 -1.0, 0.0, 0.0,
 0.0, 1.0, 0.0,
 0.0, 0.0, -1.0
);
mat3 left = mat3(
 0.0, 0.0, -1.0,
 0.0, 1.0, 0.0,
 1.0, 0.0, 0.0
);
mat3 right = mat3(
 0.0, 0.0, 1.0,
 0.0, 1.0, 0.0,
 -1.0, 0.0, 0.0
);
mat3 up = mat3(
 1.0, 0.0, 0.0,
 0.0, 0.0, 1.0,
 0.0, -1.0, 0.0
);
mat3 down = mat3(
 1.0, 0.0, 0.0,
 0.0, 0.0, -1.0,
 0.0, 1.0, 0.0
);
float harmonics(vec3 normal){
 int index = int(gl_FragCoord.x);
 float x = normal.x;
 float y = normal.y;
 float z = normal.z;
 if(index==0){
 return 1.0;
 }
 else if(index==1){
 return x;
 }
 else if(index==2){
 return y;
 }
 else if(index==3){
 return z;
 }
 else if(index==4){
 return x*z;
 }
 else if(index==5){
 return y*z;
 }
 else if(index==6){
 return x*y;
 }
 else if(index==7){
 return 3.0*z*z - 1.0;
 }
 else{
 return x*x - y*y;
 }
}
vec3 sampleSide(mat3 rot)
{
 vec3 result = vec3(0.0);
 float divider = 0.0;
 for (int i = 0; i < TEXTURE_SIZE * TEXTURE_SIZE; i++) {
 float x = mod(float(i), float(TEXTURE_SIZE));
 float y = float(i / TEXTURE_SIZE);
 vec2 sidecoord = ((vec2(x, y) + vec2(0.5, 0.5)) / vec2(TEXTURE_SIZE)) * 2.0 - 1.0;
 vec3 normal = normalize(vec3(sidecoord, -1.0));
 vec3 fetchNormal = rot * normal;
 vec3 texel = textureCube(environmentMap, fetchNormal).rgb;
 result += harmonics(fetchNormal) * texel * -normal.z;
 divider += -normal.z;
 }
 return result / divider;
}
void main()
{
 vec3 result = (
 sampleSide(front) +
 sampleSide(back) +
 sampleSide(left) +
 sampleSide(right) +
 sampleSide(up) +
 sampleSide(down)
 ) / 6.0;
 gl_FragColor = vec4(result, 1.0);
}`,bs={},xa=["px","nx","py","ny","pz","nz"];function Zy(n,e){var o=new Gr({width:9,height:1,type:Mr.FLOAT}),u=new Gn({fragment:tp});u.material.define("fragment","TEXTURE_SIZE",e.width),u.setUniform("environmentMap",e);var c=new Kn;c.attach(o),u.render(n,c),c.bind(n);var v=new D.a.Float32Array(9*4);n.gl.readPixels(0,0,9,1,Mr.RGBA,Mr.FLOAT,v);for(var g=new D.a.Float32Array(9*3),x=0;x<9;x++)g[x*3]=v[x*4],g[x*3+1]=v[x*4+1],g[x*3+2]=v[x*4+2];return c.unbind(n),c.dispose(n),u.dispose(n),g}function ep(n,e){var o=n[0],u=n[1],c=n[2];return e===0?1:e===1?o:e===2?u:e===3?c:e===4?o*c:e===5?u*c:e===6?o*u:e===7?3*c*c-1:o*o-u*u}var Ss={px:[2,1,0,-1,-1,1],nx:[2,1,0,1,-1,-1],py:[0,2,1,1,-1,-1],ny:[0,2,1,1,1,1],pz:[0,1,2,-1,-1,-1],nz:[0,1,2,1,-1,1]};function nh(n,e,o,u){for(var c=new D.a.Float32Array(9*3),v=Te.create(),g=Te.create(),x=Te.create(),_=0;_<9;_++){for(var M=Te.create(),I=0;I<xa.length;I++){for(var F=e[xa[I]],ut=Te.create(),yt=0,Dt=0,Et=Ss[xa[I]],Pt=0;Pt<u;Pt++)for(var Ht=0;Ht<o;Ht++){v[0]=Ht/(o-1)*2-1,v[1]=Pt/(u-1)*2-1,v[2]=-1,Te.normalize(v,v),x[0]=v[Et[0]]*Et[3],x[1]=v[Et[1]]*Et[4],x[2]=v[Et[2]]*Et[5],g[0]=F[Dt++]/255,g[1]=F[Dt++]/255,g[2]=F[Dt++]/255;var $t=F[Dt++]/255*8.12;g[0]*=$t,g[1]*=$t,g[2]*=$t,Te.scaleAndAdd(ut,ut,g,ep(x,_)*-v[2]),yt+=-v[2]}Te.scaleAndAdd(M,M,ut,1/yt)}c[_*3]=M[0]/6,c[_*3+1]=M[1]/6,c[_*3+2]=M[2]/6}return c}bs.projectEnvironmentMap=function(n,e,o){o=o||{},o.lod=o.lod||0;var u,c=new ra,v=64;e.textureType==="texture2D"?u=new cu({scene:c,environmentMap:e}):(v=e.image&&e.image.px?e.image.px.width:e.width,u=new ms({scene:c,environmentMap:e}));var g=Math.ceil(v/Math.pow(2,o.lod)),x=Math.ceil(v/Math.pow(2,o.lod)),_=new Gr({width:g,height:x}),M=new Kn;u.material.define("fragment","RGBM_ENCODE"),o.decodeRGBM&&u.material.define("fragment","RGBM_DECODE"),u.material.set("lod",o.lod);for(var I=new An({texture:_}),F={},ut=0;ut<xa.length;ut++){F[xa[ut]]=new Uint8Array(g*x*4);var yt=I.getCamera(xa[ut]);yt.fov=90,M.attach(_),M.bind(n),n.render(c,yt),n.gl.readPixels(0,0,g,x,Mr.RGBA,Mr.UNSIGNED_BYTE,F[xa[ut]]),M.unbind(n)}return u.dispose(n),M.dispose(n),_.dispose(n),nh(n,F,g,x)};var rp=bs,np={firstNotNull:function(){for(var e=0,o=arguments.length;e<o;e++)if(arguments[e]!=null)return arguments[e]},queryDataIndex:function(e,o){if(o.dataIndexInside!=null)return o.dataIndexInside;if(o.dataIndex!=null)return B.Y.isArray(o.dataIndex)?B.Y.map(o.dataIndex,function(u){return e.indexOfRawIndex(u)}):e.indexOfRawIndex(o.dataIndex);if(o.name!=null)return B.Y.isArray(o.name)?B.Y.map(o.name,function(u){return e.indexOfName(u)}):e.indexOfName(o.name)}},Kr=np,ip=$r.extend({dynamic:!1,widthSegments:40,heightSegments:20,phiStart:0,phiLength:Math.PI*2,thetaStart:0,thetaLength:Math.PI,radius:1},function(){this.build()},{build:function(){var e=this.heightSegments,o=this.widthSegments,u=this.attributes.position,c=this.attributes.texcoord0,v=this.attributes.normal,g=(o+1)*(e+1);u.init(g),c.init(g),v.init(g);var x=g>65535?Uint32Array:Uint16Array,_=this.indices=new x(o*e*6),M,I,F,ut,yt,Dt,Et,Pt=this.radius,Ht=this.phiStart,$t=this.phiLength,qt=this.thetaStart,le=this.thetaLength,Pt=this.radius,ie=[],he=[],Re=0,ze=1/Pt;for(Et=0;Et<=e;Et++)for(Dt=0;Dt<=o;Dt++)ut=Dt/o,yt=Et/e,M=-Pt*Math.cos(Ht+ut*$t)*Math.sin(qt+yt*le),I=Pt*Math.cos(qt+yt*le),F=Pt*Math.sin(Ht+ut*$t)*Math.sin(qt+yt*le),ie[0]=M,ie[1]=I,ie[2]=F,he[0]=ut,he[1]=yt,u.set(Re,ie),c.set(Re,he),ie[0]*=ze,ie[1]*=ze,ie[2]*=ze,v.set(Re,ie),Re++;var Pe,Ke,rr,Ue,hr=o+1,ke=0;for(Et=0;Et<e;Et++)for(Dt=0;Dt<o;Dt++)Ke=Et*hr+Dt,Pe=Et*hr+Dt+1,Ue=(Et+1)*hr+Dt+1,rr=(Et+1)*hr+Dt,_[ke++]=Pe,_[ke++]=Ke,_[ke++]=Ue,_[ke++]=Ke,_[ke++]=rr,_[ke++]=Ue;this.boundingBox=new di,this.boundingBox.max.set(Pt,Pt,Pt),this.boundingBox.min.set(-Pt,-Pt,-Pt)}}),ap=ip,ih=zi.extend({castShadow:!1},{type:"AMBIENT_LIGHT",uniformTemplates:{ambientLightColor:{type:"3f",value:function(e){var o=e.color,u=e.intensity;return[o[0]*u,o[1]*u,o[2]*u]}}}}),Ef=ih,op=zi.extend({shadowBias:.001,shadowSlopeScale:2,shadowCascade:1,cascadeSplitLogFactor:.2},{type:"DIRECTIONAL_LIGHT",uniformTemplates:{directionalLightDirection:{type:"3f",value:function(e){return e.__dir=e.__dir||new or,e.__dir.copy(e.worldTransform.z).normalize().negate().array}},directionalLightColor:{type:"3f",value:function(e){var o=e.color,u=e.intensity;return[o[0]*u,o[1]*u,o[2]*u]}}},clone:function(){var e=zi.prototype.clone.call(this);return e.shadowBias=this.shadowBias,e.shadowSlopeScale=this.shadowSlopeScale,e}}),sp=op,lp=zi.extend({range:100,castShadow:!1},{type:"POINT_LIGHT",uniformTemplates:{pointLightPosition:{type:"3f",value:function(e){return e.getWorldPosition().array}},pointLightRange:{type:"1f",value:function(e){return e.range}},pointLightColor:{type:"3f",value:function(e){var o=e.color,u=e.intensity;return[o[0]*u,o[1]*u,o[2]*u]}}},clone:function(){var e=zi.prototype.clone.call(this);return e.range=this.range,e}}),up=lp,ah=zi.extend({range:20,umbraAngle:30,penumbraAngle:45,falloffFactor:2,shadowBias:.001,shadowSlopeScale:2},{type:"SPOT_LIGHT",uniformTemplates:{spotLightPosition:{type:"3f",value:function(e){return e.getWorldPosition().array}},spotLightRange:{type:"1f",value:function(e){return e.range}},spotLightUmbraAngleCosine:{type:"1f",value:function(e){return Math.cos(e.umbraAngle*Math.PI/180)}},spotLightPenumbraAngleCosine:{type:"1f",value:function(e){return Math.cos(e.penumbraAngle*Math.PI/180)}},spotLightFalloffFactor:{type:"1f",value:function(e){return e.falloffFactor}},spotLightDirection:{type:"3f",value:function(e){return e.__dir=e.__dir||new or,e.__dir.copy(e.worldTransform.z).negate().array}},spotLightColor:{type:"3f",value:function(e){var o=e.color,u=e.intensity;return[o[0]*u,o[1]*u,o[2]*u]}}},clone:function(){var e=zi.prototype.clone.call(this);return e.range=this.range,e.umbraAngle=this.umbraAngle,e.penumbraAngle=this.penumbraAngle,e.falloffFactor=this.falloffFactor,e.shadowBias=this.shadowBias,e.shadowSlopeScale=this.shadowSlopeScale,e}}),Wi=ah,Jr=function(e,o,u,c){e=e||0,o=o||0,u=u||0,c=c||0,this.array=dr.fromValues(e,o,u,c),this._dirty=!0};Jr.prototype={constructor:Jr,add:function(e){return dr.add(this.array,this.array,e.array),this._dirty=!0,this},set:function(e,o,u,c){return this.array[0]=e,this.array[1]=o,this.array[2]=u,this.array[3]=c,this._dirty=!0,this},setArray:function(e){return this.array[0]=e[0],this.array[1]=e[1],this.array[2]=e[2],this.array[3]=e[3],this._dirty=!0,this},clone:function(){return new Jr(this.x,this.y,this.z,this.w)},copy:function(e){return dr.copy(this.array,e.array),this._dirty=!0,this},dist:function(e){return dr.dist(this.array,e.array)},distance:function(e){return dr.distance(this.array,e.array)},div:function(e){return dr.div(this.array,this.array,e.array),this._dirty=!0,this},divide:function(e){return dr.divide(this.array,this.array,e.array),this._dirty=!0,this},dot:function(e){return dr.dot(this.array,e.array)},len:function(){return dr.len(this.array)},length:function(){return dr.length(this.array)},lerp:function(e,o,u){return dr.lerp(this.array,e.array,o.array,u),this._dirty=!0,this},min:function(e){return dr.min(this.array,this.array,e.array),this._dirty=!0,this},max:function(e){return dr.max(this.array,this.array,e.array),this._dirty=!0,this},mul:function(e){return dr.mul(this.array,this.array,e.array),this._dirty=!0,this},multiply:function(e){return dr.multiply(this.array,this.array,e.array),this._dirty=!0,this},negate:function(){return dr.negate(this.array,this.array),this._dirty=!0,this},normalize:function(){return dr.normalize(this.array,this.array),this._dirty=!0,this},random:function(e){return dr.random(this.array,e),this._dirty=!0,this},scale:function(e){return dr.scale(this.array,this.array,e),this._dirty=!0,this},scaleAndAdd:function(e,o){return dr.scaleAndAdd(this.array,this.array,e.array,o),this._dirty=!0,this},sqrDist:function(e){return dr.sqrDist(this.array,e.array)},squaredDistance:function(e){return dr.squaredDistance(this.array,e.array)},sqrLen:function(){return dr.sqrLen(this.array)},squaredLength:function(){return dr.squaredLength(this.array)},sub:function(e){return dr.sub(this.array,this.array,e.array),this._dirty=!0,this},subtract:function(e){return dr.subtract(this.array,this.array,e.array),this._dirty=!0,this},transformMat4:function(e){return dr.transformMat4(this.array,this.array,e.array),this._dirty=!0,this},transformQuat:function(e){return dr.transformQuat(this.array,this.array,e.array),this._dirty=!0,this},toString:function(){return"["+Array.prototype.join.call(this.array,",")+"]"},toArray:function(){return Array.prototype.slice.call(this.array)}};var _s=Object.defineProperty;if(_s){var du=Jr.prototype;_s(du,"x",{get:function(){return this.array[0]},set:function(e){this.array[0]=e,this._dirty=!0}}),_s(du,"y",{get:function(){return this.array[1]},set:function(e){this.array[1]=e,this._dirty=!0}}),_s(du,"z",{get:function(){return this.array[2]},set:function(e){this.array[2]=e,this._dirty=!0}}),_s(du,"w",{get:function(){return this.array[3]},set:function(e){this.array[3]=e,this._dirty=!0}})}Jr.add=function(n,e,o){return dr.add(n.array,e.array,o.array),n._dirty=!0,n},Jr.set=function(n,e,o,u,c){dr.set(n.array,e,o,u,c),n._dirty=!0},Jr.copy=function(n,e){return dr.copy(n.array,e.array),n._dirty=!0,n},Jr.dist=function(n,e){return dr.distance(n.array,e.array)},Jr.distance=Jr.dist,Jr.div=function(n,e,o){return dr.divide(n.array,e.array,o.array),n._dirty=!0,n},Jr.divide=Jr.div,Jr.dot=function(n,e){return dr.dot(n.array,e.array)},Jr.len=function(n){return dr.length(n.array)},Jr.lerp=function(n,e,o,u){return dr.lerp(n.array,e.array,o.array,u),n._dirty=!0,n},Jr.min=function(n,e,o){return dr.min(n.array,e.array,o.array),n._dirty=!0,n},Jr.max=function(n,e,o){return dr.max(n.array,e.array,o.array),n._dirty=!0,n},Jr.mul=function(n,e,o){return dr.multiply(n.array,e.array,o.array),n._dirty=!0,n},Jr.multiply=Jr.mul,Jr.negate=function(n,e){return dr.negate(n.array,e.array),n._dirty=!0,n},Jr.normalize=function(n,e){return dr.normalize(n.array,e.array),n._dirty=!0,n},Jr.random=function(n,e){return dr.random(n.array,e),n._dirty=!0,n},Jr.scale=function(n,e,o){return dr.scale(n.array,e.array,o),n._dirty=!0,n},Jr.scaleAndAdd=function(n,e,o,u){return dr.scaleAndAdd(n.array,e.array,o.array,u),n._dirty=!0,n},Jr.sqrDist=function(n,e){return dr.sqrDist(n.array,e.array)},Jr.squaredDistance=Jr.sqrDist,Jr.sqrLen=function(n){return dr.sqrLen(n.array)},Jr.squaredLength=Jr.sqrLen,Jr.sub=function(n,e,o){return dr.subtract(n.array,e.array,o.array),n._dirty=!0,n},Jr.subtract=Jr.sub,Jr.transformMat4=function(n,e,o){return dr.transformMat4(n.array,e.array,o.array),n._dirty=!0,n},Jr.transformQuat=function(n,e,o){return dr.transformQuat(n.array,e.array,o.array),n._dirty=!0,n};var fp=Jr,mi={};mi.create=function(){var n=new De(4);return n[0]=1,n[1]=0,n[2]=0,n[3]=1,n},mi.clone=function(n){var e=new De(4);return e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e},mi.copy=function(n,e){return n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=e[3],n},mi.identity=function(n){return n[0]=1,n[1]=0,n[2]=0,n[3]=1,n},mi.transpose=function(n,e){if(n===e){var o=e[1];n[1]=e[2],n[2]=o}else n[0]=e[0],n[1]=e[2],n[2]=e[1],n[3]=e[3];return n},mi.invert=function(n,e){var o=e[0],u=e[1],c=e[2],v=e[3],g=o*v-c*u;return g?(g=1/g,n[0]=v*g,n[1]=-u*g,n[2]=-c*g,n[3]=o*g,n):null},mi.adjoint=function(n,e){var o=e[0];return n[0]=e[3],n[1]=-e[1],n[2]=-e[2],n[3]=o,n},mi.determinant=function(n){return n[0]*n[3]-n[2]*n[1]},mi.multiply=function(n,e,o){var u=e[0],c=e[1],v=e[2],g=e[3],x=o[0],_=o[1],M=o[2],I=o[3];return n[0]=u*x+v*_,n[1]=c*x+g*_,n[2]=u*M+v*I,n[3]=c*M+g*I,n},mi.mul=mi.multiply,mi.rotate=function(n,e,o){var u=e[0],c=e[1],v=e[2],g=e[3],x=Math.sin(o),_=Math.cos(o);return n[0]=u*_+v*x,n[1]=c*_+g*x,n[2]=u*-x+v*_,n[3]=c*-x+g*_,n},mi.scale=function(n,e,o){var u=e[0],c=e[1],v=e[2],g=e[3],x=o[0],_=o[1];return n[0]=u*x,n[1]=c*x,n[2]=v*_,n[3]=g*_,n},mi.frob=function(n){return Math.sqrt(Math.pow(n[0],2)+Math.pow(n[1],2)+Math.pow(n[2],2)+Math.pow(n[3],2))},mi.LDU=function(n,e,o,u){return n[2]=u[2]/u[0],o[0]=u[0],o[1]=u[1],o[3]=u[3]-n[2]*o[1],[n,e,o]};var Dn=mi,Li=function(){this.array=Dn.create(),this._dirty=!0};Li.prototype={constructor:Li,setArray:function(e){for(var o=0;o<this.array.length;o++)this.array[o]=e[o];return this._dirty=!0,this},clone:function(){return new Li().copy(this)},copy:function(e){return Dn.copy(this.array,e.array),this._dirty=!0,this},adjoint:function(){return Dn.adjoint(this.array,this.array),this._dirty=!0,this},determinant:function(){return Dn.determinant(this.array)},identity:function(){return Dn.identity(this.array),this._dirty=!0,this},invert:function(){return Dn.invert(this.array,this.array),this._dirty=!0,this},mul:function(e){return Dn.mul(this.array,this.array,e.array),this._dirty=!0,this},mulLeft:function(e){return Dn.mul(this.array,e.array,this.array),this._dirty=!0,this},multiply:function(e){return Dn.multiply(this.array,this.array,e.array),this._dirty=!0,this},multiplyLeft:function(e){return Dn.multiply(this.array,e.array,this.array),this._dirty=!0,this},rotate:function(e){return Dn.rotate(this.array,this.array,e),this._dirty=!0,this},scale:function(e){return Dn.scale(this.array,this.array,e.array),this._dirty=!0,this},transpose:function(){return Dn.transpose(this.array,this.array),this._dirty=!0,this},toString:function(){return"["+Array.prototype.join.call(this.array,",")+"]"},toArray:function(){return Array.prototype.slice.call(this.array)}},Li.adjoint=function(n,e){return Dn.adjoint(n.array,e.array),n._dirty=!0,n},Li.copy=function(n,e){return Dn.copy(n.array,e.array),n._dirty=!0,n},Li.determinant=function(n){return Dn.determinant(n.array)},Li.identity=function(n){return Dn.identity(n.array),n._dirty=!0,n},Li.invert=function(n,e){return Dn.invert(n.array,e.array),n._dirty=!0,n},Li.mul=function(n,e,o){return Dn.mul(n.array,e.array,o.array),n._dirty=!0,n},Li.multiply=Li.mul,Li.rotate=function(n,e,o){return Dn.rotate(n.array,e.array,o),n._dirty=!0,n},Li.scale=function(n,e,o){return Dn.scale(n.array,e.array,o.array),n._dirty=!0,n},Li.transpose=function(n,e){return Dn.transpose(n.array,e.array),n._dirty=!0,n};var Lf=Li,Pi={};Pi.create=function(){var n=new De(6);return n[0]=1,n[1]=0,n[2]=0,n[3]=1,n[4]=0,n[5]=0,n},Pi.clone=function(n){var e=new De(6);return e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e[4]=n[4],e[5]=n[5],e},Pi.copy=function(n,e){return n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=e[3],n[4]=e[4],n[5]=e[5],n},Pi.identity=function(n){return n[0]=1,n[1]=0,n[2]=0,n[3]=1,n[4]=0,n[5]=0,n},Pi.invert=function(n,e){var o=e[0],u=e[1],c=e[2],v=e[3],g=e[4],x=e[5],_=o*v-u*c;return _?(_=1/_,n[0]=v*_,n[1]=-u*_,n[2]=-c*_,n[3]=o*_,n[4]=(c*x-v*g)*_,n[5]=(u*g-o*x)*_,n):null},Pi.determinant=function(n){return n[0]*n[3]-n[1]*n[2]},Pi.multiply=function(n,e,o){var u=e[0],c=e[1],v=e[2],g=e[3],x=e[4],_=e[5],M=o[0],I=o[1],F=o[2],ut=o[3],yt=o[4],Dt=o[5];return n[0]=u*M+v*I,n[1]=c*M+g*I,n[2]=u*F+v*ut,n[3]=c*F+g*ut,n[4]=u*yt+v*Dt+x,n[5]=c*yt+g*Dt+_,n},Pi.mul=Pi.multiply,Pi.rotate=function(n,e,o){var u=e[0],c=e[1],v=e[2],g=e[3],x=e[4],_=e[5],M=Math.sin(o),I=Math.cos(o);return n[0]=u*I+v*M,n[1]=c*I+g*M,n[2]=u*-M+v*I,n[3]=c*-M+g*I,n[4]=x,n[5]=_,n},Pi.scale=function(n,e,o){var u=e[0],c=e[1],v=e[2],g=e[3],x=e[4],_=e[5],M=o[0],I=o[1];return n[0]=u*M,n[1]=c*M,n[2]=v*I,n[3]=g*I,n[4]=x,n[5]=_,n},Pi.translate=function(n,e,o){var u=e[0],c=e[1],v=e[2],g=e[3],x=e[4],_=e[5],M=o[0],I=o[1];return n[0]=u,n[1]=c,n[2]=v,n[3]=g,n[4]=u*M+v*I+x,n[5]=c*M+g*I+_,n},Pi.frob=function(n){return Math.sqrt(Math.pow(n[0],2)+Math.pow(n[1],2)+Math.pow(n[2],2)+Math.pow(n[3],2)+Math.pow(n[4],2)+Math.pow(n[5],2)+1)};var In=Pi,oi=function(){this.array=In.create(),this._dirty=!0};oi.prototype={constructor:oi,setArray:function(e){for(var o=0;o<this.array.length;o++)this.array[o]=e[o];return this._dirty=!0,this},clone:function(){return new oi().copy(this)},copy:function(e){return In.copy(this.array,e.array),this._dirty=!0,this},determinant:function(){return In.determinant(this.array)},identity:function(){return In.identity(this.array),this._dirty=!0,this},invert:function(){return In.invert(this.array,this.array),this._dirty=!0,this},mul:function(e){return In.mul(this.array,this.array,e.array),this._dirty=!0,this},mulLeft:function(e){return In.mul(this.array,e.array,this.array),this._dirty=!0,this},multiply:function(e){return In.multiply(this.array,this.array,e.array),this._dirty=!0,this},multiplyLeft:function(e){return In.multiply(this.array,e.array,this.array),this._dirty=!0,this},rotate:function(e){return In.rotate(this.array,this.array,e),this._dirty=!0,this},scale:function(e){return In.scale(this.array,this.array,e.array),this._dirty=!0,this},translate:function(e){return In.translate(this.array,this.array,e.array),this._dirty=!0,this},toString:function(){return"["+Array.prototype.join.call(this.array,",")+"]"},toArray:function(){return Array.prototype.slice.call(this.array)}},oi.copy=function(n,e){return In.copy(n.array,e.array),n._dirty=!0,n},oi.determinant=function(n){return In.determinant(n.array)},oi.identity=function(n){return In.identity(n.array),n._dirty=!0,n},oi.invert=function(n,e){return In.invert(n.array,e.array),n._dirty=!0,n},oi.mul=function(n,e,o){return In.mul(n.array,e.array,o.array),n._dirty=!0,n},oi.multiply=oi.mul,oi.rotate=function(n,e,o){return In.rotate(n.array,e.array,o),n._dirty=!0,n},oi.scale=function(n,e,o){return In.scale(n.array,e.array,o.array),n._dirty=!0,n},oi.translate=function(n,e,o){return In.translate(n.array,e.array,o.array),n._dirty=!0,n};var Pf=oi,Un=function(){this.array=Fr.create(),this._dirty=!0};Un.prototype={constructor:Un,setArray:function(e){for(var o=0;o<this.array.length;o++)this.array[o]=e[o];return this._dirty=!0,this},adjoint:function(){return Fr.adjoint(this.array,this.array),this._dirty=!0,this},clone:function(){return new Un().copy(this)},copy:function(e){return Fr.copy(this.array,e.array),this._dirty=!0,this},determinant:function(){return Fr.determinant(this.array)},fromMat2d:function(e){return Fr.fromMat2d(this.array,e.array),this._dirty=!0,this},fromMat4:function(e){return Fr.fromMat4(this.array,e.array),this._dirty=!0,this},fromQuat:function(e){return Fr.fromQuat(this.array,e.array),this._dirty=!0,this},identity:function(){return Fr.identity(this.array),this._dirty=!0,this},invert:function(){return Fr.invert(this.array,this.array),this._dirty=!0,this},mul:function(e){return Fr.mul(this.array,this.array,e.array),this._dirty=!0,this},mulLeft:function(e){return Fr.mul(this.array,e.array,this.array),this._dirty=!0,this},multiply:function(e){return Fr.multiply(this.array,this.array,e.array),this._dirty=!0,this},multiplyLeft:function(e){return Fr.multiply(this.array,e.array,this.array),this._dirty=!0,this},rotate:function(e){return Fr.rotate(this.array,this.array,e),this._dirty=!0,this},scale:function(e){return Fr.scale(this.array,this.array,e.array),this._dirty=!0,this},translate:function(e){return Fr.translate(this.array,this.array,e.array),this._dirty=!0,this},normalFromMat4:function(e){return Fr.normalFromMat4(this.array,e.array),this._dirty=!0,this},transpose:function(){return Fr.transpose(this.array,this.array),this._dirty=!0,this},toString:function(){return"["+Array.prototype.join.call(this.array,",")+"]"},toArray:function(){return Array.prototype.slice.call(this.array)}},Un.adjoint=function(n,e){return Fr.adjoint(n.array,e.array),n._dirty=!0,n},Un.copy=function(n,e){return Fr.copy(n.array,e.array),n._dirty=!0,n},Un.determinant=function(n){return Fr.determinant(n.array)},Un.identity=function(n){return Fr.identity(n.array),n._dirty=!0,n},Un.invert=function(n,e){return Fr.invert(n.array,e.array),n},Un.mul=function(n,e,o){return Fr.mul(n.array,e.array,o.array),n._dirty=!0,n},Un.multiply=Un.mul,Un.fromMat2d=function(n,e){return Fr.fromMat2d(n.array,e.array),n._dirty=!0,n},Un.fromMat4=function(n,e){return Fr.fromMat4(n.array,e.array),n._dirty=!0,n},Un.fromQuat=function(n,e){return Fr.fromQuat(n.array,e.array),n._dirty=!0,n},Un.normalFromMat4=function(n,e){return Fr.normalFromMat4(n.array,e.array),n._dirty=!0,n},Un.rotate=function(n,e,o){return Fr.rotate(n.array,e.array,o),n._dirty=!0,n},Un.scale=function(n,e,o){return Fr.scale(n.array,e.array,o.array),n._dirty=!0,n},Un.transpose=function(n,e){return Fr.transpose(n.array,e.array),n._dirty=!0,n},Un.translate=function(n,e,o){return Fr.translate(n.array,e.array,o.array),n._dirty=!0,n};var cp=Un,pu=S("Bq2U"),hp={_animators:null,getAnimators:function(){return this._animators=this._animators||[],this._animators},animate:function(e,o){this._animators=this._animators||[];var u=this,c;if(e){for(var v=e.split("."),g=u,x=0,_=v.length;x<_;x++)!g||(g=g[v[x]]);g&&(c=g)}else c=u;if(c==null)throw new Error("Target "+e+" not exists");var M=this._animators,I=new pu.b(c,o),F=this;return I.during(function(){F.__zr&&F.__zr.refresh()}).done(function(){var ut=M.indexOf(I);ut>=0&&M.splice(ut,1)}),M.push(I),this.__zr&&this.__zr.animation.addAnimator(I),I},stopAnimation:function(e){this._animators=this._animators||[];for(var o=this._animators,u=o.length,c=0;c<u;c++)o[c].stop(e);return o.length=0,this},addAnimatorsToZr:function(e){if(this._animators)for(var o=0;o<this._animators.length;o++)e.animation.addAnimator(this._animators[o])},removeAnimatorsFromZr:function(e){if(this._animators)for(var o=0;o<this._animators.length;o++)e.animation.removeAnimator(this._animators[o])}},Yo=hp,gu=`
@export clay.util.rand
highp float rand(vec2 uv) {
 const highp float a = 12.9898, b = 78.233, c = 43758.5453;
 highp float dt = dot(uv.xy, vec2(a,b)), sn = mod(dt, 3.141592653589793);
 return fract(sin(sn) * c);
}
@end
@export clay.util.calculate_attenuation
uniform float attenuationFactor : 5.0;
float lightAttenuation(float dist, float range)
{
 float attenuation = 1.0;
 attenuation = dist*dist/(range*range+1.0);
 float att_s = attenuationFactor;
 attenuation = 1.0/(attenuation*att_s+1.0);
 att_s = 1.0/(att_s+1.0);
 attenuation = attenuation - att_s;
 attenuation /= 1.0 - att_s;
 return clamp(attenuation, 0.0, 1.0);
}
@end
@export clay.util.edge_factor
#ifdef SUPPORT_STANDARD_DERIVATIVES
float edgeFactor(float width)
{
 vec3 d = fwidth(v_Barycentric);
 vec3 a3 = smoothstep(vec3(0.0), d * width, v_Barycentric);
 return min(min(a3.x, a3.y), a3.z);
}
#else
float edgeFactor(float width)
{
 return 1.0;
}
#endif
@end
@export clay.util.encode_float
vec4 encodeFloat(const in float depth)
{
 const vec4 bitShifts = vec4(256.0*256.0*256.0, 256.0*256.0, 256.0, 1.0);
 const vec4 bit_mask = vec4(0.0, 1.0/256.0, 1.0/256.0, 1.0/256.0);
 vec4 res = fract(depth * bitShifts);
 res -= res.xxyz * bit_mask;
 return res;
}
@end
@export clay.util.decode_float
float decodeFloat(const in vec4 color)
{
 const vec4 bitShifts = vec4(1.0/(256.0*256.0*256.0), 1.0/(256.0*256.0), 1.0/256.0, 1.0);
 return dot(color, bitShifts);
}
@end
@export clay.util.float
@import clay.util.encode_float
@import clay.util.decode_float
@end
@export clay.util.rgbm_decode
vec3 RGBMDecode(vec4 rgbm, float range) {
 return range * rgbm.rgb * rgbm.a;
}
@end
@export clay.util.rgbm_encode
vec4 RGBMEncode(vec3 color, float range) {
 if (dot(color, color) == 0.0) {
 return vec4(0.0);
 }
 vec4 rgbm;
 color /= range;
 rgbm.a = clamp(max(max(color.r, color.g), max(color.b, 1e-6)), 0.0, 1.0);
 rgbm.a = ceil(rgbm.a * 255.0) / 255.0;
 rgbm.rgb = color / rgbm.a;
 return rgbm;
}
@end
@export clay.util.rgbm
@import clay.util.rgbm_decode
@import clay.util.rgbm_encode
vec4 decodeHDR(vec4 color)
{
#if defined(RGBM_DECODE) || defined(RGBM)
 return vec4(RGBMDecode(color, 8.12), 1.0);
#else
 return color;
#endif
}
vec4 encodeHDR(vec4 color)
{
#if defined(RGBM_ENCODE) || defined(RGBM)
 return RGBMEncode(color.xyz, 8.12);
#else
 return color;
#endif
}
@end
@export clay.util.srgb
vec4 sRGBToLinear(in vec4 value) {
 return vec4(mix(pow(value.rgb * 0.9478672986 + vec3(0.0521327014), vec3(2.4)), value.rgb * 0.0773993808, vec3(lessThanEqual(value.rgb, vec3(0.04045)))), value.w);
}
vec4 linearTosRGB(in vec4 value) {
 return vec4(mix(pow(value.rgb, vec3(0.41666)) * 1.055 - vec3(0.055), value.rgb * 12.92, vec3(lessThanEqual(value.rgb, vec3(0.0031308)))), value.w);
}
@end
@export clay.chunk.skinning_header
#ifdef SKINNING
attribute vec3 weight : WEIGHT;
attribute vec4 joint : JOINT;
#ifdef USE_SKIN_MATRICES_TEXTURE
uniform sampler2D skinMatricesTexture : ignore;
uniform float skinMatricesTextureSize: ignore;
mat4 getSkinMatrix(sampler2D tex, float idx) {
 float j = idx * 4.0;
 float x = mod(j, skinMatricesTextureSize);
 float y = floor(j / skinMatricesTextureSize) + 0.5;
 vec2 scale = vec2(skinMatricesTextureSize);
 return mat4(
 texture2D(tex, vec2(x + 0.5, y) / scale),
 texture2D(tex, vec2(x + 1.5, y) / scale),
 texture2D(tex, vec2(x + 2.5, y) / scale),
 texture2D(tex, vec2(x + 3.5, y) / scale)
 );
}
mat4 getSkinMatrix(float idx) {
 return getSkinMatrix(skinMatricesTexture, idx);
}
#else
uniform mat4 skinMatrix[JOINT_COUNT] : SKIN_MATRIX;
mat4 getSkinMatrix(float idx) {
 return skinMatrix[int(idx)];
}
#endif
#endif
@end
@export clay.chunk.skin_matrix
mat4 skinMatrixWS = getSkinMatrix(joint.x) * weight.x;
if (weight.y > 1e-4)
{
 skinMatrixWS += getSkinMatrix(joint.y) * weight.y;
}
if (weight.z > 1e-4)
{
 skinMatrixWS += getSkinMatrix(joint.z) * weight.z;
}
float weightW = 1.0-weight.x-weight.y-weight.z;
if (weightW > 1e-4)
{
 skinMatrixWS += getSkinMatrix(joint.w) * weightW;
}
@end
@export clay.chunk.instancing_header
#ifdef INSTANCING
attribute vec4 instanceMat1;
attribute vec4 instanceMat2;
attribute vec4 instanceMat3;
#endif
@end
@export clay.chunk.instancing_matrix
mat4 instanceMat = mat4(
 vec4(instanceMat1.xyz, 0.0),
 vec4(instanceMat2.xyz, 0.0),
 vec4(instanceMat3.xyz, 0.0),
 vec4(instanceMat1.w, instanceMat2.w, instanceMat3.w, 1.0)
);
@end
@export clay.util.parallax_correct
vec3 parallaxCorrect(in vec3 dir, in vec3 pos, in vec3 boxMin, in vec3 boxMax) {
 vec3 first = (boxMax - pos) / dir;
 vec3 second = (boxMin - pos) / dir;
 vec3 further = max(first, second);
 float dist = min(further.x, min(further.y, further.z));
 vec3 fixedPos = pos + dir * dist;
 vec3 boxCenter = (boxMax + boxMin) * 0.5;
 return normalize(fixedPos - boxCenter);
}
@end
@export clay.util.clamp_sample
vec4 clampSample(const in sampler2D texture, const in vec2 coord)
{
#ifdef STEREO
 float eye = step(0.5, coord.x) * 0.5;
 vec2 coordClamped = clamp(coord, vec2(eye, 0.0), vec2(0.5 + eye, 1.0));
#else
 vec2 coordClamped = clamp(coord, vec2(0.0), vec2(1.0));
#endif
 return texture2D(texture, coordClamped);
}
@end
@export clay.util.ACES
vec3 ACESToneMapping(vec3 color)
{
 const float A = 2.51;
 const float B = 0.03;
 const float C = 2.43;
 const float D = 0.59;
 const float E = 0.14;
 return (color * (A * color + B)) / (color * (C * color + D) + E);
}
@end`,mu=`
@export ecgl.common.transformUniforms
uniform mat4 worldViewProjection : WORLDVIEWPROJECTION;
uniform mat4 worldInverseTranspose : WORLDINVERSETRANSPOSE;
uniform mat4 world : WORLD;
@end

@export ecgl.common.attributes
attribute vec3 position : POSITION;
attribute vec2 texcoord : TEXCOORD_0;
attribute vec3 normal : NORMAL;
@end

@export ecgl.common.uv.header
uniform vec2 uvRepeat : [1.0, 1.0];
uniform vec2 uvOffset : [0.0, 0.0];
uniform vec2 detailUvRepeat : [1.0, 1.0];
uniform vec2 detailUvOffset : [0.0, 0.0];

varying vec2 v_Texcoord;
varying vec2 v_DetailTexcoord;
@end

@export ecgl.common.uv.main
v_Texcoord = texcoord * uvRepeat + uvOffset;
v_DetailTexcoord = texcoord * detailUvRepeat + detailUvOffset;
@end

@export ecgl.common.uv.fragmentHeader
varying vec2 v_Texcoord;
varying vec2 v_DetailTexcoord;
@end


@export ecgl.common.albedo.main

 vec4 albedoTexel = vec4(1.0);
#ifdef DIFFUSEMAP_ENABLED
 albedoTexel = texture2D(diffuseMap, v_Texcoord);
 #ifdef SRGB_DECODE
 albedoTexel = sRGBToLinear(albedoTexel);
 #endif
#endif

#ifdef DETAILMAP_ENABLED
 vec4 detailTexel = texture2D(detailMap, v_DetailTexcoord);
 #ifdef SRGB_DECODE
 detailTexel = sRGBToLinear(detailTexel);
 #endif
 albedoTexel.rgb = mix(albedoTexel.rgb, detailTexel.rgb, detailTexel.a);
 albedoTexel.a = detailTexel.a + (1.0 - detailTexel.a) * albedoTexel.a;
#endif

@end

@export ecgl.common.wireframe.vertexHeader

#ifdef WIREFRAME_QUAD
attribute vec4 barycentric;
varying vec4 v_Barycentric;
#elif defined(WIREFRAME_TRIANGLE)
attribute vec3 barycentric;
varying vec3 v_Barycentric;
#endif

@end

@export ecgl.common.wireframe.vertexMain

#if defined(WIREFRAME_QUAD) || defined(WIREFRAME_TRIANGLE)
 v_Barycentric = barycentric;
#endif

@end


@export ecgl.common.wireframe.fragmentHeader

uniform float wireframeLineWidth : 1;
uniform vec4 wireframeLineColor: [0, 0, 0, 0.5];

#ifdef WIREFRAME_QUAD
varying vec4 v_Barycentric;
float edgeFactor () {
 vec4 d = fwidth(v_Barycentric);
 vec4 a4 = smoothstep(vec4(0.0), d * wireframeLineWidth, v_Barycentric);
 return min(min(min(a4.x, a4.y), a4.z), a4.w);
}
#elif defined(WIREFRAME_TRIANGLE)
varying vec3 v_Barycentric;
float edgeFactor () {
 vec3 d = fwidth(v_Barycentric);
 vec3 a3 = smoothstep(vec3(0.0), d * wireframeLineWidth, v_Barycentric);
 return min(min(a3.x, a3.y), a3.z);
}
#endif

@end


@export ecgl.common.wireframe.fragmentMain

#if defined(WIREFRAME_QUAD) || defined(WIREFRAME_TRIANGLE)
 if (wireframeLineWidth > 0.) {
 vec4 lineColor = wireframeLineColor;
#ifdef SRGB_DECODE
 lineColor = sRGBToLinear(lineColor);
#endif

 gl_FragColor.rgb = mix(gl_FragColor.rgb, lineColor.rgb, (1.0 - edgeFactor()) * lineColor.a);
 }
#endif
@end




@export ecgl.common.bumpMap.header

#ifdef BUMPMAP_ENABLED
uniform sampler2D bumpMap;
uniform float bumpScale : 1.0;


vec3 bumpNormal(vec3 surfPos, vec3 surfNormal, vec3 baseNormal)
{
 vec2 dSTdx = dFdx(v_Texcoord);
 vec2 dSTdy = dFdy(v_Texcoord);

 float Hll = bumpScale * texture2D(bumpMap, v_Texcoord).x;
 float dHx = bumpScale * texture2D(bumpMap, v_Texcoord + dSTdx).x - Hll;
 float dHy = bumpScale * texture2D(bumpMap, v_Texcoord + dSTdy).x - Hll;

 vec3 vSigmaX = dFdx(surfPos);
 vec3 vSigmaY = dFdy(surfPos);
 vec3 vN = surfNormal;

 vec3 R1 = cross(vSigmaY, vN);
 vec3 R2 = cross(vN, vSigmaX);

 float fDet = dot(vSigmaX, R1);

 vec3 vGrad = sign(fDet) * (dHx * R1 + dHy * R2);
 return normalize(abs(fDet) * baseNormal - vGrad);

}
#endif

@end

@export ecgl.common.normalMap.vertexHeader

#ifdef NORMALMAP_ENABLED
attribute vec4 tangent : TANGENT;
varying vec3 v_Tangent;
varying vec3 v_Bitangent;
#endif

@end

@export ecgl.common.normalMap.vertexMain

#ifdef NORMALMAP_ENABLED
 if (dot(tangent, tangent) > 0.0) {
 v_Tangent = normalize((worldInverseTranspose * vec4(tangent.xyz, 0.0)).xyz);
 v_Bitangent = normalize(cross(v_Normal, v_Tangent) * tangent.w);
 }
#endif

@end


@export ecgl.common.normalMap.fragmentHeader

#ifdef NORMALMAP_ENABLED
uniform sampler2D normalMap;
varying vec3 v_Tangent;
varying vec3 v_Bitangent;
#endif

@end

@export ecgl.common.normalMap.fragmentMain
#ifdef NORMALMAP_ENABLED
 if (dot(v_Tangent, v_Tangent) > 0.0) {
 vec3 normalTexel = texture2D(normalMap, v_DetailTexcoord).xyz;
 if (dot(normalTexel, normalTexel) > 0.0) { N = normalTexel * 2.0 - 1.0;
 mat3 tbn = mat3(v_Tangent, v_Bitangent, v_Normal);
 N = normalize(tbn * N);
 }
 }
#endif
@end



@export ecgl.common.vertexAnimation.header

#ifdef VERTEX_ANIMATION
attribute vec3 prevPosition;
attribute vec3 prevNormal;
uniform float percent;
#endif

@end

@export ecgl.common.vertexAnimation.main

#ifdef VERTEX_ANIMATION
 vec3 pos = mix(prevPosition, position, percent);
 vec3 norm = mix(prevNormal, normal, percent);
#else
 vec3 pos = position;
 vec3 norm = normal;
#endif

@end


@export ecgl.common.ssaoMap.header
#ifdef SSAOMAP_ENABLED
uniform sampler2D ssaoMap;
uniform vec4 viewport : VIEWPORT;
#endif
@end

@export ecgl.common.ssaoMap.main
 float ao = 1.0;
#ifdef SSAOMAP_ENABLED
 ao = texture2D(ssaoMap, (gl_FragCoord.xy - viewport.xy) / viewport.zw).r;
#endif
@end




@export ecgl.common.diffuseLayer.header

#if (LAYER_DIFFUSEMAP_COUNT > 0)
uniform float layerDiffuseIntensity[LAYER_DIFFUSEMAP_COUNT];
uniform sampler2D layerDiffuseMap[LAYER_DIFFUSEMAP_COUNT];
#endif

@end

@export ecgl.common.emissiveLayer.header

#if (LAYER_EMISSIVEMAP_COUNT > 0)
uniform float layerEmissionIntensity[LAYER_EMISSIVEMAP_COUNT];
uniform sampler2D layerEmissiveMap[LAYER_EMISSIVEMAP_COUNT];
#endif

@end

@export ecgl.common.layers.header
@import ecgl.common.diffuseLayer.header
@import ecgl.common.emissiveLayer.header
@end

@export ecgl.common.diffuseLayer.main

#if (LAYER_DIFFUSEMAP_COUNT > 0)
 for (int _idx_ = 0; _idx_ < LAYER_DIFFUSEMAP_COUNT; _idx_++) {{
 float intensity = layerDiffuseIntensity[_idx_];
 vec4 texel2 = texture2D(layerDiffuseMap[_idx_], v_Texcoord);
 #ifdef SRGB_DECODE
 texel2 = sRGBToLinear(texel2);
 #endif
 albedoTexel.rgb = mix(albedoTexel.rgb, texel2.rgb * intensity, texel2.a);
 albedoTexel.a = texel2.a + (1.0 - texel2.a) * albedoTexel.a;
 }}
#endif

@end

@export ecgl.common.emissiveLayer.main

#if (LAYER_EMISSIVEMAP_COUNT > 0)
 for (int _idx_ = 0; _idx_ < LAYER_EMISSIVEMAP_COUNT; _idx_++)
 {{
 vec4 texel2 = texture2D(layerEmissiveMap[_idx_], v_Texcoord) * layerEmissionIntensity[_idx_];
 #ifdef SRGB_DECODE
 texel2 = sRGBToLinear(texel2);
 #endif
 float intensity = layerEmissionIntensity[_idx_];
 gl_FragColor.rgb += texel2.rgb * texel2.a * intensity;
 }}
#endif

@end
`,wf=`@export ecgl.color.vertex

uniform mat4 worldViewProjection : WORLDVIEWPROJECTION;

@import ecgl.common.uv.header

attribute vec2 texcoord : TEXCOORD_0;
attribute vec3 position: POSITION;

@import ecgl.common.wireframe.vertexHeader

#ifdef VERTEX_COLOR
attribute vec4 a_Color : COLOR;
varying vec4 v_Color;
#endif

#ifdef VERTEX_ANIMATION
attribute vec3 prevPosition;
uniform float percent : 1.0;
#endif

#ifdef ATMOSPHERE_ENABLED
attribute vec3 normal: NORMAL;
uniform mat4 worldInverseTranspose : WORLDINVERSETRANSPOSE;
varying vec3 v_Normal;
#endif

void main()
{
#ifdef VERTEX_ANIMATION
 vec3 pos = mix(prevPosition, position, percent);
#else
 vec3 pos = position;
#endif

 gl_Position = worldViewProjection * vec4(pos, 1.0);

 @import ecgl.common.uv.main

#ifdef VERTEX_COLOR
 v_Color = a_Color;
#endif

#ifdef ATMOSPHERE_ENABLED
 v_Normal = normalize((worldInverseTranspose * vec4(normal, 0.0)).xyz);
#endif

 @import ecgl.common.wireframe.vertexMain

}

@end

@export ecgl.color.fragment

#define LAYER_DIFFUSEMAP_COUNT 0
#define LAYER_EMISSIVEMAP_COUNT 0

uniform sampler2D diffuseMap;
uniform sampler2D detailMap;

uniform vec4 color : [1.0, 1.0, 1.0, 1.0];

#ifdef ATMOSPHERE_ENABLED
uniform mat4 viewTranspose: VIEWTRANSPOSE;
uniform vec3 glowColor;
uniform float glowPower;
varying vec3 v_Normal;
#endif

#ifdef VERTEX_COLOR
varying vec4 v_Color;
#endif

@import ecgl.common.layers.header

@import ecgl.common.uv.fragmentHeader

@import ecgl.common.wireframe.fragmentHeader

@import clay.util.srgb

void main()
{
#ifdef SRGB_DECODE
 gl_FragColor = sRGBToLinear(color);
#else
 gl_FragColor = color;
#endif

#ifdef VERTEX_COLOR
 gl_FragColor *= v_Color;
#endif

 @import ecgl.common.albedo.main

 @import ecgl.common.diffuseLayer.main

 gl_FragColor *= albedoTexel;

#ifdef ATMOSPHERE_ENABLED
 float atmoIntensity = pow(1.0 - dot(v_Normal, (viewTranspose * vec4(0.0, 0.0, 1.0, 0.0)).xyz), glowPower);
 gl_FragColor.rgb += glowColor * atmoIntensity;
#endif

 @import ecgl.common.emissiveLayer.main

 @import ecgl.common.wireframe.fragmentMain

}
@end`,vp=`/**
 * http: */

@export ecgl.lambert.vertex

@import ecgl.common.transformUniforms

@import ecgl.common.uv.header


@import ecgl.common.attributes

@import ecgl.common.wireframe.vertexHeader

#ifdef VERTEX_COLOR
attribute vec4 a_Color : COLOR;
varying vec4 v_Color;
#endif


@import ecgl.common.vertexAnimation.header


varying vec3 v_Normal;
varying vec3 v_WorldPosition;

void main()
{
 @import ecgl.common.uv.main

 @import ecgl.common.vertexAnimation.main


 gl_Position = worldViewProjection * vec4(pos, 1.0);

 v_Normal = normalize((worldInverseTranspose * vec4(norm, 0.0)).xyz);
 v_WorldPosition = (world * vec4(pos, 1.0)).xyz;

#ifdef VERTEX_COLOR
 v_Color = a_Color;
#endif

 @import ecgl.common.wireframe.vertexMain
}

@end


@export ecgl.lambert.fragment

#define LAYER_DIFFUSEMAP_COUNT 0
#define LAYER_EMISSIVEMAP_COUNT 0

#define NORMAL_UP_AXIS 1
#define NORMAL_FRONT_AXIS 2

@import ecgl.common.uv.fragmentHeader

varying vec3 v_Normal;
varying vec3 v_WorldPosition;

uniform sampler2D diffuseMap;
uniform sampler2D detailMap;

@import ecgl.common.layers.header

uniform float emissionIntensity: 1.0;

uniform vec4 color : [1.0, 1.0, 1.0, 1.0];

uniform mat4 viewInverse : VIEWINVERSE;

#ifdef ATMOSPHERE_ENABLED
uniform mat4 viewTranspose: VIEWTRANSPOSE;
uniform vec3 glowColor;
uniform float glowPower;
#endif

#ifdef AMBIENT_LIGHT_COUNT
@import clay.header.ambient_light
#endif
#ifdef AMBIENT_SH_LIGHT_COUNT
@import clay.header.ambient_sh_light
#endif

#ifdef DIRECTIONAL_LIGHT_COUNT
@import clay.header.directional_light
#endif

#ifdef VERTEX_COLOR
varying vec4 v_Color;
#endif


@import ecgl.common.ssaoMap.header

@import ecgl.common.bumpMap.header

@import clay.util.srgb

@import ecgl.common.wireframe.fragmentHeader

@import clay.plugin.compute_shadow_map

void main()
{
#ifdef SRGB_DECODE
 gl_FragColor = sRGBToLinear(color);
#else
 gl_FragColor = color;
#endif

#ifdef VERTEX_COLOR
 #ifdef SRGB_DECODE
 gl_FragColor *= sRGBToLinear(v_Color);
 #else
 gl_FragColor *= v_Color;
 #endif
#endif

 @import ecgl.common.albedo.main

 @import ecgl.common.diffuseLayer.main

 gl_FragColor *= albedoTexel;

 vec3 N = v_Normal;
#ifdef DOUBLE_SIDED
 vec3 eyePos = viewInverse[3].xyz;
 vec3 V = normalize(eyePos - v_WorldPosition);

 if (dot(N, V) < 0.0) {
 N = -N;
 }
#endif

 float ambientFactor = 1.0;

#ifdef BUMPMAP_ENABLED
 N = bumpNormal(v_WorldPosition, v_Normal, N);
 ambientFactor = dot(v_Normal, N);
#endif

 vec3 N2 = vec3(N.x, N[NORMAL_UP_AXIS], N[NORMAL_FRONT_AXIS]);

 vec3 diffuseColor = vec3(0.0, 0.0, 0.0);

 @import ecgl.common.ssaoMap.main

#ifdef AMBIENT_LIGHT_COUNT
 for(int i = 0; i < AMBIENT_LIGHT_COUNT; i++)
 {
 diffuseColor += ambientLightColor[i] * ambientFactor * ao;
 }
#endif
#ifdef AMBIENT_SH_LIGHT_COUNT
 for(int _idx_ = 0; _idx_ < AMBIENT_SH_LIGHT_COUNT; _idx_++)
 {{
 diffuseColor += calcAmbientSHLight(_idx_, N2) * ambientSHLightColor[_idx_] * ao;
 }}
#endif
#ifdef DIRECTIONAL_LIGHT_COUNT
#if defined(DIRECTIONAL_LIGHT_SHADOWMAP_COUNT)
 float shadowContribsDir[DIRECTIONAL_LIGHT_COUNT];
 if(shadowEnabled)
 {
 computeShadowOfDirectionalLights(v_WorldPosition, shadowContribsDir);
 }
#endif
 for(int i = 0; i < DIRECTIONAL_LIGHT_COUNT; i++)
 {
 vec3 lightDirection = -directionalLightDirection[i];
 vec3 lightColor = directionalLightColor[i];

 float shadowContrib = 1.0;
#if defined(DIRECTIONAL_LIGHT_SHADOWMAP_COUNT)
 if (shadowEnabled)
 {
 shadowContrib = shadowContribsDir[i];
 }
#endif

 float ndl = dot(N, normalize(lightDirection)) * shadowContrib;

 diffuseColor += lightColor * clamp(ndl, 0.0, 1.0);
 }
#endif

 gl_FragColor.rgb *= diffuseColor;

#ifdef ATMOSPHERE_ENABLED
 float atmoIntensity = pow(1.0 - dot(v_Normal, (viewTranspose * vec4(0.0, 0.0, 1.0, 0.0)).xyz), glowPower);
 gl_FragColor.rgb += glowColor * atmoIntensity;
#endif

 @import ecgl.common.emissiveLayer.main

 @import ecgl.common.wireframe.fragmentMain
}

@end`,dp=`@export ecgl.realistic.vertex

@import ecgl.common.transformUniforms

@import ecgl.common.uv.header

@import ecgl.common.attributes


@import ecgl.common.wireframe.vertexHeader

#ifdef VERTEX_COLOR
attribute vec4 a_Color : COLOR;
varying vec4 v_Color;
#endif

#ifdef NORMALMAP_ENABLED
attribute vec4 tangent : TANGENT;
varying vec3 v_Tangent;
varying vec3 v_Bitangent;
#endif

@import ecgl.common.vertexAnimation.header

varying vec3 v_Normal;
varying vec3 v_WorldPosition;

void main()
{

 @import ecgl.common.uv.main

 @import ecgl.common.vertexAnimation.main

 gl_Position = worldViewProjection * vec4(pos, 1.0);

 v_Normal = normalize((worldInverseTranspose * vec4(norm, 0.0)).xyz);
 v_WorldPosition = (world * vec4(pos, 1.0)).xyz;

#ifdef VERTEX_COLOR
 v_Color = a_Color;
#endif

#ifdef NORMALMAP_ENABLED
 v_Tangent = normalize((worldInverseTranspose * vec4(tangent.xyz, 0.0)).xyz);
 v_Bitangent = normalize(cross(v_Normal, v_Tangent) * tangent.w);
#endif

 @import ecgl.common.wireframe.vertexMain

}

@end



@export ecgl.realistic.fragment

#define LAYER_DIFFUSEMAP_COUNT 0
#define LAYER_EMISSIVEMAP_COUNT 0
#define PI 3.14159265358979
#define ROUGHNESS_CHANEL 0
#define METALNESS_CHANEL 1

#define NORMAL_UP_AXIS 1
#define NORMAL_FRONT_AXIS 2

#ifdef VERTEX_COLOR
varying vec4 v_Color;
#endif

@import ecgl.common.uv.fragmentHeader

varying vec3 v_Normal;
varying vec3 v_WorldPosition;

uniform sampler2D diffuseMap;

uniform sampler2D detailMap;
uniform sampler2D metalnessMap;
uniform sampler2D roughnessMap;

@import ecgl.common.layers.header

uniform float emissionIntensity: 1.0;

uniform vec4 color : [1.0, 1.0, 1.0, 1.0];

uniform float metalness : 0.0;
uniform float roughness : 0.5;

uniform mat4 viewInverse : VIEWINVERSE;

#ifdef ATMOSPHERE_ENABLED
uniform mat4 viewTranspose: VIEWTRANSPOSE;
uniform vec3 glowColor;
uniform float glowPower;
#endif

#ifdef AMBIENT_LIGHT_COUNT
@import clay.header.ambient_light
#endif

#ifdef AMBIENT_SH_LIGHT_COUNT
@import clay.header.ambient_sh_light
#endif

#ifdef AMBIENT_CUBEMAP_LIGHT_COUNT
@import clay.header.ambient_cubemap_light
#endif

#ifdef DIRECTIONAL_LIGHT_COUNT
@import clay.header.directional_light
#endif

@import ecgl.common.normalMap.fragmentHeader

@import ecgl.common.ssaoMap.header

@import ecgl.common.bumpMap.header

@import clay.util.srgb

@import clay.util.rgbm

@import ecgl.common.wireframe.fragmentHeader

@import clay.plugin.compute_shadow_map

vec3 F_Schlick(float ndv, vec3 spec) {
 return spec + (1.0 - spec) * pow(1.0 - ndv, 5.0);
}

float D_Phong(float g, float ndh) {
 float a = pow(8192.0, g);
 return (a + 2.0) / 8.0 * pow(ndh, a);
}

void main()
{
 vec4 albedoColor = color;

 vec3 eyePos = viewInverse[3].xyz;
 vec3 V = normalize(eyePos - v_WorldPosition);
#ifdef VERTEX_COLOR
 #ifdef SRGB_DECODE
 albedoColor *= sRGBToLinear(v_Color);
 #else
 albedoColor *= v_Color;
 #endif
#endif

 @import ecgl.common.albedo.main

 @import ecgl.common.diffuseLayer.main

 albedoColor *= albedoTexel;

 float m = metalness;

#ifdef METALNESSMAP_ENABLED
 float m2 = texture2D(metalnessMap, v_DetailTexcoord)[METALNESS_CHANEL];
 m = clamp(m2 + (m - 0.5) * 2.0, 0.0, 1.0);
#endif

 vec3 baseColor = albedoColor.rgb;
 albedoColor.rgb = baseColor * (1.0 - m);
 vec3 specFactor = mix(vec3(0.04), baseColor, m);

 float g = 1.0 - roughness;

#ifdef ROUGHNESSMAP_ENABLED
 float g2 = 1.0 - texture2D(roughnessMap, v_DetailTexcoord)[ROUGHNESS_CHANEL];
 g = clamp(g2 + (g - 0.5) * 2.0, 0.0, 1.0);
#endif

 vec3 N = v_Normal;

#ifdef DOUBLE_SIDED
 if (dot(N, V) < 0.0) {
 N = -N;
 }
#endif

 float ambientFactor = 1.0;

#ifdef BUMPMAP_ENABLED
 N = bumpNormal(v_WorldPosition, v_Normal, N);
 ambientFactor = dot(v_Normal, N);
#endif

@import ecgl.common.normalMap.fragmentMain

 vec3 N2 = vec3(N.x, N[NORMAL_UP_AXIS], N[NORMAL_FRONT_AXIS]);

 vec3 diffuseTerm = vec3(0.0);
 vec3 specularTerm = vec3(0.0);

 float ndv = clamp(dot(N, V), 0.0, 1.0);
 vec3 fresnelTerm = F_Schlick(ndv, specFactor);

 @import ecgl.common.ssaoMap.main

#ifdef AMBIENT_LIGHT_COUNT
 for(int _idx_ = 0; _idx_ < AMBIENT_LIGHT_COUNT; _idx_++)
 {{
 diffuseTerm += ambientLightColor[_idx_] * ambientFactor * ao;
 }}
#endif

#ifdef AMBIENT_SH_LIGHT_COUNT
 for(int _idx_ = 0; _idx_ < AMBIENT_SH_LIGHT_COUNT; _idx_++)
 {{
 diffuseTerm += calcAmbientSHLight(_idx_, N2) * ambientSHLightColor[_idx_] * ao;
 }}
#endif

#ifdef DIRECTIONAL_LIGHT_COUNT
#if defined(DIRECTIONAL_LIGHT_SHADOWMAP_COUNT)
 float shadowContribsDir[DIRECTIONAL_LIGHT_COUNT];
 if(shadowEnabled)
 {
 computeShadowOfDirectionalLights(v_WorldPosition, shadowContribsDir);
 }
#endif
 for(int _idx_ = 0; _idx_ < DIRECTIONAL_LIGHT_COUNT; _idx_++)
 {{
 vec3 L = -directionalLightDirection[_idx_];
 vec3 lc = directionalLightColor[_idx_];

 vec3 H = normalize(L + V);
 float ndl = clamp(dot(N, normalize(L)), 0.0, 1.0);
 float ndh = clamp(dot(N, H), 0.0, 1.0);

 float shadowContrib = 1.0;
#if defined(DIRECTIONAL_LIGHT_SHADOWMAP_COUNT)
 if (shadowEnabled)
 {
 shadowContrib = shadowContribsDir[_idx_];
 }
#endif

 vec3 li = lc * ndl * shadowContrib;

 diffuseTerm += li;
 specularTerm += li * fresnelTerm * D_Phong(g, ndh);
 }}
#endif


#ifdef AMBIENT_CUBEMAP_LIGHT_COUNT
 vec3 L = reflect(-V, N);
 L = vec3(L.x, L[NORMAL_UP_AXIS], L[NORMAL_FRONT_AXIS]);
 float rough2 = clamp(1.0 - g, 0.0, 1.0);
 float bias2 = rough2 * 5.0;
 vec2 brdfParam2 = texture2D(ambientCubemapLightBRDFLookup[0], vec2(rough2, ndv)).xy;
 vec3 envWeight2 = specFactor * brdfParam2.x + brdfParam2.y;
 vec3 envTexel2;
 for(int _idx_ = 0; _idx_ < AMBIENT_CUBEMAP_LIGHT_COUNT; _idx_++)
 {{
 envTexel2 = RGBMDecode(textureCubeLodEXT(ambientCubemapLightCubemap[_idx_], L, bias2), 8.12);
 specularTerm += ambientCubemapLightColor[_idx_] * envTexel2 * envWeight2 * ao;
 }}
#endif

 gl_FragColor.rgb = albedoColor.rgb * diffuseTerm + specularTerm;
 gl_FragColor.a = albedoColor.a;

#ifdef ATMOSPHERE_ENABLED
 float atmoIntensity = pow(1.0 - dot(v_Normal, (viewTranspose * vec4(0.0, 0.0, 1.0, 0.0)).xyz), glowPower);
 gl_FragColor.rgb += glowColor * atmoIntensity;
#endif

#ifdef SRGB_ENCODE
 gl_FragColor = linearTosRGB(gl_FragColor);
#endif

 @import ecgl.common.emissiveLayer.main

 @import ecgl.common.wireframe.fragmentMain
}

@end`,pp=`@export ecgl.hatching.vertex

@import ecgl.realistic.vertex

@end


@export ecgl.hatching.fragment

#define NORMAL_UP_AXIS 1
#define NORMAL_FRONT_AXIS 2

@import ecgl.common.uv.fragmentHeader

varying vec3 v_Normal;
varying vec3 v_WorldPosition;

uniform vec4 color : [0.0, 0.0, 0.0, 1.0];
uniform vec4 paperColor : [1.0, 1.0, 1.0, 1.0];

uniform mat4 viewInverse : VIEWINVERSE;

#ifdef AMBIENT_LIGHT_COUNT
@import clay.header.ambient_light
#endif
#ifdef AMBIENT_SH_LIGHT_COUNT
@import clay.header.ambient_sh_light
#endif

#ifdef DIRECTIONAL_LIGHT_COUNT
@import clay.header.directional_light
#endif

#ifdef VERTEX_COLOR
varying vec4 v_Color;
#endif


@import ecgl.common.ssaoMap.header

@import ecgl.common.bumpMap.header

@import clay.util.srgb

@import ecgl.common.wireframe.fragmentHeader

@import clay.plugin.compute_shadow_map

uniform sampler2D hatch1;
uniform sampler2D hatch2;
uniform sampler2D hatch3;
uniform sampler2D hatch4;
uniform sampler2D hatch5;
uniform sampler2D hatch6;

float shade(in float tone) {
 vec4 c = vec4(1. ,1., 1., 1.);
 float step = 1. / 6.;
 vec2 uv = v_DetailTexcoord;
 if (tone <= step / 2.0) {
 c = mix(vec4(0.), texture2D(hatch6, uv), 12. * tone);
 }
 else if (tone <= step) {
 c = mix(texture2D(hatch6, uv), texture2D(hatch5, uv), 6. * tone);
 }
 if(tone > step && tone <= 2. * step){
 c = mix(texture2D(hatch5, uv), texture2D(hatch4, uv) , 6. * (tone - step));
 }
 if(tone > 2. * step && tone <= 3. * step){
 c = mix(texture2D(hatch4, uv), texture2D(hatch3, uv), 6. * (tone - 2. * step));
 }
 if(tone > 3. * step && tone <= 4. * step){
 c = mix(texture2D(hatch3, uv), texture2D(hatch2, uv), 6. * (tone - 3. * step));
 }
 if(tone > 4. * step && tone <= 5. * step){
 c = mix(texture2D(hatch2, uv), texture2D(hatch1, uv), 6. * (tone - 4. * step));
 }
 if(tone > 5. * step){
 c = mix(texture2D(hatch1, uv), vec4(1.), 6. * (tone - 5. * step));
 }

 return c.r;
}

const vec3 w = vec3(0.2125, 0.7154, 0.0721);

void main()
{
#ifdef SRGB_DECODE
 vec4 inkColor = sRGBToLinear(color);
#else
 vec4 inkColor = color;
#endif

#ifdef VERTEX_COLOR
 #ifdef SRGB_DECODE
 inkColor *= sRGBToLinear(v_Color);
 #else
 inkColor *= v_Color;
 #endif
#endif

 vec3 N = v_Normal;
#ifdef DOUBLE_SIDED
 vec3 eyePos = viewInverse[3].xyz;
 vec3 V = normalize(eyePos - v_WorldPosition);

 if (dot(N, V) < 0.0) {
 N = -N;
 }
#endif

 float tone = 0.0;

 float ambientFactor = 1.0;

#ifdef BUMPMAP_ENABLED
 N = bumpNormal(v_WorldPosition, v_Normal, N);
 ambientFactor = dot(v_Normal, N);
#endif

 vec3 N2 = vec3(N.x, N[NORMAL_UP_AXIS], N[NORMAL_FRONT_AXIS]);

 @import ecgl.common.ssaoMap.main

#ifdef AMBIENT_LIGHT_COUNT
 for(int i = 0; i < AMBIENT_LIGHT_COUNT; i++)
 {
 tone += dot(ambientLightColor[i], w) * ambientFactor * ao;
 }
#endif
#ifdef AMBIENT_SH_LIGHT_COUNT
 for(int _idx_ = 0; _idx_ < AMBIENT_SH_LIGHT_COUNT; _idx_++)
 {{
 tone += dot(calcAmbientSHLight(_idx_, N2) * ambientSHLightColor[_idx_], w) * ao;
 }}
#endif
#ifdef DIRECTIONAL_LIGHT_COUNT
#if defined(DIRECTIONAL_LIGHT_SHADOWMAP_COUNT)
 float shadowContribsDir[DIRECTIONAL_LIGHT_COUNT];
 if(shadowEnabled)
 {
 computeShadowOfDirectionalLights(v_WorldPosition, shadowContribsDir);
 }
#endif
 for(int i = 0; i < DIRECTIONAL_LIGHT_COUNT; i++)
 {
 vec3 lightDirection = -directionalLightDirection[i];
 float lightTone = dot(directionalLightColor[i], w);

 float shadowContrib = 1.0;
#if defined(DIRECTIONAL_LIGHT_SHADOWMAP_COUNT)
 if (shadowEnabled)
 {
 shadowContrib = shadowContribsDir[i];
 }
#endif

 float ndl = dot(N, normalize(lightDirection)) * shadowContrib;

 tone += lightTone * clamp(ndl, 0.0, 1.0);
 }
#endif

 gl_FragColor = mix(inkColor, paperColor, shade(clamp(tone, 0.0, 1.0)));
 }
@end
`,oh=`@export ecgl.sm.depth.vertex

uniform mat4 worldViewProjection : WORLDVIEWPROJECTION;

attribute vec3 position : POSITION;
attribute vec2 texcoord : TEXCOORD_0;

#ifdef VERTEX_ANIMATION
attribute vec3 prevPosition;
uniform float percent : 1.0;
#endif

varying vec4 v_ViewPosition;
varying vec2 v_Texcoord;

void main(){

#ifdef VERTEX_ANIMATION
 vec3 pos = mix(prevPosition, position, percent);
#else
 vec3 pos = position;
#endif

 v_ViewPosition = worldViewProjection * vec4(pos, 1.0);
 gl_Position = v_ViewPosition;

 v_Texcoord = texcoord;

}
@end



@export ecgl.sm.depth.fragment

@import clay.sm.depth.fragment

@end`;Object.assign(Mi.prototype,Yo),cr.import(gu),cr.import(el),cr.import(mu),cr.import(wf),cr.import(vp),cr.import(dp),cr.import(pp),cr.import(oh);function yu(n){return!n||n==="none"}function sh(n){return n instanceof HTMLCanvasElement||n instanceof HTMLImageElement||n instanceof Image}function lh(n){return n.getZr&&n.setOption}var uh=ra.prototype.addToScene,fh=ra.prototype.removeFromScene;ra.prototype.addToScene=function(n){if(uh.call(this,n),this.__zr){var e=this.__zr;n.traverse(function(o){o.__zr=e,o.addAnimatorsToZr&&o.addAnimatorsToZr(e)})}},ra.prototype.removeFromScene=function(n){fh.call(this,n),n.traverse(function(e){var o=e.__zr;e.__zr=null,o&&e.removeAnimatorsFromZr&&e.removeAnimatorsFromZr(o)})},Le.prototype.setTextureImage=function(n,e,o,u){if(!!this.shader){var c=o.getZr(),v=this,g;return v.autoUpdateTextureStatus=!1,v.disableTexture(n),yu(e)||(g=zr.loadTexture(e,o,u,function(x){v.enableTexture(n),c&&c.refresh()}),v.set(n,g)),g}};var zr={};zr.Renderer=bi,zr.Node=Mi,zr.Mesh=ni,zr.Shader=cr,zr.Material=Le,zr.Texture=Mr,zr.Texture2D=Gr,zr.Geometry=$r,zr.SphereGeometry=ap,zr.PlaneGeometry=ps,zr.CubeGeometry=Vo,zr.AmbientLight=Ef,zr.DirectionalLight=sp,zr.PointLight=up,zr.SpotLight=Wi,zr.PerspectiveCamera=xn,zr.OrthographicCamera=xs,zr.Vector2=br,zr.Vector3=or,zr.Vector4=fp,zr.Quaternion=Co,zr.Matrix2=Lf,zr.Matrix2d=Pf,zr.Matrix3=cp,zr.Matrix4=gr,zr.Plane=ha,zr.Ray=vi,zr.BoundingBox=di,zr.Frustum=pi;var ch=oo.createBlank("rgba(255,255,255,0)").image;function If(n){return Math.pow(2,Math.round(Math.log(n)/Math.LN2))}function hh(n){if((n.wrapS===Mr.REPEAT||n.wrapT===Mr.REPEAT)&&n.image){var e=If(n.width),o=If(n.height);if(e!==n.width||o!==n.height){var u=document.createElement("canvas");u.width=e,u.height=o;var c=u.getContext("2d");c.drawImage(n.image,0,0,e,o),n.image=u}}}zr.loadTexture=function(n,e,o,u){typeof o=="function"&&(u=o,o={}),o=o||{};for(var c=Object.keys(o).sort(),v="",g=0;g<c.length;g++)v+=c[g]+"_"+o[c[g]]+"_";var x=e.__textureCache=e.__textureCache||new lu.a(20);if(lh(n)){var _=n.__textureid__,M=x.get(v+_);if(M)M.texture.surface.setECharts(n),u&&u(M.texture);else{var I=new Kd(n);I.onupdate=function(){e.getZr().refresh()},M={texture:I.getTexture()};for(var g=0;g<c.length;g++)M.texture[c[g]]=o[c[g]];_=n.__textureid__||"__ecgl_ec__"+M.texture.__uid__,n.__textureid__=_,x.put(v+_,M),u&&u(M.texture)}return M.texture}else if(sh(n)){var _=n.__textureid__,M=x.get(v+_);if(!M){M={texture:new zr.Texture2D({image:n})};for(var g=0;g<c.length;g++)M.texture[c[g]]=o[c[g]];_=n.__textureid__||"__ecgl_image__"+M.texture.__uid__,n.__textureid__=_,x.put(v+_,M),hh(M.texture),u&&u(M.texture)}return M.texture}else{var M=x.get(v+n);if(M)M.callbacks?M.callbacks.push(u):u&&u(M.texture);else if(n.match(/.hdr$|^data:application\/octet-stream/)){M={callbacks:[u]};var F=oo.loadTexture(n,{exposure:o.exposure,fileType:"hdr"},function(){F.dirty(),M.callbacks.forEach(function(Dt){Dt&&Dt(F)}),M.callbacks=null});M.texture=F,x.put(v+n,M)}else{for(var F=new zr.Texture2D({image:new Image}),g=0;g<c.length;g++)F[c[g]]=o[c[g]];M={texture:F,callbacks:[u]};var ut=F.image;ut.onload=function(){F.image=ut,hh(F),F.dirty(),M.callbacks.forEach(function(Et){Et&&Et(F)}),M.callbacks=null},ut.crossOrigin="Anonymous",ut.src=n,F.image=ch,x.put(v+n,M)}return M.texture}},zr.createAmbientCubemap=function(n,e,o,u){n=n||{};var c=n.texture,v=Kr.firstNotNull(n.exposure,1),g=new $d({intensity:Kr.firstNotNull(n.specularIntensity,1)}),x=new qd({intensity:Kr.firstNotNull(n.diffuseIntensity,1),coefficients:[.844,.712,.691,-.037,.083,.167,.343,.288,.299,-.041,-.021,-.009,-.003,-.041,-.064,-.011,-.007,-.004,-.031,.034,.081,-.06,-.049,-.06,.046,.056,.05]});return g.cubemap=zr.loadTexture(c,o,{exposure:v},function(){if(g.cubemap.flipY=!1,!1)var _;if(g.prefilter(e,32),!1)var M;x.coefficients=rp.projectEnvironmentMap(e,g.cubemap,{lod:1}),u&&u()}),{specular:g,diffuse:x}},zr.createBlankTexture=oo.createBlank,zr.isImage=sh,zr.additiveBlend=function(n){n.blendEquation(n.FUNC_ADD),n.blendFunc(n.SRC_ALPHA,n.ONE)},zr.parseColor=function(n,e){return n instanceof Array?(e||(e=[]),e[0]=n[0],e[1]=n[1],e[2]=n[2],n.length>3?e[3]=n[3]:e[3]=1,e):(e=B.i.parse(n||"#000",e)||[0,0,0,0],e[0]/=255,e[1]/=255,e[2]/=255,e)},zr.directionFromAlphaBeta=function(n,e){var o=n/180*Math.PI+Math.PI/2,u=-e/180*Math.PI+Math.PI/2,c=[],v=Math.sin(o);return c[0]=v*Math.cos(u),c[1]=-Math.cos(o),c[2]=v*Math.sin(u),c},zr.getShadowResolution=function(n){var e=1024;switch(n){case"low":e=512;break;case"medium":break;case"high":e=2048;break;case"ultra":e=4096;break}return e},zr.COMMON_SHADERS=["lambert","color","realistic","hatching","shadow"],zr.createShader=function(n){n==="ecgl.shadow"&&(n="ecgl.displayShadow");var e=cr.source(n+".vertex"),o=cr.source(n+".fragment");e||console.error("Vertex shader of '%s' not exits",n),o||console.error("Fragment shader of '%s' not exits",n);var u=new cr(e,o);return u.name=n,u},zr.createMaterial=function(n,e){e instanceof Array||(e=[e]);var o=zr.createShader(n),u=new Le({shader:o});return e.forEach(function(c){typeof c=="string"&&u.define(c)}),u},zr.setMaterialFromModel=function(n,e,o,u){e.autoUpdateTextureStatus=!1;var c=o.getModel(n+"Material"),v=c.get("detailTexture"),g=Kr.firstNotNull(c.get("textureTiling"),1),x=Kr.firstNotNull(c.get("textureOffset"),0);typeof g=="number"&&(g=[g,g]),typeof x=="number"&&(x=[x,x]);var _=g[0]>1||g[1]>1?zr.Texture.REPEAT:zr.Texture.CLAMP_TO_EDGE,M={anisotropic:8,wrapS:_,wrapT:_};if(n==="realistic"){var I=c.get("roughness"),F=c.get("metalness");F!=null?isNaN(F)&&(e.setTextureImage("metalnessMap",F,u,M),F=Kr.firstNotNull(c.get("metalnessAdjust"),.5)):F=0,I!=null?isNaN(I)&&(e.setTextureImage("roughnessMap",I,u,M),I=Kr.firstNotNull(c.get("roughnessAdjust"),.5)):I=.5;var ut=c.get("normalTexture");e.setTextureImage("detailMap",v,u,M),e.setTextureImage("normalMap",ut,u,M),e.set({roughness:I,metalness:F,detailUvRepeat:g,detailUvOffset:x})}else if(n==="lambert")e.setTextureImage("detailMap",v,u,M),e.set({detailUvRepeat:g,detailUvOffset:x});else if(n==="color")e.setTextureImage("detailMap",v,u,M),e.set({detailUvRepeat:g,detailUvOffset:x});else if(n==="hatching"){var yt=c.get("hatchingTextures")||[];yt.length<6;for(var Dt=0;Dt<6;Dt++)e.setTextureImage("hatch"+(Dt+1),yt[Dt],u,{anisotropic:8,wrapS:zr.Texture.REPEAT,wrapT:zr.Texture.REPEAT});e.set({detailUvRepeat:g,detailUvOffset:x})}},zr.updateVertexAnimation=function(n,e,o,u){var c=u.get("animation"),v=u.get("animationDurationUpdate"),g=u.get("animationEasingUpdate"),x=o.shadowDepthMaterial;if(c&&e&&v>0&&e.geometry.vertexCount===o.geometry.vertexCount){o.material.define("vertex","VERTEX_ANIMATION"),o.ignorePreZ=!0,x&&x.define("vertex","VERTEX_ANIMATION");for(var _=0;_<n.length;_++)o.geometry.attributes[n[_][0]].value=e.geometry.attributes[n[_][1]].value;o.geometry.dirty(),o.__percent=0,o.material.set("percent",0),o.stopAnimation(),o.animate().when(v,{__percent:1}).during(function(){o.material.set("percent",o.__percent),x&&x.set("percent",o.__percent)}).done(function(){o.ignorePreZ=!1,o.material.undefine("vertex","VERTEX_ANIMATION"),x&&x.undefine("vertex","VERTEX_ANIMATION")}).start(g)}else o.material.undefine("vertex","VERTEX_ANIMATION"),x&&x.undefine("vertex","VERTEX_ANIMATION")};var se=zr,Rf=S("mLcG"),gn=function(e,o){this.id=e,this.zr=o;try{this.renderer=new bi({clearBit:0,devicePixelRatio:o.painter.dpr,preserveDrawingBuffer:!0,premultipliedAlpha:!0}),this.renderer.resize(o.painter.getWidth(),o.painter.getHeight())}catch(c){this.renderer=null,this.dom=document.createElement("div"),this.dom.style.cssText="position:absolute; left: 0; top: 0; right: 0; bottom: 0;",this.dom.className="ecgl-nowebgl",this.dom.innerHTML="Sorry, your browser does not support WebGL",console.error(c);return}this.onglobalout=this.onglobalout.bind(this),o.on("globalout",this.onglobalout),this.dom=this.renderer.canvas;var u=this.dom.style;u.position="absolute",u.left="0",u.top="0",this.views=[],this._picking=new df({renderer:this.renderer}),this._viewsToDispose=[],this._accumulatingId=0,this._zrEventProxy=new B.z.Rect({shape:{x:-1,y:-1,width:2,height:2},__isGLToZRProxy:!0}),this._backgroundColor=null};gn.prototype.setUnpainted=function(){},gn.prototype.addView=function(n){if(n.layer!==this){var e=this._viewsToDispose.indexOf(n);e>=0&&this._viewsToDispose.splice(e,1),this.views.push(n),n.layer=this;var o=this.zr;n.scene.traverse(function(u){u.__zr=o,u.addAnimatorsToZr&&u.addAnimatorsToZr(o)})}};function vh(n){var e=n.__zr;n.__zr=null,e&&n.removeAnimatorsFromZr&&n.removeAnimatorsFromZr(e)}gn.prototype.removeView=function(n){if(n.layer===this){var e=this.views.indexOf(n);e>=0&&(this.views.splice(e,1),n.scene.traverse(vh,this),n.layer=null,this._viewsToDispose.push(n))}},gn.prototype.removeViewsAll=function(){this.views.forEach(function(n){n.scene.traverse(vh,this),n.layer=null,this._viewsToDispose.push(n)},this),this.views.length=0},gn.prototype.resize=function(n,e){var o=this.renderer;o.resize(n,e)},gn.prototype.clear=function(){var n=this.renderer.gl,e=this._backgroundColor||[0,0,0,0];n.clearColor(e[0],e[1],e[2],e[3]),n.depthMask(!0),n.colorMask(!0,!0,!0,!0),n.clear(n.DEPTH_BUFFER_BIT|n.COLOR_BUFFER_BIT)},gn.prototype.clearDepth=function(){var n=this.renderer.gl;n.clear(n.DEPTH_BUFFER_BIT)},gn.prototype.clearColor=function(){var n=this.renderer.gl;n.clearColor(0,0,0,0),n.clear(n.COLOR_BUFFER_BIT)},gn.prototype.needsRefresh=function(){this.zr.refresh()},gn.prototype.refresh=function(n){this._backgroundColor=n?se.parseColor(n):[0,0,0,0],this.renderer.clearColor=this._backgroundColor;for(var e=0;e<this.views.length;e++)this.views[e].prepareRender(this.renderer);this._doRender(!1),this._trackAndClean();for(var e=0;e<this._viewsToDispose.length;e++)this._viewsToDispose[e].dispose(this.renderer);this._viewsToDispose.length=0,this._startAccumulating()},gn.prototype.renderToCanvas=function(n){this._startAccumulating(!0),n.drawImage(this.dom,0,0,n.canvas.width,n.canvas.height)},gn.prototype._doRender=function(n){this.clear(),this.renderer.saveViewport();for(var e=0;e<this.views.length;e++)this.views[e].render(this.renderer,n);this.renderer.restoreViewport()},gn.prototype._stopAccumulating=function(){this._accumulatingId=0,clearTimeout(this._accumulatingTimeout)};var gp=1;gn.prototype._startAccumulating=function(n){var e=this;this._stopAccumulating();for(var o=!1,u=0;u<this.views.length;u++)o=this.views[u].needsAccumulate()||o;if(!o)return;function c(v){if(!(!e._accumulatingId||v!==e._accumulatingId)){for(var g=!0,x=0;x<e.views.length;x++)g=e.views[x].isAccumulateFinished()&&o;g||(e._doRender(!0),n?c(v):Object(Rf.a)(function(){c(v)}))}}this._accumulatingId=gp++,n?c(e._accumulatingId):this._accumulatingTimeout=setTimeout(function(){c(e._accumulatingId)},50)},gn.prototype._trackAndClean=function(){var n=[],e=[];this._textureList&&(dh(this._textureList),dh(this._geometriesList));for(var o=0;o<this.views.length;o++)mp(this.views[o].scene,n,e);this._textureList&&(Ts(this.renderer,this._textureList),Ts(this.renderer,this._geometriesList)),this._textureList=n,this._geometriesList=e};function dh(n){for(var e=0;e<n.length;e++)n[e].__used__=0}function Ts(n,e){for(var o=0;o<e.length;o++)e[o].__used__||e[o].dispose(n)}function vl(n,e){n.__used__=n.__used__||0,n.__used__++,n.__used__===1&&e.push(n)}function mp(n,e,o){var u,c;n.traverse(function(g){if(g.isRenderable()){var x=g.geometry,_=g.material;if(_!==u)for(var M=_.getTextureUniforms(),I=0;I<M.length;I++){var F=M[I],ut=_.uniforms[F].value;if(!!ut){if(ut instanceof Mr)vl(ut,e);else if(ut instanceof Array)for(var yt=0;yt<ut.length;yt++)ut[yt]instanceof Mr&&vl(ut[yt],e)}}x!==c&&vl(x,o),u=_,c=x}});for(var v=0;v<n.lights.length;v++)n.lights[v].cubemap&&vl(n.lights[v].cubemap,e)}gn.prototype.dispose=function(){this._stopAccumulating(),this.renderer.disposeScene(this.scene),this.zr.off("globalout",this.onglobalout)},gn.prototype.onmousedown=function(n){if(!(n.target&&n.target.__isGLToZRProxy)){n=n.event;var e=this.pickObject(n.offsetX,n.offsetY);e&&(this._dispatchEvent("mousedown",n,e),this._dispatchDataEvent("mousedown",n,e)),this._downX=n.offsetX,this._downY=n.offsetY}},gn.prototype.onmousemove=function(n){if(!(n.target&&n.target.__isGLToZRProxy)){n=n.event;var e=this.pickObject(n.offsetX,n.offsetY),o=e&&e.target,u=this._hovered;this._hovered=e,u&&o!==u.target&&(u.relatedTarget=o,this._dispatchEvent("mouseout",n,u),this.zr.setCursorStyle("default")),this._dispatchEvent("mousemove",n,e),e&&(this.zr.setCursorStyle("pointer"),(!u||o!==u.target)&&this._dispatchEvent("mouseover",n,e)),this._dispatchDataEvent("mousemove",n,e)}},gn.prototype.onmouseup=function(n){if(!(n.target&&n.target.__isGLToZRProxy)){n=n.event;var e=this.pickObject(n.offsetX,n.offsetY);e&&(this._dispatchEvent("mouseup",n,e),this._dispatchDataEvent("mouseup",n,e)),this._upX=n.offsetX,this._upY=n.offsetY}},gn.prototype.onclick=gn.prototype.dblclick=function(n){if(!(n.target&&n.target.__isGLToZRProxy)){var e=this._upX-this._downX,o=this._upY-this._downY;if(!(Math.sqrt(e*e+o*o)>20)){n=n.event;var u=this.pickObject(n.offsetX,n.offsetY);u&&(this._dispatchEvent(n.type,n,u),this._dispatchDataEvent(n.type,n,u));var c=this._clickToSetFocusPoint(n);if(c){var v=c.view.setDOFFocusOnPoint(c.distance);v&&this.zr.refresh()}}}},gn.prototype._clickToSetFocusPoint=function(n){for(var e=this.renderer,o=e.viewport,u=this.views.length-1;u>=0;u--){var c=this.views[u];if(c.hasDOF()&&c.containPoint(n.offsetX,n.offsetY)){this._picking.scene=c.scene,this._picking.camera=c.camera,e.viewport=c.viewport;var v=this._picking.pick(n.offsetX,n.offsetY,!0);if(v)return v.view=c,v}}e.viewport=o},gn.prototype.onglobalout=function(n){var e=this._hovered;e&&this._dispatchEvent("mouseout",n,{target:e.target})},gn.prototype.pickObject=function(n,e){for(var o=[],u=this.renderer,c=u.viewport,v=0;v<this.views.length;v++){var g=this.views[v];g.containPoint(n,e)&&(this._picking.scene=g.scene,this._picking.camera=g.camera,u.viewport=g.viewport,this._picking.pickAll(n,e,o))}return u.viewport=c,o.sort(function(x,_){return x.distance-_.distance}),o[0]},gn.prototype._dispatchEvent=function(n,e,o){o||(o={});var u=o.target;for(o.cancelBubble=!1,o.event=e,o.type=n,o.offsetX=e.offsetX,o.offsetY=e.offsetY;u&&(u.trigger(n,o),u=u.getParent(),!o.cancelBubble););this._dispatchToView(n,o)},gn.prototype._dispatchDataEvent=function(n,e,o){var u=o&&o.target,c=u&&u.dataIndex,v=u&&u.seriesIndex,g=u&&u.eventData,x=!1,_=this._zrEventProxy;_.x=e.offsetX,_.y=e.offsetY,_.update();var M={target:_},I=B.A.getECData(_);n==="mousemove"&&(c!=null?c!==this._lastDataIndex&&(parseInt(this._lastDataIndex,10)>=0&&(I.dataIndex=this._lastDataIndex,I.seriesIndex=this._lastSeriesIndex,this.zr.handler.dispatchToElement(M,"mouseout",e)),x=!0):g!=null&&g!==this._lastEventData&&(this._lastEventData!=null&&(I.eventData=this._lastEventData,this.zr.handler.dispatchToElement(M,"mouseout",e)),x=!0),this._lastEventData=g,this._lastDataIndex=c,this._lastSeriesIndex=v),I.eventData=g,I.dataIndex=c,I.seriesIndex=v,(g!=null||parseInt(c,10)>=0&&parseInt(v,10)>=0)&&(this.zr.handler.dispatchToElement(M,n,e),x&&this.zr.handler.dispatchToElement(M,"mouseover",e))},gn.prototype._dispatchToView=function(n,e){for(var o=0;o<this.views.length;o++)this.views[o].containPoint(e.offsetX,e.offsetY)&&this.views[o].trigger(n,e)},Object.assign(gn.prototype,V);var ph=gn,Os=["bar3D","line3D","map3D","scatter3D","surface","lines3D","scatterGL","scatter3D"];function dl(n,e){if(n&&n[e]&&(n[e].normal||n[e].emphasis)){var o=n[e].normal,u=n[e].emphasis;o&&(n[e]=o),u&&(n.emphasis=n.emphasis||{},n.emphasis[e]=u)}}function gh(n){dl(n,"itemStyle"),dl(n,"lineStyle"),dl(n,"areaStyle"),dl(n,"label")}function pl(n){!n||(n instanceof Array||(n=[n]),B.Y.each(n,function(e){if(e.axisLabel){var o=e.axisLabel;Object.assign(o,o.textStyle),o.textStyle=null}}))}var Nf=function(n){B.Y.each(n.series,function(e){B.Y.indexOf(Os,e.type)>=0&&(gh(e),e.coordinateSystem==="mapbox"&&(e.coordinateSystem="mapbox3D",n.mapbox3D=n.mapbox))}),pl(n.xAxis3D),pl(n.yAxis3D),pl(n.zAxis3D),pl(n.grid3D),dl(n.geo3D)};function xu(n){this._layers={},this._zr=n}xu.prototype.update=function(n,e){var o=this,u=e.getZr();if(!u.getWidth()||!u.getHeight()){console.warn("Dom has no width or height");return}function c(x){u.setSleepAfterStill(0);var _;x.coordinateSystem&&x.coordinateSystem.model,_=x.get("zlevel");var M=o._layers,I=M[_];if(!I){if(I=M[_]=new ph("gl-"+_,u),u.painter.isSingleCanvas()){I.virtual=!0;var F=new B.z.Image({z:1e4,style:{image:I.renderer.canvas},silent:!0});I.__hostImage=F,u.add(F)}u.painter.insertLayer(_,I)}return I.__hostImage&&I.__hostImage.setStyle({width:I.renderer.getWidth(),height:I.renderer.getHeight()}),I}function v(x,_){x&&x.traverse(function(M){M.isRenderable&&M.isRenderable()&&(M.ignorePicking=M.$ignorePicking!=null?M.$ignorePicking:_)})}for(var g in this._layers)this._layers[g].removeViewsAll();n.eachComponent(function(x,_){if(x!=="series"){var M=e.getViewOfComponentModel(_),I=_.coordinateSystem;if(M.__ecgl__){var F;if(I){if(!I.viewGL){console.error("Can't find viewGL in coordinateSystem of component "+_.id);return}F=I.viewGL}else{if(!_.viewGL){console.error("Can't find viewGL of component "+_.id);return}F=I.viewGL}var F=I.viewGL,ut=c(_);ut.addView(F),M.afterRender&&M.afterRender(_,n,e,ut),v(M.groupGL,_.get("silent"))}}}),n.eachSeries(function(x){var _=e.getViewOfSeriesModel(x),M=x.coordinateSystem;if(_.__ecgl__){if(M&&!M.viewGL&&!_.viewGL){console.error("Can't find viewGL of series "+_.id);return}var I=M&&M.viewGL||_.viewGL,F=c(x);F.addView(I),_.afterRender&&_.afterRender(x,n,e,F),v(_.groupGL,x.get("silent"))}})},B.N(function(n){n.getZr().painter.getRenderedCanvas=function(e){if(e=e||{},this._singleCanvas)return this._layers[0].dom;var o=document.createElement("canvas"),u=e.pixelRatio||this.dpr;o.width=this.getWidth()*u,o.height=this.getHeight()*u;var c=o.getContext("2d");c.dpr=u,c.clearRect(0,0,o.width,o.height),e.backgroundColor&&(c.fillStyle=e.backgroundColor,c.fillRect(0,0,o.width,o.height));var v=this.storage.getDisplayList(!0),g={},x,_=this;function M(yt,Dt){var Et=_._zlevelList;yt==null&&(yt=-Infinity);for(var Pt,Ht=0;Ht<Et.length;Ht++){var $t=Et[Ht],qt=_._layers[$t];if(!qt.__builtin__&&$t>yt&&$t<Dt){Pt=qt;break}}Pt&&Pt.renderToCanvas&&(c.save(),Pt.renderToCanvas(c),c.restore())}for(var I={ctx:c},F=0;F<v.length;F++){var ut=v[F];ut.zlevel!==x&&(M(x,ut.zlevel),x=ut.zlevel),this._doPaintEl(ut,I,!0,null,g)}return M(x,Infinity),o}}),B.O(function(n,e){var o=e.getZr(),u=o.__egl=o.__egl||new xu(o);u.update(n,e)}),B.P(Nf);var Ky=xu,bu={defaultOption:{viewControl:{projection:"perspective",autoRotate:!1,autoRotateDirection:"cw",autoRotateSpeed:10,autoRotateAfterStill:3,damping:.8,rotateSensitivity:1,zoomSensitivity:1,panSensitivity:1,panMouseButton:"middle",rotateMouseButton:"left",distance:150,minDistance:40,maxDistance:400,orthographicSize:150,maxOrthographicSize:400,minOrthographicSize:20,center:[0,0,0],alpha:0,beta:0,minAlpha:-90,maxAlpha:90}},setView:function(e){e=e||{},this.option.viewControl=this.option.viewControl||{},e.alpha!=null&&(this.option.viewControl.alpha=e.alpha),e.beta!=null&&(this.option.viewControl.beta=e.beta),e.distance!=null&&(this.option.viewControl.distance=e.distance),e.center!=null&&(this.option.viewControl.center=e.center)}},As={defaultOption:{postEffect:{enable:!1,bloom:{enable:!0,intensity:.1},depthOfField:{enable:!1,focalRange:20,focalDistance:50,blurRadius:10,fstop:2.8,quality:"medium"},screenSpaceAmbientOcclusion:{enable:!1,radius:2,quality:"medium",intensity:1},screenSpaceReflection:{enable:!1,quality:"medium",maxRoughness:.8},colorCorrection:{enable:!0,exposure:0,brightness:0,contrast:1,saturation:1,lookupTexture:""},edge:{enable:!1},FXAA:{enable:!1}},temporalSuperSampling:{enable:"auto"}}},Xo={defaultOption:{light:{main:{shadow:!1,shadowQuality:"high",color:"#fff",intensity:1,alpha:0,beta:0},ambient:{color:"#fff",intensity:.2},ambientCubemap:{texture:null,exposure:1,diffuseIntensity:.5,specularIntensity:.5}}}},Su=B.c.extend({type:"grid3D",dependencies:["xAxis3D","yAxis3D","zAxis3D"],defaultOption:{show:!0,zlevel:-10,left:0,top:0,width:"100%",height:"100%",environment:"auto",boxWidth:100,boxHeight:100,boxDepth:100,axisPointer:{show:!0,lineStyle:{color:"rgba(0, 0, 0, 0.8)",width:1},label:{show:!0,formatter:null,margin:8,textStyle:{fontSize:14,color:"#fff",backgroundColor:"rgba(0,0,0,0.5)",padding:3,borderRadius:3}}},axisLine:{show:!0,lineStyle:{color:"#333",width:2,type:"solid"}},axisTick:{show:!0,inside:!1,length:3,lineStyle:{width:1}},axisLabel:{show:!0,inside:!1,rotate:0,margin:8,textStyle:{fontSize:12}},splitLine:{show:!0,lineStyle:{color:["#ccc"],width:1,type:"solid"}},splitArea:{show:!1,areaStyle:{color:["rgba(250,250,250,0.3)","rgba(200,200,200,0.3)"]}},light:{main:{alpha:30,beta:40},ambient:{intensity:.4}},viewControl:{alpha:20,beta:40,autoRotate:!1,distance:200,minDistance:40,maxDistance:400}}});B.Y.merge(Su.prototype,bu),B.Y.merge(Su.prototype,As),B.Y.merge(Su.prototype,Xo);var yp=Su,Ms=S("eDfh"),Ds=Kr.firstNotNull,mh={left:0,middle:1,right:2};function yh(n){return n instanceof Array||(n=[n,n]),n}var Bf=W.extend(function(){return{zr:null,viewGL:null,_center:new or,minDistance:.5,maxDistance:1.5,maxOrthographicSize:300,minOrthographicSize:30,minAlpha:-90,maxAlpha:90,minBeta:-Infinity,maxBeta:Infinity,autoRotateAfterStill:0,autoRotateDirection:"cw",autoRotateSpeed:60,damping:.8,rotateSensitivity:1,zoomSensitivity:1,panSensitivity:1,panMouseButton:"middle",rotateMouseButton:"left",_mode:"rotate",_camera:null,_needsUpdate:!1,_rotating:!1,_phi:0,_theta:0,_mouseX:0,_mouseY:0,_rotateVelocity:new br,_panVelocity:new br,_distance:500,_zoomSpeed:0,_stillTimeout:0,_animators:[]}},function(){["_mouseDownHandler","_mouseWheelHandler","_mouseMoveHandler","_mouseUpHandler","_pinchHandler","_contextMenuHandler","_update"].forEach(function(n){this[n]=this[n].bind(this)},this)},{init:function(){var e=this.zr;e&&(e.on("mousedown",this._mouseDownHandler),e.on("globalout",this._mouseUpHandler),e.on("mousewheel",this._mouseWheelHandler),e.on("pinch",this._pinchHandler),e.animation.on("frame",this._update),e.dom.addEventListener("contextmenu",this._contextMenuHandler))},dispose:function(){var e=this.zr;e&&(e.off("mousedown",this._mouseDownHandler),e.off("mousemove",this._mouseMoveHandler),e.off("mouseup",this._mouseUpHandler),e.off("mousewheel",this._mouseWheelHandler),e.off("pinch",this._pinchHandler),e.off("globalout",this._mouseUpHandler),e.dom.removeEventListener("contextmenu",this._contextMenuHandler),e.animation.off("frame",this._update)),this.stopAllAnimation()},getDistance:function(){return this._distance},setDistance:function(e){this._distance=e,this._needsUpdate=!0},getOrthographicSize:function(){return this._orthoSize},setOrthographicSize:function(e){this._orthoSize=e,this._needsUpdate=!0},getAlpha:function(){return this._theta/Math.PI*180},getBeta:function(){return-this._phi/Math.PI*180},getCenter:function(){return this._center.toArray()},setAlpha:function(e){e=Math.max(Math.min(this.maxAlpha,e),this.minAlpha),this._theta=e/180*Math.PI,this._needsUpdate=!0},setBeta:function(e){e=Math.max(Math.min(this.maxBeta,e),this.minBeta),this._phi=-e/180*Math.PI,this._needsUpdate=!0},setCenter:function(e){this._center.setArray(e)},setViewGL:function(e){this.viewGL=e},getCamera:function(){return this.viewGL.camera},setFromViewControlModel:function(e,o){o=o||{};var u=o.baseDistance||0,c=o.baseOrthoSize||1,v=e.get("projection");v!=="perspective"&&v!=="orthographic"&&v!=="isometric"&&(v="perspective"),this._projection=v,this.viewGL.setProjection(v);var g=e.get("distance")+u,x=e.get("orthographicSize")+c;[["damping",.8],["autoRotate",!1],["autoRotateAfterStill",3],["autoRotateDirection","cw"],["autoRotateSpeed",10],["minDistance",30],["maxDistance",400],["minOrthographicSize",30],["maxOrthographicSize",300],["minAlpha",-90],["maxAlpha",90],["minBeta",-Infinity],["maxBeta",Infinity],["rotateSensitivity",1],["zoomSensitivity",1],["panSensitivity",1],["panMouseButton","left"],["rotateMouseButton","middle"]].forEach(function(yt){this[yt[0]]=Ds(e.get(yt[0]),yt[1])},this),this.minDistance+=u,this.maxDistance+=u,this.minOrthographicSize+=c,this.maxOrthographicSize+=c;var _=e.ecModel,M={};["animation","animationDurationUpdate","animationEasingUpdate"].forEach(function(yt){M[yt]=Ds(e.get(yt),_&&_.get(yt))});var I=Ds(o.alpha,e.get("alpha"))||0,F=Ds(o.beta,e.get("beta"))||0,ut=Ds(o.center,e.get("center"))||[0,0,0];M.animation&&M.animationDurationUpdate>0&&this._notFirst?this.animateTo({alpha:I,beta:F,center:ut,distance:g,orthographicSize:x,easing:M.animationEasingUpdate,duration:M.animationDurationUpdate}):(this.setDistance(g),this.setAlpha(I),this.setBeta(F),this.setCenter(ut),this.setOrthographicSize(x)),this._notFirst=!0,this._validateProperties()},_validateProperties:function(){},animateTo:function(e){var o=this.zr,u=this,c={},v={};return e.distance!=null&&(c.distance=this.getDistance(),v.distance=e.distance),e.orthographicSize!=null&&(c.orthographicSize=this.getOrthographicSize(),v.orthographicSize=e.orthographicSize),e.alpha!=null&&(c.alpha=this.getAlpha(),v.alpha=e.alpha),e.beta!=null&&(c.beta=this.getBeta(),v.beta=e.beta),e.center!=null&&(c.center=this.getCenter(),v.center=e.center),this._addAnimator(o.animation.animate(c).when(e.duration||1e3,v).during(function(){c.alpha!=null&&u.setAlpha(c.alpha),c.beta!=null&&u.setBeta(c.beta),c.distance!=null&&u.setDistance(c.distance),c.center!=null&&u.setCenter(c.center),c.orthographicSize!=null&&u.setOrthographicSize(c.orthographicSize),u._needsUpdate=!0})).start(e.easing||"linear")},stopAllAnimation:function(){for(var e=0;e<this._animators.length;e++)this._animators[e].stop();this._animators.length=0},update:function(){this._needsUpdate=!0,this._update(20)},_isAnimating:function(){return this._animators.length>0},_update:function(e){if(this._rotating){var o=(this.autoRotateDirection==="cw"?1:-1)*this.autoRotateSpeed/180*Math.PI;this._phi-=o*e/1e3,this._needsUpdate=!0}else this._rotateVelocity.len()>0&&(this._needsUpdate=!0);(Math.abs(this._zoomSpeed)>.1||this._panVelocity.len()>0)&&(this._needsUpdate=!0),!!this._needsUpdate&&(e=Math.min(e,50),this._updateDistanceOrSize(e),this._updatePan(e),this._updateRotate(e),this._updateTransform(),this.getCamera().update(),this.zr&&this.zr.refresh(),this.trigger("update"),this._needsUpdate=!1)},_updateRotate:function(e){var o=this._rotateVelocity;this._phi=o.y*e/20+this._phi,this._theta=o.x*e/20+this._theta,this.setAlpha(this.getAlpha()),this.setBeta(this.getBeta()),this._vectorDamping(o,Math.pow(this.damping,e/16))},_updateDistanceOrSize:function(e){this._projection==="perspective"?this._setDistance(this._distance+this._zoomSpeed*e/20):this._setOrthoSize(this._orthoSize+this._zoomSpeed*e/20),this._zoomSpeed*=Math.pow(this.damping,e/16)},_setDistance:function(e){this._distance=Math.max(Math.min(e,this.maxDistance),this.minDistance)},_setOrthoSize:function(e){this._orthoSize=Math.max(Math.min(e,this.maxOrthographicSize),this.minOrthographicSize);var o=this.getCamera(),u=this._orthoSize,c=u/this.viewGL.viewport.height*this.viewGL.viewport.width;o.left=-c/2,o.right=c/2,o.top=u/2,o.bottom=-u/2},_updatePan:function(e){var o=this._panVelocity,u=this._distance,c=this.getCamera(),v=c.worldTransform.y,g=c.worldTransform.x;this._center.scaleAndAdd(g,-o.x*u/200).scaleAndAdd(v,-o.y*u/200),this._vectorDamping(o,0)},_updateTransform:function(){var e=this.getCamera(),o=new or,u=this._theta+Math.PI/2,c=this._phi+Math.PI/2,v=Math.sin(u);o.x=v*Math.cos(c),o.y=-Math.cos(u),o.z=v*Math.sin(c),e.position.copy(this._center).scaleAndAdd(o,this._distance),e.rotation.identity().rotateY(-this._phi).rotateX(-this._theta)},_startCountingStill:function(){clearTimeout(this._stillTimeout);var e=this.autoRotateAfterStill,o=this;!isNaN(e)&&e>0&&(this._stillTimeout=setTimeout(function(){o._rotating=!0},e*1e3))},_vectorDamping:function(e,o){var u=e.len();u=u*o,u<1e-4&&(u=0),e.normalize().scale(u)},_decomposeTransform:function(){if(!!this.getCamera()){this.getCamera().updateWorldTransform();var e=this.getCamera().worldTransform.z,o=Math.asin(e.y),u=Math.atan2(e.x,e.z);this._theta=o,this._phi=-u,this.setBeta(this.getBeta()),this.setAlpha(this.getAlpha()),this.getCamera().aspect?this._setDistance(this.getCamera().position.dist(this._center)):this._setOrthoSize(this.getCamera().top-this.getCamera().bottom)}},_mouseDownHandler:function(e){if(!e.target&&!this._isAnimating()){var o=e.offsetX,u=e.offsetY;this.viewGL&&!this.viewGL.containPoint(o,u)||(this.zr.on("mousemove",this._mouseMoveHandler),this.zr.on("mouseup",this._mouseUpHandler),e.event.targetTouches?e.event.targetTouches.length===1&&(this._mode="rotate"):e.event.button===mh[this.rotateMouseButton]?this._mode="rotate":e.event.button===mh[this.panMouseButton]?this._mode="pan":this._mode="",this._rotateVelocity.set(0,0),this._rotating=!1,this.autoRotate&&this._startCountingStill(),this._mouseX=e.offsetX,this._mouseY=e.offsetY)}},_mouseMoveHandler:function(e){if(!(e.target&&e.target.__isGLToZRProxy)&&!this._isAnimating()){var o=yh(this.panSensitivity),u=yh(this.rotateSensitivity);this._mode==="rotate"?(this._rotateVelocity.y=(e.offsetX-this._mouseX)/this.zr.getHeight()*2*u[0],this._rotateVelocity.x=(e.offsetY-this._mouseY)/this.zr.getWidth()*2*u[1]):this._mode==="pan"&&(this._panVelocity.x=(e.offsetX-this._mouseX)/this.zr.getWidth()*o[0]*400,this._panVelocity.y=(-e.offsetY+this._mouseY)/this.zr.getHeight()*o[1]*400),this._mouseX=e.offsetX,this._mouseY=e.offsetY,e.event.preventDefault()}},_mouseWheelHandler:function(e){if(!this._isAnimating()){var o=e.event.wheelDelta||-e.event.detail;this._zoomHandler(e,o)}},_pinchHandler:function(e){this._isAnimating()||(this._zoomHandler(e,e.pinchScale>1?1:-1),this._mode="")},_zoomHandler:function(e,o){if(o!==0){var u=e.offsetX,c=e.offsetY;if(!(this.viewGL&&!this.viewGL.containPoint(u,c))){var v;this._projection==="perspective"?v=Math.max(Math.max(Math.min(this._distance-this.minDistance,this.maxDistance-this._distance))/20,.5):v=Math.max(Math.max(Math.min(this._orthoSize-this.minOrthographicSize,this.maxOrthographicSize-this._orthoSize))/20,.5),this._zoomSpeed=(o>0?-1:1)*v*this.zoomSensitivity,this._rotating=!1,this.autoRotate&&this._mode==="rotate"&&this._startCountingStill(),e.event.preventDefault()}}},_mouseUpHandler:function(){this.zr.off("mousemove",this._mouseMoveHandler),this.zr.off("mouseup",this._mouseUpHandler)},_isRightMouseButtonUsed:function(){return this.rotateMouseButton==="right"||this.panMouseButton==="right"},_contextMenuHandler:function(e){this._isRightMouseButtonUsed()&&e.preventDefault()},_addAnimator:function(e){var o=this._animators;return o.push(e),e.done(function(){var u=o.indexOf(e);u>=0&&o.splice(u,1)}),e}});Object.defineProperty(Bf.prototype,"autoRotate",{get:function(e){return this._autoRotate},set:function(e){this._autoRotate=e,this._rotating=e}});var _u=Bf,Cs={convertToDynamicArray:function(e){e&&this.resetOffset();var o=this.attributes;for(var u in o)e||!o[u].value?o[u].value=[]:o[u].value=Array.prototype.slice.call(o[u].value);e||!this.indices?this.indices=[]:this.indices=Array.prototype.slice.call(this.indices)},convertToTypedArray:function(){var e=this.attributes;for(var o in e)e[o].value&&e[o].value.length>0?e[o].value=new Float32Array(e[o].value):e[o].value=null;this.indices&&this.indices.length>0&&(this.indices=this.vertexCount>65535?new Uint32Array(this.indices):new Uint16Array(this.indices)),this.dirty()}},xp={vec2:Fe,vec3:Te,vec4:dr,mat2:Dn,mat2d:In,mat3:Fr,mat4:ir,quat:Br},Hn=xp,jf=Hn.vec3,zf=[[0,0],[1,1]],Es=$r.extend(function(){return{segmentScale:1,dynamic:!0,useNativeLine:!0,attributes:{position:new $r.Attribute("position","float",3,"POSITION"),positionPrev:new $r.Attribute("positionPrev","float",3),positionNext:new $r.Attribute("positionNext","float",3),prevPositionPrev:new $r.Attribute("prevPositionPrev","float",3),prevPosition:new $r.Attribute("prevPosition","float",3),prevPositionNext:new $r.Attribute("prevPositionNext","float",3),offset:new $r.Attribute("offset","float",1),color:new $r.Attribute("color","float",4,"COLOR")}}},{resetOffset:function(){this._vertexOffset=0,this._triangleOffset=0,this._itemVertexOffsets=[]},setVertexCount:function(e){var o=this.attributes;this.vertexCount!==e&&(o.position.init(e),o.color.init(e),this.useNativeLine||(o.positionPrev.init(e),o.positionNext.init(e),o.offset.init(e)),e>65535?this.indices instanceof Uint16Array&&(this.indices=new Uint32Array(this.indices)):this.indices instanceof Uint32Array&&(this.indices=new Uint16Array(this.indices)))},setTriangleCount:function(e){this.triangleCount!==e&&(e===0?this.indices=null:this.indices=this.vertexCount>65535?new Uint32Array(e*3):new Uint16Array(e*3))},_getCubicCurveApproxStep:function(e,o,u,c){var v=jf.dist(e,o)+jf.dist(u,o)+jf.dist(c,u),g=1/(v+1)*this.segmentScale;return g},getCubicCurveVertexCount:function(e,o,u,c){var v=this._getCubicCurveApproxStep(e,o,u,c),g=Math.ceil(1/v);return this.useNativeLine?g*2:g*2+2},getCubicCurveTriangleCount:function(e,o,u,c){var v=this._getCubicCurveApproxStep(e,o,u,c),g=Math.ceil(1/v);return this.useNativeLine?0:g*2},getLineVertexCount:function(){return this.getPolylineVertexCount(zf)},getLineTriangleCount:function(){return this.getPolylineTriangleCount(zf)},getPolylineVertexCount:function(e){var o;if(typeof e=="number")o=e;else{var u=typeof e[0]!="number";o=u?e.length:e.length/3}return this.useNativeLine?(o-1)*2:(o-1)*2+2},getPolylineTriangleCount:function(e){var o;if(typeof e=="number")o=e;else{var u=typeof e[0]!="number";o=u?e.length:e.length/3}return this.useNativeLine?0:Math.max(o-1,0)*2},addCubicCurve:function(e,o,u,c,v,g){g==null&&(g=1);for(var x=e[0],_=e[1],M=e[2],I=o[0],F=o[1],ut=o[2],yt=u[0],Dt=u[1],Et=u[2],Pt=c[0],Ht=c[1],$t=c[2],qt=this._getCubicCurveApproxStep(e,o,u,c),le=qt*qt,ie=le*qt,he=3*qt,Re=3*le,ze=6*le,Pe=6*ie,Ke=x-I*2+yt,rr=_-F*2+Dt,Ue=M-ut*2+Et,hr=(I-yt)*3-x+Pt,ke=(F-Dt)*3-_+Ht,Lr=(ut-Et)*3-M+$t,yr=x,xr=_,Sr=M,mr=(I-x)*he+Ke*Re+hr*ie,on=(F-_)*he+rr*Re+ke*ie,Or=(ut-M)*he+Ue*Re+Lr*ie,Sn=Ke*ze+hr*Pe,rn=rr*ze+ke*Pe,mn=Ue*ze+Lr*Pe,En=hr*Pe,tn=ke*Pe,li=Lr*Pe,Ln=0,jn=0,ui=Math.ceil(1/qt),$n=new Float32Array((ui+1)*3),$n=[],qn=0,jn=0;jn<ui+1;jn++)$n[qn++]=yr,$n[qn++]=xr,$n[qn++]=Sr,yr+=mr,xr+=on,Sr+=Or,mr+=Sn,on+=rn,Or+=mn,Sn+=En,rn+=tn,mn+=li,Ln+=qt,Ln>1&&(yr=mr>0?Math.min(yr,Pt):Math.max(yr,Pt),xr=on>0?Math.min(xr,Ht):Math.max(xr,Ht),Sr=Or>0?Math.min(Sr,$t):Math.max(Sr,$t));return this.addPolyline($n,v,g)},addLine:function(e,o,u,c){return this.addPolyline([e,o],u,c)},addPolyline:function(e,o,u,c,v){if(!!e.length){var g=typeof e[0]!="number";if(v==null&&(v=g?e.length:e.length/3),!(v<2)){c==null&&(c=0),u==null&&(u=1),this._itemVertexOffsets.push(this._vertexOffset);var g=typeof e[0]!="number",x=g?typeof o[0]!="number":o.length/4===v,_=this.attributes.position,M=this.attributes.positionPrev,I=this.attributes.positionNext,F=this.attributes.color,ut=this.attributes.offset,yt=this.indices,Dt=this._vertexOffset,Et,Pt;u=Math.max(u,.01);for(var Ht=c;Ht<v;Ht++){if(g)Et=e[Ht],x?Pt=o[Ht]:Pt=o;else{var $t=Ht*3;if(Et=Et||[],Et[0]=e[$t],Et[1]=e[$t+1],Et[2]=e[$t+2],x){var qt=Ht*4;Pt=Pt||[],Pt[0]=o[qt],Pt[1]=o[qt+1],Pt[2]=o[qt+2],Pt[3]=o[qt+3]}else Pt=o}if(this.useNativeLine?Ht>1&&(_.copy(Dt,Dt-1),F.copy(Dt,Dt-1),Dt++):(Ht<v-1&&(M.set(Dt+2,Et),M.set(Dt+3,Et)),Ht>0&&(I.set(Dt-2,Et),I.set(Dt-1,Et)),_.set(Dt,Et),_.set(Dt+1,Et),F.set(Dt,Pt),F.set(Dt+1,Pt),ut.set(Dt,u/2),ut.set(Dt+1,-u/2),Dt+=2),this.useNativeLine)F.set(Dt,Pt),_.set(Dt,Et),Dt++;else if(Ht>0){var le=this._triangleOffset*3,yt=this.indices;yt[le]=Dt-4,yt[le+1]=Dt-3,yt[le+2]=Dt-2,yt[le+3]=Dt-3,yt[le+4]=Dt-1,yt[le+5]=Dt-2,this._triangleOffset+=2}}if(!this.useNativeLine){var ie=this._vertexOffset,he=this._vertexOffset+v*2;M.copy(ie,ie+2),M.copy(ie+1,ie+3),I.copy(he-1,he-3),I.copy(he-2,he-4)}return this._vertexOffset=Dt,this._vertexOffset}}},setItemColor:function(e,o){for(var u=this._itemVertexOffsets[e],c=e<this._itemVertexOffsets.length-1?this._itemVertexOffsets[e+1]:this._vertexOffset,v=u;v<c;v++)this.attributes.color.set(v,o);this.dirty("color")},currentTriangleOffset:function(){return this._triangleOffset},currentVertexOffset:function(){return this._vertexOffset}});B.Y.defaults(Es.prototype,Cs);var Zo=Es;function Tu(n,e,o,u,c,v,g){this._zr=n,this._x=0,this._y=0,this._rowHeight=0,this.width=u,this.height=c,this.offsetX=e,this.offsetY=o,this.dpr=g,this.gap=v}Tu.prototype={constructor:Tu,clear:function(){this._x=0,this._y=0,this._rowHeight=0},add:function(e,o,u){var c=e.getBoundingRect();o==null&&(o=c.width),u==null&&(u=c.height),o*=this.dpr,u*=this.dpr,this._fitElement(e,o,u);var v=this._x,g=this._y,x=this.width*this.dpr,_=this.height*this.dpr,M=this.gap;if(v+o+M>x&&(v=this._x=0,g+=this._rowHeight+M,this._y=g,this._rowHeight=0),this._x+=o+M,this._rowHeight=Math.max(this._rowHeight,u),g+u+M>_)return null;e.x+=this.offsetX*this.dpr+v,e.y+=this.offsetY*this.dpr+g,this._zr.add(e);var I=[this.offsetX/this.width,this.offsetY/this.height],F=[[v/x+I[0],g/_+I[1]],[(v+o)/x+I[0],(g+u)/_+I[1]]];return F},_fitElement:function(e,o,u){var c=e.getBoundingRect(),v=o/c.width,g=u/c.height;e.x=-c.x*v,e.y=-c.y*g,e.scaleX=v,e.scaleY=g,e.update()}};function xh(n){n=n||{},n.width=n.width||512,n.height=n.height||512,n.devicePixelRatio=n.devicePixelRatio||1,n.gap=n.gap==null?2:n.gap;var e=document.createElement("canvas");e.width=n.width*n.devicePixelRatio,e.height=n.height*n.devicePixelRatio,this._canvas=e,this._texture=new Gr({image:e,flipY:!1});var o=this;this._zr=B.cb.init(e);var u=this._zr.refreshImmediately;this._zr.refreshImmediately=function(){u.call(this),o._texture.dirty(),o.onupdate&&o.onupdate()},this._dpr=n.devicePixelRatio,this._coords={},this.onupdate=n.onupdate,this._gap=n.gap,this._textureAtlasNodes=[new Tu(this._zr,0,0,n.width,n.height,this._gap,this._dpr)],this._nodeWidth=n.width,this._nodeHeight=n.height,this._currentNodeIdx=0}xh.prototype={clear:function(){for(var e=0;e<this._textureAtlasNodes.length;e++)this._textureAtlasNodes[e].clear();this._currentNodeIdx=0,this._zr.clear(),this._coords={}},getWidth:function(){return this._width},getHeight:function(){return this._height},getTexture:function(){return this._texture},getDevicePixelRatio:function(){return this._dpr},getZr:function(){return this._zr},_getCurrentNode:function(){return this._textureAtlasNodes[this._currentNodeIdx]},_expand:function(){if(this._currentNodeIdx++,this._textureAtlasNodes[this._currentNodeIdx])return this._textureAtlasNodes[this._currentNodeIdx];var e=4096/this._dpr,o=this._textureAtlasNodes,u=o.length,c=u*this._nodeWidth%e,v=Math.floor(u*this._nodeWidth/e)*this._nodeHeight;if(!(v>=e)){var g=(c+this._nodeWidth)*this._dpr,x=(v+this._nodeHeight)*this._dpr;try{this._zr.resize({width:g,height:x})}catch(M){this._canvas.width=g,this._canvas.height=x}var _=new Tu(this._zr,c,v,this._nodeWidth,this._nodeHeight,this._gap,this._dpr);return this._textureAtlasNodes.push(_),_}},add:function(e,o,u){if(this._coords[e.id])return this._coords[e.id];var c=this._getCurrentNode().add(e,o,u);if(!c){var v=this._expand();if(!v)return;c=v.add(e,o,u)}return this._coords[e.id]=c,c},getCoordsScale:function(){var e=this._dpr;return[this._nodeWidth/this._canvas.width*e,this._nodeHeight/this._canvas.height*e]},getCoords:function(e){return this._coords[e]}};var gl=xh;function ml(){}ml.prototype={constructor:ml,setScene:function(e){this._scene=e,this._skybox&&this._skybox.attachScene(this._scene)},initLight:function(e){this._lightRoot=e,this.mainLight=new se.DirectionalLight({shadowBias:.005}),this.ambientLight=new se.AmbientLight,e.add(this.mainLight),e.add(this.ambientLight)},dispose:function(){this._lightRoot&&(this._lightRoot.remove(this.mainLight),this._lightRoot.remove(this.ambientLight))},updateLight:function(e){var o=this.mainLight,u=this.ambientLight,c=e.getModel("light"),v=c.getModel("main"),g=c.getModel("ambient");o.intensity=v.get("intensity"),u.intensity=g.get("intensity"),o.color=se.parseColor(v.get("color")).slice(0,3),u.color=se.parseColor(g.get("color")).slice(0,3);var x=v.get("alpha")||0,_=v.get("beta")||0;o.position.setArray(se.directionFromAlphaBeta(x,_)),o.lookAt(se.Vector3.ZERO),o.castShadow=v.get("shadow"),o.shadowResolution=se.getShadowResolution(v.get("shadowQuality"))},updateAmbientCubemap:function(e,o,u){var c=o.getModel("light.ambientCubemap"),v=c.get("texture");if(v){this._cubemapLightsCache=this._cubemapLightsCache||{};var g=this._cubemapLightsCache[v];if(!g){var x=this;g=this._cubemapLightsCache[v]=se.createAmbientCubemap(c.option,e,u,function(){x._isSkyboxFromAmbientCubemap&&x._skybox.setEnvironmentMap(g.specular.cubemap),u.getZr().refresh()})}this._lightRoot.add(g.diffuse),this._lightRoot.add(g.specular),this._currentCubemapLights=g}else this._currentCubemapLights&&(this._lightRoot.remove(this._currentCubemapLights.diffuse),this._lightRoot.remove(this._currentCubemapLights.specular),this._currentCubemapLights=null)},updateSkybox:function(e,o,u){var c=o.get("environment"),v=this;function g(){return v._skybox=v._skybox||new ms,v._skybox}var x=g();if(c&&c!=="none")if(c==="auto")if(this._isSkyboxFromAmbientCubemap=!0,this._currentCubemapLights){var _=this._currentCubemapLights.specular.cubemap;x.setEnvironmentMap(_),this._scene&&x.attachScene(this._scene),x.material.set("lod",3)}else this._skybox&&this._skybox.detachScene();else if(typeof c=="object"&&c.colorStops||typeof c=="string"&&B.i.parse(c)){this._isSkyboxFromAmbientCubemap=!1;var M=new se.Texture2D({anisotropic:8,flipY:!1});x.setEnvironmentMap(M);var I=M.image=document.createElement("canvas");I.width=I.height=16;var F=I.getContext("2d"),ut=new B.z.Rect({shape:{x:0,y:0,width:16,height:16},style:{fill:c}});B.C(F,ut),x.attachScene(this._scene)}else{this._isSkyboxFromAmbientCubemap=!1;var M=se.loadTexture(c,u,{anisotropic:8,flipY:!1});x.setEnvironmentMap(M),x.attachScene(this._scene)}else this._skybox&&this._skybox.detachScene(this._scene),this._skybox=null;var yt=o.coordinateSystem;if(this._skybox)if(yt&&yt.viewGL&&c!=="auto"&&!(c.match&&c.match(/.hdr$/))){var Dt=yt.viewGL.isLinearSpace()?"define":"undefine";this._skybox.material[Dt]("fragment","SRGB_DECODE")}else this._skybox.material.undefine("fragment","SRGB_DECODE")}};var Ls=ml,Ko=Hn.vec3,bh=$r.extend(function(){return{segmentScale:1,useNativeLine:!0,attributes:{position:new $r.Attribute("position","float",3,"POSITION"),normal:new $r.Attribute("normal","float",3,"NORMAL"),color:new $r.Attribute("color","float",4,"COLOR")}}},{resetOffset:function(){this._vertexOffset=0,this._faceOffset=0},setQuadCount:function(e){var o=this.attributes,u=this.getQuadVertexCount()*e,c=this.getQuadTriangleCount()*e;this.vertexCount!==u&&(o.position.init(u),o.normal.init(u),o.color.init(u)),this.triangleCount!==c&&(this.indices=u>65535?new Uint32Array(c*3):new Uint16Array(c*3))},getQuadVertexCount:function(){return 4},getQuadTriangleCount:function(){return 2},addQuad:function(){var n=Ko.create(),e=Ko.create(),o=Ko.create(),u=[0,3,1,3,2,1];return function(c,v){var g=this.attributes.position,x=this.attributes.normal,_=this.attributes.color;Ko.sub(n,c[1],c[0]),Ko.sub(e,c[2],c[1]),Ko.cross(o,n,e),Ko.normalize(o,o);for(var M=0;M<4;M++)g.set(this._vertexOffset+M,c[M]),_.set(this._vertexOffset+M,v),x.set(this._vertexOffset+M,o);for(var I=this._faceOffset*3,M=0;M<6;M++)this.indices[I+M]=u[M]+this._vertexOffset;this._vertexOffset+=4,this._faceOffset+=2}}()});B.Y.defaults(bh.prototype,Cs);var Sh=bh,Ff=Kr.firstNotNull,bp={x:0,y:2,z:1};function Sp(n,e,o,u){var c=[0,0,0],v=u<0?o.getExtentMin():o.getExtentMax();c[bp[o.dim]]=v,n.position.setArray(c),n.rotation.identity(),e.distance=-Math.abs(v),e.normal.set(0,0,0),o.dim==="x"?(n.rotation.rotateY(u*Math.PI/2),e.normal.x=-u):o.dim==="z"?(n.rotation.rotateX(-u*Math.PI/2),e.normal.y=-u):(u>0&&n.rotation.rotateY(Math.PI),e.normal.z=-u)}function yl(n,e,o){this.rootNode=new se.Node;var u=new se.Mesh({geometry:new Zo({useNativeLine:!1}),material:e,castShadow:!1,ignorePicking:!0,$ignorePicking:!0,renderOrder:1}),c=new se.Mesh({geometry:new Sh,material:o,castShadow:!1,culling:!1,ignorePicking:!0,$ignorePicking:!0,renderOrder:0});this.rootNode.add(c),this.rootNode.add(u),this.faceInfo=n,this.plane=new se.Plane,this.linesMesh=u,this.quadsMesh=c}yl.prototype.update=function(n,e,o){var u=n.coordinateSystem,c=[u.getAxis(this.faceInfo[0]),u.getAxis(this.faceInfo[1])],v=this.linesMesh.geometry,g=this.quadsMesh.geometry;v.convertToDynamicArray(!0),g.convertToDynamicArray(!0),this._updateSplitLines(v,c,n,o),this._udpateSplitAreas(g,c,n,o),v.convertToTypedArray(),g.convertToTypedArray();var x=u.getAxis(this.faceInfo[2]);Sp(this.rootNode,this.plane,x,this.faceInfo[3])},yl.prototype._updateSplitLines=function(n,e,o,u){var c=u.getDevicePixelRatio();e.forEach(function(v,g){var x=v.model,_=e[1-g].getExtent();if(!v.scale.isBlank()){var M=x.getModel("splitLine",o.getModel("splitLine"));if(M.get("show")){var I=M.getModel("lineStyle"),F=I.get("color"),ut=Ff(I.get("opacity"),1),yt=Ff(I.get("width"),1);F=B.Y.isArray(F)?F:[F];for(var Dt=v.getTicksCoords({tickModel:M}),Et=0,Pt=0;Pt<Dt.length;Pt++){var Ht=Dt[Pt].coord,$t=se.parseColor(F[Et%F.length]);$t[3]*=ut;var qt=[0,0,0],le=[0,0,0];qt[g]=le[g]=Ht,qt[1-g]=_[0],le[1-g]=_[1],n.addLine(qt,le,$t,yt*c),Et++}}}})},yl.prototype._udpateSplitAreas=function(n,e,o,u){e.forEach(function(c,v){var g=c.model,x=e[1-v].getExtent();if(!c.scale.isBlank()){var _=g.getModel("splitArea",o.getModel("splitArea"));if(_.get("show")){var M=_.getModel("areaStyle"),I=M.get("color"),F=Ff(M.get("opacity"),1);I=B.Y.isArray(I)?I:[I];for(var ut=c.getTicksCoords({tickModel:_,clamp:!0}),yt=0,Dt=[0,0,0],Et=[0,0,0],Pt=0;Pt<ut.length;Pt++){var Ht=ut[Pt].coord,$t=[0,0,0],qt=[0,0,0];if($t[v]=qt[v]=Ht,$t[1-v]=x[0],qt[1-v]=x[1],Pt===0){Dt=$t,Et=qt;continue}var le=se.parseColor(I[yt%I.length]);le[3]*=F,n.addQuad([Dt,$t,qt,Et],le),Dt=$t,Et=qt,yt++}}}})};var _h=yl,Th=[0,1,2,0,2,3],Vf=$r.extend(function(){return{attributes:{position:new $r.Attribute("position","float",3,"POSITION"),texcoord:new $r.Attribute("texcoord","float",2,"TEXCOORD_0"),offset:new $r.Attribute("offset","float",2),color:new $r.Attribute("color","float",4,"COLOR")}}},{resetOffset:function(){this._vertexOffset=0,this._faceOffset=0},setSpriteCount:function(e){this._spriteCount=e;var o=e*4,u=e*2;this.vertexCount!==o&&(this.attributes.position.init(o),this.attributes.offset.init(o),this.attributes.color.init(o)),this.triangleCount!==u&&(this.indices=o>65535?new Uint32Array(u*3):new Uint16Array(u*3))},setSpriteAlign:function(e,o,u,c,v){u==null&&(u="left"),c==null&&(c="top");var g,x,_,M;switch(v=v||0,u){case"left":g=v,_=o[0]+v;break;case"center":case"middle":g=-o[0]/2,_=o[0]/2;break;case"right":g=-o[0]-v,_=-v;break}switch(c){case"bottom":x=v,M=o[1]+v;break;case"middle":x=-o[1]/2,M=o[1]/2;break;case"top":x=-o[1]-v,M=-v;break}var I=e*4,F=this.attributes.offset;F.set(I,[g,M]),F.set(I+1,[_,M]),F.set(I+2,[_,x]),F.set(I+3,[g,x])},addSprite:function(e,o,u,c,v,g){var x=this._vertexOffset;this.setSprite(this._vertexOffset/4,e,o,u,c,v,g);for(var _=0;_<Th.length;_++)this.indices[this._faceOffset*3+_]=Th[_]+x;return this._faceOffset+=2,this._vertexOffset+=4,x/4},setSprite:function(e,o,u,c,v,g,x){for(var _=e*4,M=this.attributes,I=0;I<4;I++)M.position.set(_+I,o);var F=M.texcoord;F.set(_,[c[0][0],c[0][1]]),F.set(_+1,[c[1][0],c[0][1]]),F.set(_+2,[c[1][0],c[1][1]]),F.set(_+3,[c[0][0],c[1][1]]),this.setSpriteAlign(e,u,v,g,x)}});B.Y.defaults(Vf.prototype,Cs);var Gf=Vf,_p=`@export ecgl.labels.vertex

attribute vec3 position: POSITION;
attribute vec2 texcoord: TEXCOORD_0;
attribute vec2 offset;
#ifdef VERTEX_COLOR
attribute vec4 a_Color : COLOR;
varying vec4 v_Color;
#endif

uniform mat4 worldViewProjection : WORLDVIEWPROJECTION;
uniform vec4 viewport : VIEWPORT;

varying vec2 v_Texcoord;

void main()
{
 vec4 proj = worldViewProjection * vec4(position, 1.0);

 vec2 screen = (proj.xy / abs(proj.w) + 1.0) * 0.5 * viewport.zw;

 screen += offset;

 proj.xy = (screen / viewport.zw - 0.5) * 2.0 * abs(proj.w);
 gl_Position = proj;
#ifdef VERTEX_COLOR
 v_Color = a_Color;
#endif
 v_Texcoord = texcoord;
}
@end


@export ecgl.labels.fragment

uniform vec3 color : [1.0, 1.0, 1.0];
uniform float alpha : 1.0;
uniform sampler2D textureAtlas;
uniform vec2 uvScale: [1.0, 1.0];

#ifdef VERTEX_COLOR
varying vec4 v_Color;
#endif
varying float v_Miter;

varying vec2 v_Texcoord;

void main()
{
 gl_FragColor = vec4(color, alpha) * texture2D(textureAtlas, v_Texcoord * uvScale);
#ifdef VERTEX_COLOR
 gl_FragColor *= v_Color;
#endif
}

@end`;se.Shader.import(_p);var Ou=se.Mesh.extend(function(){var n=new Gf({dynamic:!0}),e=new se.Material({shader:se.createShader("ecgl.labels"),transparent:!0,depthMask:!1});return{geometry:n,material:e,culling:!1,castShadow:!1,ignorePicking:!0}}),ko=Kr.firstNotNull,Qo={x:0,y:2,z:1};function Uf(n,e){var o=new se.Mesh({geometry:new Zo({useNativeLine:!1}),material:e,castShadow:!1,ignorePicking:!0,renderOrder:2}),u=new Ou;u.material.depthMask=!1;var c=new se.Node;c.add(o),c.add(u),this.rootNode=c,this.dim=n,this.linesMesh=o,this.labelsMesh=u,this.axisLineCoords=null,this.labelElements=[]}var xl={x:"y",y:"x",z:"y"};Uf.prototype.update=function(n,e,o){var u=n.coordinateSystem,c=u.getAxis(this.dim),v=this.linesMesh.geometry,g=this.labelsMesh.geometry;v.convertToDynamicArray(!0),g.convertToDynamicArray(!0);var x=c.model,_=c.getExtent(),M=o.getDevicePixelRatio(),I=x.getModel("axisLine",n.getModel("axisLine")),F=x.getModel("axisTick",n.getModel("axisTick")),ut=x.getModel("axisLabel",n.getModel("axisLabel")),yt=I.get("lineStyle.color");if(I.get("show")){var Dt=I.getModel("lineStyle"),Et=[0,0,0],Pt=[0,0,0],Ht=Qo[c.dim];Et[Ht]=_[0],Pt[Ht]=_[1],this.axisLineCoords=[Et,Pt];var $t=se.parseColor(yt),qt=ko(Dt.get("width"),1),le=ko(Dt.get("opacity"),1);$t[3]*=le,v.addLine(Et,Pt,$t,qt*M)}if(F.get("show")){var ie=F.getModel("lineStyle"),he=se.parseColor(ko(ie.get("color"),yt)),qt=ko(ie.get("width"),1);he[3]*=ko(ie.get("opacity"),1);for(var Re=c.getTicksCoords(),ze=F.get("length"),Pe=0;Pe<Re.length;Pe++){var Ke=Re[Pe].coord,Et=[0,0,0],Pt=[0,0,0],Ht=Qo[c.dim],rr=Qo[xl[c.dim]];Et[Ht]=Pt[Ht]=Ke,Pt[rr]=ze,v.addLine(Et,Pt,he,qt*M)}}this.labelElements=[];var M=o.getDevicePixelRatio();if(ut.get("show"))for(var Re=c.getTicksCoords(),Ue=x.get("data"),hr=ut.get("margin"),ke=c.getViewLabels(),Pe=0;Pe<ke.length;Pe++){var Lr=ke[Pe].tickValue,yr=ke[Pe].formattedLabel,xr=ke[Pe].rawLabel,Ke=c.dataToCoord(Lr),Sr=[0,0,0],Ht=Qo[c.dim],rr=Qo[xl[c.dim]];Sr[Ht]=Sr[Ht]=Ke,Sr[rr]=hr;var mr=ut;Ue&&Ue[Lr]&&Ue[Lr].textStyle&&(mr=new B.f(Ue[Lr].textStyle,ut,x.ecModel));var on=ko(mr.get("color"),yt),Or=new B.z.Text({style:Object(Ms.c)(mr,{text:yr,fill:typeof on=="function"?on(c.type==="category"?xr:c.type==="value"?Lr+"":Lr,Pe):on,verticalAlign:"top",align:"left"})}),Sn=e.add(Or),rn=Or.getBoundingRect();g.addSprite(Sr,[rn.width*M,rn.height*M],Sn),this.labelElements.push(Or)}if(x.get("name")){var mn=x.getModel("nameTextStyle"),Sr=[0,0,0],Ht=Qo[c.dim],rr=Qo[xl[c.dim]],En=ko(mn.get("color"),yt),tn=mn.get("borderColor"),qt=mn.get("borderWidth");Sr[Ht]=Sr[Ht]=(_[0]+_[1])/2,Sr[rr]=x.get("nameGap");var Or=new B.z.Text({style:Object(Ms.c)(mn,{text:x.get("name"),fill:En,stroke:tn,lineWidth:qt})}),Sn=e.add(Or),rn=Or.getBoundingRect();g.addSprite(Sr,[rn.width*M,rn.height*M],Sn),Or.__idx=this.labelElements.length,this.nameLabelElement=Or}this.labelsMesh.material.set("textureAtlas",e.getTexture()),this.labelsMesh.material.set("uvScale",e.getCoordsScale()),v.convertToTypedArray(),g.convertToTypedArray()},Uf.prototype.setSpriteAlign=function(n,e,o){for(var u=o.getDevicePixelRatio(),c=this.labelsMesh.geometry,v=0;v<this.labelElements.length;v++){var g=this.labelElements[v],x=g.getBoundingRect();c.setSpriteAlign(v,[x.width*u,x.height*u],n,e)}var _=this.nameLabelElement;if(_){var x=_.getBoundingRect();c.setSpriteAlign(_.__idx,[x.width*u,x.height*u],n,e),c.dirty()}this.textAlign=n,this.textVerticalAlign=e};var Tp=Uf,Au=`@export ecgl.lines3D.vertex

uniform mat4 worldViewProjection : WORLDVIEWPROJECTION;

attribute vec3 position: POSITION;
attribute vec4 a_Color : COLOR;
varying vec4 v_Color;

void main()
{
 gl_Position = worldViewProjection * vec4(position, 1.0);
 v_Color = a_Color;
}

@end

@export ecgl.lines3D.fragment

uniform vec4 color : [1.0, 1.0, 1.0, 1.0];

varying vec4 v_Color;

@import clay.util.srgb

void main()
{
#ifdef SRGB_DECODE
 gl_FragColor = sRGBToLinear(color * v_Color);
#else
 gl_FragColor = color * v_Color;
#endif
}
@end



@export ecgl.lines3D.clipNear

vec4 clipNear(vec4 p1, vec4 p2) {
 float n = (p1.w - near) / (p1.w - p2.w);
 return vec4(mix(p1.xy, p2.xy, n), -near, near);
}

@end

@export ecgl.lines3D.expandLine
#ifdef VERTEX_ANIMATION
 vec4 prevProj = worldViewProjection * vec4(mix(prevPositionPrev, positionPrev, percent), 1.0);
 vec4 currProj = worldViewProjection * vec4(mix(prevPosition, position, percent), 1.0);
 vec4 nextProj = worldViewProjection * vec4(mix(prevPositionNext, positionNext, percent), 1.0);
#else
 vec4 prevProj = worldViewProjection * vec4(positionPrev, 1.0);
 vec4 currProj = worldViewProjection * vec4(position, 1.0);
 vec4 nextProj = worldViewProjection * vec4(positionNext, 1.0);
#endif

 if (currProj.w < 0.0) {
 if (nextProj.w > 0.0) {
 currProj = clipNear(currProj, nextProj);
 }
 else if (prevProj.w > 0.0) {
 currProj = clipNear(currProj, prevProj);
 }
 }

 vec2 prevScreen = (prevProj.xy / abs(prevProj.w) + 1.0) * 0.5 * viewport.zw;
 vec2 currScreen = (currProj.xy / abs(currProj.w) + 1.0) * 0.5 * viewport.zw;
 vec2 nextScreen = (nextProj.xy / abs(nextProj.w) + 1.0) * 0.5 * viewport.zw;

 vec2 dir;
 float len = offset;
 if (position == positionPrev) {
 dir = normalize(nextScreen - currScreen);
 }
 else if (position == positionNext) {
 dir = normalize(currScreen - prevScreen);
 }
 else {
 vec2 dirA = normalize(currScreen - prevScreen);
 vec2 dirB = normalize(nextScreen - currScreen);

 vec2 tanget = normalize(dirA + dirB);

 float miter = 1.0 / max(dot(tanget, dirA), 0.5);
 len *= miter;
 dir = tanget;
 }

 dir = vec2(-dir.y, dir.x) * len;
 currScreen += dir;

 currProj.xy = (currScreen / viewport.zw - 0.5) * 2.0 * abs(currProj.w);
@end


@export ecgl.meshLines3D.vertex

attribute vec3 position: POSITION;
attribute vec3 positionPrev;
attribute vec3 positionNext;
attribute float offset;
attribute vec4 a_Color : COLOR;

#ifdef VERTEX_ANIMATION
attribute vec3 prevPosition;
attribute vec3 prevPositionPrev;
attribute vec3 prevPositionNext;
uniform float percent : 1.0;
#endif

uniform mat4 worldViewProjection : WORLDVIEWPROJECTION;
uniform vec4 viewport : VIEWPORT;
uniform float near : NEAR;

varying vec4 v_Color;

@import ecgl.common.wireframe.vertexHeader

@import ecgl.lines3D.clipNear

void main()
{
 @import ecgl.lines3D.expandLine

 gl_Position = currProj;

 v_Color = a_Color;

 @import ecgl.common.wireframe.vertexMain
}
@end


@export ecgl.meshLines3D.fragment

uniform vec4 color : [1.0, 1.0, 1.0, 1.0];

varying vec4 v_Color;

@import ecgl.common.wireframe.fragmentHeader

@import clay.util.srgb

void main()
{
#ifdef SRGB_DECODE
 gl_FragColor = sRGBToLinear(color * v_Color);
#else
 gl_FragColor = color * v_Color;
#endif

 @import ecgl.common.wireframe.fragmentMain
}

@end`,Oh=Kr.firstNotNull;se.Shader.import(Au);var ia={x:0,y:2,z:1},Op=B.d.extend({type:"grid3D",__ecgl__:!0,init:function(e,o){var u=[["y","z","x",-1,"left"],["y","z","x",1,"right"],["x","y","z",-1,"bottom"],["x","y","z",1,"top"],["x","z","y",-1,"far"],["x","z","y",1,"near"]],c=["x","y","z"],v=new se.Material({shader:se.createShader("ecgl.color"),depthMask:!1,transparent:!0}),g=new se.Material({shader:se.createShader("ecgl.meshLines3D"),depthMask:!1,transparent:!0});v.define("fragment","DOUBLE_SIDED"),v.define("both","VERTEX_COLOR"),this.groupGL=new se.Node,this._control=new _u({zr:o.getZr()}),this._control.init(),this._faces=u.map(function(_){var M=new _h(_,g,v);return this.groupGL.add(M.rootNode),M},this),this._axes=c.map(function(_){var M=new Tp(_,g);return this.groupGL.add(M.rootNode),M},this);var x=o.getDevicePixelRatio();this._axisLabelSurface=new gl({width:256,height:256,devicePixelRatio:x}),this._axisLabelSurface.onupdate=function(){o.getZr().refresh()},this._axisPointerLineMesh=new se.Mesh({geometry:new Zo({useNativeLine:!1}),material:g,castShadow:!1,ignorePicking:!0,renderOrder:3}),this.groupGL.add(this._axisPointerLineMesh),this._axisPointerLabelsSurface=new gl({width:128,height:128,devicePixelRatio:x}),this._axisPointerLabelsMesh=new Ou({ignorePicking:!0,renderOrder:4,castShadow:!1}),this._axisPointerLabelsMesh.material.set("textureAtlas",this._axisPointerLabelsSurface.getTexture()),this.groupGL.add(this._axisPointerLabelsMesh),this._lightRoot=new se.Node,this._sceneHelper=new Ls,this._sceneHelper.initLight(this._lightRoot)},render:function(e,o,u){this._model=e,this._api=u;var c=e.coordinateSystem;c.viewGL.add(this._lightRoot),e.get("show")?c.viewGL.add(this.groupGL):c.viewGL.remove(this.groupGL);var v=this._control;v.setViewGL(c.viewGL);var g=e.getModel("viewControl");v.setFromViewControlModel(g,0),this._axisLabelSurface.clear(),v.off("update"),e.get("show")&&(this._faces.forEach(function(x){x.update(e,o,u)},this),this._axes.forEach(function(x){x.update(e,this._axisLabelSurface,u)},this)),v.on("update",this._onCameraChange.bind(this,e,u),this),this._sceneHelper.setScene(c.viewGL.scene),this._sceneHelper.updateLight(e),c.viewGL.setPostEffect(e.getModel("postEffect"),u),c.viewGL.setTemporalSuperSampling(e.getModel("temporalSuperSampling")),this._initMouseHandler(e)},afterRender:function(e,o,u,c){var v=c.renderer;this._sceneHelper.updateAmbientCubemap(v,e,u),this._sceneHelper.updateSkybox(v,e,u)},showAxisPointer:function(e,o,u,c){this._doShowAxisPointer(),this._updateAxisPointer(c.value)},hideAxisPointer:function(e,o,u,c){this._doHideAxisPointer()},_initMouseHandler:function(e){var o=e.coordinateSystem,u=o.viewGL;e.get("show")&&e.get("axisPointer.show")?u.on("mousemove",this._updateAxisPointerOnMousePosition,this):u.off("mousemove",this._updateAxisPointerOnMousePosition)},_updateAxisPointerOnMousePosition:function(e){if(!e.target){for(var o=this._model,u=o.coordinateSystem,c=u.viewGL,v=c.castRay(e.offsetX,e.offsetY,new se.Ray),g,x=0;x<this._faces.length;x++){var _=this._faces[x];if(!_.rootNode.invisible){_.plane.normal.dot(c.camera.worldTransform.z)<0&&_.plane.normal.negate();var M=v.intersectPlane(_.plane);if(!!M){var I=u.getAxis(_.faceInfo[0]),F=u.getAxis(_.faceInfo[1]),ut=ia[_.faceInfo[0]],yt=ia[_.faceInfo[1]];I.contain(M.array[ut])&&F.contain(M.array[yt])&&(g=M)}}}if(g){var Dt=u.pointToData(g.array,[],!0);this._updateAxisPointer(Dt),this._doShowAxisPointer()}else this._doHideAxisPointer()}},_onCameraChange:function(e,o){e.get("show")&&(this._updateFaceVisibility(),this._updateAxisLinePosition());var u=this._control;o.dispatchAction({type:"grid3DChangeCamera",alpha:u.getAlpha(),beta:u.getBeta(),distance:u.getDistance(),center:u.getCenter(),from:this.uid,grid3DId:e.id})},_updateFaceVisibility:function(){var e=this._control.getCamera(),o=new se.Vector3;e.update();for(var u=0;u<this._faces.length/2;u++){for(var c=[],v=0;v<2;v++){var g=this._faces[u*2+v];g.rootNode.getWorldPosition(o),o.transformMat4(e.viewMatrix),c[v]=o.z}var x=c[0]>c[1]?0:1,_=this._faces[u*2+x],M=this._faces[u*2+1-x];_.rootNode.invisible=!0,M.rootNode.invisible=!1}},_updateAxisLinePosition:function(){var e=this._model.coordinateSystem,o=e.getAxis("x"),u=e.getAxis("y"),c=e.getAxis("z"),v=c.getExtentMax(),g=c.getExtentMin(),x=o.getExtentMin(),_=o.getExtentMax(),M=u.getExtentMax(),I=u.getExtentMin(),F=this._axes[0].rootNode,ut=this._axes[1].rootNode,yt=this._axes[2].rootNode,Dt=this._faces,Et=Dt[4].rootNode.invisible?I:M,Pt=Dt[2].rootNode.invisible?v:g,Ht=Dt[0].rootNode.invisible?x:_,$t=Dt[2].rootNode.invisible?v:g,qt=Dt[0].rootNode.invisible?_:x,le=Dt[4].rootNode.invisible?I:M;F.rotation.identity(),ut.rotation.identity(),yt.rotation.identity(),Dt[4].rootNode.invisible&&(this._axes[0].flipped=!0,F.rotation.rotateX(Math.PI)),Dt[0].rootNode.invisible&&(this._axes[1].flipped=!0,ut.rotation.rotateZ(Math.PI)),Dt[4].rootNode.invisible&&(this._axes[2].flipped=!0,yt.rotation.rotateY(Math.PI)),F.position.set(0,Pt,Et),ut.position.set(Ht,$t,0),yt.position.set(qt,0,le),F.update(),ut.update(),yt.update(),this._updateAxisLabelAlign()},_updateAxisLabelAlign:function(){var e=this._control.getCamera(),o=[new se.Vector4,new se.Vector4],u=new se.Vector4;this.groupGL.getWorldPosition(u),u.w=1,u.transformMat4(e.viewMatrix).transformMat4(e.projectionMatrix),u.x/=u.w,u.y/=u.w,this._axes.forEach(function(c){for(var v=c.axisLineCoords,g=c.labelsMesh.geometry,x=0;x<o.length;x++)o[x].setArray(v[x]),o[x].w=1,o[x].transformMat4(c.rootNode.worldTransform).transformMat4(e.viewMatrix).transformMat4(e.projectionMatrix),o[x].x/=o[x].w,o[x].y/=o[x].w;var _=o[1].x-o[0].x,M=o[1].y-o[0].y,I=(o[1].x+o[0].x)/2,F=(o[1].y+o[0].y)/2,ut,yt;Math.abs(M/_)<.5?(ut="center",yt=F>u.y?"bottom":"top"):(yt="middle",ut=I>u.x?"left":"right"),c.setSpriteAlign(ut,yt,this._api)},this)},_doShowAxisPointer:function(){!this._axisPointerLineMesh.invisible||(this._axisPointerLineMesh.invisible=!1,this._axisPointerLabelsMesh.invisible=!1,this._api.getZr().refresh())},_doHideAxisPointer:function(){this._axisPointerLineMesh.invisible||(this._axisPointerLineMesh.invisible=!0,this._axisPointerLabelsMesh.invisible=!0,this._api.getZr().refresh())},_updateAxisPointer:function(e){var o=this._model.coordinateSystem,u=o.dataToPoint(e),c=this._axisPointerLineMesh,v=c.geometry,g=this._model.getModel("axisPointer"),x=this._api.getDevicePixelRatio();v.convertToDynamicArray(!0);function _(Pe){return Kr.firstNotNull(Pe.model.get("axisPointer.show"),g.get("show"))}function M(Pe){var Ke=Pe.model.getModel("axisPointer",g),rr=Ke.getModel("lineStyle"),Ue=se.parseColor(rr.get("color")),hr=Oh(rr.get("width"),1),ke=Oh(rr.get("opacity"),1);return Ue[3]*=ke,{color:Ue,lineWidth:hr}}for(var I=0;I<this._faces.length;I++){var F=this._faces[I];if(!F.rootNode.invisible){for(var ut=F.faceInfo,yt=ut[3]<0?o.getAxis(ut[2]).getExtentMin():o.getAxis(ut[2]).getExtentMax(),Dt=ia[ut[2]],Et=0;Et<2;Et++){var Pt=ut[Et],Ht=ut[1-Et],$t=o.getAxis(Pt),qt=o.getAxis(Ht);if(!!_($t)){var le=[0,0,0],ie=[0,0,0],he=ia[Pt],Re=ia[Ht];le[he]=ie[he]=u[he],le[Dt]=ie[Dt]=yt,le[Re]=qt.getExtentMin(),ie[Re]=qt.getExtentMax();var ze=M($t);v.addLine(le,ie,ze.color,ze.lineWidth*x)}}if(_(o.getAxis(ut[2]))){var le=u.slice(),ie=u.slice();ie[Dt]=yt;var ze=M(o.getAxis(ut[2]));v.addLine(le,ie,ze.color,ze.lineWidth*x)}}}v.convertToTypedArray(),this._updateAxisPointerLabelsMesh(e),this._api.getZr().refresh()},_updateAxisPointerLabelsMesh:function(e){var o=this._model,u=this._axisPointerLabelsMesh,c=this._axisPointerLabelsSurface,v=o.coordinateSystem,g=o.getModel("axisPointer");u.geometry.convertToDynamicArray(!0),c.clear();var x={x:"y",y:"x",z:"y"};this._axes.forEach(function(_,M){var I=v.getAxis(_.dim),F=I.model,ut=F.getModel("axisPointer",g),yt=ut.getModel("label"),Dt=ut.get("lineStyle.color");if(!(!yt.get("show")||!ut.get("show"))){var Et=e[M],Pt=yt.get("formatter"),Ht=I.scale.getLabel({value:Et});if(Pt!=null)Ht=Pt(Ht,e);else if(I.scale.type==="interval"||I.scale.type==="log"){var $t=B.E.getPrecisionSafe(I.scale.getTicks()[0]);Ht=Et.toFixed($t+2)}var qt=yt.get("color"),le=new B.z.Text({style:Object(Ms.c)(yt,{text:Ht,fill:qt||Dt,align:"left",verticalAlign:"top"})}),ie=c.add(le),he=le.getBoundingRect(),Re=this._api.getDevicePixelRatio(),ze=_.rootNode.position.toArray(),Pe=ia[x[_.dim]];ze[Pe]+=(_.flipped?-1:1)*yt.get("margin"),ze[ia[_.dim]]=I.dataToCoord(e[M]),u.geometry.addSprite(ze,[he.width*Re,he.height*Re],ie,_.textAlign,_.textVerticalAlign)}},this),c.getZr().refreshImmediately(),u.material.set("uvScale",c.getCoordsScale()),u.geometry.convertToTypedArray()},dispose:function(){this.groupGL.removeAll(),this._control.dispose()}}),Ah=S("z35g");function Mu(n){Ah.a.call(this,n),this.type="cartesian3D",this.dimensions=["x","y","z"],this.size=[0,0,0]}Mu.prototype={constructor:Mu,model:null,containPoint:function(e){return this.getAxis("x").contain(e[0])&&this.getAxis("y").contain(e[2])&&this.getAxis("z").contain(e[1])},containData:function(e){return this.getAxis("x").containData(e[0])&&this.getAxis("y").containData(e[1])&&this.getAxis("z").containData(e[2])},dataToPoint:function(e,o,u){return o=o||[],o[0]=this.getAxis("x").dataToCoord(e[0],u),o[2]=this.getAxis("y").dataToCoord(e[1],u),o[1]=this.getAxis("z").dataToCoord(e[2],u),o},pointToData:function(e,o,u){return o=o||[],o[0]=this.getAxis("x").coordToData(e[0],u),o[1]=this.getAxis("y").coordToData(e[2],u),o[2]=this.getAxis("z").coordToData(e[1],u),o}},B.Y.inherits(Mu,Ah.a);var Mh=Mu;function Du(n,e,o){B.a.call(this,n,e,o)}Du.prototype={constructor:Du,getExtentMin:function(){var e=this._extent;return Math.min(e[0],e[1])},getExtentMax:function(){var e=this._extent;return Math.max(e[0],e[1])},calculateCategoryInterval:function(){return Math.floor(this.scale.count()/8)}},B.Y.inherits(Du,B.a);var bl=Du,Sl=S("+TT/"),_l=function(){this._pool={},this._allocatedTextures=[]};_l.prototype={constructor:_l,get:function(e){var o=Wf(e);this._pool.hasOwnProperty(o)||(this._pool[o]=[]);var u=this._pool[o];if(!u.length){var c=new Gr(e);return this._allocatedTextures.push(c),c}return u.pop()},put:function(e){var o=Wf(e);this._pool.hasOwnProperty(o)||(this._pool[o]=[]);var u=this._pool[o];u.push(e)},clear:function(e){for(var o=0;o<this._allocatedTextures.length;o++)this._allocatedTextures[o].dispose(e);this._pool={},this._allocatedTextures=[]}};var Cu={width:512,height:512,type:$.UNSIGNED_BYTE,format:$.RGBA,wrapS:$.CLAMP_TO_EDGE,wrapT:$.CLAMP_TO_EDGE,minFilter:$.LINEAR_MIPMAP_LINEAR,magFilter:$.LINEAR,useMipmap:!0,anisotropic:1,flipY:!0,unpackAlignment:4,premultiplyAlpha:!1},Hf=Object.keys(Cu);function Wf(n){bt.defaultsWithPropList(n,Cu,Hf),Ap(n);for(var e="",o=0;o<Hf.length;o++){var u=Hf[o],c=n[u].toString();e+=c}return e}function Ap(n){var e=Yf(n.width,n.height);n.format===$.DEPTH_COMPONENT&&(n.useMipmap=!1),(!e||!n.useMipmap)&&(n.minFilter==$.NEAREST_MIPMAP_NEAREST||n.minFilter==$.NEAREST_MIPMAP_LINEAR?n.minFilter=$.NEAREST:(n.minFilter==$.LINEAR_MIPMAP_LINEAR||n.minFilter==$.LINEAR_MIPMAP_NEAREST)&&(n.minFilter=$.LINEAR)),e||(n.wrapS=$.CLAMP_TO_EDGE,n.wrapT=$.CLAMP_TO_EDGE)}function Yf(n,e){return(n&n-1)==0&&(e&e-1)==0}var Xf=_l,Mp=`@export clay.sm.depth.vertex
uniform mat4 worldViewProjection : WORLDVIEWPROJECTION;
attribute vec3 position : POSITION;
attribute vec2 texcoord : TEXCOORD_0;
uniform vec2 uvRepeat = vec2(1.0, 1.0);
uniform vec2 uvOffset = vec2(0.0, 0.0);
@import clay.chunk.skinning_header
@import clay.chunk.instancing_header
varying vec4 v_ViewPosition;
varying vec2 v_Texcoord;
void main(){
 vec4 P = vec4(position, 1.0);
#ifdef SKINNING
 @import clay.chunk.skin_matrix
 P = skinMatrixWS * P;
#endif
#ifdef INSTANCING
 @import clay.chunk.instancing_matrix
 P = instanceMat * P;
#endif
 v_ViewPosition = worldViewProjection * P;
 gl_Position = v_ViewPosition;
 v_Texcoord = texcoord * uvRepeat + uvOffset;
}
@end
@export clay.sm.depth.fragment
varying vec4 v_ViewPosition;
varying vec2 v_Texcoord;
uniform float bias : 0.001;
uniform float slopeScale : 1.0;
uniform sampler2D alphaMap;
uniform float alphaCutoff: 0.0;
@import clay.util.encode_float
void main(){
 float depth = v_ViewPosition.z / v_ViewPosition.w;
 if (alphaCutoff > 0.0) {
 if (texture2D(alphaMap, v_Texcoord).a <= alphaCutoff) {
 discard;
 }
 }
#ifdef USE_VSM
 depth = depth * 0.5 + 0.5;
 float moment1 = depth;
 float moment2 = depth * depth;
 #ifdef SUPPORT_STANDARD_DERIVATIVES
 float dx = dFdx(depth);
 float dy = dFdy(depth);
 moment2 += 0.25*(dx*dx+dy*dy);
 #endif
 gl_FragColor = vec4(moment1, moment2, 0.0, 1.0);
#else
 #ifdef SUPPORT_STANDARD_DERIVATIVES
 float dx = dFdx(depth);
 float dy = dFdy(depth);
 depth += sqrt(dx*dx + dy*dy) * slopeScale + bias;
 #else
 depth += bias;
 #endif
 gl_FragColor = encodeFloat(depth * 0.5 + 0.5);
#endif
}
@end
@export clay.sm.debug_depth
uniform sampler2D depthMap;
varying vec2 v_Texcoord;
@import clay.util.decode_float
void main() {
 vec4 tex = texture2D(depthMap, v_Texcoord);
#ifdef USE_VSM
 gl_FragColor = vec4(tex.rgb, 1.0);
#else
 float depth = decodeFloat(tex);
 gl_FragColor = vec4(depth, depth, depth, 1.0);
#endif
}
@end
@export clay.sm.distance.vertex
uniform mat4 worldViewProjection : WORLDVIEWPROJECTION;
uniform mat4 world : WORLD;
attribute vec3 position : POSITION;
@import clay.chunk.skinning_header
varying vec3 v_WorldPosition;
void main (){
 vec4 P = vec4(position, 1.0);
#ifdef SKINNING
 @import clay.chunk.skin_matrix
 P = skinMatrixWS * P;
#endif
#ifdef INSTANCING
 @import clay.chunk.instancing_matrix
 P = instanceMat * P;
#endif
 gl_Position = worldViewProjection * P;
 v_WorldPosition = (world * P).xyz;
}
@end
@export clay.sm.distance.fragment
uniform vec3 lightPosition;
uniform float range : 100;
varying vec3 v_WorldPosition;
@import clay.util.encode_float
void main(){
 float dist = distance(lightPosition, v_WorldPosition);
#ifdef USE_VSM
 gl_FragColor = vec4(dist, dist * dist, 0.0, 0.0);
#else
 dist = dist / range;
 gl_FragColor = encodeFloat(dist);
#endif
}
@end
@export clay.plugin.shadow_map_common
@import clay.util.decode_float
float tapShadowMap(sampler2D map, vec2 uv, float z){
 vec4 tex = texture2D(map, uv);
 return step(z, decodeFloat(tex) * 2.0 - 1.0);
}
float pcf(sampler2D map, vec2 uv, float z, float textureSize, vec2 scale) {
 float shadowContrib = tapShadowMap(map, uv, z);
 vec2 offset = vec2(1.0 / textureSize) * scale;
#ifdef PCF_KERNEL_SIZE
 for (int _idx_ = 0; _idx_ < PCF_KERNEL_SIZE; _idx_++) {{
 shadowContrib += tapShadowMap(map, uv + offset * pcfKernel[_idx_], z);
 }}
 return shadowContrib / float(PCF_KERNEL_SIZE + 1);
#else
 shadowContrib += tapShadowMap(map, uv+vec2(offset.x, 0.0), z);
 shadowContrib += tapShadowMap(map, uv+vec2(offset.x, offset.y), z);
 shadowContrib += tapShadowMap(map, uv+vec2(-offset.x, offset.y), z);
 shadowContrib += tapShadowMap(map, uv+vec2(0.0, offset.y), z);
 shadowContrib += tapShadowMap(map, uv+vec2(-offset.x, 0.0), z);
 shadowContrib += tapShadowMap(map, uv+vec2(-offset.x, -offset.y), z);
 shadowContrib += tapShadowMap(map, uv+vec2(offset.x, -offset.y), z);
 shadowContrib += tapShadowMap(map, uv+vec2(0.0, -offset.y), z);
 return shadowContrib / 9.0;
#endif
}
float pcf(sampler2D map, vec2 uv, float z, float textureSize) {
 return pcf(map, uv, z, textureSize, vec2(1.0));
}
float chebyshevUpperBound(vec2 moments, float z){
 float p = 0.0;
 z = z * 0.5 + 0.5;
 if (z <= moments.x) {
 p = 1.0;
 }
 float variance = moments.y - moments.x * moments.x;
 variance = max(variance, 0.0000001);
 float mD = moments.x - z;
 float pMax = variance / (variance + mD * mD);
 pMax = clamp((pMax-0.4)/(1.0-0.4), 0.0, 1.0);
 return max(p, pMax);
}
float computeShadowContrib(
 sampler2D map, mat4 lightVPM, vec3 position, float textureSize, vec2 scale, vec2 offset
) {
 vec4 posInLightSpace = lightVPM * vec4(position, 1.0);
 posInLightSpace.xyz /= posInLightSpace.w;
 float z = posInLightSpace.z;
 if(all(greaterThan(posInLightSpace.xyz, vec3(-0.99, -0.99, -1.0))) &&
 all(lessThan(posInLightSpace.xyz, vec3(0.99, 0.99, 1.0)))){
 vec2 uv = (posInLightSpace.xy+1.0) / 2.0;
 #ifdef USE_VSM
 vec2 moments = texture2D(map, uv * scale + offset).xy;
 return chebyshevUpperBound(moments, z);
 #else
 return pcf(map, uv * scale + offset, z, textureSize, scale);
 #endif
 }
 return 1.0;
}
float computeShadowContrib(sampler2D map, mat4 lightVPM, vec3 position, float textureSize) {
 return computeShadowContrib(map, lightVPM, position, textureSize, vec2(1.0), vec2(0.0));
}
float computeShadowContribOmni(samplerCube map, vec3 direction, float range)
{
 float dist = length(direction);
 vec4 shadowTex = textureCube(map, direction);
#ifdef USE_VSM
 vec2 moments = shadowTex.xy;
 float variance = moments.y - moments.x * moments.x;
 float mD = moments.x - dist;
 float p = variance / (variance + mD * mD);
 if(moments.x + 0.001 < dist){
 return clamp(p, 0.0, 1.0);
 }else{
 return 1.0;
 }
#else
 return step(dist, (decodeFloat(shadowTex) + 0.0002) * range);
#endif
}
@end
@export clay.plugin.compute_shadow_map
#if defined(SPOT_LIGHT_SHADOWMAP_COUNT) || defined(DIRECTIONAL_LIGHT_SHADOWMAP_COUNT) || defined(POINT_LIGHT_SHADOWMAP_COUNT)
#ifdef SPOT_LIGHT_SHADOWMAP_COUNT
uniform sampler2D spotLightShadowMaps[SPOT_LIGHT_SHADOWMAP_COUNT]:unconfigurable;
uniform mat4 spotLightMatrices[SPOT_LIGHT_SHADOWMAP_COUNT]:unconfigurable;
uniform float spotLightShadowMapSizes[SPOT_LIGHT_SHADOWMAP_COUNT]:unconfigurable;
#endif
#ifdef DIRECTIONAL_LIGHT_SHADOWMAP_COUNT
#if defined(SHADOW_CASCADE)
uniform sampler2D directionalLightShadowMaps[1]:unconfigurable;
uniform mat4 directionalLightMatrices[SHADOW_CASCADE]:unconfigurable;
uniform float directionalLightShadowMapSizes[1]:unconfigurable;
uniform float shadowCascadeClipsNear[SHADOW_CASCADE]:unconfigurable;
uniform float shadowCascadeClipsFar[SHADOW_CASCADE]:unconfigurable;
#else
uniform sampler2D directionalLightShadowMaps[DIRECTIONAL_LIGHT_SHADOWMAP_COUNT]:unconfigurable;
uniform mat4 directionalLightMatrices[DIRECTIONAL_LIGHT_SHADOWMAP_COUNT]:unconfigurable;
uniform float directionalLightShadowMapSizes[DIRECTIONAL_LIGHT_SHADOWMAP_COUNT]:unconfigurable;
#endif
#endif
#ifdef POINT_LIGHT_SHADOWMAP_COUNT
uniform samplerCube pointLightShadowMaps[POINT_LIGHT_SHADOWMAP_COUNT]:unconfigurable;
#endif
uniform bool shadowEnabled : true;
#ifdef PCF_KERNEL_SIZE
uniform vec2 pcfKernel[PCF_KERNEL_SIZE];
#endif
@import clay.plugin.shadow_map_common
#if defined(SPOT_LIGHT_SHADOWMAP_COUNT)
void computeShadowOfSpotLights(vec3 position, inout float shadowContribs[SPOT_LIGHT_COUNT] ) {
 float shadowContrib;
 for(int _idx_ = 0; _idx_ < SPOT_LIGHT_SHADOWMAP_COUNT; _idx_++) {{
 shadowContrib = computeShadowContrib(
 spotLightShadowMaps[_idx_], spotLightMatrices[_idx_], position,
 spotLightShadowMapSizes[_idx_]
 );
 shadowContribs[_idx_] = shadowContrib;
 }}
 for(int _idx_ = SPOT_LIGHT_SHADOWMAP_COUNT; _idx_ < SPOT_LIGHT_COUNT; _idx_++){{
 shadowContribs[_idx_] = 1.0;
 }}
}
#endif
#if defined(DIRECTIONAL_LIGHT_SHADOWMAP_COUNT)
#ifdef SHADOW_CASCADE
void computeShadowOfDirectionalLights(vec3 position, inout float shadowContribs[DIRECTIONAL_LIGHT_COUNT]){
 float depth = (2.0 * gl_FragCoord.z - gl_DepthRange.near - gl_DepthRange.far)
 / (gl_DepthRange.far - gl_DepthRange.near);
 float shadowContrib;
 shadowContribs[0] = 1.0;
 for (int _idx_ = 0; _idx_ < SHADOW_CASCADE; _idx_++) {{
 if (
 depth >= shadowCascadeClipsNear[_idx_] &&
 depth <= shadowCascadeClipsFar[_idx_]
 ) {
 shadowContrib = computeShadowContrib(
 directionalLightShadowMaps[0], directionalLightMatrices[_idx_], position,
 directionalLightShadowMapSizes[0],
 vec2(1.0 / float(SHADOW_CASCADE), 1.0),
 vec2(float(_idx_) / float(SHADOW_CASCADE), 0.0)
 );
 shadowContribs[0] = shadowContrib;
 }
 }}
 for(int _idx_ = DIRECTIONAL_LIGHT_SHADOWMAP_COUNT; _idx_ < DIRECTIONAL_LIGHT_COUNT; _idx_++) {{
 shadowContribs[_idx_] = 1.0;
 }}
}
#else
void computeShadowOfDirectionalLights(vec3 position, inout float shadowContribs[DIRECTIONAL_LIGHT_COUNT]){
 float shadowContrib;
 for(int _idx_ = 0; _idx_ < DIRECTIONAL_LIGHT_SHADOWMAP_COUNT; _idx_++) {{
 shadowContrib = computeShadowContrib(
 directionalLightShadowMaps[_idx_], directionalLightMatrices[_idx_], position,
 directionalLightShadowMapSizes[_idx_]
 );
 shadowContribs[_idx_] = shadowContrib;
 }}
 for(int _idx_ = DIRECTIONAL_LIGHT_SHADOWMAP_COUNT; _idx_ < DIRECTIONAL_LIGHT_COUNT; _idx_++) {{
 shadowContribs[_idx_] = 1.0;
 }}
}
#endif
#endif
#if defined(POINT_LIGHT_SHADOWMAP_COUNT)
void computeShadowOfPointLights(vec3 position, inout float shadowContribs[POINT_LIGHT_COUNT] ){
 vec3 lightPosition;
 vec3 direction;
 for(int _idx_ = 0; _idx_ < POINT_LIGHT_SHADOWMAP_COUNT; _idx_++) {{
 lightPosition = pointLightPosition[_idx_];
 direction = position - lightPosition;
 shadowContribs[_idx_] = computeShadowContribOmni(pointLightShadowMaps[_idx_], direction, pointLightRange[_idx_]);
 }}
 for(int _idx_ = POINT_LIGHT_SHADOWMAP_COUNT; _idx_ < POINT_LIGHT_COUNT; _idx_++) {{
 shadowContribs[_idx_] = 1.0;
 }}
}
#endif
#endif
@end`,Va=["px","nx","py","ny","pz","nz"];cr.import(Mp);function Zf(n,e,o){if(o==="alphaMap")return n.material.get("diffuseMap");if(o==="alphaCutoff"){if(n.material.isDefined("fragment","ALPHA_TEST")&&n.material.get("diffuseMap")){var u=n.material.get("alphaCutoff");return u||0}return 0}else return o==="uvRepeat"?n.material.get("uvRepeat"):o==="uvOffset"?n.material.get("uvOffset"):e.get(o)}function Dh(n,e){var o=n.material,u=e.material;return o.get("diffuseMap")!==u.get("diffuseMap")||(o.get("alphaCutoff")||0)!==(u.get("alphaCutoff")||0)}var Ai=W.extend(function(){return{softShadow:Ai.PCF,shadowBlur:1,lightFrustumBias:"auto",kernelPCF:new Float32Array([1,0,1,1,-1,1,0,1,-1,0,-1,-1,1,-1,0,-1]),precision:"highp",_lastRenderNotCastShadow:!1,_frameBuffer:new Kn,_textures:{},_shadowMapNumber:{POINT_LIGHT:0,DIRECTIONAL_LIGHT:0,SPOT_LIGHT:0},_depthMaterials:{},_distanceMaterials:{},_receivers:[],_lightsCastShadow:[],_lightCameras:{},_lightMaterials:{},_texturePool:new Xf}},function(){this._gaussianPassH=new Gn({fragment:cr.source("clay.compositor.gaussian_blur")}),this._gaussianPassV=new Gn({fragment:cr.source("clay.compositor.gaussian_blur")}),this._gaussianPassH.setUniform("blurSize",this.shadowBlur),this._gaussianPassH.setUniform("blurDir",0),this._gaussianPassV.setUniform("blurSize",this.shadowBlur),this._gaussianPassV.setUniform("blurDir",1),this._outputDepthPass=new Gn({fragment:cr.source("clay.sm.debug_depth")})},{render:function(e,o,u,c){u||(u=o.getMainCamera()),this.trigger("beforerender",this,e,o,u),this._renderShadowPass(e,o,u,c),this.trigger("afterrender",this,e,o,u)},renderDebug:function(e,o){e.saveClear();var u=e.viewport,c=0,v=0,g=o||u.width/4,x=g;this.softShadow===Ai.VSM?this._outputDepthPass.material.define("fragment","USE_VSM"):this._outputDepthPass.material.undefine("fragment","USE_VSM");for(var _ in this._textures){var M=this._textures[_];e.setViewport(c,v,g*M.width/M.height,x),this._outputDepthPass.setUniform("depthMap",M),this._outputDepthPass.render(e),c+=g*M.width/M.height}e.setViewport(u),e.restoreClear()},_updateReceivers:function(e,o){if(o.receiveShadow?(this._receivers.push(o),o.material.set("shadowEnabled",1),o.material.set("pcfKernel",this.kernelPCF)):o.material.set("shadowEnabled",0),this.softShadow===Ai.VSM)o.material.define("fragment","USE_VSM"),o.material.undefine("fragment","PCF_KERNEL_SIZE");else{o.material.undefine("fragment","USE_VSM");var u=this.kernelPCF;u&&u.length?o.material.define("fragment","PCF_KERNEL_SIZE",u.length/2):o.material.undefine("fragment","PCF_KERNEL_SIZE")}},_update:function(e,o){var u=this;o.traverse(function(g){g.isRenderable()&&u._updateReceivers(e,g)});for(var c=0;c<o.lights.length;c++){var v=o.lights[c];v.castShadow&&!v.invisible&&this._lightsCastShadow.push(v)}},_renderShadowPass:function(e,o,u,c){for(var v in this._shadowMapNumber)this._shadowMapNumber[v]=0;this._lightsCastShadow.length=0,this._receivers.length=0;var g=e.gl;if(c||o.update(),u&&u.update(),o.updateLights(),this._update(e,o),!this._lightsCastShadow.length&&this._lastRenderNotCastShadow)return;this._lastRenderNotCastShadow=this._lightsCastShadow===0,g.enable(g.DEPTH_TEST),g.depthMask(!0),g.disable(g.BLEND),g.clearColor(1,1,1,1);for(var x=[],_=[],M=[],I=[],F=[],ut=[],yt,Dt=0;Dt<this._lightsCastShadow.length;Dt++){var Et=this._lightsCastShadow[Dt];if(Et.type==="DIRECTIONAL_LIGHT"){if(yt){console.warn("Only one direectional light supported with shadow cascade");continue}if(Et.shadowCascade>4){console.warn("Support at most 4 cascade");continue}Et.shadowCascade>1&&(yt=Et),this.renderDirectionalLightShadow(e,o,u,Et,F,I,M)}else Et.type==="SPOT_LIGHT"?this.renderSpotLightShadow(e,o,Et,_,x):Et.type==="POINT_LIGHT"&&this.renderPointLightShadow(e,o,Et,ut);this._shadowMapNumber[Et.type]++}for(var Pt in this._shadowMapNumber)for(var Ht=this._shadowMapNumber[Pt],$t=Pt+"_SHADOWMAP_COUNT",Dt=0;Dt<this._receivers.length;Dt++){var qt=this._receivers[Dt],le=qt.material;le.fragmentDefines[$t]!==Ht&&(Ht>0?le.define("fragment",$t,Ht):le.isDefined("fragment",$t)&&le.undefine("fragment",$t))}for(var Dt=0;Dt<this._receivers.length;Dt++){var qt=this._receivers[Dt],le=qt.material;yt?le.define("fragment","SHADOW_CASCADE",yt.shadowCascade):le.undefine("fragment","SHADOW_CASCADE")}var ie=o.shadowUniforms;function he(rr){return rr.height}if(M.length>0){var Re=M.map(he);if(ie.directionalLightShadowMaps={value:M,type:"tv"},ie.directionalLightMatrices={value:I,type:"m4v"},ie.directionalLightShadowMapSizes={value:Re,type:"1fv"},yt){var ze=F.slice(),Pe=F.slice();ze.pop(),Pe.shift(),ze.reverse(),Pe.reverse(),I.reverse(),ie.shadowCascadeClipsNear={value:ze,type:"1fv"},ie.shadowCascadeClipsFar={value:Pe,type:"1fv"}}}if(x.length>0){var Ke=x.map(he),ie=o.shadowUniforms;ie.spotLightShadowMaps={value:x,type:"tv"},ie.spotLightMatrices={value:_,type:"m4v"},ie.spotLightShadowMapSizes={value:Ke,type:"1fv"}}ut.length>0&&(ie.pointLightShadowMaps={value:ut,type:"tv"})},renderDirectionalLightShadow:function(){var n=new pi,e=new gr,o=new di,u=new gr,c=new gr,v=new gr,g=new gr;return function(x,_,M,I,F,ut,yt){var Dt=this._getDepthMaterial(I),Et={getMaterial:function(mn){return mn.shadowDepthMaterial||Dt},isMaterialChanged:Dh,getUniform:Zf,ifRender:function(mn){return mn.castShadow},sortCompare:bi.opaqueSortCompare};if(!_.viewBoundingBoxLastFrame.isFinite()){var Pt=_.getBoundingBox();_.viewBoundingBoxLastFrame.copy(Pt).applyTransform(M.viewMatrix)}var Ht=Math.min(-_.viewBoundingBoxLastFrame.min.z,M.far),$t=Math.max(-_.viewBoundingBoxLastFrame.max.z,M.near),qt=this._getDirectionalLightCamera(I,_,M),le=v.array;g.copy(qt.projectionMatrix),ir.invert(c.array,qt.worldTransform.array),ir.multiply(c.array,c.array,M.worldTransform.array),ir.multiply(le,g.array,c.array);for(var ie=[],he=M instanceof xn,Re=(M.near+M.far)/(M.near-M.far),ze=2*M.near*M.far/(M.near-M.far),Pe=0;Pe<=I.shadowCascade;Pe++){var Ke=$t*Math.pow(Ht/$t,Pe/I.shadowCascade),rr=$t+(Ht-$t)*Pe/I.shadowCascade,Ue=Ke*I.cascadeSplitLogFactor+rr*(1-I.cascadeSplitLogFactor);ie.push(Ue),F.push(-(-Ue*Re+ze)/-Ue)}var hr=this._getTexture(I,I.shadowCascade);yt.push(hr);var ke=x.viewport,Lr=x.gl;this._frameBuffer.attach(hr),this._frameBuffer.bind(x),Lr.clear(Lr.COLOR_BUFFER_BIT|Lr.DEPTH_BUFFER_BIT);for(var Pe=0;Pe<I.shadowCascade;Pe++){var yr=ie[Pe],xr=ie[Pe+1];he?ir.perspective(e.array,M.fov/180*Math.PI,M.aspect,yr,xr):ir.ortho(e.array,M.left,M.right,M.bottom,M.top,yr,xr),n.setFromProjection(e),n.getTransformedBoundingBox(o,c),o.applyProjection(g);var Sr=o.min.array,mr=o.max.array;Sr[0]=Math.max(Sr[0],-1),Sr[1]=Math.max(Sr[1],-1),mr[0]=Math.min(mr[0],1),mr[1]=Math.min(mr[1],1),u.ortho(Sr[0],mr[0],Sr[1],mr[1],1,-1),qt.projectionMatrix.multiplyLeft(u);var on=I.shadowResolution||512;x.setViewport((I.shadowCascade-Pe-1)*on,0,on,on,1);var Or=_.updateRenderList(qt);x.renderPass(Or.opaque,qt,Et),this.softShadow===Ai.VSM&&this._gaussianFilter(x,hr,hr.width);var Sn=new gr;Sn.copy(qt.viewMatrix).multiplyLeft(qt.projectionMatrix),ut.push(Sn.array),qt.projectionMatrix.copy(g)}this._frameBuffer.unbind(x),x.setViewport(ke)}}(),renderSpotLightShadow:function(e,o,u,c,v){var g=this._getTexture(u),x=this._getSpotLightCamera(u),_=e.gl;this._frameBuffer.attach(g),this._frameBuffer.bind(e),_.clear(_.COLOR_BUFFER_BIT|_.DEPTH_BUFFER_BIT);var M=this._getDepthMaterial(u),I={getMaterial:function(Dt){return Dt.shadowDepthMaterial||M},isMaterialChanged:Dh,getUniform:Zf,ifRender:function(Dt){return Dt.castShadow},sortCompare:bi.opaqueSortCompare},F=o.updateRenderList(x);e.renderPass(F.opaque,x,I),this._frameBuffer.unbind(e),this.softShadow===Ai.VSM&&this._gaussianFilter(e,g,g.width);var ut=new gr;ut.copy(x.worldTransform).invert().multiplyLeft(x.projectionMatrix),v.push(g),c.push(ut.array)},renderPointLightShadow:function(e,o,u,c){var v=this._getTexture(u),g=e.gl;c.push(v);var x=this._getDepthMaterial(u),_={getMaterial:function(le){return le.shadowDepthMaterial||x},getUniform:Zf,sortCompare:bi.opaqueSortCompare},M={px:[],py:[],pz:[],nx:[],ny:[],nz:[]},I=new di,F=u.getWorldPosition().array,ut=new di,yt=u.range;ut.min.setArray(F),ut.max.setArray(F);var Dt=new or(yt,yt,yt);ut.max.add(Dt),ut.min.sub(Dt);var Et={px:!1,py:!1,pz:!1,nx:!1,ny:!1,nz:!1};o.traverse(function(qt){if(qt.isRenderable()&&qt.castShadow){var le=qt.geometry;if(!le.boundingBox){for(var ie=0;ie<Va.length;ie++)M[Va[ie]].push(qt);return}if(I.transformFrom(le.boundingBox,qt.worldTransform),!I.intersectBoundingBox(ut))return;I.updateVertices();for(var ie=0;ie<Va.length;ie++)Et[Va[ie]]=!1;for(var ie=0;ie<8;ie++){var he=I.vertices[ie],Re=he[0]-F[0],ze=he[1]-F[1],Pe=he[2]-F[2],Ke=Math.abs(Re),rr=Math.abs(ze),Ue=Math.abs(Pe);Ke>rr?Ke>Ue?Et[Re>0?"px":"nx"]=!0:Et[Pe>0?"pz":"nz"]=!0:rr>Ue?Et[ze>0?"py":"ny"]=!0:Et[Pe>0?"pz":"nz"]=!0}for(var ie=0;ie<Va.length;ie++)Et[Va[ie]]&&M[Va[ie]].push(qt)}});for(var Pt=0;Pt<6;Pt++){var Ht=Va[Pt],$t=this._getPointLightCamera(u,Ht);this._frameBuffer.attach(v,g.COLOR_ATTACHMENT0,g.TEXTURE_CUBE_MAP_POSITIVE_X+Pt),this._frameBuffer.bind(e),g.clear(g.COLOR_BUFFER_BIT|g.DEPTH_BUFFER_BIT),e.renderPass(M[Ht],$t,_)}this._frameBuffer.unbind(e)},_getDepthMaterial:function(e){var o=this._lightMaterials[e.__uid__],u=e.type==="POINT_LIGHT";if(!o){var c=u?"clay.sm.distance.":"clay.sm.depth.";o=new Le({precision:this.precision,shader:new cr(cr.source(c+"vertex"),cr.source(c+"fragment"))}),this._lightMaterials[e.__uid__]=o}return e.shadowSlopeScale!=null&&o.setUniform("slopeScale",e.shadowSlopeScale),e.shadowBias!=null&&o.setUniform("bias",e.shadowBias),this.softShadow===Ai.VSM?o.define("fragment","USE_VSM"):o.undefine("fragment","USE_VSM"),u&&(o.set("lightPosition",e.getWorldPosition().array),o.set("range",e.range)),o},_gaussianFilter:function(e,o,u){var c={width:u,height:u,type:Mr.FLOAT},v=this._texturePool.get(c);this._frameBuffer.attach(v),this._frameBuffer.bind(e),this._gaussianPassH.setUniform("texture",o),this._gaussianPassH.setUniform("textureWidth",u),this._gaussianPassH.render(e),this._frameBuffer.attach(o),this._gaussianPassV.setUniform("texture",v),this._gaussianPassV.setUniform("textureHeight",u),this._gaussianPassV.render(e),this._frameBuffer.unbind(e),this._texturePool.put(v)},_getTexture:function(e,o){var u=e.__uid__,c=this._textures[u],v=e.shadowResolution||512;return o=o||1,c||(e.type==="POINT_LIGHT"?c=new ma:c=new Gr,c.width=v*o,c.height=v,this.softShadow===Ai.VSM?(c.type=Mr.FLOAT,c.anisotropic=4):(c.minFilter=$.NEAREST,c.magFilter=$.NEAREST,c.useMipmap=!1),this._textures[u]=c),c},_getPointLightCamera:function(e,o){this._lightCameras.point||(this._lightCameras.point={px:new xn,nx:new xn,py:new xn,ny:new xn,pz:new xn,nz:new xn});var u=this._lightCameras.point[o];switch(u.far=e.range,u.fov=90,u.position.set(0,0,0),o){case"px":u.lookAt(or.POSITIVE_X,or.NEGATIVE_Y);break;case"nx":u.lookAt(or.NEGATIVE_X,or.NEGATIVE_Y);break;case"py":u.lookAt(or.POSITIVE_Y,or.POSITIVE_Z);break;case"ny":u.lookAt(or.NEGATIVE_Y,or.NEGATIVE_Z);break;case"pz":u.lookAt(or.POSITIVE_Z,or.NEGATIVE_Y);break;case"nz":u.lookAt(or.NEGATIVE_Z,or.NEGATIVE_Y);break}return e.getWorldPosition(u.position),u.update(),u},_getDirectionalLightCamera:function(){var n=new gr,e=new di,o=new di;return function(u,c,v){this._lightCameras.directional||(this._lightCameras.directional=new xs);var g=this._lightCameras.directional;e.copy(c.viewBoundingBoxLastFrame),e.intersection(v.frustum.boundingBox),g.position.copy(e.min).add(e.max).scale(.5).transformMat4(v.worldTransform),g.rotation.copy(u.rotation),g.scale.copy(u.scale),g.updateWorldTransform(),gr.invert(n,g.worldTransform),gr.multiply(n,n,v.worldTransform),o.copy(e).applyTransform(n);var x=o.min.array,_=o.max.array;return g.position.set((x[0]+_[0])/2,(x[1]+_[1])/2,_[2]).transformMat4(g.worldTransform),g.near=0,g.far=-x[2]+_[2],isNaN(this.lightFrustumBias)?g.far*=4:g.far+=this.lightFrustumBias,g.left=x[0],g.right=_[0],g.top=_[1],g.bottom=x[1],g.update(!0),g}}(),_getSpotLightCamera:function(e){this._lightCameras.spot||(this._lightCameras.spot=new xn);var o=this._lightCameras.spot;return o.fov=e.penumbraAngle*2,o.far=e.range,o.worldTransform.copy(e.worldTransform),o.updateProjectionMatrix(),ir.invert(o.viewMatrix.array,o.worldTransform.array),o},dispose:function(e){var o=e.gl||e;this._frameBuffer&&this._frameBuffer.dispose(o);for(var u in this._textures)this._textures[u].dispose(o);this._texturePool.clear(e.gl),this._depthMaterials={},this._distanceMaterials={},this._textures={},this._lightCameras={},this._shadowMapNumber={POINT_LIGHT:0,DIRECTIONAL_LIGHT:0,SPOT_LIGHT:0},this._meshMaterials={};for(var c=0;c<this._receivers.length;c++){var v=this._receivers[c];if(v.material){var g=v.material;g.undefine("fragment","POINT_LIGHT_SHADOW_COUNT"),g.undefine("fragment","DIRECTIONAL_LIGHT_SHADOW_COUNT"),g.undefine("fragment","AMBIENT_LIGHT_SHADOW_COUNT"),g.set("shadowEnabled",0)}}this._receivers=[],this._lightsCastShadow=[]}});Ai.VSM=1,Ai.PCF=2;var Dp=Ai,Ch=W.extend(function(){return{name:"",inputLinks:{},outputLinks:{},_prevOutputTextures:{},_outputTextures:{},_outputReferences:{},_rendering:!1,_rendered:!1,_compositor:null}},{updateParameter:function(e,o){var u=this.outputs[e],c=u.parameters,v=u._parametersCopy;if(v||(v=u._parametersCopy={}),c)for(var g in c)g!=="width"&&g!=="height"&&(v[g]=c[g]);var x,_;return c.width instanceof Function?x=c.width.call(this,o):x=c.width,c.height instanceof Function?_=c.height.call(this,o):_=c.height,(v.width!==x||v.height!==_)&&this._outputTextures[e]&&this._outputTextures[e].dispose(o.gl),v.width=x,v.height=_,v},setParameter:function(e,o){},getParameter:function(e){},setParameters:function(e){for(var o in e)this.setParameter(o,e[o])},render:function(){},getOutput:function(e,o){if(o==null)return o=e,this._outputTextures[o];var u=this.outputs[o];if(!!u)return this._rendered?u.outputLastFrame?this._prevOutputTextures[o]:this._outputTextures[o]:this._rendering?(this._prevOutputTextures[o]||(this._prevOutputTextures[o]=this._compositor.allocateTexture(u.parameters||{})),this._prevOutputTextures[o]):(this.render(e),this._outputTextures[o])},removeReference:function(e){if(this._outputReferences[e]--,this._outputReferences[e]===0){var o=this.outputs[e];o.keepLastFrame?(this._prevOutputTextures[e]&&this._compositor.releaseTexture(this._prevOutputTextures[e]),this._prevOutputTextures[e]=this._outputTextures[e]):this._compositor.releaseTexture(this._outputTextures[e])}},link:function(e,o,u){this.inputLinks[e]={node:o,pin:u},o.outputLinks[u]||(o.outputLinks[u]=[]),o.outputLinks[u].push({node:this,pin:e}),this.pass.material.enableTexture(e)},clear:function(){this.inputLinks={},this.outputLinks={}},updateReference:function(e){if(!this._rendering){this._rendering=!0;for(var o in this.inputLinks){var u=this.inputLinks[o];u.node.updateReference(u.pin)}this._rendering=!1}e&&this._outputReferences[e]++},beforeFrame:function(){this._rendered=!1;for(var e in this.outputLinks)this._outputReferences[e]=0},afterFrame:function(){for(var e in this.outputLinks)if(this._outputReferences[e]>0){var o=this.outputs[e];o.keepLastFrame?(this._prevOutputTextures[e]&&this._compositor.releaseTexture(this._prevOutputTextures[e]),this._prevOutputTextures[e]=this._outputTextures[e]):this._compositor.releaseTexture(this._outputTextures[e])}}}),Jo=Ch,Cp=W.extend(function(){return{nodes:[]}},{dirty:function(){this._dirty=!0},addNode:function(e){this.nodes.indexOf(e)>=0||(this.nodes.push(e),this._dirty=!0)},removeNode:function(e){typeof e=="string"&&(e=this.getNodeByName(e));var o=this.nodes.indexOf(e);o>=0&&(this.nodes.splice(o,1),this._dirty=!0)},getNodeByName:function(e){for(var o=0;o<this.nodes.length;o++)if(this.nodes[o].name===e)return this.nodes[o]},update:function(){for(var e=0;e<this.nodes.length;e++)this.nodes[e].clear();for(var e=0;e<this.nodes.length;e++){var o=this.nodes[e];if(!!o.inputs){for(var u in o.inputs)if(!!o.inputs[u]){if(o.pass&&!o.pass.material.isUniformEnabled(u)){console.warn("Pin "+o.name+"."+u+" not used.");continue}var c=o.inputs[u],v=this.findPin(c);v?o.link(u,v.node,v.pin):typeof c=="string"?console.warn("Node "+c+" not exist"):console.warn("Pin of "+c.node+"."+c.pin+" not exist")}}}},findPin:function(e){var o;if((typeof e=="string"||e instanceof Jo)&&(e={node:e}),typeof e.node=="string")for(var u=0;u<this.nodes.length;u++){var c=this.nodes[u];c.name===e.node&&(o=c)}else o=e.node;if(o){var v=e.pin;if(v||o.outputs&&(v=Object.keys(o.outputs)[0]),o.outputs[v])return{node:o,pin:v}}}}),Eh=Cp,Ep=Eh.extend(function(){return{_outputs:[],_texturePool:new Xf,_frameBuffer:new Kn({depthBuffer:!1})}},{addNode:function(e){Eh.prototype.addNode.call(this,e),e._compositor=this},render:function(e,o){if(this._dirty){this.update(),this._dirty=!1,this._outputs.length=0;for(var u=0;u<this.nodes.length;u++)this.nodes[u].outputs||this._outputs.push(this.nodes[u])}for(var u=0;u<this.nodes.length;u++)this.nodes[u].beforeFrame();for(var u=0;u<this._outputs.length;u++)this._outputs[u].updateReference();for(var u=0;u<this._outputs.length;u++)this._outputs[u].render(e,o);for(var u=0;u<this.nodes.length;u++)this.nodes[u].afterFrame()},allocateTexture:function(e){return this._texturePool.get(e)},releaseTexture:function(e){this._texturePool.put(e)},getFrameBuffer:function(){return this._frameBuffer},dispose:function(e){this._texturePool.clear(e)}}),Lp=Ep,Pp=Jo.extend({name:"scene",scene:null,camera:null,autoUpdateScene:!0,preZ:!1},function(){this.frameBuffer=new Kn},{render:function(e){this._rendering=!0;var o=e.gl;this.trigger("beforerender");var u;if(!this.outputs)u=e.render(this.scene,this.camera,!this.autoUpdateScene,this.preZ);else{var c=this.frameBuffer;for(var v in this.outputs){var g=this.updateParameter(v,e),x=this.outputs[v],_=this._compositor.allocateTexture(g);this._outputTextures[v]=_;var M=x.attachment||o.COLOR_ATTACHMENT0;typeof M=="string"&&(M=o[M]),c.attach(_,M)}c.bind(e);var I=e.getGLExtension("EXT_draw_buffers");if(I){var F=[];for(var M in this.outputs)M=parseInt(M),M>=o.COLOR_ATTACHMENT0&&M<=o.COLOR_ATTACHMENT0+8&&F.push(M);I.drawBuffersEXT(F)}e.saveClear(),e.clearBit=$.DEPTH_BUFFER_BIT|$.COLOR_BUFFER_BIT,u=e.render(this.scene,this.camera,!this.autoUpdateScene,this.preZ),e.restoreClear(),c.unbind(e)}this.trigger("afterrender",u),this._rendering=!1,this._rendered=!0}}),wp=Pp,Lh=Jo.extend(function(){return{texture:null,outputs:{color:{}}}},function(){},{getOutput:function(e,o){return this.texture},beforeFrame:function(){},afterFrame:function(){}}),Kf=Lh,Ph=Jo.extend(function(){return{name:"",inputs:{},outputs:null,shader:"",inputLinks:{},outputLinks:{},pass:null,_prevOutputTextures:{},_outputTextures:{},_outputReferences:{},_rendering:!1,_rendered:!1,_compositor:null}},function(){var n=new Gn({fragment:this.shader});this.pass=n},{render:function(e,o){this.trigger("beforerender",e),this._rendering=!0;var u=e.gl;for(var c in this.inputLinks){var v=this.inputLinks[c],g=v.node.getOutput(e,v.pin);this.pass.setUniform(c,g)}if(!this.outputs)this.pass.outputs=null,this._compositor.getFrameBuffer().unbind(e),this.pass.render(e,o);else{this.pass.outputs={};var x={};for(var _ in this.outputs){var M=this.updateParameter(_,e);isNaN(M.width)&&this.updateParameter(_,e);var I=this.outputs[_],F=this._compositor.allocateTexture(M);this._outputTextures[_]=F;var ut=I.attachment||u.COLOR_ATTACHMENT0;typeof ut=="string"&&(ut=u[ut]),x[ut]=F}this._compositor.getFrameBuffer().bind(e);for(var ut in x)this._compositor.getFrameBuffer().attach(x[ut],ut);this.pass.render(e),this._compositor.getFrameBuffer().updateMipmap(e)}for(var c in this.inputLinks){var v=this.inputLinks[c];v.node.removeReference(v.pin)}this._rendering=!1,this._rendered=!0,this.trigger("afterrender",e)},updateParameter:function(e,o){var u=this.outputs[e],c=u.parameters,v=u._parametersCopy;if(v||(v=u._parametersCopy={}),c)for(var g in c)g!=="width"&&g!=="height"&&(v[g]=c[g]);var x,_;return typeof c.width=="function"?x=c.width.call(this,o):x=c.width,typeof c.height=="function"?_=c.height.call(this,o):_=c.height,x=Math.ceil(x),_=Math.ceil(_),(v.width!==x||v.height!==_)&&this._outputTextures[e]&&this._outputTextures[e].dispose(o),v.width=x,v.height=_,v},setParameter:function(e,o){this.pass.setUniform(e,o)},getParameter:function(e){return this.pass.getUniform(e)},setParameters:function(e){for(var o in e)this.setParameter(o,e[o])},define:function(e,o){this.pass.material.define("fragment",e,o)},undefine:function(e){this.pass.material.undefine("fragment",e)},removeReference:function(e){if(this._outputReferences[e]--,this._outputReferences[e]===0){var o=this.outputs[e];o.keepLastFrame?(this._prevOutputTextures[e]&&this._compositor.releaseTexture(this._prevOutputTextures[e]),this._prevOutputTextures[e]=this._outputTextures[e]):this._compositor.releaseTexture(this._outputTextures[e])}},clear:function(){Jo.prototype.clear.call(this),this.pass.material.disableTexturesAll()}}),wh=Ph,Ih=`@export clay.compositor.coloradjust
varying vec2 v_Texcoord;
uniform sampler2D texture;
uniform float brightness : 0.0;
uniform float contrast : 1.0;
uniform float exposure : 0.0;
uniform float gamma : 1.0;
uniform float saturation : 1.0;
const vec3 w = vec3(0.2125, 0.7154, 0.0721);
void main()
{
 vec4 tex = texture2D( texture, v_Texcoord);
 vec3 color = clamp(tex.rgb + vec3(brightness), 0.0, 1.0);
 color = clamp( (color-vec3(0.5))*contrast+vec3(0.5), 0.0, 1.0);
 color = clamp( color * pow(2.0, exposure), 0.0, 1.0);
 color = clamp( pow(color, vec3(gamma)), 0.0, 1.0);
 float luminance = dot( color, w );
 color = mix(vec3(luminance), color, saturation);
 gl_FragColor = vec4(color, tex.a);
}
@end
@export clay.compositor.brightness
varying vec2 v_Texcoord;
uniform sampler2D texture;
uniform float brightness : 0.0;
void main()
{
 vec4 tex = texture2D( texture, v_Texcoord);
 vec3 color = tex.rgb + vec3(brightness);
 gl_FragColor = vec4(color, tex.a);
}
@end
@export clay.compositor.contrast
varying vec2 v_Texcoord;
uniform sampler2D texture;
uniform float contrast : 1.0;
void main()
{
 vec4 tex = texture2D( texture, v_Texcoord);
 vec3 color = (tex.rgb-vec3(0.5))*contrast+vec3(0.5);
 gl_FragColor = vec4(color, tex.a);
}
@end
@export clay.compositor.exposure
varying vec2 v_Texcoord;
uniform sampler2D texture;
uniform float exposure : 0.0;
void main()
{
 vec4 tex = texture2D(texture, v_Texcoord);
 vec3 color = tex.rgb * pow(2.0, exposure);
 gl_FragColor = vec4(color, tex.a);
}
@end
@export clay.compositor.gamma
varying vec2 v_Texcoord;
uniform sampler2D texture;
uniform float gamma : 1.0;
void main()
{
 vec4 tex = texture2D(texture, v_Texcoord);
 vec3 color = pow(tex.rgb, vec3(gamma));
 gl_FragColor = vec4(color, tex.a);
}
@end
@export clay.compositor.saturation
varying vec2 v_Texcoord;
uniform sampler2D texture;
uniform float saturation : 1.0;
const vec3 w = vec3(0.2125, 0.7154, 0.0721);
void main()
{
 vec4 tex = texture2D(texture, v_Texcoord);
 vec3 color = tex.rgb;
 float luminance = dot(color, w);
 color = mix(vec3(luminance), color, saturation);
 gl_FragColor = vec4(color, tex.a);
}
@end`,kf=`@export clay.compositor.kernel.gaussian_9
float gaussianKernel[9];
gaussianKernel[0] = 0.07;
gaussianKernel[1] = 0.09;
gaussianKernel[2] = 0.12;
gaussianKernel[3] = 0.14;
gaussianKernel[4] = 0.16;
gaussianKernel[5] = 0.14;
gaussianKernel[6] = 0.12;
gaussianKernel[7] = 0.09;
gaussianKernel[8] = 0.07;
@end
@export clay.compositor.kernel.gaussian_13
float gaussianKernel[13];
gaussianKernel[0] = 0.02;
gaussianKernel[1] = 0.03;
gaussianKernel[2] = 0.06;
gaussianKernel[3] = 0.08;
gaussianKernel[4] = 0.11;
gaussianKernel[5] = 0.13;
gaussianKernel[6] = 0.14;
gaussianKernel[7] = 0.13;
gaussianKernel[8] = 0.11;
gaussianKernel[9] = 0.08;
gaussianKernel[10] = 0.06;
gaussianKernel[11] = 0.03;
gaussianKernel[12] = 0.02;
@end
@export clay.compositor.gaussian_blur
#define SHADER_NAME gaussian_blur
uniform sampler2D texture;varying vec2 v_Texcoord;
uniform float blurSize : 2.0;
uniform vec2 textureSize : [512.0, 512.0];
uniform float blurDir : 0.0;
@import clay.util.rgbm
@import clay.util.clamp_sample
void main (void)
{
 @import clay.compositor.kernel.gaussian_9
 vec2 off = blurSize / textureSize;
 off *= vec2(1.0 - blurDir, blurDir);
 vec4 sum = vec4(0.0);
 float weightAll = 0.0;
 for (int i = 0; i < 9; i++) {
 float w = gaussianKernel[i];
 vec4 texel = decodeHDR(clampSample(texture, v_Texcoord + float(i - 4) * off));
 sum += texel * w;
 weightAll += w;
 }
 gl_FragColor = encodeHDR(sum / max(weightAll, 0.01));
}
@end
`,Ip=`@export clay.compositor.hdr.log_lum
varying vec2 v_Texcoord;
uniform sampler2D texture;
const vec3 w = vec3(0.2125, 0.7154, 0.0721);
@import clay.util.rgbm
void main()
{
 vec4 tex = decodeHDR(texture2D(texture, v_Texcoord));
 float luminance = dot(tex.rgb, w);
 luminance = log(luminance + 0.001);
 gl_FragColor = encodeHDR(vec4(vec3(luminance), 1.0));
}
@end
@export clay.compositor.hdr.lum_adaption
varying vec2 v_Texcoord;
uniform sampler2D adaptedLum;
uniform sampler2D currentLum;
uniform float frameTime : 0.02;
@import clay.util.rgbm
void main()
{
 float fAdaptedLum = decodeHDR(texture2D(adaptedLum, vec2(0.5, 0.5))).r;
 float fCurrentLum = exp(encodeHDR(texture2D(currentLum, vec2(0.5, 0.5))).r);
 fAdaptedLum += (fCurrentLum - fAdaptedLum) * (1.0 - pow(0.98, 30.0 * frameTime));
 gl_FragColor = encodeHDR(vec4(vec3(fAdaptedLum), 1.0));
}
@end
@export clay.compositor.lum
varying vec2 v_Texcoord;
uniform sampler2D texture;
const vec3 w = vec3(0.2125, 0.7154, 0.0721);
void main()
{
 vec4 tex = texture2D( texture, v_Texcoord );
 float luminance = dot(tex.rgb, w);
 gl_FragColor = vec4(vec3(luminance), 1.0);
}
@end`,Rh=`
@export clay.compositor.lut
varying vec2 v_Texcoord;
uniform sampler2D texture;
uniform sampler2D lookup;
void main()
{
 vec4 tex = texture2D(texture, v_Texcoord);
 float blueColor = tex.b * 63.0;
 vec2 quad1;
 quad1.y = floor(floor(blueColor) / 8.0);
 quad1.x = floor(blueColor) - (quad1.y * 8.0);
 vec2 quad2;
 quad2.y = floor(ceil(blueColor) / 8.0);
 quad2.x = ceil(blueColor) - (quad2.y * 8.0);
 vec2 texPos1;
 texPos1.x = (quad1.x * 0.125) + 0.5/512.0 + ((0.125 - 1.0/512.0) * tex.r);
 texPos1.y = (quad1.y * 0.125) + 0.5/512.0 + ((0.125 - 1.0/512.0) * tex.g);
 vec2 texPos2;
 texPos2.x = (quad2.x * 0.125) + 0.5/512.0 + ((0.125 - 1.0/512.0) * tex.r);
 texPos2.y = (quad2.y * 0.125) + 0.5/512.0 + ((0.125 - 1.0/512.0) * tex.g);
 vec4 newColor1 = texture2D(lookup, texPos1);
 vec4 newColor2 = texture2D(lookup, texPos2);
 vec4 newColor = mix(newColor1, newColor2, fract(blueColor));
 gl_FragColor = vec4(newColor.rgb, tex.w);
}
@end`,Rp=`@export clay.compositor.vignette
#define OUTPUT_ALPHA
varying vec2 v_Texcoord;
uniform sampler2D texture;
uniform float darkness: 1;
uniform float offset: 1;
@import clay.util.rgbm
void main()
{
 vec4 texel = decodeHDR(texture2D(texture, v_Texcoord));
 gl_FragColor.rgb = texel.rgb;
 vec2 uv = (v_Texcoord - vec2(0.5)) * vec2(offset);
 gl_FragColor = encodeHDR(vec4(mix(texel.rgb, vec3(1.0 - darkness), dot(uv, uv)), texel.a));
}
@end`,so=`@export clay.compositor.output
#define OUTPUT_ALPHA
varying vec2 v_Texcoord;
uniform sampler2D texture;
@import clay.util.rgbm
void main()
{
 vec4 tex = decodeHDR(texture2D(texture, v_Texcoord));
 gl_FragColor.rgb = tex.rgb;
#ifdef OUTPUT_ALPHA
 gl_FragColor.a = tex.a;
#else
 gl_FragColor.a = 1.0;
#endif
 gl_FragColor = encodeHDR(gl_FragColor);
#ifdef PREMULTIPLY_ALPHA
 gl_FragColor.rgb *= gl_FragColor.a;
#endif
}
@end`,Qf=`@export clay.compositor.bright
uniform sampler2D texture;
uniform float threshold : 1;
uniform float scale : 1.0;
uniform vec2 textureSize: [512, 512];
varying vec2 v_Texcoord;
const vec3 lumWeight = vec3(0.2125, 0.7154, 0.0721);
@import clay.util.rgbm
vec4 median(vec4 a, vec4 b, vec4 c)
{
 return a + b + c - min(min(a, b), c) - max(max(a, b), c);
}
void main()
{
 vec4 texel = decodeHDR(texture2D(texture, v_Texcoord));
#ifdef ANTI_FLICKER
 vec3 d = 1.0 / textureSize.xyx * vec3(1.0, 1.0, 0.0);
 vec4 s1 = decodeHDR(texture2D(texture, v_Texcoord - d.xz));
 vec4 s2 = decodeHDR(texture2D(texture, v_Texcoord + d.xz));
 vec4 s3 = decodeHDR(texture2D(texture, v_Texcoord - d.zy));
 vec4 s4 = decodeHDR(texture2D(texture, v_Texcoord + d.zy));
 texel = median(median(texel, s1, s2), s3, s4);
#endif
 float lum = dot(texel.rgb , lumWeight);
 vec4 color;
 if (lum > threshold && texel.a > 0.0)
 {
 color = vec4(texel.rgb * scale, texel.a * scale);
 }
 else
 {
 color = vec4(0.0);
 }
 gl_FragColor = encodeHDR(color);
}
@end
`,Tl=`@export clay.compositor.downsample
uniform sampler2D texture;
uniform vec2 textureSize : [512, 512];
varying vec2 v_Texcoord;
@import clay.util.rgbm
float brightness(vec3 c)
{
 return max(max(c.r, c.g), c.b);
}
@import clay.util.clamp_sample
void main()
{
 vec4 d = vec4(-1.0, -1.0, 1.0, 1.0) / textureSize.xyxy;
#ifdef ANTI_FLICKER
 vec3 s1 = decodeHDR(clampSample(texture, v_Texcoord + d.xy)).rgb;
 vec3 s2 = decodeHDR(clampSample(texture, v_Texcoord + d.zy)).rgb;
 vec3 s3 = decodeHDR(clampSample(texture, v_Texcoord + d.xw)).rgb;
 vec3 s4 = decodeHDR(clampSample(texture, v_Texcoord + d.zw)).rgb;
 float s1w = 1.0 / (brightness(s1) + 1.0);
 float s2w = 1.0 / (brightness(s2) + 1.0);
 float s3w = 1.0 / (brightness(s3) + 1.0);
 float s4w = 1.0 / (brightness(s4) + 1.0);
 float oneDivideSum = 1.0 / (s1w + s2w + s3w + s4w);
 vec4 color = vec4(
 (s1 * s1w + s2 * s2w + s3 * s3w + s4 * s4w) * oneDivideSum,
 1.0
 );
#else
 vec4 color = decodeHDR(clampSample(texture, v_Texcoord + d.xy));
 color += decodeHDR(clampSample(texture, v_Texcoord + d.zy));
 color += decodeHDR(clampSample(texture, v_Texcoord + d.xw));
 color += decodeHDR(clampSample(texture, v_Texcoord + d.zw));
 color *= 0.25;
#endif
 gl_FragColor = encodeHDR(color);
}
@end`,Nh=`
@export clay.compositor.upsample
#define HIGH_QUALITY
uniform sampler2D texture;
uniform vec2 textureSize : [512, 512];
uniform float sampleScale: 0.5;
varying vec2 v_Texcoord;
@import clay.util.rgbm
@import clay.util.clamp_sample
void main()
{
#ifdef HIGH_QUALITY
 vec4 d = vec4(1.0, 1.0, -1.0, 0.0) / textureSize.xyxy * sampleScale;
 vec4 s;
 s = decodeHDR(clampSample(texture, v_Texcoord - d.xy));
 s += decodeHDR(clampSample(texture, v_Texcoord - d.wy)) * 2.0;
 s += decodeHDR(clampSample(texture, v_Texcoord - d.zy));
 s += decodeHDR(clampSample(texture, v_Texcoord + d.zw)) * 2.0;
 s += decodeHDR(clampSample(texture, v_Texcoord )) * 4.0;
 s += decodeHDR(clampSample(texture, v_Texcoord + d.xw)) * 2.0;
 s += decodeHDR(clampSample(texture, v_Texcoord + d.zy));
 s += decodeHDR(clampSample(texture, v_Texcoord + d.wy)) * 2.0;
 s += decodeHDR(clampSample(texture, v_Texcoord + d.xy));
 gl_FragColor = encodeHDR(s / 16.0);
#else
 vec4 d = vec4(-1.0, -1.0, +1.0, +1.0) / textureSize.xyxy;
 vec4 s;
 s = decodeHDR(clampSample(texture, v_Texcoord + d.xy));
 s += decodeHDR(clampSample(texture, v_Texcoord + d.zy));
 s += decodeHDR(clampSample(texture, v_Texcoord + d.xw));
 s += decodeHDR(clampSample(texture, v_Texcoord + d.zw));
 gl_FragColor = encodeHDR(s / 4.0);
#endif
}
@end`,Ps=`@export clay.compositor.hdr.composite
#define TONEMAPPING
uniform sampler2D texture;
#ifdef BLOOM_ENABLED
uniform sampler2D bloom;
#endif
#ifdef LENSFLARE_ENABLED
uniform sampler2D lensflare;
uniform sampler2D lensdirt;
#endif
#ifdef LUM_ENABLED
uniform sampler2D lum;
#endif
#ifdef LUT_ENABLED
uniform sampler2D lut;
#endif
#ifdef COLOR_CORRECTION
uniform float brightness : 0.0;
uniform float contrast : 1.0;
uniform float saturation : 1.0;
#endif
#ifdef VIGNETTE
uniform float vignetteDarkness: 1.0;
uniform float vignetteOffset: 1.0;
#endif
uniform float exposure : 1.0;
uniform float bloomIntensity : 0.25;
uniform float lensflareIntensity : 1;
varying vec2 v_Texcoord;
@import clay.util.srgb
vec3 ACESToneMapping(vec3 color)
{
 const float A = 2.51;
 const float B = 0.03;
 const float C = 2.43;
 const float D = 0.59;
 const float E = 0.14;
 return (color * (A * color + B)) / (color * (C * color + D) + E);
}
float eyeAdaption(float fLum)
{
 return mix(0.2, fLum, 0.5);
}
#ifdef LUT_ENABLED
vec3 lutTransform(vec3 color) {
 float blueColor = color.b * 63.0;
 vec2 quad1;
 quad1.y = floor(floor(blueColor) / 8.0);
 quad1.x = floor(blueColor) - (quad1.y * 8.0);
 vec2 quad2;
 quad2.y = floor(ceil(blueColor) / 8.0);
 quad2.x = ceil(blueColor) - (quad2.y * 8.0);
 vec2 texPos1;
 texPos1.x = (quad1.x * 0.125) + 0.5/512.0 + ((0.125 - 1.0/512.0) * color.r);
 texPos1.y = (quad1.y * 0.125) + 0.5/512.0 + ((0.125 - 1.0/512.0) * color.g);
 vec2 texPos2;
 texPos2.x = (quad2.x * 0.125) + 0.5/512.0 + ((0.125 - 1.0/512.0) * color.r);
 texPos2.y = (quad2.y * 0.125) + 0.5/512.0 + ((0.125 - 1.0/512.0) * color.g);
 vec4 newColor1 = texture2D(lut, texPos1);
 vec4 newColor2 = texture2D(lut, texPos2);
 vec4 newColor = mix(newColor1, newColor2, fract(blueColor));
 return newColor.rgb;
}
#endif
@import clay.util.rgbm
void main()
{
 vec4 texel = vec4(0.0);
 vec4 originalTexel = vec4(0.0);
#ifdef TEXTURE_ENABLED
 texel = decodeHDR(texture2D(texture, v_Texcoord));
 originalTexel = texel;
#endif
#ifdef BLOOM_ENABLED
 vec4 bloomTexel = decodeHDR(texture2D(bloom, v_Texcoord));
 texel.rgb += bloomTexel.rgb * bloomIntensity;
 texel.a += bloomTexel.a * bloomIntensity;
#endif
#ifdef LENSFLARE_ENABLED
 texel += decodeHDR(texture2D(lensflare, v_Texcoord)) * texture2D(lensdirt, v_Texcoord) * lensflareIntensity;
#endif
 texel.a = min(texel.a, 1.0);
#ifdef LUM_ENABLED
 float fLum = texture2D(lum, vec2(0.5, 0.5)).r;
 float adaptedLumDest = 3.0 / (max(0.1, 1.0 + 10.0*eyeAdaption(fLum)));
 float exposureBias = adaptedLumDest * exposure;
#else
 float exposureBias = exposure;
#endif
#ifdef TONEMAPPING
 texel.rgb *= exposureBias;
 texel.rgb = ACESToneMapping(texel.rgb);
#endif
 texel = linearTosRGB(texel);
#ifdef LUT_ENABLED
 texel.rgb = lutTransform(clamp(texel.rgb,vec3(0.0),vec3(1.0)));
#endif
#ifdef COLOR_CORRECTION
 texel.rgb = clamp(texel.rgb + vec3(brightness), 0.0, 1.0);
 texel.rgb = clamp((texel.rgb - vec3(0.5))*contrast+vec3(0.5), 0.0, 1.0);
 float lum = dot(texel.rgb, vec3(0.2125, 0.7154, 0.0721));
 texel.rgb = mix(vec3(lum), texel.rgb, saturation);
#endif
#ifdef VIGNETTE
 vec2 uv = (v_Texcoord - vec2(0.5)) * vec2(vignetteOffset);
 texel.rgb = mix(texel.rgb, vec3(1.0 - vignetteDarkness), dot(uv, uv));
#endif
 gl_FragColor = encodeHDR(texel);
#ifdef DEBUG
 #if DEBUG == 1
 gl_FragColor = encodeHDR(decodeHDR(texture2D(texture, v_Texcoord)));
 #elif DEBUG == 2
 gl_FragColor = encodeHDR(decodeHDR(texture2D(bloom, v_Texcoord)) * bloomIntensity);
 #elif DEBUG == 3
 gl_FragColor = encodeHDR(decodeHDR(texture2D(lensflare, v_Texcoord) * lensflareIntensity));
 #endif
#endif
 if (originalTexel.a <= 0.01 && gl_FragColor.a > 1e-5) {
 gl_FragColor.a = dot(gl_FragColor.rgb, vec3(0.2125, 0.7154, 0.0721));
 }
#ifdef PREMULTIPLY_ALPHA
 gl_FragColor.rgb *= gl_FragColor.a;
#endif
}
@end`,Np=`@export clay.compositor.lensflare
#define SAMPLE_NUMBER 8
uniform sampler2D texture;
uniform sampler2D lenscolor;
uniform vec2 textureSize : [512, 512];
uniform float dispersal : 0.3;
uniform float haloWidth : 0.4;
uniform float distortion : 1.0;
varying vec2 v_Texcoord;
@import clay.util.rgbm
vec4 textureDistorted(
 in vec2 texcoord,
 in vec2 direction,
 in vec3 distortion
) {
 return vec4(
 decodeHDR(texture2D(texture, texcoord + direction * distortion.r)).r,
 decodeHDR(texture2D(texture, texcoord + direction * distortion.g)).g,
 decodeHDR(texture2D(texture, texcoord + direction * distortion.b)).b,
 1.0
 );
}
void main()
{
 vec2 texcoord = -v_Texcoord + vec2(1.0); vec2 textureOffset = 1.0 / textureSize;
 vec2 ghostVec = (vec2(0.5) - texcoord) * dispersal;
 vec2 haloVec = normalize(ghostVec) * haloWidth;
 vec3 distortion = vec3(-textureOffset.x * distortion, 0.0, textureOffset.x * distortion);
 vec4 result = vec4(0.0);
 for (int i = 0; i < SAMPLE_NUMBER; i++)
 {
 vec2 offset = fract(texcoord + ghostVec * float(i));
 float weight = length(vec2(0.5) - offset) / length(vec2(0.5));
 weight = pow(1.0 - weight, 10.0);
 result += textureDistorted(offset, normalize(ghostVec), distortion) * weight;
 }
 result *= texture2D(lenscolor, vec2(length(vec2(0.5) - texcoord)) / length(vec2(0.5)));
 float weight = length(vec2(0.5) - fract(texcoord + haloVec)) / length(vec2(0.5));
 weight = pow(1.0 - weight, 10.0);
 vec2 offset = fract(texcoord + haloVec);
 result += textureDistorted(offset, normalize(ghostVec), distortion) * weight;
 gl_FragColor = result;
}
@end`,Bh=`@export clay.compositor.blend
#define SHADER_NAME blend
#ifdef TEXTURE1_ENABLED
uniform sampler2D texture1;
uniform float weight1 : 1.0;
#endif
#ifdef TEXTURE2_ENABLED
uniform sampler2D texture2;
uniform float weight2 : 1.0;
#endif
#ifdef TEXTURE3_ENABLED
uniform sampler2D texture3;
uniform float weight3 : 1.0;
#endif
#ifdef TEXTURE4_ENABLED
uniform sampler2D texture4;
uniform float weight4 : 1.0;
#endif
#ifdef TEXTURE5_ENABLED
uniform sampler2D texture5;
uniform float weight5 : 1.0;
#endif
#ifdef TEXTURE6_ENABLED
uniform sampler2D texture6;
uniform float weight6 : 1.0;
#endif
varying vec2 v_Texcoord;
@import clay.util.rgbm
void main()
{
 vec4 tex = vec4(0.0);
#ifdef TEXTURE1_ENABLED
 tex += decodeHDR(texture2D(texture1, v_Texcoord)) * weight1;
#endif
#ifdef TEXTURE2_ENABLED
 tex += decodeHDR(texture2D(texture2, v_Texcoord)) * weight2;
#endif
#ifdef TEXTURE3_ENABLED
 tex += decodeHDR(texture2D(texture3, v_Texcoord)) * weight3;
#endif
#ifdef TEXTURE4_ENABLED
 tex += decodeHDR(texture2D(texture4, v_Texcoord)) * weight4;
#endif
#ifdef TEXTURE5_ENABLED
 tex += decodeHDR(texture2D(texture5, v_Texcoord)) * weight5;
#endif
#ifdef TEXTURE6_ENABLED
 tex += decodeHDR(texture2D(texture6, v_Texcoord)) * weight6;
#endif
 gl_FragColor = encodeHDR(tex);
}
@end`,jh=`@export clay.compositor.fxaa
uniform sampler2D texture;
uniform vec4 viewport : VIEWPORT;
varying vec2 v_Texcoord;
#define FXAA_REDUCE_MIN (1.0/128.0)
#define FXAA_REDUCE_MUL (1.0/8.0)
#define FXAA_SPAN_MAX 8.0
@import clay.util.rgbm
void main()
{
 vec2 resolution = 1.0 / viewport.zw;
 vec3 rgbNW = decodeHDR( texture2D( texture, ( gl_FragCoord.xy + vec2( -1.0, -1.0 ) ) * resolution ) ).xyz;
 vec3 rgbNE = decodeHDR( texture2D( texture, ( gl_FragCoord.xy + vec2( 1.0, -1.0 ) ) * resolution ) ).xyz;
 vec3 rgbSW = decodeHDR( texture2D( texture, ( gl_FragCoord.xy + vec2( -1.0, 1.0 ) ) * resolution ) ).xyz;
 vec3 rgbSE = decodeHDR( texture2D( texture, ( gl_FragCoord.xy + vec2( 1.0, 1.0 ) ) * resolution ) ).xyz;
 vec4 rgbaM = decodeHDR( texture2D( texture, gl_FragCoord.xy * resolution ) );
 vec3 rgbM = rgbaM.xyz;
 float opacity = rgbaM.w;
 vec3 luma = vec3( 0.299, 0.587, 0.114 );
 float lumaNW = dot( rgbNW, luma );
 float lumaNE = dot( rgbNE, luma );
 float lumaSW = dot( rgbSW, luma );
 float lumaSE = dot( rgbSE, luma );
 float lumaM = dot( rgbM, luma );
 float lumaMin = min( lumaM, min( min( lumaNW, lumaNE ), min( lumaSW, lumaSE ) ) );
 float lumaMax = max( lumaM, max( max( lumaNW, lumaNE) , max( lumaSW, lumaSE ) ) );
 vec2 dir;
 dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));
 dir.y = ((lumaNW + lumaSW) - (lumaNE + lumaSE));
 float dirReduce = max( ( lumaNW + lumaNE + lumaSW + lumaSE ) * ( 0.25 * FXAA_REDUCE_MUL ), FXAA_REDUCE_MIN );
 float rcpDirMin = 1.0 / ( min( abs( dir.x ), abs( dir.y ) ) + dirReduce );
 dir = min( vec2( FXAA_SPAN_MAX, FXAA_SPAN_MAX),
 max( vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),
 dir * rcpDirMin)) * resolution;
 vec3 rgbA = decodeHDR( texture2D( texture, gl_FragCoord.xy * resolution + dir * ( 1.0 / 3.0 - 0.5 ) ) ).xyz;
 rgbA += decodeHDR( texture2D( texture, gl_FragCoord.xy * resolution + dir * ( 2.0 / 3.0 - 0.5 ) ) ).xyz;
 rgbA *= 0.5;
 vec3 rgbB = decodeHDR( texture2D( texture, gl_FragCoord.xy * resolution + dir * -0.5 ) ).xyz;
 rgbB += decodeHDR( texture2D( texture, gl_FragCoord.xy * resolution + dir * 0.5 ) ).xyz;
 rgbB *= 0.25;
 rgbB += rgbA * 0.5;
 float lumaB = dot( rgbB, luma );
 if ( ( lumaB < lumaMin ) || ( lumaB > lumaMax ) )
 {
 gl_FragColor = vec4( rgbA, opacity );
 }
 else {
 gl_FragColor = vec4( rgbB, opacity );
 }
}
@end`;function Ol(n){n.import(Ih),n.import(kf),n.import(Ip),n.import(Rh),n.import(Rp),n.import(so),n.import(Qf),n.import(Tl),n.import(Nh),n.import(Ps),n.import(Np),n.import(Bh),n.import(jh)}Ol(cr);var Bp=/^#source\((.*?)\)/;function Eu(n,e){var o=new Lp;e=e||{};var u={textures:{},parameters:{}},c=function(_,M){for(var I=0;I<n.nodes.length;I++){var F=n.nodes[I],ut=Jf(F,u,e);ut&&o.addNode(ut)}};for(var v in n.parameters){var g=n.parameters[v];u.parameters[v]=Al(g)}return Lu(n,u,e,function(x){u.textures=x,c()}),o}function Jf(n,e,o){var u=n.type||"filter",c,v,g;if(u==="filter"){var x=n.shader.trim(),_=Bp.exec(x);if(_?c=cr.source(_[1].trim()):x.charAt(0)==="#"&&(c=e.shaders[x.substr(1)]),c||(c=x),!c)return}if(n.inputs){v={};for(var M in n.inputs)typeof n.inputs[M]=="string"?v[M]=n.inputs[M]:v[M]={node:n.inputs[M].node,pin:n.inputs[M].pin}}if(n.outputs){g={};for(var M in n.outputs){var I=n.outputs[M];g[M]={},I.attachment!=null&&(g[M].attachment=I.attachment),I.keepLastFrame!=null&&(g[M].keepLastFrame=I.keepLastFrame),I.outputLastFrame!=null&&(g[M].outputLastFrame=I.outputLastFrame),I.parameters&&(g[M].parameters=Al(I.parameters))}}var F;if(u==="scene"?F=new wp({name:n.name,scene:o.scene,camera:o.camera,outputs:g}):u==="texture"?F=new Kf({name:n.name,outputs:g}):F=new wh({name:n.name,shader:c,inputs:v,outputs:g}),F){if(n.parameters)for(var M in n.parameters){var ut=n.parameters[M];typeof ut=="string"?(ut=ut.trim(),ut.charAt(0)==="#"?ut=e.textures[ut.substr(1)]:F.on("beforerender",zh(M,ws(ut)))):typeof ut=="function"&&F.on("beforerender",ut),F.setParameter(M,ut)}if(n.defines&&F.pass)for(var M in n.defines){var ut=n.defines[M];F.pass.material.define("fragment",M,ut)}}return F}function jp(n,e){return n}function zp(n,e){return e}function Al(n){var e={};if(!n)return e;["type","minFilter","magFilter","wrapS","wrapT","flipY","useMipmap"].forEach(function(u){var c=n[u];c!=null&&(typeof c=="string"&&(c=Mr[c]),e[u]=c)});var o=n.scale||1;return["width","height"].forEach(function(u){if(n[u]!=null){var c=n[u];typeof c=="string"?(c=c.trim(),e[u]=Ml(u,ws(c),o)):e[u]=c}}),e.width||(e.width=jp),e.height||(e.height=zp),n.useMipmap!=null&&(e.useMipmap=n.useMipmap),e}function Lu(n,e,o,u){if(!n.textures){u({});return}var c={},v=0,g=!1,x=o.textureRootPath;bt.each(n.textures,function(_,M){var I,F=_.path,ut=Al(_.parameters);if(Array.isArray(F)&&F.length===6)x&&(F=F.map(function(yt){return bt.relative2absolute(yt,x)})),I=new ma(ut);else if(typeof F=="string")x&&(F=bt.relative2absolute(F,x)),I=new Gr(ut);else return;I.load(F),v++,I.once("success",function(){c[M]=I,v--,v===0&&(u(c),g=!0)})}),v===0&&!g&&u(c)}function zh(n,e){return function(o){var u=o.getDevicePixelRatio(),c=o.getWidth(),v=o.getHeight(),g=e(c,v,u);this.setParameter(n,g)}}function Ml(n,e,o){return o=o||1,function(u){var c=u.getDevicePixelRatio(),v=u.getWidth()*o,g=u.getHeight()*o;return e(v,g,c)}}function ws(n){var e=/^expr\((.*)\)$/.exec(n);if(e)try{var o=new Function("width","height","dpr","return "+e[1]);return o(1,1),o}catch(u){throw new Error("Invalid expression.")}}var $o=Eu,$f=$o;function qf(n,e){for(var o=0,u=1/e,c=n;c>0;)o=o+u*(c%e),c=Math.floor(c/e),u=u/e;return o}var qo=qf,Fp=`@export ecgl.ssao.estimate

uniform sampler2D depthTex;

uniform sampler2D normalTex;

uniform sampler2D noiseTex;

uniform vec2 depthTexSize;

uniform vec2 noiseTexSize;

uniform mat4 projection;

uniform mat4 projectionInv;

uniform mat4 viewInverseTranspose;

uniform vec3 kernel[KERNEL_SIZE];

uniform float radius : 1;

uniform float power : 1;

uniform float bias: 1e-2;

uniform float intensity: 1.0;

varying vec2 v_Texcoord;

float ssaoEstimator(in vec3 originPos, in mat3 kernelBasis) {
 float occlusion = 0.0;

 for (int i = 0; i < KERNEL_SIZE; i++) {
 vec3 samplePos = kernel[i];
#ifdef NORMALTEX_ENABLED
 samplePos = kernelBasis * samplePos;
#endif
 samplePos = samplePos * radius + originPos;

 vec4 texCoord = projection * vec4(samplePos, 1.0);
 texCoord.xy /= texCoord.w;

 vec4 depthTexel = texture2D(depthTex, texCoord.xy * 0.5 + 0.5);

 float sampleDepth = depthTexel.r * 2.0 - 1.0;
 if (projection[3][3] == 0.0) {
 sampleDepth = projection[3][2] / (sampleDepth * projection[2][3] - projection[2][2]);
 }
 else {
 sampleDepth = (sampleDepth - projection[3][2]) / projection[2][2];
 }
 
 float rangeCheck = smoothstep(0.0, 1.0, radius / abs(originPos.z - sampleDepth));
 occlusion += rangeCheck * step(samplePos.z, sampleDepth - bias);
 }
#ifdef NORMALTEX_ENABLED
 occlusion = 1.0 - occlusion / float(KERNEL_SIZE);
#else
 occlusion = 1.0 - clamp((occlusion / float(KERNEL_SIZE) - 0.6) * 2.5, 0.0, 1.0);
#endif
 return pow(occlusion, power);
}

void main()
{

 vec4 depthTexel = texture2D(depthTex, v_Texcoord);

#ifdef NORMALTEX_ENABLED
 vec4 tex = texture2D(normalTex, v_Texcoord);
 if (dot(tex.rgb, tex.rgb) == 0.0) {
 gl_FragColor = vec4(1.0);
 return;
 }
 vec3 N = tex.rgb * 2.0 - 1.0;
 N = (viewInverseTranspose * vec4(N, 0.0)).xyz;

 vec2 noiseTexCoord = depthTexSize / vec2(noiseTexSize) * v_Texcoord;
 vec3 rvec = texture2D(noiseTex, noiseTexCoord).rgb * 2.0 - 1.0;
 vec3 T = normalize(rvec - N * dot(rvec, N));
 vec3 BT = normalize(cross(N, T));
 mat3 kernelBasis = mat3(T, BT, N);
#else
 if (depthTexel.r > 0.99999) {
 gl_FragColor = vec4(1.0);
 return;
 }
 mat3 kernelBasis;
#endif

 float z = depthTexel.r * 2.0 - 1.0;

 vec4 projectedPos = vec4(v_Texcoord * 2.0 - 1.0, z, 1.0);
 vec4 p4 = projectionInv * projectedPos;

 vec3 position = p4.xyz / p4.w;

 float ao = ssaoEstimator(position, kernelBasis);
 ao = clamp(1.0 - (1.0 - ao) * intensity, 0.0, 1.0);
 gl_FragColor = vec4(vec3(ao), 1.0);
}

@end


@export ecgl.ssao.blur
#define SHADER_NAME SSAO_BLUR

uniform sampler2D ssaoTexture;

#ifdef NORMALTEX_ENABLED
uniform sampler2D normalTex;
#endif

varying vec2 v_Texcoord;

uniform vec2 textureSize;
uniform float blurSize : 1.0;

uniform int direction: 0.0;

#ifdef DEPTHTEX_ENABLED
uniform sampler2D depthTex;
uniform mat4 projection;
uniform float depthRange : 0.5;

float getLinearDepth(vec2 coord)
{
 float depth = texture2D(depthTex, coord).r * 2.0 - 1.0;
 return projection[3][2] / (depth * projection[2][3] - projection[2][2]);
}
#endif

void main()
{
 float kernel[5];
 kernel[0] = 0.122581;
 kernel[1] = 0.233062;
 kernel[2] = 0.288713;
 kernel[3] = 0.233062;
 kernel[4] = 0.122581;

 vec2 off = vec2(0.0);
 if (direction == 0) {
 off[0] = blurSize / textureSize.x;
 }
 else {
 off[1] = blurSize / textureSize.y;
 }

 vec2 coord = v_Texcoord;

 float sum = 0.0;
 float weightAll = 0.0;

#ifdef NORMALTEX_ENABLED
 vec3 centerNormal = texture2D(normalTex, v_Texcoord).rgb * 2.0 - 1.0;
#endif
#if defined(DEPTHTEX_ENABLED)
 float centerDepth = getLinearDepth(v_Texcoord);
#endif

 for (int i = 0; i < 5; i++) {
 vec2 coord = clamp(v_Texcoord + vec2(float(i) - 2.0) * off, vec2(0.0), vec2(1.0));

 float w = kernel[i];
#ifdef NORMALTEX_ENABLED
 vec3 normal = texture2D(normalTex, coord).rgb * 2.0 - 1.0;
 w *= clamp(dot(normal, centerNormal), 0.0, 1.0);
#endif
#ifdef DEPTHTEX_ENABLED
 float d = getLinearDepth(coord);
 w *= (1.0 - smoothstep(abs(centerDepth - d) / depthRange, 0.0, 1.0));
#endif

 weightAll += w;
 sum += texture2D(ssaoTexture, coord).r * w;
 }

 gl_FragColor = vec4(vec3(sum / weightAll), 1.0);
}

@end
`;cr.import(Fp);function Dl(n){for(var e=new Uint8Array(n*n*4),o=0,u=new or,c=0;c<n;c++)for(var v=0;v<n;v++)u.set(Math.random()*2-1,Math.random()*2-1,0).normalize(),e[o++]=(u.x*.5+.5)*255,e[o++]=(u.y*.5+.5)*255,e[o++]=0,e[o++]=255;return e}function si(n){return new Gr({pixels:Dl(n),wrapS:Mr.REPEAT,wrapT:Mr.REPEAT,width:n,height:n})}function Vp(n,e,o){var u=new Float32Array(n*3);e=e||0;for(var c=0;c<n;c++){var v=qo(c+e,2)*(o?1:2)*Math.PI,g=qo(c+e,3)*Math.PI,x=Math.random(),_=Math.cos(v)*Math.sin(g)*x,M=Math.cos(g)*x,I=Math.sin(v)*Math.sin(g)*x;u[c*3]=_,u[c*3+1]=M,u[c*3+2]=I}return u}function ba(n){n=n||{},this._ssaoPass=new Gn({fragment:cr.source("ecgl.ssao.estimate")}),this._blurPass=new Gn({fragment:cr.source("ecgl.ssao.blur")}),this._framebuffer=new Kn({depthBuffer:!1}),this._ssaoTexture=new Gr,this._blurTexture=new Gr,this._blurTexture2=new Gr,this._depthTex=n.depthTexture,this._normalTex=n.normalTexture,this.setNoiseSize(4),this.setKernelSize(n.kernelSize||12),n.radius!=null&&this.setParameter("radius",n.radius),n.power!=null&&this.setParameter("power",n.power),this._normalTex||(this._ssaoPass.material.disableTexture("normalTex"),this._blurPass.material.disableTexture("normalTex")),this._depthTex||this._blurPass.material.disableTexture("depthTex"),this._blurPass.material.setUniform("normalTex",this._normalTex),this._blurPass.material.setUniform("depthTex",this._depthTex)}ba.prototype.setDepthTexture=function(n){this._depthTex=n},ba.prototype.setNormalTexture=function(n){this._normalTex=n,this._ssaoPass.material[n?"enableTexture":"disableTexture"]("normalTex"),this.setKernelSize(this._kernelSize)},ba.prototype.update=function(n,e,o){var u=n.getWidth(),c=n.getHeight(),v=this._ssaoPass,g=this._blurPass;v.setUniform("kernel",this._kernels[o%this._kernels.length]),v.setUniform("depthTex",this._depthTex),this._normalTex!=null&&v.setUniform("normalTex",this._normalTex),v.setUniform("depthTexSize",[this._depthTex.width,this._depthTex.height]);var x=new gr;gr.transpose(x,e.worldTransform),v.setUniform("projection",e.projectionMatrix.array),v.setUniform("projectionInv",e.invProjectionMatrix.array),v.setUniform("viewInverseTranspose",x.array);var _=this._ssaoTexture,M=this._blurTexture,I=this._blurTexture2;_.width=u/2,_.height=c/2,M.width=u,M.height=c,I.width=u,I.height=c,this._framebuffer.attach(_),this._framebuffer.bind(n),n.gl.clearColor(1,1,1,1),n.gl.clear(n.gl.COLOR_BUFFER_BIT),v.render(n),g.setUniform("textureSize",[u/2,c/2]),g.setUniform("projection",e.projectionMatrix.array),this._framebuffer.attach(M),g.setUniform("direction",0),g.setUniform("ssaoTexture",_),g.render(n),this._framebuffer.attach(I),g.setUniform("textureSize",[u,c]),g.setUniform("direction",1),g.setUniform("ssaoTexture",M),g.render(n),this._framebuffer.unbind(n);var F=n.clearColor;n.gl.clearColor(F[0],F[1],F[2],F[3])},ba.prototype.getTargetTexture=function(){return this._blurTexture2},ba.prototype.setParameter=function(n,e){n==="noiseTexSize"?this.setNoiseSize(e):n==="kernelSize"?this.setKernelSize(e):n==="intensity"?this._ssaoPass.material.set("intensity",e):this._ssaoPass.setUniform(n,e)},ba.prototype.setKernelSize=function(n){this._kernelSize=n,this._ssaoPass.material.define("fragment","KERNEL_SIZE",n),this._kernels=this._kernels||[];for(var e=0;e<30;e++)this._kernels[e]=Vp(n,e*n,!!this._normalTex)},ba.prototype.setNoiseSize=function(n){var e=this._ssaoPass.getUniform("noiseTex");e?(e.data=Dl(n),e.width=e.height=n,e.dirty()):(e=si(n),this._ssaoPass.setUniform("noiseTex",si(n))),this._ssaoPass.setUniform("noiseTexSize",[n,n])},ba.prototype.dispose=function(n){this._blurTexture.dispose(n),this._ssaoTexture.dispose(n),this._blurTexture2.dispose(n)};var Gp=ba,Fh=`@export ecgl.ssr.main

#define SHADER_NAME SSR
#define MAX_ITERATION 20;
#define SAMPLE_PER_FRAME 5;
#define TOTAL_SAMPLES 128;

uniform sampler2D sourceTexture;
uniform sampler2D gBufferTexture1;
uniform sampler2D gBufferTexture2;
uniform sampler2D gBufferTexture3;
uniform samplerCube specularCubemap;
uniform float specularIntensity: 1;

uniform mat4 projection;
uniform mat4 projectionInv;
uniform mat4 toViewSpace;
uniform mat4 toWorldSpace;

uniform float maxRayDistance: 200;

uniform float pixelStride: 16;
uniform float pixelStrideZCutoff: 50; 
uniform float screenEdgeFadeStart: 0.9; 
uniform float eyeFadeStart : 0.2; uniform float eyeFadeEnd: 0.8; 
uniform float minGlossiness: 0.2; uniform float zThicknessThreshold: 1;

uniform float nearZ;
uniform vec2 viewportSize : VIEWPORT_SIZE;

uniform float jitterOffset: 0;

varying vec2 v_Texcoord;

#ifdef DEPTH_DECODE
@import clay.util.decode_float
#endif

#ifdef PHYSICALLY_CORRECT
uniform sampler2D normalDistribution;
uniform float sampleOffset: 0;
uniform vec2 normalDistributionSize;

vec3 transformNormal(vec3 H, vec3 N) {
 vec3 upVector = N.y > 0.999 ? vec3(1.0, 0.0, 0.0) : vec3(0.0, 1.0, 0.0);
 vec3 tangentX = normalize(cross(N, upVector));
 vec3 tangentZ = cross(N, tangentX);
 return normalize(tangentX * H.x + N * H.y + tangentZ * H.z);
}
vec3 importanceSampleNormalGGX(float i, float roughness, vec3 N) {
 float p = fract((i + sampleOffset) / float(TOTAL_SAMPLES));
 vec3 H = texture2D(normalDistribution,vec2(roughness, p)).rgb;
 return transformNormal(H, N);
}
float G_Smith(float g, float ndv, float ndl) {
 float roughness = 1.0 - g;
 float k = roughness * roughness / 2.0;
 float G1V = ndv / (ndv * (1.0 - k) + k);
 float G1L = ndl / (ndl * (1.0 - k) + k);
 return G1L * G1V;
}
vec3 F_Schlick(float ndv, vec3 spec) {
 return spec + (1.0 - spec) * pow(1.0 - ndv, 5.0);
}
#endif

float fetchDepth(sampler2D depthTexture, vec2 uv)
{
 vec4 depthTexel = texture2D(depthTexture, uv);
 return depthTexel.r * 2.0 - 1.0;
}

float linearDepth(float depth)
{
 if (projection[3][3] == 0.0) {
 return projection[3][2] / (depth * projection[2][3] - projection[2][2]);
 }
 else {
 return (depth - projection[3][2]) / projection[2][2];
 }
}

bool rayIntersectDepth(float rayZNear, float rayZFar, vec2 hitPixel)
{
 if (rayZFar > rayZNear)
 {
 float t = rayZFar; rayZFar = rayZNear; rayZNear = t;
 }
 float cameraZ = linearDepth(fetchDepth(gBufferTexture2, hitPixel));
 return rayZFar <= cameraZ && rayZNear >= cameraZ - zThicknessThreshold;
}


bool traceScreenSpaceRay(
 vec3 rayOrigin, vec3 rayDir, float jitter,
 out vec2 hitPixel, out vec3 hitPoint, out float iterationCount
)
{
 float rayLength = ((rayOrigin.z + rayDir.z * maxRayDistance) > -nearZ)
 ? (-nearZ - rayOrigin.z) / rayDir.z : maxRayDistance;

 vec3 rayEnd = rayOrigin + rayDir * rayLength;

 vec4 H0 = projection * vec4(rayOrigin, 1.0);
 vec4 H1 = projection * vec4(rayEnd, 1.0);

 float k0 = 1.0 / H0.w, k1 = 1.0 / H1.w;

 vec3 Q0 = rayOrigin * k0, Q1 = rayEnd * k1;

 vec2 P0 = (H0.xy * k0 * 0.5 + 0.5) * viewportSize;
 vec2 P1 = (H1.xy * k1 * 0.5 + 0.5) * viewportSize;

 P1 += dot(P1 - P0, P1 - P0) < 0.0001 ? 0.01 : 0.0;
 vec2 delta = P1 - P0;

 bool permute = false;
 if (abs(delta.x) < abs(delta.y)) {
 permute = true;
 delta = delta.yx;
 P0 = P0.yx;
 P1 = P1.yx;
 }
 float stepDir = sign(delta.x);
 float invdx = stepDir / delta.x;

 vec3 dQ = (Q1 - Q0) * invdx;
 float dk = (k1 - k0) * invdx;

 vec2 dP = vec2(stepDir, delta.y * invdx);

 float strideScaler = 1.0 - min(1.0, -rayOrigin.z / pixelStrideZCutoff);
 float pixStride = 1.0 + strideScaler * pixelStride;

 dP *= pixStride; dQ *= pixStride; dk *= pixStride;

 vec4 pqk = vec4(P0, Q0.z, k0);
 vec4 dPQK = vec4(dP, dQ.z, dk);

 pqk += dPQK * jitter;
 float rayZFar = (dPQK.z * 0.5 + pqk.z) / (dPQK.w * 0.5 + pqk.w);
 float rayZNear;

 bool intersect = false;

 vec2 texelSize = 1.0 / viewportSize;

 iterationCount = 0.0;

 for (int i = 0; i < MAX_ITERATION; i++)
 {
 pqk += dPQK;

 rayZNear = rayZFar;
 rayZFar = (dPQK.z * 0.5 + pqk.z) / (dPQK.w * 0.5 + pqk.w);

 hitPixel = permute ? pqk.yx : pqk.xy;
 hitPixel *= texelSize;

 intersect = rayIntersectDepth(rayZNear, rayZFar, hitPixel);

 iterationCount += 1.0;

 dPQK *= 1.2;

 if (intersect) {
 break;
 }
 }

 Q0.xy += dQ.xy * iterationCount;
 Q0.z = pqk.z;
 hitPoint = Q0 / pqk.w;

 return intersect;
}

float calculateAlpha(
 float iterationCount, float reflectivity,
 vec2 hitPixel, vec3 hitPoint, float dist, vec3 rayDir
)
{
 float alpha = clamp(reflectivity, 0.0, 1.0);
 alpha *= 1.0 - (iterationCount / float(MAX_ITERATION));
 vec2 hitPixelNDC = hitPixel * 2.0 - 1.0;
 float maxDimension = min(1.0, max(abs(hitPixelNDC.x), abs(hitPixelNDC.y)));
 alpha *= 1.0 - max(0.0, maxDimension - screenEdgeFadeStart) / (1.0 - screenEdgeFadeStart);

 float _eyeFadeStart = eyeFadeStart;
 float _eyeFadeEnd = eyeFadeEnd;
 if (_eyeFadeStart > _eyeFadeEnd) {
 float tmp = _eyeFadeEnd;
 _eyeFadeEnd = _eyeFadeStart;
 _eyeFadeStart = tmp;
 }

 float eyeDir = clamp(rayDir.z, _eyeFadeStart, _eyeFadeEnd);
 alpha *= 1.0 - (eyeDir - _eyeFadeStart) / (_eyeFadeEnd - _eyeFadeStart);

 alpha *= 1.0 - clamp(dist / maxRayDistance, 0.0, 1.0);

 return alpha;
}

@import clay.util.rand

@import clay.util.rgbm

void main()
{
 vec4 normalAndGloss = texture2D(gBufferTexture1, v_Texcoord);

 if (dot(normalAndGloss.rgb, vec3(1.0)) == 0.0) {
 discard;
 }

 float g = normalAndGloss.a;
#if !defined(PHYSICALLY_CORRECT)
 if (g <= minGlossiness) {
 discard;
 }
#endif

 float reflectivity = (g - minGlossiness) / (1.0 - minGlossiness);

 vec3 N = normalize(normalAndGloss.rgb * 2.0 - 1.0);
 N = normalize((toViewSpace * vec4(N, 0.0)).xyz);

 vec4 projectedPos = vec4(v_Texcoord * 2.0 - 1.0, fetchDepth(gBufferTexture2, v_Texcoord), 1.0);
 vec4 pos = projectionInv * projectedPos;
 vec3 rayOrigin = pos.xyz / pos.w;
 vec3 V = -normalize(rayOrigin);

 float ndv = clamp(dot(N, V), 0.0, 1.0);
 float iterationCount;
 float jitter = rand(fract(v_Texcoord + jitterOffset));

#ifdef PHYSICALLY_CORRECT
 vec4 color = vec4(vec3(0.0), 1.0);
 vec4 albedoMetalness = texture2D(gBufferTexture3, v_Texcoord);
 vec3 albedo = albedoMetalness.rgb;
 float m = albedoMetalness.a;
 vec3 diffuseColor = albedo * (1.0 - m);
 vec3 spec = mix(vec3(0.04), albedo, m);

 float jitter2 = rand(fract(v_Texcoord)) * float(TOTAL_SAMPLES);

 for (int i = 0; i < SAMPLE_PER_FRAME; i++) {
 vec3 H = importanceSampleNormalGGX(float(i) + jitter2, 1.0 - g, N);
 vec3 rayDir = normalize(reflect(-V, H));
#else
 vec3 rayDir = normalize(reflect(-V, N));
#endif
 vec2 hitPixel;
 vec3 hitPoint;

 bool intersect = traceScreenSpaceRay(rayOrigin, rayDir, jitter, hitPixel, hitPoint, iterationCount);

 float dist = distance(rayOrigin, hitPoint);

 vec3 hitNormal = texture2D(gBufferTexture1, hitPixel).rgb * 2.0 - 1.0;
 hitNormal = normalize((toViewSpace * vec4(hitNormal, 0.0)).xyz);
#ifdef PHYSICALLY_CORRECT
 float ndl = clamp(dot(N, rayDir), 0.0, 1.0);
 float vdh = clamp(dot(V, H), 0.0, 1.0);
 float ndh = clamp(dot(N, H), 0.0, 1.0);
 vec3 litTexel = vec3(0.0);
 if (dot(hitNormal, rayDir) < 0.0 && intersect) {
 litTexel = texture2D(sourceTexture, hitPixel).rgb;
 litTexel *= pow(clamp(1.0 - dist / 200.0, 0.0, 1.0), 3.0);

 }
 else {
 #ifdef SPECULARCUBEMAP_ENABLED
 vec3 rayDirW = normalize(toWorldSpace * vec4(rayDir, 0.0)).rgb;
 litTexel = RGBMDecode(textureCubeLodEXT(specularCubemap, rayDirW, 0.0), 8.12).rgb * specularIntensity;
#endif
 }
 color.rgb += ndl * litTexel * (
 F_Schlick(ndl, spec) * G_Smith(g, ndv, ndl) * vdh / (ndh * ndv + 0.001)
 );
 }
 color.rgb /= float(SAMPLE_PER_FRAME);
#else
 #if !defined(SPECULARCUBEMAP_ENABLED)
 if (dot(hitNormal, rayDir) >= 0.0) {
 discard;
 }
 if (!intersect) {
 discard;
 }
#endif
 float alpha = clamp(calculateAlpha(iterationCount, reflectivity, hitPixel, hitPoint, dist, rayDir), 0.0, 1.0);
 vec4 color = texture2D(sourceTexture, hitPixel);
 color.rgb *= alpha;

#ifdef SPECULARCUBEMAP_ENABLED
 vec3 rayDirW = normalize(toWorldSpace * vec4(rayDir, 0.0)).rgb;
 alpha = alpha * (intersect ? 1.0 : 0.0);
 float bias = (1.0 -g) * 5.0;
 color.rgb += (1.0 - alpha)
 * RGBMDecode(textureCubeLodEXT(specularCubemap, rayDirW, bias), 8.12).rgb
 * specularIntensity;
#endif

#endif

 gl_FragColor = encodeHDR(color);
}
@end

@export ecgl.ssr.blur

uniform sampler2D texture;
uniform sampler2D gBufferTexture1;
uniform sampler2D gBufferTexture2;
uniform mat4 projection;
uniform float depthRange : 0.05;

varying vec2 v_Texcoord;

uniform vec2 textureSize;
uniform float blurSize : 1.0;

#ifdef BLEND
 #ifdef SSAOTEX_ENABLED
uniform sampler2D ssaoTex;
 #endif
uniform sampler2D sourceTexture;
#endif

float getLinearDepth(vec2 coord)
{
 float depth = texture2D(gBufferTexture2, coord).r * 2.0 - 1.0;
 return projection[3][2] / (depth * projection[2][3] - projection[2][2]);
}

@import clay.util.rgbm


void main()
{
 @import clay.compositor.kernel.gaussian_9

 vec4 centerNTexel = texture2D(gBufferTexture1, v_Texcoord);
 float g = centerNTexel.a;
 float maxBlurSize = clamp(1.0 - g, 0.0, 1.0) * blurSize;
#ifdef VERTICAL
 vec2 off = vec2(0.0, maxBlurSize / textureSize.y);
#else
 vec2 off = vec2(maxBlurSize / textureSize.x, 0.0);
#endif

 vec2 coord = v_Texcoord;

 vec4 sum = vec4(0.0);
 float weightAll = 0.0;

 vec3 cN = centerNTexel.rgb * 2.0 - 1.0;
 float cD = getLinearDepth(v_Texcoord);
 for (int i = 0; i < 9; i++) {
 vec2 coord = clamp((float(i) - 4.0) * off + v_Texcoord, vec2(0.0), vec2(1.0));
 float w = gaussianKernel[i]
 * clamp(dot(cN, texture2D(gBufferTexture1, coord).rgb * 2.0 - 1.0), 0.0, 1.0);
 float d = getLinearDepth(coord);
 w *= (1.0 - smoothstep(abs(cD - d) / depthRange, 0.0, 1.0));

 weightAll += w;
 sum += decodeHDR(texture2D(texture, coord)) * w;
 }

#ifdef BLEND
 float aoFactor = 1.0;
 #ifdef SSAOTEX_ENABLED
 aoFactor = texture2D(ssaoTex, v_Texcoord).r;
 #endif
 gl_FragColor = encodeHDR(
 sum / weightAll * aoFactor + decodeHDR(texture2D(sourceTexture, v_Texcoord))
 );
#else
 gl_FragColor = encodeHDR(sum / weightAll);
#endif
}

@end`;cr.import(Fh);function Ga(n){n=n||{},this._ssrPass=new Gn({fragment:cr.source("ecgl.ssr.main"),clearColor:[0,0,0,0]}),this._blurPass1=new Gn({fragment:cr.source("ecgl.ssr.blur"),clearColor:[0,0,0,0]}),this._blurPass2=new Gn({fragment:cr.source("ecgl.ssr.blur"),clearColor:[0,0,0,0]}),this._blendPass=new Gn({fragment:cr.source("clay.compositor.blend")}),this._blendPass.material.disableTexturesAll(),this._blendPass.material.enableTexture(["texture1","texture2"]),this._ssrPass.setUniform("gBufferTexture1",n.normalTexture),this._ssrPass.setUniform("gBufferTexture2",n.depthTexture),this._blurPass1.setUniform("gBufferTexture1",n.normalTexture),this._blurPass1.setUniform("gBufferTexture2",n.depthTexture),this._blurPass2.setUniform("gBufferTexture1",n.normalTexture),this._blurPass2.setUniform("gBufferTexture2",n.depthTexture),this._blurPass2.material.define("fragment","VERTICAL"),this._blurPass2.material.define("fragment","BLEND"),this._ssrTexture=new Gr({type:Mr.HALF_FLOAT}),this._texture2=new Gr({type:Mr.HALF_FLOAT}),this._texture3=new Gr({type:Mr.HALF_FLOAT}),this._prevTexture=new Gr({type:Mr.HALF_FLOAT}),this._currentTexture=new Gr({type:Mr.HALF_FLOAT}),this._frameBuffer=new Kn({depthBuffer:!1}),this._normalDistribution=null,this._totalSamples=256,this._samplePerFrame=4,this._ssrPass.material.define("fragment","SAMPLE_PER_FRAME",this._samplePerFrame),this._ssrPass.material.define("fragment","TOTAL_SAMPLES",this._totalSamples),this._downScale=1}Ga.prototype.setAmbientCubemap=function(n,e){this._ssrPass.material.set("specularCubemap",n),this._ssrPass.material.set("specularIntensity",e);var o=n&&e;this._ssrPass.material[o?"enableTexture":"disableTexture"]("specularCubemap")},Ga.prototype.update=function(n,e,o,u){var c=n.getWidth(),v=n.getHeight(),g=this._ssrTexture,x=this._texture2,_=this._texture3;g.width=this._prevTexture.width=this._currentTexture.width=c/this._downScale,g.height=this._prevTexture.height=this._currentTexture.height=v/this._downScale,x.width=_.width=c,x.height=_.height=v;var M=this._frameBuffer,I=this._ssrPass,F=this._blurPass1,ut=this._blurPass2,yt=this._blendPass,Dt=new gr,Et=new gr;gr.transpose(Dt,e.worldTransform),gr.transpose(Et,e.viewMatrix),I.setUniform("sourceTexture",o),I.setUniform("projection",e.projectionMatrix.array),I.setUniform("projectionInv",e.invProjectionMatrix.array),I.setUniform("toViewSpace",Dt.array),I.setUniform("toWorldSpace",Et.array),I.setUniform("nearZ",e.near);var Pt=u/this._totalSamples*this._samplePerFrame;if(I.setUniform("jitterOffset",Pt),I.setUniform("sampleOffset",u*this._samplePerFrame),F.setUniform("textureSize",[g.width,g.height]),ut.setUniform("textureSize",[c,v]),ut.setUniform("sourceTexture",o),F.setUniform("projection",e.projectionMatrix.array),ut.setUniform("projection",e.projectionMatrix.array),M.attach(g),M.bind(n),I.render(n),this._physicallyCorrect&&(M.attach(this._currentTexture),yt.setUniform("texture1",this._prevTexture),yt.setUniform("texture2",g),yt.material.set({weight1:u>=1?.95:0,weight2:u>=1?.05:1}),yt.render(n)),M.attach(x),F.setUniform("texture",this._physicallyCorrect?this._currentTexture:g),F.render(n),M.attach(_),ut.setUniform("texture",x),ut.render(n),M.unbind(n),this._physicallyCorrect){var Ht=this._prevTexture;this._prevTexture=this._currentTexture,this._currentTexture=Ht}},Ga.prototype.getTargetTexture=function(){return this._texture3},Ga.prototype.setParameter=function(n,e){n==="maxIteration"?this._ssrPass.material.define("fragment","MAX_ITERATION",e):this._ssrPass.setUniform(n,e)},Ga.prototype.setPhysicallyCorrect=function(n){n?(this._normalDistribution||(this._normalDistribution=vu.generateNormalDistribution(64,this._totalSamples)),this._ssrPass.material.define("fragment","PHYSICALLY_CORRECT"),this._ssrPass.material.set("normalDistribution",this._normalDistribution),this._ssrPass.material.set("normalDistributionSize",[64,this._totalSamples])):this._ssrPass.material.undefine("fragment","PHYSICALLY_CORRECT"),this._physicallyCorrect=n},Ga.prototype.setSSAOTexture=function(n){var e=this._blurPass2;n?(e.material.enableTexture("ssaoTex"),e.material.set("ssaoTex",n)):e.material.disableTexture("ssaoTex")},Ga.prototype.isFinished=function(n){return this._physicallyCorrect?n>this._totalSamples/this._samplePerFrame:!0},Ga.prototype.dispose=function(n){this._ssrTexture.dispose(n),this._texture2.dispose(n),this._texture3.dispose(n),this._prevTexture.dispose(n),this._currentTexture.dispose(n),this._frameBuffer.dispose(n)};var Vh=Ga,Gh=[0,0,-.321585265978,-.154972575841,.458126042375,.188473391593,.842080129861,.527766490688,.147304551086,-.659453822776,-.331943915203,-.940619700594,.0479226680259,.54812163202,.701581552186,-.709825561388,-.295436780218,.940589268233,-.901489676764,.237713156085,.973570876096,-.109899459384,-.866792314779,-.451805525005,.330975007087,.800048655954,-.344275183665,.381779221166,-.386139432542,-.437418421534,-.576478634965,-.0148463392551,.385798197415,-.262426961053,-.666302061145,.682427250835,-.628010632582,-.732836215494,.10163141741,-.987658134403,.711995289051,-.320024291314,.0296005138058,.950296523438,.0130612307608,-.351024443122,-.879596633704,-.10478487883,.435712737232,.504254490347,.779203817497,.206477676721,.388264289969,-.896736162545,-.153106280781,-.629203242522,-.245517550697,.657969239148,.126830499058,.26862328493,-.634888119007,-.302301223431,.617074219636,.779817204925],tc=`@export ecgl.normal.vertex

@import ecgl.common.transformUniforms

@import ecgl.common.uv.header

@import ecgl.common.attributes

varying vec3 v_Normal;
varying vec3 v_WorldPosition;

@import ecgl.common.normalMap.vertexHeader

@import ecgl.common.vertexAnimation.header

void main()
{

 @import ecgl.common.vertexAnimation.main

 @import ecgl.common.uv.main

 v_Normal = normalize((worldInverseTranspose * vec4(normal, 0.0)).xyz);
 v_WorldPosition = (world * vec4(pos, 1.0)).xyz;

 @import ecgl.common.normalMap.vertexMain

 gl_Position = worldViewProjection * vec4(pos, 1.0);

}


@end


@export ecgl.normal.fragment

#define ROUGHNESS_CHANEL 0

uniform bool useBumpMap;
uniform bool useRoughnessMap;
uniform bool doubleSide;
uniform float roughness;

@import ecgl.common.uv.fragmentHeader

varying vec3 v_Normal;
varying vec3 v_WorldPosition;

uniform mat4 viewInverse : VIEWINVERSE;

@import ecgl.common.normalMap.fragmentHeader
@import ecgl.common.bumpMap.header

uniform sampler2D roughnessMap;

void main()
{
 vec3 N = v_Normal;
 
 bool flipNormal = false;
 if (doubleSide) {
 vec3 eyePos = viewInverse[3].xyz;
 vec3 V = normalize(eyePos - v_WorldPosition);

 if (dot(N, V) < 0.0) {
 flipNormal = true;
 }
 }

 @import ecgl.common.normalMap.fragmentMain

 if (useBumpMap) {
 N = bumpNormal(v_WorldPosition, v_Normal, N);
 }

 float g = 1.0 - roughness;

 if (useRoughnessMap) {
 float g2 = 1.0 - texture2D(roughnessMap, v_DetailTexcoord)[ROUGHNESS_CHANEL];
 g = clamp(g2 + (g - 0.5) * 2.0, 0.0, 1.0);
 }

 if (flipNormal) {
 N = -N;
 }

 gl_FragColor.rgb = (N.xyz + 1.0) * 0.5;
 gl_FragColor.a = g;
}
@end`;cr.import(tc);function ec(n,e,o,u,c){var v=n.gl;e.setUniform(v,"1i",o,c),v.activeTexture(v.TEXTURE0+c),u.isRenderable()?u.bind(n):u.unbind(n)}function rc(n,e,o,u,c){var v,g,x,_,M=n.gl;return function(I,F,ut){if(!(_&&_.material===I.material)){var yt=I.material,Dt=I.__program,Et=yt.get("roughness");Et==null&&(Et=1);var Pt=yt.get("normalMap")||e,Ht=yt.get("roughnessMap"),$t=yt.get("bumpMap"),qt=yt.get("uvRepeat"),le=yt.get("uvOffset"),ie=yt.get("detailUvRepeat"),he=yt.get("detailUvOffset"),Re=!!$t&&yt.isTextureEnabled("bumpMap"),ze=!!Ht&&yt.isTextureEnabled("roughnessMap"),Pe=yt.isDefined("fragment","DOUBLE_SIDED");$t=$t||o,Ht=Ht||u,ut!==F?(F.set("normalMap",Pt),F.set("bumpMap",$t),F.set("roughnessMap",Ht),F.set("useBumpMap",Re),F.set("useRoughnessMap",ze),F.set("doubleSide",Pe),qt!=null&&F.set("uvRepeat",qt),le!=null&&F.set("uvOffset",le),ie!=null&&F.set("detailUvRepeat",ie),he!=null&&F.set("detailUvOffset",he),F.set("roughness",Et)):(Dt.setUniform(M,"1f","roughness",Et),v!==Pt&&ec(n,Dt,"normalMap",Pt,0),g!==$t&&$t&&ec(n,Dt,"bumpMap",$t,1),x!==Ht&&Ht&&ec(n,Dt,"roughnessMap",Ht,2),qt!=null&&Dt.setUniform(M,"2f","uvRepeat",qt),le!=null&&Dt.setUniform(M,"2f","uvOffset",le),ie!=null&&Dt.setUniform(M,"2f","detailUvRepeat",ie),he!=null&&Dt.setUniform(M,"2f","detailUvOffset",he),Dt.setUniform(M,"1i","useBumpMap",+Re),Dt.setUniform(M,"1i","useRoughnessMap",+ze),Dt.setUniform(M,"1i","doubleSide",+Pe)),v=Pt,g=$t,x=Ht,_=I}}}function Is(n){n=n||{},this._depthTex=new Gr({format:Mr.DEPTH_COMPONENT,type:Mr.UNSIGNED_INT}),this._normalTex=new Gr({type:Mr.HALF_FLOAT}),this._framebuffer=new Kn,this._framebuffer.attach(this._normalTex),this._framebuffer.attach(this._depthTex,Kn.DEPTH_ATTACHMENT),this._normalMaterial=new Le({shader:new cr(cr.source("ecgl.normal.vertex"),cr.source("ecgl.normal.fragment"))}),this._normalMaterial.enableTexture(["normalMap","bumpMap","roughnessMap"]),this._defaultNormalMap=oo.createBlank("#000"),this._defaultBumpMap=oo.createBlank("#000"),this._defaultRoughessMap=oo.createBlank("#000"),this._debugPass=new Gn({fragment:cr.source("clay.compositor.output")}),this._debugPass.setUniform("texture",this._normalTex),this._debugPass.material.undefine("fragment","OUTPUT_ALPHA")}Is.prototype.getDepthTexture=function(){return this._depthTex},Is.prototype.getNormalTexture=function(){return this._normalTex},Is.prototype.update=function(n,e,o){var u=n.getWidth(),c=n.getHeight(),v=this._depthTex,g=this._normalTex,x=this._normalMaterial;v.width=u,v.height=c,g.width=u,g.height=c;var _=e.getRenderList(o).opaque;this._framebuffer.bind(n),n.gl.clearColor(0,0,0,0),n.gl.clear(n.gl.COLOR_BUFFER_BIT|n.gl.DEPTH_BUFFER_BIT),n.gl.disable(n.gl.BLEND),n.renderPass(_,o,{getMaterial:function(){return x},ifRender:function(I){return I.renderNormal},beforeRender:rc(n,this._defaultNormalMap,this._defaultBumpMap,this._defaultRoughessMap,this._normalMaterial),sort:n.opaqueSortCompare}),this._framebuffer.unbind(n)},Is.prototype.renderDebug=function(n){this._debugPass.render(n)},Is.prototype.dispose=function(n){this._depthTex.dispose(n),this._normalTex.dispose(n)};var Cl=Is;function lo(n){n=n||{},this._edgePass=new Gn({fragment:cr.source("ecgl.edge")}),this._edgePass.setUniform("normalTexture",n.normalTexture),this._edgePass.setUniform("depthTexture",n.depthTexture),this._targetTexture=new Gr({type:Mr.HALF_FLOAT}),this._frameBuffer=new Kn,this._frameBuffer.attach(this._targetTexture)}lo.prototype.update=function(n,e,o,u){var c=n.getWidth(),v=n.getHeight(),g=this._targetTexture;g.width=c,g.height=v;var x=this._frameBuffer;x.bind(n),this._edgePass.setUniform("projectionInv",e.invProjectionMatrix.array),this._edgePass.setUniform("textureSize",[c,v]),this._edgePass.setUniform("texture",o),this._edgePass.render(n),x.unbind(n)},lo.prototype.getTargetTexture=function(){return this._targetTexture},lo.prototype.setParameter=function(n,e){this._edgePass.setUniform(n,e)},lo.prototype.dispose=function(n){this._targetTexture.dispose(n),this._frameBuffer.dispose(n)};var Uh=lo,nc={type:"compositor",nodes:[{name:"source",type:"texture",outputs:{color:{}}},{name:"source_half",shader:"#source(clay.compositor.downsample)",inputs:{texture:"source"},outputs:{color:{parameters:{width:"expr(width * 1.0 / 2)",height:"expr(height * 1.0 / 2)",type:"HALF_FLOAT"}}},parameters:{textureSize:"expr( [width * 1.0, height * 1.0] )"}},{name:"bright",shader:"#source(clay.compositor.bright)",inputs:{texture:"source_half"},outputs:{color:{parameters:{width:"expr(width * 1.0 / 2)",height:"expr(height * 1.0 / 2)",type:"HALF_FLOAT"}}},parameters:{threshold:2,scale:4,textureSize:"expr([width * 1.0 / 2, height / 2])"}},{name:"bright_downsample_4",shader:"#source(clay.compositor.downsample)",inputs:{texture:"bright"},outputs:{color:{parameters:{width:"expr(width * 1.0 / 4)",height:"expr(height * 1.0 / 4)",type:"HALF_FLOAT"}}},parameters:{textureSize:"expr( [width * 1.0 / 2, height / 2] )"}},{name:"bright_downsample_8",shader:"#source(clay.compositor.downsample)",inputs:{texture:"bright_downsample_4"},outputs:{color:{parameters:{width:"expr(width * 1.0 / 8)",height:"expr(height * 1.0 / 8)",type:"HALF_FLOAT"}}},parameters:{textureSize:"expr( [width * 1.0 / 4, height / 4] )"}},{name:"bright_downsample_16",shader:"#source(clay.compositor.downsample)",inputs:{texture:"bright_downsample_8"},outputs:{color:{parameters:{width:"expr(width * 1.0 / 16)",height:"expr(height * 1.0 / 16)",type:"HALF_FLOAT"}}},parameters:{textureSize:"expr( [width * 1.0 / 8, height / 8] )"}},{name:"bright_downsample_32",shader:"#source(clay.compositor.downsample)",inputs:{texture:"bright_downsample_16"},outputs:{color:{parameters:{width:"expr(width * 1.0 / 32)",height:"expr(height * 1.0 / 32)",type:"HALF_FLOAT"}}},parameters:{textureSize:"expr( [width * 1.0 / 16, height / 16] )"}},{name:"bright_upsample_16_blur_h",shader:"#source(clay.compositor.gaussian_blur)",inputs:{texture:"bright_downsample_32"},outputs:{color:{parameters:{width:"expr(width * 1.0 / 16)",height:"expr(height * 1.0 / 16)",type:"HALF_FLOAT"}}},parameters:{blurSize:1,blurDir:0,textureSize:"expr( [width * 1.0 / 32, height / 32] )"}},{name:"bright_upsample_16_blur_v",shader:"#source(clay.compositor.gaussian_blur)",inputs:{texture:"bright_upsample_16_blur_h"},outputs:{color:{parameters:{width:"expr(width * 1.0 / 16)",height:"expr(height * 1.0 / 16)",type:"HALF_FLOAT"}}},parameters:{blurSize:1,blurDir:1,textureSize:"expr( [width * 1.0 / 16, height * 1.0 / 16] )"}},{name:"bright_upsample_8_blur_h",shader:"#source(clay.compositor.gaussian_blur)",inputs:{texture:"bright_downsample_16"},outputs:{color:{parameters:{width:"expr(width * 1.0 / 8)",height:"expr(height * 1.0 / 8)",type:"HALF_FLOAT"}}},parameters:{blurSize:1,blurDir:0,textureSize:"expr( [width * 1.0 / 16, height * 1.0 / 16] )"}},{name:"bright_upsample_8_blur_v",shader:"#source(clay.compositor.gaussian_blur)",inputs:{texture:"bright_upsample_8_blur_h"},outputs:{color:{parameters:{width:"expr(width * 1.0 / 8)",height:"expr(height * 1.0 / 8)",type:"HALF_FLOAT"}}},parameters:{blurSize:1,blurDir:1,textureSize:"expr( [width * 1.0 / 8, height * 1.0 / 8] )"}},{name:"bright_upsample_8_blend",shader:"#source(clay.compositor.blend)",inputs:{texture1:"bright_upsample_8_blur_v",texture2:"bright_upsample_16_blur_v"},outputs:{color:{parameters:{width:"expr(width * 1.0 / 8)",height:"expr(height * 1.0 / 8)",type:"HALF_FLOAT"}}},parameters:{weight1:.3,weight2:.7}},{name:"bright_upsample_4_blur_h",shader:"#source(clay.compositor.gaussian_blur)",inputs:{texture:"bright_downsample_8"},outputs:{color:{parameters:{width:"expr(width * 1.0 / 4)",height:"expr(height * 1.0 / 4)",type:"HALF_FLOAT"}}},parameters:{blurSize:1,blurDir:0,textureSize:"expr( [width * 1.0 / 8, height * 1.0 / 8] )"}},{name:"bright_upsample_4_blur_v",shader:"#source(clay.compositor.gaussian_blur)",inputs:{texture:"bright_upsample_4_blur_h"},outputs:{color:{parameters:{width:"expr(width * 1.0 / 4)",height:"expr(height * 1.0 / 4)",type:"HALF_FLOAT"}}},parameters:{blurSize:1,blurDir:1,textureSize:"expr( [width * 1.0 / 4, height * 1.0 / 4] )"}},{name:"bright_upsample_4_blend",shader:"#source(clay.compositor.blend)",inputs:{texture1:"bright_upsample_4_blur_v",texture2:"bright_upsample_8_blend"},outputs:{color:{parameters:{width:"expr(width * 1.0 / 4)",height:"expr(height * 1.0 / 4)",type:"HALF_FLOAT"}}},parameters:{weight1:.3,weight2:.7}},{name:"bright_upsample_2_blur_h",shader:"#source(clay.compositor.gaussian_blur)",inputs:{texture:"bright_downsample_4"},outputs:{color:{parameters:{width:"expr(width * 1.0 / 2)",height:"expr(height * 1.0 / 2)",type:"HALF_FLOAT"}}},parameters:{blurSize:1,blurDir:0,textureSize:"expr( [width * 1.0 / 4, height * 1.0 / 4] )"}},{name:"bright_upsample_2_blur_v",shader:"#source(clay.compositor.gaussian_blur)",inputs:{texture:"bright_upsample_2_blur_h"},outputs:{color:{parameters:{width:"expr(width * 1.0 / 2)",height:"expr(height * 1.0 / 2)",type:"HALF_FLOAT"}}},parameters:{blurSize:1,blurDir:1,textureSize:"expr( [width * 1.0 / 2, height * 1.0 / 2] )"}},{name:"bright_upsample_2_blend",shader:"#source(clay.compositor.blend)",inputs:{texture1:"bright_upsample_2_blur_v",texture2:"bright_upsample_4_blend"},outputs:{color:{parameters:{width:"expr(width * 1.0 / 2)",height:"expr(height * 1.0 / 2)",type:"HALF_FLOAT"}}},parameters:{weight1:.3,weight2:.7}},{name:"bright_upsample_full_blur_h",shader:"#source(clay.compositor.gaussian_blur)",inputs:{texture:"bright"},outputs:{color:{parameters:{width:"expr(width * 1.0)",height:"expr(height * 1.0)",type:"HALF_FLOAT"}}},parameters:{blurSize:1,blurDir:0,textureSize:"expr( [width * 1.0 / 2, height * 1.0 / 2] )"}},{name:"bright_upsample_full_blur_v",shader:"#source(clay.compositor.gaussian_blur)",inputs:{texture:"bright_upsample_full_blur_h"},outputs:{color:{parameters:{width:"expr(width * 1.0)",height:"expr(height * 1.0)",type:"HALF_FLOAT"}}},parameters:{blurSize:1,blurDir:1,textureSize:"expr( [width * 1.0, height * 1.0] )"}},{name:"bloom_composite",shader:"#source(clay.compositor.blend)",inputs:{texture1:"bright_upsample_full_blur_v",texture2:"bright_upsample_2_blend"},outputs:{color:{parameters:{width:"expr(width * 1.0)",height:"expr(height * 1.0)",type:"HALF_FLOAT"}}},parameters:{weight1:.3,weight2:.7}},{name:"coc",shader:"#source(ecgl.dof.coc)",outputs:{color:{parameters:{minFilter:"NEAREST",magFilter:"NEAREST",width:"expr(width * 1.0)",height:"expr(height * 1.0)"}}},parameters:{focalDist:50,focalRange:30}},{name:"dof_far_blur",shader:"#source(ecgl.dof.diskBlur)",inputs:{texture:"source",coc:"coc"},outputs:{color:{parameters:{width:"expr(width * 1.0)",height:"expr(height * 1.0)",type:"HALF_FLOAT"}}},parameters:{textureSize:"expr( [width * 1.0, height * 1.0] )"}},{name:"dof_near_blur",shader:"#source(ecgl.dof.diskBlur)",inputs:{texture:"source",coc:"coc"},outputs:{color:{parameters:{width:"expr(width * 1.0)",height:"expr(height * 1.0)",type:"HALF_FLOAT"}}},parameters:{textureSize:"expr( [width * 1.0, height * 1.0] )"},defines:{BLUR_NEARFIELD:null}},{name:"dof_coc_blur",shader:"#source(ecgl.dof.diskBlur)",inputs:{texture:"coc"},outputs:{color:{parameters:{minFilter:"NEAREST",magFilter:"NEAREST",width:"expr(width * 1.0)",height:"expr(height * 1.0)"}}},parameters:{textureSize:"expr( [width * 1.0, height * 1.0] )"},defines:{BLUR_COC:null}},{name:"dof_composite",shader:"#source(ecgl.dof.composite)",inputs:{original:"source",blurred:"dof_far_blur",nearfield:"dof_near_blur",coc:"coc",nearcoc:"dof_coc_blur"},outputs:{color:{parameters:{width:"expr(width * 1.0)",height:"expr(height * 1.0)",type:"HALF_FLOAT"}}}},{name:"composite",shader:"#source(clay.compositor.hdr.composite)",inputs:{texture:"source",bloom:"bloom_composite"},outputs:{color:{parameters:{width:"expr(width * 1.0)",height:"expr(height * 1.0)"}}},defines:{}},{name:"FXAA",shader:"#source(clay.compositor.fxaa)",inputs:{texture:"composite"}}]},Hh=`@export ecgl.dof.coc

uniform sampler2D depth;

uniform float zNear: 0.1;
uniform float zFar: 2000;

uniform float focalDistance: 3;
uniform float focalRange: 1;
uniform float focalLength: 30;
uniform float fstop: 2.8;

varying vec2 v_Texcoord;

@import clay.util.encode_float

void main()
{
 float z = texture2D(depth, v_Texcoord).r * 2.0 - 1.0;

 float dist = 2.0 * zNear * zFar / (zFar + zNear - z * (zFar - zNear));

 float aperture = focalLength / fstop;

 float coc;

 float uppper = focalDistance + focalRange;
 float lower = focalDistance - focalRange;
 if (dist <= uppper && dist >= lower) {
 coc = 0.5;
 }
 else {
 float focalAdjusted = dist > uppper ? uppper : lower;

 coc = abs(aperture * (focalLength * (dist - focalAdjusted)) / (dist * (focalAdjusted - focalLength)));
 coc = clamp(coc, 0.0, 2.0) / 2.00001;

 if (dist < lower) {
 coc = -coc;
 }
 coc = coc * 0.5 + 0.5;
 }

 gl_FragColor = encodeFloat(coc);
}
@end


@export ecgl.dof.composite

#define DEBUG 0

uniform sampler2D original;
uniform sampler2D blurred;
uniform sampler2D nearfield;
uniform sampler2D coc;
uniform sampler2D nearcoc;
varying vec2 v_Texcoord;

@import clay.util.rgbm
@import clay.util.float

void main()
{
 vec4 blurredColor = texture2D(blurred, v_Texcoord);
 vec4 originalColor = texture2D(original, v_Texcoord);

 float fCoc = decodeFloat(texture2D(coc, v_Texcoord));

 fCoc = abs(fCoc * 2.0 - 1.0);

 float weight = smoothstep(0.0, 1.0, fCoc);
 
#ifdef NEARFIELD_ENABLED
 vec4 nearfieldColor = texture2D(nearfield, v_Texcoord);
 float fNearCoc = decodeFloat(texture2D(nearcoc, v_Texcoord));
 fNearCoc = abs(fNearCoc * 2.0 - 1.0);

 gl_FragColor = encodeHDR(
 mix(
 nearfieldColor, mix(originalColor, blurredColor, weight),
 pow(1.0 - fNearCoc, 4.0)
 )
 );
#else
 gl_FragColor = encodeHDR(mix(originalColor, blurredColor, weight));
#endif

}

@end



@export ecgl.dof.diskBlur

#define POISSON_KERNEL_SIZE 16;

uniform sampler2D texture;
uniform sampler2D coc;
varying vec2 v_Texcoord;

uniform float blurRadius : 10.0;
uniform vec2 textureSize : [512.0, 512.0];

uniform vec2 poissonKernel[POISSON_KERNEL_SIZE];

uniform float percent;

float nrand(const in vec2 n) {
 return fract(sin(dot(n.xy ,vec2(12.9898,78.233))) * 43758.5453);
}

@import clay.util.rgbm
@import clay.util.float


void main()
{
 vec2 offset = blurRadius / textureSize;

 float rnd = 6.28318 * nrand(v_Texcoord + 0.07 * percent );
 float cosa = cos(rnd);
 float sina = sin(rnd);
 vec4 basis = vec4(cosa, -sina, sina, cosa);

#if !defined(BLUR_NEARFIELD) && !defined(BLUR_COC)
 offset *= abs(decodeFloat(texture2D(coc, v_Texcoord)) * 2.0 - 1.0);
#endif

#ifdef BLUR_COC
 float cocSum = 0.0;
#else
 vec4 color = vec4(0.0);
#endif


 float weightSum = 0.0;

 for (int i = 0; i < POISSON_KERNEL_SIZE; i++) {
 vec2 ofs = poissonKernel[i];

 ofs = vec2(dot(ofs, basis.xy), dot(ofs, basis.zw));

 vec2 uv = v_Texcoord + ofs * offset;
 vec4 texel = texture2D(texture, uv);

 float w = 1.0;
#ifdef BLUR_COC
 float fCoc = decodeFloat(texel) * 2.0 - 1.0;
 cocSum += clamp(fCoc, -1.0, 0.0) * w;
#else
 texel = texel;
 #if !defined(BLUR_NEARFIELD)
 float fCoc = decodeFloat(texture2D(coc, uv)) * 2.0 - 1.0;
 w *= abs(fCoc);
 #endif
 texel.rgb *= texel.a;
 color += texel * w;
#endif

 weightSum += w;
 }

#ifdef BLUR_COC
 gl_FragColor = encodeFloat(clamp(cocSum / weightSum, -1.0, 0.0) * 0.5 + 0.5);
#else
 color /= weightSum;
 color.rgb /= (color.a + 0.0001);
 gl_FragColor = color;
#endif
}

@end`,Up=`@export ecgl.edge

uniform sampler2D texture;

uniform sampler2D normalTexture;
uniform sampler2D depthTexture;

uniform mat4 projectionInv;

uniform vec2 textureSize;

uniform vec4 edgeColor: [0,0,0,0.8];

varying vec2 v_Texcoord;

vec3 packColor(vec2 coord) {
 float z = texture2D(depthTexture, coord).r * 2.0 - 1.0;
 vec4 p = vec4(v_Texcoord * 2.0 - 1.0, z, 1.0);
 vec4 p4 = projectionInv * p;

 return vec3(
 texture2D(normalTexture, coord).rg,
 -p4.z / p4.w / 5.0
 );
}

void main() {
 vec2 cc = v_Texcoord;
 vec3 center = packColor(cc);

 float size = clamp(1.0 - (center.z - 10.0) / 100.0, 0.0, 1.0) * 0.5;
 float dx = size / textureSize.x;
 float dy = size / textureSize.y;

 vec2 coord;
 vec3 topLeft = packColor(cc+vec2(-dx, -dy));
 vec3 top = packColor(cc+vec2(0.0, -dy));
 vec3 topRight = packColor(cc+vec2(dx, -dy));
 vec3 left = packColor(cc+vec2(-dx, 0.0));
 vec3 right = packColor(cc+vec2(dx, 0.0));
 vec3 bottomLeft = packColor(cc+vec2(-dx, dy));
 vec3 bottom = packColor(cc+vec2(0.0, dy));
 vec3 bottomRight = packColor(cc+vec2(dx, dy));

 vec3 v = -topLeft-2.0*top-topRight+bottomLeft+2.0*bottom+bottomRight;
 vec3 h = -bottomLeft-2.0*left-topLeft+bottomRight+2.0*right+topRight;

 float edge = sqrt(dot(h, h) + dot(v, v));

 edge = smoothstep(0.8, 1.0, edge);

 gl_FragColor = mix(texture2D(texture, v_Texcoord), vec4(edgeColor.rgb, 1.0), edgeColor.a * edge);
}
@end`;cr.import(kf),cr.import(Rh),cr.import(so),cr.import(Qf),cr.import(Tl),cr.import(Nh),cr.import(Ps),cr.import(Bh),cr.import(jh),cr.import(Hh),cr.import(Up);function Wh(n,e){return{color:{parameters:{width:n,height:e}}}}var ic=["composite","FXAA"];function qr(){this._width,this._height,this._dpr,this._sourceTexture=new Gr({type:Mr.HALF_FLOAT}),this._depthTexture=new Gr({format:Mr.DEPTH_COMPONENT,type:Mr.UNSIGNED_INT}),this._framebuffer=new Kn,this._framebuffer.attach(this._sourceTexture),this._framebuffer.attach(this._depthTexture,Kn.DEPTH_ATTACHMENT),this._normalPass=new Cl,this._compositor=$f(nc);var n=this._compositor.getNodeByName("source");n.texture=this._sourceTexture;var e=this._compositor.getNodeByName("coc");this._sourceNode=n,this._cocNode=e,this._compositeNode=this._compositor.getNodeByName("composite"),this._fxaaNode=this._compositor.getNodeByName("FXAA"),this._dofBlurNodes=["dof_far_blur","dof_near_blur","dof_coc_blur"].map(function(u){return this._compositor.getNodeByName(u)},this),this._dofBlurKernel=0,this._dofBlurKernelSize=new Float32Array(0),this._finalNodesChain=ic.map(function(u){return this._compositor.getNodeByName(u)},this);var o={normalTexture:this._normalPass.getNormalTexture(),depthTexture:this._normalPass.getDepthTexture()};this._ssaoPass=new Gp(o),this._ssrPass=new Vh(o),this._edgePass=new Uh(o)}qr.prototype.resize=function(n,e,o){o=o||1;var n=n*o,e=e*o,u=this._sourceTexture,c=this._depthTexture;u.width=n,u.height=e,c.width=n,c.height=e;var v={getWidth:function(){return n},getHeight:function(){return e},getDevicePixelRatio:function(){return o}};function g(x,_){if(typeof x[_]=="function"){var M=x[_].__original||x[_];x[_]=function(I){return M.call(this,v)},x[_].__original=M}}this._compositor.nodes.forEach(function(x){for(var _ in x.outputs){var M=x.outputs[_].parameters;M&&(g(M,"width"),g(M,"height"))}for(var I in x.parameters)g(x.parameters,I)}),this._width=n,this._height=e,this._dpr=o},qr.prototype.getWidth=function(){return this._width},qr.prototype.getHeight=function(){return this._height},qr.prototype._ifRenderNormalPass=function(){return this._enableSSAO||this._enableEdge||this._enableSSR},qr.prototype._getPrevNode=function(n){for(var e=ic.indexOf(n.name)-1,o=this._finalNodesChain[e];o&&!this._compositor.getNodeByName(o.name);)e-=1,o=this._finalNodesChain[e];return o},qr.prototype._getNextNode=function(n){for(var e=ic.indexOf(n.name)+1,o=this._finalNodesChain[e];o&&!this._compositor.getNodeByName(o.name);)e+=1,o=this._finalNodesChain[e];return o},qr.prototype._addChainNode=function(n){var e=this._getPrevNode(n),o=this._getNextNode(n);!e||(n.inputs.texture=e.name,o?(n.outputs=Wh(this.getWidth.bind(this),this.getHeight.bind(this)),o.inputs.texture=n.name):n.outputs=null,this._compositor.addNode(n))},qr.prototype._removeChainNode=function(n){var e=this._getPrevNode(n),o=this._getNextNode(n);!e||(o?(e.outputs=Wh(this.getWidth.bind(this),this.getHeight.bind(this)),o.inputs.texture=e.name):e.outputs=null,this._compositor.removeNode(n))},qr.prototype.updateNormal=function(n,e,o,u){this._ifRenderNormalPass()&&this._normalPass.update(n,e,o)},qr.prototype.updateSSAO=function(n,e,o,u){this._ssaoPass.update(n,o,u)},qr.prototype.enableSSAO=function(){this._enableSSAO=!0},qr.prototype.disableSSAO=function(){this._enableSSAO=!1},qr.prototype.enableSSR=function(){this._enableSSR=!0},qr.prototype.disableSSR=function(){this._enableSSR=!1},qr.prototype.getSSAOTexture=function(){return this._ssaoPass.getTargetTexture()},qr.prototype.getSourceFrameBuffer=function(){return this._framebuffer},qr.prototype.getSourceTexture=function(){return this._sourceTexture},qr.prototype.disableFXAA=function(){this._removeChainNode(this._fxaaNode)},qr.prototype.enableFXAA=function(){this._addChainNode(this._fxaaNode)},qr.prototype.enableBloom=function(){this._compositeNode.inputs.bloom="bloom_composite",this._compositor.dirty()},qr.prototype.disableBloom=function(){this._compositeNode.inputs.bloom=null,this._compositor.dirty()},qr.prototype.enableDOF=function(){this._compositeNode.inputs.texture="dof_composite",this._compositor.dirty()},qr.prototype.disableDOF=function(){this._compositeNode.inputs.texture="source",this._compositor.dirty()},qr.prototype.enableColorCorrection=function(){this._compositeNode.define("COLOR_CORRECTION"),this._enableColorCorrection=!0},qr.prototype.disableColorCorrection=function(){this._compositeNode.undefine("COLOR_CORRECTION"),this._enableColorCorrection=!1},qr.prototype.enableEdge=function(){this._enableEdge=!0},qr.prototype.disableEdge=function(){this._enableEdge=!1},qr.prototype.setBloomIntensity=function(n){this._compositeNode.setParameter("bloomIntensity",n)},qr.prototype.setSSAOParameter=function(n,e){switch(n){case"quality":var o={low:6,medium:12,high:32,ultra:62}[e]||12;this._ssaoPass.setParameter("kernelSize",o);break;case"radius":this._ssaoPass.setParameter(n,e),this._ssaoPass.setParameter("bias",e/200);break;case"intensity":this._ssaoPass.setParameter(n,e);break;default:}},qr.prototype.setDOFParameter=function(n,e){switch(n){case"focalDistance":case"focalRange":case"fstop":this._cocNode.setParameter(n,e);break;case"blurRadius":for(var o=0;o<this._dofBlurNodes.length;o++)this._dofBlurNodes[o].setParameter("blurRadius",e);break;case"quality":var u={low:4,medium:8,high:16,ultra:32}[e]||8;this._dofBlurKernelSize=u;for(var o=0;o<this._dofBlurNodes.length;o++)this._dofBlurNodes[o].pass.material.define("POISSON_KERNEL_SIZE",u);this._dofBlurKernel=new Float32Array(u*2);break;default:}},qr.prototype.setSSRParameter=function(n,e){if(e!=null)switch(n){case"quality":var o={low:10,medium:15,high:30,ultra:80}[e]||20,u={low:32,medium:16,high:8,ultra:4}[e]||16;this._ssrPass.setParameter("maxIteration",o),this._ssrPass.setParameter("pixelStride",u);break;case"maxRoughness":this._ssrPass.setParameter("minGlossiness",Math.max(Math.min(1-e,1),0));break;case"physical":this.setPhysicallyCorrectSSR(e);break;default:console.warn("Unkown SSR parameter "+n)}},qr.prototype.setPhysicallyCorrectSSR=function(n){this._ssrPass.setPhysicallyCorrect(n)},qr.prototype.setEdgeColor=function(n){var e=se.parseColor(n);this._edgePass.setParameter("edgeColor",e)},qr.prototype.setExposure=function(n){this._compositeNode.setParameter("exposure",Math.pow(2,n))},qr.prototype.setColorLookupTexture=function(n,e){this._compositeNode.pass.material.setTextureImage("lut",this._enableColorCorrection?n:"none",e,{minFilter:se.Texture.NEAREST,magFilter:se.Texture.NEAREST,flipY:!1})},qr.prototype.setColorCorrection=function(n,e){this._compositeNode.setParameter(n,e)},qr.prototype.isSSREnabled=function(){return this._enableSSR},qr.prototype.composite=function(n,e,o,u,c){var v=this._sourceTexture,g=v;this._enableEdge&&(this._edgePass.update(n,o,v,c),v=g=this._edgePass.getTargetTexture()),this._enableSSR&&(this._ssrPass.update(n,o,v,c),g=this._ssrPass.getTargetTexture(),this._ssrPass.setSSAOTexture(this._enableSSAO?this._ssaoPass.getTargetTexture():null)),this._sourceNode.texture=g,this._cocNode.setParameter("depth",this._depthTexture);for(var x=this._dofBlurKernel,_=this._dofBlurKernelSize,M=Math.floor(Gh.length/2/_),I=c%M,F=0;F<_*2;F++)x[F]=Gh[F+I*_*2];for(var F=0;F<this._dofBlurNodes.length;F++)this._dofBlurNodes[F].setParameter("percent",c/30),this._dofBlurNodes[F].setParameter("poissonKernel",x);this._cocNode.setParameter("zNear",o.near),this._cocNode.setParameter("zFar",o.far),this._compositor.render(n,u)},qr.prototype.dispose=function(n){this._sourceTexture.dispose(n),this._depthTexture.dispose(n),this._framebuffer.dispose(n),this._compositor.dispose(n),this._normalPass.dispose(n),this._ssaoPass.dispose(n)};var Yh=qr;function ac(n){for(var e=[],o=0;o<30;o++)e.push([qo(o,2),qo(o,3)]);this._haltonSequence=e,this._frame=0,this._sourceTex=new Gr,this._sourceFb=new Kn,this._sourceFb.attach(this._sourceTex),this._prevFrameTex=new Gr,this._outputTex=new Gr;var u=this._blendPass=new Gn({fragment:cr.source("clay.compositor.blend")});u.material.disableTexturesAll(),u.material.enableTexture(["texture1","texture2"]),this._blendFb=new Kn({depthBuffer:!1}),this._outputPass=new Gn({fragment:cr.source("clay.compositor.output"),blendWithPrevious:!0}),this._outputPass.material.define("fragment","OUTPUT_ALPHA"),this._outputPass.material.blend=function(c){c.blendEquationSeparate(c.FUNC_ADD,c.FUNC_ADD),c.blendFuncSeparate(c.ONE,c.ONE_MINUS_SRC_ALPHA,c.ONE,c.ONE_MINUS_SRC_ALPHA)}}ac.prototype={constructor:ac,jitterProjection:function(e,o){var u=e.viewport,c=u.devicePixelRatio||e.getDevicePixelRatio(),v=u.width*c,g=u.height*c,x=this._haltonSequence[this._frame%this._haltonSequence.length],_=new gr;_.array[12]=(x[0]*2-1)/v,_.array[13]=(x[1]*2-1)/g,gr.mul(o.projectionMatrix,_,o.projectionMatrix),gr.invert(o.invProjectionMatrix,o.projectionMatrix)},resetFrame:function(){this._frame=0},getFrame:function(){return this._frame},getSourceFrameBuffer:function(){return this._sourceFb},getOutputTexture:function(){return this._outputTex},resize:function(e,o){this._prevFrameTex.width=e,this._prevFrameTex.height=o,this._outputTex.width=e,this._outputTex.height=o,this._sourceTex.width=e,this._sourceTex.height=o,this._prevFrameTex.dirty(),this._outputTex.dirty(),this._sourceTex.dirty()},isFinished:function(){return this._frame>=this._haltonSequence.length},render:function(e,o,u){var c=this._blendPass;this._frame===0?(c.setUniform("weight1",0),c.setUniform("weight2",1)):(c.setUniform("weight1",.9),c.setUniform("weight2",.1)),c.setUniform("texture1",this._prevFrameTex),c.setUniform("texture2",o||this._sourceTex),this._blendFb.attach(this._outputTex),this._blendFb.bind(e),c.render(e),this._blendFb.unbind(e),u||(this._outputPass.setUniform("texture",this._outputTex),this._outputPass.render(e));var v=this._prevFrameTex;this._prevFrameTex=this._outputTex,this._outputTex=v,this._frame++},dispose:function(e){this._sourceFb.dispose(e),this._blendFb.dispose(e),this._prevFrameTex.dispose(e),this._outputTex.dispose(e),this._sourceTex.dispose(e),this._outputPass.dispose(e),this._blendPass.dispose(e)}};var Hp=ac;function Cn(n){n=n||"perspective",this.layer=null,this.scene=new ra,this.rootNode=this.scene,this.viewport={x:0,y:0,width:0,height:0},this.setProjection(n),this._compositor=new Yh,this._temporalSS=new Hp,this._shadowMapPass=new Dp;for(var e=[],o=0,u=0;u<30;u++){for(var c=[],v=0;v<6;v++)c.push(qo(o,2)*4-2),c.push(qo(o,3)*4-2),o++;e.push(c)}this._pcfKernels=e,this.scene.on("beforerender",function(g,x,_){this.needsTemporalSS()&&this._temporalSS.jitterProjection(g,_)},this)}Cn.prototype.setProjection=function(n){var e=this.camera;e&&e.update(),n==="perspective"?this.camera instanceof xn||(this.camera=new xn,e&&this.camera.setLocalTransform(e.localTransform)):this.camera instanceof xs||(this.camera=new xs,e&&this.camera.setLocalTransform(e.localTransform)),this.camera.near=.1,this.camera.far=2e3},Cn.prototype.setViewport=function(n,e,o,u,c){this.camera instanceof xn&&(this.camera.aspect=o/u),c=c||1,this.viewport.x=n,this.viewport.y=e,this.viewport.width=o,this.viewport.height=u,this.viewport.devicePixelRatio=c,this._compositor.resize(o*c,u*c),this._temporalSS.resize(o*c,u*c)},Cn.prototype.containPoint=function(n,e){var o=this.viewport,u=this.layer.renderer.getHeight();return e=u-e,n>=o.x&&e>=o.y&&n<=o.x+o.width&&e<=o.y+o.height};var Xh=new br;Cn.prototype.castRay=function(n,e,o){var u=this.layer.renderer,c=u.viewport;return u.viewport=this.viewport,u.screenToNDC(n,e,Xh),this.camera.castRay(Xh,o),u.viewport=c,o},Cn.prototype.prepareRender=function(){this.scene.update(),this.camera.update(),this.scene.updateLights();var n=this.scene.updateRenderList(this.camera);this._needsSortProgressively=!1;for(var e=0;e<n.transparent.length;e++){var o=n.transparent[e],u=o.geometry;u.needsSortVerticesProgressively&&u.needsSortVerticesProgressively()&&(this._needsSortProgressively=!0),u.needsSortTrianglesProgressively&&u.needsSortTrianglesProgressively()&&(this._needsSortProgressively=!0)}this._frame=0,this._temporalSS.resetFrame()},Cn.prototype.render=function(n,e){this._doRender(n,e,this._frame),this._frame++},Cn.prototype.needsAccumulate=function(){return this.needsTemporalSS()||this._needsSortProgressively},Cn.prototype.needsTemporalSS=function(){var n=this._enableTemporalSS;return n==="auto"&&(n=this._enablePostEffect),n},Cn.prototype.hasDOF=function(){return this._enableDOF},Cn.prototype.isAccumulateFinished=function(){return this.needsTemporalSS()?this._temporalSS.isFinished():this._frame>30},Cn.prototype._doRender=function(n,e,o){var u=this.scene,c=this.camera;o=o||0,this._updateTransparent(n,u,c,o),e||(this._shadowMapPass.kernelPCF=this._pcfKernels[0],this._shadowMapPass.render(n,u,c,!0)),this._updateShadowPCFKernel(o);var v=n.clearColor;if(n.gl.clearColor(v[0],v[1],v[2],v[3]),this._enablePostEffect&&(this.needsTemporalSS()&&this._temporalSS.jitterProjection(n,c),this._compositor.updateNormal(n,u,c,this._temporalSS.getFrame())),this._updateSSAO(n,u,c,this._temporalSS.getFrame()),this._enablePostEffect){var g=this._compositor.getSourceFrameBuffer();g.bind(n),n.gl.clear(n.gl.DEPTH_BUFFER_BIT|n.gl.COLOR_BUFFER_BIT),n.render(u,c,!0,!0),g.unbind(n),this.needsTemporalSS()&&e?(this._compositor.composite(n,u,c,this._temporalSS.getSourceFrameBuffer(),this._temporalSS.getFrame()),n.setViewport(this.viewport),this._temporalSS.render(n)):(n.setViewport(this.viewport),this._compositor.composite(n,u,c,null,0))}else if(this.needsTemporalSS()&&e){var g=this._temporalSS.getSourceFrameBuffer();g.bind(n),n.saveClear(),n.clearBit=n.gl.DEPTH_BUFFER_BIT|n.gl.COLOR_BUFFER_BIT,n.render(u,c,!0,!0),n.restoreClear(),g.unbind(n),n.setViewport(this.viewport),this._temporalSS.render(n)}else n.setViewport(this.viewport),n.render(u,c,!0,!0)},Cn.prototype._updateTransparent=function(n,e,o,u){for(var c=new or,v=new gr,g=o.getWorldPosition(),x=e.getRenderList(o).transparent,_=0;_<x.length;_++){var M=x[_],I=M.geometry;gr.invert(v,M.worldTransform),or.transformMat4(c,g,v),I.needsSortTriangles&&I.needsSortTriangles()&&I.doSortTriangles(c,u),I.needsSortVertices&&I.needsSortVertices()&&I.doSortVertices(c,u)}},Cn.prototype._updateSSAO=function(n,e,o){var u=this._enableSSAO&&this._enablePostEffect;u&&this._compositor.updateSSAO(n,e,o,this._temporalSS.getFrame());for(var c=e.getRenderList(o),v=0;v<c.opaque.length;v++){var g=c.opaque[v];g.renderNormal&&g.material[u?"enableTexture":"disableTexture"]("ssaoMap"),u&&g.material.set("ssaoMap",this._compositor.getSSAOTexture())}},Cn.prototype._updateShadowPCFKernel=function(n){for(var e=this._pcfKernels[n%this._pcfKernels.length],o=this.scene.getRenderList(this.camera),u=o.opaque,c=0;c<u.length;c++)u[c].receiveShadow&&(u[c].material.set("pcfKernel",e),u[c].material.define("fragment","PCF_KERNEL_SIZE",e.length/2))},Cn.prototype.dispose=function(n){this._compositor.dispose(n.gl),this._temporalSS.dispose(n.gl),this._shadowMapPass.dispose(n)},Cn.prototype.setPostEffect=function(n,e){var o=this._compositor;this._enablePostEffect=n.get("enable");var u=n.getModel("bloom"),c=n.getModel("edge"),v=n.getModel("DOF",n.getModel("depthOfField")),g=n.getModel("SSAO",n.getModel("screenSpaceAmbientOcclusion")),x=n.getModel("SSR",n.getModel("screenSpaceReflection")),_=n.getModel("FXAA"),M=n.getModel("colorCorrection");u.get("enable")?o.enableBloom():o.disableBloom(),v.get("enable")?o.enableDOF():o.disableDOF(),x.get("enable")?o.enableSSR():o.disableSSR(),M.get("enable")?o.enableColorCorrection():o.disableColorCorrection(),c.get("enable")?o.enableEdge():o.disableEdge(),_.get("enable")?o.enableFXAA():o.disableFXAA(),this._enableDOF=v.get("enable"),this._enableSSAO=g.get("enable"),this._enableSSAO?o.enableSSAO():o.disableSSAO(),o.setBloomIntensity(u.get("intensity")),o.setEdgeColor(c.get("color")),o.setColorLookupTexture(M.get("lookupTexture"),e),o.setExposure(M.get("exposure")),["radius","quality","intensity"].forEach(function(I){o.setSSAOParameter(I,g.get(I))}),["quality","maxRoughness","physical"].forEach(function(I){o.setSSRParameter(I,x.get(I))}),["quality","focalDistance","focalRange","blurRadius","fstop"].forEach(function(I){o.setDOFParameter(I,v.get(I))}),["brightness","contrast","saturation"].forEach(function(I){o.setColorCorrection(I,M.get(I))})},Cn.prototype.setDOFFocusOnPoint=function(n){if(this._enablePostEffect)return n>this.camera.far||n<this.camera.near?void 0:(this._compositor.setDOFParameter("focalDistance",n),!0)},Cn.prototype.setTemporalSuperSampling=function(n){this._enableTemporalSS=n.get("enable")},Cn.prototype.isLinearSpace=function(){return this._enablePostEffect},Cn.prototype.setRootNode=function(n){if(this.rootNode!==n){for(var e=this.rootNode.children(),o=0;o<e.length;o++)n.add(e[o]);n!==this.scene&&this.scene.add(n),this.rootNode=n}},Cn.prototype.add=function(n){this.rootNode.add(n)},Cn.prototype.remove=function(n){this.rootNode.remove(n)},Cn.prototype.removeAll=function(n){this.rootNode.removeAll(n)},Object.assign(Cn.prototype,V);var uo=Cn;function Zh(n,e){var o=n.getBoxLayoutParams(),u=Object(Sl.g)(o,{width:e.getWidth(),height:e.getHeight()});u.y=e.getHeight()-u.y-u.height,this.viewGL.setViewport(u.x,u.y,u.width,u.height,e.getDevicePixelRatio());var c=n.get("boxWidth"),v=n.get("boxHeight"),g=n.get("boxDepth");this.getAxis("x").setExtent(-c/2,c/2),this.getAxis("y").setExtent(g/2,-g/2),this.getAxis("z").setExtent(-v/2,v/2),this.size=[c,v,g]}function Wp(n,e){var o={};function u(c,v){o[c]=o[c]||[Infinity,-Infinity],o[c][0]=Math.min(v[0],o[c][0]),o[c][1]=Math.max(v[1],o[c][1])}n.eachSeries(function(c){if(c.coordinateSystem===this){var v=c.getData();["x","y","z"].forEach(function(g){v.mapDimensionsAll(g,!0).forEach(function(x){u(g,v.getDataExtent(x,!0))})})}},this),["xAxis3D","yAxis3D","zAxis3D"].forEach(function(c){n.eachComponent(c,function(v){var g=c.charAt(0),x=v.getReferringComponents("grid3D").models[0],_=x.coordinateSystem;if(_===this){var M=_.getAxis(g);if(!M){var I=B.A.createScale(o[g]||[Infinity,-Infinity],v);M=new bl(g,I),M.type=v.get("type");var F=M.type==="category";M.onBand=F&&v.get("boundaryGap"),M.inverse=v.get("inverse"),v.axis=M,M.model=v,M.getLabelModel=function(){return v.getModel("axisLabel",x.getModel("axisLabel"))},M.getTickModel=function(){return v.getModel("axisTick",x.getModel("axisTick"))},_.addAxis(M)}}},this)},this),this.resize(this.model,e)}var Yp={dimensions:Mh.prototype.dimensions,create:function(e,o){var u=[];e.eachComponent("grid3D",function(g){g.__viewGL=g.__viewGL||new uo;var x=new Mh;x.model=g,x.viewGL=g.__viewGL,g.coordinateSystem=x,u.push(x),x.resize=Zh,x.update=Wp});var c=["xAxis3D","yAxis3D","zAxis3D"];function v(g,x){return c.map(function(_){var M=g.getReferringComponents(_).models[0];return M==null&&(M=x.getComponent(_)),M})}return e.eachSeries(function(g){if(g.get("coordinateSystem")==="cartesian3D"){var x=g.getReferringComponents("grid3D").models[0];if(x==null){var _=v(g,e),x=_[0].getCoordSysModel();_.forEach(function(F){var ut=F.getCoordSysModel()})}var M=x.coordinateSystem;g.coordinateSystem=M}}),u}},Kh=Yp,oc=B.c.extend({type:"cartesian3DAxis",axis:null,getCoordSysModel:function(){return this.ecModel.queryComponents({mainType:"grid3D",index:this.option.gridIndex,id:this.option.gridId})[0]}});B.A.mixinAxisModelCommonMethods(oc);var Xp=oc,kh={show:!0,grid3DIndex:0,inverse:!1,name:"",nameLocation:"middle",nameTextStyle:{fontSize:16},nameGap:20,axisPointer:{},axisLine:{},axisTick:{},axisLabel:{},splitArea:{}},Zp=B.Y.merge({boundaryGap:!0,axisTick:{alignWithLabel:!1,interval:"auto"},axisLabel:{interval:"auto"},axisPointer:{label:{show:!1}}},kh),Rs=B.Y.merge({boundaryGap:[0,0],splitNumber:5,axisPointer:{label:{}}},kh),Kp=B.Y.defaults({scale:!0,min:"dataMin",max:"dataMax"},Rs),Pu=B.Y.defaults({logBase:10},Rs);Pu.scale=!0;var wu={categoryAxis3D:Zp,valueAxis3D:Rs,timeAxis3D:Kp,logAxis3D:Pu},Qh=S("jkPA"),El=["value","category","time","log"],Jh=function(n,e,o,u,c){El.forEach(function(v){var g=o.extend({type:e+"Axis3D."+v,__ordinalMeta:null,mergeDefaultAndTheme:function(_,M){var I=M.getTheme();B.Y.merge(_,I.get(v+"Axis3D")),B.Y.merge(_,this.getDefaultOption()),_.type=u(e,_)},optionUpdated:function(){var _=this.option;_.type==="category"&&(this.__ordinalMeta=Qh.a.createByAxisModel(this))},getCategories:function(){if(this.option.type==="category")return this.__ordinalMeta.categories},getOrdinalMeta:function(){return this.__ordinalMeta},defaultOption:B.Y.merge(B.Y.clone(wu[v+"Axis3D"]),c||{},!0)});n.registerComponentModel(g)}),n.registerSubTypeDefaulter(e+"Axis3D",B.Y.curry(u,e))};function kp(n,e){return e.type||(e.data?"category":"value")}function Qp(n){n.registerComponentModel(yp),n.registerComponentView(Op),n.registerCoordinateSystem("grid3D",Kh),["x","y","z"].forEach(function(e){Jh(n,e,Xp,kp,{name:e.toUpperCase()});var o=n.ComponentView.extend({type:e+"Axis3D"});n.registerComponentView(o)}),n.registerAction({type:"grid3DChangeCamera",event:"grid3dcamerachanged",update:"series:updateCamera"},function(e,o){o.eachComponent({mainType:"grid3D",query:e},function(u){u.setView(e)})}),n.registerAction({type:"grid3DShowAxisPointer",event:"grid3dshowaxispointer",update:"grid3D:showAxisPointer"},function(e,o){}),n.registerAction({type:"grid3DHideAxisPointer",event:"grid3dhideaxispointer",update:"grid3D:hideAxisPointer"},function(e,o){})}Object(B.X)(Qp);var fo={defaultOption:{shading:null,realisticMaterial:{textureTiling:1,textureOffset:0,detailTexture:null},lambertMaterial:{textureTiling:1,textureOffset:0,detailTexture:null},colorMaterial:{textureTiling:1,textureOffset:0,detailTexture:null},hatchingMaterial:{textureTiling:1,textureOffset:0,paperColor:"#fff"}}},$h={getFilledRegions:function(e,o){var u=(e||[]).slice(),c;if(typeof o=="string"?(o=B.y(o),c=o&&o.geoJson):o&&o.features&&(c=o),!c)return[];for(var v={},g=c.features,x=0;x<u.length;x++)v[u[x].name]=u[x];for(var x=0;x<g.length;x++){var _=g[x].properties.name;v[_]||u.push({name:_})}return u},defaultOption:{show:!0,zlevel:-10,map:"",left:0,top:0,width:"100%",height:"100%",boxWidth:100,boxHeight:10,boxDepth:"auto",regionHeight:3,environment:"auto",groundPlane:{show:!1,color:"#aaa"},shading:"lambert",light:{main:{alpha:40,beta:30}},viewControl:{alpha:40,beta:0,distance:100,orthographicSize:60,minAlpha:5,minBeta:-80,maxBeta:80},label:{show:!1,distance:2,textStyle:{fontSize:20,color:"#000",backgroundColor:"rgba(255,255,255,0.7)",padding:3,borderRadius:4}},itemStyle:{color:"#fff",borderWidth:0,borderColor:"#333"},emphasis:{itemStyle:{color:"#639fc0"},label:{show:!0}}}},Ns=B.c.extend({type:"geo3D",layoutMode:"box",coordinateSystem:null,optionUpdated:function(){var e=this.option;e.regions=this.getFilledRegions(e.regions,e.map);var o=B.A.createDimensions(e.data||[],{coordDimensions:["value"],encodeDefine:this.get("encode"),dimensionsDefine:this.get("dimensions")}),u=new B.e(o,this);u.initData(e.regions);var c={};u.each(function(v){var g=u.getName(v),x=u.getItemModel(v);c[g]=x}),this._regionModelMap=c,this._data=u},getData:function(){return this._data},getRegionModel:function(e){var o=this.getData().getName(e);return this._regionModelMap[o]||new B.f(null,this)},getRegionPolygonCoords:function(e){var o=this.getData().getName(e),u=this.coordinateSystem.getRegion(o);return u?u.geometries:[]},getFormattedLabel:function(e,o){var u=this._data.getName(e),c=this.getRegionModel(e),v=c.get(o==="normal"?["label","formatter"]:["emphasis","label","formatter"]);v==null&&(v=c.get(["label","formatter"]));var g={name:u};if(typeof v=="function")return g.status=o,v(g);if(typeof v=="string"){var x=g.seriesName;return v.replace("{a}",x!=null?x:"")}else return u},defaultOption:{regions:[]}});B.Y.merge(Ns.prototype,$h),B.Y.merge(Ns.prototype,bu),B.Y.merge(Ns.prototype,As),B.Y.merge(Ns.prototype,Xo),B.Y.merge(Ns.prototype,fo);var sc=Ns,qh=lc;function lc(n,e,o){o=o||2;var u=e&&e.length,c=u?e[0]*o:n.length,v=tv(n,0,c,o,!0),g=[];if(!v)return g;var x,_,M,I,F,ut,yt;if(u&&(v=$p(n,e,v,o)),n.length>80*o){x=M=n[0],_=I=n[1];for(var Dt=o;Dt<c;Dt+=o)F=n[Dt],ut=n[Dt+1],F<x&&(x=F),ut<_&&(_=ut),F>M&&(M=F),ut>I&&(I=ut);yt=Math.max(M-x,I-_)}return Ha(v,g,o,x,_,yt),g}function tv(n,e,o,u,c){var v,g;if(c===hc(n,e,o,u)>0)for(v=e;v<o;v+=u)g=Ru(v,n[v],n[v+1],g);else for(v=o-u;v>=e;v-=u)g=Ru(v,n[v],n[v+1],g);return g&&ts(g,g.next)&&(Pl(g),g=g.next),g}function Ua(n,e){if(!n)return n;e||(e=n);var o=n,u;do if(u=!1,!o.steiner&&(ts(o,o.next)||yi(o.prev,o,o.next)===0)){if(Pl(o),o=e=o.prev,o===o.next)return null;u=!0}else o=o.next;while(u||o!==e);return e}function Ha(n,e,o,u,c,v,g){if(!!n){!g&&v&&eg(n,u,c,v);for(var x=n,_,M;n.prev!==n.next;){if(_=n.prev,M=n.next,v?uc(n,u,c,v):ev(n)){e.push(_.i/o),e.push(n.i/o),e.push(M.i/o),Pl(n),n=M.next,x=M.next;continue}if(n=M,n===x){g?g===1?(n=rv(n,e,o),Ha(n,e,o,u,c,v,2)):g===2&&Jp(n,e,o,u,c,v):Ha(Ua(n),e,o,u,c,v,1);break}}}}function ev(n){var e=n.prev,o=n,u=n.next;if(yi(e,o,u)>=0)return!1;for(var c=n.next.next;c!==n.prev;){if(Ll(e.x,e.y,o.x,o.y,u.x,u.y,c.x,c.y)&&yi(c.prev,c,c.next)>=0)return!1;c=c.next}return!0}function uc(n,e,o,u){var c=n.prev,v=n,g=n.next;if(yi(c,v,g)>=0)return!1;for(var x=c.x<v.x?c.x<g.x?c.x:g.x:v.x<g.x?v.x:g.x,_=c.y<v.y?c.y<g.y?c.y:g.y:v.y<g.y?v.y:g.y,M=c.x>v.x?c.x>g.x?c.x:g.x:v.x>g.x?v.x:g.x,I=c.y>v.y?c.y>g.y?c.y:g.y:v.y>g.y?v.y:g.y,F=Iu(x,_,e,o,u),ut=Iu(M,I,e,o,u),yt=n.nextZ;yt&&yt.z<=ut;){if(yt!==n.prev&&yt!==n.next&&Ll(c.x,c.y,v.x,v.y,g.x,g.y,yt.x,yt.y)&&yi(yt.prev,yt,yt.next)>=0)return!1;yt=yt.nextZ}for(yt=n.prevZ;yt&&yt.z>=F;){if(yt!==n.prev&&yt!==n.next&&Ll(c.x,c.y,v.x,v.y,g.x,g.y,yt.x,yt.y)&&yi(yt.prev,yt,yt.next)>=0)return!1;yt=yt.prevZ}return!0}function rv(n,e,o){var u=n;do{var c=u.prev,v=u.next.next;!ts(c,v)&&nv(c,u,u.next,v)&&js(c,v)&&js(v,c)&&(e.push(c.i/o),e.push(u.i/o),e.push(v.i/o),Pl(u),Pl(u.next),u=n=v),u=u.next}while(u!==n);return u}function Jp(n,e,o,u,c,v){var g=n;do{for(var x=g.next.next;x!==g.prev;){if(g.i!==x.i&&ky(g,x)){var _=av(g,x);g=Ua(g,g.next),_=Ua(_,_.next),Ha(g,e,o,u,c,v),Ha(_,e,o,u,c,v);return}x=x.next}g=g.next}while(g!==n)}function $p(n,e,o,u){var c=[],v,g,x,_,M;for(v=0,g=e.length;v<g;v++)x=e[v]*u,_=v<g-1?e[v+1]*u:n.length,M=tv(n,x,_,u,!1),M===M.next&&(M.steiner=!0),c.push(fc(M));for(c.sort(Bs),v=0;v<c.length;v++)qp(c[v],o),o=Ua(o,o.next);return o}function Bs(n,e){return n.x-e.x}function qp(n,e){if(e=tg(n,e),e){var o=av(e,n);Ua(o,o.next)}}function tg(n,e){var o=e,u=n.x,c=n.y,v=-Infinity,g;do{if(c<=o.y&&c>=o.next.y&&o.next.y!==o.y){var x=o.x+(c-o.y)*(o.next.x-o.x)/(o.next.y-o.y);if(x<=u&&x>v){if(v=x,x===u){if(c===o.y)return o;if(c===o.next.y)return o.next}g=o.x<o.next.x?o:o.next}}o=o.next}while(o!==e);if(!g)return null;if(u===v)return g.prev;var _=g,M=g.x,I=g.y,F=Infinity,ut;for(o=g.next;o!==_;)u>=o.x&&o.x>=M&&u!==o.x&&Ll(c<I?u:v,c,M,I,c<I?v:u,c,o.x,o.y)&&(ut=Math.abs(c-o.y)/(u-o.x),(ut<F||ut===F&&o.x>g.x)&&js(o,n)&&(g=o,F=ut)),o=o.next;return g}function eg(n,e,o,u){var c=n;do c.z===null&&(c.z=Iu(c.x,c.y,e,o,u)),c.prevZ=c.prev,c.nextZ=c.next,c=c.next;while(c!==n);c.prevZ.nextZ=null,c.prevZ=null,rg(c)}function rg(n){var e,o,u,c,v,g,x,_,M=1;do{for(o=n,n=null,v=null,g=0;o;){for(g++,u=o,x=0,e=0;e<M&&(x++,u=u.nextZ,!!u);e++);for(_=M;x>0||_>0&&u;)x!==0&&(_===0||!u||o.z<=u.z)?(c=o,o=o.nextZ,x--):(c=u,u=u.nextZ,_--),v?v.nextZ=c:n=c,c.prevZ=v,v=c;o=u}v.nextZ=null,M*=2}while(g>1);return n}function Iu(n,e,o,u,c){return n=32767*(n-o)/c,e=32767*(e-u)/c,n=(n|n<<8)&16711935,n=(n|n<<4)&252645135,n=(n|n<<2)&858993459,n=(n|n<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,n|e<<1}function fc(n){var e=n,o=n;do e.x<o.x&&(o=e),e=e.next;while(e!==n);return o}function Ll(n,e,o,u,c,v,g,x){return(c-g)*(e-x)-(n-g)*(v-x)>=0&&(n-g)*(u-x)-(o-g)*(e-x)>=0&&(o-g)*(v-x)-(c-g)*(u-x)>=0}function ky(n,e){return n.next.i!==e.i&&n.prev.i!==e.i&&!cc(n,e)&&js(n,e)&&js(e,n)&&iv(n,e)}function yi(n,e,o){return(e.y-n.y)*(o.x-e.x)-(e.x-n.x)*(o.y-e.y)}function ts(n,e){return n.x===e.x&&n.y===e.y}function nv(n,e,o,u){return ts(n,e)&&ts(o,u)||ts(n,u)&&ts(o,e)?!0:yi(n,e,o)>0!=yi(n,e,u)>0&&yi(o,u,n)>0!=yi(o,u,e)>0}function cc(n,e){var o=n;do{if(o.i!==n.i&&o.next.i!==n.i&&o.i!==e.i&&o.next.i!==e.i&&nv(o,o.next,n,e))return!0;o=o.next}while(o!==n);return!1}function js(n,e){return yi(n.prev,n,n.next)<0?yi(n,e,n.next)>=0&&yi(n,n.prev,e)>=0:yi(n,e,n.prev)<0||yi(n,n.next,e)<0}function iv(n,e){var o=n,u=!1,c=(n.x+e.x)/2,v=(n.y+e.y)/2;do o.y>v!=o.next.y>v&&o.next.y!==o.y&&c<(o.next.x-o.x)*(v-o.y)/(o.next.y-o.y)+o.x&&(u=!u),o=o.next;while(o!==n);return u}function av(n,e){var o=new wl(n.i,n.x,n.y),u=new wl(e.i,e.x,e.y),c=n.next,v=e.prev;return n.next=e,e.prev=n,o.next=c,c.prev=o,u.next=o,o.prev=u,v.next=u,u.prev=v,u}function Ru(n,e,o,u){var c=new wl(n,e,o);return u?(c.next=u.next,c.prev=u,u.next.prev=c,u.next=c):(c.prev=c,c.next=c),c}function Pl(n){n.next.prev=n.prev,n.prev.next=n.next,n.prevZ&&(n.prevZ.nextZ=n.nextZ),n.nextZ&&(n.nextZ.prevZ=n.prevZ)}function wl(n,e,o){this.i=n,this.x=e,this.y=o,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}lc.deviation=function(n,e,o,u){var c=e&&e.length,v=c?e[0]*o:n.length,g=Math.abs(hc(n,0,v,o));if(c)for(var x=0,_=e.length;x<_;x++){var M=e[x]*o,I=x<_-1?e[x+1]*o:n.length;g-=Math.abs(hc(n,M,I,o))}var F=0;for(x=0;x<u.length;x+=3){var ut=u[x]*o,yt=u[x+1]*o,Dt=u[x+2]*o;F+=Math.abs((n[ut]-n[Dt])*(n[yt+1]-n[ut+1])-(n[ut]-n[yt])*(n[Dt+1]-n[ut+1]))}return g===0&&F===0?0:Math.abs((F-g)/g)};function hc(n,e,o,u){for(var c=0,v=e,g=o-u;v<o;v+=u)c+=(n[g]-n[v])*(n[v+1]+n[g+1]),g=v;return c}function vc(n,e,o){var u=n[e];n[e]=n[o],n[o]=u}function dc(n,e,o,u,c){var v=o,g=n[e];vc(n,e,u);for(var x=o;x<u;x++)c(n[x],g)<0&&(vc(n,x,v),v++);return vc(n,u,v),v}function Il(n,e,o,u){if(o<u){var c=Math.floor((o+u)/2),v=dc(n,c,o,u,e);Il(n,e,o,v-1),Il(n,e,v+1,u)}}function Rl(){this._parts=[]}Rl.prototype.step=function(n,e,o){var u=n.length;if(o===0){this._parts=[],this._sorted=!1;var c=Math.floor(u/2);this._parts.push({pivot:c,left:0,right:u-1}),this._currentSortPartIdx=0}if(!this._sorted){var v=this._parts;if(v.length===0)return this._sorted=!0,!0;if(v.length<512){for(var g=0;g<v.length;g++)v[g].pivot=dc(n,v[g].pivot,v[g].left,v[g].right,e);for(var x=[],g=0;g<v.length;g++){var _=v[g].left,M=v[g].pivot-1;M>_&&x.push({pivot:Math.floor((M+_)/2),left:_,right:M});var _=v[g].pivot+1,M=v[g].right;M>_&&x.push({pivot:Math.floor((M+_)/2),left:_,right:M})}v=this._parts=x}else for(var g=0;g<Math.floor(v.length/10);g++){var I=v.length-1-this._currentSortPartIdx;if(Il(n,e,v[I].left,v[I].right),this._currentSortPartIdx++,this._currentSortPartIdx===v.length)return this._sorted=!0,!0}return!1}},Rl.sort=Il;var zs=Rl,co=Hn.vec3,Nu=co.create(),Bu=co.create(),es=co.create(),Nl={needsSortTriangles:function(){return this.indices&&this.sortTriangles},needsSortTrianglesProgressively:function(){return this.needsSortTriangles()&&this.triangleCount>=2e4},doSortTriangles:function(e,o){var u=this.indices;if(o===0){var c=this.attributes.position,e=e.array;(!this._triangleZList||this._triangleZList.length!==this.triangleCount)&&(this._triangleZList=new Float32Array(this.triangleCount),this._sortedTriangleIndices=new Uint32Array(this.triangleCount),this._indicesTmp=new u.constructor(u.length),this._triangleZListTmp=new Float32Array(this.triangleCount));for(var v=0,g,x=0;x<u.length;){c.get(u[x++],Nu),c.get(u[x++],Bu),c.get(u[x++],es);var _=co.sqrDist(Nu,e),M=co.sqrDist(Bu,e),I=co.sqrDist(es,e),F=Math.min(_,M);F=Math.min(F,I),x===3?(g=F,F=0):F=F-g,this._triangleZList[v++]=F}}for(var ut=this._sortedTriangleIndices,x=0;x<ut.length;x++)ut[x]=x;if(this.triangleCount<2e4)o===0&&this._simpleSort(!0);else for(var x=0;x<3;x++)this._progressiveQuickSort(o*3+x);for(var yt=this._indicesTmp,Dt=this._triangleZListTmp,Et=this._triangleZList,x=0;x<this.triangleCount;x++){var Pt=ut[x]*3,Ht=x*3;yt[Ht++]=u[Pt++],yt[Ht++]=u[Pt++],yt[Ht]=u[Pt],Dt[x]=Et[ut[x]]}var $t=this._indicesTmp;this._indicesTmp=this.indices,this.indices=$t;var $t=this._triangleZListTmp;this._triangleZListTmp=this._triangleZList,this._triangleZList=$t,this.dirtyIndices()},_simpleSort:function(e){var o=this._triangleZList,u=this._sortedTriangleIndices;function c(v,g){return o[g]-o[v]}e?Array.prototype.sort.call(u,c):zs.sort(u,c,0,u.length-1)},_progressiveQuickSort:function(e){var o=this._triangleZList,u=this._sortedTriangleIndices;this._quickSort=this._quickSort||new zs,this._quickSort.step(u,function(c,v){return o[v]-o[c]},e)}};function ov(n){var e=n.getVisual("style");if(e){var o=n.getVisual("drawType");return e[o]}}function sv(n){var e=n.getVisual("style");return e.opacity}function kn(n,e){var o=n.getItemVisual(e,"style");if(o){var u=n.getVisual("drawType");return o[u]}}function Qn(n,e){var o=n.getItemVisual(e,"style");return o&&o.opacity}var lv=1,uv=2;function Fs(n,e,o){this._labelsMesh=new Ou,this._labelTextureSurface=new gl({width:512,height:512,devicePixelRatio:o.getDevicePixelRatio(),onupdate:function(){o.getZr().refresh()}}),this._api=o,this._labelsMesh.material.set("textureAtlas",this._labelTextureSurface.getTexture())}Fs.prototype.getLabelPosition=function(n,e,o){return[0,0,0]},Fs.prototype.getLabelDistance=function(n,e,o){return 0},Fs.prototype.getMesh=function(){return this._labelsMesh},Fs.prototype.updateData=function(n,e,o){e==null&&(e=0),o==null&&(o=n.count()),(!this._labelsVisibilitiesBits||this._labelsVisibilitiesBits.length!==o-e)&&(this._labelsVisibilitiesBits=new Uint8Array(o-e));for(var u=["label","show"],c=["emphasis","label","show"],v=e;v<o;v++){var g=n.getItemModel(v),x=g.get(u),_=g.get(c);_==null&&(_=x);var M=(x?lv:0)|(_?uv:0);this._labelsVisibilitiesBits[v-e]=M}this._start=e,this._end=o,this._data=n},Fs.prototype.updateLabels=function(n){if(!!this._data){n=n||[];for(var e=n.length>0,o={},u=0;u<n.length;u++)o[n[u]]=!0;this._labelsMesh.geometry.convertToDynamicArray(!0),this._labelTextureSurface.clear();for(var c=["label"],v=["emphasis","label"],g=this._data.hostModel,x=this._data,_=g.getModel(c),M=g.getModel(v,_),I={left:"right",right:"left",top:"center",bottom:"center"},F={left:"middle",right:"middle",top:"bottom",bottom:"top"},ut=this._start;ut<this._end;ut++){var yt=!1;e&&o[ut]&&(yt=!0);var Dt=this._labelsVisibilitiesBits[ut-this._start]&(yt?uv:lv);if(!!Dt){var Et=x.getItemModel(ut),Pt=Et.getModel(yt?v:c,yt?M:_),Ht=Pt.get("distance")||0,$t=Pt.get("position"),qt=this._api.getDevicePixelRatio(),le=g.getFormattedLabel(ut,yt?"emphasis":"normal");if(le==null||le==="")return;var ie=new B.z.Text({style:Object(Ms.c)(Pt,{text:le,fill:Pt.get("color")||kn(x,ut)||"#000",align:"left",verticalAlign:"top",opacity:Kr.firstNotNull(Pt.get("opacity"),Qn(x,ut),1)})}),he=ie.getBoundingRect(),Re=1.2;he.height*=Re;var ze=this._labelTextureSurface.add(ie),Pe=I[$t]||"center",Ke=F[$t]||"bottom";this._labelsMesh.geometry.addSprite(this.getLabelPosition(ut,$t,Ht),[he.width*qt,he.height*qt],ze,Pe,Ke,this.getLabelDistance(ut,$t,Ht)*qt)}}this._labelsMesh.material.set("uvScale",this._labelTextureSurface.getCoordsScale()),this._labelTextureSurface.getZr().refreshImmediately(),this._labelsMesh.geometry.convertToTypedArray(),this._labelsMesh.geometry.dirty()}};var ju=Fs,wi=Hn.vec3;se.Shader.import(Au);function pc(n){this.rootNode=new se.Node,this._triangulationResults={},this._shadersMap=se.COMMON_SHADERS.filter(function(o){return o!=="shadow"}).reduce(function(o,u){return o[u]=se.createShader("ecgl."+u),o},{}),this._linesShader=se.createShader("ecgl.meshLines3D");var e={};se.COMMON_SHADERS.forEach(function(o){e[o]=new se.Material({shader:se.createShader("ecgl."+o)})}),this._groundMaterials=e,this._groundMesh=new se.Mesh({geometry:new se.PlaneGeometry({dynamic:!0}),castShadow:!1,renderNormal:!0,$ignorePicking:!0}),this._groundMesh.rotation.rotateX(-Math.PI/2),this._labelsBuilder=new ju(512,512,n),this._labelsBuilder.getMesh().renderOrder=100,this._labelsBuilder.getMesh().material.depthTest=!1,this.rootNode.add(this._labelsBuilder.getMesh()),this._initMeshes(),this._api=n}pc.prototype={constructor:pc,extrudeY:!0,update:function(e,o,u,c,v){var g=e.getData();c==null&&(c=0),v==null&&(v=g.count()),this._startIndex=c,this._endIndex=v-1,this._triangulation(e,c,v);var x=this._getShader(e.get("shading"));this._prepareMesh(e,x,u,c,v),this.rootNode.updateWorldTransform(),this._updateRegionMesh(e,u,c,v);var _=e.coordinateSystem;_.type==="geo3D"&&this._updateGroundPlane(e,_,u);var M=this;this._labelsBuilder.updateData(g,c,v),this._labelsBuilder.getLabelPosition=function(I,F,ut){var yt=g.getName(I),Dt,Et=ut;if(_.type==="geo3D"){var Pt=_.getRegion(yt);if(!Pt)return[NaN,NaN,NaN];Dt=Pt.center;var Ht=_.dataToPoint([Dt[0],Dt[1],Et]);return Ht}else var $t=M._triangulationResults[I-M._startIndex],Dt=M.extrudeY?[($t.max[0]+$t.min[0])/2,$t.max[1]+Et,($t.max[2]+$t.min[2])/2]:[($t.max[0]+$t.min[0])/2,($t.max[1]+$t.min[1])/2,$t.max[2]+Et]},this._data=g,this._labelsBuilder.updateLabels(),this._updateDebugWireframe(e),this._lastHoverDataIndex=0},_initMeshes:function(){var e=this;function o(){var v=new se.Mesh({name:"Polygon",material:new se.Material({shader:e._shadersMap.lambert}),geometry:new se.Geometry({sortTriangles:!0,dynamic:!0}),culling:!1,ignorePicking:!0,renderNormal:!0});return Object.assign(v.geometry,Nl),v}var u=o(),c=new se.Mesh({material:new se.Material({shader:this._linesShader}),castShadow:!1,ignorePicking:!0,$ignorePicking:!0,geometry:new Zo({useNativeLine:!1})});this.rootNode.add(u),this.rootNode.add(c),u.material.define("both","VERTEX_COLOR"),u.material.define("fragment","DOUBLE_SIDED"),this._polygonMesh=u,this._linesMesh=c,this.rootNode.add(this._groundMesh)},_getShader:function(e){var o=this._shadersMap[e];return o||(o=this._shadersMap.lambert),o.__shading=e,o},_prepareMesh:function(e,o,u,c,v){for(var g=0,x=0,_=0,M=0,I=c;I<v;I++){var F=this._getRegionPolygonInfo(I),ut=this._getRegionLinesInfo(I,e,this._linesMesh.geometry);g+=F.vertexCount,x+=F.triangleCount,_+=ut.vertexCount,M+=ut.triangleCount}var yt=this._polygonMesh,Dt=yt.geometry;["position","normal","texcoord0","color"].forEach(function(Et){Dt.attributes[Et].init(g)}),Dt.indices=g>65535?new Uint32Array(x*3):new Uint16Array(x*3),yt.material.shader!==o&&yt.material.attachShader(o,!0),se.setMaterialFromModel(o.__shading,yt.material,e,u),_>0&&(this._linesMesh.geometry.resetOffset(),this._linesMesh.geometry.setVertexCount(_),this._linesMesh.geometry.setTriangleCount(M)),this._dataIndexOfVertex=new Uint32Array(g),this._vertexRangeOfDataIndex=new Uint32Array((v-c)*2)},_updateRegionMesh:function(e,o,u,c){for(var v=e.getData(),g=0,x=0,_=!1,M=this._polygonMesh,I=this._linesMesh,F=u;F<c;F++){var ut=e.getRegionModel(F),yt=ut.getModel("itemStyle"),Dt=Kr.firstNotNull(kn(v,F),yt.get("color"),"#fff"),Et=Kr.firstNotNull(Qn(v,F),1),Pt=se.parseColor(Dt),Ht=se.parseColor(yt.get("borderColor"));Pt[3]*=Et,Ht[3]*=Et;var $t=Pt[3]<.99;M.material.set("color",[1,1,1,1]),_=_||$t;for(var qt=Kr.firstNotNull(ut.get("height",!0),e.get("regionHeight")),le=this._updatePolygonGeometry(e,M.geometry,F,qt,g,x,Pt),ie=g;ie<le.vertexOffset;ie++)this._dataIndexOfVertex[ie]=F;this._vertexRangeOfDataIndex[(F-u)*2]=g,this._vertexRangeOfDataIndex[(F-u)*2+1]=le.vertexOffset,g=le.vertexOffset,x=le.triangleOffset;var he=yt.get("borderWidth"),Re=he>0;Re&&(he*=o.getDevicePixelRatio(),this._updateLinesGeometry(I.geometry,e,F,qt,he,e.coordinateSystem.transform)),I.invisible=!Re,I.material.set({color:Ht})}var M=this._polygonMesh;M.material.transparent=_,M.material.depthMask=!_,M.geometry.updateBoundingBox(),M.frontFace=this.extrudeY?se.Mesh.CCW:se.Mesh.CW,M.material.get("normalMap")&&M.geometry.generateTangents(),M.seriesIndex=e.seriesIndex,M.on("mousemove",this._onmousemove,this),M.on("mouseout",this._onmouseout,this)},_updateDebugWireframe:function(e){var o=e.getModel("debug.wireframe");if(o.get("show")){var u=se.parseColor(o.get("lineStyle.color")||"rgba(0,0,0,0.5)"),c=Kr.firstNotNull(o.get("lineStyle.width"),1),v=this._polygonMesh;v.geometry.generateBarycentric(),v.material.define("both","WIREFRAME_TRIANGLE"),v.material.set("wireframeLineColor",u),v.material.set("wireframeLineWidth",c)}},_onmousemove:function(e){var o=this._dataIndexOfVertex[e.triangle[0]];o==null&&(o=-1),o!==this._lastHoverDataIndex&&(this.downplay(this._lastHoverDataIndex),this.highlight(o),this._labelsBuilder.updateLabels([o])),this._lastHoverDataIndex=o,this._polygonMesh.dataIndex=o},_onmouseout:function(e){e.target&&(this.downplay(this._lastHoverDataIndex),this._lastHoverDataIndex=-1,this._polygonMesh.dataIndex=-1),this._labelsBuilder.updateLabels([])},_updateGroundPlane:function(e,o,u){var c=e.getModel("groundPlane",e);if(this._groundMesh.invisible=!c.get("show",!0),!this._groundMesh.invisible){var v=e.get("shading"),g=this._groundMaterials[v];g||(g=this._groundMaterials.lambert),se.setMaterialFromModel(v,g,c,u),g.get("normalMap")&&this._groundMesh.geometry.generateTangents(),this._groundMesh.material=g,this._groundMesh.material.set("color",se.parseColor(c.get("color"))),this._groundMesh.scale.set(o.size[0],o.size[2],1)}},_triangulation:function(e,o,u){this._triangulationResults=[];for(var c=[Infinity,Infinity,Infinity],v=[-Infinity,-Infinity,-Infinity],g=e.coordinateSystem,x=o;x<u;x++){for(var _=[],M=e.getRegionPolygonCoords(x),I=0;I<M.length;I++){var F=M[I].exterior,ut=M[I].interiors,yt=[],Dt=[];if(!(F.length<3)){for(var Et=0,Pt=0;Pt<F.length;Pt++){var Ht=F[Pt];yt[Et++]=Ht[0],yt[Et++]=Ht[1]}for(var Pt=0;Pt<ut.length;Pt++)if(!(ut[Pt].length<3)){for(var $t=yt.length/2,qt=0;qt<ut[Pt].length;qt++){var Ht=ut[Pt][qt];yt.push(Ht[0]),yt.push(Ht[1])}Dt.push($t)}for(var le=qh(yt,Dt),ie=new Float64Array(yt.length/2*3),he=[],Re=[Infinity,Infinity,Infinity],ze=[-Infinity,-Infinity,-Infinity],Pe=0,Pt=0;Pt<yt.length;)wi.set(he,yt[Pt++],0,yt[Pt++]),g&&g.transform&&wi.transformMat4(he,he,g.transform),wi.min(Re,Re,he),wi.max(ze,ze,he),ie[Pe++]=he[0],ie[Pe++]=he[1],ie[Pe++]=he[2];wi.min(c,c,Re),wi.max(v,v,ze),_.push({points:ie,indices:le,min:Re,max:ze})}}this._triangulationResults.push(_)}this._geoBoundingBox=[c,v]},_getRegionPolygonInfo:function(e){for(var o=this._triangulationResults[e-this._startIndex],u=0,c=0,v=0;v<o.length;v++)u+=o[v].points.length/3,c+=o[v].indices.length/3;var g=u*2+u*4,x=c*2+u*2;return{vertexCount:g,triangleCount:x}},_updatePolygonGeometry:function(e,o,u,c,v,g,x){var _=e.get("projectUVOnGround"),M=o.attributes.position,I=o.attributes.normal,F=o.attributes.texcoord0,ut=o.attributes.color,yt=this._triangulationResults[u-this._startIndex],Dt=ut.value&&x,Et=o.indices,Pt=this.extrudeY?1:2,Ht=this.extrudeY?2:1,$t=[this.rootNode.worldTransform.x.len(),this.rootNode.worldTransform.y.len(),this.rootNode.worldTransform.z.len()],qt=wi.mul([],this._geoBoundingBox[0],$t),le=wi.mul([],this._geoBoundingBox[1],$t),ie=Math.max(le[0]-qt[0],le[2]-qt[2]);function he(jn,ui,$n){for(var qn=jn.points,Zs=qn.length,Zi=[],ta=[],Gi=0;Gi<Zs;Gi+=3)Zi[0]=qn[Gi],Zi[Pt]=ui,Zi[Ht]=qn[Gi+2],ta[0]=(qn[Gi]*$t[0]-qt[0])/ie,ta[1]=(qn[Gi+2]*$t[Ht]-qt[2])/ie,M.set(v,Zi),Dt&&ut.set(v,x),F.set(v++,ta)}function Re(jn,ui,$n){var qn=v;he(jn,ui,$n);for(var Zs=jn.indices.length,Zi=0;Zi<Zs;Zi++)Et[g*3+Zi]=jn.indices[Zi]+qn;g+=jn.indices.length/3}for(var ze=this.extrudeY?[0,1,0]:[0,0,1],Pe=wi.negate([],ze),Ke=0;Ke<yt.length;Ke++){var rr=v,Ue=yt[Ke];Re(Ue,0,0),Re(Ue,c,0);for(var hr=Ue.points.length/3,ke=0;ke<hr;ke++)I.set(rr+ke,Pe),I.set(rr+ke+hr,ze);for(var Lr=[0,3,1,1,3,2],yr=[[],[],[],[]],xr=[],Sr=[],mr=[],on=[],Or=0,ke=0;ke<hr;ke++){for(var Sn=(ke+1)%hr,rn=(Ue.points[Sn*3]-Ue.points[ke*3])*$t[0],mn=(Ue.points[Sn*3+2]-Ue.points[ke*3+2])*$t[Ht],En=Math.sqrt(rn*rn+mn*mn),tn=0;tn<4;tn++){var li=tn===0||tn===3,Ln=(li?ke:Sn)*3;yr[tn][0]=Ue.points[Ln],yr[tn][Pt]=tn>1?c:0,yr[tn][Ht]=Ue.points[Ln+2],M.set(v+tn,yr[tn]),_?(on[0]=(Ue.points[Ln]*$t[0]-qt[0])/ie,on[1]=(Ue.points[Ln+2]*$t[Ht]-qt[Ht])/ie):(on[0]=(li?Or:Or+En)/ie,on[1]=(yr[tn][Pt]*$t[Pt]-qt[Pt])/ie),F.set(v+tn,on)}wi.sub(xr,yr[1],yr[0]),wi.sub(Sr,yr[3],yr[0]),wi.cross(mr,xr,Sr),wi.normalize(mr,mr);for(var tn=0;tn<4;tn++)I.set(v+tn,mr),Dt&&ut.set(v+tn,x);for(var tn=0;tn<6;tn++)Et[g*3+tn]=Lr[tn]+v;v+=4,g+=2,Or+=En}}return o.dirty(),{vertexOffset:v,triangleOffset:g}},_getRegionLinesInfo:function(e,o,u){var c=0,v=0,g=o.getRegionModel(e),x=g.getModel("itemStyle"),_=x.get("borderWidth");if(_>0){var M=o.getRegionPolygonCoords(e);M.forEach(function(I){var F=I.exterior,ut=I.interiors;c+=u.getPolylineVertexCount(F),v+=u.getPolylineTriangleCount(F);for(var yt=0;yt<ut.length;yt++)c+=u.getPolylineVertexCount(ut[yt]),v+=u.getPolylineTriangleCount(ut[yt])},this)}return{vertexCount:c,triangleCount:v}},_updateLinesGeometry:function(e,o,u,c,v,g){function x(I){for(var F=new Float64Array(I.length*3),ut=0,yt=[],Dt=0;Dt<I.length;Dt++)yt[0]=I[Dt][0],yt[1]=c+.1,yt[2]=I[Dt][1],g&&wi.transformMat4(yt,yt,g),F[ut++]=yt[0],F[ut++]=yt[1],F[ut++]=yt[2];return F}var _=[1,1,1,1],M=o.getRegionPolygonCoords(u);M.forEach(function(I){var F=I.exterior,ut=I.interiors;e.addPolyline(x(F),_,v);for(var yt=0;yt<ut.length;yt++)e.addPolyline(x(ut[yt]),_,v)})},highlight:function(e){var o=this._data;if(!!o){var u=o.getItemModel(e),c=u.getModel(["emphasis","itemStyle"]),v=c.get("color"),g=Kr.firstNotNull(c.get("opacity"),Qn(o,e),1);if(v==null){var x=kn(o,e);v=B.i.lift(x,-.4)}g==null&&(g=Qn(o,e));var _=se.parseColor(v);_[3]*=g,this._setColorOfDataIndex(o,e,_)}},downplay:function(e){var o=this._data;if(!!o){var u=Kr.firstNotNull(kn(o,e),o.getItemModel(e).get(["itemStyle","color"]),"#fff"),c=Kr.firstNotNull(Qn(o,e),1),v=se.parseColor(u);v[3]*=c,this._setColorOfDataIndex(o,e,v)}},_setColorOfDataIndex:function(e,o,u){if(!(o<this._startIndex&&o>this._endIndex)){o-=this._startIndex;for(var c=this._vertexRangeOfDataIndex[o*2];c<this._vertexRangeOfDataIndex[o*2+1];c++)this._polygonMesh.geometry.attributes.color.set(c,u);this._polygonMesh.geometry.dirty(),this._api.getZr().refresh()}}};var zu=pc,ng=B.d.extend({type:"geo3D",__ecgl__:!0,init:function(e,o){this._geo3DBuilder=new zu(o),this.groupGL=new se.Node,this._lightRoot=new se.Node,this._sceneHelper=new Ls(this._lightRoot),this._sceneHelper.initLight(this._lightRoot),this._control=new _u({zr:o.getZr()}),this._control.init()},render:function(e,o,u){this.groupGL.add(this._geo3DBuilder.rootNode);var c=e.coordinateSystem;if(!(!c||!c.viewGL)){c.viewGL.add(this._lightRoot),e.get("show")?c.viewGL.add(this.groupGL):c.viewGL.remove(this.groupGL);var v=this._control;v.setViewGL(c.viewGL);var g=e.getModel("viewControl");v.setFromViewControlModel(g,0),this._sceneHelper.setScene(c.viewGL.scene),this._sceneHelper.updateLight(e),c.viewGL.setPostEffect(e.getModel("postEffect"),u),c.viewGL.setTemporalSuperSampling(e.getModel("temporalSuperSampling")),this._geo3DBuilder.update(e,o,u,0,e.getData().count());var x=c.viewGL.isLinearSpace()?"define":"undefine";this._geo3DBuilder.rootNode.traverse(function(_){_.material&&_.material[x]("fragment","SRGB_DECODE")}),v.off("update"),v.on("update",function(){u.dispatchAction({type:"geo3DChangeCamera",alpha:v.getAlpha(),beta:v.getBeta(),distance:v.getDistance(),center:v.getCenter(),from:this.uid,geo3DId:e.id})}),v.update()}},afterRender:function(e,o,u,c){var v=c.renderer;this._sceneHelper.updateAmbientCubemap(v,e,u),this._sceneHelper.updateSkybox(v,e,u)},dispose:function(){this._control.dispose()}}),ig=S("F5Ls"),ag=S("a9QJ"),og=Hn.vec3,Vs=Hn.mat4,sg=[ig.a,ag.a];function gc(n,e,o,u,c){this.name=n,this.map=e,this.regionHeight=0,this.regions=[],this._nameCoordMap={},this.loadGeoJson(o,u,c),this.transform=Vs.identity(new Float64Array(16)),this.invTransform=Vs.identity(new Float64Array(16)),this.extrudeY=!0,this.altitudeAxis}gc.prototype={constructor:gc,type:"geo3D",dimensions:["lng","lat","alt"],containPoint:function(){},loadGeoJson:function(e,o,u){var c=B.F||B.G;try{this.regions=e?c(e):[]}catch(I){throw`Invalid geoJson format
`+I}o=o||{},u=u||{};for(var v=this.regions,g={},x=0;x<v.length;x++){var _=v[x].name;_=u[_]||_,v[x].name=_,g[_]=v[x],this.addGeoCoord(_,v[x].center);var M=o[_];M&&v[x].transformTo(M.left,M.top,M.width,M.height)}this._regionsMap=g,this._geoRect=null,sg.forEach(function(I){I(this)},this)},getGeoBoundingRect:function(){if(this._geoRect)return this._geoRect;for(var e,o=this.regions,u=0;u<o.length;u++){var c=o[u].getBoundingRect();e=e||c.clone(),e.union(c)}return this._geoRect=e||new B.z.BoundingRect(0,0,0,0)},addGeoCoord:function(e,o){this._nameCoordMap[e]=o},getRegion:function(e){return this._regionsMap[e]},getRegionByCoord:function(e){for(var o=this.regions,u=0;u<o.length;u++)if(o[u].contain(e))return o[u]},setSize:function(e,o,u){this.size=[e,o,u];var c=this.getGeoBoundingRect(),v=e/c.width,g=-u/c.height,x=-e/2-c.x*v,_=u/2-c.y*g,M=this.extrudeY?[x,0,_]:[x,_,0],I=this.extrudeY?[v,1,g]:[v,g,1],F=this.transform;Vs.identity(F),Vs.translate(F,F,M),Vs.scale(F,F,I),Vs.invert(this.invTransform,F)},dataToPoint:function(e,o){o=o||[];var u=this.extrudeY?1:2,c=this.extrudeY?2:1,v=e[2];return isNaN(v)&&(v=0),o[0]=e[0],o[c]=e[1],this.altitudeAxis?o[u]=this.altitudeAxis.dataToCoord(v):o[u]=0,o[u]+=this.regionHeight,og.transformMat4(o,o,this.transform),o},pointToData:function(e,o){}};var Bl=gc;function mc(n,e){var o=n.getBoxLayoutParams(),u=Object(Sl.g)(o,{width:e.getWidth(),height:e.getHeight()});u.y=e.getHeight()-u.y-u.height,this.viewGL.setViewport(u.x,u.y,u.width,u.height,e.getDevicePixelRatio());var c=this.getGeoBoundingRect(),v=c.width/c.height*(n.get("aspectScale")||.75),g=n.get("boxWidth"),x=n.get("boxDepth"),_=n.get("boxHeight");_==null&&(_=5),isNaN(g)&&isNaN(x)&&(g=100),isNaN(x)?x=g/v:isNaN(g)&&(g=x/v),this.setSize(g,_,x),this.regionHeight=n.get("regionHeight"),this.altitudeAxis&&this.altitudeAxis.setExtent(0,Math.max(_-this.regionHeight,0))}function lg(n,e){var o=[Infinity,-Infinity];if(n.eachSeries(function(c){if(c.coordinateSystem===this&&c.type!=="series.map3D"){var v=c.getData(),g=c.coordDimToDataDim("alt"),x=g&&g[0];if(x){var _=v.getDataExtent(x,!0);o[0]=Math.min(o[0],_[0]),o[1]=Math.max(o[1],_[1])}}},this),o&&isFinite(o[1]-o[0])){var u=B.A.createScale(o,{type:"value",min:"dataMin",max:"dataMax"});this.altitudeAxis=new B.a("altitude",u),this.resize(this.model,e)}}if(!1)var Qy;var fv=0,cv={dimensions:Bl.prototype.dimensions,create:function(e,o){var u=[];if(!B.y)throw new Error("geo3D component depends on geo component");function c(v,g){var x=cv.createGeo3D(v);v.__viewGL=v.__viewGL||new uo,x.viewGL=v.__viewGL,v.coordinateSystem=x,x.model=v,u.push(x),x.resize=mc,x.resize(v,o),x.update=lg}return e.eachComponent("geo3D",function(v,g){c(v,g)}),e.eachSeriesByType("map3D",function(v,g){var x=v.get("coordinateSystem");x==null&&(x="geo3D"),x==="geo3D"&&c(v,g)}),e.eachSeries(function(v){if(v.get("coordinateSystem")==="geo3D"){if(v.type==="series.map3D")return;var g=v.getReferringComponents("geo3D").models[0];if(g||(g=e.getComponent("geo3D")),!g)throw new Error('geo "'+Kr.firstNotNull(v.get("geo3DIndex"),v.get("geo3DId"),0)+'" not found');v.coordinateSystem=g.coordinateSystem}}),u},createGeo3D:function(e){var o=e.get("map"),u;return typeof o=="string"?(u=o,o=B.y(o)):o&&o.features&&(o={geoJson:o}),u==null&&(u="GEO_ANONYMOUS_"+fv++),new Bl(u+fv++,u,o&&o.geoJson,o&&o.specialAreas,e.get("nameMap"))}},hv=cv;function vv(n){n.registerComponentModel(sc),n.registerComponentView(ng),n.registerAction({type:"geo3DChangeCamera",event:"geo3dcamerachanged",update:"series:updateCamera"},function(e,o){o.eachComponent({mainType:"geo3D",query:e},function(u){u.setView(e)})}),n.registerCoordinateSystem("geo3D",hv)}Object(B.X)(vv);function dv(n,e){n.id=n.id||n.name||e+""}var rs=B.c.extend({type:"globe",layoutMode:"box",coordinateSystem:null,init:function(){rs.superApply(this,"init",arguments),B.Y.each(this.option.layers,function(e,o){B.Y.merge(e,this.defaultLayerOption),dv(e,o)},this)},mergeOption:function(e){var o=this.option.layers;this.option.layers=null,rs.superApply(this,"mergeOption",arguments);function u(x){return B.Y.reduce(x,function(_,M,I){return dv(M,I),_[M.id]=M,_},{})}if(o&&o.length){var c=u(e.layers),v=u(o);for(var g in c)v[g]?B.Y.merge(v[g],c[g],!0):o.push(e.layers[g]);this.option.layers=o}B.Y.each(this.option.layers,function(x){B.Y.merge(x,this.defaultLayerOption)},this)},optionUpdated:function(){this.updateDisplacementHash()},defaultLayerOption:{show:!0,type:"overlay"},defaultOption:{show:!0,zlevel:-10,left:0,top:0,width:"100%",height:"100%",environment:"auto",baseColor:"#fff",baseTexture:"",heightTexture:"",displacementTexture:"",displacementScale:0,displacementQuality:"medium",globeRadius:100,globeOuterRadius:150,shading:"lambert",light:{main:{time:""}},atmosphere:{show:!1,offset:5,color:"#ffffff",glowPower:6,innerGlowPower:2},viewControl:{autoRotate:!0,panSensitivity:0,targetCoord:null},layers:[]},setDisplacementData:function(e,o,u){this.displacementData=e,this.displacementWidth=o,this.displacementHeight=u},getDisplacementTexture:function(){return this.get("displacementTexture")||this.get("heightTexture")},getDisplacemenScale:function(){var e=this.getDisplacementTexture(),o=this.get("displacementScale");return(!e||e==="none")&&(o=0),o},hasDisplacement:function(){return this.getDisplacemenScale()>0},_displacementChanged:!0,_displacementScale:0,updateDisplacementHash:function(){var e=this.getDisplacementTexture(),o=this.getDisplacemenScale();this._displacementChanged=this._displacementTexture!==e||this._displacementScale!==o,this._displacementTexture=e,this._displacementScale=o},isDisplacementChanged:function(){return this._displacementChanged}});B.Y.merge(rs.prototype,bu),B.Y.merge(rs.prototype,As),B.Y.merge(rs.prototype,Xo),B.Y.merge(rs.prototype,fo);var ug=rs,pv=Math.PI,$i=Math.sin,Wa=Math.cos,gv=Math.tan,mv=Math.asin,yv=Math.atan2,ns=pv/180,fg=1e3*60*60*24,cg=2440588,hg=2451545;function xv(n){return n.valueOf()/fg-.5+cg}function bv(n){return xv(n)-hg}var jl=ns*23.4397;function yc(n,e){return yv($i(n)*Wa(jl)-gv(e)*$i(jl),Wa(n))}function vg(n,e){return mv($i(e)*Wa(jl)+Wa(e)*$i(jl)*$i(n))}function dg(n,e,o){return yv($i(n),Wa(n)*$i(e)-gv(o)*Wa(e))}function pg(n,e,o){return mv($i(e)*$i(o)+Wa(e)*Wa(o)*Wa(n))}function gg(n,e){return ns*(280.16+360.9856235*n)-e}function mg(n){return ns*(357.5291+.98560028*n)}function yg(n){var e=ns*(1.9148*$i(n)+.02*$i(2*n)+3e-4*$i(3*n)),o=ns*102.9372;return n+e+o+pv}function xg(n){var e=mg(n),o=yg(e);return{dec:vg(o,0),ra:yc(o,0)}}var Sv={};Sv.getPosition=function(n,e,o){var u=ns*-o,c=ns*e,v=bv(n),g=xg(v),x=gg(v,u)-g.ra;return{azimuth:dg(x,c,g.dec),altitude:pg(x,c,g.dec)}};var bg=Sv,Sg=`@export ecgl.atmosphere.vertex
attribute vec3 position: POSITION;
attribute vec3 normal : NORMAL;
uniform mat4 worldViewProjection : WORLDVIEWPROJECTION;
uniform mat4 normalMatrix : WORLDINVERSETRANSPOSE;

varying vec3 v_Normal;

void main() {
 v_Normal = normalize((normalMatrix * vec4(normal, 0.0)).xyz);
 gl_Position = worldViewProjection * vec4(position, 1.0);
}
@end


@export ecgl.atmosphere.fragment
uniform mat4 viewTranspose: VIEWTRANSPOSE;
uniform float glowPower;
uniform vec3 glowColor;

varying vec3 v_Normal;

void main() {
 float intensity = pow(1.0 - dot(v_Normal, (viewTranspose * vec4(0.0, 0.0, 1.0, 0.0)).xyz), glowPower);
 gl_FragColor = vec4(glowColor, intensity * intensity);
}
@end`;se.Shader.import(gu),se.Shader.import(Sg);var _g=B.d.extend({type:"globe",__ecgl__:!0,_displacementScale:0,init:function(e,o){this.groupGL=new se.Node,this._sphereGeometry=new se.SphereGeometry({widthSegments:200,heightSegments:100,dynamic:!0}),this._overlayGeometry=new se.SphereGeometry({widthSegments:80,heightSegments:40}),this._planeGeometry=new se.PlaneGeometry,this._earthMesh=new se.Mesh({renderNormal:!0}),this._atmosphereMesh=new se.Mesh,this._atmosphereGeometry=new se.SphereGeometry({widthSegments:80,heightSegments:40}),this._atmosphereMaterial=new se.Material({shader:new se.Shader(se.Shader.source("ecgl.atmosphere.vertex"),se.Shader.source("ecgl.atmosphere.fragment")),transparent:!0}),this._atmosphereMesh.geometry=this._atmosphereGeometry,this._atmosphereMesh.material=this._atmosphereMaterial,this._atmosphereMesh.frontFace=se.Mesh.CW,this._lightRoot=new se.Node,this._sceneHelper=new Ls,this._sceneHelper.initLight(this._lightRoot),this.groupGL.add(this._atmosphereMesh),this.groupGL.add(this._earthMesh),this._control=new _u({zr:o.getZr()}),this._control.init(),this._layerMeshes={}},render:function(e,o,u){var c=e.coordinateSystem,v=e.get("shading");c.viewGL.add(this._lightRoot),e.get("show")?c.viewGL.add(this.groupGL):c.viewGL.remove(this.groupGL),this._sceneHelper.setScene(c.viewGL.scene),c.viewGL.setPostEffect(e.getModel("postEffect"),u),c.viewGL.setTemporalSuperSampling(e.getModel("temporalSuperSampling"));var g=this._earthMesh;g.geometry=this._sphereGeometry;var x="ecgl."+v;(!g.material||g.material.shader.name!==x)&&(g.material=se.createMaterial(x)),se.setMaterialFromModel(v,g.material,e,u),["roughnessMap","metalnessMap","detailMap","normalMap"].forEach(function(ut){var yt=g.material.get(ut);yt&&(yt.flipY=!1)}),g.material.set("color",se.parseColor(e.get("baseColor")));var _=c.radius*.99;if(g.scale.set(_,_,_),e.get("atmosphere.show")){g.material.define("both","ATMOSPHERE_ENABLED"),this._atmosphereMesh.invisible=!1,this._atmosphereMaterial.setUniforms({glowPower:e.get("atmosphere.glowPower")||6,glowColor:e.get("atmosphere.color")||"#ffffff"}),g.material.setUniforms({glowPower:e.get("atmosphere.innerGlowPower")||2,glowColor:e.get("atmosphere.color")||"#ffffff"});var M=e.get("atmosphere.offset")||5;this._atmosphereMesh.scale.set(_+M,_+M,_+M)}else g.material.undefine("both","ATMOSPHERE_ENABLED"),this._atmosphereMesh.invisible=!0;var I=g.material.setTextureImage("diffuseMap",e.get("baseTexture"),u,{flipY:!1,anisotropic:8});I&&I.surface&&I.surface.attachToMesh(g);var F=g.material.setTextureImage("bumpMap",e.get("heightTexture"),u,{flipY:!1,anisotropic:8});F&&F.surface&&F.surface.attachToMesh(g),g.material[e.get("postEffect.enable")?"define":"undefine"]("fragment","SRGB_DECODE"),this._updateLight(e,u),this._displaceVertices(e,u),this._updateViewControl(e,u),this._updateLayers(e,u)},afterRender:function(e,o,u,c){var v=c.renderer;this._sceneHelper.updateAmbientCubemap(v,e,u),this._sceneHelper.updateSkybox(v,e,u)},_updateLayers:function(e,o){var u=e.coordinateSystem,c=e.get("layers"),v=u.radius,g=[],x=[],_=[],M=[];B.Y.each(c,function(Dt){var Et=new B.f(Dt),Pt=Et.get("type"),Ht=se.loadTexture(Et.get("texture"),o,{flipY:!1,anisotropic:8});if(Ht.surface&&Ht.surface.attachToMesh(this._earthMesh),Pt==="blend"){var $t=Et.get("blendTo"),qt=Kr.firstNotNull(Et.get("intensity"),1);$t==="emission"?(_.push(Ht),M.push(qt)):(g.push(Ht),x.push(qt))}else{var le=Et.get("id"),ie=this._layerMeshes[le];ie||(ie=this._layerMeshes[le]=new se.Mesh({geometry:this._overlayGeometry,castShadow:!1,ignorePicking:!0}));var he=Et.get("shading");he==="lambert"?(ie.material=ie.__lambertMaterial||new se.Material({autoUpdateTextureStatus:!1,shader:se.createShader("ecgl.lambert"),transparent:!0,depthMask:!1}),ie.__lambertMaterial=ie.material):(ie.material=ie.__colorMaterial||new se.Material({autoUpdateTextureStatus:!1,shader:se.createShader("ecgl.color"),transparent:!0,depthMask:!1}),ie.__colorMaterial=ie.material),ie.material.enableTexture("diffuseMap");var Re=Et.get("distance"),ze=v+(Re==null?u.radius/100:Re);ie.scale.set(ze,ze,ze),v=ze;var Pe=this._blankTexture||(this._blankTexture=se.createBlankTexture("rgba(255, 255, 255, 0)"));ie.material.set("diffuseMap",Pe),se.loadTexture(Et.get("texture"),o,{flipY:!1,anisotropic:8},function(Ke){Ke.surface&&Ke.surface.attachToMesh(ie),ie.material.set("diffuseMap",Ke),o.getZr().refresh()}),Et.get("show")?this.groupGL.add(ie):this.groupGL.remove(ie)}},this);var I=this._earthMesh.material;I.define("fragment","LAYER_DIFFUSEMAP_COUNT",g.length),I.define("fragment","LAYER_EMISSIVEMAP_COUNT",_.length),I.set("layerDiffuseMap",g),I.set("layerDiffuseIntensity",x),I.set("layerEmissiveMap",_),I.set("layerEmissionIntensity",M);var F=e.getModel("debug.wireframe");if(F.get("show")){I.define("both","WIREFRAME_TRIANGLE");var ut=se.parseColor(F.get("lineStyle.color")||"rgba(0,0,0,0.5)"),yt=Kr.firstNotNull(F.get("lineStyle.width"),1);I.set("wireframeLineWidth",yt),I.set("wireframeLineColor",ut)}else I.undefine("both","WIREFRAME_TRIANGLE")},_updateViewControl:function(e,o){var u=e.coordinateSystem,c=e.getModel("viewControl"),v=u.viewGL.camera,g=this;function x(){return{type:"globeChangeCamera",alpha:_.getAlpha(),beta:_.getBeta(),distance:_.getDistance()-u.radius,center:_.getCenter(),from:g.uid,globeId:e.id}}var _=this._control;_.setViewGL(u.viewGL);var M=c.get("targetCoord"),I,F;M!=null&&(F=M[0]+90,I=M[1]),_.setFromViewControlModel(c,{baseDistance:u.radius,alpha:I,beta:F}),_.off("update"),_.on("update",function(){o.dispatchAction(x())})},_displaceVertices:function(e,o){var u=e.get("displacementQuality"),c=e.get("debug.wireframe.show"),v=e.coordinateSystem;if(!(!e.isDisplacementChanged()&&u===this._displacementQuality&&c===this._showDebugWireframe)){this._displacementQuality=u,this._showDebugWireframe=c;var g=this._sphereGeometry,x={low:100,medium:200,high:400,ultra:800}[u]||200,_=x/2;(g.widthSegments!==x||c)&&(g.widthSegments=x,g.heightSegments=_,g.build()),this._doDisplaceVertices(g,v),c&&g.generateBarycentric()}},_doDisplaceVertices:function(e,o){var u=e.attributes.position.value,c=e.attributes.texcoord0.value,v=e.__originalPosition;(!v||v.length!==u.length)&&(v=new Float32Array(u.length),v.set(u),e.__originalPosition=v);for(var g=o.displacementWidth,x=o.displacementHeight,_=o.displacementData,M=0;M<e.vertexCount;M++){var I=M*3,F=M*2,ut=v[I+1],yt=v[I+2],Dt=v[I+3],Et=c[F++],Pt=c[F++],Ht=Math.round(Et*(g-1)),$t=Math.round(Pt*(x-1)),qt=$t*g+Ht,le=_?_[qt]:0;u[I+1]=ut+ut*le,u[I+2]=yt+yt*le,u[I+3]=Dt+Dt*le}e.generateVertexNormals(),e.dirty(),e.updateBoundingBox()},_updateLight:function(e,o){var u=this._earthMesh;this._sceneHelper.updateLight(e);var c=this._sceneHelper.mainLight,v=e.get("light.main.time")||new Date,g=bg.getPosition(B.E.parseDate(v),0,0),x=Math.cos(g.altitude);c.position.y=-x*Math.cos(g.azimuth),c.position.x=Math.sin(g.altitude),c.position.z=x*Math.sin(g.azimuth),c.lookAt(u.getWorldPosition())},dispose:function(e,o){this.groupGL.removeAll(),this._control.dispose()}}),Tg=Hn.vec3;function xc(n){this.radius=n,this.viewGL=null,this.altitudeAxis,this.displacementData=null,this.displacementWidth,this.displacementHeight}xc.prototype={constructor:xc,dimensions:["lng","lat","alt"],type:"globe",containPoint:function(){},setDisplacementData:function(e,o,u){this.displacementData=e,this.displacementWidth=o,this.displacementHeight=u},_getDisplacementScale:function(e,o){var u=(e+180)/360*(this.displacementWidth-1),c=(90-o)/180*(this.displacementHeight-1),v=Math.round(u)+Math.round(c)*this.displacementWidth;return this.displacementData[v]},dataToPoint:function(e,o){var u=e[0],c=e[1],v=e[2]||0,g=this.radius;this.displacementData&&(g*=1+this._getDisplacementScale(u,c)),this.altitudeAxis&&(g+=this.altitudeAxis.dataToCoord(v)),u=u*Math.PI/180,c=c*Math.PI/180;var x=Math.cos(c)*g;return o=o||[],o[0]=-x*Math.cos(u+Math.PI),o[1]=Math.sin(c)*g,o[2]=x*Math.sin(u+Math.PI),o},pointToData:function(e,o){var u=e[0],c=e[1],v=e[2],g=Tg.len(e);u/=g,c/=g,v/=g;var x=Math.asin(c),_=Math.atan2(v,-u);_<0&&(_=Math.PI*2+_);var M=x*180/Math.PI,I=_*180/Math.PI-180;return o=o||[],o[0]=I,o[1]=M,o[2]=g-this.radius,this.altitudeAxis&&(o[2]=this.altitudeAxis.coordToData(o[2])),o}};var _v=xc;function Og(n,e){var o=document.createElement("canvas"),u=o.getContext("2d"),c=n.width,v=n.height;o.width=c,o.height=v,u.drawImage(n,0,0,c,v);for(var g=u.getImageData(0,0,c,v).data,x=new Float32Array(g.length/4),_=0;_<g.length/4;_++){var M=g[_*4];x[_]=M/255*e}return{data:x,width:c,height:v}}function bc(n,e){var o=n.getBoxLayoutParams(),u=Object(Sl.g)(o,{width:e.getWidth(),height:e.getHeight()});u.y=e.getHeight()-u.y-u.height,this.viewGL.setViewport(u.x,u.y,u.width,u.height,e.getDevicePixelRatio()),this.radius=n.get("globeRadius");var c=n.get("globeOuterRadius");this.altitudeAxis&&this.altitudeAxis.setExtent(0,c-this.radius)}function Ag(n,e){var o=[Infinity,-Infinity];if(n.eachSeries(function(c){if(c.coordinateSystem===this){var v=c.getData(),g=c.coordDimToDataDim("alt"),x=g&&g[0];if(x){var _=v.getDataExtent(x,!0);o[0]=Math.min(o[0],_[0]),o[1]=Math.max(o[1],_[1])}}},this),o&&isFinite(o[1]-o[0])){var u=B.A.createScale(o,{type:"value",min:"dataMin",max:"dataMax"});this.altitudeAxis=new B.a("altitude",u),this.resize(this.model,e)}}var Mg={dimensions:_v.prototype.dimensions,create:function(e,o){var u=[];return e.eachComponent("globe",function(c){c.__viewGL=c.__viewGL||new uo;var v=new _v;v.viewGL=c.__viewGL,c.coordinateSystem=v,v.model=c,u.push(v),v.resize=bc,v.resize(c,o),v.update=Ag}),e.eachSeries(function(c){if(c.get("coordinateSystem")==="globe"){var v=c.getReferringComponents("globe").models[0];if(v||(v=e.getComponent("globe")),!v)throw new Error('globe "'+Kr.firstNotNull(c.get("globe3DIndex"),c.get("globe3DId"),0)+'" not found');var g=v.coordinateSystem;c.coordinateSystem=g}}),e.eachComponent("globe",function(c,v){var g=c.coordinateSystem,x=c.getDisplacementTexture(),_=c.getDisplacemenScale();if(c.isDisplacementChanged()){if(c.hasDisplacement()){var M=!0;se.loadTexture(x,o,function(I){var F=I.image,ut=Og(F,_);c.setDisplacementData(ut.data,ut.width,ut.height),M||o.dispatchAction({type:"globeUpdateDisplacment"})}),M=!1}else g.setDisplacementData(null,0,0);g.setDisplacementData(c.displacementData,c.displacementWidth,c.displacementHeight)}}),u}},Dg=Mg;function Cg(n){n.registerComponentModel(ug),n.registerComponentView(_g),n.registerCoordinateSystem("globe",Dg),n.registerAction({type:"globeChangeCamera",event:"globecamerachanged",update:"series:updateCamera"},function(e,o){o.eachComponent({mainType:"globe",query:e},function(u){u.setView(e)})}),n.registerAction({type:"globeUpdateDisplacment",event:"globedisplacementupdated",update:"update"},function(e,o){})}Object(B.X)(Cg);var Tv=["zoom","center","pitch","bearing"],Ya=B.c.extend({type:"mapbox3D",layoutMode:"box",coordinateSystem:null,defaultOption:{zlevel:-10,style:"mapbox://styles/mapbox/light-v9",center:[0,0],zoom:0,pitch:0,bearing:0,light:{main:{alpha:20,beta:30}},altitudeScale:1,boxHeight:"auto"},getMapboxCameraOption:function(){var e=this;return Tv.reduce(function(o,u){return o[u]=e.get(u),o},{})},setMapboxCameraOption:function(e){e!=null&&Tv.forEach(function(o){e[o]!=null&&(this.option[o]=e[o])},this)},getMapbox:function(){return this._mapbox},setMapbox:function(e){this._mapbox=e}});B.Y.merge(Ya.prototype,As),B.Y.merge(Ya.prototype,Xo);var Sc=Ya;function Yi(n,e){if(this.id=n,this.zr=e,this.dom=document.createElement("div"),this.dom.style.cssText="position:absolute;left:0;right:0;top:0;bottom:0;",!mapboxgl)throw new Error("Mapbox GL library must be included. See https://www.mapbox.com/mapbox-gl-js/api/");this._mapbox=new mapboxgl.Map({container:this.dom}),this._initEvents()}Yi.prototype.setUnpainted=function(){},Yi.prototype.resize=function(){this._mapbox.resize()},Yi.prototype.getMapbox=function(){return this._mapbox},Yi.prototype.clear=function(){},Yi.prototype.refresh=function(){this._mapbox.resize()};var Fu=["mousedown","mouseup","click","dblclick","mousemove","mousewheel","wheel","touchstart","touchend","touchmove","touchcancel"];Yi.prototype._initEvents=function(){var n=this._mapbox.getCanvasContainer();this._handlers=this._handlers||{contextmenu:function(o){return o.preventDefault(),!1}},Fu.forEach(function(e){this._handlers[e]=function(o){var u={};for(var c in o)u[c]=o[c];u.bubbles=!1;var v=new o.constructor(o.type,u);n.dispatchEvent(v)},this.zr.dom.addEventListener(e,this._handlers[e])},this),this.zr.dom.addEventListener("contextmenu",this._handlers.contextmenu)},Yi.prototype.dispose=function(){Fu.forEach(function(n){this.zr.dom.removeEventListener(n,this._handlers[n])},this)};var Ov=Yi,_c=`
@export ecgl.displayShadow.vertex

@import ecgl.common.transformUniforms

@import ecgl.common.uv.header

@import ecgl.common.attributes

varying vec3 v_WorldPosition;

varying vec3 v_Normal;

void main()
{
 @import ecgl.common.uv.main
 v_Normal = normalize((worldInverseTranspose * vec4(normal, 0.0)).xyz);

 v_WorldPosition = (world * vec4(position, 1.0)).xyz;
 gl_Position = worldViewProjection * vec4(position, 1.0);
}

@end


@export ecgl.displayShadow.fragment

@import ecgl.common.uv.fragmentHeader

varying vec3 v_Normal;
varying vec3 v_WorldPosition;

uniform float roughness: 0.2;

#ifdef DIRECTIONAL_LIGHT_COUNT
@import clay.header.directional_light
#endif

@import ecgl.common.ssaoMap.header

@import clay.plugin.compute_shadow_map

void main()
{
 float shadow = 1.0;

 @import ecgl.common.ssaoMap.main

#if defined(DIRECTIONAL_LIGHT_COUNT) && defined(DIRECTIONAL_LIGHT_SHADOWMAP_COUNT)
 float shadowContribsDir[DIRECTIONAL_LIGHT_COUNT];
 if(shadowEnabled)
 {
 computeShadowOfDirectionalLights(v_WorldPosition, shadowContribsDir);
 }
 for (int i = 0; i < DIRECTIONAL_LIGHT_COUNT; i++) {
 shadow = min(shadow, shadowContribsDir[i] * 0.5 + 0.5);
 }
#endif

 shadow *= 0.5 + ao * 0.5;
 shadow = clamp(shadow, 0.0, 1.0);

 gl_FragColor = vec4(vec3(0.0), 1.0 - shadow);
}

@end`;se.Shader.import(_c);var Eg=512,Lg=B.d.extend({type:"mapbox3D",__ecgl__:!0,init:function(e,o){var u=o.getZr();this._zrLayer=new Ov("mapbox3D",u),u.painter.insertLayer(-1e3,this._zrLayer),this._lightRoot=new se.Node,this._sceneHelper=new Ls(this._lightRoot),this._sceneHelper.initLight(this._lightRoot);var c=this._zrLayer.getMapbox(),v=this._dispatchInteractAction.bind(this,o,c);["zoom","rotate","drag","pitch","rotate","move"].forEach(function(g){c.on(g,v)}),this._groundMesh=new se.Mesh({geometry:new se.PlaneGeometry,material:new se.Material({shader:new se.Shader({vertex:se.Shader.source("ecgl.displayShadow.vertex"),fragment:se.Shader.source("ecgl.displayShadow.fragment")}),depthMask:!1}),renderOrder:-100,culling:!1,castShadow:!1,$ignorePicking:!0,renderNormal:!0})},render:function(e,o,u){var c=this._zrLayer.getMapbox(),v=e.get("style"),g=JSON.stringify(v);g!==this._oldStyleStr&&v&&c.setStyle(v),this._oldStyleStr=g,c.setCenter(e.get("center")),c.setZoom(e.get("zoom")),c.setPitch(e.get("pitch")),c.setBearing(e.get("bearing")),e.setMapbox(c);var x=e.coordinateSystem;x.viewGL.scene.add(this._lightRoot),x.viewGL.add(this._groundMesh),this._updateGroundMesh(),this._sceneHelper.setScene(x.viewGL.scene),this._sceneHelper.updateLight(e),x.viewGL.setPostEffect(e.getModel("postEffect"),u),x.viewGL.setTemporalSuperSampling(e.getModel("temporalSuperSampling")),this._mapbox3DModel=e},afterRender:function(e,o,u,c){var v=c.renderer;this._sceneHelper.updateAmbientCubemap(v,e,u),this._sceneHelper.updateSkybox(v,e,u),e.coordinateSystem.viewGL.scene.traverse(function(g){g.material&&(g.material.define("fragment","NORMAL_UP_AXIS",2),g.material.define("fragment","NORMAL_FRONT_AXIS",1))})},updateCamera:function(e,o,u,c){e.coordinateSystem.setCameraOption(c),this._updateGroundMesh(),u.getZr().refresh()},_dispatchInteractAction:function(e,o,u){e.dispatchAction({type:"mapbox3DChangeCamera",pitch:o.getPitch(),zoom:o.getZoom(),center:o.getCenter().toArray(),bearing:o.getBearing(),mapbox3DId:this._mapbox3DModel&&this._mapbox3DModel.id})},_updateGroundMesh:function(){if(this._mapbox3DModel){var e=this._mapbox3DModel.coordinateSystem,o=e.dataToPoint(e.center);this._groundMesh.position.set(o[0],o[1],-.001);var u=new se.Plane(new se.Vector3(0,0,1),0),c=e.viewGL.camera.castRay(new se.Vector2(-1,-1)),v=e.viewGL.camera.castRay(new se.Vector2(1,1)),g=c.intersectPlane(u),x=v.intersectPlane(u),_=g.dist(x)/e.viewGL.rootNode.scale.x;this._groundMesh.scale.set(_,_,1)}},dispose:function(e,o){this._zrLayer&&this._zrLayer.dispose(),o.getZr().painter.delLayer(-1e3)}}),Xa=Hn.mat4,zl=512,Tc=.6435011087932844,xi=Math.PI,Gs=1/10;function Oc(){this.width=0,this.height=0,this.altitudeScale=1,this.boxHeight="auto",this.altitudeExtent,this.bearing=0,this.pitch=0,this.center=[0,0],this._origin,this.zoom=0,this._initialZoom,this.maxPitch=60,this.zoomOffset=0}Oc.prototype={constructor:Oc,dimensions:["lng","lat","alt"],containPoint:function(){},setCameraOption:function(e){this.bearing=e.bearing,this.pitch=e.pitch,this.center=e.center,this.zoom=e.zoom,this._origin||(this._origin=this.projectOnTileWithScale(this.center,zl)),this._initialZoom==null&&(this._initialZoom=this.zoom),this.updateTransform()},updateTransform:function(){if(!!this.height){var e=.5/Math.tan(Tc/2)*this.height*Gs,o=Math.max(Math.min(this.pitch,this.maxPitch),0)/180*Math.PI,u=Tc/2,c=Math.PI/2+o,v=Math.sin(u)*e/Math.sin(Math.PI-c-u),g=Math.cos(Math.PI/2-o)*v+e,x=g*1.1;this.pitch>50&&(x=1e3);var _=[];Xa.perspective(_,Tc,this.width/this.height,1,x),this.viewGL.camera.projectionMatrix.setArray(_),this.viewGL.camera.decomposeProjectionMatrix();var _=Xa.identity([]),M=this.dataToPoint(this.center);Xa.scale(_,_,[1,-1,1]),Xa.translate(_,_,[0,0,-e]),Xa.rotateX(_,_,o),Xa.rotateZ(_,_,-this.bearing/180*Math.PI),Xa.translate(_,_,[-M[0]*this.getScale()*Gs,-M[1]*this.getScale()*Gs,0]),this.viewGL.camera.viewMatrix.array=_;var I=[];Xa.invert(I,_),this.viewGL.camera.worldTransform.array=I,this.viewGL.camera.decomposeWorldTransform();var F=zl*this.getScale(),ut;if(this.altitudeExtent&&!isNaN(this.boxHeight)){var yt=this.altitudeExtent[1]-this.altitudeExtent[0];ut=this.boxHeight/yt*this.getScale()/Math.pow(2,this._initialZoom-this.zoomOffset)}else ut=F/(2*Math.PI*6378e3*Math.abs(Math.cos(this.center[1]*(Math.PI/180))))*this.altitudeScale*Gs;this.viewGL.rootNode.scale.set(this.getScale()*Gs,this.getScale()*Gs,ut)}},getScale:function(){return Math.pow(2,this.zoom-this.zoomOffset)},projectOnTile:function(e,o){return this.projectOnTileWithScale(e,this.getScale()*zl,o)},projectOnTileWithScale:function(e,o,u){var c=e[0],v=e[1],g=c*xi/180,x=v*xi/180,_=o*(g+xi)/(2*xi),M=o*(xi-Math.log(Math.tan(xi/4+x*.5)))/(2*xi);return u=u||[],u[0]=_,u[1]=M,u},unprojectFromTile:function(e,o){return this.unprojectOnTileWithScale(e,this.getScale()*zl,o)},unprojectOnTileWithScale:function(e,o,u){var c=e[0],v=e[1],g=c/o*(2*xi)-xi,x=2*(Math.atan(Math.exp(xi-v/o*(2*xi)))-xi/4);return u=u||[],u[0]=g*180/xi,u[1]=x*180/xi,u},dataToPoint:function(e,o){return o=this.projectOnTileWithScale(e,zl,o),o[0]-=this._origin[0],o[1]-=this._origin[1],o[2]=isNaN(e[2])?0:e[2],isNaN(e[2])||(o[2]=e[2],this.altitudeExtent&&(o[2]-=this.altitudeExtent[0])),o}};var Vu=Oc;function Fl(){Vu.apply(this,arguments)}Fl.prototype=new Vu,Fl.prototype.constructor=Fl,Fl.prototype.type="mapbox3D";var Pg=Fl,Av=function(n,e,o){function u(v,g){var x=g.getWidth(),_=g.getHeight(),M=g.getDevicePixelRatio();this.viewGL.setViewport(0,0,x,_,M),this.width=x,this.height=_,this.altitudeScale=v.get("altitudeScale"),this.boxHeight=v.get("boxHeight")}function c(v,g){if(this.model.get("boxHeight")!=="auto"){var x=[Infinity,-Infinity];v.eachSeries(function(_){if(_.coordinateSystem===this){var M=_.getData(),I=_.coordDimToDataDim("alt")[0];if(I){var F=M.getDataExtent(I,!0);x[0]=Math.min(x[0],F[0]),x[1]=Math.max(x[1],F[1])}}},this),x&&isFinite(x[1]-x[0])&&(this.altitudeExtent=x)}}return{dimensions:e.prototype.dimensions,create:function(g,x){var _=[];return g.eachComponent(n,function(M){var I=M.__viewGL;I||(I=M.__viewGL=new uo,I.setRootNode(new se.Node));var F=new e;F.viewGL=M.__viewGL,F.resize=u,F.resize(M,x),_.push(F),M.coordinateSystem=F,F.model=M,F.update=c}),g.eachSeries(function(M){if(M.get("coordinateSystem")===n){var I=M.getReferringComponents(n).models[0];if(I||(I=g.getComponent(n)),!I)throw new Error(n+' "'+Kr.firstNotNull(M.get(n+"Index"),M.get(n+"Id"),0)+'" not found');M.coordinateSystem=I.coordinateSystem}}),o&&o(_,g,x),_}}},Mv=Av("mapbox3D",Pg,function(n){n.forEach(function(e){e.setCameraOption(e.model.getMapboxCameraOption())})}),Dv=Mv;function is(n){n.registerComponentModel(Sc),n.registerComponentView(Lg),n.registerCoordinateSystem("mapbox3D",Dv),n.registerAction({type:"mapbox3DChangeCamera",event:"mapbox3dcamerachanged",update:"mapbox3D:updateCamera"},function(e,o){o.eachComponent({mainType:"mapbox3D",query:e},function(u){u.setMapboxCameraOption(e)})})}Object(B.X)(is);var Us=["zoom","center","pitch","bearing"],ho=B.c.extend({type:"maptalks3D",layoutMode:"box",coordinateSystem:null,defaultOption:{zlevel:-10,urlTemplate:"http://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}.png",attribution:'&copy; <a href="http://osm.org">OpenStreetMap</a> contributors, &copy; <a href="https://carto.com/">CARTO</a>',center:[0,0],zoom:0,pitch:0,bearing:0,light:{main:{alpha:20,beta:30}},altitudeScale:1,boxHeight:"auto"},getMaptalksCameraOption:function(){var e=this;return Us.reduce(function(o,u){return o[u]=e.get(u),o},{})},setMaptalksCameraOption:function(e){e!=null&&Us.forEach(function(o){e[o]!=null&&(this.option[o]=e[o])},this)},getMaptalks:function(){return this._maptalks},setMaptalks:function(e){this._maptalks=e}});B.Y.merge(ho.prototype,As),B.Y.merge(ho.prototype,Xo);var wg=ho;function vo(n,e,o,u){if(this.id=n,this.zr=e,this.dom=document.createElement("div"),this.dom.style.cssText="position:absolute;left:0;right:0;top:0;bottom:0;",!maptalks)throw new Error("Maptalks library must be included. See https://maptalks.org");this._maptalks=new maptalks.Map(this.dom,{center:o,zoom:u,doubleClickZoom:!1,fog:!1}),this._initEvents()}vo.prototype.setUnpainted=function(){},vo.prototype.resize=function(){this._maptalks.checkSize()},vo.prototype.getMaptalks=function(){return this._maptalks},vo.prototype.clear=function(){},vo.prototype.refresh=function(){this._maptalks.checkSize()};var Cv=["mousedown","mouseup","click","dblclick","mousemove","mousewheel","DOMMouseScroll","touchstart","touchend","touchmove","touchcancel"];vo.prototype._initEvents=function(){var n=this.dom;this._handlers=this._handlers||{contextmenu:function(o){return o.preventDefault(),!1}},Cv.forEach(function(e){this._handlers[e]=function(o){var u={};for(var c in o)u[c]=o[c];u.bubbles=!1;var v=new o.constructor(o.type,u);e==="mousewheel"||e==="DOMMouseScroll"?n.dispatchEvent(v):n.firstElementChild.dispatchEvent(v)},this.zr.dom.addEventListener(e,this._handlers[e])},this),this.zr.dom.addEventListener("contextmenu",this._handlers.contextmenu)},vo.prototype.dispose=function(){Cv.forEach(function(n){this.zr.dom.removeEventListener(n,this._handlers[n])},this),this._maptalks.remove()};var Ig=vo;se.Shader.import(_c);var Ev=B.d.extend({type:"maptalks3D",__ecgl__:!0,init:function(e,o){this._groundMesh=new se.Mesh({geometry:new se.PlaneGeometry,material:new se.Material({shader:new se.Shader({vertex:se.Shader.source("ecgl.displayShadow.vertex"),fragment:se.Shader.source("ecgl.displayShadow.fragment")}),depthMask:!1}),renderOrder:-100,culling:!1,castShadow:!1,$ignorePicking:!0,renderNormal:!0})},_initMaptalksLayer:function(e,o){var u=o.getZr();this._zrLayer=new Ig("maptalks3D",u,e.get("center"),e.get("zoom")),u.painter.insertLayer(-1e3,this._zrLayer),this._lightRoot=new se.Node,this._sceneHelper=new Ls(this._lightRoot),this._sceneHelper.initLight(this._lightRoot);var c=this._zrLayer.getMaptalks(),v=this._dispatchInteractAction.bind(this,o,c);["zoomend","zooming","zoomstart","dragrotating","pitch","pitchend","movestart","moving","moveend","resize","touchstart","touchmove","touchend","animating"].forEach(function(g){c.on(g,v)})},render:function(e,o,u){this._zrLayer||this._initMaptalksLayer(e,u);var c=this._zrLayer.getMaptalks(),v=e.get("urlTemplate"),g=c.getBaseLayer();v!==this._oldUrlTemplate&&(g?g.setOptions({urlTemplate:v,attribution:e.get("attribution")}):(g=new maptalks.TileLayer("maptalks-echarts-gl-baselayer",{urlTemplate:v,subdomains:["a","b","c"],attribution:e.get("attribution")}),c.setBaseLayer(g))),this._oldUrlTemplate=v,c.setCenter(e.get("center")),c.setZoom(e.get("zoom"),{animation:!1}),c.setPitch(e.get("pitch")),c.setBearing(e.get("bearing")),e.setMaptalks(c);var x=e.coordinateSystem;x.viewGL.scene.add(this._lightRoot),x.viewGL.add(this._groundMesh),this._updateGroundMesh(),this._sceneHelper.setScene(x.viewGL.scene),this._sceneHelper.updateLight(e),x.viewGL.setPostEffect(e.getModel("postEffect"),u),x.viewGL.setTemporalSuperSampling(e.getModel("temporalSuperSampling")),this._maptalks3DModel=e},afterRender:function(e,o,u,c){var v=c.renderer;this._sceneHelper.updateAmbientCubemap(v,e,u),this._sceneHelper.updateSkybox(v,e,u),e.coordinateSystem.viewGL.scene.traverse(function(g){g.material&&(g.material.define("fragment","NORMAL_UP_AXIS",2),g.material.define("fragment","NORMAL_FRONT_AXIS",1))})},updateCamera:function(e,o,u,c){e.coordinateSystem.setCameraOption(c),this._updateGroundMesh(),u.getZr().refresh()},_dispatchInteractAction:function(e,o,u){e.dispatchAction({type:"maptalks3DChangeCamera",pitch:o.getPitch(),zoom:Ng(o.getResolution())+1,center:o.getCenter().toArray(),bearing:o.getBearing(),maptalks3DId:this._maptalks3DModel&&this._maptalks3DModel.id})},_updateGroundMesh:function(){if(this._maptalks3DModel){var e=this._maptalks3DModel.coordinateSystem,o=e.dataToPoint(e.center);this._groundMesh.position.set(o[0],o[1],-.001);var u=new se.Plane(new se.Vector3(0,0,1),0),c=e.viewGL.camera.castRay(new se.Vector2(-1,-1)),v=e.viewGL.camera.castRay(new se.Vector2(1,1)),g=c.intersectPlane(u),x=v.intersectPlane(u),_=g.dist(x)/e.viewGL.rootNode.scale.x;this._groundMesh.scale.set(_,_,1)}},dispose:function(e,o){this._zrLayer&&this._zrLayer.dispose(),o.getZr().painter.delLayer(-1e3)}}),Rg=2*6378137*Math.PI/(256*Math.pow(2,20));function Ng(n){return 19-Math.log(n/Rg)/Math.LN2}function Hs(){Vu.apply(this,arguments),this.maxPitch=85,this.zoomOffset=1}Hs.prototype=new Vu,Hs.prototype.constructor=Hs,Hs.prototype.type="maptalks3D";var Bg=Hs,jg=Av("maptalks3D",Bg,function(n){n.forEach(function(e){e.setCameraOption(e.model.getMaptalksCameraOption())})}),Lv=jg;function Pv(n){n.registerComponentModel(wg),n.registerComponentView(Ev),n.registerCoordinateSystem("maptalks3D",Lv),n.registerAction({type:"maptalks3DChangeCamera",event:"maptalks3dcamerachanged",update:"maptalks3D:updateCamera"},function(e,o){o.eachComponent({mainType:"maptalks3D",query:e},function(u){u.setMaptalksCameraOption(e)})})}Object(B.X)(Pv);var wv=Hn.vec3,Iv=B.A.dataStack.isDimensionStacked;function Ac(n){var e=n[0],o=n[1];return!(e>0&&o>0||e<0&&o<0)}function Mc(n,e){var o=n.getData(),u=n.get("barSize");if(u==null){var c=e.size,v,g,x=e.getAxis("x"),_=e.getAxis("y");x.type==="category"?v=x.getBandWidth()*.7:v=Math.round(c[0]/Math.sqrt(o.count()))*.6,_.type==="category"?g=_.getBandWidth()*.7:g=Math.round(c[1]/Math.sqrt(o.count()))*.6,u=[v,g]}else B.Y.isArray(u)||(u=[u,u]);var M=e.getAxis("z").scale.getExtent(),I=Ac(M),F=["x","y","z"].map(function(Dt){return n.coordDimToDataDim(Dt)[0]}),ut=Iv(o,F[2]),yt=ut?o.getCalculationInfo("stackResultDimension"):F[2];o.each(F,function(Dt,Et,Pt,Ht){var $t=o.get(yt,Ht),qt=ut?$t-Pt:I?0:M[0],le=e.dataToPoint([Dt,Et,qt]),ie=e.dataToPoint([Dt,Et,$t]),he=wv.dist(le,ie),Re=[0,ie[1]<le[1]?-1:1,0];Math.abs(he)===0&&(he=.1);var ze=[u[0],he,u[1]];o.setItemLayout(Ht,[le,Re,ze])}),o.setLayout("orient",[1,0,0])}var Dc=Mc,Gu=function(n,e,o){for(var u=n.getDataExtent(e),c=n.getDataExtent(o),v=u[1]-u[0]||u[0],g=c[1]-c[0]||c[0],x=50,_=new Uint8Array(x*x),M=0;M<n.count();M++){var I=n.get(e,M),F=n.get(o,M),ut=Math.floor((I-u[0])/v*(x-1)),yt=Math.floor((F-c[0])/g*(x-1)),Dt=yt*x+ut;_[Dt]=_[Dt]||1}for(var Et=0,M=0;M<_.length;M++)_[M]&&Et++;return Et/_.length},Uu=Hn.vec3,as=B.A.dataStack.isDimensionStacked;function zg(n,e){var o=n.getData(),u=n.get("minHeight")||0,c=n.get("barSize"),v=["lng","lat","alt"].map(function(M){return n.coordDimToDataDim(M)[0]});if(c==null){var g=e.radius*Math.PI,x=Gu(o,v[0],v[1]);c=[g/Math.sqrt(o.count()/x),g/Math.sqrt(o.count()/x)]}else B.Y.isArray(c)||(c=[c,c]);var _=Hu(o,v);o.each(v,function(M,I,F,ut){var yt=o.get(_.dimension,ut),Dt=_.isStacked?yt-F:e.altitudeAxis.scale.getExtent()[0],Et=Math.max(e.altitudeAxis.dataToCoord(F),u),Pt=e.dataToPoint([M,I,Dt]),Ht=e.dataToPoint([M,I,yt]),$t=Uu.sub([],Ht,Pt);Uu.normalize($t,$t);var qt=[c[0],Et,c[1]];o.setItemLayout(ut,[Pt,$t,qt])}),o.setLayout("orient",or.UP.array)}function Rv(n,e){var o=n.getData(),u=n.get("barSize"),c=n.get("minHeight")||0,v=["lng","lat","alt"].map(function(I){return n.coordDimToDataDim(I)[0]});if(u==null){var g=Math.min(e.size[0],e.size[2]),x=Gu(o,v[0],v[1]);u=[g/Math.sqrt(o.count()/x),g/Math.sqrt(o.count()/x)]}else B.Y.isArray(u)||(u=[u,u]);var _=[0,1,0],M=Hu(o,v);o.each(v,function(I,F,ut,yt){var Dt=o.get(M.dimension,yt),Et=M.isStacked?Dt-ut:e.altitudeAxis.scale.getExtent()[0],Pt=Math.max(e.altitudeAxis.dataToCoord(ut),c),Ht=e.dataToPoint([I,F,Et]),$t=[u[0],Pt,u[1]];o.setItemLayout(yt,[Ht,_,$t])}),o.setLayout("orient",[1,0,0])}function Nv(n,e){var o=n.getData(),u=n.coordDimToDataDim("lng")[0],c=n.coordDimToDataDim("lat")[0],v=n.coordDimToDataDim("alt")[0],g=n.get("barSize"),x=n.get("minHeight")||0;if(g==null){var _=o.getDataExtent(u),M=o.getDataExtent(c),I=e.dataToPoint([_[0],M[0]]),F=e.dataToPoint([_[1],M[1]]),ut=Math.min(Math.abs(I[0]-F[0]),Math.abs(I[1]-F[1]))||1,yt=Gu(o,u,c);g=[ut/Math.sqrt(o.count()/yt),ut/Math.sqrt(o.count()/yt)]}else B.Y.isArray(g)||(g=[g,g]),g[0]/=e.getScale()/16,g[1]/=e.getScale()/16;var Dt=[0,0,1],Et=[u,c,v],Pt=Hu(o,Et);o.each(Et,function(Ht,$t,qt,le){var ie=o.get(Pt.dimension,le),he=Pt.isStacked?ie-qt:0,Re=e.dataToPoint([Ht,$t,he]),ze=e.dataToPoint([Ht,$t,ie]),Pe=Math.max(ze[2]-Re[2],x),Ke=[g[0],Pe,g[1]];o.setItemLayout(le,[Re,Dt,Ke])}),o.setLayout("orient",[1,0,0])}function Hu(n,e){var o=as(n,e[2]);return{dimension:o?n.getCalculationInfo("stackResultDimension"):e[2],isStacked:o}}function Cc(n){n.registerLayout(function(e,o){e.eachSeriesByType("bar3D",function(u){var c=u.coordinateSystem,v=c&&c.type;v==="globe"?zg(u,c):v==="cartesian3D"?Dc(u,c):v==="geo3D"?Rv(u,c):(v==="mapbox3D"||v==="maptalks3D")&&Nv(u,c)})})}var aa={};aa.getFormattedLabel=function(n,e,o,u,c){o=o||"normal";var v=n.getData(u),g=v.getItemModel(e),x=n.getDataParams(e,u);c!=null&&x.value instanceof Array&&(x.value=x.value[c]);var _=g.get(o==="normal"?["label","formatter"]:["emphasis","label","formatter"]);_==null&&(_=g.get(["label","formatter"]));var M;return typeof _=="function"?(x.status=o,M=_(x)):typeof _=="string"&&(M=B.u.formatTpl(_,x)),M},aa.normalizeToArray=function(n){return n instanceof Array?n:n==null?[]:[n]};var po=aa;function Bv(n,e){var o=[];return B.Y.each(n.dimensions,function(u){var c=n.getDimensionInfo(u),v=c.otherDims,g=v[e];g!=null&&g!==!1&&(o[g]=c.name)}),o}var Vl=function(n,e,o){function u(F){var ut=!0,yt=[],Dt=Bv(c,"tooltip");Dt.length?B.Y.each(Dt,function(Pt){Et(c.get(Pt,e),Pt)}):B.Y.each(F,Et);function Et(Pt,Ht){var $t=c.getDimensionInfo(Ht);if(!(!$t||$t.otherDims.tooltip===!1)){var qt=$t.type,le=(ut?"- "+($t.tooltipName||$t.name)+": ":"")+(qt==="ordinal"?Pt+"":qt==="time"?o?"":B.u.formatTime("yyyy/MM/dd hh:mm:ss",Pt):B.u.addCommas(Pt));le&&yt.push(B.u.encodeHTML(le))}}return(ut?"<br/>":"")+yt.join(ut?"<br/>":", ")}var c=n.getData(),v=n.getRawValue(e),g=B.Y.isArray(v)?u(v):B.u.encodeHTML(B.u.addCommas(v)),x=c.getName(e),_=kn(c,e);B.Y.isObject(_)&&_.colorStops&&(_=(_.colorStops[0]||{}).color),_=_||"transparent";var M=B.u.getTooltipMarker(_),I=n.name;return I==="\0-"&&(I=""),I=I?B.u.encodeHTML(I)+(o?": ":"<br/>"):"",o?M+I+g:I+M+(x?B.u.encodeHTML(x)+": "+g:g)},Ws=function(n,e,o){o=o||n.getSource();var u=e||B.v(n.get("coordinateSystem"))||["x","y","z"],c=B.A.createDimensions(o,{dimensionsDefine:o.dimensionsDefine||n.get("dimensions"),encodeDefine:o.encodeDefine||n.get("encode"),coordDimensions:u.map(function(x){var _=n.getReferringComponents(x+"Axis3D").models[0];return{type:_&&_.get("type")==="category"?"ordinal":"float",name:x}})});n.get("coordinateSystem")==="cartesian3D"&&c.forEach(function(x){if(u.indexOf(x.coordDim)>=0){var _=n.getReferringComponents(x.coordDim+"Axis3D").models[0];_&&_.get("type")==="category"&&(x.ordinalMeta=_.getOrdinalMeta())}});var v=B.A.dataStack.enableDataStack(n,c,{byIndex:!0,stackedCoordDimension:"z"}),g=new B.e(c,n);return g.setCalculationInfo(v),g.initData(o),g},jv=B.h.extend({type:"series.bar3D",dependencies:["globe"],visualStyleAccessPathvisu:"itemStyle",getInitialData:function(e,o){return Ws(this)},getFormattedLabel:function(e,o,u,c){var v=po.getFormattedLabel(this,e,o,u,c);return v==null&&(v=this.getData().get("z",e)),v},formatTooltip:function(e){return Vl(this,e)},defaultOption:{coordinateSystem:"cartesian3D",globeIndex:0,grid3DIndex:0,zlevel:-10,bevelSize:0,bevelSmoothness:2,onGridPlane:"xy",shading:"color",minHeight:0,itemStyle:{opacity:1},label:{show:!1,distance:2,textStyle:{fontSize:14,color:"#000",backgroundColor:"rgba(255,255,255,0.7)",padding:3,borderRadius:3}},emphasis:{label:{show:!0}},animationDurationUpdate:500}});B.Y.merge(jv.prototype,fo);var zv=jv,Rn=Hn.vec3,Fv=Hn.mat3,Gl=$r.extend(function(){return{attributes:{position:new $r.Attribute("position","float",3,"POSITION"),normal:new $r.Attribute("normal","float",3,"NORMAL"),color:new $r.Attribute("color","float",4,"COLOR"),prevPosition:new $r.Attribute("prevPosition","float",3),prevNormal:new $r.Attribute("prevNormal","float",3)},dynamic:!0,enableNormal:!1,bevelSize:1,bevelSegments:0,_dataIndices:null,_vertexOffset:0,_triangleOffset:0}},{resetOffset:function(){this._vertexOffset=0,this._triangleOffset=0},setBarCount:function(e){var o=this.enableNormal,u=this.getBarVertexCount()*e,c=this.getBarTriangleCount()*e;this.vertexCount!==u&&(this.attributes.position.init(u),o?this.attributes.normal.init(u):this.attributes.normal.value=null,this.attributes.color.init(u)),this.triangleCount!==c&&(this.indices=u>65535?new Uint32Array(c*3):new Uint16Array(c*3),this._dataIndices=new Uint32Array(u))},getBarVertexCount:function(){var e=this.bevelSize>0?this.bevelSegments:0;return e>0?this._getBevelBarVertexCount(e):this.enableNormal?24:8},getBarTriangleCount:function(){var e=this.bevelSize>0?this.bevelSegments:0;return e>0?this._getBevelBarTriangleCount(e):12},_getBevelBarVertexCount:function(e){return(e+1)*4*(e+1)*2},_getBevelBarTriangleCount:function(e){var o=e*4+3,u=e*2+1;return(o+1)*u*2+4},setColor:function(e,o){for(var u=this.getBarVertexCount(),c=u*e,v=u*(e+1),g=c;g<v;g++)this.attributes.color.set(g,o);this.dirtyAttribute("color")},getDataIndexOfVertex:function(e){return this._dataIndices?this._dataIndices[e]:null},addBar:function(){for(var n=Rn.create,e=Rn.scaleAndAdd,o=n(),u=n(),c=n(),v=n(),g=n(),x=n(),_=n(),M=[],I=[],F=0;F<8;F++)M[F]=n();for(var ut=[[0,1,5,4],[2,3,7,6],[4,5,6,7],[3,2,1,0],[0,4,7,3],[1,2,6,5]],yt=[0,1,2,0,2,3],Dt=[],F=0;F<ut.length;F++)for(var Et=ut[F],Pt=0;Pt<2;Pt++){for(var Ht=[],$t=0;$t<3;$t++)Ht.push(Et[yt[Pt*3+$t]]);Dt.push(Ht)}return function(qt,le,ie,he,Re,ze){var Pe=this._vertexOffset;if(this.bevelSize>0&&this.bevelSegments>0)this._addBevelBar(qt,le,ie,he,this.bevelSize,this.bevelSegments,Re);else{Rn.copy(c,le),Rn.normalize(c,c),Rn.cross(v,ie,c),Rn.normalize(v,v),Rn.cross(u,c,v),Rn.normalize(v,v),Rn.negate(g,u),Rn.negate(x,c),Rn.negate(_,v),e(M[0],qt,u,he[0]/2),e(M[0],M[0],v,he[2]/2),e(M[1],qt,u,he[0]/2),e(M[1],M[1],_,he[2]/2),e(M[2],qt,g,he[0]/2),e(M[2],M[2],_,he[2]/2),e(M[3],qt,g,he[0]/2),e(M[3],M[3],v,he[2]/2),e(o,qt,c,he[1]),e(M[4],o,u,he[0]/2),e(M[4],M[4],v,he[2]/2),e(M[5],o,u,he[0]/2),e(M[5],M[5],_,he[2]/2),e(M[6],o,g,he[0]/2),e(M[6],M[6],_,he[2]/2),e(M[7],o,g,he[0]/2),e(M[7],M[7],v,he[2]/2);var Ke=this.attributes;if(this.enableNormal){I[0]=u,I[1]=g,I[2]=c,I[3]=x,I[4]=v,I[5]=_;for(var rr=this._vertexOffset,Ue=0;Ue<ut.length;Ue++){for(var hr=this._triangleOffset*3,ke=0;ke<6;ke++)this.indices[hr++]=rr+yt[ke];rr+=4,this._triangleOffset+=2}for(var Ue=0;Ue<ut.length;Ue++)for(var Lr=I[Ue],ke=0;ke<4;ke++){var yr=ut[Ue][ke];Ke.position.set(this._vertexOffset,M[yr]),Ke.normal.set(this._vertexOffset,Lr),Ke.color.set(this._vertexOffset++,Re)}}else{for(var Ue=0;Ue<Dt.length;Ue++){for(var hr=this._triangleOffset*3,ke=0;ke<3;ke++)this.indices[hr+ke]=Dt[Ue][ke]+this._vertexOffset;this._triangleOffset++}for(var Ue=0;Ue<M.length;Ue++)Ke.position.set(this._vertexOffset,M[Ue]),Ke.color.set(this._vertexOffset++,Re)}}for(var xr=this._vertexOffset,Ue=Pe;Ue<xr;Ue++)this._dataIndices[Ue]=ze}}(),_addBevelBar:function(){var n=Rn.create(),e=Rn.create(),o=Rn.create(),u=Fv.create(),c=[],v=[1,-1,-1,1],g=[1,1,-1,-1],x=[2,0];return function(_,M,I,F,ut,yt,Dt){Rn.copy(e,M),Rn.normalize(e,e),Rn.cross(o,I,e),Rn.normalize(o,o),Rn.cross(n,e,o),Rn.normalize(o,o),u[0]=n[0],u[1]=n[1],u[2]=n[2],u[3]=e[0],u[4]=e[1],u[5]=e[2],u[6]=o[0],u[7]=o[1],u[8]=o[2],ut=Math.min(F[0],F[2])/2*ut;for(var Et=0;Et<3;Et++)c[Et]=Math.max(F[Et]-ut*2,0);for(var Pt=(F[0]-c[0])/2,Ht=(F[1]-c[1])/2,$t=(F[2]-c[2])/2,qt=[],le=[],ie=this._vertexOffset,he=[],Et=0;Et<2;Et++){he[Et]=he[Et]=[];for(var Re=0;Re<=yt;Re++)for(var ze=0;ze<4;ze++){(Re===0&&Et===0||Et===1&&Re===yt)&&he[Et].push(ie);for(var Pe=0;Pe<=yt;Pe++){var Ke=Pe/yt*Math.PI/2+Math.PI/2*ze,rr=Re/yt*Math.PI/2+Math.PI/2*Et;le[0]=Pt*Math.cos(Ke)*Math.sin(rr),le[1]=Ht*Math.cos(rr),le[2]=$t*Math.sin(Ke)*Math.sin(rr),qt[0]=le[0]+v[ze]*c[0]/2,qt[1]=le[1]+Ht+x[Et]*c[1]/2,qt[2]=le[2]+g[ze]*c[2]/2,Math.abs(Pt-Ht)<1e-6&&Math.abs(Ht-$t)<1e-6||(le[0]/=Pt*Pt,le[1]/=Ht*Ht,le[2]/=$t*$t),Rn.normalize(le,le),Rn.transformMat3(qt,qt,u),Rn.transformMat3(le,le,u),Rn.add(qt,qt,_),this.attributes.position.set(ie,qt),this.enableNormal&&this.attributes.normal.set(ie,le),this.attributes.color.set(ie,Dt),ie++}}}for(var Ue=yt*4+3,hr=yt*2+1,ke=Ue+1,ze=0;ze<hr;ze++)for(var Et=0;Et<=Ue;Et++){var Lr=ze*ke+Et+this._vertexOffset,yr=ze*ke+(Et+1)%ke+this._vertexOffset,xr=(ze+1)*ke+(Et+1)%ke+this._vertexOffset,Sr=(ze+1)*ke+Et+this._vertexOffset;this.setTriangleIndices(this._triangleOffset++,[xr,Lr,yr]),this.setTriangleIndices(this._triangleOffset++,[xr,Sr,Lr])}this.setTriangleIndices(this._triangleOffset++,[he[0][0],he[0][2],he[0][1]]),this.setTriangleIndices(this._triangleOffset++,[he[0][0],he[0][3],he[0][2]]),this.setTriangleIndices(this._triangleOffset++,[he[1][0],he[1][1],he[1][2]]),this.setTriangleIndices(this._triangleOffset++,[he[1][0],he[1][2],he[1][3]]),this._vertexOffset=ie}}()});B.Y.defaults(Gl.prototype,Cs),B.Y.defaults(Gl.prototype,Nl);var Fg=Gl,Vg=Hn.vec3,Ec=B.b.extend({type:"bar3D",__ecgl__:!0,init:function(e,o){this.groupGL=new se.Node,this._api=o,this._labelsBuilder=new ju(256,256,o);var u=this;this._labelsBuilder.getLabelPosition=function(c,v,g){if(u._data){var x=u._data.getItemLayout(c),_=x[0],M=x[1],I=x[2][1];return Vg.scaleAndAdd([],_,M,g+I)}else return[0,0]},this._labelsBuilder.getMesh().renderOrder=100},render:function(e,o,u){var c=this._prevBarMesh;this._prevBarMesh=this._barMesh,this._barMesh=c,this._barMesh||(this._barMesh=new se.Mesh({geometry:new Fg,shadowDepthMaterial:new se.Material({shader:new se.Shader(se.Shader.source("ecgl.sm.depth.vertex"),se.Shader.source("ecgl.sm.depth.fragment"))}),culling:e.coordinateSystem.type==="cartesian3D",renderOrder:10,renderNormal:!0})),this.groupGL.remove(this._prevBarMesh),this.groupGL.add(this._barMesh),this.groupGL.add(this._labelsBuilder.getMesh());var v=e.coordinateSystem;if(this._doRender(e,u),v&&v.viewGL){v.viewGL.add(this.groupGL);var g=v.viewGL.isLinearSpace()?"define":"undefine";this._barMesh.material[g]("fragment","SRGB_DECODE")}this._data=e.getData(),this._labelsBuilder.updateData(this._data),this._labelsBuilder.updateLabels(),this._updateAnimation(e)},_updateAnimation:function(e){se.updateVertexAnimation([["prevPosition","position"],["prevNormal","normal"]],this._prevBarMesh,this._barMesh,e)},_doRender:function(e,o){var u=e.getData(),c=e.get("shading"),v=c!=="color",g=this,x=this._barMesh,_="ecgl."+c;(!x.material||x.material.shader.name!==_)&&(x.material=se.createMaterial(_,["VERTEX_COLOR"])),se.setMaterialFromModel(c,x.material,e,o),x.geometry.enableNormal=v,x.geometry.resetOffset();var M=e.get("bevelSize"),I=e.get("bevelSmoothness");x.geometry.bevelSegments=I,x.geometry.bevelSize=M;var F=[],ut=new Float32Array(u.count()*4),yt=0,Dt=0,Et=!1;u.each(function(qt){if(!!u.hasValue(qt)){var le=kn(u,qt),ie=Qn(u,qt);ie==null&&(ie=1),se.parseColor(le,F),F[3]*=ie,ut[yt++]=F[0],ut[yt++]=F[1],ut[yt++]=F[2],ut[yt++]=F[3],F[3]>0&&(Dt++,F[3]<.99&&(Et=!0))}}),x.geometry.setBarCount(Dt);var Pt=u.getLayout("orient"),Ht=this._barIndexOfData=new Int32Array(u.count()),Dt=0;u.each(function(qt){if(!u.hasValue(qt)){Ht[qt]=-1;return}var le=u.getItemLayout(qt),ie=le[0],he=le[1],Re=le[2],ze=qt*4;F[0]=ut[ze++],F[1]=ut[ze++],F[2]=ut[ze++],F[3]=ut[ze++],F[3]>0&&(g._barMesh.geometry.addBar(ie,he,Pt,Re,F,qt),Ht[qt]=Dt++)}),x.geometry.dirty(),x.geometry.updateBoundingBox();var $t=x.material;$t.transparent=Et,$t.depthMask=!Et,x.geometry.sortTriangles=Et,this._initHandler(e,o)},_initHandler:function(e,o){var u=e.getData(),c=this._barMesh,v=e.coordinateSystem.type==="cartesian3D";c.seriesIndex=e.seriesIndex;var g=-1;c.off("mousemove"),c.off("mouseout"),c.on("mousemove",function(x){var _=c.geometry.getDataIndexOfVertex(x.triangle[0]);_!==g&&(this._downplay(g),this._highlight(_),this._labelsBuilder.updateLabels([_]),v&&o.dispatchAction({type:"grid3DShowAxisPointer",value:[u.get("x",_),u.get("y",_),u.get("z",_,!0)]})),g=_,c.dataIndex=_},this),c.on("mouseout",function(x){this._downplay(g),this._labelsBuilder.updateLabels(),g=-1,c.dataIndex=-1,v&&o.dispatchAction({type:"grid3DHideAxisPointer"})},this)},_highlight:function(e){var o=this._data;if(!!o){var u=this._barIndexOfData[e];if(!(u<0)){var c=o.getItemModel(e),v=c.getModel("emphasis.itemStyle"),g=v.get("color"),x=v.get("opacity");if(g==null){var _=kn(o,e);g=B.i.lift(_,-.4)}x==null&&(x=Qn(o,e));var M=se.parseColor(g);M[3]*=x,this._barMesh.geometry.setColor(u,M),this._api.getZr().refresh()}}},_downplay:function(e){var o=this._data;if(!!o){var u=this._barIndexOfData[e];if(!(u<0)){var c=kn(o,e),v=Qn(o,e),g=se.parseColor(c);g[3]*=v,this._barMesh.geometry.setColor(u,g),this._api.getZr().refresh()}}},highlight:function(e,o,u,c){this._toggleStatus("highlight",e,o,u,c)},downplay:function(e,o,u,c){this._toggleStatus("downplay",e,o,u,c)},_toggleStatus:function(e,o,u,c,v){var g=o.getData(),x=Kr.queryDataIndex(g,v),_=this;x!=null?B.Y.each(po.normalizeToArray(x),function(M){e==="highlight"?this._highlight(M):this._downplay(M)},this):g.each(function(M){e==="highlight"?_._highlight(M):_._downplay(M)})},remove:function(){this.groupGL.removeAll()},dispose:function(){this.groupGL.removeAll()}});function Lc(n){n.registerChartView(Ec),n.registerSeriesModel(zv),Cc(n),n.registerProcessor(function(e,o){e.eachSeriesByType("bar3d",function(u){var c=u.getData();c.filterSelf(function(v){return c.hasValue(v)})})})}Object(B.X)(Lc);var Vv=B.h.extend({type:"series.line3D",dependencies:["grid3D"],visualStyleAccessPath:"lineStyle",visualDrawType:"stroke",getInitialData:function(e,o){return Ws(this)},formatTooltip:function(e){return Vl(this,e)},defaultOption:{coordinateSystem:"cartesian3D",zlevel:-10,grid3DIndex:0,lineStyle:{width:2},animationDurationUpdate:500}}),Gv=Vv,Gg=S("loD1"),Uv=Hn.vec3;se.Shader.import(Au);var Ug=B.b.extend({type:"line3D",__ecgl__:!0,init:function(e,o){this.groupGL=new se.Node,this._api=o},render:function(e,o,u){var c=this._prevLine3DMesh;this._prevLine3DMesh=this._line3DMesh,this._line3DMesh=c,this._line3DMesh||(this._line3DMesh=new se.Mesh({geometry:new Zo({useNativeLine:!1,sortTriangles:!0}),material:new se.Material({shader:se.createShader("ecgl.meshLines3D")}),renderOrder:10}),this._line3DMesh.geometry.pick=this._pick.bind(this)),this.groupGL.remove(this._prevLine3DMesh),this.groupGL.add(this._line3DMesh);var v=e.coordinateSystem;if(v&&v.viewGL){v.viewGL.add(this.groupGL);var g=v.viewGL.isLinearSpace()?"define":"undefine";this._line3DMesh.material[g]("fragment","SRGB_DECODE")}this._doRender(e,u),this._data=e.getData(),this._camera=v.viewGL.camera,this.updateCamera(),this._updateAnimation(e)},updateCamera:function(){this._updateNDCPosition()},_doRender:function(e,o){var u=e.getData(),c=this._line3DMesh;c.geometry.resetOffset();var v=u.getLayout("points"),g=[],x=new Float32Array(v.length/3*4),_=0,M=!1;u.each(function(ut){var yt=kn(u,ut),Dt=Qn(u,ut);Dt==null&&(Dt=1),se.parseColor(yt,g),g[3]*=Dt,x[_++]=g[0],x[_++]=g[1],x[_++]=g[2],x[_++]=g[3],g[3]<.99&&(M=!0)}),c.geometry.setVertexCount(c.geometry.getPolylineVertexCount(v)),c.geometry.setTriangleCount(c.geometry.getPolylineTriangleCount(v)),c.geometry.addPolyline(v,x,Kr.firstNotNull(e.get("lineStyle.width"),1)),c.geometry.dirty(),c.geometry.updateBoundingBox();var I=c.material;I.transparent=M,I.depthMask=!M;var F=e.getModel("debug.wireframe");F.get("show")?(c.geometry.createAttribute("barycentric","float",3),c.geometry.generateBarycentric(),c.material.set("both","WIREFRAME_TRIANGLE"),c.material.set("wireframeLineColor",se.parseColor(F.get("lineStyle.color")||"rgba(0,0,0,0.5)")),c.material.set("wireframeLineWidth",Kr.firstNotNull(F.get("lineStyle.width"),1))):c.material.set("both","WIREFRAME_TRIANGLE"),this._points=v,this._initHandler(e,o)},_updateAnimation:function(e){se.updateVertexAnimation([["prevPosition","position"],["prevPositionPrev","positionPrev"],["prevPositionNext","positionNext"]],this._prevLine3DMesh,this._line3DMesh,e)},_initHandler:function(e,o){var u=e.getData(),c=e.coordinateSystem,v=this._line3DMesh,g=-1;v.seriesIndex=e.seriesIndex,v.off("mousemove"),v.off("mouseout"),v.on("mousemove",function(x){var _=c.pointToData(x.point.array),M=u.indicesOfNearest("x",_[0])[0];M!==g&&(o.dispatchAction({type:"grid3DShowAxisPointer",value:[u.get("x",M),u.get("y",M),u.get("z",M)]}),v.dataIndex=M),g=M},this),v.on("mouseout",function(x){g=-1,v.dataIndex=-1,o.dispatchAction({type:"grid3DHideAxisPointer"})},this)},_updateNDCPosition:function(){var e=new gr,o=this._camera;gr.multiply(e,o.projectionMatrix,o.viewMatrix);var u=this._positionNDC,c=this._points,v=c.length/3;(!u||u.length/2!==v)&&(u=this._positionNDC=new Float32Array(v*2));for(var g=[],x=0;x<v;x++){var _=x*3,M=x*2;g[0]=c[_],g[1]=c[_+1],g[2]=c[_+2],g[3]=1,Uv.transformMat4(g,g,e.array),u[M]=g[0]/g[3],u[M+1]=g[1]/g[3]}},_pick:function(e,o,u,c,v,g){var x=this._positionNDC,_=this._data.hostModel,M=_.get("lineStyle.width"),I=-1,F=u.viewport.width,ut=u.viewport.height,yt=F*.5,Dt=ut*.5;e=(e+1)*yt,o=(o+1)*Dt;for(var Et=1;Et<x.length/2;Et++){var Pt=(x[(Et-1)*2]+1)*yt,Ht=(x[(Et-1)*2+1]+1)*Dt,$t=(x[Et*2]+1)*yt,qt=(x[Et*2+1]+1)*Dt;if(Gg.a(Pt,Ht,$t,qt,M,e,o)){var le=(Pt-e)*(Pt-e)+(Ht-o)*(Ht-o),ie=($t-e)*($t-e)+(qt-o)*(qt-o);I=le<ie?Et-1:Et}}if(I>=0){var he=I*3,Re=new or(this._points[he],this._points[he+1],this._points[he+2]);g.push({dataIndex:I,point:Re,pointWorld:Re.clone(),target:this._line3DMesh,distance:this._camera.getWorldPosition().dist(Re)})}},remove:function(){this.groupGL.removeAll()},dispose:function(){this.groupGL.removeAll()}});function Wu(n){n.registerChartView(Ug),n.registerSeriesModel(Gv),n.registerLayout(function(e,o){e.eachSeriesByType("line3D",function(u){var c=u.getData(),v=u.coordinateSystem;if(v){if(v.type!=="cartesian3D")return;var g=new Float32Array(c.count()*3),x=[],_=[],M=v.dimensions,I=M.map(function(F){return u.coordDimToDataDim(F)[0]});v&&c.each(I,function(F,ut,yt,Dt){x[0]=F,x[1]=ut,x[2]=yt,v.dataToPoint(x,_),g[Dt*3]=_[0],g[Dt*3+1]=_[1],g[Dt*3+2]=_[2]}),c.setLayout("points",g)}})})}Object(B.X)(Wu);var Hv=B.h.extend({type:"series.scatter3D",dependencies:["globe","grid3D","geo3D"],visualStyleAccessPath:"itemStyle",hasSymbolVisual:!0,getInitialData:function(e,o){return Ws(this)},getFormattedLabel:function(e,o,u,c){var v=po.getFormattedLabel(this,e,o,u,c);if(v==null){var g=this.getData(),x=g.dimensions[g.dimensions.length-1];v=g.get(x,e)}return v},formatTooltip:function(e){return Vl(this,e)},defaultOption:{coordinateSystem:"cartesian3D",zlevel:-10,progressive:1e5,progressiveThreshold:1e5,grid3DIndex:0,globeIndex:0,symbol:"circle",symbolSize:10,blendMode:"source-over",label:{show:!1,position:"right",distance:5,textStyle:{fontSize:14,color:"#000",backgroundColor:"rgba(255,255,255,0.7)",padding:3,borderRadius:3}},itemStyle:{opacity:.8},emphasis:{label:{show:!0}},animationDurationUpdate:500}});function Ul(n,e,o){var e=e||document.createElement("canvas");e.width=n,e.height=n;var u=e.getContext("2d");return o&&o(u),e}function Wv(n,e,o,u){B.Y.isArray(e)||(e=[e,e]);var c=Yu.getMarginByStyle(o,u),v=e[0]+c.left+c.right,g=e[1]+c.top+c.bottom,x=B.A.createSymbol(n,0,0,e[0],e[1]),_=Math.max(v,g);x.x=c.left,x.y=c.top,v>g?x.y+=(_-g)/2:x.x+=(_-v)/2;var M=x.getBoundingRect();return x.x-=M.x,x.y-=M.y,x.setStyle(o),x.update(),x.__size=_,x}function Yv(n,e,o){var u=e.width,c=e.height,v=n.canvas.width,g=n.canvas.height,x=u/v,_=c/g;function M(Ht){return Ht<128?1:-1}function I(Ht,$t){var qt=Infinity;Ht=Math.floor(Ht*x),$t=Math.floor($t*_);for(var le=$t*u+Ht,ie=e.data[le*4],he=M(ie),Re=Math.max($t-o,0);Re<Math.min($t+o,c);Re++)for(var ze=Math.max(Ht-o,0);ze<Math.min(Ht+o,u);ze++){var le=Re*u+ze,Pe=e.data[le*4],Ke=M(Pe),rr=ze-Ht,Ue=Re-$t;if(he!==Ke){var hr=rr*rr+Ue*Ue;hr<qt&&(qt=hr)}}return he*Math.sqrt(qt)}for(var F=n.createImageData(v,g),ut=0;ut<g;ut++)for(var yt=0;yt<v;yt++){var Dt=I(yt,ut),Et=Dt/o*.5+.5,Pt=(ut*v+yt)*4;F.data[Pt++]=(1-Et)*255,F.data[Pt++]=(1-Et)*255,F.data[Pt++]=(1-Et)*255,F.data[Pt++]=255}return F}var Yu={getMarginByStyle:function(e){var o=e.minMargin||0,u=0;e.stroke&&e.stroke!=="none"&&(u=e.lineWidth==null?1:e.lineWidth);var c=e.shadowBlur||0,v=e.shadowOffsetX||0,g=e.shadowOffsetY||0,x={};return x.left=Math.max(u/2,-v+c,o),x.right=Math.max(u/2,v+c,o),x.top=Math.max(u/2,-g+c,o),x.bottom=Math.max(u/2,g+c,o),x},createSymbolSprite:function(e,o,u,c){var v=Wv(e,o,u),g=Yu.getMarginByStyle(u);return{image:Ul(v.__size,c,function(x){B.C(x,v)}),margin:g}},createSDFFromCanvas:function(e,o,u,c){return Ul(o,c,function(v){var g=e.getContext("2d"),x=g.getImageData(0,0,e.width,e.height);v.putImageData(Yv(v,x,u),0,0)})},createSimpleSprite:function(e,o){return Ul(e,o,function(u){var c=e/2;u.beginPath(),u.arc(c,c,60,0,Math.PI*2,!1),u.closePath();var v=u.createRadialGradient(c,c,0,c,c,c);v.addColorStop(0,"rgba(255, 255, 255, 1)"),v.addColorStop(.5,"rgba(255, 255, 255, 0.5)"),v.addColorStop(1,"rgba(255, 255, 255, 0)"),u.fillStyle=v,u.fill()})}},Xu=Yu,Xv=Hn.vec3,Hg={needsSortVertices:function(){return this.sortVertices},needsSortVerticesProgressively:function(){return this.needsSortVertices()&&this.vertexCount>=2e4},doSortVertices:function(e,o){var u=this.indices,c=Xv.create();if(!u){u=this.indices=this.vertexCount>65535?new Uint32Array(this.vertexCount):new Uint16Array(this.vertexCount);for(var v=0;v<u.length;v++)u[v]=v}if(o===0){var g=this.attributes.position,e=e.array,x=0;(!this._zList||this._zList.length!==this.vertexCount)&&(this._zList=new Float32Array(this.vertexCount));for(var _,v=0;v<this.vertexCount;v++){g.get(v,c);var M=Xv.sqrDist(c,e);isNaN(M)&&(M=1e7,x++),v===0?(_=M,M=0):M=M-_,this._zList[v]=M}this._noneCount=x}if(this.vertexCount<2e4)o===0&&this._simpleSort(this._noneCount/this.vertexCount>.05);else for(var v=0;v<3;v++)this._progressiveQuickSort(o*3+v);this.dirtyIndices()},_simpleSort:function(e){var o=this._zList,u=this.indices;function c(v,g){return o[g]-o[v]}e?Array.prototype.sort.call(u,c):zs.sort(u,c,0,u.length-1)},_progressiveQuickSort:function(e){var o=this._zList,u=this.indices;this._quickSort=this._quickSort||new zs,this._quickSort.step(u,function(c,v){return o[v]-o[c]},e)}},Wg=`@export ecgl.sdfSprite.vertex

uniform mat4 worldViewProjection : WORLDVIEWPROJECTION;
uniform float elapsedTime : 0;

attribute vec3 position : POSITION;

#ifdef VERTEX_SIZE
attribute float size;
#else
uniform float u_Size;
#endif

#ifdef VERTEX_COLOR
attribute vec4 a_FillColor: COLOR;
varying vec4 v_Color;
#endif

#ifdef VERTEX_ANIMATION
attribute vec3 prevPosition;
attribute float prevSize;
uniform float percent : 1.0;
#endif


#ifdef POSITIONTEXTURE_ENABLED
uniform sampler2D positionTexture;
#endif

varying float v_Size;

void main()
{

#ifdef POSITIONTEXTURE_ENABLED
 gl_Position = worldViewProjection * vec4(texture2D(positionTexture, position.xy).xy, -10.0, 1.0);
#else

 #ifdef VERTEX_ANIMATION
 vec3 pos = mix(prevPosition, position, percent);
 #else
 vec3 pos = position;
 #endif
 gl_Position = worldViewProjection * vec4(pos, 1.0);
#endif

#ifdef VERTEX_SIZE
#ifdef VERTEX_ANIMATION
 v_Size = mix(prevSize, size, percent);
#else
 v_Size = size;
#endif
#else
 v_Size = u_Size;
#endif

#ifdef VERTEX_COLOR
 v_Color = a_FillColor;
 #endif

 gl_PointSize = v_Size;
}

@end

@export ecgl.sdfSprite.fragment

uniform vec4 color: [1, 1, 1, 1];
uniform vec4 strokeColor: [1, 1, 1, 1];
uniform float smoothing: 0.07;

uniform float lineWidth: 0.0;

#ifdef VERTEX_COLOR
varying vec4 v_Color;
#endif

varying float v_Size;

uniform sampler2D sprite;

@import clay.util.srgb

void main()
{
 gl_FragColor = color;

 vec4 _strokeColor = strokeColor;

#ifdef VERTEX_COLOR
 gl_FragColor *= v_Color;
 #endif

#ifdef SPRITE_ENABLED
 float d = texture2D(sprite, gl_PointCoord).r;
 gl_FragColor.a *= smoothstep(0.5 - smoothing, 0.5 + smoothing, d);

 if (lineWidth > 0.0) {
 float sLineWidth = lineWidth / 2.0;

 float outlineMaxValue0 = 0.5 + sLineWidth;
 float outlineMaxValue1 = 0.5 + sLineWidth + smoothing;
 float outlineMinValue0 = 0.5 - sLineWidth - smoothing;
 float outlineMinValue1 = 0.5 - sLineWidth;

 if (d <= outlineMaxValue1 && d >= outlineMinValue0) {
 float a = _strokeColor.a;
 if (d <= outlineMinValue1) {
 a = a * smoothstep(outlineMinValue0, outlineMinValue1, d);
 }
 else {
 a = a * smoothstep(outlineMaxValue1, outlineMaxValue0, d);
 }
 gl_FragColor.rgb = mix(gl_FragColor.rgb * gl_FragColor.a, _strokeColor.rgb, a);
 gl_FragColor.a = gl_FragColor.a * (1.0 - a) + a;
 }
 }
#endif

#ifdef SRGB_DECODE
 gl_FragColor = sRGBToLinear(gl_FragColor);
#endif
}
@end`,Pc=Hn.vec4;se.Shader.import(Wg);var Yg=se.Mesh.extend(function(){var n=new se.Geometry({dynamic:!0,attributes:{color:new se.Geometry.Attribute("color","float",4,"COLOR"),position:new se.Geometry.Attribute("position","float",3,"POSITION"),size:new se.Geometry.Attribute("size","float",1),prevPosition:new se.Geometry.Attribute("prevPosition","float",3),prevSize:new se.Geometry.Attribute("prevSize","float",1)}});Object.assign(n,Hg);var e=new se.Material({shader:se.createShader("ecgl.sdfSprite"),transparent:!0,depthMask:!1});e.enableTexture("sprite"),e.define("both","VERTEX_COLOR"),e.define("both","VERTEX_SIZE");var o=new se.Texture2D({image:document.createElement("canvas"),flipY:!1});return e.set("sprite",o),n.pick=this._pick.bind(this),{geometry:n,material:e,mode:se.Mesh.POINTS,sizeScale:1}},{_pick:function(e,o,u,c,v,g){var x=this._positionNDC;if(!!x)for(var _=u.viewport,M=2/_.width,I=2/_.height,F=this.geometry.vertexCount-1;F>=0;F--){var ut;this.geometry.indices?ut=this.geometry.indices[F]:ut=F;var yt=x[ut*2],Dt=x[ut*2+1],Et=this.geometry.attributes.size.get(ut)/this.sizeScale,Pt=Et/2;if(e>yt-Pt*M&&e<yt+Pt*M&&o>Dt-Pt*I&&o<Dt+Pt*I){var Ht=new se.Vector3,$t=new se.Vector3;this.geometry.attributes.position.get(ut,Ht.array),se.Vector3.transformMat4($t,Ht,this.worldTransform),g.push({vertexIndex:ut,point:Ht,pointWorld:$t,target:this,distance:$t.distance(c.getWorldPosition())})}}},updateNDCPosition:function(e,o,u){var c=this._positionNDC,v=this.geometry;(!c||c.length/2!==v.vertexCount)&&(c=this._positionNDC=new Float32Array(v.vertexCount*2));for(var g=Pc.create(),x=0;x<v.vertexCount;x++)v.attributes.position.get(x,g),g[3]=1,Pc.transformMat4(g,g,e.array),Pc.scale(g,g,1/g[3]),c[x*2]=g[0],c[x*2+1]=g[1]}}),Xg=Yg,Zv=20,Kv=-10;function Zg(n,e){return n&&e&&n[0]===e[0]&&n[1]===e[1]}function Zu(n,e){this.rootNode=new se.Node,this.is2D=n,this._labelsBuilder=new ju(256,256,e),this._labelsBuilder.getMesh().renderOrder=100,this.rootNode.add(this._labelsBuilder.getMesh()),this._api=e,this._spriteImageCanvas=document.createElement("canvas"),this._startDataIndex=0,this._endDataIndex=0,this._sizeScale=1}Zu.prototype={constructor:Zu,highlightOnMouseover:!0,update:function(e,o,u,c,v){var g=this._prevMesh;this._prevMesh=this._mesh,this._mesh=g;var x=e.getData();if(c==null&&(c=0),v==null&&(v=x.count()),this._startDataIndex=c,this._endDataIndex=v-1,!this._mesh){var _=this._prevMesh&&this._prevMesh.material;this._mesh=new Xg({renderOrder:10,frustumCulling:!1}),_&&(this._mesh.material=_)}var _=this._mesh.material,M=this._mesh.geometry,I=M.attributes;this.rootNode.remove(this._prevMesh),this.rootNode.add(this._mesh),this._setPositionTextureToMesh(this._mesh,this._positionTexture);var F=this._getSymbolInfo(e,c,v),ut=u.getDevicePixelRatio(),yt=e.getModel("itemStyle").getItemStyle(),Dt=e.get("large"),Et=1;F.maxSize>2?(Et=this._updateSymbolSprite(e,yt,F,ut),_.enableTexture("sprite")):_.disableTexture("sprite"),I.position.init(v-c);var Pt=[];if(Dt){_.undefine("VERTEX_SIZE"),_.undefine("VERTEX_COLOR");var Ht=ov(x),$t=sv(x);se.parseColor(Ht,Pt),Pt[3]*=$t,_.set({color:Pt,u_Size:F.maxSize*this._sizeScale})}else _.set({color:[1,1,1,1]}),_.define("VERTEX_SIZE"),_.define("VERTEX_COLOR"),I.size.init(v-c),I.color.init(v-c),this._originalOpacity=new Float32Array(v-c);for(var qt=x.getLayout("points"),le=I.position.value,ie=!1,he=0;he<v-c;he++){var Re=he*3,ze=he*2;if(this.is2D?(le[Re]=qt[ze],le[Re+1]=qt[ze+1],le[Re+2]=Kv):(le[Re]=qt[Re],le[Re+1]=qt[Re+1],le[Re+2]=qt[Re+2]),!Dt){var Ht=kn(x,he),$t=Qn(x,he);se.parseColor(Ht,Pt),Pt[3]*=$t,I.color.set(he,Pt),Pt[3]<.99&&(ie=!0);var Pe=x.getItemVisual(he,"symbolSize");Pe=Pe instanceof Array?Math.max(Pe[0],Pe[1]):Pe,isNaN(Pe)&&(Pe=0),I.size.value[he]=Pe*Et*this._sizeScale,this._originalOpacity[he]=Pt[3]}}this._mesh.sizeScale=Et,M.updateBoundingBox(),M.dirty(),this._updateMaterial(e,yt);var Ke=e.coordinateSystem;if(Ke&&Ke.viewGL){var rr=Ke.viewGL.isLinearSpace()?"define":"undefine";_[rr]("fragment","SRGB_DECODE")}Dt||this._updateLabelBuilder(e,c,v),this._updateHandler(e,o,u),this._updateAnimation(e),this._api=u},getPointsMesh:function(){return this._mesh},updateLabels:function(e){this._labelsBuilder.updateLabels(e)},hideLabels:function(){this.rootNode.remove(this._labelsBuilder.getMesh())},showLabels:function(){this.rootNode.add(this._labelsBuilder.getMesh())},_updateSymbolSprite:function(e,o,u,c){u.maxSize=Math.min(u.maxSize*2,200);var v=[];return u.aspect>1?(v[0]=u.maxSize,v[1]=u.maxSize/u.aspect):(v[1]=u.maxSize,v[0]=u.maxSize*u.aspect),v[0]=v[0]||1,v[1]=v[1]||1,(this._symbolType!==u.type||!Zg(this._symbolSize,v)||this._lineWidth!==o.lineWidth)&&(Xu.createSymbolSprite(u.type,v,{fill:"#fff",lineWidth:o.lineWidth,stroke:"transparent",shadowColor:"transparent",minMargin:Math.min(v[0]/2,10)},this._spriteImageCanvas),Xu.createSDFFromCanvas(this._spriteImageCanvas,Math.min(this._spriteImageCanvas.width,32),Zv,this._mesh.material.get("sprite").image),this._symbolType=u.type,this._symbolSize=v,this._lineWidth=o.lineWidth),this._spriteImageCanvas.width/u.maxSize*c},_updateMaterial:function(e,o){var u=e.get("blendMode")==="lighter"?se.additiveBlend:null,c=this._mesh.material;c.blend=u,c.set("lineWidth",o.lineWidth/Zv);var v=se.parseColor(o.stroke);c.set("strokeColor",v),c.transparent=!0,c.depthMask=!1,c.depthTest=!this.is2D,c.sortVertices=!this.is2D},_updateLabelBuilder:function(e,o,u){var c=e.getData(),v=this._mesh.geometry,g=v.attributes.position.value,o=this._startDataIndex,x=this._mesh.sizeScale;this._labelsBuilder.updateData(c,o,u),this._labelsBuilder.getLabelPosition=function(_,M,I){var F=(_-o)*3;return[g[F],g[F+1],g[F+2]]},this._labelsBuilder.getLabelDistance=function(_,M,I){var F=v.attributes.size.get(_-o)/x;return F/2+I},this._labelsBuilder.updateLabels()},_updateAnimation:function(e){se.updateVertexAnimation([["prevPosition","position"],["prevSize","size"]],this._prevMesh,this._mesh,e)},_updateHandler:function(e,o,u){var c=e.getData(),v=this._mesh,g=this,x=-1,_=e.coordinateSystem&&e.coordinateSystem.type==="cartesian3D",M;_&&(M=e.coordinateSystem.model),v.seriesIndex=e.seriesIndex,v.off("mousemove"),v.off("mouseout"),v.on("mousemove",function(I){var F=I.vertexIndex+g._startDataIndex;F!==x&&(this.highlightOnMouseover&&(this.downplay(c,x),this.highlight(c,F),this._labelsBuilder.updateLabels([F])),_&&u.dispatchAction({type:"grid3DShowAxisPointer",value:[c.get(e.coordDimToDataDim("x")[0],F),c.get(e.coordDimToDataDim("y")[0],F),c.get(e.coordDimToDataDim("z")[0],F)],grid3DIndex:M.componentIndex})),v.dataIndex=F,x=F},this),v.on("mouseout",function(I){var F=I.vertexIndex+g._startDataIndex;this.highlightOnMouseover&&(this.downplay(c,F),this._labelsBuilder.updateLabels()),x=-1,v.dataIndex=-1,_&&u.dispatchAction({type:"grid3DHideAxisPointer",grid3DIndex:M.componentIndex})},this)},updateLayout:function(e,o,u){var c=e.getData();if(!!this._mesh){var v=this._mesh.geometry.attributes.position.value,g=c.getLayout("points");if(this.is2D)for(var x=0;x<g.length/2;x++){var _=x*3,M=x*2;v[_]=g[M],v[_+1]=g[M+1],v[_+2]=Kv}else for(var x=0;x<g.length;x++)v[x]=g[x];this._mesh.geometry.dirty(),u.getZr().refresh()}},updateView:function(e){if(!!this._mesh){var o=new gr;gr.mul(o,e.viewMatrix,this._mesh.worldTransform),gr.mul(o,e.projectionMatrix,o),this._mesh.updateNDCPosition(o,this.is2D,this._api)}},highlight:function(e,o){if(!(o>this._endDataIndex||o<this._startDataIndex)){var u=e.getItemModel(o),c=u.getModel("emphasis.itemStyle"),v=c.get("color"),g=c.get("opacity");if(v==null){var x=kn(e,o);v=B.i.lift(x,-.4)}g==null&&(g=Qn(e,o));var _=se.parseColor(v);_[3]*=g,this._mesh.geometry.attributes.color.set(o-this._startDataIndex,_),this._mesh.geometry.dirtyAttribute("color"),this._api.getZr().refresh()}},downplay:function(e,o){if(!(o>this._endDataIndex||o<this._startDataIndex)){var u=kn(e,o),c=Qn(e,o),v=se.parseColor(u);v[3]*=c,this._mesh.geometry.attributes.color.set(o-this._startDataIndex,v),this._mesh.geometry.dirtyAttribute("color"),this._api.getZr().refresh()}},fadeOutAll:function(e){if(this._originalOpacity){for(var o=this._mesh.geometry,u=0;u<o.vertexCount;u++){var c=this._originalOpacity[u]*e;o.attributes.color.value[u*4+3]=c}o.dirtyAttribute("color"),this._api.getZr().refresh()}},fadeInAll:function(){this.fadeOutAll(1)},setPositionTexture:function(e){this._mesh&&this._setPositionTextureToMesh(this._mesh,e),this._positionTexture=e},removePositionTexture:function(){this._positionTexture=null,this._mesh&&this._setPositionTextureToMesh(this._mesh,null)},setSizeScale:function(e){if(e!==this._sizeScale){if(this._mesh){var o=this._mesh.material.get("u_Size");this._mesh.material.set("u_Size",o/this._sizeScale*e);var u=this._mesh.geometry.attributes;if(u.size.value)for(var c=0;c<u.size.value.length;c++)u.size.value[c]=u.size.value[c]/this._sizeScale*e}this._sizeScale=e}},_setPositionTextureToMesh:function(e,o){o&&e.material.set("positionTexture",o),e.material[o?"enableTexture":"disableTexture"]("positionTexture")},_getSymbolInfo:function(e,o,u){if(e.get("large")){var c=Kr.firstNotNull(e.get("symbolSize"),1),I,g;return c instanceof Array?(I=Math.max(c[0],c[1]),g=c[0]/c[1]):(I=c,g=1),{maxSize:c,type:e.get("symbol"),aspect:g}}for(var v=e.getData(),g,x=!1,_=v.getItemVisual(0,"symbol")||"circle",M=!1,I=0,F=o;F<u;F++){var c=v.getItemVisual(F,"symbolSize"),ut=v.getItemVisual(F,"symbol"),yt;if(c instanceof Array)yt=c[0]/c[1],I=Math.max(Math.max(c[0],c[1]),I);else{if(isNaN(c))continue;yt=1,I=Math.max(c,I)}_=ut,g=yt}return{maxSize:I,type:_,aspect:g}}};var Hl=Zu,Kg=B.b.extend({type:"scatter3D",hasSymbolVisual:!0,__ecgl__:!0,init:function(e,o){this.groupGL=new se.Node,this._pointsBuilderList=[],this._currentStep=0},render:function(e,o,u){if(this.groupGL.removeAll(),!!e.getData().count()){var c=e.coordinateSystem;if(c&&c.viewGL){c.viewGL.add(this.groupGL),this._camera=c.viewGL.camera;var v=this._pointsBuilderList[0];v||(v=this._pointsBuilderList[0]=new Hl(!1,u)),this._pointsBuilderList.length=1,this.groupGL.add(v.rootNode),v.update(e,o,u),v.updateView(c.viewGL.camera)}}},incrementalPrepareRender:function(e,o,u){var c=e.coordinateSystem;c&&c.viewGL&&(c.viewGL.add(this.groupGL),this._camera=c.viewGL.camera),this.groupGL.removeAll(),this._currentStep=0},incrementalRender:function(e,o,u,c){if(!(e.end<=e.start)){var v=this._pointsBuilderList[this._currentStep];v||(v=new Hl(!1,c),this._pointsBuilderList[this._currentStep]=v),this.groupGL.add(v.rootNode),v.update(o,u,c,e.start,e.end),v.updateView(o.coordinateSystem.viewGL.camera),this._currentStep++}},updateCamera:function(){this._pointsBuilderList.forEach(function(e){e.updateView(this._camera)},this)},highlight:function(e,o,u,c){this._toggleStatus("highlight",e,o,u,c)},downplay:function(e,o,u,c){this._toggleStatus("downplay",e,o,u,c)},_toggleStatus:function(e,o,u,c,v){var g=o.getData(),x=Kr.queryDataIndex(g,v),_=e==="highlight";x!=null?B.Y.each(po.normalizeToArray(x),function(M){for(var I=0;I<this._pointsBuilderList.length;I++){var F=this._pointsBuilderList[I];_?F.highlight(g,M):F.downplay(g,M)}},this):g.each(function(M){for(var I=0;I<this._pointsBuilderList.length;I++){var F=this._pointsBuilderList[I];_?F.highlight(g,M):F.downplay(g,M)}})},dispose:function(){this.groupGL.removeAll()},remove:function(){this.groupGL.removeAll()}});function kg(n){n.registerChartView(Kg),n.registerSeriesModel(Hv),n.registerLayout({seriesType:"scatter3D",reset:function(o){var u=o.coordinateSystem;if(u){var c=u.dimensions;if(c.length<3)return;var v=c.map(function(_){return o.coordDimToDataDim(_)[0]}),g=[],x=[];return{progress:function(M,I){for(var F=new Float32Array((M.end-M.start)*3),ut=M.start;ut<M.end;ut++){var yt=(ut-M.start)*3;g[0]=I.get(v[0],ut),g[1]=I.get(v[1],ut),g[2]=I.get(v[2],ut),u.dataToPoint(g,x),F[yt]=x[0],F[yt+1]=x[1],F[yt+2]=x[2]}I.setLayout("points",F)}}}}})}Object(B.X)(kg);var Jn=Hn.vec3,kv=Hn.vec2,Za=Jn.normalize,Ku=Jn.cross,Qv=Jn.sub,wc=Jn.add,go=Jn.create,mo=go(),qi=go(),yo=go(),Ys=go(),Jv=[],$v=[];function Qg(n,e){kv.copy(Jv,n[0]),kv.copy($v,n[1]);var o=[],u=o[0]=go(),c=o[1]=go(),v=o[2]=go(),g=o[3]=go();e.dataToPoint(Jv,u),e.dataToPoint($v,g),Za(mo,u),Qv(qi,g,u),Za(qi,qi),Ku(yo,qi,mo),Za(yo,yo),Ku(qi,mo,yo),wc(c,mo,qi),Za(c,c),Za(mo,g),Qv(qi,u,g),Za(qi,qi),Ku(yo,qi,mo),Za(yo,yo),Ku(qi,mo,yo),wc(v,mo,qi),Za(v,v),wc(Ys,u,g),Za(Ys,Ys);var x=Jn.dot(u,Ys),_=Jn.dot(Ys,c),M=(Math.max(Jn.len(u),Jn.len(g))-x)/_*2;return Jn.scaleAndAdd(c,u,c,M),Jn.scaleAndAdd(v,g,v,M),o}function Jg(n,e,o){var u=[],c=u[0]=Jn.create(),v=u[1]=Jn.create(),g=u[2]=Jn.create(),x=u[3]=Jn.create();e.dataToPoint(n[0],c),e.dataToPoint(n[1],x);var _=Jn.dist(c,x);return Jn.lerp(v,c,x,.3),Jn.lerp(g,c,x,.3),Jn.scaleAndAdd(v,v,o,Math.min(_*.1,10)),Jn.scaleAndAdd(g,g,o,Math.min(_*.1,10)),u}function qv(n,e){for(var o=new Float32Array(n.length*3),u=0,c=[],v=0;v<n.length;v++)e.dataToPoint(n[v],c),o[u++]=c[0],o[u++]=c[1],o[u++]=c[2];return o}function td(n){var e=[];return n.each(function(o){var u=n.getItemModel(o),c=u.option instanceof Array?u.option:u.getShallow("coords",!0);e.push(c)}),{coordsList:e}}function Ic(n,e){var o=n.getData(),u=n.get("polyline");o.setLayout("lineType",u?"polyline":"cubicBezier");var c=td(o);o.each(function(v){var g=c.coordsList[v],x=u?qv:Qg;o.setItemLayout(v,x(g,e))})}function ed(n,e,o){var u=n.getData(),c=n.get("polyline"),v=td(u);u.setLayout("lineType",c?"polyline":"cubicBezier"),u.each(function(g){var x=v.coordsList[g],_=c?qv(x,e):Jg(x,e,o);u.setItemLayout(g,_)})}function $g(n,e){n.eachSeriesByType("lines3D",function(o){var u=o.coordinateSystem;u.type==="globe"?Ic(o,u):u.type==="geo3D"?ed(o,u,[0,1,0]):(u.type==="mapbox3D"||u.type==="maptalks3D")&&ed(o,u,[0,0,1])})}var qg=B.h.extend({type:"series.lines3D",dependencies:["globe"],visualStyleAccessPath:"lineStyle",visualDrawType:"stroke",getInitialData:function(e,o){var u=new B.e(["value"],this);return u.hasItemOption=!1,u.initData(e.data,[],function(c,v,g,x){if(c instanceof Array)return NaN;u.hasItemOption=!0;var _=c.value;if(_!=null)return _ instanceof Array?_[x]:_}),u},defaultOption:{coordinateSystem:"globe",globeIndex:0,geo3DIndex:0,zlevel:-10,polyline:!1,effect:{show:!1,period:4,trailWidth:4,trailLength:.2,spotIntensity:6},silent:!0,blendMode:"source-over",lineStyle:{width:1,opacity:.5}}}),tm=`@export ecgl.trail2.vertex
attribute vec3 position: POSITION;
attribute vec3 positionPrev;
attribute vec3 positionNext;
attribute float offset;
attribute float dist;
attribute float distAll;
attribute float start;

attribute vec4 a_Color : COLOR;

uniform mat4 worldViewProjection : WORLDVIEWPROJECTION;
uniform vec4 viewport : VIEWPORT;
uniform float near : NEAR;

uniform float speed : 0;
uniform float trailLength: 0.3;
uniform float time;
uniform float period: 1000;

uniform float spotSize: 1;

varying vec4 v_Color;
varying float v_Percent;
varying float v_SpotPercent;

@import ecgl.common.wireframe.vertexHeader

@import ecgl.lines3D.clipNear

void main()
{
 @import ecgl.lines3D.expandLine

 gl_Position = currProj;

 v_Color = a_Color;

 @import ecgl.common.wireframe.vertexMain

#ifdef CONSTANT_SPEED
 float t = mod((speed * time + start) / distAll, 1. + trailLength) - trailLength;
#else
 float t = mod((time + start) / period, 1. + trailLength) - trailLength;
#endif

 float trailLen = distAll * trailLength;

 v_Percent = (dist - t * distAll) / trailLen;

 v_SpotPercent = spotSize / distAll;

 }
@end


@export ecgl.trail2.fragment

uniform vec4 color : [1.0, 1.0, 1.0, 1.0];
uniform float spotIntensity: 5;

varying vec4 v_Color;
varying float v_Percent;
varying float v_SpotPercent;

@import ecgl.common.wireframe.fragmentHeader

@import clay.util.srgb

void main()
{
 if (v_Percent > 1.0 || v_Percent < 0.0) {
 discard;
 }

 float fade = v_Percent;

#ifdef SRGB_DECODE
 gl_FragColor = sRGBToLinear(color * v_Color);
#else
 gl_FragColor = color * v_Color;
#endif

 @import ecgl.common.wireframe.fragmentMain

 if (v_Percent > (1.0 - v_SpotPercent)) {
 gl_FragColor.rgb *= spotIntensity;
 }

 gl_FragColor.a *= fade;
}

@end`,rd=Hn.vec3;function xo(n){return n>0?1:-1}se.Shader.import(tm);var ku=se.Mesh.extend(function(){var n=new se.Material({shader:new se.Shader(se.Shader.source("ecgl.trail2.vertex"),se.Shader.source("ecgl.trail2.fragment")),transparent:!0,depthMask:!1}),e=new Zo({dynamic:!0});return e.createAttribute("dist","float",1),e.createAttribute("distAll","float",1),e.createAttribute("start","float",1),{geometry:e,material:n,culling:!1,$ignorePicking:!0}},{updateData:function(e,o,u){var c=e.hostModel,v=this.geometry,g=c.getModel("effect"),x=g.get("trailWidth")*o.getDevicePixelRatio(),_=g.get("trailLength"),M=c.get("effect.constantSpeed"),I=c.get("effect.period")*1e3,F=M!=null;F?this.material.set("speed",M/1e3):this.material.set("period",I),this.material[F?"define":"undefine"]("vertex","CONSTANT_SPEED");var ut=c.get("polyline");v.trailLength=_,this.material.set("trailLength",_),v.resetOffset(),["position","positionPrev","positionNext"].forEach(function(ze){v.attributes[ze].value=u.attributes[ze].value});var yt=["dist","distAll","start","offset","color"];yt.forEach(function(ze){v.attributes[ze].init(v.vertexCount)}),v.indices=u.indices;var Dt=[],Et=g.get("trailColor"),Pt=g.get("trailOpacity"),Ht=Et!=null,$t=Pt!=null;this.updateWorldTransform();var qt=this.worldTransform.x.len(),le=this.worldTransform.y.len(),ie=this.worldTransform.z.len(),he=0,Re=0;e.each(function(ze){var Pe=e.getItemLayout(ze),Ke=$t?Pt:Qn(e,ze),rr=kn(e,ze);Ke==null&&(Ke=1),Dt=se.parseColor(Ht?Et:rr,Dt),Dt[3]*=Ke;for(var Ue=ut?u.getPolylineVertexCount(Pe):u.getCubicCurveVertexCount(Pe[0],Pe[1],Pe[2],Pe[3]),hr=0,ke=[],Lr=[],yr=he;yr<he+Ue;yr++)v.attributes.position.get(yr,ke),ke[0]*=qt,ke[1]*=le,ke[2]*=ie,yr>he&&(hr+=rd.dist(ke,Lr)),v.attributes.dist.set(yr,hr),rd.copy(Lr,ke);Re=Math.max(Re,hr);for(var xr=Math.random()*(F?hr:I),yr=he;yr<he+Ue;yr++)v.attributes.distAll.set(yr,hr),v.attributes.start.set(yr,xr),v.attributes.offset.set(yr,xo(u.attributes.offset.get(yr))*x/2),v.attributes.color.set(yr,Dt);he+=Ue}),this.material.set("spotSize",Re*.1*_),this.material.set("spotIntensity",g.get("spotIntensity")),v.dirty()},setAnimationTime:function(e){this.material.set("time",e)}});se.Shader.import(Au);function bo(n){return n.radius!=null?n.radius:n.size!=null?Math.max(n.size[0],n.size[1],n.size[2]):100}var em=B.b.extend({type:"lines3D",__ecgl__:!0,init:function(e,o){this.groupGL=new se.Node,this._meshLinesMaterial=new se.Material({shader:se.createShader("ecgl.meshLines3D"),transparent:!0,depthMask:!1}),this._linesMesh=new se.Mesh({geometry:new Zo,material:this._meshLinesMaterial,$ignorePicking:!0}),this._trailMesh=new ku},render:function(e,o,u){this.groupGL.add(this._linesMesh);var c=e.coordinateSystem,v=e.getData();if(c&&c.viewGL){var g=c.viewGL;g.add(this.groupGL),this._updateLines(e,o,u);var x=c.viewGL.isLinearSpace()?"define":"undefine";this._linesMesh.material[x]("fragment","SRGB_DECODE"),this._trailMesh.material[x]("fragment","SRGB_DECODE")}var _=this._trailMesh;if(_.stopAnimation(),e.get("effect.show")){this.groupGL.add(_),_.updateData(v,u,this._linesMesh.geometry),_.__time=_.__time||0;var M=3600*1e3;this._curveEffectsAnimator=_.animate("",{loop:!0}).when(M,{__time:M}).during(function(){_.setAnimationTime(_.__time)}).start()}else this.groupGL.remove(_),this._curveEffectsAnimator=null;this._linesMesh.material.blend=this._trailMesh.material.blend=e.get("blendMode")==="lighter"?se.additiveBlend:null},pauseEffect:function(){this._curveEffectsAnimator&&this._curveEffectsAnimator.pause()},resumeEffect:function(){this._curveEffectsAnimator&&this._curveEffectsAnimator.resume()},toggleEffect:function(){var e=this._curveEffectsAnimator;e&&(e.isPaused()?e.resume():e.pause())},_updateLines:function(e,o,u){var c=e.getData(),v=e.coordinateSystem,g=this._linesMesh.geometry,x=e.get("polyline");g.expandLine=!0;var _=bo(v);g.segmentScale=_/20;var M="lineStyle.width".split("."),I=u.getDevicePixelRatio(),F=0;c.each(function(Et){var Pt=c.getItemModel(Et),Ht=Pt.get(M);Ht==null&&(Ht=1),c.setItemVisual(Et,"lineWidth",Ht),F=Math.max(Ht,F)}),g.useNativeLine=!1;var ut=0,yt=0;c.each(function(Et){var Pt=c.getItemLayout(Et);x?(ut+=g.getPolylineVertexCount(Pt),yt+=g.getPolylineTriangleCount(Pt)):(ut+=g.getCubicCurveVertexCount(Pt[0],Pt[1],Pt[2],Pt[3]),yt+=g.getCubicCurveTriangleCount(Pt[0],Pt[1],Pt[2],Pt[3]))}),g.setVertexCount(ut),g.setTriangleCount(yt),g.resetOffset();var Dt=[];c.each(function(Et){var Pt=c.getItemLayout(Et),Ht=kn(c,Et),$t=Qn(c,Et),qt=c.getItemVisual(Et,"lineWidth")*I;$t==null&&($t=1),Dt=se.parseColor(Ht,Dt),Dt[3]*=$t,x?g.addPolyline(Pt,Dt,qt):g.addCubicCurve(Pt[0],Pt[1],Pt[2],Pt[3],Dt,qt)}),g.dirty()},remove:function(){this.groupGL.removeAll()},dispose:function(){this.groupGL.removeAll()}});function rm(n){n.registerChartView(em),n.registerSeriesModel(qg),n.registerLayout($g),n.registerAction({type:"lines3DPauseEffect",event:"lines3deffectpaused",update:"series.lines3D:pauseEffect"},function(){}),n.registerAction({type:"lines3DResumeEffect",event:"lines3deffectresumed",update:"series.lines3D:resumeEffect"},function(){}),n.registerAction({type:"lines3DToggleEffect",event:"lines3deffectchanged",update:"series.lines3D:toggleEffect"},function(){})}Object(B.X)(rm);function nd(n,e){for(var o=[],u=0;u<e.length;u++)o.push(n.dataToPoint(e[u]));return o}var id=B.h.extend({type:"series.polygons3D",getRegionModel:function(e){return this.getData().getItemModel(e)},getRegionPolygonCoords:function(e){var o=this.coordinateSystem,u=this.getData().getItemModel(e),c=u.option instanceof Array?u.option:u.getShallow("coords");u.get("multiPolygon")||(c=[c]);for(var v=[],g=0;g<c.length;g++){for(var x=[],_=1;_<c[g].length;_++)x.push(nd(o,c[g][_]));v.push({exterior:nd(o,c[g][0]),interiors:x})}return v},getInitialData:function(e){var o=new B.e(["value"],this);return o.hasItemOption=!1,o.initData(e.data,[],function(u,c,v,g){if(u instanceof Array)return NaN;o.hasItemOption=!0;var x=u.value;if(x!=null)return x instanceof Array?x[g]:x}),o},defaultOption:{show:!0,data:null,multiPolygon:!1,progressiveThreshold:1e3,progressive:1e3,zlevel:-10,label:{show:!1,distance:2,textStyle:{fontSize:20,color:"#000",backgroundColor:"rgba(255,255,255,0.7)",padding:3,borderRadius:4}},itemStyle:{color:"#fff",borderWidth:0,borderColor:"#333"},emphasis:{itemStyle:{color:"#639fc0"},label:{show:!0}}}});B.Y.merge(id.prototype,fo);var Rc=id,ad=B.b.extend({type:"polygons3D",__ecgl__:!0,init:function(e,o){this.groupGL=new se.Node,this._geo3DBuilderList=[],this._currentStep=0},render:function(e,o,u){this.groupGL.removeAll();var c=e.coordinateSystem;c&&c.viewGL&&c.viewGL.add(this.groupGL);var v=this._geo3DBuilderList[0];v||(v=new zu(u),v.extrudeY=c.type!=="mapbox3D"&&c.type!=="maptalks3D",this._geo3DBuilderList[0]=v),this._updateShaderDefines(c,v),v.update(e,o,u),this._geo3DBuilderList.length=1,this.groupGL.add(v.rootNode)},incrementalPrepareRender:function(e,o,u){this.groupGL.removeAll();var c=e.coordinateSystem;c&&c.viewGL&&c.viewGL.add(this.groupGL),this._currentStep=0},incrementalRender:function(e,o,u,c){var v=this._geo3DBuilderList[this._currentStep],g=o.coordinateSystem;v||(v=new zu(c),v.extrudeY=g.type!=="mapbox3D"&&g.type!=="maptalks3D",this._geo3DBuilderList[this._currentStep]=v),v.update(o,u,c,e.start,e.end),this.groupGL.add(v.rootNode),this._updateShaderDefines(g,v),this._currentStep++},_updateShaderDefines:function(e,o){var u=e.viewGL.isLinearSpace()?"define":"undefine";o.rootNode.traverse(function(c){c.material&&(c.material[u]("fragment","SRGB_DECODE"),(e.type==="mapbox3D"||e.type==="maptalks3D")&&(c.material.define("fragment","NORMAL_UP_AXIS",2),c.material.define("fragment","NORMAL_FRONT_AXIS",1)))})},remove:function(){this.groupGL.removeAll()},dispose:function(){this.groupGL.removeAll()}});function od(n){n.registerChartView(ad),n.registerSeriesModel(Rc)}Object(B.X)(od);var sd=B.h.extend({type:"series.surface",dependencies:["globe","grid3D","geo3D"],visualStyleAccessPath:"itemStyle",formatTooltip:function(e){return Vl(this,e)},getInitialData:function(e,o){var u=e.data;function c(Sr){return!(isNaN(Sr.min)||isNaN(Sr.max)||isNaN(Sr.step))}function v(Sr){var mr=B.E.getPrecisionSafe;return Math.max(mr(Sr.min),mr(Sr.max),mr(Sr.step))+1}if(!u)if(e.parametric){var ie=e.parametricEquation||{},he=ie.u||{},Re=ie.v||{};["u","v"].forEach(function(mr){!!c(ie[mr])}),["x","y","z"].forEach(function(mr){typeof ie[mr]=="function"});var ze=Math.floor((he.max+he.step-he.min)/he.step),Pe=Math.floor((Re.max+Re.step-Re.min)/Re.step);u=new Float32Array(ze*Pe*5);for(var Ke=v(he),rr=v(Re),yt=0,Dt=0;Dt<Pe;Dt++)for(var Et=0;Et<ze;Et++){var Ue=Et*he.step+he.min,hr=Dt*Re.step+Re.min,ke=B.E.round(Math.min(Ue,he.max),Ke),Lr=B.E.round(Math.min(hr,Re.max),rr),Pt=ie.x(ke,Lr),Ht=ie.y(ke,Lr),le=ie.z(ke,Lr);u[yt++]=Pt,u[yt++]=Ht,u[yt++]=le,u[yt++]=ke,u[yt++]=Lr}}else{var g=e.equation||{},x=g.x||{},_=g.y||{};if(["x","y"].forEach(function(Sr){!!c(g[Sr])}),typeof g.z!="function")return;var M=Math.floor((x.max+x.step-x.min)/x.step),I=Math.floor((_.max+_.step-_.min)/_.step);u=new Float32Array(M*I*3);for(var F=v(x),ut=v(_),yt=0,Dt=0;Dt<I;Dt++)for(var Et=0;Et<M;Et++){var Pt=Et*x.step+x.min,Ht=Dt*_.step+_.min,$t=B.E.round(Math.min(Pt,x.max),F),qt=B.E.round(Math.min(Ht,_.max),ut),le=g.z($t,qt);u[yt++]=$t,u[yt++]=qt,u[yt++]=le}}var yr=["x","y","z"];e.parametric&&yr.push("u","v");var xr=Ws(this,yr,u);return xr},defaultOption:{coordinateSystem:"cartesian3D",zlevel:-10,grid3DIndex:0,shading:"lambert",parametric:!1,wireframe:{show:!0,lineStyle:{color:"rgba(0,0,0,0.5)",width:1}},equation:{x:{min:-1,max:1,step:.1},y:{min:-1,max:1,step:.1},z:null},parametricEquation:{u:{min:-1,max:1,step:.1},v:{min:-1,max:1,step:.1},x:null,y:null,z:null},dataShape:null,itemStyle:{},animationDurationUpdate:500}});B.Y.merge(sd.prototype,fo);var nm=sd,os=Hn.vec3;function im(n){return isNaN(n[0])||isNaN(n[1])||isNaN(n[2])}var ld=B.b.extend({type:"surface",__ecgl__:!0,init:function(e,o){this.groupGL=new se.Node},render:function(e,o,u){var c=this._prevSurfaceMesh;this._prevSurfaceMesh=this._surfaceMesh,this._surfaceMesh=c,this._surfaceMesh||(this._surfaceMesh=this._createSurfaceMesh()),this.groupGL.remove(this._prevSurfaceMesh),this.groupGL.add(this._surfaceMesh);var v=e.coordinateSystem,g=e.get("shading"),x=e.getData(),_="ecgl."+g;if((!this._surfaceMesh.material||this._surfaceMesh.material.shader.name!==_)&&(this._surfaceMesh.material=se.createMaterial(_,["VERTEX_COLOR","DOUBLE_SIDED"])),se.setMaterialFromModel(g,this._surfaceMesh.material,e,u),v&&v.viewGL){v.viewGL.add(this.groupGL);var M=v.viewGL.isLinearSpace()?"define":"undefine";this._surfaceMesh.material[M]("fragment","SRGB_DECODE")}var I=e.get("parametric"),F=e.get("dataShape");F||(F=this._getDataShape(x,I));var ut=e.getModel("wireframe"),yt=ut.get("lineStyle.width"),Dt=ut.get("show")&&yt>0;this._updateSurfaceMesh(this._surfaceMesh,e,F,Dt);var Et=this._surfaceMesh.material;Dt?(Et.define("WIREFRAME_QUAD"),Et.set("wireframeLineWidth",yt),Et.set("wireframeLineColor",se.parseColor(ut.get("lineStyle.color")))):Et.undefine("WIREFRAME_QUAD"),this._initHandler(e,u),this._updateAnimation(e)},_updateAnimation:function(e){se.updateVertexAnimation([["prevPosition","position"],["prevNormal","normal"]],this._prevSurfaceMesh,this._surfaceMesh,e)},_createSurfaceMesh:function(){var e=new se.Mesh({geometry:new se.Geometry({dynamic:!0,sortTriangles:!0}),shadowDepthMaterial:new se.Material({shader:new se.Shader(se.Shader.source("ecgl.sm.depth.vertex"),se.Shader.source("ecgl.sm.depth.fragment"))}),culling:!1,renderOrder:10,renderNormal:!0});return e.geometry.createAttribute("barycentric","float",4),e.geometry.createAttribute("prevPosition","float",3),e.geometry.createAttribute("prevNormal","float",3),Object.assign(e.geometry,Nl),e},_initHandler:function(e,o){var u=e.getData(),c=this._surfaceMesh,v=e.coordinateSystem;function g(_,M){for(var I=Infinity,F=-1,ut=[],yt=0;yt<_.length;yt++){c.geometry.attributes.position.get(_[yt],ut);var Dt=os.dist(M.array,ut);Dt<I&&(I=Dt,F=_[yt])}return F}c.seriesIndex=e.seriesIndex;var x=-1;c.off("mousemove"),c.off("mouseout"),c.on("mousemove",function(_){var M=g(_.triangle,_.point);if(M>=0){var I=[];c.geometry.attributes.position.get(M,I);for(var F=v.pointToData(I),ut=Infinity,yt=-1,Dt=[],Et=0;Et<u.count();Et++){Dt[0]=u.get("x",Et),Dt[1]=u.get("y",Et),Dt[2]=u.get("z",Et);var Pt=os.squaredDistance(Dt,F);Pt<ut&&(yt=Et,ut=Pt)}yt!==x&&o.dispatchAction({type:"grid3DShowAxisPointer",value:F}),x=yt,c.dataIndex=yt}else c.dataIndex=-1},this),c.on("mouseout",function(_){x=-1,c.dataIndex=-1,o.dispatchAction({type:"grid3DHideAxisPointer"})},this)},_updateSurfaceMesh:function(e,o,u,c){var v=e.geometry,g=o.getData(),x=g.getLayout("points"),_=0;g.each(function(Zi){g.hasValue(Zi)||_++});var M=_||c,I=v.attributes.position,F=v.attributes.normal,ut=v.attributes.texcoord0,yt=v.attributes.barycentric,Dt=v.attributes.color,Et=u[0],Pt=u[1],Ht=o.get("shading"),$t=Ht!=="color";if(M){var qt=(Et-1)*(Pt-1)*4;I.init(qt),c&&yt.init(qt)}else I.value=new Float32Array(x);Dt.init(v.vertexCount),ut.init(v.vertexCount);var le=[0,3,1,1,3,2],ie=[[1,1,0,0],[0,1,0,1],[1,0,0,1],[1,0,1,0]],he=v.indices=new(v.vertexCount>65535?Uint32Array:Uint16Array)((Et-1)*(Pt-1)*6),Re=function(ta,Gi,Ka){Ka[1]=ta*Pt+Gi,Ka[0]=ta*Pt+Gi+1,Ka[3]=(ta+1)*Pt+Gi+1,Ka[2]=(ta+1)*Pt+Gi},ze=!1;if(M){var Pe=[],Ke=[],rr=0;$t?F.init(v.vertexCount):F.value=null;for(var Ue=[[],[],[]],hr=[],ke=[],Lr=os.create(),yr=function(ta,Gi,Ka){var tf=Gi*3;return Ka[0]=ta[tf],Ka[1]=ta[tf+1],Ka[2]=ta[tf+2],Ka},xr=new Float32Array(x.length),Sr=new Float32Array(x.length/3*4),mr=0;mr<g.count();mr++)if(g.hasValue(mr)){var $n=se.parseColor(kn(g,mr)),on=Qn(g,mr);on!=null&&($n[3]*=on),$n[3]<.99&&(ze=!0);for(var Or=0;Or<4;Or++)Sr[mr*4+Or]=$n[Or]}for(var Sn=[1e7,1e7,1e7],mr=0;mr<Et-1;mr++)for(var rn=0;rn<Pt-1;rn++){var mn=mr*(Pt-1)+rn,En=mn*4;Re(mr,rn,Pe);for(var tn=!1,Or=0;Or<4;Or++)yr(x,Pe[Or],Ke),im(Ke)&&(tn=!0);for(var Or=0;Or<4;Or++)tn?I.set(En+Or,Sn):(yr(x,Pe[Or],Ke),I.set(En+Or,Ke)),c&&yt.set(En+Or,ie[Or]);for(var Or=0;Or<6;Or++)he[rr++]=le[Or]+En;if($t&&!tn)for(var Or=0;Or<2;Or++){for(var li=Or*3,Ln=0;Ln<3;Ln++){var jn=Pe[le[li]+Ln];yr(x,jn,Ue[Ln])}os.sub(hr,Ue[0],Ue[1]),os.sub(ke,Ue[1],Ue[2]),os.cross(Lr,hr,ke);for(var Ln=0;Ln<3;Ln++){var ui=Pe[le[li]+Ln]*3;xr[ui]=xr[ui]+Lr[0],xr[ui+1]=xr[ui+1]+Lr[1],xr[ui+2]=xr[ui+2]+Lr[2]}}}if($t)for(var mr=0;mr<xr.length/3;mr++)yr(xr,mr,Lr),os.normalize(Lr,Lr),xr[mr*3]=Lr[0],xr[mr*3+1]=Lr[1],xr[mr*3+2]=Lr[2];for(var $n=[],qn=[],mr=0;mr<Et-1;mr++)for(var rn=0;rn<Pt-1;rn++){var mn=mr*(Pt-1)+rn,En=mn*4;Re(mr,rn,Pe);for(var Or=0;Or<4;Or++){for(var Ln=0;Ln<4;Ln++)$n[Ln]=Sr[Pe[Or]*4+Ln];Dt.set(En+Or,$n),$t&&(yr(xr,Pe[Or],Lr),F.set(En+Or,Lr));var jn=Pe[Or];qn[0]=jn%Pt/(Pt-1),qn[1]=Math.floor(jn/Pt)/(Et-1),ut.set(En+Or,qn)}mn++}}else{for(var qn=[],mr=0;mr<g.count();mr++){qn[0]=mr%Pt/(Pt-1),qn[1]=Math.floor(mr/Pt)/(Et-1);var $n=se.parseColor(kn(g,mr)),on=Qn(g,mr);on!=null&&($n[3]*=on),$n[3]<.99&&(ze=!0),Dt.set(mr,$n),ut.set(mr,qn)}for(var Pe=[],Zs=0,mr=0;mr<Et-1;mr++)for(var rn=0;rn<Pt-1;rn++){Re(mr,rn,Pe);for(var Or=0;Or<6;Or++)he[Zs++]=Pe[le[Or]]}$t?v.generateVertexNormals():F.value=null}e.material.get("normalMap")&&v.generateTangents(),v.updateBoundingBox(),v.dirty(),e.material.transparent=ze,e.material.depthMask=!ze},_getDataShape:function(e,o){for(var u=-Infinity,c=0,v=0,g=0,x=!1,_=o?"u":"x",M=e.count(),I=0;I<M;I++){var F=e.get(_,I);F<u&&(g=v,v=0,c++),u=F,v++}if((!c||v===1)&&(x=!0),!x)return[c+1,v];for(var ut=Math.floor(Math.sqrt(M));ut>0;){if(Math.floor(M/ut)===M/ut)return[ut,M/ut];ut--}return ut=Math.floor(Math.sqrt(M)),[ut,ut]},dispose:function(){this.groupGL.removeAll()},remove:function(){this.groupGL.removeAll()}});function ud(n){n.registerChartView(ld),n.registerSeriesModel(nm),n.registerLayout(function(e,o){e.eachSeriesByType("surface",function(u){var c=u.coordinateSystem;!c||c.type!=="cartesian3D";var v=u.getData(),g=new Float32Array(3*v.count()),x=[NaN,NaN,NaN];if(c&&c.type==="cartesian3D"){var _=c.dimensions,M=_.map(function(I){return u.coordDimToDataDim(I)[0]});v.each(M,function(I,F,ut,yt){var Dt;v.hasValue(yt)?Dt=c.dataToPoint([I,F,ut]):Dt=x,g[yt*3]=Dt[0],g[yt*3+1]=Dt[1],g[yt*3+2]=Dt[2]})}v.setLayout("points",g)})})}Object(B.X)(ud);function fd(n,e){for(var o=[],u=0;u<e.length;u++)o.push(n.dataToPoint(e[u]));return o}var Xs=B.h.extend({type:"series.map3D",layoutMode:"box",coordinateSystem:null,visualStyleAccessPath:"itemStyle",optionUpdated:function(e){e=e||{};var o=this.get("coordinateSystem");if(!(o==null||o==="geo3D")){if(!1)var u,c;this.get("groundPlane.show")&&(this.option.groundPlane.show=!1),this._geo=null}},getInitialData:function(e){e.data=this.getFilledRegions(e.data,e.map);var o=B.A.createDimensions(e.data,{coordDimensions:["value"]}),u=new B.e(o,this);u.initData(e.data);var c={};return u.each(function(v){var g=u.getName(v),x=u.getItemModel(v);c[g]=x}),this._regionModelMap=c,u},formatTooltip:function(e){return Vl(this,e)},getRegionModel:function(e){var o=this.getData().getName(e);return this._regionModelMap[o]||new B.f(null,this)},getRegionPolygonCoords:function(e){var o=this.coordinateSystem,u=this.getData().getName(e);if(o.transform){var c=o.getRegion(u);return c?c.geometries:[]}else{this._geo||(this._geo=hv.createGeo3D(this));for(var c=this._geo.getRegion(u),v=[],g=0;g<c.geometries.length;g++){var x=c.geometries[g],_=[],M=fd(o,x.exterior);if(_&&_.length)for(var I=0;I<x.interiors.length;I++)_.push(fd(o,_[I]));v.push({interiors:_,exterior:M})}return v}},getFormattedLabel:function(e,o){var u=po.getFormattedLabel(this,e,o);return u==null&&(u=this.getData().getName(e)),u},defaultOption:{coordinateSystem:"geo3D",data:null}});B.Y.merge(Xs.prototype,$h),B.Y.merge(Xs.prototype,bu),B.Y.merge(Xs.prototype,As),B.Y.merge(Xs.prototype,Xo),B.Y.merge(Xs.prototype,fo);var am=Xs,Wl=B.b.extend({type:"map3D",__ecgl__:!0,init:function(e,o){this._geo3DBuilder=new zu(o),this.groupGL=new se.Node},render:function(e,o,u){var c=e.coordinateSystem;if(!(!c||!c.viewGL)){this.groupGL.add(this._geo3DBuilder.rootNode),c.viewGL.add(this.groupGL);var v;if(c.type==="geo3D"){v=c,this._sceneHelper||(this._sceneHelper=new Ls,this._sceneHelper.initLight(this.groupGL)),this._sceneHelper.setScene(c.viewGL.scene),this._sceneHelper.updateLight(e),c.viewGL.setPostEffect(e.getModel("postEffect"),u),c.viewGL.setTemporalSuperSampling(e.getModel("temporalSuperSampling"));var g=this._control;g||(g=this._control=new _u({zr:u.getZr()}),this._control.init());var x=e.getModel("viewControl");g.setViewGL(c.viewGL),g.setFromViewControlModel(x,0),g.off("update"),g.on("update",function(){u.dispatchAction({type:"map3DChangeCamera",alpha:g.getAlpha(),beta:g.getBeta(),distance:g.getDistance(),from:this.uid,map3DId:e.id})}),this._geo3DBuilder.extrudeY=!0}else this._control&&(this._control.dispose(),this._control=null),this._sceneHelper&&(this._sceneHelper.dispose(),this._sceneHelper=null),v=e.getData().getLayout("geo3D"),this._geo3DBuilder.extrudeY=!1;this._geo3DBuilder.update(e,o,u,0,e.getData().count());var _=c.viewGL.isLinearSpace()?"define":"undefine";this._geo3DBuilder.rootNode.traverse(function(M){M.material&&M.material[_]("fragment","SRGB_DECODE")})}},afterRender:function(e,o,u,c){var v=c.renderer,g=e.coordinateSystem;g&&g.type==="geo3D"&&(this._sceneHelper.updateAmbientCubemap(v,e,u),this._sceneHelper.updateSkybox(v,e,u))},dispose:function(){this.groupGL.removeAll(),this._control.dispose()}});function om(n){vv(n),n.registerChartView(Wl),n.registerSeriesModel(am),n.registerAction({type:"map3DChangeCamera",event:"map3dcamerachanged",update:"series:updateCamera"},function(e,o){o.eachComponent({mainType:"series",subType:"map3D",query:e},function(u){u.setView(e)})})}Object(B.X)(om);var sm=B.h.extend({type:"series.scatterGL",dependencies:["grid","polar","geo","singleAxis"],visualStyleAccessPath:"itemStyle",hasSymbolVisual:!0,getInitialData:function(){return B.A.createList(this)},defaultOption:{coordinateSystem:"cartesian2d",zlevel:10,progressive:1e5,progressiveThreshold:1e5,large:!1,symbol:"circle",symbolSize:10,zoomScale:0,blendMode:"source-over",itemStyle:{opacity:.8},postEffect:{enable:!1,colorCorrection:{exposure:0,brightness:0,contrast:1,saturation:1,enable:!0}}}}),cd=S("Fofx"),hd=S("QBsz");function So(n){this.viewGL=n}So.prototype.reset=function(n,e){this._updateCamera(e.getWidth(),e.getHeight(),e.getDevicePixelRatio()),this._viewTransform=cd.create(),this.updateTransform(n,e)},So.prototype.updateTransform=function(n,e){var o=n.coordinateSystem;o.getRoamTransform&&(cd.invert(this._viewTransform,o.getRoamTransform()),this._setCameraTransform(this._viewTransform),e.getZr().refresh())},So.prototype.dataToPoint=function(n,e,o){o=n.dataToPoint(e,null,o);var u=this._viewTransform;u&&hd.applyTransform(o,o,u)},So.prototype.removeTransformInPoint=function(n){return this._viewTransform&&hd.applyTransform(n,n,this._viewTransform),n},So.prototype.getZoom=function(){if(this._viewTransform){var n=this._viewTransform;return 1/Math.max(Math.sqrt(n[0]*n[0]+n[1]*n[1]),Math.sqrt(n[2]*n[2]+n[3]*n[3]))}return 1},So.prototype._setCameraTransform=function(n){var e=this.viewGL.camera;e.position.set(n[4],n[5],0),e.scale.set(Math.sqrt(n[0]*n[0]+n[1]*n[1]),Math.sqrt(n[2]*n[2]+n[3]*n[3]),1)},So.prototype._updateCamera=function(n,e,o){this.viewGL.setViewport(0,0,n,e,o);var u=this.viewGL.camera;u.left=u.top=0,u.bottom=e,u.right=n,u.near=0,u.far=100};var Nn=So,Nc=B.b.extend({type:"scatterGL",__ecgl__:!0,init:function(e,o){this.groupGL=new se.Node,this.viewGL=new uo("orthographic"),this.viewGL.add(this.groupGL),this._pointsBuilderList=[],this._currentStep=0,this._sizeScale=1,this._glViewHelper=new Nn(this.viewGL)},render:function(e,o,u){if(this.groupGL.removeAll(),this._glViewHelper.reset(e,u),!!e.getData().count()){var c=this._pointsBuilderList[0];c||(c=this._pointsBuilderList[0]=new Hl(!0,u)),this._pointsBuilderList.length=1,this.groupGL.add(c.rootNode),this._removeTransformInPoints(e.getData().getLayout("points")),c.update(e,o,u),this.viewGL.setPostEffect(e.getModel("postEffect"),u)}},incrementalPrepareRender:function(e,o,u){this.groupGL.removeAll(),this._glViewHelper.reset(e,u),this._currentStep=0,this.viewGL.setPostEffect(e.getModel("postEffect"),u)},incrementalRender:function(e,o,u,c){if(!(e.end<=e.start)){var v=this._pointsBuilderList[this._currentStep];v||(v=new Hl(!0,c),this._pointsBuilderList[this._currentStep]=v),this.groupGL.add(v.rootNode),this._removeTransformInPoints(o.getData().getLayout("points")),v.setSizeScale(this._sizeScale),v.update(o,u,c,e.start,e.end),c.getZr().refresh(),this._currentStep++}},updateTransform:function(e,o,u){if(e.coordinateSystem.getRoamTransform){this._glViewHelper.updateTransform(e,u);var c=this._glViewHelper.getZoom(),v=Math.max((e.get("zoomScale")||0)*(c-1)+1,0);this._sizeScale=v,this._pointsBuilderList.forEach(function(g){g.setSizeScale(v)})}},_removeTransformInPoints:function(e){if(!!e)for(var o=[],u=0;u<e.length;u+=2)o[0]=e[u],o[1]=e[u+1],this._glViewHelper.removeTransformInPoint(o),e[u]=o[0],e[u+1]=o[1]},dispose:function(){this.groupGL.removeAll()},remove:function(){this.groupGL.removeAll()}});function lm(n){n.registerChartView(Nc),n.registerSeriesModel(sm),n.registerLayout({seriesType:"scatterGL",reset:function(o){var u=o.coordinateSystem,c=o.getData(),v;if(u){var g=u.dimensions.map(function(_){return c.mapDimension(_)}).slice(0,2),x=[];g.length===1?v=function(M){for(var I=new Float32Array((M.end-M.start)*2),F=M.start;F<M.end;F++){var ut=(F-M.start)*2,yt=c.get(g[0],F),Dt=u.dataToPoint(yt);I[ut]=Dt[0],I[ut+1]=Dt[1]}c.setLayout("points",I)}:g.length===2&&(v=function(M){for(var I=new Float32Array((M.end-M.start)*2),F=M.start;F<M.end;F++){var ut=(F-M.start)*2,yt=c.get(g[0],F),Dt=c.get(g[1],F);x[0]=yt,x[1]=Dt,x=u.dataToPoint(x),I[ut]=x[0],I[ut+1]=x[1]}c.setLayout("points",I)})}return{progress:v}}})}Object(B.X)(lm);var um=S("c2i1"),fm=S("Mdki"),cm=function(n,e,o,u,c){for(var v=new um.a(u),g=0;g<n.length;g++)v.addNode(Kr.firstNotNull(n[g].id,n[g].name,g),g);for(var x=[],_=[],M=0,g=0;g<e.length;g++){var I=e[g],F=I.source,ut=I.target;v.addEdge(F,ut,M)&&(_.push(I),x.push(Kr.firstNotNull(I.id,F+" > "+ut)),M++)}var yt,Dt=B.A.createDimensions(n,{coordDimensions:["value"]});yt=new B.e(Dt,o),yt.initData(n);var Et=new B.e(["value"],o);return Et.initData(_,x),c&&c(yt,Et),Object(fm.a)({mainData:yt,struct:v,structAttr:"graph",datas:{node:yt,edge:Et},datasAttr:{node:"data",edge:"edgeData"}}),v.update(),v},Yl=B.h.extend({type:"series.graphGL",visualStyleAccessPath:"itemStyle",hasSymbolVisual:!0,init:function(e){Yl.superApply(this,"init",arguments),this.legendDataProvider=function(){return this._categoriesData},this._updateCategoriesData()},mergeOption:function(e){Yl.superApply(this,"mergeOption",arguments),this._updateCategoriesData()},getFormattedLabel:function(e,o,u,c){var v=po.getFormattedLabel(this,e,o,u,c);if(v==null){var g=this.getData(),x=g.dimensions[g.dimensions.length-1];v=g.get(x,e)}return v},getInitialData:function(e,o){var u=e.edges||e.links||[],c=e.data||e.nodes||[],v=this;if(c&&u)return cm(c,u,this,!0,g).data;function g(x,_){x.wrapMethod("getItemModel",function(ut){var yt=v._categoriesModels,Dt=ut.getShallow("category"),Et=yt[Dt];return Et&&(Et.parentModel=ut.parentModel,ut.parentModel=Et),ut});var M=o.getModel([]).getModel;function I(ut,yt){var Dt=M.call(this,ut,yt);return Dt.resolveParentPath=F,Dt}_.wrapMethod("getItemModel",function(ut){return ut.resolveParentPath=F,ut.getModel=I,ut});function F(ut){if(ut&&(ut[0]==="label"||ut[1]==="label")){var yt=ut.slice();return ut[0]==="label"?yt[0]="edgeLabel":ut[1]==="label"&&(yt[1]="edgeLabel"),yt}return ut}}},getGraph:function(){return this.getData().graph},getEdgeData:function(){return this.getGraph().edgeData},getCategoriesData:function(){return this._categoriesData},formatTooltip:function(e,o,u){if(u==="edge"){var c=this.getData(),v=this.getDataParams(e,u),g=c.graph.getEdgeByIndex(e),x=c.getName(g.node1.dataIndex),_=c.getName(g.node2.dataIndex),M=[];return x!=null&&M.push(x),_!=null&&M.push(_),M=B.u.encodeHTML(M.join(" > ")),v.value&&(M+=" : "+B.u.encodeHTML(v.value)),M}else return Yl.superApply(this,"formatTooltip",arguments)},_updateCategoriesData:function(){var e=(this.option.categories||[]).map(function(u){return u.value!=null?u:Object.assign({value:0},u)}),o=new B.e(["value"],this);o.initData(e),this._categoriesData=o,this._categoriesModels=o.mapArray(function(u){return o.getItemModel(u,!0)})},setView:function(e){e.zoom!=null&&(this.option.zoom=e.zoom),e.offset!=null&&(this.option.offset=e.offset)},setNodePosition:function(e){for(var o=0;o<e.length/2;o++){var u=e[o*2],c=e[o*2+1],v=this.getData().getRawDataItem(o);v.x=u,v.y=c}},isAnimationEnabled:function(){return Yl.superCall(this,"isAnimationEnabled")&&!(this.get("layout")==="force"&&this.get("force.layoutAnimation"))},defaultOption:{zlevel:10,z:2,legendHoverLink:!0,layout:"forceAtlas2",forceAtlas2:{initLayout:null,GPU:!0,steps:1,maxSteps:1e3,repulsionByDegree:!0,linLogMode:!1,strongGravityMode:!1,gravity:1,edgeWeightInfluence:1,edgeWeight:[1,4],nodeWeight:[1,4],preventOverlap:!1,gravityCenter:null},focusNodeAdjacency:!0,focusNodeAdjacencyOn:"mouseover",left:"center",top:"center",symbol:"circle",symbolSize:5,roam:!1,center:null,zoom:1,label:{show:!1,formatter:"{b}",position:"right",distance:5,textStyle:{fontSize:14}},itemStyle:{},lineStyle:{color:"#aaa",width:1,opacity:.5},emphasis:{label:{show:!0}},animation:!1}}),hm=Yl,Wn=Hn.vec2,Bc=[[0,0],[1,1]],Qu=$r.extend(function(){return{segmentScale:4,dynamic:!0,useNativeLine:!0,attributes:{position:new $r.Attribute("position","float",2,"POSITION"),normal:new $r.Attribute("normal","float",2),offset:new $r.Attribute("offset","float",1),color:new $r.Attribute("color","float",4,"COLOR")}}},{resetOffset:function(){this._vertexOffset=0,this._faceOffset=0,this._itemVertexOffsets=[]},setVertexCount:function(e){var o=this.attributes;this.vertexCount!==e&&(o.position.init(e),o.color.init(e),this.useNativeLine||(o.offset.init(e),o.normal.init(e)),e>65535?this.indices instanceof Uint16Array&&(this.indices=new Uint32Array(this.indices)):this.indices instanceof Uint32Array&&(this.indices=new Uint16Array(this.indices)))},setTriangleCount:function(e){this.triangleCount!==e&&(e===0?this.indices=null:this.indices=this.vertexCount>65535?new Uint32Array(e*3):new Uint16Array(e*3))},_getCubicCurveApproxStep:function(e,o,u,c){var v=Wn.dist(e,o)+Wn.dist(u,o)+Wn.dist(c,u),g=1/(v+1)*this.segmentScale;return g},getCubicCurveVertexCount:function(e,o,u,c){var v=this._getCubicCurveApproxStep(e,o,u,c),g=Math.ceil(1/v);return this.useNativeLine?g*2:g*2+2},getCubicCurveTriangleCount:function(e,o,u,c){var v=this._getCubicCurveApproxStep(e,o,u,c),g=Math.ceil(1/v);return this.useNativeLine?0:g*2},getLineVertexCount:function(){return this.getPolylineVertexCount(Bc)},getLineTriangleCount:function(){return this.getPolylineTriangleCount(Bc)},getPolylineVertexCount:function(e){var o;if(typeof e=="number")o=e;else{var u=typeof e[0]!="number";o=u?e.length:e.length/2}return this.useNativeLine?(o-1)*2:(o-1)*2+2},getPolylineTriangleCount:function(e){var o;if(typeof e=="number")o=e;else{var u=typeof e[0]!="number";o=u?e.length:e.length/2}return this.useNativeLine?0:(o-1)*2},addCubicCurve:function(e,o,u,c,v,g){g==null&&(g=1);for(var x=e[0],_=e[1],M=o[0],I=o[1],F=u[0],ut=u[1],yt=c[0],Dt=c[1],Et=this._getCubicCurveApproxStep(e,o,u,c),Pt=Et*Et,Ht=Pt*Et,$t=3*Et,qt=3*Pt,le=6*Pt,ie=6*Ht,he=x-M*2+F,Re=_-I*2+ut,ze=(M-F)*3-x+yt,Pe=(I-ut)*3-_+Dt,Ke=x,rr=_,Ue=(M-x)*$t+he*qt+ze*Ht,hr=(I-_)*$t+Re*qt+Pe*Ht,ke=he*le+ze*ie,Lr=Re*le+Pe*ie,yr=ze*ie,xr=Pe*ie,Sr=0,mr=0,on=Math.ceil(1/Et),Or=new Float32Array((on+1)*3),Or=[],Sn=0,mr=0;mr<on+1;mr++)Or[Sn++]=Ke,Or[Sn++]=rr,Ke+=Ue,rr+=hr,Ue+=ke,hr+=Lr,ke+=yr,Lr+=xr,Sr+=Et,Sr>1&&(Ke=Ue>0?Math.min(Ke,yt):Math.max(Ke,yt),rr=hr>0?Math.min(rr,Dt):Math.max(rr,Dt));this.addPolyline(Or,v,g)},addLine:function(e,o,u,c){this.addPolyline([e,o],u,c)},addPolyline:function(){var n=Wn.create(),e=Wn.create(),o=Wn.create(),u=Wn.create(),c=[],v=[],g=[];return function(x,_,M,I,F){if(!!x.length){var ut=typeof x[0]!="number";if(F==null&&(F=ut?x.length:x.length/2),!(F<2)){I==null&&(I=0),M==null&&(M=1),this._itemVertexOffsets.push(this._vertexOffset);for(var yt=ut?typeof _[0]!="number":_.length/4===F,Dt=this.attributes.position,Et=this.attributes.color,Pt=this.attributes.offset,Ht=this.attributes.normal,$t=this.indices,qt=this._vertexOffset,le,ie=0;ie<F;ie++){if(ut)c=x[ie+I],yt?le=_[ie+I]:le=_;else{var he=ie*2+I;if(c=c||[],c[0]=x[he],c[1]=x[he+1],yt){var Re=ie*4+I;le=le||[],le[0]=_[Re],le[1]=_[Re+1],le[2]=_[Re+2],le[3]=_[Re+3]}else le=_}if(this.useNativeLine)ie>1&&(Dt.copy(qt,qt-1),Et.copy(qt,qt-1),qt++);else{var ze;if(ie<F-1){if(ut)Wn.copy(v,x[ie+1]);else{var he=(ie+1)*2+I;v=v||[],v[0]=x[he],v[1]=x[he+1]}if(ie>0){Wn.sub(n,c,g),Wn.sub(e,v,c),Wn.normalize(n,n),Wn.normalize(e,e),Wn.add(u,n,e),Wn.normalize(u,u);var Pe=M/2*Math.min(1/Wn.dot(n,u),2);o[0]=-u[1],o[1]=u[0],ze=Pe}else Wn.sub(n,v,c),Wn.normalize(n,n),o[0]=-n[1],o[1]=n[0],ze=M/2}else Wn.sub(n,c,g),Wn.normalize(n,n),o[0]=-n[1],o[1]=n[0],ze=M/2;Ht.set(qt,o),Ht.set(qt+1,o),Pt.set(qt,ze),Pt.set(qt+1,-ze),Wn.copy(g,c),Dt.set(qt,c),Dt.set(qt+1,c),Et.set(qt,le),Et.set(qt+1,le),qt+=2}if(this.useNativeLine)Et.set(qt,le),Dt.set(qt,c),qt++;else if(ie>0){var Ke=this._faceOffset*3,$t=this.indices;$t[Ke]=qt-4,$t[Ke+1]=qt-3,$t[Ke+2]=qt-2,$t[Ke+3]=qt-3,$t[Ke+4]=qt-1,$t[Ke+5]=qt-2,this._faceOffset+=2}}this._vertexOffset=qt}}}}(),setItemColor:function(e,o){for(var u=this._itemVertexOffsets[e],c=e<this._itemVertexOffsets.length-1?this._itemVertexOffsets[e+1]:this._vertexOffset,v=u;v<c;v++)this.attributes.color.set(v,o);this.dirty("color")}});B.Y.defaults(Qu.prototype,Cs);var vd=Qu,vm=`@export ecgl.forceAtlas2.updateNodeRepulsion

#define NODE_COUNT 0

uniform sampler2D positionTex;

uniform vec2 textureSize;
uniform float gravity;
uniform float scaling;
uniform vec2 gravityCenter;

uniform bool strongGravityMode;
uniform bool preventOverlap;

varying vec2 v_Texcoord;

void main() {

 vec4 n0 = texture2D(positionTex, v_Texcoord);

 vec2 force = vec2(0.0);
 for (int i = 0; i < NODE_COUNT; i++) {
 vec2 uv = vec2(
 mod(float(i), textureSize.x) / (textureSize.x - 1.0),
 floor(float(i) / textureSize.x) / (textureSize.y - 1.0)
 );
 vec4 n1 = texture2D(positionTex, uv);

 vec2 dir = n0.xy - n1.xy;
 float d2 = dot(dir, dir);

 if (d2 > 0.0) {
 float factor = 0.0;
 if (preventOverlap) {
 float d = sqrt(d2);
 d = d - n0.w - n1.w;
 if (d > 0.0) {
 factor = scaling * n0.z * n1.z / (d * d);
 }
 else if (d < 0.0) {
 factor = scaling * 100.0 * n0.z * n1.z;
 }
 }
 else {
 factor = scaling * n0.z * n1.z / d2;
 }
 force += dir * factor;
 }
 }

 vec2 dir = gravityCenter - n0.xy;
 float d = 1.0;
 if (!strongGravityMode) {
 d = length(dir);
 }

 force += dir * n0.z * gravity / (d + 1.0);

 gl_FragColor = vec4(force, 0.0, 1.0);
}
@end

@export ecgl.forceAtlas2.updateEdgeAttraction.vertex

attribute vec2 node1;
attribute vec2 node2;
attribute float weight;

uniform sampler2D positionTex;
uniform float edgeWeightInfluence;
uniform bool preventOverlap;
uniform bool linLogMode;

uniform vec2 windowSize: WINDOW_SIZE;

varying vec2 v_Force;

void main() {

 vec4 n0 = texture2D(positionTex, node1);
 vec4 n1 = texture2D(positionTex, node2);

 vec2 dir = n1.xy - n0.xy;
 float d = length(dir);
 float w;
 if (edgeWeightInfluence == 0.0) {
 w = 1.0;
 }
 else if (edgeWeightInfluence == 1.0) {
 w = weight;
 }
 else {
 w = pow(weight, edgeWeightInfluence);
 }
 vec2 offset = vec2(1.0 / windowSize.x, 1.0 / windowSize.y);
 vec2 scale = vec2((windowSize.x - 1.0) / windowSize.x, (windowSize.y - 1.0) / windowSize.y);
 vec2 pos = node1 * scale * 2.0 - 1.0;
 gl_Position = vec4(pos + offset, 0.0, 1.0);
 gl_PointSize = 1.0;

 float factor;
 if (preventOverlap) {
 d = d - n1.w - n0.w;
 }
 if (d <= 0.0) {
 v_Force = vec2(0.0);
 return;
 }

 if (linLogMode) {
 factor = w * log(d) / d;
 }
 else {
 factor = w;
 }
 v_Force = dir * factor;
}
@end

@export ecgl.forceAtlas2.updateEdgeAttraction.fragment

varying vec2 v_Force;

void main() {
 gl_FragColor = vec4(v_Force, 0.0, 0.0);
}
@end

@export ecgl.forceAtlas2.calcWeightedSum.vertex

attribute vec2 node;

varying vec2 v_NodeUv;

void main() {

 v_NodeUv = node;
 gl_Position = vec4(0.0, 0.0, 0.0, 1.0);
 gl_PointSize = 1.0;
}
@end

@export ecgl.forceAtlas2.calcWeightedSum.fragment

varying vec2 v_NodeUv;

uniform sampler2D positionTex;
uniform sampler2D forceTex;
uniform sampler2D forcePrevTex;

void main() {
 vec2 force = texture2D(forceTex, v_NodeUv).rg;
 vec2 forcePrev = texture2D(forcePrevTex, v_NodeUv).rg;

 float mass = texture2D(positionTex, v_NodeUv).z;
 float swing = length(force - forcePrev) * mass;
 float traction = length(force + forcePrev) * 0.5 * mass;

 gl_FragColor = vec4(swing, traction, 0.0, 0.0);
}
@end

@export ecgl.forceAtlas2.calcGlobalSpeed

uniform sampler2D globalSpeedPrevTex;
uniform sampler2D weightedSumTex;
uniform float jitterTolerence;

void main() {
 vec2 weightedSum = texture2D(weightedSumTex, vec2(0.5)).xy;
 float prevGlobalSpeed = texture2D(globalSpeedPrevTex, vec2(0.5)).x;
 float globalSpeed = jitterTolerence * jitterTolerence
 * weightedSum.y / weightedSum.x;
 if (prevGlobalSpeed > 0.0) {
 globalSpeed = min(globalSpeed / prevGlobalSpeed, 1.5) * prevGlobalSpeed;
 }
 gl_FragColor = vec4(globalSpeed, 0.0, 0.0, 1.0);
}
@end

@export ecgl.forceAtlas2.updatePosition

uniform sampler2D forceTex;
uniform sampler2D forcePrevTex;
uniform sampler2D positionTex;
uniform sampler2D globalSpeedTex;

varying vec2 v_Texcoord;

void main() {
 vec2 force = texture2D(forceTex, v_Texcoord).xy;
 vec2 forcePrev = texture2D(forcePrevTex, v_Texcoord).xy;
 vec4 node = texture2D(positionTex, v_Texcoord);

 float globalSpeed = texture2D(globalSpeedTex, vec2(0.5)).r;
 float swing = length(force - forcePrev);
 float speed = 0.1 * globalSpeed / (0.1 + globalSpeed * sqrt(swing));

 float df = length(force);
 if (df > 0.0) {
 speed = min(df * speed, 10.0) / df;

 gl_FragColor = vec4(node.xy + speed * force, node.zw);
 }
 else {
 gl_FragColor = node;
 }
}
@end

@export ecgl.forceAtlas2.edges.vertex
uniform mat4 worldViewProjection : WORLDVIEWPROJECTION;

attribute vec2 node;
attribute vec4 a_Color : COLOR;
varying vec4 v_Color;

uniform sampler2D positionTex;

void main()
{
 gl_Position = worldViewProjection * vec4(
 texture2D(positionTex, node).xy, -10.0, 1.0
 );
 v_Color = a_Color;
}
@end

@export ecgl.forceAtlas2.edges.fragment
uniform vec4 color : [1.0, 1.0, 1.0, 1.0];
varying vec4 v_Color;
void main() {
 gl_FragColor = color * v_Color;
}
@end`;se.Shader.import(vm);var Ju={repulsionByDegree:!0,linLogMode:!1,strongGravityMode:!1,gravity:1,scaling:1,edgeWeightInfluence:1,jitterTolerence:.1,preventOverlap:!1,dissuadeHubs:!1,gravityCenter:null};function ti(n){var e={type:se.Texture.FLOAT,minFilter:se.Texture.NEAREST,magFilter:se.Texture.NEAREST};this._positionSourceTex=new se.Texture2D(e),this._positionSourceTex.flipY=!1,this._positionTex=new se.Texture2D(e),this._positionPrevTex=new se.Texture2D(e),this._forceTex=new se.Texture2D(e),this._forcePrevTex=new se.Texture2D(e),this._weightedSumTex=new se.Texture2D(e),this._weightedSumTex.width=this._weightedSumTex.height=1,this._globalSpeedTex=new se.Texture2D(e),this._globalSpeedPrevTex=new se.Texture2D(e),this._globalSpeedTex.width=this._globalSpeedTex.height=1,this._globalSpeedPrevTex.width=this._globalSpeedPrevTex.height=1,this._nodeRepulsionPass=new Gn({fragment:se.Shader.source("ecgl.forceAtlas2.updateNodeRepulsion")}),this._positionPass=new Gn({fragment:se.Shader.source("ecgl.forceAtlas2.updatePosition")}),this._globalSpeedPass=new Gn({fragment:se.Shader.source("ecgl.forceAtlas2.calcGlobalSpeed")}),this._copyPass=new Gn({fragment:se.Shader.source("clay.compositor.output")});var o=function(c){c.blendEquation(c.FUNC_ADD),c.blendFunc(c.ONE,c.ONE)};this._edgeForceMesh=new se.Mesh({geometry:new se.Geometry({attributes:{node1:new se.Geometry.Attribute("node1","float",2),node2:new se.Geometry.Attribute("node2","float",2),weight:new se.Geometry.Attribute("weight","float",1)},dynamic:!0,mainAttribute:"node1"}),material:new se.Material({transparent:!0,shader:se.createShader("ecgl.forceAtlas2.updateEdgeAttraction"),blend:o,depthMask:!1,depthText:!1}),mode:se.Mesh.POINTS}),this._weightedSumMesh=new se.Mesh({geometry:new se.Geometry({attributes:{node:new se.Geometry.Attribute("node","float",2)},dynamic:!0,mainAttribute:"node"}),material:new se.Material({transparent:!0,shader:se.createShader("ecgl.forceAtlas2.calcWeightedSum"),blend:o,depthMask:!1,depthText:!1}),mode:se.Mesh.POINTS}),this._framebuffer=new Kn({depthBuffer:!1}),this._dummyCamera=new se.OrthographicCamera({left:-1,right:1,top:1,bottom:-1,near:0,far:100}),this._globalSpeed=0}ti.prototype.updateOption=function(n){for(var e in Ju)this[e]=Ju[e];var o=this._nodes.length;if(o>5e4?this.jitterTolerence=10:o>5e3?this.jitterTolerence=1:this.jitterTolerence=.1,o>100?this.scaling=2:this.scaling=10,n)for(var e in Ju)n[e]!=null&&(this[e]=n[e]);if(this.repulsionByDegree)for(var u=this._positionSourceTex.pixels,c=0;c<this._nodes.length;c++)u[c*4+2]=(this._nodes[c].degree||0)+1},ti.prototype._updateGravityCenter=function(n){var e=this._nodes,o=this._edges;if(this.gravityCenter)this._gravityCenter=this.gravityCenter;else{for(var u=[Infinity,Infinity],c=[-Infinity,-Infinity],v=0;v<e.length;v++)u[0]=Math.min(e[v].x,u[0]),u[1]=Math.min(e[v].y,u[1]),c[0]=Math.max(e[v].x,c[0]),c[1]=Math.max(e[v].y,c[1]);this._gravityCenter=[(u[0]+c[0])*.5,(u[1]+c[1])*.5]}for(var v=0;v<o.length;v++){var g=o[v].node1,x=o[v].node2;e[g].degree=(e[g].degree||0)+1,e[x].degree=(e[x].degree||0)+1}},ti.prototype.initData=function(n,e){this._nodes=n,this._edges=e,this._updateGravityCenter();var o=Math.ceil(Math.sqrt(n.length)),u=o,c=new Float32Array(o*u*4);this._resize(o,u);for(var v=0,g=0;g<n.length;g++){var x=n[g];c[v++]=x.x||0,c[v++]=x.y||0,c[v++]=x.mass||1,c[v++]=x.size||1}this._positionSourceTex.pixels=c;var _=this._edgeForceMesh.geometry,M=e.length;_.attributes.node1.init(M*2),_.attributes.node2.init(M*2),_.attributes.weight.init(M*2);for(var I=[],g=0;g<e.length;g++){var F=_.attributes,ut=e[g].weight;ut==null&&(ut=1),F.node1.set(g,this.getNodeUV(e[g].node1,I)),F.node2.set(g,this.getNodeUV(e[g].node2,I)),F.weight.set(g,ut),F.node1.set(g+M,this.getNodeUV(e[g].node2,I)),F.node2.set(g+M,this.getNodeUV(e[g].node1,I)),F.weight.set(g+M,ut)}var yt=this._weightedSumMesh.geometry;yt.attributes.node.init(n.length);for(var g=0;g<n.length;g++)yt.attributes.node.set(g,this.getNodeUV(g,I));_.dirty(),yt.dirty(),this._nodeRepulsionPass.material.define("fragment","NODE_COUNT",n.length),this._nodeRepulsionPass.material.setUniform("textureSize",[o,u]),this._inited=!1,this._frame=0},ti.prototype.getNodes=function(){return this._nodes},ti.prototype.getEdges=function(){return this._edges},ti.prototype.step=function(n){this._inited||(this._initFromSource(n),this._inited=!0),this._frame++,this._framebuffer.attach(this._forceTex),this._framebuffer.bind(n);var e=this._nodeRepulsionPass;e.setUniform("strongGravityMode",this.strongGravityMode),e.setUniform("gravity",this.gravity),e.setUniform("gravityCenter",this._gravityCenter),e.setUniform("scaling",this.scaling),e.setUniform("preventOverlap",this.preventOverlap),e.setUniform("positionTex",this._positionPrevTex),e.render(n);var o=this._edgeForceMesh;o.material.set("linLogMode",this.linLogMode),o.material.set("edgeWeightInfluence",this.edgeWeightInfluence),o.material.set("preventOverlap",this.preventOverlap),o.material.set("positionTex",this._positionPrevTex),n.gl.enable(n.gl.BLEND),n.renderPass([o],this._dummyCamera),this._framebuffer.attach(this._weightedSumTex),n.gl.clearColor(0,0,0,0),n.gl.clear(n.gl.COLOR_BUFFER_BIT),n.gl.enable(n.gl.BLEND);var u=this._weightedSumMesh;u.material.set("positionTex",this._positionPrevTex),u.material.set("forceTex",this._forceTex),u.material.set("forcePrevTex",this._forcePrevTex),n.renderPass([u],this._dummyCamera),this._framebuffer.attach(this._globalSpeedTex);var c=this._globalSpeedPass;c.setUniform("globalSpeedPrevTex",this._globalSpeedPrevTex),c.setUniform("weightedSumTex",this._weightedSumTex),c.setUniform("jitterTolerence",this.jitterTolerence),n.gl.disable(n.gl.BLEND),c.render(n);var v=this._positionPass;this._framebuffer.attach(this._positionTex),v.setUniform("globalSpeedTex",this._globalSpeedTex),v.setUniform("positionTex",this._positionPrevTex),v.setUniform("forceTex",this._forceTex),v.setUniform("forcePrevTex",this._forcePrevTex),v.render(n),this._framebuffer.unbind(n),this._swapTexture()},ti.prototype.update=function(n,e,o){e==null&&(e=1),e=Math.max(e,1);for(var u=0;u<e;u++)this.step(n);o&&o()},ti.prototype.getNodePositionTexture=function(){return this._inited?this._positionPrevTex:this._positionSourceTex},ti.prototype.getNodeUV=function(n,e){e=e||[];var o=this._positionTex.width,u=this._positionTex.height;return e[0]=n%o/(o-1),e[1]=Math.floor(n/o)/(u-1)||0,e},ti.prototype.getNodePosition=function(n,e){var o=this._positionArr,u=this._positionTex.width,c=this._positionTex.height,v=u*c;(!o||o.length!==v*4)&&(o=this._positionArr=new Float32Array(v*4)),this._framebuffer.bind(n),this._framebuffer.attach(this._positionPrevTex),n.gl.readPixels(0,0,u,c,n.gl.RGBA,n.gl.FLOAT,o),this._framebuffer.unbind(n),e||(e=new Float32Array(this._nodes.length*2));for(var g=0;g<this._nodes.length;g++)e[g*2]=o[g*4],e[g*2+1]=o[g*4+1];return e},ti.prototype.getTextureData=function(n,e){var o=this["_"+e+"Tex"],u=o.width,c=o.height;this._framebuffer.bind(n),this._framebuffer.attach(o);var v=new Float32Array(u*c*4);return n.gl.readPixels(0,0,u,c,n.gl.RGBA,n.gl.FLOAT,v),this._framebuffer.unbind(n),v},ti.prototype.getTextureSize=function(){return{width:this._positionTex.width,height:this._positionTex.height}},ti.prototype.isFinished=function(n){return this._frame>n},ti.prototype._swapTexture=function(){var n=this._positionPrevTex;this._positionPrevTex=this._positionTex,this._positionTex=n;var n=this._forcePrevTex;this._forcePrevTex=this._forceTex,this._forceTex=n;var n=this._globalSpeedPrevTex;this._globalSpeedPrevTex=this._globalSpeedTex,this._globalSpeedTex=n},ti.prototype._initFromSource=function(n){this._framebuffer.attach(this._positionPrevTex),this._framebuffer.bind(n),this._copyPass.setUniform("texture",this._positionSourceTex),this._copyPass.render(n),n.gl.clearColor(0,0,0,0),this._framebuffer.attach(this._forcePrevTex),n.gl.clear(n.gl.COLOR_BUFFER_BIT),this._framebuffer.attach(this._globalSpeedPrevTex),n.gl.clear(n.gl.COLOR_BUFFER_BIT),this._framebuffer.unbind(n)},ti.prototype._resize=function(n,e){["_positionSourceTex","_positionTex","_positionPrevTex","_forceTex","_forcePrevTex"].forEach(function(o){this[o].width=n,this[o].height=e,this[o].dirty()},this)},ti.prototype.dispose=function(n){this._framebuffer.dispose(n),this._copyPass.dispose(n),this._nodeRepulsionPass.dispose(n),this._positionPass.dispose(n),this._globalSpeedPass.dispose(n),this._edgeForceMesh.geometry.dispose(n),this._weightedSumMesh.geometry.dispose(n),this._positionSourceTex.dispose(n),this._positionTex.dispose(n),this._positionPrevTex.dispose(n),this._forceTex.dispose(n),this._forcePrevTex.dispose(n),this._weightedSumTex.dispose(n),this._globalSpeedTex.dispose(n),this._globalSpeedPrevTex.dispose(n)};var $u=ti;function dm(){var n={create:function(){return new Float32Array(2)},dist:function(M,I){var F=I[0]-M[0],ut=I[1]-M[1];return Math.sqrt(F*F+ut*ut)},len:function(M){var I=M[0],F=M[1];return Math.sqrt(I*I+F*F)},scaleAndAdd:function(M,I,F,ut){return M[0]=I[0]+F[0]*ut,M[1]=I[1]+F[1]*ut,M},scale:function(M,I,F){return M[0]=I[0]*F,M[1]=I[1]*F,M},add:function(M,I,F){return M[0]=I[0]+F[0],M[1]=I[1]+F[1],M},sub:function(M,I,F){return M[0]=I[0]-F[0],M[1]=I[1]-F[1],M},normalize:function(M,I){var F=I[0],ut=I[1],yt=F*F+ut*ut;return yt>0&&(yt=1/Math.sqrt(yt),M[0]=I[0]*yt,M[1]=I[1]*yt),M},negate:function(M,I){return M[0]=-I[0],M[1]=-I[1],M},copy:function(M,I){return M[0]=I[0],M[1]=I[1],M},set:function(M,I,F){return M[0]=I,M[1]=F,M}};function e(){this.subRegions=[],this.nSubRegions=0,this.node=null,this.mass=0,this.centerOfMass=null,this.bbox=new Float32Array(4),this.size=0}var o=e.prototype;o.beforeUpdate=function(){for(var _=0;_<this.nSubRegions;_++)this.subRegions[_].beforeUpdate();this.mass=0,this.centerOfMass&&(this.centerOfMass[0]=0,this.centerOfMass[1]=0),this.nSubRegions=0,this.node=null},o.afterUpdate=function(){this.subRegions.length=this.nSubRegions;for(var _=0;_<this.nSubRegions;_++)this.subRegions[_].afterUpdate()},o.addNode=function(_){if(this.nSubRegions===0)if(this.node==null){this.node=_;return}else this._addNodeToSubRegion(this.node),this.node=null;this._addNodeToSubRegion(_),this._updateCenterOfMass(_)},o.findSubRegion=function(_,M){for(var I=0;I<this.nSubRegions;I++){var F=this.subRegions[I];if(F.contain(_,M))return F}},o.contain=function(_,M){return this.bbox[0]<=_&&this.bbox[2]>=_&&this.bbox[1]<=M&&this.bbox[3]>=M},o.setBBox=function(_,M,I,F){this.bbox[0]=_,this.bbox[1]=M,this.bbox[2]=I,this.bbox[3]=F,this.size=(I-_+F-M)/2},o._newSubRegion=function(){var _=this.subRegions[this.nSubRegions];return _||(_=new e,this.subRegions[this.nSubRegions]=_),this.nSubRegions++,_},o._addNodeToSubRegion=function(_){var M=this.findSubRegion(_.position[0],_.position[1]),I=this.bbox;if(!M){var F=(I[0]+I[2])/2,ut=(I[1]+I[3])/2,yt=(I[2]-I[0])/2,Dt=(I[3]-I[1])/2,Et=_.position[0]>=F?1:0,Pt=_.position[1]>=ut?1:0,M=this._newSubRegion();M.setBBox(Et*yt+I[0],Pt*Dt+I[1],(Et+1)*yt+I[0],(Pt+1)*Dt+I[1])}M.addNode(_)},o._updateCenterOfMass=function(_){this.centerOfMass==null&&(this.centerOfMass=new Float32Array(2));var M=this.centerOfMass[0]*this.mass,I=this.centerOfMass[1]*this.mass;M+=_.position[0]*_.mass,I+=_.position[1]*_.mass,this.mass+=_.mass,this.centerOfMass[0]=M/this.mass,this.centerOfMass[1]=I/this.mass};function u(){this.position=new Float32Array(2),this.force=n.create(),this.forcePrev=n.create(),this.mass=1,this.inDegree=0,this.outDegree=0}function c(_,M){this.source=_,this.target=M,this.weight=1}function v(){this.autoSettings=!0,this.barnesHutOptimize=!0,this.barnesHutTheta=1.5,this.repulsionByDegree=!0,this.linLogMode=!1,this.strongGravityMode=!1,this.gravity=1,this.scaling=1,this.edgeWeightInfluence=1,this.jitterTolerence=.1,this.preventOverlap=!1,this.dissuadeHubs=!1,this.rootRegion=new e,this.rootRegion.centerOfMass=n.create(),this.nodes=[],this.edges=[],this.bbox=new Float32Array(4),this.gravityCenter=null,this._massArr=null,this._swingingArr=null,this._sizeArr=null,this._globalSpeed=0}var g=v.prototype;g.initNodes=function(_,M,I){var F=M.length;this.nodes.length=0;for(var ut=typeof I!="undefined",yt=0;yt<F;yt++){var Dt=new u;Dt.position[0]=_[yt*2],Dt.position[1]=_[yt*2+1],Dt.mass=M[yt],ut&&(Dt.size=I[yt]),this.nodes.push(Dt)}this._massArr=M,this._swingingArr=new Float32Array(F),ut&&(this._sizeArr=I)},g.initEdges=function(_,M){var I=_.length/2;this.edges.length=0;for(var F=0;F<I;F++){var ut=_[F*2],yt=_[F*2+1],Dt=this.nodes[ut],Et=this.nodes[yt];if(!Dt||!Et){console.error("Node not exists, try initNodes before initEdges");return}Dt.outDegree++,Et.inDegree++;var Pt=new c(Dt,Et);M&&(Pt.weight=M[F]),this.edges.push(Pt)}},g.updateSettings=function(){if(this.repulsionByDegree)for(var _=0;_<this.nodes.length;_++){var M=this.nodes[_];M.mass=M.inDegree+M.outDegree+1}else for(var _=0;_<this.nodes.length;_++){var M=this.nodes[_];M.mass=this._massArr[_]}},g.update=function(){var _=this.nodes.length;if(this.updateSettings(),this.updateBBox(),this.barnesHutOptimize){this.rootRegion.setBBox(this.bbox[0],this.bbox[1],this.bbox[2],this.bbox[3]),this.rootRegion.beforeUpdate();for(var M=0;M<_;M++)this.rootRegion.addNode(this.nodes[M]);this.rootRegion.afterUpdate()}for(var M=0;M<_;M++){var I=this.nodes[M];n.copy(I.forcePrev,I.force),n.set(I.force,0,0)}for(var M=0;M<_;M++){var F=this.nodes[M];if(this.barnesHutOptimize)this.applyRegionToNodeRepulsion(this.rootRegion,F);else for(var ut=M+1;ut<_;ut++){var yt=this.nodes[ut];this.applyNodeToNodeRepulsion(F,yt,!1)}this.gravity>0&&(this.strongGravityMode?this.applyNodeStrongGravity(F):this.applyNodeGravity(F))}for(var M=0;M<this.edges.length;M++)this.applyEdgeAttraction(this.edges[M]);for(var Dt=0,Et=0,Pt=n.create(),M=0;M<_;M++){var I=this.nodes[M],Ht=n.dist(I.force,I.forcePrev);Dt+=Ht*I.mass,n.add(Pt,I.force,I.forcePrev);var $t=n.len(Pt)*.5;Et+=$t*I.mass,this._swingingArr[M]=Ht}var qt=this.jitterTolerence*this.jitterTolerence*Et/Dt;this._globalSpeed>0&&(qt=Math.min(qt/this._globalSpeed,1.5)*this._globalSpeed),this._globalSpeed=qt;for(var M=0;M<_;M++){var I=this.nodes[M],Ht=this._swingingArr[M],le=.1*qt/(1+qt*Math.sqrt(Ht)),ie=n.len(I.force);ie>0&&(le=Math.min(ie*le,10)/ie,n.scaleAndAdd(I.position,I.position,I.force,le))}},g.applyRegionToNodeRepulsion=function(){var _=n.create();return function(I,F){if(I.node)this.applyNodeToNodeRepulsion(I.node,F,!0);else{n.sub(_,F.position,I.centerOfMass);var ut=_[0]*_[0]+_[1]*_[1];if(ut>this.barnesHutTheta*I.size*I.size){var yt=this.scaling*F.mass*I.mass/ut;n.scaleAndAdd(F.force,F.force,_,yt)}else for(var Dt=0;Dt<I.nSubRegions;Dt++)this.applyRegionToNodeRepulsion(I.subRegions[Dt],F)}}}(),g.applyNodeToNodeRepulsion=function(){var _=n.create();return function(I,F,ut){if(I!=F){n.sub(_,I.position,F.position);var yt=_[0]*_[0]+_[1]*_[1];if(yt!==0){var Dt;if(this.preventOverlap){var Et=Math.sqrt(yt);if(Et=Et-I.size-F.size,Et>0)Dt=this.scaling*I.mass*F.mass/(Et*Et);else if(Et<0)Dt=this.scaling*100*I.mass*F.mass;else return}else Dt=this.scaling*I.mass*F.mass/yt;n.scaleAndAdd(I.force,I.force,_,Dt),n.scaleAndAdd(F.force,F.force,_,-Dt)}}}}(),g.applyEdgeAttraction=function(){var _=n.create();return function(I){var F=I.source,ut=I.target;n.sub(_,F.position,ut.position);var yt=n.len(_),Dt;this.edgeWeightInfluence===0?Dt=1:this.edgeWeightInfluence===1?Dt=I.weight:Dt=Math.pow(I.weight,this.edgeWeightInfluence);var Et;this.preventOverlap&&(yt=yt-F.size-ut.size,yt<=0)||(this.linLogMode?Et=-Dt*Math.log(yt+1)/(yt+1):Et=-Dt,n.scaleAndAdd(F.force,F.force,_,Et),n.scaleAndAdd(ut.force,ut.force,_,-Et))}}(),g.applyNodeGravity=function(){var _=n.create();return function(M){n.sub(_,this.gravityCenter,M.position);var I=n.len(_);n.scaleAndAdd(M.force,M.force,_,this.gravity*M.mass/(I+1))}}(),g.applyNodeStrongGravity=function(){var _=n.create();return function(M){n.sub(_,this.gravityCenter,M.position),n.scaleAndAdd(M.force,M.force,_,this.gravity*M.mass)}}(),g.updateBBox=function(){for(var _=Infinity,M=Infinity,I=-Infinity,F=-Infinity,ut=0;ut<this.nodes.length;ut++){var yt=this.nodes[ut].position;_=Math.min(_,yt[0]),M=Math.min(M,yt[1]),I=Math.max(I,yt[0]),F=Math.max(F,yt[1])}this.bbox[0]=_,this.bbox[1]=M,this.bbox[2]=I,this.bbox[3]=F},g.getGlobalSpeed=function(){return this._globalSpeed};var x=null;self.onmessage=function(_){switch(_.data.cmd){case"init":x=new v,x.initNodes(_.data.nodesPosition,_.data.nodesMass,_.data.nodesSize),x.initEdges(_.data.edges,_.data.edgesWeight);break;case"updateConfig":if(x)for(var M in _.data.config)x[M]=_.data.config[M];break;case"update":var I=_.data.steps;if(x){for(var F=0;F<I;F++)x.update();for(var ut=x.nodes.length,yt=new Float32Array(ut*2),F=0;F<ut;F++){var Dt=x.nodes[F];yt[F*2]=Dt.position[0],yt[F*2+1]=Dt.position[1]}self.postMessage({buffer:yt.buffer,globalSpeed:x.getGlobalSpeed()},[yt.buffer])}else{var Et=new Float32Array;self.postMessage({buffer:Et.buffer,globalSpeed:x.getGlobalSpeed()},[Et.buffer])}break}}}var dd=dm,Xl=dd.toString();Xl=Xl.slice(Xl.indexOf("{")+1,Xl.lastIndexOf("}"));var Zl={barnesHutOptimize:!0,barnesHutTheta:1.5,repulsionByDegree:!0,linLogMode:!1,strongGravityMode:!1,gravity:1,scaling:1,edgeWeightInfluence:1,jitterTolerence:.1,preventOverlap:!1,dissuadeHubs:!1,gravityCenter:null},Xi=function(e){for(var o in Zl)this[o]=Zl[o];if(e)for(var o in e)this[o]=e[o];this._nodes=[],this._edges=[],this._disposed=!1,this._positionTex=new Gr({type:Mr.FLOAT,flipY:!1,minFilter:Mr.NEAREST,magFilter:Mr.NEAREST})};Xi.prototype.initData=function(n,e){var o=new Blob([Xl]),u=window.URL.createObjectURL(o);this._worker=new Worker(u),this._worker.onmessage=this._$onupdate.bind(this),this._nodes=n,this._edges=e,this._frame=0;for(var c=n.length,v=e.length,g=new Float32Array(c*2),x=new Float32Array(c),_=new Float32Array(c),M=new Float32Array(v*2),I=new Float32Array(v),F=0;F<n.length;F++){var ut=n[F];g[F*2]=ut.x,g[F*2+1]=ut.y,x[F]=ut.mass==null?1:ut.mass,_[F]=ut.size==null?1:ut.size}for(var F=0;F<e.length;F++){var yt=e[F],Dt=yt.node1,Et=yt.node2;M[F*2]=Dt,M[F*2+1]=Et,I[F]=yt.weight==null?1:yt.weight}var Pt=Math.ceil(Math.sqrt(n.length)),Ht=Pt,$t=new Float32Array(Pt*Ht*4),qt=this._positionTex;qt.width=Pt,qt.height=Ht,qt.pixels=$t,this._worker.postMessage({cmd:"init",nodesPosition:g,nodesMass:x,nodesSize:_,edges:M,edgesWeight:I}),this._globalSpeed=Infinity},Xi.prototype.updateOption=function(n){var e={};for(var o in Zl)e[o]=Zl[o];var u=this._nodes,c=this._edges,v=u.length;if(v>5e4?e.jitterTolerence=10:v>5e3?e.jitterTolerence=1:e.jitterTolerence=.1,v>100?e.scaling=2:e.scaling=10,v>1e3?e.barnesHutOptimize=!0:e.barnesHutOptimize=!1,n)for(var o in Zl)n[o]!=null&&(e[o]=n[o]);if(!e.gravityCenter){for(var g=[Infinity,Infinity],x=[-Infinity,-Infinity],_=0;_<u.length;_++)g[0]=Math.min(u[_].x,g[0]),g[1]=Math.min(u[_].y,g[1]),x[0]=Math.max(u[_].x,x[0]),x[1]=Math.max(u[_].y,x[1]);e.gravityCenter=[(g[0]+x[0])*.5,(g[1]+x[1])*.5]}for(var _=0;_<c.length;_++){var M=c[_].node1,I=c[_].node2;u[M].degree=(u[M].degree||0)+1,u[I].degree=(u[I].degree||0)+1}this._worker&&this._worker.postMessage({cmd:"updateConfig",config:e})},Xi.prototype.update=function(n,e,o){e==null&&(e=1),e=Math.max(e,1),this._frame+=e,this._onupdate=o,this._worker&&this._worker.postMessage({cmd:"update",steps:Math.round(e)})},Xi.prototype._$onupdate=function(n){if(!this._disposed){var e=new Float32Array(n.data.buffer);this._globalSpeed=n.data.globalSpeed,this._positionArr=e,this._updateTexture(e),this._onupdate&&this._onupdate()}},Xi.prototype.getNodePositionTexture=function(){return this._positionTex},Xi.prototype.getNodeUV=function(n,e){e=e||[];var o=this._positionTex.width,u=this._positionTex.height;return e[0]=n%o/(o-1),e[1]=Math.floor(n/o)/(u-1),e},Xi.prototype.getNodes=function(){return this._nodes},Xi.prototype.getEdges=function(){return this._edges},Xi.prototype.isFinished=function(n){return this._frame>n},Xi.prototype.getNodePosition=function(n,e){if(e||(e=new Float32Array(this._nodes.length*2)),this._positionArr)for(var o=0;o<this._positionArr.length;o++)e[o]=this._positionArr[o];return e},Xi.prototype._updateTexture=function(n){for(var e=this._positionTex.pixels,o=0,u=0;u<n.length;)e[o++]=n[u++],e[o++]=n[u++],e[o++]=1,e[o++]=1;this._positionTex.dirty()},Xi.prototype.dispose=function(n){this._disposed=!0,this._worker=null};var pd=Xi,pm=W.extend(function(){return{zr:null,viewGL:null,minZoom:.2,maxZoom:5,_needsUpdate:!1,_dx:0,_dy:0,_zoom:1}},function(){this._mouseDownHandler=this._mouseDownHandler.bind(this),this._mouseWheelHandler=this._mouseWheelHandler.bind(this),this._mouseMoveHandler=this._mouseMoveHandler.bind(this),this._mouseUpHandler=this._mouseUpHandler.bind(this),this._update=this._update.bind(this)},{init:function(){var e=this.zr;e.on("mousedown",this._mouseDownHandler),e.on("mousewheel",this._mouseWheelHandler),e.on("globalout",this._mouseUpHandler),e.animation.on("frame",this._update)},setTarget:function(e){this._target=e},setZoom:function(e){this._zoom=Math.max(Math.min(e,this.maxZoom),this.minZoom),this._needsUpdate=!0},setOffset:function(e){this._dx=e[0],this._dy=e[1],this._needsUpdate=!0},getZoom:function(){return this._zoom},getOffset:function(){return[this._dx,this._dy]},_update:function(){if(!!this._target&&!!this._needsUpdate){var e=this._target,o=this._zoom;e.position.x=this._dx,e.position.y=this._dy,e.scale.set(o,o,o),this.zr.refresh(),this._needsUpdate=!1,this.trigger("update")}},_mouseDownHandler:function(e){if(!e.target){var o=e.offsetX,u=e.offsetY;if(!(this.viewGL&&!this.viewGL.containPoint(o,u))){this.zr.on("mousemove",this._mouseMoveHandler),this.zr.on("mouseup",this._mouseUpHandler);var c=this._convertPos(o,u);this._x=c.x,this._y=c.y}}},_convertPos:function(e,o){var u=this.viewGL.camera,c=this.viewGL.viewport;return{x:(e-c.x)/c.width*(u.right-u.left)+u.left,y:(o-c.y)/c.height*(u.bottom-u.top)+u.top}},_mouseMoveHandler:function(e){var o=this._convertPos(e.offsetX,e.offsetY);this._dx+=o.x-this._x,this._dy+=o.y-this._y,this._x=o.x,this._y=o.y,this._needsUpdate=!0},_mouseUpHandler:function(e){this.zr.off("mousemove",this._mouseMoveHandler),this.zr.off("mouseup",this._mouseUpHandler)},_mouseWheelHandler:function(e){e=e.event;var o=e.wheelDelta||-e.detail;if(o!==0){var u=e.offsetX,c=e.offsetY;if(!(this.viewGL&&!this.viewGL.containPoint(u,c))){var v=o>0?1.1:.9,g=Math.max(Math.min(this._zoom*v,this.maxZoom),this.minZoom);v=g/this._zoom;var x=this._convertPos(u,c),_=(x.x-this._dx)*(v-1),M=(x.y-this._dy)*(v-1);this._dx-=_,this._dy-=M,this._zoom=g,this._needsUpdate=!0}}},dispose:function(){var e=this.zr;e.off("mousedown",this._mouseDownHandler),e.off("mousemove",this._mouseMoveHandler),e.off("mouseup",this._mouseUpHandler),e.off("mousewheel",this._mouseWheelHandler),e.off("globalout",this._mouseUpHandler),e.animation.off("frame",this._update)}}),gm=pm,mm=`@export ecgl.lines2D.vertex

uniform mat4 worldViewProjection : WORLDVIEWPROJECTION;

attribute vec2 position: POSITION;
attribute vec4 a_Color : COLOR;
varying vec4 v_Color;

#ifdef POSITIONTEXTURE_ENABLED
uniform sampler2D positionTexture;
#endif

void main()
{
 gl_Position = worldViewProjection * vec4(position, -10.0, 1.0);

 v_Color = a_Color;
}

@end

@export ecgl.lines2D.fragment

uniform vec4 color : [1.0, 1.0, 1.0, 1.0];

varying vec4 v_Color;

void main()
{
 gl_FragColor = color * v_Color;
}
@end


@export ecgl.meshLines2D.vertex

attribute vec2 position: POSITION;
attribute vec2 normal;
attribute float offset;
attribute vec4 a_Color : COLOR;

uniform mat4 worldViewProjection : WORLDVIEWPROJECTION;
uniform vec4 viewport : VIEWPORT;

varying vec4 v_Color;
varying float v_Miter;

void main()
{
 vec4 p2 = worldViewProjection * vec4(position + normal, -10.0, 1.0);
 gl_Position = worldViewProjection * vec4(position, -10.0, 1.0);

 p2.xy /= p2.w;
 gl_Position.xy /= gl_Position.w;

 vec2 N = normalize(p2.xy - gl_Position.xy);
 gl_Position.xy += N * offset / viewport.zw * 2.0;

 gl_Position.xy *= gl_Position.w;

 v_Color = a_Color;
}
@end


@export ecgl.meshLines2D.fragment

uniform vec4 color : [1.0, 1.0, 1.0, 1.0];

varying vec4 v_Color;
varying float v_Miter;

void main()
{
 gl_FragColor = color * v_Color;
}

@end`,qu=Hn.vec2;se.Shader.import(mm);var ym=1,xm=B.b.extend({type:"graphGL",__ecgl__:!0,init:function(e,o){this.groupGL=new se.Node,this.viewGL=new uo("orthographic"),this.viewGL.camera.left=this.viewGL.camera.right=0,this.viewGL.add(this.groupGL),this._pointsBuilder=new Hl(!0,o),this._forceEdgesMesh=new se.Mesh({material:new se.Material({shader:se.createShader("ecgl.forceAtlas2.edges"),transparent:!0,depthMask:!1,depthTest:!1}),$ignorePicking:!0,geometry:new se.Geometry({attributes:{node:new se.Geometry.Attribute("node","float",2),color:new se.Geometry.Attribute("color","float",4,"COLOR")},dynamic:!0,mainAttribute:"node"}),renderOrder:-1,mode:se.Mesh.LINES}),this._edgesMesh=new se.Mesh({material:new se.Material({shader:se.createShader("ecgl.meshLines2D"),transparent:!0,depthMask:!1,depthTest:!1}),$ignorePicking:!0,geometry:new vd({useNativeLine:!1,dynamic:!0}),renderOrder:-1,culling:!1}),this._layoutId=0,this._control=new gm({zr:o.getZr(),viewGL:this.viewGL}),this._control.setTarget(this.groupGL),this._control.init(),this._clickHandler=this._clickHandler.bind(this)},render:function(e,o,u){this.groupGL.add(this._pointsBuilder.rootNode),this._model=e,this._api=u,this._initLayout(e,o,u),this._pointsBuilder.update(e,o,u),this._forceLayoutInstance instanceof $u||this.groupGL.remove(this._forceEdgesMesh),this._updateCamera(e,u),this._control.off("update"),this._control.on("update",function(){u.dispatchAction({type:"graphGLRoam",seriesId:e.id,zoom:this._control.getZoom(),offset:this._control.getOffset()}),this._pointsBuilder.updateView(this.viewGL.camera)},this),this._control.setZoom(Kr.firstNotNull(e.get("zoom"),1)),this._control.setOffset(e.get("offset")||[0,0]);var c=this._pointsBuilder.getPointsMesh();if(c.off("mousemove",this._mousemoveHandler),c.off("mouseout",this._mouseOutHandler,this),u.getZr().off("click",this._clickHandler),this._pointsBuilder.highlightOnMouseover=!0,e.get("focusNodeAdjacency")){var v=e.get("focusNodeAdjacencyOn");v==="click"?u.getZr().on("click",this._clickHandler):v==="mouseover"&&(c.on("mousemove",this._mousemoveHandler,this),c.on("mouseout",this._mouseOutHandler,this),this._pointsBuilder.highlightOnMouseover=!1)}this._lastMouseOverDataIndex=-1},_clickHandler:function(e){if(!this._layouting){var o=this._pointsBuilder.getPointsMesh().dataIndex;o>=0?this._api.dispatchAction({type:"graphGLFocusNodeAdjacency",seriesId:this._model.id,dataIndex:o}):this._api.dispatchAction({type:"graphGLUnfocusNodeAdjacency",seriesId:this._model.id})}},_mousemoveHandler:function(e){if(!this._layouting){var o=this._pointsBuilder.getPointsMesh().dataIndex;o>=0?o!==this._lastMouseOverDataIndex&&this._api.dispatchAction({type:"graphGLFocusNodeAdjacency",seriesId:this._model.id,dataIndex:o}):this._mouseOutHandler(e),this._lastMouseOverDataIndex=o}},_mouseOutHandler:function(e){this._layouting||(this._api.dispatchAction({type:"graphGLUnfocusNodeAdjacency",seriesId:this._model.id}),this._lastMouseOverDataIndex=-1)},_updateForceEdgesGeometry:function(e,o){var u=this._forceEdgesMesh.geometry,c=o.getEdgeData(),v=0,g=this._forceLayoutInstance,x=c.count()*2;u.attributes.node.init(x),u.attributes.color.init(x),c.each(function(_){var M=e[_];u.attributes.node.set(v,g.getNodeUV(M.node1)),u.attributes.node.set(v+1,g.getNodeUV(M.node2));var I=kn(c,M.dataIndex),F=se.parseColor(I);F[3]*=Kr.firstNotNull(Qn(c,M.dataIndex),1),u.attributes.color.set(v,F),u.attributes.color.set(v+1,F),v+=2}),u.dirty()},_updateMeshLinesGeometry:function(){var e=this._model.getEdgeData(),o=this._edgesMesh.geometry,e=this._model.getEdgeData(),u=this._model.getData().getLayout("points");o.resetOffset(),o.setVertexCount(e.count()*o.getLineVertexCount()),o.setTriangleCount(e.count()*o.getLineTriangleCount());var c=[],v=[],g=["lineStyle","width"];this._originalEdgeColors=new Float32Array(e.count()*4),this._edgeIndicesMap=new Float32Array(e.count()),e.each(function(x){var _=e.graph.getEdgeByIndex(x),M=_.node1.dataIndex*2,I=_.node2.dataIndex*2;c[0]=u[M],c[1]=u[M+1],v[0]=u[I],v[1]=u[I+1];var F=kn(e,_.dataIndex),ut=se.parseColor(F);ut[3]*=Kr.firstNotNull(Qn(e,_.dataIndex),1);var yt=e.getItemModel(_.dataIndex),Dt=Kr.firstNotNull(yt.get(g),1)*this._api.getDevicePixelRatio();o.addLine(c,v,ut,Dt);for(var Et=0;Et<4;Et++)this._originalEdgeColors[_.dataIndex*4+Et]=ut[Et];this._edgeIndicesMap[_.dataIndex]=x},this),o.dirty()},_updateForceNodesGeometry:function(e){for(var o=this._pointsBuilder.getPointsMesh(),u=[],c=0;c<e.count();c++)this._forceLayoutInstance.getNodeUV(c,u),o.geometry.attributes.position.set(c,u);o.geometry.dirty("position")},_initLayout:function(e,o,u){var c=e.get("layout"),v=e.getGraph(),g=e.getBoxLayoutParams(),x=Object(Sl.g)(g,{width:u.getWidth(),height:u.getHeight()});c==="force"&&(c="forceAtlas2"),this.stopLayout(e,o,u,{beforeLayout:!0});var _=e.getData(),M=e.getData();if(c==="forceAtlas2"){var I=e.getModel("forceAtlas2"),F=this._forceLayoutInstance,ut=[],yt=[],Dt=_.getDataExtent("value"),Et=M.getDataExtent("value"),Pt=Kr.firstNotNull(I.get("edgeWeight"),1),Ht=Kr.firstNotNull(I.get("nodeWeight"),1);typeof Pt=="number"&&(Pt=[Pt,Pt]),typeof Ht=="number"&&(Ht=[Ht,Ht]);var $t=0,qt={},le=new Float32Array(_.count()*2);if(v.eachNode(function(he){var Re=he.dataIndex,ze=_.get("value",Re),Pe,Ke;if(_.hasItemOption){var rr=_.getItemModel(Re);Pe=rr.get("x"),Ke=rr.get("y")}Pe==null&&(Pe=x.x+Math.random()*x.width,Ke=x.y+Math.random()*x.height),le[$t*2]=Pe,le[$t*2+1]=Ke,qt[he.id]=$t++;var Ue=B.E.linearMap(ze,Dt,Ht);isNaN(Ue)&&(isNaN(Ht[0])?Ue=1:Ue=Ht[0]),ut.push({x:Pe,y:Ke,mass:Ue,size:_.getItemVisual(Re,"symbolSize")})}),_.setLayout("points",le),v.eachEdge(function(he){var Re=he.dataIndex,ze=_.get("value",Re),Pe=B.E.linearMap(ze,Et,Pt);isNaN(Pe)&&(isNaN(Pt[0])?Pe=1:Pe=Pt[0]),yt.push({node1:qt[he.node1.id],node2:qt[he.node2.id],weight:Pe,dataIndex:Re})}),!F){var ie=I.get("GPU");this._forceLayoutInstance&&(ie&&!(this._forceLayoutInstance instanceof $u)||!ie&&!(this._forceLayoutInstance instanceof pd))&&(this._forceLayoutInstanceToDispose=this._forceLayoutInstance),F=this._forceLayoutInstance=ie?new $u:new pd}F.initData(ut,yt),F.updateOption(I.option),this._updateForceEdgesGeometry(F.getEdges(),e),this._updatePositionTexture(),u.dispatchAction({type:"graphGLStartLayout",from:this.uid})}else{var le=new Float32Array(_.count()*2),$t=0;v.eachNode(function(ze){var Pe=ze.dataIndex,Ke,rr;if(_.hasItemOption){var Ue=_.getItemModel(Pe);Ke=Ue.get("x"),rr=Ue.get("y")}le[$t++]=Ke,le[$t++]=rr}),_.setLayout("points",le),this._updateAfterLayout(e,o,u)}},_updatePositionTexture:function(){var e=this._forceLayoutInstance.getNodePositionTexture();this._pointsBuilder.setPositionTexture(e),this._forceEdgesMesh.material.set("positionTex",e)},startLayout:function(e,o,u,c){if(!(c&&c.from!=null&&c.from!==this.uid)){var v=this.viewGL,u=this._api,g=this._forceLayoutInstance,x=this._model.getData(),_=this._model.getModel("forceAtlas2");if(!!g&&(this.groupGL.remove(this._edgesMesh),this.groupGL.add(this._forceEdgesMesh),!!this._forceLayoutInstance)){this._updateForceNodesGeometry(e.getData()),this._pointsBuilder.hideLabels();var M=this,I=this._layoutId=ym++,F=_.getShallow("maxSteps"),ut=_.getShallow("steps"),yt=0,Dt=Math.max(ut*2,20),Et=function Pt(Ht){if(Ht===M._layoutId){if(g.isFinished(F)){u.dispatchAction({type:"graphGLStopLayout",from:M.uid}),u.dispatchAction({type:"graphGLFinishLayout",points:x.getLayout("points"),from:M.uid});return}g.update(v.layer.renderer,ut,function(){M._updatePositionTexture(),yt+=ut,yt>=Dt&&(M._syncNodePosition(e),yt=0),u.getZr().refresh(),Object(Rf.a)(function(){Pt(Ht)})})}};Object(Rf.a)(function(){M._forceLayoutInstanceToDispose&&(M._forceLayoutInstanceToDispose.dispose(v.layer.renderer),M._forceLayoutInstanceToDispose=null),Et(I)}),this._layouting=!0}}},stopLayout:function(e,o,u,c){c&&c.from!=null&&c.from!==this.uid||(this._layoutId=0,this.groupGL.remove(this._forceEdgesMesh),this.groupGL.add(this._edgesMesh),!!this._forceLayoutInstance&&(!this.viewGL.layer||(c&&c.beforeLayout||(this._syncNodePosition(e),this._updateAfterLayout(e,o,u)),this._api.getZr().refresh(),this._layouting=!1)))},_syncNodePosition:function(e){var o=this._forceLayoutInstance.getNodePosition(this.viewGL.layer.renderer);e.getData().setLayout("points",o),e.setNodePosition(o)},_updateAfterLayout:function(e,o,u){this._updateMeshLinesGeometry(),this._pointsBuilder.removePositionTexture(),this._pointsBuilder.updateLayout(e,o,u),this._pointsBuilder.updateView(this.viewGL.camera),this._pointsBuilder.updateLabels(),this._pointsBuilder.showLabels()},focusNodeAdjacency:function(e,o,u,c){var v=this._model.getData();this._downplayAll();var g=c.dataIndex,x=v.graph,_=[],M=x.getNodeByIndex(g);_.push(M),M.edges.forEach(function(F){F.dataIndex<0||(F.node1!==M&&_.push(F.node1),F.node2!==M&&_.push(F.node2))},this),this._pointsBuilder.fadeOutAll(.05),this._fadeOutEdgesAll(.05),_.forEach(function(F){this._pointsBuilder.highlight(v,F.dataIndex)},this),this._pointsBuilder.updateLabels(_.map(function(F){return F.dataIndex}));var I=[];M.edges.forEach(function(F){F.dataIndex>=0&&(this._highlightEdge(F.dataIndex),I.push(F))},this),this._focusNodes=_,this._focusEdges=I},unfocusNodeAdjacency:function(e,o,u,c){this._downplayAll(),this._pointsBuilder.fadeInAll(),this._fadeInEdgesAll(),this._pointsBuilder.updateLabels()},_highlightEdge:function(e){var o=this._model.getEdgeData().getItemModel(e),u=se.parseColor(o.get("emphasis.lineStyle.color")||o.get("lineStyle.color")),c=Kr.firstNotNull(o.get("emphasis.lineStyle.opacity"),o.get("lineStyle.opacity"),1);u[3]*=c,this._edgesMesh.geometry.setItemColor(this._edgeIndicesMap[e],u)},_downplayAll:function(){this._focusNodes&&this._focusNodes.forEach(function(e){this._pointsBuilder.downplay(this._model.getData(),e.dataIndex)},this),this._focusEdges&&this._focusEdges.forEach(function(e){this._downplayEdge(e.dataIndex)},this)},_downplayEdge:function(e){var o=this._getColor(e,[]);this._edgesMesh.geometry.setItemColor(this._edgeIndicesMap[e],o)},_setEdgeFade:function(){var n=[];return function(e,o){this._getColor(e,n),n[3]*=o,this._edgesMesh.geometry.setItemColor(this._edgeIndicesMap[e],n)}}(),_getColor:function(e,o){for(var u=0;u<4;u++)o[u]=this._originalEdgeColors[e*4+u];return o},_fadeOutEdgesAll:function(e){var o=this._model.getData().graph;o.eachEdge(function(u){this._setEdgeFade(u.dataIndex,e)},this)},_fadeInEdgesAll:function(){this._fadeOutEdgesAll(1)},_updateCamera:function(e,o){this.viewGL.setViewport(0,0,o.getWidth(),o.getHeight(),o.getDevicePixelRatio());for(var u=this.viewGL.camera,c=e.getData(),v=c.getLayout("points"),g=qu.create(Infinity,Infinity),x=qu.create(-Infinity,-Infinity),_=[],M=0;M<v.length;)_[0]=v[M++],_[1]=v[M++],qu.min(g,g,_),qu.max(x,x,_);var I=(x[1]+g[1])/2,F=(x[0]+g[0])/2;if(!(F>u.left&&F<u.right&&I<u.bottom&&I>u.top)){var ut=Math.max(x[0]-g[0],10),yt=ut/o.getWidth()*o.getHeight();ut*=1.4,yt*=1.4,g[0]-=ut*.2,u.left=g[0],u.top=I-yt/2,u.bottom=I+yt/2,u.right=ut+g[0],u.near=0,u.far=100}},dispose:function(){var e=this.viewGL.layer.renderer;this._forceLayoutInstance&&this._forceLayoutInstance.dispose(e),this.groupGL.removeAll(),this._layoutId=-1},remove:function(){this.groupGL.removeAll(),this._control.dispose()}});function Kl(n){return n instanceof Array||(n=[n,n]),n}function bm(n){n.registerChartView(xm),n.registerSeriesModel(hm),n.registerVisual(function(o){var u={};o.eachSeriesByType("graphGL",function(c){var v=c.getCategoriesData(),g=c.getData(),x={};v.each(function(_){var M=v.getName(_);x["ec-"+M]=_;var I=v.getItemModel(_),F=I.getModel("itemStyle").getItemStyle();F.fill||(F.fill=c.getColorFromPalette(M,u)),v.setItemVisual(_,"style",F);for(var ut=["symbol","symbolSize","symbolKeepAspect"],yt=0;yt<ut.length;yt++){var Dt=I.getShallow(ut[yt],!0);Dt!=null&&v.setItemVisual(_,ut[yt],Dt)}}),v.count()&&g.each(function(_){var M=g.getItemModel(_),I=M.getShallow("category");if(I!=null){typeof I=="string"&&(I=x["ec-"+I]);var F=v.getItemVisual(I,"style"),ut=g.ensureUniqueItemVisual(_,"style");B.Y.extend(ut,F);for(var yt=["symbol","symbolSize","symbolKeepAspect"],Dt=0;Dt<yt.length;Dt++)g.setItemVisual(_,yt[Dt],v.getItemVisual(I,yt[Dt]))}})})}),n.registerVisual(function(o){o.eachSeriesByType("graphGL",function(u){var c=u.getGraph(),v=u.getEdgeData(),g=Kl(u.get("edgeSymbol")),x=Kl(u.get("edgeSymbolSize"));v.setVisual("drawType","stroke"),v.setVisual("fromSymbol",g&&g[0]),v.setVisual("toSymbol",g&&g[1]),v.setVisual("fromSymbolSize",x&&x[0]),v.setVisual("toSymbolSize",x&&x[1]),v.setVisual("style",u.getModel("lineStyle").getLineStyle()),v.each(function(_){var M=v.getItemModel(_),I=c.getEdgeByIndex(_),F=Kl(M.getShallow("symbol",!0)),ut=Kl(M.getShallow("symbolSize",!0)),yt=M.getModel("lineStyle").getLineStyle(),Dt=v.ensureUniqueItemVisual(_,"style");switch(B.Y.extend(Dt,yt),Dt.stroke){case"source":{var Et=I.node1.getVisual("style");Dt.stroke=Et&&Et.fill;break}case"target":{var Et=I.node2.getVisual("style");Dt.stroke=Et&&Et.fill;break}}F[0]&&I.setVisual("fromSymbol",F[0]),F[1]&&I.setVisual("toSymbol",F[1]),ut[0]&&I.setVisual("fromSymbolSize",ut[0]),ut[1]&&I.setVisual("toSymbolSize",ut[1])})})}),n.registerAction({type:"graphGLRoam",event:"graphglroam",update:"series.graphGL:roam"},function(o,u){u.eachComponent({mainType:"series",query:o},function(c){c.setView(o)})});function e(){}n.registerAction({type:"graphGLStartLayout",event:"graphgllayoutstarted",update:"series.graphGL:startLayout"},e),n.registerAction({type:"graphGLStopLayout",event:"graphgllayoutstopped",update:"series.graphGL:stopLayout"},e),n.registerAction({type:"graphGLFocusNodeAdjacency",event:"graphGLFocusNodeAdjacency",update:"series.graphGL:focusNodeAdjacency"},e),n.registerAction({type:"graphGLUnfocusNodeAdjacency",event:"graphGLUnfocusNodeAdjacency",update:"series.graphGL:unfocusNodeAdjacency"},e)}Object(B.X)(bm);var Sm=B.h.extend({type:"series.flowGL",dependencies:["geo","grid","bmap"],visualStyleAccessPath:"itemStyle",getInitialData:function(e,o){var u=B.v(this.get("coordinateSystem"))||["x","y"];u.push("vx","vy");var c=B.A.createDimensions(this.getSource(),{coordDimensions:u,encodeDefine:this.get("encode"),dimensionsDefine:this.get("dimensions")}),v=new B.e(c,this);return v.initData(this.getSource()),v},defaultOption:{coordinateSystem:"cartesian2d",zlevel:10,supersampling:1,particleType:"point",particleDensity:128,particleSize:1,particleSpeed:1,particleTrail:2,colorTexture:null,gridWidth:"auto",gridHeight:"auto",itemStyle:{color:"#fff",opacity:.8}}}),_m=$r.extend(function(){return{dynamic:!0,attributes:{position:new $r.Attribute("position","float",3,"POSITION")}}},{resetOffset:function(){this._vertexOffset=0,this._faceOffset=0},setLineCount:function(e){var o=this.attributes,u=4*e,c=2*e;this.vertexCount!==u&&o.position.init(u),this.triangleCount!==c&&(c===0?this.indices=null:this.indices=this.vertexCount>65535?new Uint32Array(c*3):new Uint16Array(c*3))},addLine:function(e){var o=this._vertexOffset;this.attributes.position.set(o,[e[0],e[1],1]),this.attributes.position.set(o+1,[e[0],e[1],-1]),this.attributes.position.set(o+2,[e[0],e[1],2]),this.attributes.position.set(o+3,[e[0],e[1],-2]),this.setTriangleIndices(this._faceOffset++,[o,o+1,o+2]),this.setTriangleIndices(this._faceOffset++,[o+1,o+2,o+3]),this._vertexOffset+=4}}),gd=_m,Tm=`@export ecgl.vfParticle.particle.fragment

uniform sampler2D particleTexture;
uniform sampler2D spawnTexture;
uniform sampler2D velocityTexture;

uniform float deltaTime;
uniform float elapsedTime;

uniform float speedScaling : 1.0;

uniform vec2 textureSize;
uniform vec4 region : [0, 0, 1, 1];
uniform float firstFrameTime;

varying vec2 v_Texcoord;


void main()
{
 vec4 p = texture2D(particleTexture, v_Texcoord);
 bool spawn = false;
 if (p.w <= 0.0) {
 p = texture2D(spawnTexture, fract(v_Texcoord + elapsedTime / 10.0));
 p.w -= firstFrameTime;
 spawn = true;
 }
 vec2 v = texture2D(velocityTexture, fract(p.xy * region.zw + region.xy)).xy;
 v = (v - 0.5) * 2.0;
 p.z = length(v);
 p.xy += v * deltaTime / 10.0 * speedScaling;
 p.w -= deltaTime;

 if (spawn || p.xy != fract(p.xy)) {
 p.z = 0.0;
 }
 p.xy = fract(p.xy);

 gl_FragColor = p;
}
@end

@export ecgl.vfParticle.renderPoints.vertex

#define PI 3.1415926

attribute vec2 texcoord : TEXCOORD_0;

uniform sampler2D particleTexture;
uniform mat4 worldViewProjection : WORLDVIEWPROJECTION;

uniform float size : 1.0;

varying float v_Mag;
varying vec2 v_Uv;

void main()
{
 vec4 p = texture2D(particleTexture, texcoord);

 if (p.w > 0.0 && p.z > 1e-5) {
 gl_Position = worldViewProjection * vec4(p.xy * 2.0 - 1.0, 0.0, 1.0);
 }
 else {
 gl_Position = vec4(100000.0, 100000.0, 100000.0, 1.0);
 }

 v_Mag = p.z;
 v_Uv = p.xy;

 gl_PointSize = size;
}

@end

@export ecgl.vfParticle.renderPoints.fragment

uniform vec4 color : [1.0, 1.0, 1.0, 1.0];
uniform sampler2D gradientTexture;
uniform sampler2D colorTexture;
uniform sampler2D spriteTexture;

varying float v_Mag;
varying vec2 v_Uv;

void main()
{
 gl_FragColor = color;
#ifdef SPRITETEXTURE_ENABLED
 gl_FragColor *= texture2D(spriteTexture, gl_PointCoord);
 if (color.a == 0.0) {
 discard;
 }
#endif
#ifdef GRADIENTTEXTURE_ENABLED
 gl_FragColor *= texture2D(gradientTexture, vec2(v_Mag, 0.5));
#endif
#ifdef COLORTEXTURE_ENABLED
 gl_FragColor *= texture2D(colorTexture, v_Uv);
#endif
}

@end

@export ecgl.vfParticle.renderLines.vertex

#define PI 3.1415926

attribute vec3 position : POSITION;

uniform sampler2D particleTexture;
uniform sampler2D prevParticleTexture;

uniform float size : 1.0;
uniform vec4 vp: VIEWPORT;
uniform mat4 worldViewProjection : WORLDVIEWPROJECTION;

varying float v_Mag;
varying vec2 v_Uv;

@import clay.util.rand

void main()
{
 vec4 p = texture2D(particleTexture, position.xy);
 vec4 p2 = texture2D(prevParticleTexture, position.xy);

 p.xy = p.xy * 2.0 - 1.0;
 p2.xy = p2.xy * 2.0 - 1.0;

 if (p.w > 0.0 && p.z > 1e-5) {
 vec2 dir = normalize(p.xy - p2.xy);
 vec2 norm = vec2(dir.y / vp.z, -dir.x / vp.w) * sign(position.z) * size;
 if (abs(position.z) == 2.0) {
 gl_Position = vec4(p.xy + norm, 0.0, 1.0);
 v_Uv = p.xy;
 v_Mag = p.z;
 }
 else {
 gl_Position = vec4(p2.xy + norm, 0.0, 1.0);
 v_Mag = p2.z;
 v_Uv = p2.xy;
 }
 gl_Position = worldViewProjection * gl_Position;
 }
 else {
 gl_Position = vec4(100000.0, 100000.0, 100000.0, 1.0);
 }
}

@end

@export ecgl.vfParticle.renderLines.fragment

uniform vec4 color : [1.0, 1.0, 1.0, 1.0];
uniform sampler2D gradientTexture;
uniform sampler2D colorTexture;

varying float v_Mag;
varying vec2 v_Uv;

void main()
{
 gl_FragColor = color;
 #ifdef GRADIENTTEXTURE_ENABLED
 gl_FragColor *= texture2D(gradientTexture, vec2(v_Mag, 0.5));
#endif
#ifdef COLORTEXTURE_ENABLED
 gl_FragColor *= texture2D(colorTexture, v_Uv);
#endif
}

@end
`;cr.import(Tm);function md(n){var e=document.createElement("canvas");e.width=e.height=n;var o=e.getContext("2d");return o.fillStyle="#fff",o.arc(n/2,n/2,n/2,0,Math.PI*2),o.fill(),e}var jc=function(){this.motionBlurFactor=.99,this.vectorFieldTexture=new Gr({type:Mr.FLOAT,flipY:!1}),this.particleLife=[5,20],this._particleType="point",this._particleSize=1,this.particleColor=[1,1,1,1],this.particleSpeedScaling=1,this._thisFrameTexture=null,this._particlePass=null,this._spawnTexture=null,this._particleTexture0=null,this._particleTexture1=null,this._particlePointsMesh=null,this._surfaceFrameBuffer=null,this._elapsedTime=0,this._scene=null,this._camera=null,this._lastFrameTexture=null,this._supersampling=1,this._downsampleTextures=[],this._width=512,this._height=512,this.init()};jc.prototype={constructor:jc,init:function(){var e={type:Mr.FLOAT,minFilter:Mr.NEAREST,magFilter:Mr.NEAREST,useMipmap:!1};this._spawnTexture=new Gr(e),this._particleTexture0=new Gr(e),this._particleTexture1=new Gr(e),this._frameBuffer=new Kn({depthBuffer:!1}),this._particlePass=new Gn({fragment:cr.source("ecgl.vfParticle.particle.fragment")}),this._particlePass.setUniform("velocityTexture",this.vectorFieldTexture),this._particlePass.setUniform("spawnTexture",this._spawnTexture),this._downsamplePass=new Gn({fragment:cr.source("clay.compositor.downsample")});var o=new ni({renderOrder:10,material:new Le({shader:new cr(cr.source("ecgl.vfParticle.renderPoints.vertex"),cr.source("ecgl.vfParticle.renderPoints.fragment"))}),mode:ni.POINTS,geometry:new $r({dynamic:!0,mainAttribute:"texcoord0"})}),u=new ni({renderOrder:10,material:new Le({shader:new cr(cr.source("ecgl.vfParticle.renderLines.vertex"),cr.source("ecgl.vfParticle.renderLines.fragment"))}),geometry:new gd,culling:!1}),c=new ni({material:new Le({shader:new cr(cr.source("ecgl.color.vertex"),cr.source("ecgl.color.fragment"))}),geometry:new ps});c.material.enableTexture("diffuseMap"),this._particlePointsMesh=o,this._particleLinesMesh=u,this._lastFrameFullQuadMesh=c,this._camera=new xs,this._thisFrameTexture=new Gr,this._lastFrameTexture=new Gr},setParticleDensity:function(e,o){for(var u=e*o,c=new Float32Array(u*4),v=0,g=this.particleLife,x=0;x<e;x++)for(var _=0;_<o;_++,v++){c[v*4]=Math.random(),c[v*4+1]=Math.random(),c[v*4+2]=Math.random();var M=(g[1]-g[0])*Math.random()+g[0];c[v*4+3]=M}this._particleType==="line"?this._setLineGeometry(e,o):this._setPointsGeometry(e,o),this._spawnTexture.width=e,this._spawnTexture.height=o,this._spawnTexture.pixels=c,this._particleTexture0.width=this._particleTexture1.width=e,this._particleTexture0.height=this._particleTexture1.height=o,this._particlePass.setUniform("textureSize",[e,o])},_setPointsGeometry:function(e,o){var u=e*o,c=this._particlePointsMesh.geometry,v=c.attributes;v.texcoord0.init(u);for(var g=0,x=0;x<e;x++)for(var _=0;_<o;_++,g++)v.texcoord0.value[g*2]=x/e,v.texcoord0.value[g*2+1]=_/o;c.dirty()},_setLineGeometry:function(e,o){var u=e*o,c=this._getParticleMesh().geometry;c.setLineCount(u),c.resetOffset();for(var v=0;v<e;v++)for(var g=0;g<o;g++)c.addLine([v/e,g/o]);c.dirty()},_getParticleMesh:function(){return this._particleType==="line"?this._particleLinesMesh:this._particlePointsMesh},update:function(e,o,u,c){var v=this._getParticleMesh(),g=this._frameBuffer,x=this._particlePass;c&&this._updateDownsampleTextures(e,o),v.material.set("size",this._particleSize*this._supersampling),v.material.set("color",this.particleColor),x.setUniform("speedScaling",this.particleSpeedScaling),g.attach(this._particleTexture1),x.setUniform("firstFrameTime",c?(this.particleLife[1]+this.particleLife[0])/2:0),x.setUniform("particleTexture",this._particleTexture0),x.setUniform("deltaTime",u),x.setUniform("elapsedTime",this._elapsedTime),x.render(e,g),v.material.set("particleTexture",this._particleTexture1),v.material.set("prevParticleTexture",this._particleTexture0),g.attach(this._thisFrameTexture),g.bind(e),e.gl.clear(e.gl.DEPTH_BUFFER_BIT|e.gl.COLOR_BUFFER_BIT);var _=this._lastFrameFullQuadMesh;_.material.set("diffuseMap",this._lastFrameTexture),_.material.set("color",[1,1,1,this.motionBlurFactor]),this._camera.update(!0),e.renderPass([_,v],this._camera),g.unbind(e),this._downsample(e),this._swapTexture(),this._elapsedTime+=u},_downsample:function(e){var o=this._downsampleTextures;if(o.length!==0)for(var u=0,c=this._thisFrameTexture,v=o[u];v;)this._frameBuffer.attach(v),this._downsamplePass.setUniform("texture",c),this._downsamplePass.setUniform("textureSize",[c.width,c.height]),this._downsamplePass.render(e,this._frameBuffer),c=v,v=o[++u]},getSurfaceTexture:function(){var e=this._downsampleTextures;return e.length>0?e[e.length-1]:this._lastFrameTexture},setRegion:function(e){this._particlePass.setUniform("region",e)},resize:function(e,o){this._lastFrameTexture.width=e*this._supersampling,this._lastFrameTexture.height=o*this._supersampling,this._thisFrameTexture.width=e*this._supersampling,this._thisFrameTexture.height=o*this._supersampling,this._width=e,this._height=o},setParticleSize:function(e){var o=this._getParticleMesh();if(e<=2){o.material.disableTexture("spriteTexture"),o.material.transparent=!1;return}this._spriteTexture||(this._spriteTexture=new Gr),(!this._spriteTexture.image||this._spriteTexture.image.width!==e)&&(this._spriteTexture.image=md(e),this._spriteTexture.dirty()),o.material.transparent=!0,o.material.enableTexture("spriteTexture"),o.material.set("spriteTexture",this._spriteTexture),this._particleSize=e},setGradientTexture:function(e){var o=this._getParticleMesh().material;o[e?"enableTexture":"disableTexture"]("gradientTexture"),o.setUniform("gradientTexture",e)},setColorTextureImage:function(e,o){var u=this._getParticleMesh().material;u.setTextureImage("colorTexture",e,o,{flipY:!0})},setParticleType:function(e){this._particleType=e},clearFrame:function(e){var o=this._frameBuffer;o.attach(this._lastFrameTexture),o.bind(e),e.gl.clear(e.gl.DEPTH_BUFFER_BIT|e.gl.COLOR_BUFFER_BIT),o.unbind(e)},setSupersampling:function(e){this._supersampling=e,this.resize(this._width,this._height)},_updateDownsampleTextures:function(e,o){for(var u=this._downsampleTextures,c=Math.max(Math.floor(Math.log(this._supersampling/o.getDevicePixelRatio())/Math.log(2)),0),v=2,g=this._width*this._supersampling,x=this._height*this._supersampling,_=0;_<c;_++)u[_]=u[_]||new Gr,u[_].width=g/v,u[_].height=x/v,v*=2;for(;_<u.length;_++)u[_].dispose(e);u.length=c},_swapTexture:function(){var e=this._particleTexture0;this._particleTexture0=this._particleTexture1,this._particleTexture1=e;var e=this._thisFrameTexture;this._thisFrameTexture=this._lastFrameTexture,this._lastFrameTexture=e},dispose:function(e){e.disposeFrameBuffer(this._frameBuffer),e.disposeTexture(this.vectorFieldTexture),e.disposeTexture(this._spawnTexture),e.disposeTexture(this._particleTexture0),e.disposeTexture(this._particleTexture1),e.disposeTexture(this._thisFrameTexture),e.disposeTexture(this._lastFrameTexture),e.disposeGeometry(this._particleLinesMesh.geometry),e.disposeGeometry(this._particlePointsMesh.geometry),e.disposeGeometry(this._lastFrameFullQuadMesh.geometry),this._spriteTexture&&e.disposeTexture(this._spriteTexture),this._particlePass.dispose(e),this._downsamplePass.dispose(e),this._downsampleTextures.forEach(function(o){o.dispose(e)})}};var Om=jc,Am=B.b.extend({type:"flowGL",__ecgl__:!0,init:function(e,o){this.viewGL=new uo("orthographic"),this.groupGL=new se.Node,this.viewGL.add(this.groupGL),this._particleSurface=new Om;var u=new se.Mesh({geometry:new se.PlaneGeometry,material:new se.Material({shader:new se.Shader({vertex:se.Shader.source("ecgl.color.vertex"),fragment:se.Shader.source("ecgl.color.fragment")}),transparent:!0})});u.material.enableTexture("diffuseMap"),this.groupGL.add(u),this._planeMesh=u},render:function(e,o,u){var c=this._particleSurface;c.setParticleType(e.get("particleType")),c.setSupersampling(e.get("supersampling")),this._updateData(e,u),this._updateCamera(u.getWidth(),u.getHeight(),u.getDevicePixelRatio());var v=Kr.firstNotNull(e.get("particleDensity"),128);c.setParticleDensity(v,v);var g=this._planeMesh,x=+new Date,_=this,M=!0;g.__percent=0,g.stopAnimation(),g.animate("",{loop:!0}).when(1e5,{__percent:1}).during(function(){var ut=+new Date,yt=Math.min(ut-x,20);x=x+yt,_._renderer&&(c.update(_._renderer,u,yt/1e3,M),g.material.set("diffuseMap",c.getSurfaceTexture())),M=!1}).start();var I=e.getModel("itemStyle"),F=se.parseColor(I.get("color"));F[3]*=Kr.firstNotNull(I.get("opacity"),1),g.material.set("color",F),c.setColorTextureImage(e.get("colorTexture"),u),c.setParticleSize(e.get("particleSize")),c.particleSpeedScaling=e.get("particleSpeed"),c.motionBlurFactor=1-Math.pow(.1,e.get("particleTrail"))},updateTransform:function(e,o,u){this._updateData(e,u)},afterRender:function(e,o,u,c){var v=c.renderer;this._renderer=v},_updateData:function(e,o){var u=e.coordinateSystem,c=u.dimensions.map(function(qt){return e.coordDimToDataDim(qt)[0]}),v=e.getData(),g=v.getDataExtent(c[0]),x=v.getDataExtent(c[1]),_=e.get("gridWidth"),M=e.get("gridHeight");if(_==null||_==="auto"){var I=(g[1]-g[0])/(x[1]-x[0]);_=Math.round(Math.sqrt(I*v.count()))}(M==null||M==="auto")&&(M=Math.ceil(v.count()/_));var F=this._particleSurface.vectorFieldTexture,ut=F.pixels;if(!ut||ut.length!==M*_*4)ut=F.pixels=new Float32Array(_*M*4);else for(var yt=0;yt<ut.length;yt++)ut[yt]=0;var Dt=0,Et=Infinity,Pt=new Float32Array(v.count()*2),Ht=0,$t=[[Infinity,Infinity],[-Infinity,-Infinity]];v.each([c[0],c[1],"vx","vy"],function(qt,le,ie,he){var Re=u.dataToPoint([qt,le]);Pt[Ht++]=Re[0],Pt[Ht++]=Re[1],$t[0][0]=Math.min(Re[0],$t[0][0]),$t[0][1]=Math.min(Re[1],$t[0][1]),$t[1][0]=Math.max(Re[0],$t[1][0]),$t[1][1]=Math.max(Re[1],$t[1][1]);var ze=Math.sqrt(ie*ie+he*he);Dt=Math.max(Dt,ze),Et=Math.min(Et,ze)}),v.each(["vx","vy"],function(qt,le,ie){var he=Math.round((Pt[ie*2]-$t[0][0])/($t[1][0]-$t[0][0])*(_-1)),Re=M-1-Math.round((Pt[ie*2+1]-$t[0][1])/($t[1][1]-$t[0][1])*(M-1)),ze=(Re*_+he)*4;ut[ze]=qt/Dt*.5+.5,ut[ze+1]=le/Dt*.5+.5,ut[ze+3]=1}),F.width=_,F.height=M,e.get("coordinateSystem")==="bmap"&&this._fillEmptyPixels(F),F.dirty(),this._updatePlanePosition($t[0],$t[1],e,o),this._updateGradientTexture(v.getVisual("visualMeta"),[Et,Dt])},_fillEmptyPixels:function(e){var o=e.pixels,u=e.width,c=e.height;function v(Pt,Ht,$t){Pt=Math.max(Math.min(Pt,u-1),0),Ht=Math.max(Math.min(Ht,c-1),0);var qt=(Ht*(u-1)+Pt)*4;return o[qt+3]===0?!1:($t[0]=o[qt],$t[1]=o[qt+1],!0)}function g(Pt,Ht,$t){$t[0]=Pt[0]+Ht[0],$t[1]=Pt[1]+Ht[1]}for(var x=[],_=[],M=[],I=[],F=[],ut=0,yt=0;yt<c;yt++)for(var Dt=0;Dt<u;Dt++){var Et=(yt*(u-1)+Dt)*4;o[Et+3]===0&&(ut=x[0]=x[1]=0,v(Dt-1,yt,_)&&(ut++,g(_,x,x)),v(Dt+1,yt,M)&&(ut++,g(M,x,x)),v(Dt,yt-1,I)&&(ut++,g(I,x,x)),v(Dt,yt+1,F)&&(ut++,g(F,x,x)),x[0]/=ut,x[1]/=ut,o[Et]=x[0],o[Et+1]=x[1]),o[Et+3]=1}},_updateGradientTexture:function(e,o){if(!e||!e.length){this._particleSurface.setGradientTexture(null);return}this._gradientTexture=this._gradientTexture||new se.Texture2D({image:document.createElement("canvas")});var u=this._gradientTexture,c=u.image;c.width=200,c.height=1;var v=c.getContext("2d"),g=v.createLinearGradient(0,.5,c.width,.5);e[0].stops.forEach(function(x){var _;o[1]===o[0]?_=0:(_=x.value/o[1],_=Math.min(Math.max(_,0),1)),g.addColorStop(_,x.color)}),v.fillStyle=g,v.fillRect(0,0,c.width,c.height),u.dirty(),this._particleSurface.setGradientTexture(this._gradientTexture)},_updatePlanePosition:function(e,o,u,c){var v=this._limitInViewportAndFullFill(e,o,u,c);e=v.leftTop,o=v.rightBottom,this._particleSurface.setRegion(v.region),this._planeMesh.position.set((e[0]+o[0])/2,c.getHeight()-(e[1]+o[1])/2,0);var g=o[0]-e[0],x=o[1]-e[1];this._planeMesh.scale.set(g/2,x/2,1),this._particleSurface.resize(Math.max(Math.min(g,2048),1),Math.max(Math.min(x,2048),1)),this._renderer&&this._particleSurface.clearFrame(this._renderer)},_limitInViewportAndFullFill:function(e,o,u,c){var v=[Math.max(e[0],0),Math.max(e[1],0)],g=[Math.min(o[0],c.getWidth()),Math.min(o[1],c.getHeight())];if(u.get("coordinateSystem")==="bmap"){var x=u.getData().getDataExtent(u.coordDimToDataDim("lng")[0]),_=Math.floor(x[1]-x[0])>=359;_&&(v[0]>0&&(v[0]=0),g[0]<c.getWidth()&&(g[0]=c.getWidth()))}var M=o[0]-e[0],I=o[1]-e[1],F=g[0]-v[0],ut=g[1]-v[1],yt=[(v[0]-e[0])/M,1-ut/I-(v[1]-e[1])/I,F/M,ut/I];return{leftTop:v,rightBottom:g,region:yt}},_updateCamera:function(e,o,u){this.viewGL.setViewport(0,0,e,o,u);var c=this.viewGL.camera;c.left=c.bottom=0,c.top=o,c.right=e,c.near=0,c.far=100,c.position.z=10},remove:function(){this._planeMesh.stopAnimation(),this.groupGL.removeAll()},dispose:function(){this._renderer&&this._particleSurface.dispose(this._renderer),this.groupGL.removeAll()}});function Mm(n){n.registerChartView(Am),n.registerSeriesModel(Sm)}Object(B.X)(Mm);var yd=S("bYtY"),zc=B.h.extend({type:"series.linesGL",dependencies:["grid","geo"],visualStyleAccessPath:"lineStyle",visualDrawType:"stroke",streamEnabled:!0,init:function(e){var o=this._processFlatCoordsArray(e.data);this._flatCoords=o.flatCoords,this._flatCoordsOffset=o.flatCoordsOffset,o.flatCoords&&(e.data=new Float32Array(o.count)),zc.superApply(this,"init",arguments)},mergeOption:function(e){var o=this._processFlatCoordsArray(e.data);this._flatCoords=o.flatCoords,this._flatCoordsOffset=o.flatCoordsOffset,o.flatCoords&&(e.data=new Float32Array(o.count)),zc.superApply(this,"mergeOption",arguments)},appendData:function(e){var o=this._processFlatCoordsArray(e.data);o.flatCoords&&(this._flatCoords?(this._flatCoords=Object(yd.concatArray)(this._flatCoords,o.flatCoords),this._flatCoordsOffset=Object(yd.concatArray)(this._flatCoordsOffset,o.flatCoordsOffset)):(this._flatCoords=o.flatCoords,this._flatCoordsOffset=o.flatCoordsOffset),e.data=new Float32Array(o.count)),this.getRawData().appendData(e.data)},_getCoordsFromItemModel:function(e){var o=this.getData().getItemModel(e),u=o.option instanceof Array?o.option:o.getShallow("coords");return u},getLineCoordsCount:function(e){return this._flatCoordsOffset?this._flatCoordsOffset[e*2+1]:this._getCoordsFromItemModel(e).length},getLineCoords:function(e,o){if(this._flatCoordsOffset){for(var u=this._flatCoordsOffset[e*2],c=this._flatCoordsOffset[e*2+1],v=0;v<c;v++)o[v]=o[v]||[],o[v][0]=this._flatCoords[u+v*2],o[v][1]=this._flatCoords[u+v*2+1];return c}else{for(var g=this._getCoordsFromItemModel(e),v=0;v<g.length;v++)o[v]=o[v]||[],o[v][0]=g[v][0],o[v][1]=g[v][1];return g.length}},_processFlatCoordsArray:function(e){var o=0;if(this._flatCoords&&(o=this._flatCoords.length),typeof e[0]=="number"){for(var u=e.length,c=new Uint32Array(u),v=new Float64Array(u),g=0,x=0,_=0,M=0;M<u;){_++;var I=e[M++];c[x++]=g+o,c[x++]=I;for(var F=0;F<I;F++){var ut=e[M++],yt=e[M++];v[g++]=ut,v[g++]=yt,M>u}}return{flatCoordsOffset:new Uint32Array(c.buffer,0,x),flatCoords:v,count:_}}return{flatCoordsOffset:null,flatCoords:null,count:e.length}},getInitialData:function(e,o){var u=new B.e(["value"],this);return u.hasItemOption=!1,u.initData(e.data,[],function(c,v,g,x){if(c instanceof Array)return NaN;u.hasItemOption=!0;var _=c.value;if(_!=null)return _ instanceof Array?_[x]:_}),u},defaultOption:{coordinateSystem:"geo",zlevel:10,progressive:1e4,progressiveThreshold:5e4,blendMode:"source-over",lineStyle:{opacity:.8},postEffect:{enable:!1,colorCorrection:{exposure:0,brightness:0,contrast:1,saturation:1,enable:!0}}}}),Dm=zc,Cm=B.b.extend({type:"linesGL",__ecgl__:!0,init:function(e,o){this.groupGL=new se.Node,this.viewGL=new uo("orthographic"),this.viewGL.add(this.groupGL),this._glViewHelper=new Nn(this.viewGL),this._nativeLinesShader=se.createShader("ecgl.lines3D"),this._meshLinesShader=se.createShader("ecgl.meshLines3D"),this._linesMeshes=[],this._currentStep=0},render:function(e,o,u){this.groupGL.removeAll(),this._glViewHelper.reset(e,u);var c=this._linesMeshes[0];c||(c=this._linesMeshes[0]=this._createLinesMesh(e)),this._linesMeshes.length=1,this.groupGL.add(c),this._updateLinesMesh(e,c,0,e.getData().count()),this.viewGL.setPostEffect(e.getModel("postEffect"),u)},incrementalPrepareRender:function(e,o,u){this.groupGL.removeAll(),this._glViewHelper.reset(e,u),this._currentStep=0,this.viewGL.setPostEffect(e.getModel("postEffect"),u)},incrementalRender:function(e,o,u,c){var v=this._linesMeshes[this._currentStep];v||(v=this._createLinesMesh(o),this._linesMeshes[this._currentStep]=v),this._updateLinesMesh(o,v,e.start,e.end),this.groupGL.add(v),c.getZr().refresh(),this._currentStep++},updateTransform:function(e,o,u){e.coordinateSystem.getRoamTransform&&this._glViewHelper.updateTransform(e,u)},_createLinesMesh:function(e){var o=new se.Mesh({$ignorePicking:!0,material:new se.Material({shader:se.createShader("ecgl.lines3D"),transparent:!0,depthMask:!1,depthTest:!1}),geometry:new vd({segmentScale:10,useNativeLine:!0,dynamic:!1}),mode:se.Mesh.LINES,culling:!1});return o},_updateLinesMesh:function(e,o,u,c){var v=e.getData();o.material.blend=e.get("blendMode")==="lighter"?se.additiveBlend:null;var g=e.get("lineStyle.curveness")||0,x=e.get("polyline"),_=o.geometry,M=e.coordinateSystem,I=Kr.firstNotNull(e.get("lineStyle.width"),1);I>1?(o.material.shader!==this._meshLinesShader&&o.material.attachShader(this._meshLinesShader),o.mode=se.Mesh.TRIANGLES):(o.material.shader!==this._nativeLinesShader&&o.material.attachShader(this._nativeLinesShader),o.mode=se.Mesh.LINES),u=u||0,c=c||v.count(),_.resetOffset();var F=0,ut=0,yt=[],Dt=[],Et=[],Pt=[],Ht=[],$t=.3,qt=.7;function le(){Dt[0]=yt[0]*qt+Pt[0]*$t-(yt[1]-Pt[1])*g,Dt[1]=yt[1]*qt+Pt[1]*$t-(Pt[0]-yt[0])*g,Et[0]=yt[0]*$t+Pt[0]*qt-(yt[1]-Pt[1])*g,Et[1]=yt[1]*$t+Pt[1]*qt-(Pt[0]-yt[0])*g}if(x||g!==0)for(var ie=u;ie<c;ie++)if(x){var he=e.getLineCoordsCount(ie);F+=_.getPolylineVertexCount(he),ut+=_.getPolylineTriangleCount(he)}else e.getLineCoords(ie,Ht),this._glViewHelper.dataToPoint(M,Ht[0],yt),this._glViewHelper.dataToPoint(M,Ht[1],Pt),le(),F+=_.getCubicCurveVertexCount(yt,Dt,Et,Pt),ut+=_.getCubicCurveTriangleCount(yt,Dt,Et,Pt);else{var Re=c-u;F+=Re*_.getLineVertexCount(),ut+=Re*_.getLineVertexCount()}_.setVertexCount(F),_.setTriangleCount(ut);for(var ze=u,Pe=[],ie=u;ie<c;ie++){se.parseColor(kn(v,ze),Pe);var Ke=Kr.firstNotNull(Qn(v,ze),1);Pe[3]*=Ke;for(var he=e.getLineCoords(ie,Ht),rr=0;rr<he;rr++)this._glViewHelper.dataToPoint(M,Ht[rr],Ht[rr]);x?_.addPolyline(Ht,Pe,I,0,he):g!==0?(yt=Ht[0],Pt=Ht[1],le(),_.addCubicCurve(yt,Dt,Et,Pt,Pe,I)):_.addPolyline(Ht,Pe,I,0,2),ze++}},dispose:function(){this.groupGL.removeAll()},remove:function(){this.groupGL.removeAll()}});function xd(n){n.registerChartView(Cm),n.registerSeriesModel(Dm)}Object(B.X)(xd)},"4NO4":function(Ge,U,S){"use strict";S.d(U,"r",function(){return it}),S.d(U,"f",function(){return Q}),S.d(U,"c",function(){return Y}),S.d(U,"h",function(){return G}),S.d(U,"m",function(){return q}),S.d(U,"q",function(){return N}),S.d(U,"e",function(){return X}),S.d(U,"n",function(){return st}),S.d(U,"l",function(){return $}),S.d(U,"p",function(){return D}),S.d(U,"x",function(){return T}),S.d(U,"d",function(){return C}),S.d(U,"u",function(){return L}),S.d(U,"o",function(){return w}),S.d(U,"s",function(){return pt}),S.d(U,"t",function(){return At}),S.d(U,"b",function(){return rt}),S.d(U,"a",function(){return _t}),S.d(U,"v",function(){return xt}),S.d(U,"w",function(){return ft}),S.d(U,"g",function(){return Mt}),S.d(U,"i",function(){return K}),S.d(U,"j",function(){return R}),S.d(U,"k",function(){return tt});var B=S("bYtY"),mt=S("ItGF"),H=S("OELB"),ht=S("Bq2U"),y="series\0",ot="\0_ec_\0";function it(Z){return Z instanceof Array?Z:Z==null?[]:[Z]}function Q(Z,ct,vt){if(Z){Z[ct]=Z[ct]||{},Z.emphasis=Z.emphasis||{},Z.emphasis[ct]=Z.emphasis[ct]||{};for(var Ct=0,Bt=vt.length;Ct<Bt;Ct++){var It=vt[Ct];!Z.emphasis[ct].hasOwnProperty(It)&&Z[ct].hasOwnProperty(It)&&(Z.emphasis[ct][It]=Z[ct][It])}}}var Y=["fontStyle","fontWeight","fontSize","fontFamily","rich","tag","color","textBorderColor","textBorderWidth","width","height","lineHeight","align","verticalAlign","baseline","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","textShadowColor","textShadowBlur","textShadowOffsetX","textShadowOffsetY","backgroundColor","borderColor","borderWidth","borderRadius","padding"];function G(Z){return Object(B.isObject)(Z)&&!Object(B.isArray)(Z)&&!(Z instanceof Date)?Z.value:Z}function q(Z){return Object(B.isObject)(Z)&&!(Z instanceof Array)}function N(Z,ct,vt){var Ct=vt==="normalMerge",Bt=vt==="replaceMerge",It=vt==="replaceAll";Z=Z||[],ct=(ct||[]).slice();var Wt=Object(B.createHashMap)();Object(B.each)(ct,function(ae,ye){if(!Object(B.isObject)(ae)){ct[ye]=null;return}});var ee=V(Z,Wt,vt);return(Ct||Bt)&&lt(ee,Z,Wt,ct),Ct&&at(ee,ct),Ct||Bt?gt(ee,ct,Bt):It&&Tt(ee,ct),bt(ee),ee}function V(Z,ct,vt){var Ct=[];if(vt==="replaceAll")return Ct;for(var Bt=0;Bt<Z.length;Bt++){var It=Z[Bt];It&&It.id!=null&&ct.set(It.id,Bt),Ct.push({existing:vt==="replaceMerge"||$(It)?null:It,newOption:null,keyInfo:null,brandNew:null})}return Ct}function lt(Z,ct,vt,Ct){Object(B.each)(Ct,function(Bt,It){if(!(!Bt||Bt.id==null)){var Wt=W(Bt.id),ee=vt.get(Wt);if(ee!=null){var ae=Z[ee];Object(B.assert)(!ae.newOption,'Duplicated option on id "'+Wt+'".'),ae.newOption=Bt,ae.existing=ct[ee],Ct[It]=null}}})}function at(Z,ct){Object(B.each)(ct,function(vt,Ct){if(!(!vt||vt.name==null))for(var Bt=0;Bt<Z.length;Bt++){var It=Z[Bt].existing;if(!Z[Bt].newOption&&It&&(It.id==null||vt.id==null)&&!$(vt)&&!$(It)&&nt("name",It,vt)){Z[Bt].newOption=vt,ct[Ct]=null;return}}})}function gt(Z,ct,vt){Object(B.each)(ct,function(Ct){if(!!Ct){for(var Bt,It=0;(Bt=Z[It])&&(Bt.newOption||$(Bt.existing)||Bt.existing&&Ct.id!=null&&!nt("id",Ct,Bt.existing));)It++;Bt?(Bt.newOption=Ct,Bt.brandNew=vt):Z.push({newOption:Ct,brandNew:vt,existing:null,keyInfo:null}),It++}})}function Tt(Z,ct){Object(B.each)(ct,function(vt){Z.push({newOption:vt,brandNew:!0,existing:null,keyInfo:null})})}function bt(Z){var ct=Object(B.createHashMap)();Object(B.each)(Z,function(vt){var Ct=vt.existing;Ct&&ct.set(Ct.id,vt)}),Object(B.each)(Z,function(vt){var Ct=vt.newOption;Object(B.assert)(!Ct||Ct.id==null||!ct.get(Ct.id)||ct.get(Ct.id)===vt,"id duplicates: "+(Ct&&Ct.id)),Ct&&Ct.id!=null&&ct.set(Ct.id,vt),!vt.keyInfo&&(vt.keyInfo={})}),Object(B.each)(Z,function(vt,Ct){var Bt=vt.existing,It=vt.newOption,Wt=vt.keyInfo;if(!!Object(B.isObject)(It)){if(Wt.name=It.name!=null?W(It.name):Bt?Bt.name:y+Ct,Bt)Wt.id=W(Bt.id);else if(It.id!=null)Wt.id=W(It.id);else{var ee=0;do Wt.id="\0"+Wt.name+"\0"+ee++;while(ct.get(Wt.id))}ct.set(Wt.id,vt)}})}function nt(Z,ct,vt){var Ct=X(ct[Z],null),Bt=X(vt[Z],null);return Ct!=null&&Bt!=null&&Ct===Bt}function W(Z){return X(Z,"")}function X(Z,ct){if(Z==null)return ct;var vt=typeof Z;return vt==="string"?Z:vt==="number"||Object(B.isStringSafe)(Z)?Z+"":ct}function et(Z){}function k(Z){return Object(B.isStringSafe)(Z)||Object(H.i)(Z)}function st(Z){var ct=Z.name;return!!(ct&&ct.indexOf(y))}function $(Z){return Z&&Z.id!=null&&W(Z.id).indexOf(ot)===0}function D(Z){return ot+Z}function T(Z,ct,vt){Object(B.each)(Z,function(Ct){var Bt=Ct.newOption;Object(B.isObject)(Bt)&&(Ct.keyInfo.mainType=ct,Ct.keyInfo.subType=O(ct,Bt,Ct.existing,vt))})}function O(Z,ct,vt,Ct){var Bt=ct.type?ct.type:vt?vt.subType:Ct.determineSubType(Z,ct);return Bt}function C(Z,ct){var vt={},Ct={};return Bt(Z||[],vt),Bt(ct||[],Ct,vt),[It(vt),It(Ct)];function Bt(Wt,ee,ae){for(var ye=0,Le=Wt.length;ye<Le;ye++){var _e=X(Wt[ye].seriesId,null);if(_e==null)return;for(var De=it(Wt[ye].dataIndex),er=ae&&ae[_e],Ie=0,Fe=De.length;Ie<Fe;Ie++){var He=De[Ie];er&&er[He]?er[He]=null:(ee[_e]||(ee[_e]={}))[He]=1}}}function It(Wt,ee){var ae=[];for(var ye in Wt)if(Wt.hasOwnProperty(ye)&&Wt[ye]!=null)if(ee)ae.push(+ye);else{var Le=It(Wt[ye],!0);Le.length&&ae.push({seriesId:ye,dataIndex:Le})}return ae}}function L(Z,ct){if(ct.dataIndexInside!=null)return ct.dataIndexInside;if(ct.dataIndex!=null)return Object(B.isArray)(ct.dataIndex)?Object(B.map)(ct.dataIndex,function(vt){return Z.indexOfRawIndex(vt)}):Z.indexOfRawIndex(ct.dataIndex);if(ct.name!=null)return Object(B.isArray)(ct.name)?Object(B.map)(ct.name,function(vt){return Z.indexOfName(vt)}):Z.indexOfName(ct.name)}function w(){var Z="__ec_inner_"+z++;return function(ct){return ct[Z]||(ct[Z]={})}}var z=Object(H.h)();function pt(Z,ct,vt){var Ct=At(ct,vt),Bt=Ct.mainTypeSpecified,It=Ct.queryOptionMap,Wt=Ct.others,ee=Wt,ae=vt?vt.defaultMainType:null;return!Bt&&ae&&It.set(ae,{}),It.each(function(ye,Le){var _e=xt(Z,Le,ye,{useDefault:ae===Le,enableAll:vt&&vt.enableAll!=null?vt.enableAll:!0,enableNone:vt&&vt.enableNone!=null?vt.enableNone:!0});ee[Le+"Models"]=_e.models,ee[Le+"Model"]=_e.models[0]}),ee}function At(Z,ct){var vt;if(Object(B.isString)(Z)){var Ct={};Ct[Z+"Index"]=0,vt=Ct}else vt=Z;var Bt=Object(B.createHashMap)(),It={},Wt=!1;return Object(B.each)(vt,function(ee,ae){if(ae==="dataIndex"||ae==="dataIndexInside"){It[ae]=ee;return}var ye=ae.match(/^(\w+)(Index|Id|Name)$/)||[],Le=ye[1],_e=(ye[2]||"").toLowerCase();if(!(!Le||!_e||ct&&ct.includeMainTypes&&Object(B.indexOf)(ct.includeMainTypes,Le)<0)){Wt=Wt||!!Le;var De=Bt.get(Le)||Bt.set(Le,{});De[_e]=ee}}),{mainTypeSpecified:Wt,queryOptionMap:Bt,others:It}}var rt={useDefault:!0,enableAll:!1,enableNone:!1},_t={useDefault:!1,enableAll:!0,enableNone:!0};function xt(Z,ct,vt,Ct){Ct=Ct||rt;var Bt=vt.index,It=vt.id,Wt=vt.name,ee={models:null,specified:Bt!=null||It!=null||Wt!=null};if(!ee.specified){var ae=void 0;return ee.models=Ct.useDefault&&(ae=Z.getComponent(ct))?[ae]:[],ee}return Bt==="none"||Bt===!1?(Object(B.assert)(Ct.enableNone,'`"none"` or `false` is not a valid value on index option.'),ee.models=[],ee):(Bt==="all"&&(Object(B.assert)(Ct.enableAll,'`"all"` is not a valid value on index option.'),Bt=It=Wt=null),ee.models=Z.queryComponents({mainType:ct,index:Bt,id:It,name:Wt}),ee)}function ft(Z,ct,vt){Z.setAttribute?Z.setAttribute(ct,vt):Z[ct]=vt}function Mt(Z,ct){return Z.getAttribute?Z.getAttribute(ct):Z[ct]}function K(Z){return Z==="auto"?mt.a.domSupported?"html":"richText":Z||"html"}function R(Z,ct){var vt=Object(B.createHashMap)(),Ct=[];return Object(B.each)(Z,function(Bt){var It=ct(Bt);(vt.get(It)||(Ct.push(It),vt.set(It,[]))).push(Bt)}),{keys:Ct,buckets:vt}}function tt(Z,ct,vt,Ct,Bt){var It=ct==null||ct==="auto";if(Ct==null)return Ct;if(typeof Ct=="number"){var Wt=Object(ht.c)(vt||0,Ct,Bt);return Object(H.u)(Wt,It?Math.max(Object(H.g)(vt||0),Object(H.g)(Ct)):ct)}else{if(typeof Ct=="string")return Bt<1?vt:Ct;for(var ee=[],ae=vt,ye=Ct,Le=Math.max(ae?ae.length:0,ye.length),_e=0;_e<Le;++_e){var De=Z.getDimensionInfo(_e);if(De.type==="ordinal")ee[_e]=(Bt<1&&ae?ae:ye)[_e];else{var er=ae&&ae[_e]?ae[_e]:0,Ie=ye[_e],Wt=Object(ht.c)(er,Ie,Bt);ee[_e]=Object(H.u)(Wt,It?Math.max(Object(H.g)(er),Object(H.g)(Ie)):ct)}}return ee}}},"4NgU":function(Ge,U,S){"use strict";var B=S("Yl7c"),mt=function(){function H(ht){this._setting=ht||{},this._extent=[Infinity,-Infinity]}return H.prototype.getSetting=function(ht){return this._setting[ht]},H.prototype.unionExtent=function(ht){var y=this._extent;ht[0]<y[0]&&(y[0]=ht[0]),ht[1]>y[1]&&(y[1]=ht[1])},H.prototype.unionExtentFromData=function(ht,y){this.unionExtent(ht.getApproximateExtent(y))},H.prototype.getExtent=function(){return this._extent.slice()},H.prototype.setExtent=function(ht,y){var ot=this._extent;isNaN(ht)||(ot[0]=ht),isNaN(y)||(ot[1]=y)},H.prototype.isInExtentRange=function(ht){return this._extent[0]<=ht&&this._extent[1]>=ht},H.prototype.isBlank=function(){return this._isBlank},H.prototype.setBlank=function(ht){this._isBlank=ht},H}();B.c(mt),U.a=mt},"4mN7":function(Ge,U,S){"use strict";S.d(U,"d",function(){return q}),S.d(U,"c",function(){return N}),S.d(U,"b",function(){return at}),S.d(U,"e",function(){return gt}),S.d(U,"a",function(){return Tt});var B=S("QBsz"),mt=S("Sj9i"),H=Math.min,ht=Math.max,y=Math.sin,ot=Math.cos,it=Math.PI*2,Q=B.create(),Y=B.create(),G=B.create();function q(bt,nt,W){if(bt.length!==0){for(var X=bt[0],et=X[0],k=X[0],st=X[1],$=X[1],D=1;D<bt.length;D++)X=bt[D],et=H(et,X[0]),k=ht(k,X[0]),st=H(st,X[1]),$=ht($,X[1]);nt[0]=et,nt[1]=st,W[0]=k,W[1]=$}}function N(bt,nt,W,X,et,k){et[0]=H(bt,W),et[1]=H(nt,X),k[0]=ht(bt,W),k[1]=ht(nt,X)}var V=[],lt=[];function at(bt,nt,W,X,et,k,st,$,D,T){var O=mt.c,C=mt.a,L=O(bt,W,et,st,V);D[0]=Infinity,D[1]=Infinity,T[0]=-Infinity,T[1]=-Infinity;for(var w=0;w<L;w++){var z=C(bt,W,et,st,V[w]);D[0]=H(z,D[0]),T[0]=ht(z,T[0])}L=O(nt,X,k,$,lt);for(var w=0;w<L;w++){var pt=C(nt,X,k,$,lt[w]);D[1]=H(pt,D[1]),T[1]=ht(pt,T[1])}D[0]=H(bt,D[0]),T[0]=ht(bt,T[0]),D[0]=H(st,D[0]),T[0]=ht(st,T[0]),D[1]=H(nt,D[1]),T[1]=ht(nt,T[1]),D[1]=H($,D[1]),T[1]=ht($,T[1])}function gt(bt,nt,W,X,et,k,st,$){var D=mt.j,T=mt.h,O=ht(H(D(bt,W,et),1),0),C=ht(H(D(nt,X,k),1),0),L=T(bt,W,et,O),w=T(nt,X,k,C);st[0]=H(bt,et,L),st[1]=H(nt,k,w),$[0]=ht(bt,et,L),$[1]=ht(nt,k,w)}function Tt(bt,nt,W,X,et,k,st,$,D){var T=B.min,O=B.max,C=Math.abs(et-k);if(C%it<1e-4&&C>1e-4){$[0]=bt-W,$[1]=nt-X,D[0]=bt+W,D[1]=nt+X;return}if(Q[0]=ot(et)*W+bt,Q[1]=y(et)*X+nt,Y[0]=ot(k)*W+bt,Y[1]=y(k)*X+nt,T($,Q,Y),O(D,Q,Y),et=et%it,et<0&&(et=et+it),k=k%it,k<0&&(k=k+it),et>k&&!st?k+=it:et<k&&st&&(et+=it),st){var L=k;k=et,et=L}for(var w=0;w<k;w+=Math.PI/2)w>et&&(G[0]=ot(w)*W+bt,G[1]=y(w)*X+nt,T($,G,$),O(D,G,D))}},"6GrX":function(Ge,U,S){"use strict";S.d(U,"a",function(){return y}),S.d(U,"g",function(){return q}),S.d(U,"e",function(){return V}),S.d(U,"b",function(){return lt}),S.d(U,"c",function(){return at}),S.d(U,"f",function(){return gt}),S.d(U,"h",function(){return bt}),S.d(U,"d",function(){return nt});var B=S("mFDi"),mt=S("bYtY"),H=S("1RvN"),ht={},y="12px sans-serif",ot,it;function Q(W,X){return ot||(ot=Object(mt.createCanvas)().getContext("2d")),it!==X&&(it=ot.font=X||y),ot.measureText(W)}var Y={measureText:Q};function G(W,X){Y[W]=X}function q(W,X){X=X||y;var et=ht[X];et||(et=ht[X]=new H.a(500));var k=et.get(W);return k==null&&(k=Y.measureText(W,X).width,et.put(W,k)),k}function N(W,X,et,k){var st=q(W,X),$=gt(X),D=lt(0,st,et),T=at(0,$,k),O=new B.a(D,T,st,$);return O}function V(W,X,et,k){var st=((W||"")+"").split(`
`),$=st.length;if($===1)return N(st[0],X,et,k);for(var D=new B.a(0,0,0,0),T=0;T<st.length;T++){var O=N(st[T],X,et,k);T===0?D.copy(O):D.union(O)}return D}function lt(W,X,et){return et==="right"?W-=X:et==="center"&&(W-=X/2),W}function at(W,X,et){return et==="middle"?W-=X/2:et==="bottom"&&(W-=X),W}function gt(W){return q("\u56FD",W)}function Tt(W,X){return Y.measureText(W,X)}function bt(W,X){return typeof W=="string"?W.lastIndexOf("%")>=0?parseFloat(W)/100*X:parseFloat(W):W}function nt(W,X,et){var k=X.position||"inside",st=X.distance!=null?X.distance:5,$=et.height,D=et.width,T=$/2,O=et.x,C=et.y,L="left",w="top";if(k instanceof Array)O+=bt(k[0],et.width),C+=bt(k[1],et.height),L=null,w=null;else switch(k){case"left":O-=st,C+=T,L="right",w="middle";break;case"right":O+=st+D,C+=T,w="middle";break;case"top":O+=D/2,C-=st,L="center",w="bottom";break;case"bottom":O+=D/2,C+=$+st,L="center";break;case"inside":O+=D/2,C+=T,L="center",w="middle";break;case"insideLeft":O+=st,C+=T,w="middle";break;case"insideRight":O+=D-st,C+=T,L="right",w="middle";break;case"insideTop":O+=D/2,C+=st,L="center";break;case"insideBottom":O+=D/2,C+=$-st,L="center",w="bottom";break;case"insideTopLeft":O+=st,C+=st;break;case"insideTopRight":O+=D-st,C+=st,L="right";break;case"insideBottomLeft":O+=st,C+=$-st,w="bottom";break;case"insideBottomRight":O+=D-st,C+=$-st,L="right",w="bottom";break}return W=W||{},W.x=O,W.y=C,W.align=L,W.verticalAlign=w,W}},"6Ic6":function(Ge,U,S){"use strict";var B=S("bYtY"),mt=S("LcXL"),H=S("iRjW"),ht=S("Yl7c"),y=S("4NO4"),ot=S("fWwa"),it=S("n7yn"),Q=S("zM3Q"),Y=y.o(),G=Object(Q.a)(),q=function(){function Tt(){this.group=new mt.a,this.uid=H.c("viewChart"),this.renderTask=Object(it.a)({plan:lt,reset:at}),this.renderTask.context={view:this}}return Tt.prototype.init=function(bt,nt){},Tt.prototype.render=function(bt,nt,W,X){},Tt.prototype.highlight=function(bt,nt,W,X){V(bt.getData(),X,"emphasis")},Tt.prototype.downplay=function(bt,nt,W,X){V(bt.getData(),X,"normal")},Tt.prototype.remove=function(bt,nt){this.group.removeAll()},Tt.prototype.dispose=function(bt,nt){},Tt.prototype.updateView=function(bt,nt,W,X){this.render(bt,nt,W,X)},Tt.prototype.updateLayout=function(bt,nt,W,X){this.render(bt,nt,W,X)},Tt.prototype.updateVisual=function(bt,nt,W,X){this.render(bt,nt,W,X)},Tt.markUpdateMethod=function(bt,nt){Y(bt).updateMethod=nt},Tt.protoInitialize=function(){var bt=Tt.prototype;bt.type="chart"}(),Tt}();function N(Tt,bt,nt){Tt&&(bt==="emphasis"?ot.r:ot.C)(Tt,nt)}function V(Tt,bt,nt){var W=y.u(Tt,bt),X=bt&&bt.highlightKey!=null?Object(ot.v)(bt.highlightKey):null;W!=null?Object(B.each)(y.r(W),function(et){N(Tt.getItemGraphicEl(et),nt,X)}):Tt.eachItemGraphicEl(function(et){N(et,nt,X)})}ht.b(q,["dispose"]),ht.c(q);function lt(Tt){return G(Tt.model)}function at(Tt){var bt=Tt.model,nt=Tt.ecModel,W=Tt.api,X=Tt.payload,et=bt.pipelineContext.progressiveRender,k=Tt.view,st=X&&Y(X).updateMethod,$=et?"incrementalPrepareRender":st&&k[st]?st:"render";return $!=="render"&&k[$](bt,nt,W,X),gt[$]}var gt={incrementalPrepareRender:{progress:function(Tt,bt){bt.view.incrementalRender(Tt,bt.model,bt.ecModel,bt.api,bt.payload)}},render:{forceFirstProgress:!0,progress:function(Tt,bt){bt.view.render(bt.model,bt.ecModel,bt.api,bt.payload)}}};U.a=q},"71kh":function(Ge,U,S){"use strict";S.d(U,"a",function(){return q}),S.d(U,"e",function(){return N}),S.d(U,"b",function(){return V}),S.d(U,"d",function(){return lt}),S.d(U,"c",function(){return at});var B=S("Qxkt"),mt=S("ItGF"),H={time:{month:["January","February","March","April","May","June","July","August","September","October","November","December"],monthAbbr:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayOfWeek:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayOfWeekAbbr:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]},legend:{selector:{all:"All",inverse:"Inv"}},toolbox:{brush:{title:{rect:"Box Select",polygon:"Lasso Select",lineX:"Horizontally Select",lineY:"Vertically Select",keep:"Keep Selections",clear:"Clear Selections"}},dataView:{title:"Data View",lang:["Data View","Close","Refresh"]},dataZoom:{title:{zoom:"Zoom",back:"Zoom Reset"}},magicType:{title:{line:"Switch to Line Chart",bar:"Switch to Bar Chart",stack:"Stack",tiled:"Tile"}},restore:{title:"Restore"},saveAsImage:{title:"Save as Image",lang:["Right Click to Save Image"]}},series:{typeNames:{pie:"Pie chart",bar:"Bar chart",line:"Line chart",scatter:"Scatter plot",effectScatter:"Ripple scatter plot",radar:"Radar chart",tree:"Tree",treemap:"Treemap",boxplot:"Boxplot",candlestick:"Candlestick",k:"K line chart",heatmap:"Heat map",map:"Map",parallel:"Parallel coordinate map",lines:"Line graph",graph:"Relationship graph",sankey:"Sankey diagram",funnel:"Funnel chart",gauge:"Guage",pictorialBar:"Pictorial bar",themeRiver:"Theme River Map",sunburst:"Sunburst"}},aria:{general:{withTitle:'This is a chart about "{title}"',withoutTitle:"This is a chart"},series:{single:{prefix:"",withName:" with type {seriesType} named {seriesName}.",withoutName:" with type {seriesType}."},multiple:{prefix:". It consists of {seriesCount} series count.",withName:" The {seriesId} series is a {seriesType} representing {seriesName}.",withoutName:" The {seriesId} series is a {seriesType}.",separator:{middle:"",end:""}}},data:{allData:"The data is as follows: ",partialData:"The first {displayCnt} items are: ",withName:"the data for {name} is {value}",withoutName:"{value}",separator:{middle:", ",end:". "}}}},ht={time:{month:["\u4E00\u6708","\u4E8C\u6708","\u4E09\u6708","\u56DB\u6708","\u4E94\u6708","\u516D\u6708","\u4E03\u6708","\u516B\u6708","\u4E5D\u6708","\u5341\u6708","\u5341\u4E00\u6708","\u5341\u4E8C\u6708"],monthAbbr:["1\u6708","2\u6708","3\u6708","4\u6708","5\u6708","6\u6708","7\u6708","8\u6708","9\u6708","10\u6708","11\u6708","12\u6708"],dayOfWeek:["\u661F\u671F\u65E5","\u661F\u671F\u4E00","\u661F\u671F\u4E8C","\u661F\u671F\u4E09","\u661F\u671F\u56DB","\u661F\u671F\u4E94","\u661F\u671F\u516D"],dayOfWeekAbbr:["\u65E5","\u4E00","\u4E8C","\u4E09","\u56DB","\u4E94","\u516D"]},legend:{selector:{all:"\u5168\u9009",inverse:"\u53CD\u9009"}},toolbox:{brush:{title:{rect:"\u77E9\u5F62\u9009\u62E9",polygon:"\u5708\u9009",lineX:"\u6A2A\u5411\u9009\u62E9",lineY:"\u7EB5\u5411\u9009\u62E9",keep:"\u4FDD\u6301\u9009\u62E9",clear:"\u6E05\u9664\u9009\u62E9"}},dataView:{title:"\u6570\u636E\u89C6\u56FE",lang:["\u6570\u636E\u89C6\u56FE","\u5173\u95ED","\u5237\u65B0"]},dataZoom:{title:{zoom:"\u533A\u57DF\u7F29\u653E",back:"\u533A\u57DF\u7F29\u653E\u8FD8\u539F"}},magicType:{title:{line:"\u5207\u6362\u4E3A\u6298\u7EBF\u56FE",bar:"\u5207\u6362\u4E3A\u67F1\u72B6\u56FE",stack:"\u5207\u6362\u4E3A\u5806\u53E0",tiled:"\u5207\u6362\u4E3A\u5E73\u94FA"}},restore:{title:"\u8FD8\u539F"},saveAsImage:{title:"\u4FDD\u5B58\u4E3A\u56FE\u7247",lang:["\u53F3\u952E\u53E6\u5B58\u4E3A\u56FE\u7247"]}},series:{typeNames:{pie:"\u997C\u56FE",bar:"\u67F1\u72B6\u56FE",line:"\u6298\u7EBF\u56FE",scatter:"\u6563\u70B9\u56FE",effectScatter:"\u6D9F\u6F2A\u6563\u70B9\u56FE",radar:"\u96F7\u8FBE\u56FE",tree:"\u6811\u56FE",treemap:"\u77E9\u5F62\u6811\u56FE",boxplot:"\u7BB1\u578B\u56FE",candlestick:"K\u7EBF\u56FE",k:"K\u7EBF\u56FE",heatmap:"\u70ED\u529B\u56FE",map:"\u5730\u56FE",parallel:"\u5E73\u884C\u5750\u6807\u56FE",lines:"\u7EBF\u56FE",graph:"\u5173\u7CFB\u56FE",sankey:"\u6851\u57FA\u56FE",funnel:"\u6F0F\u6597\u56FE",gauge:"\u4EEA\u8868\u76D8\u56FE",pictorialBar:"\u8C61\u5F62\u67F1\u56FE",themeRiver:"\u4E3B\u9898\u6CB3\u6D41\u56FE",sunburst:"\u65ED\u65E5\u56FE"}},aria:{general:{withTitle:"\u8FD9\u662F\u4E00\u4E2A\u5173\u4E8E\u201C{title}\u201D\u7684\u56FE\u8868\u3002",withoutTitle:"\u8FD9\u662F\u4E00\u4E2A\u56FE\u8868\uFF0C"},series:{single:{prefix:"",withName:"\u56FE\u8868\u7C7B\u578B\u662F{seriesType}\uFF0C\u8868\u793A{seriesName}\u3002",withoutName:"\u56FE\u8868\u7C7B\u578B\u662F{seriesType}\u3002"},multiple:{prefix:"\u5B83\u7531{seriesCount}\u4E2A\u56FE\u8868\u7CFB\u5217\u7EC4\u6210\u3002",withName:"\u7B2C{seriesId}\u4E2A\u7CFB\u5217\u662F\u4E00\u4E2A\u8868\u793A{seriesName}\u7684{seriesType}\uFF0C",withoutName:"\u7B2C{seriesId}\u4E2A\u7CFB\u5217\u662F\u4E00\u4E2A{seriesType}\uFF0C",separator:{middle:"\uFF1B",end:"\u3002"}}},data:{allData:"\u5176\u6570\u636E\u662F\u2014\u2014",partialData:"\u5176\u4E2D\uFF0C\u524D{displayCnt}\u9879\u662F\u2014\u2014",withName:"{name}\u7684\u6570\u636E\u662F{value}",withoutName:"{value}",separator:{middle:"\uFF0C",end:""}}}},y=S("bYtY"),ot="ZH",it="EN",Q=it,Y={},G={},q=mt.a.domSupported?function(){var gt=(document.documentElement.lang||navigator.language||navigator.browserLanguage).toUpperCase();return gt.indexOf(ot)>-1?ot:Q}():Q;function N(gt,Tt){gt=gt.toUpperCase(),G[gt]=new B.a(Tt),Y[gt]=Tt}function V(gt){if(Object(y.isString)(gt)){var Tt=Y[gt.toUpperCase()]||{};return gt===ot||gt===it?Object(y.clone)(Tt):Object(y.merge)(Object(y.clone)(Tt),Object(y.clone)(Y[Q]),!1)}else return Object(y.merge)(Object(y.clone)(gt),Object(y.clone)(Y[Q]),!1)}function lt(gt){return G[gt]}function at(){return G[Q]}N(it,H),N(ot,ht)},"7G+c":function(Ge,U,S){"use strict";S.d(U,"e",function(){return y}),S.d(U,"b",function(){return ot}),S.d(U,"c",function(){return it}),S.d(U,"a",function(){return Q}),S.d(U,"d",function(){return G});var B=S("bYtY"),mt=S("B/3G"),H=S("4NO4"),ht=function(){function at(gt){this.data=gt.data||(gt.sourceFormat===mt.d?{}:[]),this.sourceFormat=gt.sourceFormat||mt.h,this.seriesLayoutBy=gt.seriesLayoutBy||mt.a,this.startIndex=gt.startIndex||0,this.dimensionsDefine=gt.dimensionsDefine,this.dimensionsDetectedCount=gt.dimensionsDetectedCount,this.encodeDefine=gt.encodeDefine,this.metaRawOption=gt.metaRawOption}return at}();function y(at){return at instanceof ht}function ot(at,gt,Tt,bt){Tt=Tt||G(at);var nt=gt.seriesLayoutBy,W=q(at,Tt,nt,gt.sourceHeader,gt.dimensions),X=new ht({data:at,sourceFormat:Tt,seriesLayoutBy:nt,dimensionsDefine:W.dimensionsDefine,startIndex:W.startIndex,dimensionsDetectedCount:W.dimensionsDetectedCount,encodeDefine:Y(bt),metaRawOption:Object(B.clone)(gt)});return X}function it(at){return new ht({data:at,sourceFormat:Object(B.isTypedArray)(at)?mt.g:mt.f})}function Q(at){return new ht({data:at.data,sourceFormat:at.sourceFormat,seriesLayoutBy:at.seriesLayoutBy,dimensionsDefine:Object(B.clone)(at.dimensionsDefine),startIndex:at.startIndex,dimensionsDetectedCount:at.dimensionsDetectedCount,encodeDefine:Y(at.encodeDefine)})}function Y(at){return at?Object(B.createHashMap)(at):null}function G(at){var gt=mt.h;if(Object(B.isTypedArray)(at))gt=mt.g;else if(Object(B.isArray)(at)){at.length===0&&(gt=mt.c);for(var Tt=0,bt=at.length;Tt<bt;Tt++){var nt=at[Tt];if(nt!=null){if(Object(B.isArray)(nt)){gt=mt.c;break}else if(Object(B.isObject)(nt)){gt=mt.e;break}}}}else if(Object(B.isObject)(at)){for(var W in at)if(Object(B.hasOwn)(at,W)&&Object(B.isArrayLike)(at[W])){gt=mt.d;break}}return gt}function q(at,gt,Tt,bt,nt){var W,X;if(!at)return{dimensionsDefine:V(nt),startIndex:X,dimensionsDetectedCount:W};if(gt===mt.c){var et=at;bt==="auto"||bt==null?lt(function(st){st!=null&&st!=="-"&&(Object(B.isString)(st)?X==null&&(X=1):X=0)},Tt,et,10):X=Object(B.isNumber)(bt)?bt:bt?1:0,!nt&&X===1&&(nt=[],lt(function(st,$){nt[$]=st!=null?st+"":""},Tt,et,Infinity)),W=nt?nt.length:Tt===mt.b?et.length:et[0]?et[0].length:null}else if(gt===mt.e)nt||(nt=N(at));else if(gt===mt.d)nt||(nt=[],Object(B.each)(at,function(st,$){nt.push($)}));else if(gt===mt.f){var k=Object(H.h)(at[0]);W=Object(B.isArray)(k)&&k.length||1}else gt===mt.g;return{startIndex:X,dimensionsDefine:V(nt),dimensionsDetectedCount:W}}function N(at){for(var gt=0,Tt;gt<at.length&&!(Tt=at[gt++]););if(Tt){var bt=[];return Object(B.each)(Tt,function(nt,W){bt.push(W)}),bt}}function V(at){if(!!at){var gt=Object(B.createHashMap)();return Object(B.map)(at,function(Tt,bt){Tt=Object(B.isObject)(Tt)?Tt:{name:Tt};var nt={name:Tt.name,displayName:Tt.displayName,type:Tt.type};if(nt.name==null)return nt;nt.name+="",nt.displayName==null&&(nt.displayName=nt.name);var W=gt.get(nt.name);return W?nt.name+="-"+W.count++:gt.set(nt.name,{count:1}),nt})}}function lt(at,gt,Tt,bt){if(gt===mt.b)for(var nt=0;nt<Tt.length&&nt<bt;nt++)at(Tt[nt]?Tt[nt][0]:null,nt);else for(var W=Tt[0]||[],nt=0;nt<W.length&&nt<bt;nt++)at(W[nt],nt)}},"7a4p":function(Ge,U,S){"use strict";S.d(U,"a",function(){return it}),S.d(U,"b",function(){return q});var B="[ECharts] ",mt={},H=typeof console!="undefined"&&console.warn&&console.log;function ht(N){H&&console.log(B+N)}function y(N){H&&console.warn(B+N)}function ot(N){H&&console.error(B+N)}function it(N){}function Q(N,V,lt){}function Y(){for(var N=[],V=0;V<arguments.length;V++)N[V]=arguments[V]}function G(){for(var N=[],V=0;V<arguments.length;V++)N[V]=arguments[V];var lt="";if(!1)var at;return lt}function q(N){throw new Error(N)}},"7aKB":function(Ge,U,S){"use strict";S.d(U,"a",function(){return ht}),S.d(U,"k",function(){return y}),S.d(U,"j",function(){return ot}),S.d(U,"d",function(){return Y}),S.d(U,"i",function(){return G}),S.d(U,"f",function(){return V}),S.d(U,"g",function(){return lt}),S.d(U,"h",function(){return at}),S.d(U,"e",function(){return gt}),S.d(U,"b",function(){return Tt}),S.d(U,"c",function(){return bt}),S.d(U,"l",function(){return nt});var B=S("bYtY"),mt=S("OELB"),H=S("+Hau");function ht(W){if(!Object(mt.i)(W))return B.isString(W)?W:"-";var X=(W+"").split(".");return X[0].replace(/(\d{1,3})(?=(?:\d{3})+(?!\d))/g,"$1,")+(X.length>1?"."+X[1]:"")}function y(W,X){return W=(W||"").toLowerCase().replace(/-(.)/g,function(et,k){return k.toUpperCase()}),X&&W&&(W=W.charAt(0).toUpperCase()+W.slice(1)),W}var ot=B.normalizeCssArray,it=/([&<>"'])/g,Q={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};function Y(W){return W==null?"":(W+"").replace(it,function(X,et){return Q[et]})}function G(W,X,et){var k="{yyyy}-{MM}-{dd} {hh}:{mm}:{ss}";function st(L){return L&&B.trim(L)?L:"-"}function $(L){return!!(L!=null&&!isNaN(L)&&isFinite(L))}var D=X==="time",T=W instanceof Date;if(D||T){var O=D?Object(mt.n)(W):W;if(isNaN(+O)){if(T)return"-"}else return Object(H.h)(O,k,et)}if(X==="ordinal")return B.isStringSafe(W)?st(W):B.isNumber(W)&&$(W)?W+"":"-";var C=Object(mt.m)(W);return $(C)?ht(C):B.isStringSafe(W)?st(W):"-"}var q=["a","b","c","d","e","f","g"],N=function(W,X){return"{"+W+(X==null?"":X)+"}"};function V(W,X,et){B.isArray(X)||(X=[X]);var k=X.length;if(!k)return"";for(var st=X[0].$vars||[],$=0;$<st.length;$++){var D=q[$];W=W.replace(N(D),N(D,0))}for(var T=0;T<k;T++)for(var O=0;O<st.length;O++){var C=X[T][st[O]];W=W.replace(N(q[O],T),et?Y(C):C)}return W}function lt(W,X,et){return B.each(X,function(k,st){W=W.replace("{"+st+"}",et?Y(k):k)}),W}function at(W,X){var et=B.isString(W)?{color:W,extraCssText:X}:W||{},k=et.color,st=et.type;X=et.extraCssText;var $=et.renderMode||"html";if(!k)return"";if($==="html")return st==="subItem"?'<span style="display:inline-block;vertical-align:middle;margin-right:8px;margin-left:3px;border-radius:4px;width:4px;height:4px;background-color:'+Y(k)+";"+(X||"")+'"></span>':'<span style="display:inline-block;margin-right:4px;border-radius:10px;width:10px;height:10px;background-color:'+Y(k)+";"+(X||"")+'"></span>';var D=et.markerId||"markerX";return{renderMode:$,content:"{"+D+"|}  ",style:st==="subItem"?{width:4,height:4,borderRadius:2,backgroundColor:k}:{width:10,height:10,borderRadius:5,backgroundColor:k}}}function gt(W,X,et){(W==="week"||W==="month"||W==="quarter"||W==="half-year"||W==="year")&&(W=`MM-dd
yyyy`);var k=Object(mt.n)(X),st=et?"UTC":"",$=k["get"+st+"FullYear"](),D=k["get"+st+"Month"]()+1,T=k["get"+st+"Date"](),O=k["get"+st+"Hours"](),C=k["get"+st+"Minutes"](),L=k["get"+st+"Seconds"](),w=k["get"+st+"Milliseconds"]();return W=W.replace("MM",Object(H.y)(D,2)).replace("M",D).replace("yyyy",$).replace("yy",$%100+"").replace("dd",Object(H.y)(T,2)).replace("d",T).replace("hh",Object(H.y)(O,2)).replace("h",O).replace("mm",Object(H.y)(C,2)).replace("m",C).replace("ss",Object(H.y)(L,2)).replace("s",L).replace("SSS",Object(H.y)(w,3)),W}function Tt(W){return W&&W.charAt(0).toUpperCase()+W.substr(1)}function bt(W,X){return X=X||"transparent",B.isString(W)?W:B.isObject(W)&&W.colorStops&&(W.colorStops[0]||{}).color||X}function nt(W,X){if(X==="_blank"||X==="blank"){var et=window.open();et.opener=null,et.location.href=W}else window.open(W,X)}},"7hqr":function(Ge,U,S){"use strict";S.d(U,"a",function(){return mt}),S.d(U,"c",function(){return H}),S.d(U,"b",function(){return ht});var B=S("bYtY");function mt(y,ot,it){it=it||{};var Q=it.byIndex,Y=it.stackedCoordDimension,G=!!(y&&y.get("stack")),q,N,V,lt;if(Object(B.each)(ot,function(bt,nt){Object(B.isString)(bt)&&(ot[nt]=bt={name:bt}),G&&!bt.isExtraCoord&&(!Q&&!q&&bt.ordinalMeta&&(q=bt),!N&&bt.type!=="ordinal"&&bt.type!=="time"&&(!Y||Y===bt.coordDim)&&(N=bt))}),N&&!Q&&!q&&(Q=!0),N){V="__\0ecstackresult",lt="__\0ecstackedover",q&&(q.createInvertedIndices=!0);var at=N.coordDim,gt=N.type,Tt=0;Object(B.each)(ot,function(bt){bt.coordDim===at&&Tt++}),ot.push({name:V,coordDim:at,coordDimIndex:Tt,type:gt,isExtraCoord:!0,isCalculationCoord:!0}),Tt++,ot.push({name:lt,coordDim:lt,coordDimIndex:Tt,type:gt,isExtraCoord:!0,isCalculationCoord:!0})}return{stackedDimension:N&&N.name,stackedByDimension:q&&q.name,isStackedByIndex:Q,stackedOverDimension:lt,stackResultDimension:V}}function H(y,ot){return!!ot&&ot===y.getCalculationInfo("stackedDimension")}function ht(y,ot){return H(y,ot)?y.getCalculationInfo("stackResultDimension"):ot}},"87sf":function(Ge,U,S){"use strict";S.d(U,"a",function(){return H}),S.d(U,"b",function(){return y});var B=S("bYtY"),mt=S("4NO4");function H(ot,it){function Q(Y,G){var q=[];return Y.eachComponent({mainType:"series",subType:ot,query:G},function(N){q.push(N.seriesIndex)}),q}Object(B.each)([[ot+"ToggleSelect","toggleSelect"],[ot+"Select","select"],[ot+"UnSelect","unselect"]],function(Y){it(Y[0],function(G,q,N){G=Object(B.extend)({},G),N.dispatchAction(Object(B.extend)(G,{type:Y[1],seriesIndex:Q(q,G)}))})})}function ht(ot,it,Q,Y,G){var q=ot+it;Q.isSilent(q)||Y.eachComponent({mainType:"series",subType:"pie"},function(N){for(var V=N.seriesIndex,lt=G.selected,at=0;at<lt.length;at++)if(lt[at].seriesIndex===V){var gt=N.getData(),Tt=Object(mt.u)(gt,G.fromActionPayload);Q.trigger(q,{type:q,seriesId:N.id,name:Object(B.isArray)(Tt)?gt.getName(Tt[0]):gt.getName(Tt),selected:Object(B.extend)({},N.option.selectedMap)})}})}function y(ot,it,Q){ot.on("selectchanged",function(Y){var G=Q.getModel();Y.isFromClick?(ht("map","selectchanged",it,G,Y),ht("pie","selectchanged",it,G,Y)):Y.fromAction==="select"?(ht("map","selected",it,G,Y),ht("pie","selected",it,G,Y)):Y.fromAction==="unselect"&&(ht("map","unselected",it,G,Y),ht("pie","unselected",it,G,Y))})}},"8nly":function(Ge,U,S){"use strict";S.d(U,"a",function(){return Y}),S.d(U,"b",function(){return G});var B=S("f66r"),mt=S("mFDi"),H=S("4mN7"),ht=S("QBsz"),y=S("BlVb"),ot=S("Fofx"),it=[],Q=function(){function q(N){this.name=N}return q.prototype.getCenter=function(){},q}(),Y=function(q){Object(B.b)(N,q);function N(V,lt,at){var gt=q.call(this,V)||this;if(gt.type="geoJSON",gt.geometries=lt,at)at=[at[0],at[1]];else{var Tt=gt.getBoundingRect();at=[Tt.x+Tt.width/2,Tt.y+Tt.height/2]}return gt._center=at,gt}return N.prototype.getBoundingRect=function(){var V=this._rect;if(V)return V;for(var lt=Number.MAX_VALUE,at=[lt,lt],gt=[-lt,-lt],Tt=[],bt=[],nt=this.geometries,W=0;W<nt.length;W++)if(nt[W].type==="polygon"){var X=nt[W].exterior;H.d(X,Tt,bt),ht.min(at,at,Tt),ht.max(gt,gt,bt)}return W===0&&(at[0]=at[1]=gt[0]=gt[1]=0),this._rect=new mt.a(at[0],at[1],gt[0]-at[0],gt[1]-at[1])},N.prototype.contain=function(V){var lt=this.getBoundingRect(),at=this.geometries;if(!lt.contain(V[0],V[1]))return!1;t:for(var gt=0,Tt=at.length;gt<Tt;gt++)if(at[gt].type==="polygon"){var bt=at[gt].exterior,nt=at[gt].interiors;if(y.a(bt,V[0],V[1])){for(var W=0;W<(nt?nt.length:0);W++)if(y.a(nt[W],V[0],V[1]))continue t;return!0}}return!1},N.prototype.transformTo=function(V,lt,at,gt){var Tt=this.getBoundingRect(),bt=Tt.width/Tt.height;at?gt||(gt=at/bt):at=bt*gt;for(var nt=new mt.a(V,lt,at,gt),W=Tt.calculateTransform(nt),X=this.geometries,et=0;et<X.length;et++)if(X[et].type==="polygon"){for(var k=X[et].exterior,st=X[et].interiors,$=0;$<k.length;$++)ht.applyTransform(k[$],k[$],W);for(var D=0;D<(st?st.length:0);D++)for(var $=0;$<st[D].length;$++)ht.applyTransform(st[D][$],st[D][$],W)}Tt=this._rect,Tt.copy(nt),this._center=[Tt.x+Tt.width/2,Tt.y+Tt.height/2]},N.prototype.cloneShallow=function(V){V==null&&(V=this.name);var lt=new N(V,this.geometries,this._center);return lt._rect=this._rect,lt.transformTo=null,lt},N.prototype.getCenter=function(){return this._center},N.prototype.setCenter=function(V){this._center=V},N}(Q),G=function(q){Object(B.b)(N,q);function N(V,lt){var at=q.call(this,V)||this;return at.type="geoSVG",at._elOnlyForCalculate=lt,at}return N.prototype.getCenter=function(){var V=this._center;return V||(V=this._center=this._calculateCenter()),V},N.prototype._calculateCenter=function(){for(var V=this._elOnlyForCalculate,lt=V.getBoundingRect(),at=[lt.x+lt.width/2,lt.y+lt.height/2],gt=ot.identity(it),Tt=V;Tt&&!Tt.isGeoSVGGraphicRoot;)ot.mul(gt,Tt.getLocalTransform(),gt),Tt=Tt.parent;return ot.invert(gt,gt),ht.applyTransform(at,at,gt),at},N}(Q)},"9ti/":function(Ge,U,S){"use strict";S.d(U,"a",function(){return y});var B=S("bYtY"),mt=S("IXzq"),H=S("KxfA"),ht=S("4NO4");function y(it){var Q=it.series,Y=it.dataIndex,G=it.multipleSeries,q=Q.getData(),N=q.mapDimensionsAll("defaultedTooltip"),V=N.length,lt=Q.getRawValue(Y),at=Object(B.isArray)(lt),gt=Object(mt.e)(Q,Y),Tt,bt,nt,W;if(V>1||at&&!V){var X=ot(lt,Q,Y,N,gt);Tt=X.inlineValues,bt=X.inlineValueTypes,nt=X.blocks,W=X.inlineValues[0]}else if(V){var et=q.getDimensionInfo(N[0]);W=Tt=Object(H.e)(q,Y,N[0]),bt=et.type}else W=Tt=at?lt[0]:lt;var k=Object(ht.n)(Q),st=k&&Q.name||"",$=q.getName(Y),D=G?st:$;return Object(mt.c)("section",{header:st,noHeader:G||!k,sortParam:W,blocks:[Object(mt.c)("nameValue",{markerType:"item",markerColor:gt,name:D,noName:!Object(B.trim)(D),value:Tt,valueType:bt})].concat(nt||[])})}function ot(it,Q,Y,G,q){var N=Q.getData(),V=Object(B.reduce)(it,function(bt,nt,W){var X=N.getDimensionInfo(W);return bt=bt||X&&X.tooltip!==!1&&X.displayName!=null},!1),lt=[],at=[],gt=[];G.length?Object(B.each)(G,function(bt){Tt(Object(H.e)(N,Y,bt),bt)}):Object(B.each)(it,Tt);function Tt(bt,nt){var W=N.getDimensionInfo(nt);!W||W.otherDims.tooltip===!1||(V?gt.push(Object(mt.c)("nameValue",{markerType:"subItem",markerColor:q,name:W.displayName,value:bt,valueType:W.type})):(lt.push(bt),at.push(W.type)))}return{inlineValues:lt,inlineValueTypes:at,blocks:gt}}},"9yv4":function(Ge,U,S){"use strict";S.d(U,"a",function(){return ot}),S.d(U,"b",function(){return it});var B=S("bYtY"),mt=S("7G+c"),H=S("B/3G"),ht=S("D5nY"),y=S("BPd+"),ot=function(){function G(q){this._sourceList=[],this._upstreamSignList=[],this._versionSignBase=0,this._sourceHost=q}return G.prototype.dirty=function(){this._setLocalSource([],[])},G.prototype._setLocalSource=function(q,N){this._sourceList=q,this._upstreamSignList=N,this._versionSignBase++,this._versionSignBase>9e10&&(this._versionSignBase=0)},G.prototype._getVersionSign=function(){return this._sourceHost.uid+"_"+this._versionSignBase},G.prototype.prepareSource=function(){this._isDirty()&&this._createSource()},G.prototype._createSource=function(){this._setLocalSource([],[]);var q=this._sourceHost,N=this._getUpstreamSourceManagers(),V=!!N.length,lt,at;if(Q(q)){var gt=q,Tt=void 0,bt=void 0,nt=void 0;if(V){var W=N[0];W.prepareSource(),nt=W.getSource(),Tt=nt.data,bt=nt.sourceFormat,at=[W._getVersionSign()]}else Tt=gt.get("data",!0),bt=Object(B.isTypedArray)(Tt)?H.g:H.f,at=[];var X=this._getSourceMetaRawOption(),et=nt?nt.metaRawOption:null,k=Object(B.retrieve2)(X.seriesLayoutBy,et?et.seriesLayoutBy:null),st=Object(B.retrieve2)(X.sourceHeader,et?et.sourceHeader:null),$=Object(B.retrieve2)(X.dimensions,et?et.dimensions:null);lt=[Object(mt.b)(Tt,{seriesLayoutBy:k,sourceHeader:st,dimensions:$},bt,gt.get("encode",!0))]}else{var D=q;if(V){var T=this._applyTransform(N);lt=T.sourceList,at=T.upstreamSignList}else{var O=D.get("source",!0);lt=[Object(mt.b)(O,this._getSourceMetaRawOption(),null,null)],at=[]}}this._setLocalSource(lt,at)},G.prototype._applyTransform=function(q){var N=this._sourceHost,V=N.get("transform",!0),lt=N.get("fromTransformResult",!0);if(lt!=null){var at="";q.length!==1&&Y(at)}var gt,Tt=[],bt=[];return Object(B.each)(q,function(nt){nt.prepareSource();var W=nt.getSource(lt||0),X="";lt!=null&&!W&&Y(X),Tt.push(W),bt.push(nt._getVersionSign())}),V?gt=Object(y.a)(V,Tt,{datasetIndex:N.componentIndex}):lt!=null&&(gt=[Object(mt.a)(Tt[0])]),{sourceList:gt,upstreamSignList:bt}},G.prototype._isDirty=function(){var q=this._sourceList;if(!q.length)return!0;for(var N=this._getUpstreamSourceManagers(),V=0;V<N.length;V++){var lt=N[V];if(lt._isDirty()||this._upstreamSignList[V]!==lt._getVersionSign())return!0}},G.prototype.getSource=function(q){return this._sourceList[q||0]},G.prototype._getUpstreamSourceManagers=function(){var q=this._sourceHost;if(Q(q)){var N=Object(ht.f)(q);return N?[N.getSourceManager()]:[]}else return Object(B.map)(Object(ht.e)(q),function(V){return V.getSourceManager()})},G.prototype._getSourceMetaRawOption=function(){var q=this._sourceHost,N,V,lt;if(Q(q))N=q.get("seriesLayoutBy",!0),V=q.get("sourceHeader",!0),lt=q.get("dimensions",!0);else if(!this._getUpstreamSourceManagers().length){var at=q;N=at.get("seriesLayoutBy",!0),V=at.get("sourceHeader",!0),lt=at.get("dimensions",!0)}return{seriesLayoutBy:N,sourceHeader:V,dimensions:lt}},G}();function it(G){var q=G.option.transform;q&&Object(B.setAsPrimitive)(G.option.transform)}function Q(G){return G.mainType==="series"}function Y(G){throw new Error(G)}},"B/3G":function(Ge,U,S){"use strict";S.d(U,"i",function(){return mt}),S.d(U,"f",function(){return H}),S.d(U,"c",function(){return ht}),S.d(U,"e",function(){return y}),S.d(U,"d",function(){return ot}),S.d(U,"g",function(){return it}),S.d(U,"h",function(){return Q}),S.d(U,"a",function(){return Y}),S.d(U,"b",function(){return G});var B=S("bYtY"),mt=Object(B.createHashMap)(["tooltip","label","itemName","itemId","seriesName"]),H="original",ht="arrayRows",y="objectRows",ot="keyedColumns",it="typedArray",Q="unknown",Y="column",G="row"},BMrR:function(Ge,U,S){"use strict";var B=S("qrJ5");U.a=B.a},BPZU:function(Ge,U,S){"use strict";S.d(U,"a",function(){return q});var B=32,mt=7,H=256;function ht(N){for(var V=0;N>=B;)V|=N&1,N>>=1;return N+V}function y(N,V,lt,at){var gt=V+1;if(gt===lt)return 1;if(at(N[gt++],N[V])<0){for(;gt<lt&&at(N[gt],N[gt-1])<0;)gt++;ot(N,V,gt)}else for(;gt<lt&&at(N[gt],N[gt-1])>=0;)gt++;return gt-V}function ot(N,V,lt){for(lt--;V<lt;){var at=N[V];N[V++]=N[lt],N[lt--]=at}}function it(N,V,lt,at,gt){for(at===V&&at++;at<lt;at++){for(var Tt=N[at],bt=V,nt=at,W;bt<nt;)W=bt+nt>>>1,gt(Tt,N[W])<0?nt=W:bt=W+1;var X=at-bt;switch(X){case 3:N[bt+3]=N[bt+2];case 2:N[bt+2]=N[bt+1];case 1:N[bt+1]=N[bt];break;default:for(;X>0;)N[bt+X]=N[bt+X-1],X--}N[bt]=Tt}}function Q(N,V,lt,at,gt,Tt){var bt=0,nt=0,W=1;if(Tt(N,V[lt+gt])>0){for(nt=at-gt;W<nt&&Tt(N,V[lt+gt+W])>0;)bt=W,W=(W<<1)+1,W<=0&&(W=nt);W>nt&&(W=nt),bt+=gt,W+=gt}else{for(nt=gt+1;W<nt&&Tt(N,V[lt+gt-W])<=0;)bt=W,W=(W<<1)+1,W<=0&&(W=nt);W>nt&&(W=nt);var X=bt;bt=gt-W,W=gt-X}for(bt++;bt<W;){var et=bt+(W-bt>>>1);Tt(N,V[lt+et])>0?bt=et+1:W=et}return W}function Y(N,V,lt,at,gt,Tt){var bt=0,nt=0,W=1;if(Tt(N,V[lt+gt])<0){for(nt=gt+1;W<nt&&Tt(N,V[lt+gt-W])<0;)bt=W,W=(W<<1)+1,W<=0&&(W=nt);W>nt&&(W=nt);var X=bt;bt=gt-W,W=gt-X}else{for(nt=at-gt;W<nt&&Tt(N,V[lt+gt+W])>=0;)bt=W,W=(W<<1)+1,W<=0&&(W=nt);W>nt&&(W=nt),bt+=gt,W+=gt}for(bt++;bt<W;){var et=bt+(W-bt>>>1);Tt(N,V[lt+et])<0?W=et:bt=et+1}return W}function G(N,V){var lt=mt,at=0,gt=H,Tt=0,bt,nt,W=0;at=N.length,at<2*H&&(gt=at>>>1);var X=[];Tt=at<120?5:at<1542?10:at<119151?19:40,bt=[],nt=[];function et(O,C){bt[W]=O,nt[W]=C,W+=1}function k(){for(;W>1;){var O=W-2;if(O>=1&&nt[O-1]<=nt[O]+nt[O+1]||O>=2&&nt[O-2]<=nt[O]+nt[O-1])nt[O-1]<nt[O+1]&&O--;else if(nt[O]>nt[O+1])break;$(O)}}function st(){for(;W>1;){var O=W-2;O>0&&nt[O-1]<nt[O+1]&&O--,$(O)}}function $(O){var C=bt[O],L=nt[O],w=bt[O+1],z=nt[O+1];nt[O]=L+z,O===W-3&&(bt[O+1]=bt[O+2],nt[O+1]=nt[O+2]),W--;var pt=Y(N[w],N,C,L,0,V);C+=pt,L-=pt,L!==0&&(z=Q(N[C+L-1],N,w,z,z-1,V),z!==0&&(L<=z?D(C,L,w,z):T(C,L,w,z)))}function D(O,C,L,w){var z=0;for(z=0;z<C;z++)X[z]=N[O+z];var pt=0,At=L,rt=O;if(N[rt++]=N[At++],--w==0){for(z=0;z<C;z++)N[rt+z]=X[pt+z];return}if(C===1){for(z=0;z<w;z++)N[rt+z]=N[At+z];N[rt+w]=X[pt];return}for(var _t=lt,xt,ft,Mt;;){xt=0,ft=0,Mt=!1;do if(V(N[At],X[pt])<0){if(N[rt++]=N[At++],ft++,xt=0,--w==0){Mt=!0;break}}else if(N[rt++]=X[pt++],xt++,ft=0,--C==1){Mt=!0;break}while((xt|ft)<_t);if(Mt)break;do{if(xt=Y(N[At],X,pt,C,0,V),xt!==0){for(z=0;z<xt;z++)N[rt+z]=X[pt+z];if(rt+=xt,pt+=xt,C-=xt,C<=1){Mt=!0;break}}if(N[rt++]=N[At++],--w==0){Mt=!0;break}if(ft=Q(X[pt],N,At,w,0,V),ft!==0){for(z=0;z<ft;z++)N[rt+z]=N[At+z];if(rt+=ft,At+=ft,w-=ft,w===0){Mt=!0;break}}if(N[rt++]=X[pt++],--C==1){Mt=!0;break}_t--}while(xt>=mt||ft>=mt);if(Mt)break;_t<0&&(_t=0),_t+=2}if(lt=_t,lt<1&&(lt=1),C===1){for(z=0;z<w;z++)N[rt+z]=N[At+z];N[rt+w]=X[pt]}else{if(C===0)throw new Error;for(z=0;z<C;z++)N[rt+z]=X[pt+z]}}function T(O,C,L,w){var z=0;for(z=0;z<w;z++)X[z]=N[L+z];var pt=O+C-1,At=w-1,rt=L+w-1,_t=0,xt=0;if(N[rt--]=N[pt--],--C==0){for(_t=rt-(w-1),z=0;z<w;z++)N[_t+z]=X[z];return}if(w===1){for(rt-=C,pt-=C,xt=rt+1,_t=pt+1,z=C-1;z>=0;z--)N[xt+z]=N[_t+z];N[rt]=X[At];return}for(var ft=lt;;){var Mt=0,K=0,R=!1;do if(V(X[At],N[pt])<0){if(N[rt--]=N[pt--],Mt++,K=0,--C==0){R=!0;break}}else if(N[rt--]=X[At--],K++,Mt=0,--w==1){R=!0;break}while((Mt|K)<ft);if(R)break;do{if(Mt=C-Y(X[At],N,O,C,C-1,V),Mt!==0){for(rt-=Mt,pt-=Mt,C-=Mt,xt=rt+1,_t=pt+1,z=Mt-1;z>=0;z--)N[xt+z]=N[_t+z];if(C===0){R=!0;break}}if(N[rt--]=X[At--],--w==1){R=!0;break}if(K=w-Q(N[pt],X,0,w,w-1,V),K!==0){for(rt-=K,At-=K,w-=K,xt=rt+1,_t=At+1,z=0;z<K;z++)N[xt+z]=X[_t+z];if(w<=1){R=!0;break}}if(N[rt--]=N[pt--],--C==0){R=!0;break}ft--}while(Mt>=mt||K>=mt);if(R)break;ft<0&&(ft=0),ft+=2}if(lt=ft,lt<1&&(lt=1),w===1){for(rt-=C,pt-=C,xt=rt+1,_t=pt+1,z=C-1;z>=0;z--)N[xt+z]=N[_t+z];N[rt]=X[At]}else{if(w===0)throw new Error;for(_t=rt-(w-1),z=0;z<w;z++)N[_t+z]=X[z]}}return{mergeRuns:k,forceMergeRuns:st,pushRun:et}}function q(N,V,lt,at){lt||(lt=0),at||(at=N.length);var gt=at-lt;if(!(gt<2)){var Tt=0;if(gt<B){Tt=y(N,lt,at,V),it(N,lt,at,lt+Tt,V);return}var bt=G(N,V),nt=ht(gt);do{if(Tt=y(N,lt,at,V),Tt<nt){var W=gt;W>nt&&(W=nt),it(N,lt,lt+W,lt+Tt,V),Tt=W}bt.pushRun(lt,Tt),bt.mergeRuns(),gt-=Tt,lt+=Tt}while(gt!==0);bt.forceMergeRuns()}}},"BPd+":function(Ge,U,S){"use strict";S.d(U,"b",function(){return at}),S.d(U,"a",function(){return gt});var B=S("B/3G"),mt=S("4NO4"),H=S("bYtY"),ht=S("KxfA"),y=S("t9mh"),ot=S("7a4p"),it=S("7G+c"),Q=function(){function nt(){}return nt.prototype.getRawData=function(){throw new Error("not supported")},nt.prototype.getRawDataItem=function(W){throw new Error("not supported")},nt.prototype.cloneRawData=function(){},nt.prototype.getDimensionInfo=function(W){},nt.prototype.cloneAllDimensionInfo=function(){},nt.prototype.count=function(){},nt.prototype.retrieveValue=function(W,X){},nt.prototype.retrieveValueFromItem=function(W,X){},nt.prototype.convertValue=function(W,X){return Object(y.d)(W,X)},nt}();function Y(nt,W){var X=new Q,et=nt.data,k=X.sourceFormat=nt.sourceFormat,st=nt.startIndex,$="";nt.seriesLayoutBy!==B.a&&Object(ot.b)($);var D=[],T={},O=nt.dimensionsDefine;if(O)Object(H.each)(O,function(At,rt){var _t=At.name,xt={index:rt,name:_t,displayName:At.displayName};if(D.push(xt),_t!=null){var ft="";Object(H.hasOwn)(T,_t)&&Object(ot.b)(ft),T[_t]=xt}});else for(var C=0;C<nt.dimensionsDetectedCount;C++)D.push({index:C});var L=Object(ht.c)(k,B.a);W.__isBuiltIn&&(X.getRawDataItem=function(At){return L(et,st,D,At)},X.getRawData=Object(H.bind)(G,null,nt)),X.cloneRawData=Object(H.bind)(q,null,nt);var w=Object(ht.b)(k,B.a);X.count=Object(H.bind)(w,null,et,st,D);var z=Object(ht.d)(k);X.retrieveValue=function(At,rt){var _t=L(et,st,D,At);return pt(_t,rt)};var pt=X.retrieveValueFromItem=function(At,rt){if(At!=null){var _t=D[rt];if(_t)return z(At,rt,_t.name)}};return X.getDimensionInfo=Object(H.bind)(N,null,D,T),X.cloneAllDimensionInfo=Object(H.bind)(V,null,D),X}function G(nt){var W=nt.sourceFormat;if(!bt(W)){var X="";Object(ot.b)(X)}return nt.data}function q(nt){var W=nt.sourceFormat,X=nt.data;if(!bt(W)){var et="";Object(ot.b)(et)}if(W===B.c){for(var k=[],st=0,$=X.length;st<$;st++)k.push(X[st].slice());return k}else if(W===B.e){for(var k=[],st=0,$=X.length;st<$;st++)k.push(Object(H.extend)({},X[st]));return k}}function N(nt,W,X){if(X!=null){if(typeof X=="number"||!isNaN(X)&&!Object(H.hasOwn)(W,X))return nt[X];if(Object(H.hasOwn)(W,X))return W[X]}}function V(nt){return Object(H.clone)(nt)}var lt=Object(H.createHashMap)();function at(nt){nt=Object(H.clone)(nt);var W=nt.type,X="";W||Object(ot.b)(X);var et=W.split(":");et.length!==2&&Object(ot.b)(X);var k=!1;et[0]==="echarts"&&(W=et[1],k=!0),nt.__isBuiltIn=k,lt.set(W,nt)}function gt(nt,W,X){var et=Object(mt.r)(nt),k=et.length,st="";k||Object(ot.b)(st);for(var $=0,D=k;$<D;$++){var T=et[$];W=Tt(T,W,X,k===1?null:$),$!==D-1&&(W.length=Math.max(W.length,1))}return W}function Tt(nt,W,X,et){var k="";W.length||Object(ot.b)(k),Object(H.isObject)(nt)||Object(ot.b)(k);var st=nt.type,$=lt.get(st);$||Object(ot.b)(k);var D=Object(H.map)(W,function(C){return Y(C,$)}),T=Object(mt.r)($.transform({upstream:D[0],upstreamList:D,config:Object(H.clone)(nt.config)}));if(!1)var O;return Object(H.map)(T,function(C,L){var w="";Object(H.isObject)(C)||Object(ot.b)(w),C.data||Object(ot.b)(w);var z=Object(it.d)(C.data);bt(z)||Object(ot.b)(w);var pt,At=W[0];if(At&&L===0&&!C.dimensions){var rt=At.startIndex;rt&&(C.data=At.data.slice(0,rt).concat(C.data)),pt={seriesLayoutBy:B.a,sourceHeader:rt,dimensions:At.metaRawOption.dimensions}}else pt={seriesLayoutBy:B.a,sourceHeader:0,dimensions:C.dimensions};return Object(it.b)(C.data,pt,null,null)})}function bt(nt){return nt===B.c||nt===B.e}},BlVb:function(Ge,U,S){"use strict";S.d(U,"a",function(){return ht});var B=S("hyiK"),mt=1e-8;function H(y,ot){return Math.abs(y-ot)<mt}function ht(y,ot,it){var Q=0,Y=y[0];if(!Y)return!1;for(var G=1;G<y.length;G++){var q=y[G];Q+=Object(B.a)(Y[0],Y[1],q[0],q[1],ot,it),Y=q}var N=y[0];return(!H(Y[0],N[0])||!H(Y[1],N[1]))&&(Q+=Object(B.a)(Y[0],Y[1],N[0],N[1],ot,it)),Q!==0}},Bq2U:function(Ge,U,S){"use strict";S.d(U,"c",function(){return Q}),S.d(U,"a",function(){return W});var B={linear:function(O){return O},quadraticIn:function(O){return O*O},quadraticOut:function(O){return O*(2-O)},quadraticInOut:function(O){return(O*=2)<1?.5*O*O:-.5*(--O*(O-2)-1)},cubicIn:function(O){return O*O*O},cubicOut:function(O){return--O*O*O+1},cubicInOut:function(O){return(O*=2)<1?.5*O*O*O:.5*((O-=2)*O*O+2)},quarticIn:function(O){return O*O*O*O},quarticOut:function(O){return 1- --O*O*O*O},quarticInOut:function(O){return(O*=2)<1?.5*O*O*O*O:-.5*((O-=2)*O*O*O-2)},quinticIn:function(O){return O*O*O*O*O},quinticOut:function(O){return--O*O*O*O*O+1},quinticInOut:function(O){return(O*=2)<1?.5*O*O*O*O*O:.5*((O-=2)*O*O*O*O+2)},sinusoidalIn:function(O){return 1-Math.cos(O*Math.PI/2)},sinusoidalOut:function(O){return Math.sin(O*Math.PI/2)},sinusoidalInOut:function(O){return .5*(1-Math.cos(Math.PI*O))},exponentialIn:function(O){return O===0?0:Math.pow(1024,O-1)},exponentialOut:function(O){return O===1?1:1-Math.pow(2,-10*O)},exponentialInOut:function(O){return O===0?0:O===1?1:(O*=2)<1?.5*Math.pow(1024,O-1):.5*(-Math.pow(2,-10*(O-1))+2)},circularIn:function(O){return 1-Math.sqrt(1-O*O)},circularOut:function(O){return Math.sqrt(1- --O*O)},circularInOut:function(O){return(O*=2)<1?-.5*(Math.sqrt(1-O*O)-1):.5*(Math.sqrt(1-(O-=2)*O)+1)},elasticIn:function(O){var C,L=.1,w=.4;return O===0?0:O===1?1:(!L||L<1?(L=1,C=w/4):C=w*Math.asin(1/L)/(2*Math.PI),-(L*Math.pow(2,10*(O-=1))*Math.sin((O-C)*(2*Math.PI)/w)))},elasticOut:function(O){var C,L=.1,w=.4;return O===0?0:O===1?1:(!L||L<1?(L=1,C=w/4):C=w*Math.asin(1/L)/(2*Math.PI),L*Math.pow(2,-10*O)*Math.sin((O-C)*(2*Math.PI)/w)+1)},elasticInOut:function(O){var C,L=.1,w=.4;return O===0?0:O===1?1:(!L||L<1?(L=1,C=w/4):C=w*Math.asin(1/L)/(2*Math.PI),(O*=2)<1?-.5*(L*Math.pow(2,10*(O-=1))*Math.sin((O-C)*(2*Math.PI)/w)):L*Math.pow(2,-10*(O-=1))*Math.sin((O-C)*(2*Math.PI)/w)*.5+1)},backIn:function(O){var C=1.70158;return O*O*((C+1)*O-C)},backOut:function(O){var C=1.70158;return--O*O*((C+1)*O+C)+1},backInOut:function(O){var C=1.70158*1.525;return(O*=2)<1?.5*(O*O*((C+1)*O-C)):.5*((O-=2)*O*((C+1)*O+C)+2)},bounceIn:function(O){return 1-B.bounceOut(1-O)},bounceOut:function(O){return O<1/2.75?7.5625*O*O:O<2/2.75?7.5625*(O-=1.5/2.75)*O+.75:O<2.5/2.75?7.5625*(O-=2.25/2.75)*O+.9375:7.5625*(O-=2.625/2.75)*O+.984375},bounceInOut:function(O){return O<.5?B.bounceIn(O*2)*.5:B.bounceOut(O*2-1)*.5+.5}},mt=B,H=function(){function T(O){this._initialized=!1,this._startTime=0,this._pausedTime=0,this._paused=!1,this._life=O.life||1e3,this._delay=O.delay||0,this.loop=O.loop==null?!1:O.loop,this.gap=O.gap||0,this.easing=O.easing||"linear",this.onframe=O.onframe,this.ondestroy=O.ondestroy,this.onrestart=O.onrestart}return T.prototype.step=function(O,C){if(this._initialized||(this._startTime=O+this._delay,this._initialized=!0),this._paused){this._pausedTime+=C;return}var L=(O-this._startTime-this._pausedTime)/this._life;L<0&&(L=0),L=Math.min(L,1);var w=this.easing,z=typeof w=="string"?mt[w]:w,pt=typeof z=="function"?z(L):L;if(this.onframe&&this.onframe(pt),L===1)if(this.loop)this._restart(O),this.onrestart&&this.onrestart();else return!0;return!1},T.prototype._restart=function(O){var C=(O-this._startTime-this._pausedTime)%this._life;this._startTime=O-C+this.gap,this._pausedTime=0},T.prototype.pause=function(){this._paused=!0},T.prototype.resume=function(){this._paused=!1},T}(),ht=H,y=S("Qe9p"),ot=S("bYtY"),it=Array.prototype.slice;function Q(T,O,C){return(O-T)*C+T}function Y(T,O,C){return C>.5?O:T}function G(T,O,C,L){for(var w=O.length,z=0;z<w;z++)T[z]=Q(O[z],C[z],L)}function q(T,O,C,L){for(var w=O.length,z=w&&O[0].length,pt=0;pt<w;pt++){T[pt]||(T[pt]=[]);for(var At=0;At<z;At++)T[pt][At]=Q(O[pt][At],C[pt][At],L)}}function N(T,O,C,L){for(var w=O.length,z=0;z<w;z++)T[z]=O[z]+C[z]*L;return T}function V(T,O,C,L){for(var w=O.length,z=w&&O[0].length,pt=0;pt<w;pt++){T[pt]||(T[pt]=[]);for(var At=0;At<z;At++)T[pt][At]=O[pt][At]+C[pt][At]*L}return T}function lt(T,O,C){var L=T,w=O;if(!(!L.push||!w.push)){var z=L.length,pt=w.length;if(z!==pt){var At=z>pt;if(At)L.length=pt;else for(var rt=z;rt<pt;rt++)L.push(C===1?w[rt]:it.call(w[rt]))}for(var _t=L[0]&&L[0].length,rt=0;rt<L.length;rt++)if(C===1)isNaN(L[rt])&&(L[rt]=w[rt]);else for(var xt=0;xt<_t;xt++)isNaN(L[rt][xt])&&(L[rt][xt]=w[rt][xt])}}function at(T,O){var C=T.length;if(C!==O.length)return!1;for(var L=0;L<C;L++)if(T[L]!==O[L])return!1;return!0}function gt(T,O){var C=T.length;if(C!==O.length)return!1;for(var L=T[0].length,w=0;w<C;w++)for(var z=0;z<L;z++)if(T[w][z]!==O[w][z])return!1;return!0}function Tt(T,O,C,L,w,z,pt){var At=(C-T)*.5,rt=(L-O)*.5;return(2*(O-C)+At+rt)*pt+(-3*(O-C)-2*At-rt)*z+At*w+O}function bt(T,O,C,L,w,z,pt,At){for(var rt=O.length,_t=0;_t<rt;_t++)T[_t]=Tt(O[_t],C[_t],L[_t],w[_t],z,pt,At)}function nt(T,O,C,L,w,z,pt,At){for(var rt=O.length,_t=O[0].length,xt=0;xt<rt;xt++){T[xt]||(T[1]=[]);for(var ft=0;ft<_t;ft++)T[xt][ft]=Tt(O[xt][ft],C[xt][ft],L[xt][ft],w[xt][ft],z,pt,At)}}function W(T){if(Object(ot.isArrayLike)(T)){var O=T.length;if(Object(ot.isArrayLike)(T[0])){for(var C=[],L=0;L<O;L++)C.push(it.call(T[L]));return C}return it.call(T)}return T}function X(T){return T[0]=Math.floor(T[0]),T[1]=Math.floor(T[1]),T[2]=Math.floor(T[2]),"rgba("+T.join(",")+")"}function et(T){return Object(ot.isArrayLike)(T&&T[0])?2:1}var k=[0,0,0,0],st=function(){function T(O){this.keyframes=[],this.maxTime=0,this.arrDim=0,this.interpolable=!0,this._needsSort=!1,this._isAllValueEqual=!0,this._lastFrame=0,this._lastFramePercent=0,this.propName=O}return T.prototype.isFinished=function(){return this._finished},T.prototype.setFinished=function(){this._finished=!0,this._additiveTrack&&this._additiveTrack.setFinished()},T.prototype.needsAnimate=function(){return!this._isAllValueEqual&&this.keyframes.length>=2&&this.interpolable},T.prototype.getAdditiveTrack=function(){return this._additiveTrack},T.prototype.addKeyframe=function(O,C){O>=this.maxTime?this.maxTime=O:this._needsSort=!0;var L=this.keyframes,w=L.length;if(this.interpolable)if(Object(ot.isArrayLike)(C)){var z=et(C);if(w>0&&this.arrDim!==z){this.interpolable=!1;return}if(z===1&&typeof C[0]!="number"||z===2&&typeof C[0][0]!="number"){this.interpolable=!1;return}if(w>0){var pt=L[w-1];this._isAllValueEqual&&(z===1?at(C,pt.value)||(this._isAllValueEqual=!1):this._isAllValueEqual=!1)}this.arrDim=z}else{if(this.arrDim>0){this.interpolable=!1;return}if(typeof C=="string"){var At=y.parse(C);At?(C=At,this.isValueColor=!0):this.interpolable=!1}else if(typeof C!="number"||isNaN(C)){this.interpolable=!1;return}if(this._isAllValueEqual&&w>0){var pt=L[w-1];this.isValueColor&&!at(pt.value,C)?this._isAllValueEqual=!1:pt.value!==C&&(this._isAllValueEqual=!1)}}var rt={time:O,value:C,percent:0};return this.keyframes.push(rt),rt},T.prototype.prepare=function(O){var C=this.keyframes;this._needsSort&&C.sort(function(rt,_t){return rt.time-_t.time});for(var L=this.arrDim,w=C.length,z=C[w-1],pt=0;pt<w;pt++)C[pt].percent=C[pt].time/this.maxTime,L>0&&pt!==w-1&&lt(C[pt].value,z.value,L);if(O&&this.needsAnimate()&&O.needsAnimate()&&L===O.arrDim&&this.isValueColor===O.isValueColor&&!O._finished){this._additiveTrack=O;for(var At=C[0].value,pt=0;pt<w;pt++)L===0?this.isValueColor?C[pt].additiveValue=N([],C[pt].value,At,-1):C[pt].additiveValue=C[pt].value-At:L===1?C[pt].additiveValue=N([],C[pt].value,At,-1):L===2&&(C[pt].additiveValue=V([],C[pt].value,At,-1))}},T.prototype.step=function(O,C){if(!this._finished){this._additiveTrack&&this._additiveTrack._finished&&(this._additiveTrack=null);var L=this._additiveTrack!=null,w=L?"additiveValue":"value",z=this.keyframes,pt=this.keyframes.length,At=this.propName,rt=this.arrDim,_t=this.isValueColor,xt;if(C<0)xt=0;else if(C<this._lastFramePercent){var ft=Math.min(this._lastFrame+1,pt-1);for(xt=ft;xt>=0&&!(z[xt].percent<=C);xt--);xt=Math.min(xt,pt-2)}else{for(xt=this._lastFrame;xt<pt&&!(z[xt].percent>C);xt++);xt=Math.min(xt-1,pt-2)}var Mt=z[xt+1],K=z[xt];if(!!(K&&Mt)){this._lastFrame=xt,this._lastFramePercent=C;var R=Mt.percent-K.percent;if(R!==0){var tt=(C-K.percent)/R,Z=L?this._additiveValue:_t?k:O[At];if((rt>0||_t)&&!Z&&(Z=this._additiveValue=[]),this.useSpline){var ct=z[xt][w],vt=z[xt===0?xt:xt-1][w],Ct=z[xt>pt-2?pt-1:xt+1][w],Bt=z[xt>pt-3?pt-1:xt+2][w];if(rt>0)rt===1?bt(Z,vt,ct,Ct,Bt,tt,tt*tt,tt*tt*tt):nt(Z,vt,ct,Ct,Bt,tt,tt*tt,tt*tt*tt);else if(_t)bt(Z,vt,ct,Ct,Bt,tt,tt*tt,tt*tt*tt),L||(O[At]=X(Z));else{var It=void 0;this.interpolable?It=Tt(vt,ct,Ct,Bt,tt,tt*tt,tt*tt*tt):It=Ct,L?this._additiveValue=It:O[At]=It}}else if(rt>0)rt===1?G(Z,K[w],Mt[w],tt):q(Z,K[w],Mt[w],tt);else if(_t)G(Z,K[w],Mt[w],tt),L||(O[At]=X(Z));else{var It=void 0;this.interpolable?It=Q(K[w],Mt[w],tt):It=Y(K[w],Mt[w],tt),L?this._additiveValue=It:O[At]=It}L&&this._addToTarget(O)}}}},T.prototype._addToTarget=function(O){var C=this.arrDim,L=this.propName,w=this._additiveValue;C===0?this.isValueColor?(y.parse(O[L],k),N(k,k,w,1),O[L]=X(k)):O[L]=O[L]+w:C===1?N(O[L],O[L],w,1):C===2&&V(O[L],O[L],w,1)},T}(),$=function(){function T(O,C,L){if(this._tracks={},this._trackKeys=[],this._delay=0,this._maxTime=0,this._paused=!1,this._started=0,this._clip=null,this._target=O,this._loop=C,C&&L){Object(ot.logError)("Can' use additive animation on looped animation.");return}this._additiveAnimators=L}return T.prototype.getTarget=function(){return this._target},T.prototype.changeTarget=function(O){this._target=O},T.prototype.when=function(O,C){return this.whenWithKeys(O,C,Object(ot.keys)(C))},T.prototype.whenWithKeys=function(O,C,L){for(var w=this._tracks,z=0;z<L.length;z++){var pt=L[z],At=w[pt];if(!At){At=w[pt]=new st(pt);var rt=void 0,_t=this._getAdditiveTrack(pt);if(_t){var xt=_t.keyframes[_t.keyframes.length-1];rt=xt&&xt.value,_t.isValueColor&&rt&&(rt=X(rt))}else rt=this._target[pt];if(rt==null)continue;O!==0&&At.addKeyframe(0,W(rt)),this._trackKeys.push(pt)}At.addKeyframe(O,W(C[pt]))}return this._maxTime=Math.max(this._maxTime,O),this},T.prototype.pause=function(){this._clip.pause(),this._paused=!0},T.prototype.resume=function(){this._clip.resume(),this._paused=!1},T.prototype.isPaused=function(){return!!this._paused},T.prototype._doneCallback=function(){this._setTracksFinished(),this._clip=null;var O=this._doneList;if(O)for(var C=O.length,L=0;L<C;L++)O[L].call(this)},T.prototype._abortedCallback=function(){this._setTracksFinished();var O=this.animation,C=this._abortedList;if(O&&O.removeClip(this._clip),this._clip=null,C)for(var L=0;L<C.length;L++)C[L].call(this)},T.prototype._setTracksFinished=function(){for(var O=this._tracks,C=this._trackKeys,L=0;L<C.length;L++)O[C[L]].setFinished()},T.prototype._getAdditiveTrack=function(O){var C,L=this._additiveAnimators;if(L)for(var w=0;w<L.length;w++){var z=L[w].getTrack(O);z&&(C=z)}return C},T.prototype.start=function(O,C){if(!(this._started>0)){this._started=1;for(var L=this,w=[],z=0;z<this._trackKeys.length;z++){var pt=this._trackKeys[z],At=this._tracks[pt],rt=this._getAdditiveTrack(pt),_t=At.keyframes;if(At.prepare(rt),At.needsAnimate())w.push(At);else if(!At.interpolable){var xt=_t[_t.length-1];xt&&(L._target[At.propName]=xt.value)}}if(w.length||C){var ft=new ht({life:this._maxTime,loop:this._loop,delay:this._delay,onframe:function(K){L._started=2;var R=L._additiveAnimators;if(R){for(var tt=!1,Z=0;Z<R.length;Z++)if(R[Z]._clip){tt=!0;break}tt||(L._additiveAnimators=null)}for(var Z=0;Z<w.length;Z++)w[Z].step(L._target,K);var ct=L._onframeList;if(ct)for(var Z=0;Z<ct.length;Z++)ct[Z](L._target,K)},ondestroy:function(){L._doneCallback()}});this._clip=ft,this.animation&&this.animation.addClip(ft),O&&O!=="spline"&&(ft.easing=O)}else this._doneCallback();return this}},T.prototype.stop=function(O){if(!!this._clip){var C=this._clip;O&&C.onframe(1),this._abortedCallback()}},T.prototype.delay=function(O){return this._delay=O,this},T.prototype.during=function(O){return O&&(this._onframeList||(this._onframeList=[]),this._onframeList.push(O)),this},T.prototype.done=function(O){return O&&(this._doneList||(this._doneList=[]),this._doneList.push(O)),this},T.prototype.aborted=function(O){return O&&(this._abortedList||(this._abortedList=[]),this._abortedList.push(O)),this},T.prototype.getClip=function(){return this._clip},T.prototype.getTrack=function(O){return this._tracks[O]},T.prototype.stopTracks=function(O,C){if(!O.length||!this._clip)return!0;for(var L=this._tracks,w=this._trackKeys,z=0;z<O.length;z++){var pt=L[O[z]];pt&&(C?pt.step(this._target,1):this._started===1&&pt.step(this._target,0),pt.setFinished())}for(var At=!0,z=0;z<w.length;z++)if(!L[w[z]].isFinished()){At=!1;break}return At&&this._abortedCallback(),At},T.prototype.saveFinalToTarget=function(O,C){if(!!O){C=C||this._trackKeys;for(var L=0;L<C.length;L++){var w=C[L],z=this._tracks[w];if(!(!z||z.isFinished())){var pt=z.keyframes,At=pt[pt.length-1];if(At){var rt=W(At.value);z.isValueColor&&(rt=X(rt)),O[w]=rt}}}}},T.prototype.__changeFinalValue=function(O,C){C=C||Object(ot.keys)(O);for(var L=0;L<C.length;L++){var w=C[L],z=this._tracks[w];if(!!z){var pt=z.keyframes;if(pt.length>1){var At=pt.pop();z.addKeyframe(At.time,O[w]),z.prepare(z.getAdditiveTrack())}}}},T}(),D=U.b=$},CSTQ:function(Ge,U,S){"use strict";S.d(U,"a",function(){return B}),S.d(U,"b",function(){return mt}),S.d(U,"c",function(){return H});function B(ht,y,ot){switch(ot){case"color":var it=ht.getItemVisual(y,"style");return it[ht.getVisual("drawType")];case"opacity":return ht.getItemVisual(y,"style").opacity;case"symbol":case"symbolSize":case"liftZ":return ht.getItemVisual(y,ot);default:}}function mt(ht,y){switch(y){case"color":var ot=ht.getVisual("style");return ot[ht.getVisual("drawType")];case"opacity":return ht.getVisual("style").opacity;case"symbol":case"symbolSize":case"liftZ":return ht.getVisual(y);default:}}function H(ht,y,ot,it){switch(ot){case"color":var Q=ht.ensureUniqueItemVisual(y,"style");Q[ht.getVisual("drawType")]=it,ht.setItemVisual(y,"colorFromPalette",!1);break;case"opacity":ht.ensureUniqueItemVisual(y,"style").opacity=it;break;case"symbol":case"symbolSize":case"liftZ":ht.setItemVisual(y,ot,it);break;default:}}},D5nY:function(Ge,U,S){"use strict";S.d(U,"a",function(){return ht}),S.d(U,"g",function(){return ot}),S.d(U,"c",function(){return it}),S.d(U,"d",function(){return Q}),S.d(U,"f",function(){return Y}),S.d(U,"e",function(){return G}),S.d(U,"b",function(){return q});var B=S("4NO4"),mt=S("bYtY"),H=S("B/3G"),ht={Must:1,Might:2,Not:3},y=Object(B.o)();function ot(V){y(V).datasetMap=Object(mt.createHashMap)()}function it(V,lt,at){var gt={},Tt=Y(lt);if(!Tt||!V)return gt;var bt=[],nt=[],W=lt.ecModel,X=y(W).datasetMap,et=Tt.uid+"_"+at.seriesLayoutBy,k,st;V=V.slice(),Object(mt.each)(V,function(O,C){var L=Object(mt.isObject)(O)?O:V[C]={name:O};L.type==="ordinal"&&k==null&&(k=C,st=T(L)),gt[L.name]=[]});var $=X.get(et)||X.set(et,{categoryWayDim:st,valueWayDim:0});Object(mt.each)(V,function(O,C){var L=O.name,w=T(O);if(k==null){var z=$.valueWayDim;D(gt[L],z,w),D(nt,z,w),$.valueWayDim+=w}else if(k===C)D(gt[L],0,w),D(bt,0,w);else{var z=$.categoryWayDim;D(gt[L],z,w),D(nt,z,w),$.categoryWayDim+=w}});function D(O,C,L){for(var w=0;w<L;w++)O.push(C+w)}function T(O){var C=O.dimsDef;return C?C.length:1}return bt.length&&(gt.itemName=bt),nt.length&&(gt.seriesName=nt),gt}function Q(V,lt,at){var gt={},Tt=Y(V);if(!Tt)return gt;var bt=lt.sourceFormat,nt=lt.dimensionsDefine,W;(bt===H.e||bt===H.d)&&Object(mt.each)(nt,function(k,st){(Object(mt.isObject)(k)?k.name:k)==="name"&&(W=st)});var X=function(){for(var k={},st={},$=[],D=0,T=Math.min(5,at);D<T;D++){var O=N(lt.data,bt,lt.seriesLayoutBy,nt,lt.startIndex,D);$.push(O);var C=O===ht.Not;if(C&&k.v==null&&D!==W&&(k.v=D),(k.n==null||k.n===k.v||!C&&$[k.n]===ht.Not)&&(k.n=D),L(k)&&$[k.n]!==ht.Not)return k;C||(O===ht.Might&&st.v==null&&D!==W&&(st.v=D),(st.n==null||st.n===st.v)&&(st.n=D))}function L(w){return w.v!=null&&w.n!=null}return L(k)?k:L(st)?st:null}();if(X){gt.value=[X.v];var et=W!=null?W:X.n;gt.itemName=[et],gt.seriesName=[et]}return gt}function Y(V){var lt=V.get("data",!0);if(!lt)return Object(B.v)(V.ecModel,"dataset",{index:V.get("datasetIndex",!0),id:V.get("datasetId",!0)},B.b).models[0]}function G(V){return!V.get("transform",!0)&&!V.get("fromTransformResult",!0)?[]:Object(B.v)(V.ecModel,"dataset",{index:V.get("fromDatasetIndex",!0),id:V.get("fromDatasetId",!0)},B.b).models}function q(V,lt){return N(V.data,V.sourceFormat,V.seriesLayoutBy,V.dimensionsDefine,V.startIndex,lt)}function N(V,lt,at,gt,Tt,bt){var nt,W=5;if(Object(mt.isTypedArray)(V))return ht.Not;var X,et;if(gt){var k=gt[bt];Object(mt.isObject)(k)?(X=k.name,et=k.type):Object(mt.isString)(k)&&(X=k)}if(et!=null)return et==="ordinal"?ht.Must:ht.Not;if(lt===H.c){var st=V;if(at===H.b){for(var $=st[bt],D=0;D<($||[]).length&&D<W;D++)if((nt=pt($[Tt+D]))!=null)return nt}else for(var D=0;D<st.length&&D<W;D++){var T=st[Tt+D];if(T&&(nt=pt(T[bt]))!=null)return nt}}else if(lt===H.e){var O=V;if(!X)return ht.Not;for(var D=0;D<O.length&&D<W;D++){var C=O[D];if(C&&(nt=pt(C[X]))!=null)return nt}}else if(lt===H.d){var L=V;if(!X)return ht.Not;var $=L[X];if(!$||Object(mt.isTypedArray)($))return ht.Not;for(var D=0;D<$.length&&D<W;D++)if((nt=pt($[D]))!=null)return nt}else if(lt===H.f)for(var w=V,D=0;D<w.length&&D<W;D++){var C=w[D],z=Object(B.h)(C);if(!Object(mt.isArray)(z))return ht.Not;if((nt=pt(z[bt]))!=null)return nt}function pt(At){var rt=Object(mt.isString)(At);if(At!=null&&isFinite(At)&&At!=="")return rt?ht.Might:ht.Not;if(rt&&At!=="-")return ht.Must}return ht.Not}},Dagg:function(Ge,U,S){"use strict";var B=S("IaEH"),mt=S("Gev7"),H=S("mFDi"),ht=S("bYtY"),y=Object(ht.defaults)({x:0,y:0},mt.b),ot={style:Object(ht.defaults)({x:!0,y:!0,width:!0,height:!0,sx:!0,sy:!0,sWidth:!0,sHeight:!0},mt.a.style)};function it(Y){return!!(Y&&typeof Y!="string"&&Y.width&&Y.height)}var Q=function(Y){Object(B.a)(G,Y);function G(){return Y!==null&&Y.apply(this,arguments)||this}return G.prototype.createStyle=function(q){return Object(ht.createObject)(y,q)},G.prototype._getSize=function(q){var N=this.style,V=N[q];if(V!=null)return V;var lt=it(N.image)?N.image:this.__image;if(!lt)return 0;var at=q==="width"?"height":"width",gt=N[at];return gt==null?lt[q]:lt[q]/lt[at]*gt},G.prototype.getWidth=function(){return this._getSize("width")},G.prototype.getHeight=function(){return this._getSize("height")},G.prototype.getAnimationStyleProps=function(){return ot},G.prototype.getBoundingRect=function(){var q=this.style;return this._rect||(this._rect=new H.a(q.x||0,q.y||0,this.getWidth(),this.getHeight())),this._rect},G}(mt.c);Q.prototype.type="image",U.a=Q},F5Ls:function(Ge,U,S){"use strict";S.d(U,"a",function(){return mt});var B={\u5357\u6D77\u8BF8\u5C9B:[32,80],\u5E7F\u4E1C:[0,-10],\u9999\u6E2F:[10,5],\u6FB3\u95E8:[-10,10],\u5929\u6D25:[5,5]};function mt(H,ht){if(H==="china"){var y=B[ht.name];if(y){var ot=ht.getCenter();ot[0]+=y[0]/10.5,ot[1]+=-y[1]/(10.5/.75),ht.setCenter(ot)}}}},Fofx:function(Ge,U,S){"use strict";S.r(U),S.d(U,"create",function(){return B}),S.d(U,"identity",function(){return mt}),S.d(U,"copy",function(){return H}),S.d(U,"mul",function(){return ht}),S.d(U,"translate",function(){return y}),S.d(U,"rotate",function(){return ot}),S.d(U,"scale",function(){return it}),S.d(U,"invert",function(){return Q}),S.d(U,"clone",function(){return Y});function B(){return[1,0,0,1,0,0]}function mt(G){return G[0]=1,G[1]=0,G[2]=0,G[3]=1,G[4]=0,G[5]=0,G}function H(G,q){return G[0]=q[0],G[1]=q[1],G[2]=q[2],G[3]=q[3],G[4]=q[4],G[5]=q[5],G}function ht(G,q,N){var V=q[0]*N[0]+q[2]*N[1],lt=q[1]*N[0]+q[3]*N[1],at=q[0]*N[2]+q[2]*N[3],gt=q[1]*N[2]+q[3]*N[3],Tt=q[0]*N[4]+q[2]*N[5]+q[4],bt=q[1]*N[4]+q[3]*N[5]+q[5];return G[0]=V,G[1]=lt,G[2]=at,G[3]=gt,G[4]=Tt,G[5]=bt,G}function y(G,q,N){return G[0]=q[0],G[1]=q[1],G[2]=q[2],G[3]=q[3],G[4]=q[4]+N[0],G[5]=q[5]+N[1],G}function ot(G,q,N){var V=q[0],lt=q[2],at=q[4],gt=q[1],Tt=q[3],bt=q[5],nt=Math.sin(N),W=Math.cos(N);return G[0]=V*W+gt*nt,G[1]=-V*nt+gt*W,G[2]=lt*W+Tt*nt,G[3]=-lt*nt+W*Tt,G[4]=W*at+nt*bt,G[5]=W*bt-nt*at,G}function it(G,q,N){var V=N[0],lt=N[1];return G[0]=q[0]*V,G[1]=q[1]*lt,G[2]=q[2]*V,G[3]=q[3]*lt,G[4]=q[4]*V,G[5]=q[5]*lt,G}function Q(G,q){var N=q[0],V=q[2],lt=q[4],at=q[1],gt=q[3],Tt=q[5],bt=N*gt-at*V;return bt?(bt=1/bt,G[0]=gt*bt,G[1]=-at*bt,G[2]=-V*bt,G[3]=N*bt,G[4]=(V*Tt-gt*lt)*bt,G[5]=(at*lt-N*Tt)*bt,G):null}function Y(G){var q=B();return H(q,G),q}},FxDU:function(Ge,U,S){"use strict";Object.defineProperty(U,"__esModule",{value:!0}),U.createSensor=void 0;var B=S("QO+J"),mt=S("j5sG"),H=typeof ResizeObserver!="undefined"?mt.createSensor:B.createSensor;U.createSensor=H},"G+eS":function(Ge,U,S){"use strict";S.d(U,"A",function(){return ri}),S.d(U,"d",function(){return ni}),S.d(U,"a",function(){return Ia}),S.d(U,"l",function(){return Vn}),S.d(U,"b",function(){return An}),S.d(U,"e",function(){return uu}),S.d(U,"f",function(){return ps}),S.d(U,"g",function(){return hn}),S.d(U,"i",function(){return ao}),S.d(U,"j",function(){return Fo}),S.d(U,"w",function(){return Vo}),S.d(U,"u",function(){return fu}),S.d(U,"v",function(){return gs}),S.d(U,"s",function(){return ms}),S.d(U,"t",function(){return cu}),S.d(U,"m",function(){return za}),S.d(U,"n",function(){return Qc}),S.d(U,"h",function(){return Jc}),S.d(U,"q",function(){return al.e}),S.d(U,"o",function(){return Go}),S.d(U,"y",function(){return Fa}),S.d(U,"p",function(){return gf}),S.d(U,"z",function(){return vn}),S.d(U,"r",function(){return Ir}),S.d(U,"k",function(){return hu}),S.d(U,"x",function(){return mf}),S.d(U,"c",function(){return yf});var B=S("f66r"),mt=S("aX58"),H=S("bYtY"),ht=S("Qe9p"),y=S("ItGF"),ot=S("BPZU"),it=S("b9Ot"),Q=S("4NO4"),Y=S("Qxkt"),G=S("bLfw"),q="";typeof navigator!="undefined"&&(q=navigator.platform||"");var N="rgba(0, 0, 0, 0.2)",V={darkMode:"auto",color:["#5470c6","#91cc75","#fac858","#ee6666","#73c0de","#3ba272","#fc8452","#9a60b4","#ea7ccc"],gradientColor:["#f6efa6","#d88273","#bf444c"],aria:{decal:{decals:[{color:N,dashArrayX:[1,0],dashArrayY:[2,5],symbolSize:1,rotation:Math.PI/6},{color:N,symbol:"circle",dashArrayX:[[8,8],[0,8,8,0]],dashArrayY:[6,0],symbolSize:.8},{color:N,dashArrayX:[1,0],dashArrayY:[4,3],rotation:-Math.PI/4},{color:N,dashArrayX:[[6,6],[0,6,6,0]],dashArrayY:[6,0]},{color:N,dashArrayX:[[1,0],[1,6]],dashArrayY:[1,0,6,0],rotation:Math.PI/4},{color:N,symbol:"triangle",dashArrayX:[[9,9],[0,9,9,0]],dashArrayY:[7,2],symbolSize:.75}]}},textStyle:{fontFamily:q.match(/^Win/)?"Microsoft YaHei":"sans-serif",fontSize:12,fontStyle:"normal",fontWeight:"normal"},blendMode:null,stateAnimation:{duration:300,easing:"cubicOut"},animation:"auto",animationDuration:1e3,animationDurationUpdate:500,animationEasing:"cubicInOut",animationEasingUpdate:"cubicInOut",animationThreshold:2e3,progressiveThreshold:3e3,progressive:400,hoverLayerThreshold:3e3,useUTC:!1},lt=S("D5nY"),at=S("Lx9C"),gt=S("QEG1"),Tt,bt,nt,W="\0_ec_inner",X=1,et={grid:"GridComponent",polar:"PolarComponent",geo:"GeoComponent",singleAxis:"SingleAxisComponent",parallel:"ParallelComponent",calendar:"CalendarComponent",graphic:"GraphicComponent",toolbox:"ToolboxComponent",tooltip:"TooltipComponent",axisPointer:"AxisPointerComponent",brush:"BrushComponent",title:"TitleComponent",timeline:"TimelineComponent",markPoint:"MarkPointComponent",markLine:"MarkLineComponent",markArea:"MarkAreaComponent",legend:"LegendComponent",dataZoom:"DataZoomComponent",visualMap:"VisualMapComponent",xAxis:"GridComponent",yAxis:"GridComponent",angleAxis:"PolarComponent",radiusAxis:"PolarComponent"},k={line:"LineChart",bar:"BarChart",pie:"PieChart",scatter:"ScatterChart",radar:"RadarChart",map:"MapChart",tree:"TreeChart",treemap:"TreemapChart",graph:"GraphChart",gauge:"GaugeChart",funnel:"FunnelChart",parallel:"ParallelChart",sankey:"SankeyChart",boxplot:"BoxplotChart",candlestick:"CandlestickChart",effectScatter:"EffectScatterChart",lines:"LinesChart",heatmap:"HeatmapChart",pictorialBar:"PictorialBarChart",themeRiver:"ThemeRiverChart",sunburst:"SunburstChart",custom:"CustomChart"},st={},$=function(Nt){Object(B.b)(Ft,Nt);function Ft(){return Nt!==null&&Nt.apply(this,arguments)||this}return Ft.prototype.init=function(Lt,Vt,Gt,re,oe,je){re=re||{},this.option=null,this._theme=new Y.a(re),this._locale=new Y.a(oe),this._optionManager=je},Ft.prototype.setOption=function(Lt,Vt,Gt){var re=L(Vt);this._optionManager.setOption(Lt,Gt,re),this._resetOption(null,re)},Ft.prototype.resetOption=function(Lt,Vt){return this._resetOption(Lt,L(Vt))},Ft.prototype._resetOption=function(Lt,Vt){var Gt=!1,re=this._optionManager;if(!Lt||Lt==="recreate"){var oe=re.mountOption(Lt==="recreate");!this.option||Lt==="recreate"?nt(this,oe):(this.restoreData(),this._mergeOption(oe,Vt)),Gt=!0}if((Lt==="timeline"||Lt==="media")&&this.restoreData(),!Lt||Lt==="recreate"||Lt==="timeline"){var je=re.getTimelineOption(this);je&&(Gt=!0,this._mergeOption(je,Vt))}if(!Lt||Lt==="recreate"||Lt==="media"){var Be=re.getMediaOption(this);Be.length&&Object(H.each)(Be,function(ne){Gt=!0,this._mergeOption(ne,Vt)},this)}return Gt},Ft.prototype.mergeOption=function(Lt){this._mergeOption(Lt,null)},Ft.prototype._mergeOption=function(Lt,Vt){var Gt=this.option,re=this._componentsMap,oe=this._componentsCount,je=[],Be=Object(H.createHashMap)(),ne=Vt&&Vt.replaceMergeMainTypeMap;Object(lt.g)(this),Object(H.each)(Lt,function(ge,Se){if(ge!=null)if(G.a.hasClass(Se))Se&&(je.push(Se),Be.set(Se,!0));else{if(!1)var Ce;Gt[Se]=Gt[Se]==null?Object(H.clone)(ge):Object(H.merge)(Gt[Se],ge,!0)}}),ne&&ne.each(function(ge,Se){G.a.hasClass(Se)&&!Be.get(Se)&&(je.push(Se),Be.set(Se,!0))}),G.a.topologicalTravel(je,G.a.getAllClassMainTypes(),pe,this);function pe(ge){var Se=Object(at.a)(this,ge,Q.r(Lt[ge])),Ce=re.get(ge),Ye=Ce?ne&&ne.get(ge)?"replaceMerge":"normalMerge":"replaceAll",Qe=Q.q(Ce,Se,Ye);Q.x(Qe,ge,G.a),Gt[ge]=null,re.set(ge,null),oe.set(ge,0);var tr=[],ar=[],Cr=0;Object(H.each)(Qe,function(Rr,Dr){var Qr=Rr.existing,Mn=Rr.newOption;if(!Mn)Qr&&(Qr.mergeOption({},this),Qr.optionUpdated({},!1));else{var dn=ge==="series",Oi=G.a.getClass(ge,Rr.keyInfo.subType,!dn);if(!Oi){if(!1)var Uo,ul;return}if(Qr&&Qr.constructor===Oi)Qr.name=Rr.keyInfo.name,Qr.mergeOption(Mn,this),Qr.optionUpdated(Mn,!1);else{var Vi=Object(H.extend)({componentIndex:Dr},Rr.keyInfo);Qr=new Oi(Mn,this,this,Vi),Object(H.extend)(Qr,Vi),Rr.brandNew&&(Qr.__requireNewView=!0),Qr.init(Mn,this,this),Qr.optionUpdated(null,!0)}}Qr?(tr.push(Qr.option),ar.push(Qr),Cr++):(tr.push(void 0),ar.push(void 0))},this),Gt[ge]=tr,re.set(ge,ar),oe.set(ge,Cr),ge==="series"&&Tt(this)}this._seriesIndices||Tt(this)},Ft.prototype.getOption=function(){var Lt=Object(H.clone)(this.option);return Object(H.each)(Lt,function(Vt,Gt){if(G.a.hasClass(Gt)){for(var re=Q.r(Vt),oe=re.length,je=!1,Be=oe-1;Be>=0;Be--)re[Be]&&!Q.l(re[Be])?je=!0:(re[Be]=null,!je&&oe--);re.length=oe,Lt[Gt]=re}}),delete Lt[W],Lt},Ft.prototype.getTheme=function(){return this._theme},Ft.prototype.getLocaleModel=function(){return this._locale},Ft.prototype.getLocale=function(Lt){var Vt=this.getLocaleModel();return Vt.get(Lt)},Ft.prototype.setUpdatePayload=function(Lt){this._payload=Lt},Ft.prototype.getUpdatePayload=function(){return this._payload},Ft.prototype.getComponent=function(Lt,Vt){var Gt=this._componentsMap.get(Lt);if(Gt){var re=Gt[Vt||0];if(re)return re;if(Vt==null){for(var oe=0;oe<Gt.length;oe++)if(Gt[oe])return Gt[oe]}}},Ft.prototype.queryComponents=function(Lt){var Vt=Lt.mainType;if(!Vt)return[];var Gt=Lt.index,re=Lt.id,oe=Lt.name,je=this._componentsMap.get(Vt);if(!je||!je.length)return[];var Be;return Gt!=null?(Be=[],Object(H.each)(Q.r(Gt),function(ne){je[ne]&&Be.push(je[ne])})):re!=null?Be=O("id",re,je):oe!=null?Be=O("name",oe,je):Be=Object(H.filter)(je,function(ne){return!!ne}),C(Be,Lt)},Ft.prototype.findComponents=function(Lt){var Vt=Lt.query,Gt=Lt.mainType,re=je(Vt),oe=re?this.queryComponents(re):Object(H.filter)(this._componentsMap.get(Gt),function(ne){return!!ne});return Be(C(oe,Lt));function je(ne){var pe=Gt+"Index",ge=Gt+"Id",Se=Gt+"Name";return ne&&(ne[pe]!=null||ne[ge]!=null||ne[Se]!=null)?{mainType:Gt,index:ne[pe],id:ne[ge],name:ne[Se]}:null}function Be(ne){return Lt.filter?Object(H.filter)(ne,Lt.filter):ne}},Ft.prototype.eachComponent=function(Lt,Vt,Gt){var re=this._componentsMap;if(Object(H.isFunction)(Lt)){var oe=Vt,je=Lt;re.each(function(ge,Se){for(var Ce=0;ge&&Ce<ge.length;Ce++){var Ye=ge[Ce];Ye&&je.call(oe,Se,Ye,Ye.componentIndex)}})}else for(var Be=Object(H.isString)(Lt)?re.get(Lt):Object(H.isObject)(Lt)?this.findComponents(Lt):null,ne=0;Be&&ne<Be.length;ne++){var pe=Be[ne];pe&&Vt.call(Gt,pe,pe.componentIndex)}},Ft.prototype.getSeriesByName=function(Lt){var Vt=Q.e(Lt,null);return Object(H.filter)(this._componentsMap.get("series"),function(Gt){return!!Gt&&Vt!=null&&Gt.name===Vt})},Ft.prototype.getSeriesByIndex=function(Lt){return this._componentsMap.get("series")[Lt]},Ft.prototype.getSeriesByType=function(Lt){return Object(H.filter)(this._componentsMap.get("series"),function(Vt){return!!Vt&&Vt.subType===Lt})},Ft.prototype.getSeries=function(){return Object(H.filter)(this._componentsMap.get("series").slice(),function(Lt){return!!Lt})},Ft.prototype.getSeriesCount=function(){return this._componentsCount.get("series")},Ft.prototype.eachSeries=function(Lt,Vt){bt(this),Object(H.each)(this._seriesIndices,function(Gt){var re=this._componentsMap.get("series")[Gt];Lt.call(Vt,re,Gt)},this)},Ft.prototype.eachRawSeries=function(Lt,Vt){Object(H.each)(this._componentsMap.get("series"),function(Gt){Gt&&Lt.call(Vt,Gt,Gt.componentIndex)})},Ft.prototype.eachSeriesByType=function(Lt,Vt,Gt){bt(this),Object(H.each)(this._seriesIndices,function(re){var oe=this._componentsMap.get("series")[re];oe.subType===Lt&&Vt.call(Gt,oe,re)},this)},Ft.prototype.eachRawSeriesByType=function(Lt,Vt,Gt){return Object(H.each)(this.getSeriesByType(Lt),Vt,Gt)},Ft.prototype.isSeriesFiltered=function(Lt){return bt(this),this._seriesIndicesMap.get(Lt.componentIndex)==null},Ft.prototype.getCurrentSeriesIndices=function(){return(this._seriesIndices||[]).slice()},Ft.prototype.filterSeries=function(Lt,Vt){bt(this);var Gt=[];Object(H.each)(this._seriesIndices,function(re){var oe=this._componentsMap.get("series")[re];Lt.call(Vt,oe,re)&&Gt.push(re)},this),this._seriesIndices=Gt,this._seriesIndicesMap=Object(H.createHashMap)(Gt)},Ft.prototype.restoreData=function(Lt){Tt(this);var Vt=this._componentsMap,Gt=[];Vt.each(function(re,oe){G.a.hasClass(oe)&&Gt.push(oe)}),G.a.topologicalTravel(Gt,G.a.getAllClassMainTypes(),function(re){Object(H.each)(Vt.get(re),function(oe){oe&&(re!=="series"||!D(oe,Lt))&&oe.restoreData()})})},Ft.internalField=function(){Tt=function(Lt){var Vt=Lt._seriesIndices=[];Object(H.each)(Lt._componentsMap.get("series"),function(Gt){Gt&&Vt.push(Gt.componentIndex)}),Lt._seriesIndicesMap=Object(H.createHashMap)(Vt)},bt=function(Lt){},nt=function(Lt,Vt){Lt.option={},Lt.option[W]=X,Lt._componentsMap=Object(H.createHashMap)({series:[]}),Lt._componentsCount=Object(H.createHashMap)();var Gt=Vt.aria;Object(H.isObject)(Gt)&&Gt.enabled==null&&(Gt.enabled=!0),T(Vt,Lt._theme.option),Object(H.merge)(Vt,V,!1),Lt._mergeOption(Vt,null)}}(),Ft}(Y.a);function D(Nt,Ft){if(Ft){var Lt=Ft.seriesIndex,Vt=Ft.seriesId,Gt=Ft.seriesName;return Lt!=null&&Nt.componentIndex!==Lt||Vt!=null&&Nt.id!==Vt||Gt!=null&&Nt.name!==Gt}}function T(Nt,Ft){var Lt=Nt.color&&!Nt.colorLayer;Object(H.each)(Ft,function(Vt,Gt){Gt==="colorLayer"&&Lt||G.a.hasClass(Gt)||(typeof Vt=="object"?Nt[Gt]=Nt[Gt]?Object(H.merge)(Nt[Gt],Vt,!1):Object(H.clone)(Vt):Nt[Gt]==null&&(Nt[Gt]=Vt))})}function O(Nt,Ft,Lt){if(Object(H.isArray)(Ft)){var Vt=Object(H.createHashMap)();return Object(H.each)(Ft,function(re){if(re!=null){var oe=Q.e(re,null);oe!=null&&Vt.set(re,!0)}}),Object(H.filter)(Lt,function(re){return re&&Vt.get(re[Nt])})}else{var Gt=Q.e(Ft,null);return Object(H.filter)(Lt,function(re){return re&&Gt!=null&&re[Nt]===Gt})}}function C(Nt,Ft){return Ft.hasOwnProperty("subType")?Object(H.filter)(Nt,function(Lt){return Lt&&Lt.subType===Ft.subType}):Nt}function L(Nt){var Ft=Object(H.createHashMap)();return Nt&&Object(H.each)(Q.r(Nt.replaceMerge),function(Lt){Ft.set(Lt,!0)}),{replaceMergeMainTypeMap:Ft}}Object(H.mixin)($,gt.a);var w=$,z=["getDom","getZr","getWidth","getHeight","getDevicePixelRatio","dispatchAction","isDisposed","on","off","getDataURL","getConnectedDataURL","getOption","getId","updateLabelLayout"],pt=function(){function Nt(Ft){H.each(z,function(Lt){this[Lt]=H.bind(Ft[Lt],Ft)},this)}return Nt}(),At=pt,rt=S("HznI"),_t=/^(min|max)?(.+)$/,xt=function(){function Nt(Ft){this._timelineOptions=[],this._mediaList=[],this._currentMediaIndices=[],this._api=Ft}return Nt.prototype.setOption=function(Ft,Lt,Vt){Ft&&(Object(H.each)(Object(Q.r)(Ft.series),function(oe){oe&&oe.data&&Object(H.isTypedArray)(oe.data)&&Object(H.setAsPrimitive)(oe.data)}),Object(H.each)(Object(Q.r)(Ft.dataset),function(oe){oe&&oe.source&&Object(H.isTypedArray)(oe.source)&&Object(H.setAsPrimitive)(oe.source)})),Ft=Object(H.clone)(Ft);var Gt=this._optionBackup,re=ft(Ft,Lt,!Gt);this._newBaseOption=re.baseOption,Gt?(re.timelineOptions.length&&(Gt.timelineOptions=re.timelineOptions),re.mediaList.length&&(Gt.mediaList=re.mediaList),re.mediaDefault&&(Gt.mediaDefault=re.mediaDefault)):this._optionBackup=re},Nt.prototype.mountOption=function(Ft){var Lt=this._optionBackup;return this._timelineOptions=Lt.timelineOptions,this._mediaList=Lt.mediaList,this._mediaDefault=Lt.mediaDefault,this._currentMediaIndices=[],Object(H.clone)(Ft?Lt.baseOption:this._newBaseOption)},Nt.prototype.getTimelineOption=function(Ft){var Lt,Vt=this._timelineOptions;if(Vt.length){var Gt=Ft.getComponent("timeline");Gt&&(Lt=Object(H.clone)(Vt[Gt.getCurrentIndex()]))}return Lt},Nt.prototype.getMediaOption=function(Ft){var Lt=this._api.getWidth(),Vt=this._api.getHeight(),Gt=this._mediaList,re=this._mediaDefault,oe=[],je=[];if(!Gt.length&&!re)return je;for(var Be=0,ne=Gt.length;Be<ne;Be++)Mt(Gt[Be].query,Lt,Vt)&&oe.push(Be);return!oe.length&&re&&(oe=[-1]),oe.length&&!R(oe,this._currentMediaIndices)&&(je=Object(H.map)(oe,function(pe){return Object(H.clone)(pe===-1?re.option:Gt[pe].option)})),this._currentMediaIndices=oe,je},Nt}();function ft(Nt,Ft,Lt){var Vt=[],Gt,re,oe=Nt.baseOption,je=Nt.timeline,Be=Nt.options,ne=Nt.media,pe=!!Nt.media,ge=!!(Be||je||oe&&oe.timeline);oe?(re=oe,re.timeline||(re.timeline=je)):((ge||pe)&&(Nt.options=Nt.media=null),re=Nt),pe&&Object(H.isArray)(ne)&&Object(H.each)(ne,function(Ce){Ce&&Ce.option&&(Ce.query?Vt.push(Ce):Gt||(Gt=Ce))}),Se(re),Object(H.each)(Be,function(Ce){return Se(Ce)}),Object(H.each)(Vt,function(Ce){return Se(Ce.option)});function Se(Ce){Object(H.each)(Ft,function(Ye){Ye(Ce,Lt)})}return{baseOption:re,timelineOptions:Be||[],mediaDefault:Gt,mediaList:Vt}}function Mt(Nt,Ft,Lt){var Vt={width:Ft,height:Lt,aspectratio:Ft/Lt},Gt=!0;return Object(H.each)(Nt,function(re,oe){var je=oe.match(_t);if(!(!je||!je[1]||!je[2])){var Be=je[1],ne=je[2].toLowerCase();K(Vt[ne],re,Be)||(Gt=!1)}}),Gt}function K(Nt,Ft,Lt){return Lt==="min"?Nt>=Ft:Lt==="max"?Nt<=Ft:Nt===Ft}function R(Nt,Ft){return Nt.join(",")===Ft.join(",")}var tt=xt,Z=H.each,ct=H.isObject,vt=["areaStyle","lineStyle","nodeStyle","linkStyle","chordStyle","label","labelLine"];function Ct(Nt){var Ft=Nt&&Nt.itemStyle;if(!!Ft)for(var Lt=0,Vt=vt.length;Lt<Vt;Lt++){var Gt=vt[Lt],re=Ft.normal,oe=Ft.emphasis;re&&re[Gt]&&(Nt[Gt]=Nt[Gt]||{},Nt[Gt].normal?H.merge(Nt[Gt].normal,re[Gt]):Nt[Gt].normal=re[Gt],re[Gt]=null),oe&&oe[Gt]&&(Nt[Gt]=Nt[Gt]||{},Nt[Gt].emphasis?H.merge(Nt[Gt].emphasis,oe[Gt]):Nt[Gt].emphasis=oe[Gt],oe[Gt]=null)}}function Bt(Nt,Ft,Lt){if(Nt&&Nt[Ft]&&(Nt[Ft].normal||Nt[Ft].emphasis)){var Vt=Nt[Ft].normal,Gt=Nt[Ft].emphasis;Vt&&(Lt?(Nt[Ft].normal=Nt[Ft].emphasis=null,H.defaults(Nt[Ft],Vt)):Nt[Ft]=Vt),Gt&&(Nt.emphasis=Nt.emphasis||{},Nt.emphasis[Ft]=Gt,Gt.focus&&(Nt.emphasis.focus=Gt.focus),Gt.blurScope&&(Nt.emphasis.blurScope=Gt.blurScope))}}function It(Nt){Bt(Nt,"itemStyle"),Bt(Nt,"lineStyle"),Bt(Nt,"areaStyle"),Bt(Nt,"label"),Bt(Nt,"labelLine"),Bt(Nt,"upperLabel"),Bt(Nt,"edgeLabel")}function Wt(Nt,Ft){var Lt=ct(Nt)&&Nt[Ft],Vt=ct(Lt)&&Lt.textStyle;if(Vt)for(var Gt=0,re=Q.c.length;Gt<re;Gt++){var oe=Q.c[Gt];Vt.hasOwnProperty(oe)&&(Lt[oe]=Vt[oe])}}function ee(Nt){Nt&&(It(Nt),Wt(Nt,"label"),Nt.emphasis&&Wt(Nt.emphasis,"label"))}function ae(Nt){if(!!ct(Nt)){Ct(Nt),It(Nt),Wt(Nt,"label"),Wt(Nt,"upperLabel"),Wt(Nt,"edgeLabel"),Nt.emphasis&&(Wt(Nt.emphasis,"label"),Wt(Nt.emphasis,"upperLabel"),Wt(Nt.emphasis,"edgeLabel"));var Ft=Nt.markPoint;Ft&&(Ct(Ft),ee(Ft));var Lt=Nt.markLine;Lt&&(Ct(Lt),ee(Lt));var Vt=Nt.markArea;Vt&&ee(Vt);var Gt=Nt.data;if(Nt.type==="graph"){Gt=Gt||Nt.nodes;var re=Nt.links||Nt.edges;if(re&&!H.isTypedArray(re))for(var oe=0;oe<re.length;oe++)ee(re[oe]);H.each(Nt.categories,function(ne){It(ne)})}if(Gt&&!H.isTypedArray(Gt))for(var oe=0;oe<Gt.length;oe++)ee(Gt[oe]);if(Ft=Nt.markPoint,Ft&&Ft.data)for(var je=Ft.data,oe=0;oe<je.length;oe++)ee(je[oe]);if(Lt=Nt.markLine,Lt&&Lt.data)for(var Be=Lt.data,oe=0;oe<Be.length;oe++)H.isArray(Be[oe])?(ee(Be[oe][0]),ee(Be[oe][1])):ee(Be[oe]);Nt.type==="gauge"?(Wt(Nt,"axisLabel"),Wt(Nt,"title"),Wt(Nt,"detail")):Nt.type==="treemap"?(Bt(Nt.breadcrumb,"itemStyle"),H.each(Nt.levels,function(ne){It(ne)})):Nt.type==="tree"&&It(Nt.leaves)}}function ye(Nt){return H.isArray(Nt)?Nt:Nt?[Nt]:[]}function Le(Nt){return(H.isArray(Nt)?Nt[0]:Nt)||{}}function _e(Nt,Ft){Z(ye(Nt.series),function(Vt){ct(Vt)&&ae(Vt)});var Lt=["xAxis","yAxis","radiusAxis","angleAxis","singleAxis","parallelAxis","radar"];Ft&&Lt.push("valueAxis","categoryAxis","logAxis","timeAxis"),Z(Lt,function(Vt){Z(ye(Nt[Vt]),function(Gt){Gt&&(Wt(Gt,"axisLabel"),Wt(Gt.axisPointer,"label"))})}),Z(ye(Nt.parallel),function(Vt){var Gt=Vt&&Vt.parallelAxisDefault;Wt(Gt,"axisLabel"),Wt(Gt&&Gt.axisPointer,"label")}),Z(ye(Nt.calendar),function(Vt){Bt(Vt,"itemStyle"),Wt(Vt,"dayLabel"),Wt(Vt,"monthLabel"),Wt(Vt,"yearLabel")}),Z(ye(Nt.radar),function(Vt){Wt(Vt,"name"),Vt.name&&Vt.axisName==null&&(Vt.axisName=Vt.name,delete Vt.name),Vt.nameGap!=null&&Vt.axisNameGap==null&&(Vt.axisNameGap=Vt.nameGap,delete Vt.nameGap)}),Z(ye(Nt.geo),function(Vt){ct(Vt)&&(ee(Vt),Z(ye(Vt.regions),function(Gt){ee(Gt)}))}),Z(ye(Nt.timeline),function(Vt){ee(Vt),Bt(Vt,"label"),Bt(Vt,"itemStyle"),Bt(Vt,"controlStyle",!0);var Gt=Vt.data;H.isArray(Gt)&&H.each(Gt,function(re){H.isObject(re)&&(Bt(re,"label"),Bt(re,"itemStyle"))})}),Z(ye(Nt.toolbox),function(Vt){Bt(Vt,"iconStyle"),Z(Vt.feature,function(Gt){Bt(Gt,"iconStyle")})}),Wt(Le(Nt.axisPointer),"label"),Wt(Le(Nt.tooltip).axisPointer,"label")}function De(Nt,Ft){for(var Lt=Ft.split(","),Vt=Nt,Gt=0;Gt<Lt.length&&(Vt=Vt&&Vt[Lt[Gt]],Vt!=null);Gt++);return Vt}function er(Nt,Ft,Lt,Vt){for(var Gt=Ft.split(","),re=Nt,oe,je=0;je<Gt.length-1;je++)oe=Gt[je],re[oe]==null&&(re[oe]={}),re=re[oe];(Vt||re[Gt[je]]==null)&&(re[Gt[je]]=Lt)}function Ie(Nt){Nt&&Object(H.each)(Fe,function(Ft){Ft[0]in Nt&&!(Ft[1]in Nt)&&(Nt[Ft[1]]=Nt[Ft[0]])})}var Fe=[["x","left"],["y","top"],["x2","right"],["y2","bottom"]],He=["grid","geo","parallel","legend","toolbox","title","visualMap","dataZoom","timeline"],ur=[["borderRadius","barBorderRadius"],["borderColor","barBorderColor"],["borderWidth","barBorderWidth"]];function br(Nt){var Ft=Nt&&Nt.itemStyle;if(Ft)for(var Lt=0;Lt<ur.length;Lt++){var Vt=ur[Lt][1],Gt=ur[Lt][0];Ft[Vt]!=null&&(Ft[Gt]=Ft[Vt])}}function kr(Nt){!Nt||Nt.alignTo==="edge"&&Nt.margin!=null&&Nt.edgeDistance==null&&(Nt.edgeDistance=Nt.margin)}function Xe(Nt){!Nt||Nt.downplay&&!Nt.blur&&(Nt.blur=Nt.downplay)}function Ut(Nt){!Nt||Nt.focusNodeAdjacency!=null&&(Nt.emphasis=Nt.emphasis||{},Nt.emphasis.focus==null&&(Nt.emphasis.focus="adjacency"))}function Qt(Nt,Ft){if(Nt)for(var Lt=0;Lt<Nt.length;Lt++)Ft(Nt[Lt]),Nt[Lt]&&Qt(Nt[Lt].children,Ft)}function Yt(Nt,Ft){_e(Nt,Ft),Nt.series=Object(Q.r)(Nt.series),Object(H.each)(Nt.series,function(Lt){if(!!Object(H.isObject)(Lt)){var Vt=Lt.type;if(Vt==="line")Lt.clipOverflow!=null&&(Lt.clip=Lt.clipOverflow);else if(Vt==="pie"||Vt==="gauge"){Lt.clockWise!=null&&(Lt.clockwise=Lt.clockWise),kr(Lt.label);var Gt=Lt.data;if(Gt&&!Object(H.isTypedArray)(Gt))for(var re=0;re<Gt.length;re++)kr(Gt[re]);Lt.hoverOffset!=null&&(Lt.emphasis=Lt.emphasis||{},(Lt.emphasis.scaleSize=null)&&(Lt.emphasis.scaleSize=Lt.hoverOffset))}else if(Vt==="gauge"){var oe=De(Lt,"pointer.color");oe!=null&&er(Lt,"itemStyle.color",oe)}else if(Vt==="bar"){br(Lt),br(Lt.backgroundStyle),br(Lt.emphasis);var Gt=Lt.data;if(Gt&&!Object(H.isTypedArray)(Gt))for(var re=0;re<Gt.length;re++)typeof Gt[re]=="object"&&(br(Gt[re]),br(Gt[re]&&Gt[re].emphasis))}else if(Vt==="sunburst"){var je=Lt.highlightPolicy;je&&(Lt.emphasis=Lt.emphasis||{},Lt.emphasis.focus||(Lt.emphasis.focus=je)),Xe(Lt),Qt(Lt.data,Xe)}else Vt==="graph"||Vt==="sankey"?Ut(Lt):Vt==="map"&&(Lt.mapType&&!Lt.map&&(Lt.map=Lt.mapType),Lt.mapLocation&&Object(H.defaults)(Lt,Lt.mapLocation));Lt.hoverAnimation!=null&&(Lt.emphasis=Lt.emphasis||{},Lt.emphasis&&Lt.emphasis.scale==null&&(Lt.emphasis.scale=Lt.hoverAnimation)),Ie(Lt)}}),Nt.dataRange&&(Nt.visualMap=Nt.dataRange),Object(H.each)(He,function(Lt){var Vt=Nt[Lt];Vt&&(Object(H.isArray)(Vt)||(Vt=[Vt]),Object(H.each)(Vt,function(Gt){Ie(Gt)}))})}function Zt(Nt){var Ft=Object(H.createHashMap)();Nt.eachSeries(function(Lt){var Vt=Lt.get("stack");if(Vt){var Gt=Ft.get(Vt)||Ft.set(Vt,[]),re=Lt.getData(),oe={stackResultDimension:re.getCalculationInfo("stackResultDimension"),stackedOverDimension:re.getCalculationInfo("stackedOverDimension"),stackedDimension:re.getCalculationInfo("stackedDimension"),stackedByDimension:re.getCalculationInfo("stackedByDimension"),isStackedByIndex:re.getCalculationInfo("isStackedByIndex"),data:re,seriesModel:Lt};if(!oe.stackedDimension||!(oe.isStackedByIndex||oe.stackedByDimension))return;Gt.length&&re.setCalculationInfo("stackedOnSeries",Gt[Gt.length-1].seriesModel),Gt.push(oe)}}),Ft.each(ce)}function ce(Nt){Object(H.each)(Nt,function(Ft,Lt){var Vt=[],Gt=[NaN,NaN],re=[Ft.stackResultDimension,Ft.stackedOverDimension],oe=Ft.data,je=Ft.isStackedByIndex,Be=oe.map(re,function(ne,pe,ge){var Se=oe.get(Ft.stackedDimension,ge);if(isNaN(Se))return Gt;var Ce,Ye;je?Ye=oe.getRawIndex(ge):Ce=oe.get(Ft.stackedByDimension,ge);for(var Qe=NaN,tr=Lt-1;tr>=0;tr--){var ar=Nt[tr];if(je||(Ye=ar.data.rawIndexOf(ar.stackedByDimension,Ce)),Ye>=0){var Cr=ar.data.getByRawIndex(ar.stackResultDimension,Ye);if(Se>=0&&Cr>0||Se<=0&&Cr<0){Se+=Cr,Qe=Cr;break}}}return Vt[0]=Se,Vt[1]=Qe,Vt});oe.hostModel.setData(Be),Ft.data=Be})}var xe=S("T4UG"),Kt=S("sS/r"),Rt=S("6Ic6"),Jt=S("x6Kt"),Xt=S("Dagg"),fe=S("IwbS"),be=S("y+Vt"),Ae=S("hhxK"),Ve=S("fWwa"),nr=S("iLNv"),de=S("KCsZ"),_r=S("VR9l"),Nr=S("OQFs"),lr=Object(Q.o)(),pr={itemStyle:Object(de.a)(_r.a,!0),lineStyle:Object(de.a)(Nr.a,!0)},zn={lineStyle:"stroke",itemStyle:"fill"};function sa(Nt,Ft){var Lt=Nt.visualStyleMapper||pr[Ft];return Lt||(console.warn("Unkown style type '"+Ft+"'."),pr.itemStyle)}function Ze(Nt,Ft){var Lt=Nt.visualDrawType||zn[Ft];return Lt||(console.warn("Unkown style type '"+Ft+"'."),"fill")}var Ur={createOnAllSeries:!0,performRawSeries:!0,reset:function(Nt,Ft){var Lt=Nt.getData(),Vt=Nt.visualStyleAccessPath||"itemStyle",Gt=Nt.getModel(Vt),re=sa(Nt,Vt),oe=re(Gt),je=Gt.getShallow("decal");je&&(Lt.setVisual("decal",je),je.dirty=!0);var Be=Ze(Nt,Vt),ne=oe[Be],pe=Object(H.isFunction)(ne)?ne:null,ge=oe.fill==="auto"||oe.stroke==="auto";if(!oe[Be]||pe||ge){var Se=Nt.getColorFromPalette(Nt.name,null,Ft.getSeriesCount());oe[Be]||(oe[Be]=Se,Lt.setVisual("colorFromPalette",!0)),oe.fill=oe.fill==="auto"||typeof oe.fill=="function"?Se:oe.fill,oe.stroke=oe.stroke==="auto"||typeof oe.stroke=="function"?Se:oe.stroke}if(Lt.setVisual("style",oe),Lt.setVisual("drawType",Be),!Ft.isSeriesFiltered(Nt)&&pe)return Lt.setVisual("colorFromPalette",!1),{dataEach:function(Ce,Ye){var Qe=Nt.getDataParams(Ye),tr=Object(H.extend)({},oe);tr[Be]=pe(Qe),Ce.setItemVisual(Ye,"style",tr)}}}},qe=new Y.a,Ne={createOnAllSeries:!0,performRawSeries:!0,reset:function(Nt,Ft){if(!(Nt.ignoreStyleOnData||Ft.isSeriesFiltered(Nt))){var Lt=Nt.getData(),Vt=Nt.visualStyleAccessPath||"itemStyle",Gt=sa(Nt,Vt),re=Lt.getVisual("drawType");return{dataEach:Lt.hasItemOption?function(oe,je){var Be=oe.getRawDataItem(je);if(Be&&Be[Vt]){qe.option=Be[Vt];var ne=Gt(qe),pe=oe.ensureUniqueItemVisual(je,"style");Object(H.extend)(pe,ne),qe.option.decal&&(oe.setItemVisual(je,"decal",qe.option.decal),qe.option.decal.dirty=!0),re in ne&&oe.setItemVisual(je,"colorFromPalette",!1)}}:null}}}},tl={performRawSeries:!0,overallReset:function(Nt){var Ft=Object(H.createHashMap)();Nt.eachSeries(function(Lt){if(!!Lt.useColorPaletteOnData){var Vt=Ft.get(Lt.type);Vt||(Vt={},Ft.set(Lt.type,Vt)),lr(Lt).scope=Vt}}),Nt.eachSeries(function(Lt){if(!(!Lt.useColorPaletteOnData||Nt.isSeriesFiltered(Lt))){var Vt=Lt.getRawData(),Gt={},re=Lt.getData(),oe=lr(Lt).scope,je=Lt.visualStyleAccessPath||"itemStyle",Be=Ze(Lt,je);re.each(function(ne){var pe=re.getRawIndex(ne);Gt[pe]=ne}),Vt.each(function(ne){var pe=Gt[ne],ge=re.getItemVisual(pe,"colorFromPalette");if(ge){var Se=re.ensureUniqueItemVisual(pe,"style"),Ce=Vt.getName(ne)||ne+"",Ye=Vt.count();Se[Be]=Lt.getColorFromPalette(Ce,oe,Ye)}})}})}},Oa=S("LcXL"),Aa=S("dqUG"),Ar=S("jTL6"),Tn=Math.PI;function hf(Nt,Ft){Ft=Ft||{},H.defaults(Ft,{text:"loading",textColor:"#000",fontSize:12,fontWeight:"normal",fontStyle:"normal",fontFamily:"sans-serif",maskColor:"rgba(255, 255, 255, 0.8)",showSpinner:!0,color:"#5470c6",spinnerRadius:10,lineWidth:5,zlevel:0});var Lt=new Oa.a,Vt=new Jt.a({style:{fill:Ft.maskColor},zlevel:Ft.zlevel,z:1e4});Lt.add(Vt);var Gt=new Aa.a({style:{text:Ft.text,fill:Ft.textColor,fontSize:Ft.fontSize,fontWeight:Ft.fontWeight,fontStyle:Ft.fontStyle,fontFamily:Ft.fontFamily},zlevel:Ft.zlevel,z:10001}),re=new Jt.a({style:{fill:"none"},textContent:Gt,textConfig:{position:"right",distance:10},zlevel:Ft.zlevel,z:10001});Lt.add(re);var oe;return Ft.showSpinner&&(oe=new Ar.a({shape:{startAngle:-Tn/2,endAngle:-Tn/2+.1,r:Ft.spinnerRadius},style:{stroke:Ft.color,lineCap:"round",lineWidth:Ft.lineWidth},zlevel:Ft.zlevel,z:10001}),oe.animateShape(!0).when(1e3,{endAngle:Tn*3/2}).start("circularInOut"),oe.animateShape(!0).when(1e3,{startAngle:Tn*3/2}).delay(300).start("circularInOut"),Lt.add(oe)),Lt.resize=function(){var je=Gt.getBoundingRect().width,Be=Ft.showSpinner?Ft.spinnerRadius:0,ne=(Nt.getWidth()-Be*2-(Ft.showSpinner&&je?10:0)-je)/2-(Ft.showSpinner&&je?0:5+je/2)+(Ft.showSpinner?0:je/2)+(je?0:Be),pe=Nt.getHeight()/2;Ft.showSpinner&&oe.setShape({cx:ne,cy:pe}),re.setShape({x:ne-Be,y:pe-Be,width:Be*2,height:Be*2}),Vt.setShape({x:0,y:0,width:Nt.getWidth(),height:Nt.getHeight()})},Lt.resize(),Lt}var Ma=S("n7yn"),cr=S("iRjW"),el=function(){function Nt(Ft,Lt,Vt,Gt){this._stageTaskMap=Object(H.createHashMap)(),this.ecInstance=Ft,this.api=Lt,Vt=this._dataProcessorHandlers=Vt.slice(),Gt=this._visualHandlers=Gt.slice(),this._allHandlers=Vt.concat(Gt)}return Nt.prototype.restoreData=function(Ft,Lt){Ft.restoreData(Lt),this._stageTaskMap.each(function(Vt){var Gt=Vt.overallTask;Gt&&Gt.dirty()})},Nt.prototype.getPerformArgs=function(Ft,Lt){if(!!Ft.__pipeline){var Vt=this._pipelineMap.get(Ft.__pipeline.id),Gt=Vt.context,re=!Lt&&Vt.progressiveEnabled&&(!Gt||Gt.progressiveRender)&&Ft.__idxInPipeline>Vt.blockIndex,oe=re?Vt.step:null,je=Gt&&Gt.modDataCount,Be=je!=null?Math.ceil(je/oe):null;return{step:oe,modBy:Be,modDataCount:je}}},Nt.prototype.getPipeline=function(Ft){return this._pipelineMap.get(Ft)},Nt.prototype.updateStreamModes=function(Ft,Lt){var Vt=this._pipelineMap.get(Ft.uid),Gt=Ft.getData(),re=Gt.count(),oe=Vt.progressiveEnabled&&Lt.incrementalPrepareRender&&re>=Vt.threshold,je=Ft.get("large")&&re>=Ft.get("largeThreshold"),Be=Ft.get("progressiveChunkMode")==="mod"?re:null;Ft.pipelineContext=Vt.context={progressiveRender:oe,modDataCount:Be,large:je}},Nt.prototype.restorePipelines=function(Ft){var Lt=this,Vt=Lt._pipelineMap=Object(H.createHashMap)();Ft.eachSeries(function(Gt){var re=Gt.getProgressive(),oe=Gt.uid;Vt.set(oe,{id:oe,head:null,tail:null,threshold:Gt.getProgressiveThreshold(),progressiveEnabled:re&&!(Gt.preventIncremental&&Gt.preventIncremental()),blockIndex:-1,step:Math.round(re||700),count:0}),Lt._pipe(Gt,Gt.dataTask)})},Nt.prototype.prepareStageTasks=function(){var Ft=this._stageTaskMap,Lt=this.api.getModel(),Vt=this.api;Object(H.each)(this._allHandlers,function(Gt){var re=Ft.get(Gt.uid)||Ft.set(Gt.uid,{}),oe="";Object(H.assert)(!(Gt.reset&&Gt.overallReset),oe),Gt.reset&&this._createSeriesStageTask(Gt,re,Lt,Vt),Gt.overallReset&&this._createOverallStageTask(Gt,re,Lt,Vt)},this)},Nt.prototype.prepareView=function(Ft,Lt,Vt,Gt){var re=Ft.renderTask,oe=re.context;oe.model=Lt,oe.ecModel=Vt,oe.api=Gt,re.__block=!Ft.incrementalPrepareRender,this._pipe(Lt,re)},Nt.prototype.performDataProcessorTasks=function(Ft,Lt){this._performStageTasks(this._dataProcessorHandlers,Ft,Lt,{block:!0})},Nt.prototype.performVisualTasks=function(Ft,Lt,Vt){this._performStageTasks(this._visualHandlers,Ft,Lt,Vt)},Nt.prototype._performStageTasks=function(Ft,Lt,Vt,Gt){Gt=Gt||{};var re=!1,oe=this;Object(H.each)(Ft,function(Be,ne){if(!(Gt.visualType&&Gt.visualType!==Be.visualType)){var pe=oe._stageTaskMap.get(Be.uid),ge=pe.seriesTaskMap,Se=pe.overallTask;if(Se){var Ce,Ye=Se.agentStubMap;Ye.each(function(tr){je(Gt,tr)&&(tr.dirty(),Ce=!0)}),Ce&&Se.dirty(),oe.updatePayload(Se,Vt);var Qe=oe.getPerformArgs(Se,Gt.block);Ye.each(function(tr){tr.perform(Qe)}),Se.perform(Qe)&&(re=!0)}else ge&&ge.each(function(tr,ar){je(Gt,tr)&&tr.dirty();var Cr=oe.getPerformArgs(tr,Gt.block);Cr.skip=!Be.performRawSeries&&Lt.isSeriesFiltered(tr.context.model),oe.updatePayload(tr,Vt),tr.perform(Cr)&&(re=!0)})}});function je(Be,ne){return Be.setDirty&&(!Be.dirtyMap||Be.dirtyMap.get(ne.__pipeline.id))}this.unfinished=re||this.unfinished},Nt.prototype.performSeriesTasks=function(Ft){var Lt;Ft.eachSeries(function(Vt){Lt=Vt.dataTask.perform()||Lt}),this.unfinished=Lt||this.unfinished},Nt.prototype.plan=function(){this._pipelineMap.each(function(Ft){var Lt=Ft.tail;do{if(Lt.__block){Ft.blockIndex=Lt.__idxInPipeline;break}Lt=Lt.getUpstream()}while(Lt)})},Nt.prototype.updatePayload=function(Ft,Lt){Lt!=="remain"&&(Ft.context.payload=Lt)},Nt.prototype._createSeriesStageTask=function(Ft,Lt,Vt,Gt){var re=this,oe=Lt.seriesTaskMap,je=Lt.seriesTaskMap=Object(H.createHashMap)(),Be=Ft.seriesType,ne=Ft.getTargetSeries;Ft.createOnAllSeries?Vt.eachRawSeries(pe):Be?Vt.eachRawSeriesByType(Be,pe):ne&&ne(Vt,Gt).each(pe);function pe(ge){var Se=ge.uid,Ce=je.set(Se,oe&&oe.get(Se)||Object(Ma.a)({plan:fn,reset:tu,count:vf}));Ce.context={model:ge,ecModel:Vt,api:Gt,useClearVisual:Ft.isVisual&&!Ft.isLayout,plan:Ft.plan,reset:Ft.reset,scheduler:re},re._pipe(ge,Ce)}},Nt.prototype._createOverallStageTask=function(Ft,Lt,Vt,Gt){var re=this,oe=Lt.overallTask=Lt.overallTask||Object(Ma.a)({reset:sn});oe.context={ecModel:Vt,api:Gt,overallReset:Ft.overallReset,scheduler:re};var je=oe.agentStubMap,Be=oe.agentStubMap=Object(H.createHashMap)(),ne=Ft.seriesType,pe=Ft.getTargetSeries,ge=!0,Se=!1,Ce="";Object(H.assert)(!Ft.createOnAllSeries,Ce),ne?Vt.eachRawSeriesByType(ne,Ye):pe?pe(Vt,Gt).each(Ye):(ge=!1,Object(H.each)(Vt.getSeries(),Ye));function Ye(Qe){var tr=Qe.uid,ar=Be.set(tr,je&&je.get(tr)||(Se=!0,Object(Ma.a)({reset:ir,onDirty:Te})));ar.context={model:Qe,overallProgress:ge},ar.agent=oe,ar.__block=ge,re._pipe(Qe,ar)}Se&&oe.dirty()},Nt.prototype._pipe=function(Ft,Lt){var Vt=Ft.uid,Gt=this._pipelineMap.get(Vt);!Gt.head&&(Gt.head=Lt),Gt.tail&&Gt.tail.pipe(Lt),Gt.tail=Lt,Lt.__idxInPipeline=Gt.count++,Lt.__pipeline=Gt},Nt.wrapStageHandler=function(Ft,Lt){return Object(H.isFunction)(Ft)&&(Ft={overallReset:Ft,seriesType:Qa(Ft)}),Ft.uid=Object(cr.c)("stageHandler"),Lt&&(Ft.visualType=Lt),Ft},Nt}();function sn(Nt){Nt.overallReset(Nt.ecModel,Nt.api,Nt.payload)}function ir(Nt){return Nt.overallProgress&&Er}function Er(){this.agent.dirty(),this.getDownstream().dirty()}function Te(){this.agent&&this.agent.dirty()}function fn(Nt){return Nt.plan?Nt.plan(Nt.model,Nt.ecModel,Nt.api,Nt.payload):null}function tu(Nt){Nt.useClearVisual&&Nt.data.clearAllVisual();var Ft=Nt.resetDefines=Object(Q.r)(Nt.reset(Nt.model,Nt.ecModel,Nt.api,Nt.payload));return Ft.length>1?Object(H.map)(Ft,function(Lt,Vt){return nl(Vt)}):rl}var rl=nl(0);function nl(Nt){return function(Ft,Lt){var Vt=Lt.data,Gt=Lt.resetDefines[Nt];if(Gt&&Gt.dataEach)for(var re=Ft.start;re<Ft.end;re++)Gt.dataEach(Vt,re);else Gt&&Gt.progress&&Gt.progress(Ft,Vt)}}function vf(Nt){return Nt.data.count()}function Qa(Nt){$a=null;try{Nt(Ja,il)}catch(Ft){}return $a}var Ja={},il={},$a;en(Ja,w),en(il,At),Ja.eachSeriesByType=Ja.eachRawSeriesByType=function(Nt){$a=Nt},Ja.eachComponent=function(Nt){Nt.mainType==="series"&&Nt.subType&&($a=Nt.subType)};function en(Nt,Ft){for(var Lt in Ft.prototype)Nt[Lt]=H.noop}var sr=el,un=["#37A2DA","#32C5E9","#67E0E3","#9FE6B8","#FFDB5C","#ff9f7f","#fb7293","#E062AE","#E690D1","#e7bcf3","#9d96f5","#8378EA","#96BFFF"],bi={color:un,colorLayer:[["#37A2DA","#ffd85c","#fd7b5f"],["#37A2DA","#67E0E3","#FFDB5C","#ff9f7f","#E062AE","#9d96f5"],["#37A2DA","#32C5E9","#9FE6B8","#FFDB5C","#ff9f7f","#fb7293","#e7bcf3","#8378EA","#96BFFF"],un]},vr="#B9B8CE",Ni="#100C2A",Bi=function(){return{axisLine:{lineStyle:{color:vr}},splitLine:{lineStyle:{color:"#484753"}},splitArea:{areaStyle:{color:["rgba(255,255,255,0.02)","rgba(255,255,255,0.05)"]}},minorSplitLine:{lineStyle:{color:"#20203B"}}}},hi=["#4992ff","#7cffb2","#fddd60","#ff6e76","#58d9f9","#05c091","#ff8a45","#8d48e3","#dd79ff"],an={darkMode:!0,color:hi,backgroundColor:Ni,axisPointer:{lineStyle:{color:"#817f91"},crossStyle:{color:"#817f91"},label:{color:"#fff"}},legend:{textStyle:{color:vr}},textStyle:{color:vr},title:{textStyle:{color:"#EEF1FA"},subtextStyle:{color:"#B9B8CE"}},toolbox:{iconStyle:{borderColor:vr}},dataZoom:{borderColor:"#71708A",textStyle:{color:vr},brushStyle:{color:"rgba(135,163,206,0.3)"},handleStyle:{color:"#353450",borderColor:"#C5CBE3"},moveHandleStyle:{color:"#B0B6C3",opacity:.3},fillerColor:"rgba(135,163,206,0.2)",emphasis:{handleStyle:{borderColor:"#91B7F2",color:"#4D587D"},moveHandleStyle:{color:"#636D9A",opacity:.7}},dataBackground:{lineStyle:{color:"#71708A",width:1},areaStyle:{color:"#71708A"}},selectedDataBackground:{lineStyle:{color:"#87A3CE"},areaStyle:{color:"#87A3CE"}}},visualMap:{textStyle:{color:vr}},timeline:{lineStyle:{color:vr},label:{color:vr},controlStyle:{color:vr,borderColor:vr}},calendar:{itemStyle:{color:Ni},dayLabel:{color:vr},monthLabel:{color:vr},yearLabel:{color:vr}},timeAxis:Bi(),logAxis:Bi(),valueAxis:Bi(),categoryAxis:Bi(),line:{symbol:"circle"},graph:{color:hi},gauge:{title:{color:vr},axisLine:{lineStyle:{color:[[1,"rgba(207,212,219,0.2)"]]}},axisLabel:{color:vr},detail:{color:"#EEF1FA"}},candlestick:{itemStyle:{color:"#f64e56",color0:"#54ea92",borderColor:"#f64e56",borderColor0:"#54ea92"}}};an.categoryAxis.splitLine.show=!1;var ji=an,la=S("Yl7c"),or=function(){function Nt(){}return Nt.prototype.normalizeQuery=function(Ft){var Lt={},Vt={},Gt={};if(H.isString(Ft)){var re=Object(la.f)(Ft);Lt.mainType=re.main||null,Lt.subType=re.sub||null}else{var oe=["Index","Name","Id"],je={name:1,dataIndex:1,dataType:1};H.each(Ft,function(Be,ne){for(var pe=!1,ge=0;ge<oe.length;ge++){var Se=oe[ge],Ce=ne.lastIndexOf(Se);if(Ce>0&&Ce===ne.length-Se.length){var Ye=ne.slice(0,Ce);Ye!=="data"&&(Lt.mainType=Ye,Lt[Se.toLowerCase()]=Be,pe=!0)}}je.hasOwnProperty(ne)&&(Vt[ne]=Be,pe=!0),pe||(Gt[ne]=Be)})}return{cptQuery:Lt,dataQuery:Vt,otherQuery:Gt}},Nt.prototype.filter=function(Ft,Lt){var Vt=this.eventInfo;if(!Vt)return!0;var Gt=Vt.targetEl,re=Vt.packedEvent,oe=Vt.model,je=Vt.view;if(!oe||!je)return!0;var Be=Lt.cptQuery,ne=Lt.dataQuery;return pe(Be,oe,"mainType")&&pe(Be,oe,"subType")&&pe(Be,oe,"index","componentIndex")&&pe(Be,oe,"name")&&pe(Be,oe,"id")&&pe(ne,re,"name")&&pe(ne,re,"dataIndex")&&pe(ne,re,"dataType")&&(!je.filterForExposedEvent||je.filterForExposedEvent(Ft,Lt.otherQuery,Gt,re));function pe(ge,Se,Ce,Ye){return ge[Ce]==null||Se[Ye||Ce]===ge[Ce]}},Nt.prototype.afterTrigger=function(){this.eventInfo=null},Nt}(),yn={createOnAllSeries:!0,performRawSeries:!0,reset:function(Nt,Ft){var Lt=Nt.getData();if(Nt.legendSymbol&&Lt.setVisual("legendSymbol",Nt.legendSymbol),!Nt.hasSymbolVisual)return;var Vt=Nt.get("symbol"),Gt=Nt.get("symbolSize"),re=Nt.get("symbolKeepAspect"),oe=Nt.get("symbolRotate"),je=Nt.get("symbolOffset"),Be=Object(H.isFunction)(Vt),ne=Object(H.isFunction)(Gt),pe=Object(H.isFunction)(oe),ge=Object(H.isFunction)(je),Se=Be||ne||pe||ge,Ce=!Be&&Vt?Vt:Nt.defaultSymbol,Ye=ne?null:Gt,Qe=pe?null:oe,tr=ge?null:je;if(Lt.setVisual({legendSymbol:Nt.legendSymbol||Ce,symbol:Ce,symbolSize:Ye,symbolKeepAspect:re,symbolRotate:Qe,symbolOffset:tr}),Ft.isSeriesFiltered(Nt))return;function ar(Cr,Rr){var Dr=Nt.getRawValue(Rr),Qr=Nt.getDataParams(Rr);Be&&Cr.setItemVisual(Rr,"symbol",Vt(Dr,Qr)),ne&&Cr.setItemVisual(Rr,"symbolSize",Gt(Dr,Qr)),pe&&Cr.setItemVisual(Rr,"symbolRotate",oe(Dr,Qr)),ge&&Cr.setItemVisual(Rr,"symbolOffset",je(Dr,Qr))}return{dataEach:Se?ar:null}}},nn={createOnAllSeries:!0,performRawSeries:!0,reset:function(Nt,Ft){if(!Nt.hasSymbolVisual||Ft.isSeriesFiltered(Nt))return;var Lt=Nt.getData();function Vt(Gt,re){var oe=Gt.getItemModel(re),je=oe.getShallow("symbol",!0),Be=oe.getShallow("symbolSize",!0),ne=oe.getShallow("symbolRotate",!0),pe=oe.getShallow("symbolOffset",!0),ge=oe.getShallow("symbolKeepAspect",!0);je!=null&&Gt.setItemVisual(re,"symbol",je),Be!=null&&Gt.setItemVisual(re,"symbolSize",Be),ne!=null&&Gt.setItemVisual(re,"symbolRotate",ne),pe!=null&&Gt.setItemVisual(re,"symbolOffset",pe),ge!=null&&Gt.setItemVisual(re,"symbolKeepAspect",ge)}return{dataEach:Lt.hasItemOption?Vt:null}}},vi=S("CSTQ"),Hr=S("mFDi"),dr=S("OELB"),On=S("hYLj"),Fr=S("ibaq"),Pr=S("I1WP"),Br=S("eDfh");function cn(Nt){if(Nt){for(var Ft=[],Lt=0;Lt<Nt.length;Lt++)Ft.push(Nt[Lt].slice());return Ft}}function Ao(Nt,Ft){var Lt=Nt.label,Vt=Ft&&Ft.getTextGuideLine();return{dataIndex:Nt.dataIndex,dataType:Nt.dataType,seriesIndex:Nt.seriesModel.seriesIndex,text:Nt.label.style.text,rect:Nt.hostRect,labelRect:Nt.rect,align:Lt.style.align,verticalAlign:Lt.style.verticalAlign,labelLinePoints:cn(Vt&&Vt.shape.points)}}var Mo=["align","verticalAlign","width","height","fontSize"],gr=new On.a,Zr=Object(Q.o)(),Do=Object(Q.o)();function Da(Nt,Ft,Lt){for(var Vt=0;Vt<Lt.length;Vt++){var Gt=Lt[Vt];Ft[Gt]!=null&&(Nt[Gt]=Ft[Gt])}}var Co=["x","y","rotation"],ua=function(){function Nt(){this._labelList=[],this._chartViewList=[]}return Nt.prototype.clearLabels=function(){this._labelList=[],this._chartViewList=[]},Nt.prototype._addLabel=function(Ft,Lt,Vt,Gt,re){var oe=Gt.style,je=Gt.__hostTarget,Be=je.textConfig||{},ne=Gt.getComputedTransform(),pe=Gt.getBoundingRect().plain();Hr.a.applyTransform(pe,pe,ne),ne?gr.setLocalTransform(ne):(gr.x=gr.y=gr.rotation=gr.originX=gr.originY=0,gr.scaleX=gr.scaleY=1);var ge=Gt.__hostTarget,Se;if(ge){Se=ge.getBoundingRect().plain();var Ce=ge.getComputedTransform();Hr.a.applyTransform(Se,Se,Ce)}var Ye=Se&&ge.getTextGuideLine();this._labelList.push({label:Gt,labelLine:Ye,seriesModel:Vt,dataIndex:Ft,dataType:Lt,layoutOption:re,computedLayoutOption:null,rect:pe,hostRect:Se,priority:Se?Se.width*Se.height:0,defaultAttr:{ignore:Gt.ignore,labelGuideIgnore:Ye&&Ye.ignore,x:gr.x,y:gr.y,scaleX:gr.scaleX,scaleY:gr.scaleY,rotation:gr.rotation,style:{x:oe.x,y:oe.y,align:oe.align,verticalAlign:oe.verticalAlign,width:oe.width,height:oe.height,fontSize:oe.fontSize},cursor:Gt.cursor,attachedPos:Be.position,attachedRot:Be.rotation}})},Nt.prototype.addLabelsOfSeries=function(Ft){var Lt=this;this._chartViewList.push(Ft);var Vt=Ft.__model,Gt=Vt.get("labelLayout");!(Object(H.isFunction)(Gt)||Object(H.keys)(Gt).length)||Ft.group.traverse(function(re){if(re.ignore)return!0;var oe=re.getTextContent(),je=Object(Ae.a)(re);oe&&!oe.disableLabelLayout&&Lt._addLabel(je.dataIndex,je.dataType,Vt,oe,Gt)})},Nt.prototype.updateLayoutConfig=function(Ft){var Lt=Ft.getWidth(),Vt=Ft.getHeight();function Gt(Rr,Dr){return function(){Object(Fr.e)(Rr,Dr)}}for(var re=0;re<this._labelList.length;re++){var oe=this._labelList[re],je=oe.label,Be=je.__hostTarget,ne=oe.defaultAttr,pe=void 0;typeof oe.layoutOption=="function"?pe=oe.layoutOption(Ao(oe,Be)):pe=oe.layoutOption,pe=pe||{},oe.computedLayoutOption=pe;var ge=Math.PI/180;Be&&Be.setTextConfig({local:!1,position:pe.x!=null||pe.y!=null?null:ne.attachedPos,rotation:pe.rotate!=null?pe.rotate*ge:ne.attachedRot,offset:[pe.dx||0,pe.dy||0]});var Se=!1;if(pe.x!=null?(je.x=Object(dr.o)(pe.x,Lt),je.setStyle("x",0),Se=!0):(je.x=ne.x,je.setStyle("x",ne.style.x)),pe.y!=null?(je.y=Object(dr.o)(pe.y,Vt),je.setStyle("y",0),Se=!0):(je.y=ne.y,je.setStyle("y",ne.style.y)),pe.labelLinePoints){var Ce=Be.getTextGuideLine();Ce&&(Ce.setShape({points:pe.labelLinePoints}),Se=!1)}var Ye=Zr(je);Ye.needsUpdateLabelLine=Se,je.rotation=pe.rotate!=null?pe.rotate*ge:ne.rotation,je.scaleX=ne.scaleX,je.scaleY=ne.scaleY;for(var Qe=0;Qe<Mo.length;Qe++){var tr=Mo[Qe];je.setStyle(tr,pe[tr]!=null?pe[tr]:ne.style[tr])}if(pe.draggable){if(je.draggable=!0,je.cursor="move",Be){var ar=oe.seriesModel;if(oe.dataIndex!=null){var Cr=oe.seriesModel.getData(oe.dataType);ar=Cr.getItemModel(oe.dataIndex)}je.on("drag",Gt(Be,ar.getModel("labelLine")))}}else je.off("drag"),je.cursor=ne.cursor}},Nt.prototype.layout=function(Ft){var Lt=Ft.getWidth(),Vt=Ft.getHeight(),Gt=Object(Pr.b)(this._labelList),re=Object(H.filter)(Gt,function(Be){return Be.layoutOption.moveOverlap==="shiftX"}),oe=Object(H.filter)(Gt,function(Be){return Be.layoutOption.moveOverlap==="shiftY"});Object(Pr.c)(re,0,Lt),Object(Pr.d)(oe,0,Vt);var je=Object(H.filter)(Gt,function(Be){return Be.layoutOption.hideOverlap});Object(Pr.a)(je)},Nt.prototype.processLabelsOverall=function(){var Ft=this;Object(H.each)(this._chartViewList,function(Lt){var Vt=Lt.__model,Gt=Lt.ignoreLabelLineUpdate,re=Vt.isAnimationEnabled();Lt.group.traverse(function(oe){if(oe.ignore)return!0;var je=!Gt,Be=oe.getTextContent();!je&&Be&&(je=Zr(Be).needsUpdateLabelLine),je&&Ft._updateLabelLine(oe,Vt),re&&Ft._animateLabels(oe,Vt)})})},Nt.prototype._updateLabelLine=function(Ft,Lt){var Vt=Ft.getTextContent(),Gt=Object(Ae.a)(Ft),re=Gt.dataIndex;if(Vt&&re!=null){var oe=Lt.getData(Gt.dataType),je=oe.getItemModel(re),Be={},ne=oe.getItemVisual(re,"style"),pe=oe.getVisual("drawType");Be.stroke=ne[pe];var ge=je.getModel("labelLine");Object(Fr.d)(Ft,Object(Fr.a)(je),Be),Object(Fr.e)(Ft,ge)}},Nt.prototype._animateLabels=function(Ft,Lt){var Vt=Ft.getTextContent(),Gt=Ft.getTextGuideLine();if(Vt&&!Vt.ignore&&!Vt.invisible&&!Ft.disableLabelAnimation&&!Object(fe.isElementRemoved)(Ft)){var re=Zr(Vt),oe=re.oldLayout,je=Object(Ae.a)(Ft),Be=je.dataIndex,ne={x:Vt.x,y:Vt.y,rotation:Vt.rotation},pe=Lt.getData(je.dataType);if(oe){Vt.attr(oe);var Se=Ft.prevStates;Se&&(Object(H.indexOf)(Se,"select")>=0&&Vt.attr(re.oldLayoutSelect),Object(H.indexOf)(Se,"emphasis")>=0&&Vt.attr(re.oldLayoutEmphasis)),Object(fe.updateProps)(Vt,ne,Lt,Be)}else if(Vt.attr(ne),!Object(Br.g)(Vt).valueAnimation){var ge=Object(H.retrieve2)(Vt.style.opacity,1);Vt.style.opacity=0,Object(fe.initProps)(Vt,{style:{opacity:ge}},Lt,Be)}if(re.oldLayout=ne,Vt.states.select){var Ce=re.oldLayoutSelect={};Da(Ce,ne,Co),Da(Ce,Vt.states.select,Co)}if(Vt.states.emphasis){var Ye=re.oldLayoutEmphasis={};Da(Ye,ne,Co),Da(Ye,Vt.states.emphasis,Co)}Object(Br.a)(Vt,Be,pe,Lt,Lt)}if(Gt&&!Gt.ignore&&!Gt.invisible){var re=Do(Gt),oe=re.oldLayout,Qe={points:Gt.shape.points};oe?(Gt.attr({shape:oe}),Object(fe.updateProps)(Gt,{shape:Qe},Lt)):(Gt.setShape(Qe),Gt.style.strokePercent=0,Object(fe.initProps)(Gt,{style:{strokePercent:1}},Lt)),re.oldLayout=Qe}},Nt}(),fs=ua,Ca=S("7a4p"),di=S("87sf"),eu=S("BPd+"),al=S("71kh"),Mi=S("+t0R"),Si=S("s8Fb");function qa(Nt,Ft){Nt.eachRawSeries(function(Lt){if(!Nt.isSeriesFiltered(Lt)){var Vt=Lt.getData();Vt.hasItemVisual()&&Vt.each(function(oe){var je=Vt.getItemVisual(oe,"decal");if(je){var Be=Vt.ensureUniqueItemVisual(oe,"style");Be.decal=Object(Si.a)(je,Ft)}});var Gt=Vt.getVisual("decal");if(Gt){var re=Vt.getVisual("style");re.decal=Object(Si.a)(Gt,Ft)}}})}var fa=S("W4dC"),df=H.assert,pn=H.each,Eo=H.isFunction,Ea=H.isObject,Wr=H.indexOf,Mr=typeof window!="undefined",ri="5.1.1",ni={zrender:"5.1.0"},cs=1,ru=800,ca=900,nu=1e3,pf=2e3,Lo=5e3,Gr=1e3,hs=1100,La=2e3,Pa=3e3,iu=4e3,to=4500,Ki=4600,wa=5e3,ii=6e3,ki=7e3,Ia={PROCESSOR:{FILTER:nu,SERIES_FILTER:ru,STATISTIC:Lo},VISUAL:{LAYOUT:Gr,PROGRESSIVE_LAYOUT:hs,GLOBAL:La,CHART:Pa,POST_CHART_LAYOUT:Ki,COMPONENT:iu,BRUSH:wa,CHART_ITEM:to,ARIA:ii,DECAL:ki}},Fn="__flagInMainProcess",_i="__optionUpdated",$r="__needsUpdateStatus",ol=/^[a-zA-Z0-9_]+$/,Ti="__connectUpdateStatus",Ra=0,eo=1,ro=2;function Xn(Nt){return function(){for(var Ft=[],Lt=0;Lt<arguments.length;Lt++)Ft[Lt]=arguments[Lt];if(this.isDisposed()){Ci(this.id);return}return au(this,Nt,Ft)}}function sl(Nt){return function(){for(var Ft=[],Lt=0;Lt<arguments.length;Lt++)Ft[Lt]=arguments[Lt];return au(this,Nt,Ft)}}function au(Nt,Ft,Lt){return Lt[0]=Lt[0]&&Lt[0].toLowerCase(),it.a.prototype[Ft].apply(Nt,Lt)}var zi=function(Nt){Object(B.b)(Ft,Nt);function Ft(){return Nt!==null&&Nt.apply(this,arguments)||this}return Ft}(it.a),Po=zi.prototype;Po.on=sl("on"),Po.off=sl("off");var ha,Tr,va,Qi,wo,Io,da,pi,pa,Fi,ou,no,io,su,ga,Ro,Na,ra,lu,gi,No,Zn=function(Nt){Object(B.b)(Ft,Nt);function Ft(Lt,Vt,Gt){var re=Nt.call(this,new or)||this;re._chartsViews=[],re._chartsMap={},re._componentsViews=[],re._componentsMap={},re._pendingActions=[],Gt=Gt||{},typeof Vt=="string"&&(Vt=na[Vt]),re._dom=Lt;var oe="canvas",je=!1;if(!1)var Be,ne;var pe=re._zr=mt.init(Lt,{renderer:Gt.renderer||oe,devicePixelRatio:Gt.devicePixelRatio,width:Gt.width,height:Gt.height,useDirtyRect:Gt.useDirtyRect==null?je:Gt.useDirtyRect});re._throttledZrFlush=Object(nr.c)(H.bind(pe.flush,pe),17),Vt=H.clone(Vt),Vt&&Yt(Vt,!0),re._theme=Vt,re._locale=Object(al.b)(Gt.locale||al.a),re._coordSysMgr=new rt.a;var ge=re._api=Na(re);function Se(Ce,Ye){return Ce.__prio-Ye.__prio}return Object(ot.a)(Ba,Se),Object(ot.a)(Ui,Se),re._scheduler=new sr(re,ge,Ui,Ba),re._messageCenter=new zi,re._labelManager=new fs,re._initEvents(),re.resize=H.bind(re.resize,re),pe.animation.on("frame",re._onframe,re),Fi(pe,re),ou(pe,re),H.setAsPrimitive(re),re}return Ft.prototype._onframe=function(){if(!this._disposed){No(this);var Lt=this._scheduler;if(this[_i]){var Vt=this[_i].silent;this[Fn]=!0,ha(this),Qi.update.call(this),this._zr.flush(),this[Fn]=!1,this[_i]=!1,pi.call(this,Vt),pa.call(this,Vt)}else if(Lt.unfinished){var Gt=cs,re=this._model,oe=this._api;Lt.unfinished=!1;do{var je=+new Date;Lt.performSeriesTasks(re),Lt.performDataProcessorTasks(re),Io(this,re),Lt.performVisualTasks(re),ga(this,this._model,oe,"remain"),Gt-=+new Date-je}while(Gt>0&&Lt.unfinished);Lt.unfinished||this._zr.flush()}}},Ft.prototype.getDom=function(){return this._dom},Ft.prototype.getId=function(){return this.id},Ft.prototype.getZr=function(){return this._zr},Ft.prototype.setOption=function(Lt,Vt,Gt){if(this._disposed){Ci(this.id);return}var re,oe,je;if(Ea(Vt)&&(Gt=Vt.lazyUpdate,re=Vt.silent,oe=Vt.replaceMerge,je=Vt.transition,Vt=Vt.notMerge),this[Fn]=!0,!this._model||Vt){var Be=new tt(this._api),ne=this._theme,pe=this._model=new w;pe.scheduler=this._scheduler,pe.init(null,null,null,ne,this._locale,Be)}this._model.setOption(Lt,{replaceMerge:oe},vs),lu(this,je),Gt?(this[_i]={silent:re},this[Fn]=!1,this.getZr().wakeUp()):(ha(this),Qi.update.call(this),this._zr.flush(),this[_i]=!1,this[Fn]=!1,pi.call(this,re),pa.call(this,re))},Ft.prototype.setTheme=function(){console.error("ECharts#setTheme() is DEPRECATED in ECharts 3.0")},Ft.prototype.getModel=function(){return this._model},Ft.prototype.getOption=function(){return this._model&&this._model.getOption()},Ft.prototype.getWidth=function(){return this._zr.getWidth()},Ft.prototype.getHeight=function(){return this._zr.getHeight()},Ft.prototype.getDevicePixelRatio=function(){return this._zr.painter.dpr||Mr&&window.devicePixelRatio||1},Ft.prototype.getRenderedCanvas=function(Lt){if(!!y.a.canvasSupported){Lt=H.extend({},Lt||{}),Lt.pixelRatio=Lt.pixelRatio||this.getDevicePixelRatio(),Lt.backgroundColor=Lt.backgroundColor||this._model.get("backgroundColor");var Vt=this._zr;return Vt.painter.getRenderedCanvas(Lt)}},Ft.prototype.getSvgDataURL=function(){if(!!y.a.svgSupported){var Lt=this._zr,Vt=Lt.storage.getDisplayList();return H.each(Vt,function(Gt){Gt.stopAnimation(null,!0)}),Lt.painter.toDataURL()}},Ft.prototype.getDataURL=function(Lt){if(this._disposed){Ci(this.id);return}Lt=Lt||{};var Vt=Lt.excludeComponents,Gt=this._model,re=[],oe=this;pn(Vt,function(Be){Gt.eachComponent({mainType:Be},function(ne){var pe=oe._componentsMap[ne.__viewId];pe.group.ignore||(re.push(pe),pe.group.ignore=!0)})});var je=this._zr.painter.getType()==="svg"?this.getSvgDataURL():this.getRenderedCanvas(Lt).toDataURL("image/"+(Lt&&Lt.type||"png"));return pn(re,function(Be){Be.group.ignore=!1}),je},Ft.prototype.getConnectedDataURL=function(Lt){if(this._disposed){Ci(this.id);return}if(!!y.a.canvasSupported){var Vt=Lt.type==="svg",Gt=this.group,re=Math.min,oe=Math.max,je=Infinity;if(jo[Gt]){var Be=je,ne=je,pe=-je,ge=-je,Se=[],Ce=Lt&&Lt.pixelRatio||this.getDevicePixelRatio();H.each(Ei,function(Rr,Dr){if(Rr.group===Gt){var Qr=Vt?Rr.getZr().painter.getSvgDom().innerHTML:Rr.getRenderedCanvas(H.clone(Lt)),Mn=Rr.getDom().getBoundingClientRect();Be=re(Mn.left,Be),ne=re(Mn.top,ne),pe=oe(Mn.right,pe),ge=oe(Mn.bottom,ge),Se.push({dom:Qr,left:Mn.left,top:Mn.top})}}),Be*=Ce,ne*=Ce,pe*=Ce,ge*=Ce;var Ye=pe-Be,Qe=ge-ne,tr=H.createCanvas(),ar=mt.init(tr,{renderer:Vt?"svg":"canvas"});if(ar.resize({width:Ye,height:Qe}),Vt){var Cr="";return pn(Se,function(Rr){var Dr=Rr.left-Be,Qr=Rr.top-ne;Cr+='<g transform="translate('+Dr+","+Qr+')">'+Rr.dom+"</g>"}),ar.painter.getSvgRoot().innerHTML=Cr,Lt.connectedBackgroundColor&&ar.painter.setBackgroundColor(Lt.connectedBackgroundColor),ar.refreshImmediately(),ar.painter.toDataURL()}else return Lt.connectedBackgroundColor&&ar.add(new Jt.a({shape:{x:0,y:0,width:Ye,height:Qe},style:{fill:Lt.connectedBackgroundColor}})),pn(Se,function(Rr){var Dr=new Xt.a({style:{x:Rr.left*Ce-Be,y:Rr.top*Ce-ne,image:Rr.dom}});ar.add(Dr)}),ar.refreshImmediately(),tr.toDataURL("image/"+(Lt&&Lt.type||"png"))}else return this.getDataURL(Lt)}},Ft.prototype.convertToPixel=function(Lt,Vt){return wo(this,"convertToPixel",Lt,Vt)},Ft.prototype.convertFromPixel=function(Lt,Vt){return wo(this,"convertFromPixel",Lt,Vt)},Ft.prototype.containPixel=function(Lt,Vt){if(this._disposed){Ci(this.id);return}var Gt=this._model,re,oe=Q.s(Gt,Lt);return H.each(oe,function(je,Be){Be.indexOf("Models")>=0&&H.each(je,function(ne){var pe=ne.coordinateSystem;if(pe&&pe.containPoint)re=re||!!pe.containPoint(Vt);else if(Be==="seriesModels"){var ge=this._chartsMap[ne.__viewId];ge&&ge.containPoint&&(re=re||ge.containPoint(Vt,ne))}},this)},this),!!re},Ft.prototype.getVisual=function(Lt,Vt){var Gt=this._model,re=Q.s(Gt,Lt,{defaultMainType:"series"}),oe=re.seriesModel,je=oe.getData(),Be=re.hasOwnProperty("dataIndexInside")?re.dataIndexInside:re.hasOwnProperty("dataIndex")?je.indexOfRawIndex(re.dataIndex):null;return Be!=null?Object(vi.a)(je,Be,Vt):Object(vi.b)(je,Vt)},Ft.prototype.getViewOfComponentModel=function(Lt){return this._componentsMap[Lt.__viewId]},Ft.prototype.getViewOfSeriesModel=function(Lt){return this._chartsMap[Lt.__viewId]},Ft.prototype._initEvents=function(){var Lt=this;pn(ma,function(Vt){var Gt=function(re){var oe=Lt.getModel(),je=re.target,Be,ne=Vt==="globalout";if(ne?Be={}:je&&Object(Mi.a)(je,function(Ye){var Qe=Object(Ae.a)(Ye);if(Qe&&Qe.dataIndex!=null){var tr=Qe.dataModel||oe.getSeriesByIndex(Qe.seriesIndex);return Be=tr&&tr.getDataParams(Qe.dataIndex,Qe.dataType)||{},!0}else if(Qe.eventData)return Be=H.extend({},Qe.eventData),!0},!0),Be){var pe=Be.componentType,ge=Be.componentIndex;(pe==="markLine"||pe==="markPoint"||pe==="markArea")&&(pe="series",ge=Be.seriesIndex);var Se=pe&&ge!=null&&oe.getComponent(pe,ge),Ce=Se&&Lt[Se.mainType==="series"?"_chartsMap":"_componentsMap"][Se.__viewId];Be.event=re,Be.type=Vt,Lt._$eventProcessor.eventInfo={targetEl:je,packedEvent:Be,model:Se,view:Ce},Lt.trigger(Vt,Be)}};Gt.zrEventfulCallAtLast=!0,Lt._zr.on(Vt,Gt,Lt)}),pn(ya,function(Vt,Gt){Lt._messageCenter.on(Gt,function(re){this.trigger(Gt,re)},Lt)}),pn(["selectchanged"],function(Vt){Lt._messageCenter.on(Vt,function(Gt){this.trigger(Vt,Gt)},Lt)}),Object(di.b)(this._messageCenter,this,this._api)},Ft.prototype.isDisposed=function(){return this._disposed},Ft.prototype.clear=function(){if(this._disposed){Ci(this.id);return}this.setOption({series:[]},!0)},Ft.prototype.dispose=function(){if(this._disposed){Ci(this.id);return}this._disposed=!0,Q.w(this.getDom(),ll,"");var Lt=this._api,Vt=this._model;pn(this._componentsViews,function(Gt){Gt.dispose(Vt,Lt)}),pn(this._chartsViews,function(Gt){Gt.dispose(Vt,Lt)}),this._zr.dispose(),delete Ei[this.id]},Ft.prototype.resize=function(Lt){if(this._disposed){Ci(this.id);return}this._zr.resize(Lt);var Vt=this._model;if(this._loadingFX&&this._loadingFX.resize(),!!Vt){var Gt=Vt.resetOption("media"),re=Lt&&Lt.silent;this[Fn]=!0,Gt&&ha(this),Qi.update.call(this,{type:"resize",animation:H.extend({duration:0},Lt&&Lt.animation)}),this[Fn]=!1,pi.call(this,re),pa.call(this,re)}},Ft.prototype.showLoading=function(Lt,Vt){if(this._disposed){Ci(this.id);return}if(Ea(Lt)&&(Vt=Lt,Lt=""),Lt=Lt||"default",this.hideLoading(),!!ja[Lt]){var Gt=ja[Lt](this._api,Vt),re=this._zr;this._loadingFX=Gt,re.add(Gt)}},Ft.prototype.hideLoading=function(){if(this._disposed){Ci(this.id);return}this._loadingFX&&this._zr.remove(this._loadingFX),this._loadingFX=null},Ft.prototype.makeActionFromEvent=function(Lt){var Vt=H.extend({},Lt);return Vt.type=ya[Lt.type],Vt},Ft.prototype.dispatchAction=function(Lt,Vt){if(this._disposed){Ci(this.id);return}if(Ea(Vt)||(Vt={silent:!!Vt}),!!xn[Lt.type]&&!!this._model){if(this[Fn]){this._pendingActions.push(Lt);return}var Gt=Vt.silent;da.call(this,Lt,Gt);var re=Vt.flush;re?this._zr.flush():re!==!1&&y.a.browser.weChat&&this._throttledZrFlush(),pi.call(this,Gt),pa.call(this,Gt)}},Ft.prototype.updateLabelLayout=function(){var Lt=this._labelManager;Lt.updateLayoutConfig(this._api),Lt.layout(this._api),Lt.processLabelsOverall()},Ft.prototype.appendData=function(Lt){if(this._disposed){Ci(this.id);return}var Vt=Lt.seriesIndex,Gt=this.getModel(),re=Gt.getSeriesByIndex(Vt);re.appendData(Lt),this._scheduler.unfinished=!0,this.getZr().wakeUp()},Ft.internalField=function(){ha=function(ne){var pe=ne._scheduler;pe.restorePipelines(ne._model),pe.prepareStageTasks(),Tr(ne,!0),Tr(ne,!1),pe.plan()},Tr=function(ne,pe){for(var ge=ne._model,Se=ne._scheduler,Ce=pe?ne._componentsViews:ne._chartsViews,Ye=pe?ne._componentsMap:ne._chartsMap,Qe=ne._zr,tr=ne._api,ar=0;ar<Ce.length;ar++)Ce[ar].__alive=!1;pe?ge.eachComponent(function(Dr,Qr){Dr!=="series"&&Cr(Qr)}):ge.eachSeries(Cr);function Cr(Dr){var Qr=Dr.__requireNewView;Dr.__requireNewView=!1;var Mn="_ec_"+Dr.id+"_"+Dr.type,dn=!Qr&&Ye[Mn];if(!dn){var Oi=Object(la.f)(Dr.type),Uo=pe?Kt.a.getClass(Oi.main,Oi.sub):Rt.a.getClass(Oi.sub);dn=new Uo,dn.init(ge,tr),Ye[Mn]=dn,Ce.push(dn),Qe.add(dn.group)}Dr.__viewId=dn.__id=Mn,dn.__alive=!0,dn.__model=Dr,dn.group.__ecComponentInfo={mainType:Dr.mainType,index:Dr.componentIndex},!pe&&Se.prepareView(dn,Dr,ge,tr)}for(var ar=0;ar<Ce.length;){var Rr=Ce[ar];Rr.__alive?ar++:(!pe&&Rr.renderTask.dispose(),Qe.remove(Rr.group),Rr.dispose(ge,tr),Ce.splice(ar,1),Ye[Rr.__id]===Rr&&delete Ye[Rr.__id],Rr.__id=Rr.group.__ecComponentInfo=null)}},va=function(ne,pe,ge,Se,Ce){var Ye=ne._model;if(Ye.setUpdatePayload(ge),!Se){pn([].concat(ne._componentsViews).concat(ne._chartsViews),Rr);return}var Qe={};Qe[Se+"Id"]=ge[Se+"Id"],Qe[Se+"Index"]=ge[Se+"Index"],Qe[Se+"Name"]=ge[Se+"Name"];var tr={mainType:Se,query:Qe};Ce&&(tr.subType=Ce);var ar=ge.excludeSeriesId,Cr;ar!=null&&(Cr=H.createHashMap(),pn(Q.r(ar),function(Dr){var Qr=Q.e(Dr,null);Qr!=null&&Cr.set(Qr,!0)})),Object(Ve.z)(ge)&&Object(Ve.k)(ne._api),Ye&&Ye.eachComponent(tr,function(Dr){if(!Cr||Cr.get(Dr.id)==null){if(Object(Ve.z)(ge))if(Dr instanceof xe.a)ge.type===Ve.c&&!ge.notBlur&&Object(Ve.m)(Dr,ge,ne._api);else{var Qr=Object(Ve.t)(Dr.mainType,Dr.componentIndex,ge.name,ne._api),Mn=Qr.focusSelf,dn=Qr.dispatchers;ge.type===Ve.c&&Mn&&!ge.notBlur&&Object(Ve.l)(Dr.mainType,Dr.componentIndex,ne._api),dn&&pn(dn,function(Oi){ge.type===Ve.c?Object(Ve.r)(Oi):Object(Ve.C)(Oi)})}else Object(Ve.A)(ge)&&Dr instanceof xe.a&&(Object(Ve.J)(Dr,ge,ne._api),Object(Ve.K)(Dr),gi(ne));Rr(ne[Se==="series"?"_chartsMap":"_componentsMap"][Dr.__viewId])}},ne);function Rr(Dr){Dr&&Dr.__alive&&Dr[pe]&&Dr[pe](Dr.__model,Ye,ne._api,ge)}},Qi={prepareAndUpdate:function(ne){ha(this),Qi.update.call(this,ne)},update:function(ne){var pe=this._model,ge=this._api,Se=this._zr,Ce=this._coordSysMgr,Ye=this._scheduler;if(!!pe){pe.setUpdatePayload(ne),Ye.restoreData(pe,ne),Ye.performSeriesTasks(pe),Ce.create(pe,ge),Ye.performDataProcessorTasks(pe,ne),Io(this,pe),Ce.update(pe,ge),no(pe),Ye.performVisualTasks(pe,ne),io(this,pe,ge,ne);var Qe=pe.get("backgroundColor")||"transparent",tr=pe.get("darkMode");if(y.a.canvasSupported)Se.setBackgroundColor(Qe),tr!=null&&tr!=="auto"&&Se.setDarkMode(tr);else{var ar=ht.parse(Qe);Qe=ht.stringify(ar,"rgb"),ar[3]===0&&(Qe="transparent")}Ro(pe,ge)}},updateTransform:function(ne){var pe=this,ge=this._model,Se=this._api;if(!!ge){ge.setUpdatePayload(ne);var Ce=[];ge.eachComponent(function(Qe,tr){if(Qe!=="series"){var ar=pe.getViewOfComponentModel(tr);if(ar&&ar.__alive)if(ar.updateTransform){var Cr=ar.updateTransform(tr,ge,Se,ne);Cr&&Cr.update&&Ce.push(ar)}else Ce.push(ar)}});var Ye=H.createHashMap();ge.eachSeries(function(Qe){var tr=pe._chartsMap[Qe.__viewId];if(tr.updateTransform){var ar=tr.updateTransform(Qe,ge,Se,ne);ar&&ar.update&&Ye.set(Qe.uid,1)}else Ye.set(Qe.uid,1)}),no(ge),this._scheduler.performVisualTasks(ge,ne,{setDirty:!0,dirtyMap:Ye}),ga(this,ge,Se,ne,Ye),Ro(ge,this._api)}},updateView:function(ne){var pe=this._model;!pe||(pe.setUpdatePayload(ne),Rt.a.markUpdateMethod(ne,"updateView"),no(pe),this._scheduler.performVisualTasks(pe,ne,{setDirty:!0}),io(this,this._model,this._api,ne),Ro(pe,this._api))},updateVisual:function(ne){var pe=this,ge=this._model;!ge||(ge.setUpdatePayload(ne),ge.eachSeries(function(Se){Se.getData().clearAllVisual()}),Rt.a.markUpdateMethod(ne,"updateVisual"),no(ge),this._scheduler.performVisualTasks(ge,ne,{visualType:"visual",setDirty:!0}),ge.eachComponent(function(Se,Ce){if(Se!=="series"){var Ye=pe.getViewOfComponentModel(Ce);Ye&&Ye.__alive&&Ye.updateVisual(Ce,ge,pe._api,ne)}}),ge.eachSeries(function(Se){var Ce=pe._chartsMap[Se.__viewId];Ce.updateVisual(Se,ge,pe._api,ne)}),Ro(ge,this._api))},updateLayout:function(ne){Qi.update.call(this,ne)}},wo=function(ne,pe,ge,Se){if(ne._disposed){Ci(ne.id);return}for(var Ce=ne._model,Ye=ne._coordSysMgr.getCoordinateSystems(),Qe,tr=Q.s(Ce,ge),ar=0;ar<Ye.length;ar++){var Cr=Ye[ar];if(Cr[pe]&&(Qe=Cr[pe](Ce,tr,Se))!=null)return Qe}},Io=function(ne,pe){var ge=ne._chartsMap,Se=ne._scheduler;pe.eachSeries(function(Ce){Se.updateStreamModes(Ce,ge[Ce.__viewId])})},da=function(ne,pe){var ge=this,Se=this.getModel(),Ce=ne.type,Ye=ne.escapeConnect,Qe=xn[Ce],tr=Qe.actionInfo,ar=(tr.update||"update").split(":"),Cr=ar.pop(),Rr=ar[0]!=null&&Object(la.f)(ar[0]);this[Fn]=!0;var Dr=[ne],Qr=!1;ne.batch&&(Qr=!0,Dr=H.map(ne.batch,function(Ji){return Ji=H.defaults(H.extend({},Ji),ne),Ji.batch=null,Ji}));var Mn=[],dn,Oi=Object(Ve.A)(ne),Uo=Object(Ve.z)(ne);if(pn(Dr,function(Ji){if(dn=Qe.action(Ji,ge._model,ge._api),dn=dn||H.extend({},Ji),dn.type=tr.event||dn.type,Mn.push(dn),Uo){var xf=Q.t(ne),$c=xf.queryOptionMap,bf=xf.mainTypeSpecified,Sf=bf?$c.keys()[0]:"series";va(ge,Cr,Ji,Sf),gi(ge)}else Oi?(va(ge,Cr,Ji,"series"),gi(ge)):Rr&&va(ge,Cr,Ji,Rr.main,Rr.sub)}),Cr!=="none"&&!Uo&&!Oi&&!Rr&&(this[_i]?(ha(this),Qi.update.call(this,ne),this[_i]=!1):Qi[Cr].call(this,ne)),Qr?dn={type:tr.event||Ce,escapeConnect:Ye,batch:Mn}:dn=Mn[0],this[Fn]=!1,!pe){var ul=this._messageCenter;if(ul.trigger(dn.type,dn),Oi){var Vi={type:"selectchanged",escapeConnect:Ye,selected:Object(Ve.u)(Se),isFromClick:ne.isFromClick||!1,fromAction:ne.type,fromActionPayload:ne};ul.trigger(Vi.type,Vi)}}},pi=function(ne){for(var pe=this._pendingActions;pe.length;){var ge=pe.shift();da.call(this,ge,ne)}},pa=function(ne){!ne&&this.trigger("updated")},Fi=function(ne,pe){ne.on("rendered",function(ge){pe.trigger("rendered",ge),ne.animation.isFinished()&&!pe[_i]&&!pe._scheduler.unfinished&&!pe._pendingActions.length&&pe.trigger("finished")})},ou=function(ne,pe){ne.on("mouseover",function(ge){var Se=ge.target,Ce=Object(Mi.a)(Se,Ve.y);Ce&&(Object(Ve.x)(Ce,ge,pe._api),gi(pe))}).on("mouseout",function(ge){var Se=ge.target,Ce=Object(Mi.a)(Se,Ve.y);Ce&&(Object(Ve.w)(Ce,ge,pe._api),gi(pe))}).on("click",function(ge){var Se=ge.target,Ce=Object(Mi.a)(Se,function(tr){return Object(Ae.a)(tr).dataIndex!=null},!0);if(Ce){var Ye=Ce.selected?"unselect":"select",Qe=Object(Ae.a)(Ce);pe._api.dispatchAction({type:Ye,dataType:Qe.dataType,dataIndexInside:Qe.dataIndex,seriesIndex:Qe.seriesIndex,isFromClick:!0})}})},no=function(ne){ne.clearColorPalette(),ne.eachSeries(function(pe){pe.clearColorPalette()})},io=function(ne,pe,ge,Se){su(ne,pe,ge,Se),pn(ne._chartsViews,function(Ce){Ce.__alive=!1}),ga(ne,pe,ge,Se),pn(ne._chartsViews,function(Ce){Ce.__alive||Ce.remove(pe,ge)})},su=function(ne,pe,ge,Se,Ce){pn(Ce||ne._componentsViews,function(Ye){var Qe=Ye.__model;je(Qe,Ye),Ye.render(Qe,pe,ge,Se),re(Qe,Ye),Be(Qe,Ye)})},ga=function(ne,pe,ge,Se,Ce){var Ye=ne._scheduler,Qe=ne._labelManager;Qe.clearLabels();var tr=!1;pe.eachSeries(function(ar){var Cr=ne._chartsMap[ar.__viewId];Cr.__alive=!0;var Rr=Cr.renderTask;Ye.updatePayload(Rr,Se),je(ar,Cr),Ce&&Ce.get(ar.uid)&&Rr.dirty(),Rr.perform(Ye.getPerformArgs(Rr))&&(tr=!0),ar.__transientTransitionOpt=null,Cr.group.silent=!!ar.get("silent"),Gt(ar,Cr),Object(Ve.K)(ar),Qe.addLabelsOfSeries(Cr)}),Ye.unfinished=tr||Ye.unfinished,Qe.updateLayoutConfig(ge),Qe.layout(ge),Qe.processLabelsOverall(),pe.eachSeries(function(ar){var Cr=ne._chartsMap[ar.__viewId];re(ar,Cr),Be(ar,Cr)}),Vt(ne,pe)},Ro=function(ne,pe){pn(Bo,function(ge){ge(ne,pe)})},gi=function(ne){ne[$r]=!0,ne.getZr().wakeUp()},No=function(ne){!ne[$r]||(ne.getZr().storage.traverse(function(pe){fe.isElementRemoved(pe)||Lt(pe)}),ne[$r]=!1)};function Lt(ne){for(var pe=[],ge=ne.currentStates,Se=0;Se<ge.length;Se++){var Ce=ge[Se];Ce==="emphasis"||Ce==="blur"||Ce==="select"||pe.push(Ce)}ne.selected&&ne.states.select&&pe.push("select"),ne.hoverState===Ve.e&&ne.states.emphasis?pe.push("emphasis"):ne.hoverState===Ve.d&&ne.states.blur&&pe.push("blur"),ne.useStates(pe)}function Vt(ne,pe){var ge=ne._zr,Se=ge.storage,Ce=0;Se.traverse(function(Ye){Ye.isGroup||Ce++}),Ce>pe.get("hoverLayerThreshold")&&!y.a.node&&!y.a.worker&&pe.eachSeries(function(Ye){if(!Ye.preventUsingHoverLayer){var Qe=ne._chartsMap[Ye.__viewId];Qe.__alive&&Qe.group.traverse(function(tr){tr.states.emphasis&&(tr.states.emphasis.hoverLayer=!0)})}})}function Gt(ne,pe){var ge=ne.get("blendMode")||null;pe.group.traverse(function(Se){Se.isGroup||(Se.style.blend=ge),Se.eachPendingDisplayable&&Se.eachPendingDisplayable(function(Ce){Ce.style.blend=ge})})}function re(ne,pe){ne.preventAutoZ||oe(pe.group,ne.get("z")||0,ne.get("zlevel")||0,-Infinity)}function oe(ne,pe,ge,Se){var Ce=ne.getTextContent(),Ye=ne.getTextGuideLine(),Qe=ne.isGroup;if(Qe)for(var tr=ne.childrenRef(),ar=0;ar<tr.length;ar++)Se=Math.max(oe(tr[ar],pe,ge,Se),Se);else ne.z=pe,ne.zlevel=ge,Se=Math.max(ne.z2,Se);if(Ce&&(Ce.z=pe,Ce.zlevel=ge,isFinite(Se)&&(Ce.z2=Se+2)),Ye){var Cr=ne.textGuideLineConfig;Ye.z=pe,Ye.zlevel=ge,isFinite(Se)&&(Ye.z2=Se+(Cr&&Cr.showAbove?1:-1))}return Se}function je(ne,pe){pe.group.traverse(function(ge){if(!fe.isElementRemoved(ge)){var Se=ge.getTextContent(),Ce=ge.getTextGuideLine();ge.stateTransition&&(ge.stateTransition=null),Se&&Se.stateTransition&&(Se.stateTransition=null),Ce&&Ce.stateTransition&&(Ce.stateTransition=null),ge.hasState()?(ge.prevStates=ge.currentStates,ge.clearStates()):ge.prevStates&&(ge.prevStates=null)}})}function Be(ne,pe){var ge=ne.getModel("stateAnimation"),Se=ne.isAnimationEnabled(),Ce=ge.get("duration"),Ye=Ce>0?{duration:Ce,delay:ge.get("delay"),easing:ge.get("easing")}:null;pe.group.traverse(function(Qe){if(Qe.states&&Qe.states.emphasis){if(fe.isElementRemoved(Qe))return;if(Qe instanceof be.b&&Object(Ve.E)(Qe),Qe.__dirty){var tr=Qe.prevStates;tr&&Qe.useStates(tr)}if(Se){Qe.stateTransition=Ye;var ar=Qe.getTextContent(),Cr=Qe.getTextGuideLine();ar&&(ar.stateTransition=Ye),Cr&&(Cr.stateTransition=Ye)}Qe.__dirty&&Lt(Qe)}})}Na=function(ne){return new(function(pe){Object(B.b)(ge,pe);function ge(){return pe!==null&&pe.apply(this,arguments)||this}return ge.prototype.getCoordinateSystems=function(){return ne._coordSysMgr.getCoordinateSystems()},ge.prototype.getComponentByElement=function(Se){for(;Se;){var Ce=Se.__ecComponentInfo;if(Ce!=null)return ne._model.getComponent(Ce.mainType,Ce.index);Se=Se.parent}},ge.prototype.enterEmphasis=function(Se,Ce){Object(Ve.r)(Se,Ce),gi(ne)},ge.prototype.leaveEmphasis=function(Se,Ce){Object(Ve.C)(Se,Ce),gi(ne)},ge.prototype.enterBlur=function(Se){Object(Ve.q)(Se),gi(ne)},ge.prototype.leaveBlur=function(Se){Object(Ve.B)(Se),gi(ne)},ge.prototype.enterSelect=function(Se){Object(Ve.s)(Se),gi(ne)},ge.prototype.leaveSelect=function(Se){Object(Ve.D)(Se),gi(ne)},ge.prototype.getModel=function(){return ne.getModel()},ge.prototype.getViewOfComponentModel=function(Se){return ne.getViewOfComponentModel(Se)},ge.prototype.getViewOfSeriesModel=function(Se){return ne.getViewOfSeriesModel(Se)},ge}(At))(ne)},ra=function(ne){function pe(ge,Se){for(var Ce=0;Ce<ge.length;Ce++){var Ye=ge[Ce];Ye[Ti]=Se}}pn(ya,function(ge,Se){ne._messageCenter.on(Se,function(Ce){if(jo[ne.group]&&ne[Ti]!==Ra){if(Ce&&Ce.escapeConnect)return;var Ye=ne.makeActionFromEvent(Ce),Qe=[];pn(Ei,function(tr){tr!==ne&&tr.group===ne.group&&Qe.push(tr)}),pe(Qe,Ra),pn(Qe,function(tr){tr[Ti]!==eo&&tr.dispatchAction(Ye)}),pe(Qe,ro)}})})},lu=function(ne,pe){var ge=ne._model;H.each(Q.r(pe),function(Se){var Ce,Ye=Se.from,Qe=Se.to;Qe==null&&Object(Ca.b)(Ce);var tr={includeMainTypes:["series"],enableAll:!1,enableNone:!1},ar=Ye?Q.s(ge,Ye,tr):null,Cr=Q.s(ge,Qe,tr),Rr=Cr.seriesModel;Rr==null&&(Ce=""),ar&&ar.seriesModel!==Rr&&(Ce=""),Ce!=null&&Object(Ca.b)(Ce),Rr.__transientTransitionOpt={from:Ye?Ye.dimension:null,to:Qe.dimension,dividingMethod:Se.dividingMethod}})}}(),Ft}(it.a),Di=Zn.prototype;Di.on=Xn("on"),Di.off=Xn("off"),Di.one=function(Nt,Ft,Lt){var Vt=this;Object(Ca.a)("ECharts#one is deprecated.");function Gt(){for(var re=[],oe=0;oe<arguments.length;oe++)re[oe]=arguments[oe];Ft&&Ft.apply&&Ft.apply(this,re),Vt.off(Nt,Gt)}this.on.call(this,Nt,Gt,Lt)};var ma=["click","dblclick","mouseover","mouseout","mousemove","mousedown","mouseup","globalout","contextmenu"];function Ci(Nt){}var xn={},ya={},Ui=[],vs=[],ds=[],Bo=[],Ba=[],na={},ja={},Ei={},jo={},zo=+new Date-0,Kn=+new Date-0,ll="_echarts_instance_";function Vn(Nt,Ft,Lt){var Vt=ao(Nt);if(Vt)return Vt;var Gt=new Zn(Nt,Ft,Lt);return Gt.id="ec_"+zo++,Ei[Gt.id]=Gt,Q.w(Nt,ll,Gt.id),ra(Gt),pn(ds,function(re){re(Gt)}),Gt}function An(Nt){if(H.isArray(Nt)){var Ft=Nt;Nt=null,pn(Ft,function(Lt){Lt.group!=null&&(Nt=Lt.group)}),Nt=Nt||"g_"+Kn++,pn(Ft,function(Lt){Lt.group=Nt})}return jo[Nt]=!0,Nt}function uu(Nt){jo[Nt]=!1}var ps=uu;function hn(Nt){typeof Nt=="string"?Nt=Ei[Nt]:Nt instanceof Zn||(Nt=ao(Nt)),Nt instanceof Zn&&!Nt.isDisposed()&&Nt.dispose()}function ao(Nt){return Ei[Q.g(Nt,ll)]}function Fo(Nt){return Ei[Nt]}function Vo(Nt,Ft){na[Nt]=Ft}function fu(Nt){Wr(vs,Nt)<0&&vs.push(Nt)}function gs(Nt,Ft){ai(Ui,Nt,Ft,pf)}function ms(Nt){Wr(ds,Nt)<0&&Nt&&ds.push(Nt)}function cu(Nt){Wr(Bo,Nt)<0&&Nt&&Bo.push(Nt)}function za(Nt,Ft,Lt){typeof Ft=="function"&&(Lt=Ft,Ft="");var Vt=Ea(Nt)?Nt.type:[Nt,Nt={event:Ft}][0];Nt.event=(Nt.event||Vt).toLowerCase(),Ft=Nt.event,!ya[Ft]&&(df(ol.test(Vt)&&ol.test(Ft)),xn[Vt]||(xn[Vt]={action:Lt,actionInfo:Nt}),ya[Ft]=Vt)}function Qc(Nt,Ft){rt.a.register(Nt,Ft)}function Jc(Nt){var Ft=rt.a.get(Nt);if(Ft)return Ft.getDimensionsInfo?Ft.getDimensionsInfo():Ft.dimensions.slice()}function Go(Nt,Ft){ai(Ba,Nt,Ft,Gr,"layout")}function Fa(Nt,Ft){ai(Ba,Nt,Ft,Pa,"visual")}var Bn=[];function ai(Nt,Ft,Lt,Vt,Gt){if((Eo(Ft)||Ea(Ft))&&(Lt=Ft,Ft=Vt),!(Wr(Bn,Lt)>=0)){Bn.push(Lt);var re=sr.wrapStageHandler(Lt,Gt);re.__prio=Ft,re.__raw=Lt,Nt.push(re)}}function gf(Nt,Ft){ja[Nt]=Ft}function vn(Nt){H.$override("createCanvas",Nt)}function Ir(Nt,Ft,Lt){fa.a.registerMap(Nt,Ft,Lt)}function hu(Nt){return fa.a.getMapForUser(Nt)}var mf=eu.b;Fa(La,Ur),Fa(to,Ne),Fa(to,tl),Fa(La,yn),Fa(to,nn),Fa(ki,qa),fu(Yt),gs(ca,Zt),gf("default",hf),za({type:Ve.c,event:Ve.c,update:Ve.c},H.noop),za({type:Ve.b,event:Ve.b,update:Ve.b},H.noop),za({type:Ve.f,event:Ve.f,update:Ve.f},H.noop),za({type:Ve.i,event:Ve.i,update:Ve.i},H.noop),za({type:Ve.h,event:Ve.h,update:Ve.h},H.noop),Vo("light",bi),Vo("dark",ji);var yf={}},GMDS:function(Ge,U,S){"use strict";var B=S("f66r"),mt=S("4NgU"),H=S("jkPA"),ht=S("lE7J"),y=S("bYtY"),ot=function(it){Object(B.b)(Q,it);function Q(Y){var G=it.call(this,Y)||this;G.type="ordinal";var q=G.getSetting("ordinalMeta");return q||(q=new H.a({})),Object(y.isArray)(q)&&(q=new H.a({categories:Object(y.map)(q,function(N){return Object(y.isObject)(N)?N.value:N})})),G._ordinalMeta=q,G._extent=G.getSetting("extent")||[0,q.categories.length-1],G}return Q.prototype.parse=function(Y){return typeof Y=="string"?this._ordinalMeta.getOrdinal(Y):Math.round(Y)},Q.prototype.contain=function(Y){return Y=this.parse(Y),ht.a(Y,this._extent)&&this._ordinalMeta.categories[Y]!=null},Q.prototype.normalize=function(Y){return Y=this._getTickNumber(this.parse(Y)),ht.d(Y,this._extent)},Q.prototype.scale=function(Y){return Y=Math.round(ht.e(Y,this._extent)),this.getRawOrdinalNumber(Y)},Q.prototype.getTicks=function(){for(var Y=[],G=this._extent,q=G[0];q<=G[1];)Y.push({value:q}),q++;return Y},Q.prototype.getMinorTicks=function(Y){},Q.prototype.setSortInfo=function(Y){if(Y==null){this._ordinalNumbersByTick=this._ticksByOrdinalNumber=null;return}for(var G=Y.ordinalNumbers,q=this._ordinalNumbersByTick=[],N=this._ticksByOrdinalNumber=[],V=0,lt=this._ordinalMeta.categories.length,at=Math.min(lt,G.length);V<at;++V){var gt=G[V];q[V]=gt,N[gt]=V}for(var Tt=0;V<lt;++V){for(;N[Tt]!=null;)Tt++;q.push(Tt),N[Tt]=V}},Q.prototype._getTickNumber=function(Y){var G=this._ticksByOrdinalNumber;return G&&Y>=0&&Y<G.length?G[Y]:Y},Q.prototype.getRawOrdinalNumber=function(Y){var G=this._ordinalNumbersByTick;return G&&Y>=0&&Y<G.length?G[Y]:Y},Q.prototype.getLabel=function(Y){if(!this.isBlank()){var G=this.getRawOrdinalNumber(Y.value),q=this._ordinalMeta.categories[G];return q==null?"":q+""}},Q.prototype.count=function(){return this._extent[1]-this._extent[0]+1},Q.prototype.unionExtentFromData=function(Y,G){this.unionExtent(Y.getApproximateExtent(G))},Q.prototype.isInExtentRange=function(Y){return Y=this._getTickNumber(Y),this._extent[0]<=Y&&this._extent[1]>=Y},Q.prototype.getOrdinalMeta=function(){return this._ordinalMeta},Q.prototype.niceTicks=function(){},Q.prototype.niceExtent=function(){},Q.type="ordinal",Q}(mt.a);mt.a.registerClass(ot),U.a=ot},Gev7:function(Ge,U,S){"use strict";S.d(U,"b",function(){return ot}),S.d(U,"a",function(){return it});var B=S("IaEH"),mt=S("1bdT"),H=S("mFDi"),ht=S("bYtY"),y="__zr_style_"+Math.round(Math.random()*10),ot={shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,shadowColor:"#000",opacity:1,blend:"source-over"},it={style:{shadowBlur:!0,shadowOffsetX:!0,shadowOffsetY:!0,shadowColor:!0,opacity:!0}};ot[y]=!0;var Q=["z","z2","invisible"],Y=function(V){Object(B.a)(lt,V);function lt(at){return V.call(this,at)||this}return lt.prototype._init=function(at){for(var gt=Object(ht.keys)(at),Tt=0;Tt<gt.length;Tt++){var bt=gt[Tt];bt==="style"?this.useStyle(at[bt]):V.prototype.attrKV.call(this,bt,at[bt])}this.style||this.useStyle({})},lt.prototype.beforeBrush=function(){},lt.prototype.afterBrush=function(){},lt.prototype.innerBeforeBrush=function(){},lt.prototype.innerAfterBrush=function(){},lt.prototype.shouldBePainted=function(at,gt,Tt,bt){var nt=this.transform;if(this.ignore||this.invisible||this.style.opacity===0||this.culling&&N(this,at,gt)||nt&&!nt[0]&&!nt[3])return!1;if(Tt&&this.__clipPaths){for(var W=0;W<this.__clipPaths.length;++W)if(this.__clipPaths[W].isZeroArea())return!1}if(bt&&this.parent)for(var X=this.parent;X;){if(X.ignore)return!1;X=X.parent}return!0},lt.prototype.contain=function(at,gt){return this.rectContain(at,gt)},lt.prototype.traverse=function(at,gt){at.call(gt,this)},lt.prototype.rectContain=function(at,gt){var Tt=this.transformCoordToLocal(at,gt),bt=this.getBoundingRect();return bt.contain(Tt[0],Tt[1])},lt.prototype.getPaintRect=function(){var at=this._paintRect;if(!this._paintRect||this.__dirty){var gt=this.transform,Tt=this.getBoundingRect(),bt=this.style,nt=bt.shadowBlur||0,W=bt.shadowOffsetX||0,X=bt.shadowOffsetY||0;at=this._paintRect||(this._paintRect=new H.a(0,0,0,0)),gt?H.a.applyTransform(at,Tt,gt):at.copy(Tt),(nt||W||X)&&(at.width+=nt*2+Math.abs(W),at.height+=nt*2+Math.abs(X),at.x=Math.min(at.x,at.x+W-nt),at.y=Math.min(at.y,at.y+X-nt));var et=this.dirtyRectTolerance;at.isZero()||(at.x=Math.floor(at.x-et),at.y=Math.floor(at.y-et),at.width=Math.ceil(at.width+1+et*2),at.height=Math.ceil(at.height+1+et*2))}return at},lt.prototype.setPrevPaintRect=function(at){at?(this._prevPaintRect=this._prevPaintRect||new H.a(0,0,0,0),this._prevPaintRect.copy(at)):this._prevPaintRect=null},lt.prototype.getPrevPaintRect=function(){return this._prevPaintRect},lt.prototype.animateStyle=function(at){return this.animate("style",at)},lt.prototype.updateDuringAnimation=function(at){at==="style"?this.dirtyStyle():this.markRedraw()},lt.prototype.attrKV=function(at,gt){at!=="style"?V.prototype.attrKV.call(this,at,gt):this.style?this.setStyle(gt):this.useStyle(gt)},lt.prototype.setStyle=function(at,gt){return typeof at=="string"?this.style[at]=gt:Object(ht.extend)(this.style,at),this.dirtyStyle(),this},lt.prototype.dirtyStyle=function(){this.markRedraw(),this.__dirty|=lt.STYLE_CHANGED_BIT,this._rect&&(this._rect=null)},lt.prototype.dirty=function(){this.dirtyStyle()},lt.prototype.styleChanged=function(){return!!(this.__dirty&lt.STYLE_CHANGED_BIT)},lt.prototype.styleUpdated=function(){this.__dirty&=~lt.STYLE_CHANGED_BIT},lt.prototype.createStyle=function(at){return Object(ht.createObject)(ot,at)},lt.prototype.useStyle=function(at){at[y]||(at=this.createStyle(at)),this.__inHover?this.__hoverStyle=at:this.style=at,this.dirtyStyle()},lt.prototype.isStyleObject=function(at){return at[y]},lt.prototype._innerSaveToNormal=function(at){V.prototype._innerSaveToNormal.call(this,at);var gt=this._normalState;at.style&&!gt.style&&(gt.style=this._mergeStyle(this.createStyle(),this.style)),this._savePrimaryToNormal(at,gt,Q)},lt.prototype._applyStateObj=function(at,gt,Tt,bt,nt,W){V.prototype._applyStateObj.call(this,at,gt,Tt,bt,nt,W);var X=!(gt&&bt),et;if(gt&&gt.style?nt?bt?et=gt.style:(et=this._mergeStyle(this.createStyle(),Tt.style),this._mergeStyle(et,gt.style)):(et=this._mergeStyle(this.createStyle(),bt?this.style:Tt.style),this._mergeStyle(et,gt.style)):X&&(et=Tt.style),et)if(nt){var k=this.style;if(this.style=this.createStyle(X?{}:k),X)for(var st=Object(ht.keys)(k),$=0;$<st.length;$++){var D=st[$];D in et&&(et[D]=et[D],this.style[D]=k[D])}for(var T=Object(ht.keys)(et),$=0;$<T.length;$++){var D=T[$];this.style[D]=this.style[D]}this._transitionState(at,{style:et},W,this.getAnimationStyleProps())}else this.useStyle(et);for(var $=0;$<Q.length;$++){var D=Q[$];gt&&gt[D]!=null?this[D]=gt[D]:X&&Tt[D]!=null&&(this[D]=Tt[D])}},lt.prototype._mergeStates=function(at){for(var gt=V.prototype._mergeStates.call(this,at),Tt,bt=0;bt<at.length;bt++){var nt=at[bt];nt.style&&(Tt=Tt||{},this._mergeStyle(Tt,nt.style))}return Tt&&(gt.style=Tt),gt},lt.prototype._mergeStyle=function(at,gt){return Object(ht.extend)(at,gt),at},lt.prototype.getAnimationStyleProps=function(){return it},lt.STYLE_CHANGED_BIT=2,lt.initDefaultProps=function(){var at=lt.prototype;at.type="displayable",at.invisible=!1,at.z=0,at.z2=0,at.zlevel=0,at.culling=!1,at.cursor="pointer",at.rectHover=!1,at.incremental=!1,at._rect=null,at.dirtyRectTolerance=0,at.__dirty=mt.a.REDARAW_BIT|lt.STYLE_CHANGED_BIT}(),lt}(mt.a),G=new H.a(0,0,0,0),q=new H.a(0,0,0,0);function N(V,lt,at){return G.copy(V.getBoundingRect()),V.transform&&G.applyTransform(V.transform),q.width=lt,q.height=at,!G.intersect(q)}U.c=Y},HznI:function(Ge,U,S){"use strict";var B=S("bYtY"),mt={},H=function(){function ht(){this._coordinateSystems=[]}return ht.prototype.create=function(y,ot){var it=[];B.each(mt,function(Q,Y){var G=Q.create(y,ot);it=it.concat(G||[])}),this._coordinateSystems=it},ht.prototype.update=function(y,ot){B.each(this._coordinateSystems,function(it){it.update&&it.update(y,ot)})},ht.prototype.getCoordinateSystems=function(){return this._coordinateSystems.slice()},ht.register=function(y,ot){mt[y]=ot},ht.get=function(y){return mt[y]},ht}();U.a=H},I1WP:function(Ge,U,S){"use strict";S.d(U,"b",function(){return H}),S.d(U,"c",function(){return y}),S.d(U,"d",function(){return ot}),S.d(U,"a",function(){return it});var B=S("yoD8"),mt=S("mFDi");function H(Q){for(var Y=[],G=0;G<Q.length;G++){var q=Q[G];if(!q.defaultAttr.ignore){var N=q.label,V=N.getComputedTransform(),lt=N.getBoundingRect(),at=!V||V[1]<1e-5&&V[2]<1e-5,gt=N.style.margin||0,Tt=lt.clone();Tt.applyTransform(V),Tt.x-=gt/2,Tt.y-=gt/2,Tt.width+=gt,Tt.height+=gt;var bt=at?new B.a(lt,V):null;Y.push({label:N,labelLine:q.labelLine,rect:Tt,localRect:lt,obb:bt,priority:q.priority,defaultAttr:q.defaultAttr,layoutOption:q.computedLayoutOption,axisAligned:at,transform:V})}}return Y}function ht(Q,Y,G,q,N,V){var lt=Q.length;if(lt<2)return;Q.sort(function(pt,At){return pt.rect[Y]-At.rect[Y]});for(var at=0,gt,Tt=!1,bt=[],nt=0,W=0;W<lt;W++){var X=Q[W],et=X.rect;gt=et[Y]-at,gt<0&&(et[Y]-=gt,X.label[Y]-=gt,Tt=!0);var k=Math.max(-gt,0);bt.push(k),nt+=k,at=et[Y]+et[G]}nt>0&&V&&L(-nt/lt,0,lt);var st=Q[0],$=Q[lt-1],D,T;O(),D<0&&w(-D,.8),T<0&&w(T,.8),O(),C(D,T,1),C(T,D,-1),O(),D<0&&z(-D),T<0&&z(T);function O(){D=st.rect[Y]-q,T=N-$.rect[Y]-$.rect[G]}function C(pt,At,rt){if(pt<0){var _t=Math.min(At,-pt);if(_t>0){L(_t*rt,0,lt);var xt=_t+pt;xt<0&&w(-xt*rt,1)}else w(-pt*rt,1)}}function L(pt,At,rt){pt!==0&&(Tt=!0);for(var _t=At;_t<rt;_t++){var xt=Q[_t],ft=xt.rect;ft[Y]+=pt,xt.label[Y]+=pt}}function w(pt,At){for(var rt=[],_t=0,xt=1;xt<lt;xt++){var ft=Q[xt-1].rect,Mt=Math.max(Q[xt].rect[Y]-ft[Y]-ft[G],0);rt.push(Mt),_t+=Mt}if(!!_t){var K=Math.min(Math.abs(pt)/_t,At);if(pt>0)for(var xt=0;xt<lt-1;xt++){var R=rt[xt]*K;L(R,0,xt+1)}else for(var xt=lt-1;xt>0;xt--){var R=rt[xt-1]*K;L(-R,xt,lt)}}}function z(pt){var At=pt<0?-1:1;pt=Math.abs(pt);for(var rt=Math.ceil(pt/(lt-1)),_t=0;_t<lt-1;_t++)if(At>0?L(rt,0,_t+1):L(-rt,lt-_t-1,lt),pt-=rt,pt<=0)return}return Tt}function y(Q,Y,G,q){return ht(Q,"x","width",Y,G,q)}function ot(Q,Y,G,q){return ht(Q,"y","height",Y,G,q)}function it(Q){var Y=[];Q.sort(function(k,st){return st.priority-k.priority});var G=new mt.a(0,0,0,0);function q(k){if(!k.ignore){var st=k.ensureState("emphasis");st.ignore==null&&(st.ignore=!1)}k.ignore=!0}for(var N=0;N<Q.length;N++){var V=Q[N],lt=V.axisAligned,at=V.localRect,gt=V.transform,Tt=V.label,bt=V.labelLine;G.copy(V.rect),G.width-=.1,G.height-=.1,G.x+=.05,G.y+=.05;for(var nt=V.obb,W=!1,X=0;X<Y.length;X++){var et=Y[X];if(!!G.intersect(et.rect)){if(lt&&et.axisAligned){W=!0;break}if(et.obb||(et.obb=new B.a(et.localRect,et.transform)),nt||(nt=new B.a(at,gt)),nt.intersect(et.obb)){W=!0;break}}}W?(q(Tt),bt&&q(bt)):(Tt.attr("ignore",V.defaultAttr.ignore),bt&&bt.attr("ignore",V.defaultAttr.labelGuideIgnore),Y.push(V))}}},ICMv:function(Ge,U,S){"use strict";S.d(U,"a",function(){return B});var B=function(){function mt(){}return mt.prototype.getNeedCrossZero=function(){var H=this.option;return!H.scale},mt.prototype.getCoordSysModel=function(){},mt}()},IMiH:function(Ge,U,S){"use strict";S.d(U,"b",function(){return st});var B=S("QBsz"),mt=S("mFDi"),H=S("LPTA"),ht=S("4mN7"),y=S("Sj9i"),ot={M:1,L:2,C:3,Q:4,A:5,Z:6,R:7},it=[],Q=[],Y=[],G=[],q=[],N=[],V=Math.min,lt=Math.max,at=Math.cos,gt=Math.sin,Tt=Math.sqrt,bt=Math.abs,nt=Math.PI,W=nt*2,X=typeof Float32Array!="undefined",et=[];function k(D){var T=Math.round(D/nt*1e8)/1e8;return T%2*nt}function st(D,T){var O=k(D[0]);O<0&&(O+=W);var C=O-D[0],L=D[1];L+=C,!T&&L-O>=W?L=O+W:T&&O-L>=W?L=O-W:!T&&O>L?L=O+(W-k(O-L)):T&&O<L&&(L=O-(W-k(L-O))),D[0]=O,D[1]=L}var $=function(){function D(T){this.dpr=1,this._version=0,this._xi=0,this._yi=0,this._x0=0,this._y0=0,this._len=0,T&&(this._saveData=!1),this._saveData&&(this.data=[])}return D.prototype.increaseVersion=function(){this._version++},D.prototype.getVersion=function(){return this._version},D.prototype.setScale=function(T,O,C){C=C||0,C>0&&(this._ux=bt(C/H.e/T)||0,this._uy=bt(C/H.e/O)||0)},D.prototype.setDPR=function(T){this.dpr=T},D.prototype.setContext=function(T){this._ctx=T},D.prototype.getContext=function(){return this._ctx},D.prototype.beginPath=function(){return this._ctx&&this._ctx.beginPath(),this.reset(),this},D.prototype.reset=function(){this._saveData&&(this._len=0),this._lineDash&&(this._lineDash=null,this._dashOffset=0),this._pathSegLen&&(this._pathSegLen=null,this._pathLen=0),this._version++},D.prototype.moveTo=function(T,O){return this.addData(ot.M,T,O),this._ctx&&this._ctx.moveTo(T,O),this._x0=T,this._y0=O,this._xi=T,this._yi=O,this},D.prototype.lineTo=function(T,O){var C=bt(T-this._xi)>this._ux||bt(O-this._yi)>this._uy||this._len<5;return this.addData(ot.L,T,O),this._ctx&&C&&(this._needsDash?this._dashedLineTo(T,O):this._ctx.lineTo(T,O)),C&&(this._xi=T,this._yi=O),this},D.prototype.bezierCurveTo=function(T,O,C,L,w,z){return this.addData(ot.C,T,O,C,L,w,z),this._ctx&&(this._needsDash?this._dashedBezierTo(T,O,C,L,w,z):this._ctx.bezierCurveTo(T,O,C,L,w,z)),this._xi=w,this._yi=z,this},D.prototype.quadraticCurveTo=function(T,O,C,L){return this.addData(ot.Q,T,O,C,L),this._ctx&&(this._needsDash?this._dashedQuadraticTo(T,O,C,L):this._ctx.quadraticCurveTo(T,O,C,L)),this._xi=C,this._yi=L,this},D.prototype.arc=function(T,O,C,L,w,z){et[0]=L,et[1]=w,st(et,z),L=et[0],w=et[1];var pt=w-L;return this.addData(ot.A,T,O,C,C,L,pt,0,z?0:1),this._ctx&&this._ctx.arc(T,O,C,L,w,z),this._xi=at(w)*C+T,this._yi=gt(w)*C+O,this},D.prototype.arcTo=function(T,O,C,L,w){return this._ctx&&this._ctx.arcTo(T,O,C,L,w),this},D.prototype.rect=function(T,O,C,L){return this._ctx&&this._ctx.rect(T,O,C,L),this.addData(ot.R,T,O,C,L),this},D.prototype.closePath=function(){this.addData(ot.Z);var T=this._ctx,O=this._x0,C=this._y0;return T&&(this._needsDash&&this._dashedLineTo(O,C),T.closePath()),this._xi=O,this._yi=C,this},D.prototype.fill=function(T){T&&T.fill(),this.toStatic()},D.prototype.stroke=function(T){T&&T.stroke(),this.toStatic()},D.prototype.setLineDash=function(T){if(T instanceof Array){this._lineDash=T,this._dashIdx=0;for(var O=0,C=0;C<T.length;C++)O+=T[C];this._dashSum=O,this._needsDash=!0}else this._lineDash=null,this._needsDash=!1;return this},D.prototype.setLineDashOffset=function(T){return this._dashOffset=T,this},D.prototype.len=function(){return this._len},D.prototype.setData=function(T){var O=T.length;!(this.data&&this.data.length===O)&&X&&(this.data=new Float32Array(O));for(var C=0;C<O;C++)this.data[C]=T[C];this._len=O},D.prototype.appendPath=function(T){T instanceof Array||(T=[T]);for(var O=T.length,C=0,L=this._len,w=0;w<O;w++)C+=T[w].len();X&&this.data instanceof Float32Array&&(this.data=new Float32Array(L+C));for(var w=0;w<O;w++)for(var z=T[w].data,pt=0;pt<z.length;pt++)this.data[L++]=z[pt];this._len=L},D.prototype.addData=function(T,O,C,L,w,z,pt,At,rt){if(!!this._saveData){var _t=this.data;this._len+arguments.length>_t.length&&(this._expandData(),_t=this.data);for(var xt=0;xt<arguments.length;xt++)_t[this._len++]=arguments[xt]}},D.prototype._expandData=function(){if(!(this.data instanceof Array)){for(var T=[],O=0;O<this._len;O++)T[O]=this.data[O];this.data=T}},D.prototype._dashedLineTo=function(T,O){var C=this._dashSum,L=this._lineDash,w=this._ctx,z=this._dashOffset,pt=this._xi,At=this._yi,rt=T-pt,_t=O-At,xt=Tt(rt*rt+_t*_t),ft=pt,Mt=At,K=L.length,R,tt;for(rt/=xt,_t/=xt,z<0&&(z=C+z),z%=C,ft-=z*rt,Mt-=z*_t;rt>0&&ft<=T||rt<0&&ft>=T||rt===0&&(_t>0&&Mt<=O||_t<0&&Mt>=O);)tt=this._dashIdx,R=L[tt],ft+=rt*R,Mt+=_t*R,this._dashIdx=(tt+1)%K,!(rt>0&&ft<pt||rt<0&&ft>pt||_t>0&&Mt<At||_t<0&&Mt>At)&&w[tt%2?"moveTo":"lineTo"](rt>=0?V(ft,T):lt(ft,T),_t>=0?V(Mt,O):lt(Mt,O));rt=ft-T,_t=Mt-O,this._dashOffset=-Tt(rt*rt+_t*_t)},D.prototype._dashedBezierTo=function(T,O,C,L,w,z){var pt=this._ctx,At=this._dashSum,rt=this._dashOffset,_t=this._lineDash,xt=this._xi,ft=this._yi,Mt=0,K=this._dashIdx,R=_t.length,tt,Z,ct,vt,Ct,Bt=0;for(rt<0&&(rt=At+rt),rt%=At,tt=0;tt<1;tt+=.1)Z=Object(y.a)(xt,T,C,w,tt+.1)-Object(y.a)(xt,T,C,w,tt),ct=Object(y.a)(ft,O,L,z,tt+.1)-Object(y.a)(ft,O,L,z,tt),Mt+=Tt(Z*Z+ct*ct);for(;K<R&&(Bt+=_t[K],!(Bt>rt));K++);for(tt=(Bt-rt)/Mt;tt<=1;)vt=Object(y.a)(xt,T,C,w,tt),Ct=Object(y.a)(ft,O,L,z,tt),K%2?pt.moveTo(vt,Ct):pt.lineTo(vt,Ct),tt+=_t[K]/Mt,K=(K+1)%R;K%2!=0&&pt.lineTo(w,z),Z=w-vt,ct=z-Ct,this._dashOffset=-Tt(Z*Z+ct*ct)},D.prototype._dashedQuadraticTo=function(T,O,C,L){var w=C,z=L;C=(C+2*T)/3,L=(L+2*O)/3,T=(this._xi+2*T)/3,O=(this._yi+2*O)/3,this._dashedBezierTo(T,O,C,L,w,z)},D.prototype.toStatic=function(){if(!!this._saveData){var T=this.data;T instanceof Array&&(T.length=this._len,X&&this._len>11&&(this.data=new Float32Array(T)))}},D.prototype.getBoundingRect=function(){Y[0]=Y[1]=q[0]=q[1]=Number.MAX_VALUE,G[0]=G[1]=N[0]=N[1]=-Number.MAX_VALUE;var T=this.data,O=0,C=0,L=0,w=0,z;for(z=0;z<this._len;){var pt=T[z++],At=z===1;switch(At&&(O=T[z],C=T[z+1],L=O,w=C),pt){case ot.M:O=L=T[z++],C=w=T[z++],q[0]=L,q[1]=w,N[0]=L,N[1]=w;break;case ot.L:Object(ht.c)(O,C,T[z],T[z+1],q,N),O=T[z++],C=T[z++];break;case ot.C:Object(ht.b)(O,C,T[z++],T[z++],T[z++],T[z++],T[z],T[z+1],q,N),O=T[z++],C=T[z++];break;case ot.Q:Object(ht.e)(O,C,T[z++],T[z++],T[z],T[z+1],q,N),O=T[z++],C=T[z++];break;case ot.A:var rt=T[z++],_t=T[z++],xt=T[z++],ft=T[z++],Mt=T[z++],K=T[z++]+Mt;z+=1;var R=!T[z++];At&&(L=at(Mt)*xt+rt,w=gt(Mt)*ft+_t),Object(ht.a)(rt,_t,xt,ft,Mt,K,R,q,N),O=at(K)*xt+rt,C=gt(K)*ft+_t;break;case ot.R:L=O=T[z++],w=C=T[z++];var tt=T[z++],Z=T[z++];Object(ht.c)(L,w,L+tt,w+Z,q,N);break;case ot.Z:O=L,C=w;break}B.min(Y,Y,q),B.max(G,G,N)}return z===0&&(Y[0]=Y[1]=G[0]=G[1]=0),new mt.a(Y[0],Y[1],G[0]-Y[0],G[1]-Y[1])},D.prototype._calculateLength=function(){var T=this.data,O=this._len,C=this._ux,L=this._uy,w=0,z=0,pt=0,At=0;this._pathSegLen||(this._pathSegLen=[]);for(var rt=this._pathSegLen,_t=0,xt=0,ft=0;ft<O;){var Mt=T[ft++],K=ft===1;K&&(w=T[ft],z=T[ft+1],pt=w,At=z);var R=-1;switch(Mt){case ot.M:w=pt=T[ft++],z=At=T[ft++];break;case ot.L:{var tt=T[ft++],Z=T[ft++],ct=tt-w,vt=Z-z;(bt(ct)>C||bt(vt)>L||ft===O-1)&&(R=Math.sqrt(ct*ct+vt*vt),w=tt,z=Z);break}case ot.C:{var Ct=T[ft++],Bt=T[ft++],tt=T[ft++],Z=T[ft++],It=T[ft++],Wt=T[ft++];R=Object(y.d)(w,z,Ct,Bt,tt,Z,It,Wt,10),w=It,z=Wt;break}case ot.Q:{var Ct=T[ft++],Bt=T[ft++],tt=T[ft++],Z=T[ft++];R=Object(y.k)(w,z,Ct,Bt,tt,Z,10),w=tt,z=Z;break}case ot.A:var ee=T[ft++],ae=T[ft++],ye=T[ft++],Le=T[ft++],_e=T[ft++],De=T[ft++],er=De+_e;ft+=1;var Ie=!T[ft++];K&&(pt=at(_e)*ye+ee,At=gt(_e)*Le+ae),R=lt(ye,Le)*V(W,Math.abs(De)),w=at(er)*ye+ee,z=gt(er)*Le+ae;break;case ot.R:{pt=w=T[ft++],At=z=T[ft++];var Fe=T[ft++],He=T[ft++];R=Fe*2+He*2;break}case ot.Z:{var ct=pt-w,vt=At-z;R=Math.sqrt(ct*ct+vt*vt),w=pt,z=At;break}}R>=0&&(rt[xt++]=R,_t+=R)}return this._pathLen=_t,_t},D.prototype.rebuildPath=function(T,O){var C=this.data,L=this._ux,w=this._uy,z=this._len,pt,At,rt,_t,xt,ft,Mt=O<1,K,R,tt=0,Z=0,ct;if(Mt&&(this._pathSegLen||this._calculateLength(),K=this._pathSegLen,R=this._pathLen,ct=O*R,!ct))return;t:for(var vt=0;vt<z;){var Ct=C[vt++],Bt=vt===1;switch(Bt&&(rt=C[vt],_t=C[vt+1],pt=rt,At=_t),Ct){case ot.M:pt=rt=C[vt++],At=_t=C[vt++],T.moveTo(rt,_t);break;case ot.L:{if(xt=C[vt++],ft=C[vt++],bt(xt-rt)>L||bt(ft-_t)>w||vt===z-1){if(Mt){var It=K[Z++];if(tt+It>ct){var Wt=(ct-tt)/It;T.lineTo(rt*(1-Wt)+xt*Wt,_t*(1-Wt)+ft*Wt);break t}tt+=It}T.lineTo(xt,ft),rt=xt,_t=ft}break}case ot.C:{var ee=C[vt++],ae=C[vt++],ye=C[vt++],Le=C[vt++],_e=C[vt++],De=C[vt++];if(Mt){var It=K[Z++];if(tt+It>ct){var Wt=(ct-tt)/It;Object(y.g)(rt,ee,ye,_e,Wt,it),Object(y.g)(_t,ae,Le,De,Wt,Q),T.bezierCurveTo(it[1],Q[1],it[2],Q[2],it[3],Q[3]);break t}tt+=It}T.bezierCurveTo(ee,ae,ye,Le,_e,De),rt=_e,_t=De;break}case ot.Q:{var ee=C[vt++],ae=C[vt++],ye=C[vt++],Le=C[vt++];if(Mt){var It=K[Z++];if(tt+It>ct){var Wt=(ct-tt)/It;Object(y.n)(rt,ee,ye,Wt,it),Object(y.n)(_t,ae,Le,Wt,Q),T.quadraticCurveTo(it[1],Q[1],it[2],Q[2]);break t}tt+=It}T.quadraticCurveTo(ee,ae,ye,Le),rt=ye,_t=Le;break}case ot.A:var er=C[vt++],Ie=C[vt++],Fe=C[vt++],He=C[vt++],ur=C[vt++],br=C[vt++],kr=C[vt++],Xe=!C[vt++],Ut=Fe>He?Fe:He,Qt=Fe>He?1:Fe/He,Yt=Fe>He?He/Fe:1,Zt=bt(Fe-He)>.001,ce=ur+br,xe=!1;if(Mt){var It=K[Z++];tt+It>ct&&(ce=ur+br*(ct-tt)/It,xe=!0),tt+=It}if(Zt&&T.ellipse?T.ellipse(er,Ie,Fe,He,kr,ur,ce,Xe):T.arc(er,Ie,Ut,ur,ce,Xe),xe)break t;Bt&&(pt=at(ur)*Fe+er,At=gt(ur)*He+Ie),rt=at(ce)*Fe+er,_t=gt(ce)*He+Ie;break;case ot.R:pt=rt=C[vt],At=_t=C[vt+1],xt=C[vt++],ft=C[vt++];var Kt=C[vt++],Rt=C[vt++];if(Mt){var It=K[Z++];if(tt+It>ct){var Jt=ct-tt;T.moveTo(xt,ft),T.lineTo(xt+V(Jt,Kt),ft),Jt-=Kt,Jt>0&&T.lineTo(xt+Kt,ft+V(Jt,Rt)),Jt-=Rt,Jt>0&&T.lineTo(xt+lt(Kt-Jt,0),ft+Rt),Jt-=Kt,Jt>0&&T.lineTo(xt,ft+lt(Rt-Jt,0));break t}tt+=It}T.rect(xt,ft,Kt,Rt);break;case ot.Z:if(Mt){var It=K[Z++];if(tt+It>ct){var Wt=(ct-tt)/It;T.lineTo(rt*(1-Wt)+pt*Wt,_t*(1-Wt)+At*Wt);break t}tt+=It}T.closePath(),rt=pt,_t=At}}},D.CMD=ot,D.initDefaultProps=function(){var T=D.prototype;T._saveData=!0,T._needsDash=!1,T._dashOffset=0,T._dashIdx=0,T._dashSum=0,T._ux=0,T._uy=0}(),D}();U.a=$},IWp7:function(Ge,U,S){"use strict";var B=S("f66r"),mt=S("OELB"),H=S("+Hau"),ht=S("lE7J"),y=S("ieMj"),ot=S("4NgU"),it=S("bYtY"),Q=function(nt,W,X,et){for(;X<et;){var k=X+et>>>1;nt[k][1]<W?X=k+1:et=k}return X},Y=function(nt){Object(B.b)(W,nt);function W(X){var et=nt.call(this,X)||this;return et.type="time",et}return W.prototype.getLabel=function(X){var et=this.getSetting("useUTC");return Object(H.h)(X.value,H.i[Object(H.l)(Object(H.m)(this._minLevelUnit))]||H.i.second,et,this.getSetting("locale"))},W.prototype.getFormattedLabel=function(X,et,k){var st=this.getSetting("useUTC"),$=this.getSetting("locale");return Object(H.r)(X,et,k,$,st)},W.prototype.getTicks=function(X){var et=this._interval,k=this._extent,st=[];if(!et)return st;st.push({value:k[0],level:0});var $=this.getSetting("useUTC"),D=bt(this._minLevelUnit,this._approxInterval,$,k);return st=st.concat(D),st.push({value:k[1],level:0}),st},W.prototype.niceExtent=function(X){var et=this._extent;if(et[0]===et[1]&&(et[0]-=H.a,et[1]+=H.a),et[1]===-Infinity&&et[0]===Infinity){var k=new Date;et[1]=+new Date(k.getFullYear(),k.getMonth(),k.getDate()),et[0]=et[1]-H.a}this.niceTicks(X.splitNumber,X.minInterval,X.maxInterval)},W.prototype.niceTicks=function(X,et,k){X=X||10;var st=this._extent,$=st[1]-st[0];this._approxInterval=$/X,et!=null&&this._approxInterval<et&&(this._approxInterval=et),k!=null&&this._approxInterval>k&&(this._approxInterval=k);var D=G.length,T=Math.min(Q(G,this._approxInterval,0,D),D-1);this._interval=G[T][1],this._minLevelUnit=G[Math.max(T-1,0)][0]},W.prototype.parse=function(X){return typeof X=="number"?X:+mt.n(X)},W.prototype.contain=function(X){return ht.a(this.parse(X),this._extent)},W.prototype.normalize=function(X){return ht.d(this.parse(X),this._extent)},W.prototype.scale=function(X){return ht.e(X,this._extent)},W.type="time",W}(y.a),G=[["second",H.d],["minute",H.c],["hour",H.b],["quarter-day",H.b*6],["half-day",H.b*12],["day",H.a*1.2],["half-week",H.a*3.5],["week",H.a*7],["month",H.a*31],["quarter",H.a*95],["half-year",H.e/2],["year",H.e]];function q(nt,W,X,et){var k=mt.n(W),st=mt.n(X),$=function(pt){return Object(H.n)(k,pt,et)===Object(H.n)(st,pt,et)},D=function(){return $("year")},T=function(){return D()&&$("month")},O=function(){return T()&&$("day")},C=function(){return O()&&$("hour")},L=function(){return C()&&$("minute")},w=function(){return L()&&$("second")},z=function(){return w()&&$("millisecond")};switch(nt){case"year":return D();case"month":return T();case"day":return O();case"hour":return C();case"minute":return L();case"second":return w();case"millisecond":return z()}}function N(nt,W){return nt/=H.a,nt>16?16:nt>7.5?7:nt>3.5?4:nt>1.5?2:1}function V(nt){var W=30*H.a;return nt/=W,nt>6?6:nt>3?3:nt>2?2:1}function lt(nt){return nt/=H.b,nt>12?12:nt>6?6:nt>3.5?4:nt>2?2:1}function at(nt,W){return nt/=W?H.c:H.d,nt>30?30:nt>20?20:nt>15?15:nt>10?10:nt>5?5:nt>2?2:1}function gt(nt){return mt.l(nt,!0)}function Tt(nt,W,X){var et=new Date(nt);switch(Object(H.m)(W)){case"year":case"month":et[Object(H.x)(X)](0);case"day":et[Object(H.g)(X)](1);case"hour":et[Object(H.p)(X)](0);case"minute":et[Object(H.v)(X)](0);case"second":et[Object(H.A)(X)](0),et[Object(H.t)(X)](0)}return et.getTime()}function bt(nt,W,X,et){var k=1e4,st=H.B,$=0;function D(vt,Ct,Bt,It,Wt,ee,ae){for(var ye=new Date(Ct),Le=Ct,_e=ye[It]();Le<Bt&&Le<=et[1];)ae.push({value:Le}),_e+=vt,ye[Wt](_e),Le=ye.getTime();ae.push({value:Le,notAdd:!0})}function T(vt,Ct,Bt){var It=[],Wt=!Ct.length;if(!q(Object(H.m)(vt),et[0],et[1],X)){Wt&&(Ct=[{value:Tt(new Date(et[0]),vt,X)},{value:et[1]}]);for(var ee=0;ee<Ct.length-1;ee++){var ae=Ct[ee].value,ye=Ct[ee+1].value;if(ae!==ye){var Le=void 0,_e=void 0,De=void 0,er=!1;switch(vt){case"year":Le=Math.max(1,Math.round(W/H.a/365)),_e=Object(H.j)(X),De=Object(H.k)(X);break;case"half-year":case"quarter":case"month":Le=V(W),_e=Object(H.w)(X),De=Object(H.x)(X);break;case"week":case"half-week":case"day":Le=N(W,31),_e=Object(H.f)(X),De=Object(H.g)(X),er=!0;break;case"half-day":case"quarter-day":case"hour":Le=lt(W),_e=Object(H.o)(X),De=Object(H.p)(X);break;case"minute":Le=at(W,!0),_e=Object(H.u)(X),De=Object(H.v)(X);break;case"second":Le=at(W,!1),_e=Object(H.z)(X),De=Object(H.A)(X);break;case"millisecond":Le=gt(W),_e=Object(H.s)(X),De=Object(H.t)(X);break}D(Le,ae,ye,_e,De,er,It),vt==="year"&&Bt.length>1&&ee===0&&Bt.unshift({value:Bt[0].value-Le})}}for(var ee=0;ee<It.length;ee++)Bt.push(It[ee]);return It}}for(var O=[],C=[],L=0,w=0,z=0;z<st.length&&$++<k;++z){var pt=Object(H.m)(st[z]);if(!!Object(H.q)(st[z])){T(st[z],O[O.length-1]||[],C);var At=st[z+1]?Object(H.m)(st[z+1]):null;if(pt!==At){if(C.length){w=L,C.sort(function(vt,Ct){return vt.value-Ct.value});for(var rt=[],_t=0;_t<C.length;++_t){var xt=C[_t].value;(_t===0||C[_t-1].value!==xt)&&(rt.push(C[_t]),xt>=et[0]&&xt<=et[1]&&L++)}var ft=(et[1]-et[0])/W;if(L>ft*1.5&&w>ft/1.5||(O.push(rt),L>ft||nt===st[z]))break}C=[]}}}for(var Mt=Object(it.filter)(Object(it.map)(O,function(vt){return Object(it.filter)(vt,function(Ct){return Ct.value>=et[0]&&Ct.value<=et[1]&&!Ct.notAdd})}),function(vt){return vt.length>0}),K=[],R=Mt.length-1,z=0;z<Mt.length;++z)for(var tt=Mt[z],Z=0;Z<tt.length;++Z)K.push({value:tt[Z].value,level:R-z});K.sort(function(vt,Ct){return vt.value-Ct.value});for(var ct=[],z=0;z<K.length;++z)(z===0||K[z].value!==K[z-1].value)&&ct.push(K[z]);return ct}ot.a.registerClass(Y),U.a=Y},IXzq:function(Ge,U,S){"use strict";S.d(U,"c",function(){return Y}),S.d(U,"b",function(){return V}),S.d(U,"e",function(){return W}),S.d(U,"d",function(){return X}),S.d(U,"a",function(){return et});var B=S("7aKB"),mt=S("bYtY"),H=S("t9mh"),ht=S("OELB"),y="line-height:1";function ot(k,st){var $=k.color||"#6e7079",D=k.fontSize||12,T=k.fontWeight||"400",O=k.color||"#464646",C=k.fontSize||14,L=k.fontWeight||"900";return st==="html"?{nameStyle:"font-size:"+Object(B.d)(D+"")+"px;color:"+Object(B.d)($)+";font-weight:"+Object(B.d)(T+""),valueStyle:"font-size:"+Object(B.d)(C+"")+"px;color:"+Object(B.d)(O)+";font-weight:"+Object(B.d)(L+"")}:{nameStyle:{fontSize:D,fill:$,fontWeight:T},valueStyle:{fontSize:C,fill:O,fontWeight:L}}}var it=[0,10,20,30],Q=["",`
`,`

`,`


`];function Y(k,st){return st.type=k,st}function G(k){return Object(mt.hasOwn)(q,k.type)&&q[k.type]}var q={section:{planLayout:function(k){var st=k.blocks.length,$=st>1||st>0&&!k.noHeader,D=0;Object(mt.each)(k.blocks,function(T){G(T).planLayout(T);var O=T.__gapLevelBetweenSubBlocks;O>=D&&(D=O+($&&(!O||T.type==="section"&&!T.noHeader)?1:0))}),k.__gapLevelBetweenSubBlocks=D},build:function(k,st,$,D){var T=st.noHeader,O=lt(st),C=N(k,st,T?$:O.html,D);if(T)return C;var L=Object(B.i)(st.header,"ordinal",k.useUTC),w=ot(D,k.renderMode).nameStyle;return k.renderMode==="richText"?bt(k,L,w)+O.richText+C:at('<div style="'+w+";"+y+';">'+Object(B.d)(L)+"</div>"+C,$)}},nameValue:{planLayout:function(k){k.__gapLevelBetweenSubBlocks=0},build:function(k,st,$,D){var T=k.renderMode,O=st.noName,C=st.noValue,L=!st.markerType,w=st.name,z=st.value,pt=k.useUTC;if(!(O&&C)){var At=L?"":k.markupStyleCreator.makeTooltipMarker(st.markerType,st.markerColor||"#333",T),rt=O?"":Object(B.i)(w,"ordinal",pt),_t=st.valueType,xt=C?[]:Object(mt.isArray)(z)?Object(mt.map)(z,function(Z,ct){return Object(B.i)(Z,Object(mt.isArray)(_t)?_t[ct]:_t,pt)}):[Object(B.i)(z,Object(mt.isArray)(_t)?_t[0]:_t,pt)],ft=!L||!O,Mt=!L&&O,K=ot(D,T),R=K.nameStyle,tt=K.valueStyle;return T==="richText"?(L?"":At)+(O?"":bt(k,rt,R))+(C?"":nt(k,xt,ft,Mt,tt)):at((L?"":At)+(O?"":gt(rt,!L,R))+(C?"":Tt(xt,ft,Mt,tt)),$)}}}};function N(k,st,$,D){var T=[],O=st.blocks||[];Object(mt.assert)(!O||Object(mt.isArray)(O)),O=O||[];var C=k.orderMode;if(st.sortBlocks&&C){O=O.slice();var L={valueAsc:"asc",valueDesc:"desc"};if(Object(mt.hasOwn)(L,C)){var w=new H.a(L[C],null);O.sort(function(pt,At){return w.evaluate(pt.sortParam,At.sortParam)})}else C==="seriesDesc"&&O.reverse()}var z=lt(st);if(Object(mt.each)(O,function(pt,At){var rt=G(pt).build(k,pt,At>0?z.html:0,D);rt!=null&&T.push(rt)}),!!T.length)return k.renderMode==="richText"?T.join(z.richText):at(T.join(""),$)}function V(k,st,$,D,T,O){if(!!k){var C=G(k);C.planLayout(k);var L={useUTC:T,renderMode:$,orderMode:D,markupStyleCreator:st};return C.build(L,k,0,O)}}function lt(k){var st=k.__gapLevelBetweenSubBlocks;return{html:it[st],richText:Q[st]}}function at(k,st){var $='<div style="clear:both"></div>',D="margin: "+st+"px 0 0";return'<div style="'+D+";"+y+';">'+k+$+"</div>"}function gt(k,st,$){var D=st?"margin-left:2px":"";return'<span style="'+$+";"+D+'">'+Object(B.d)(k)+"</span>"}function Tt(k,st,$,D){var T=$?"10px":"20px",O=st?"float:right;margin-left:"+T:"";return'<span style="'+O+";"+D+'">'+Object(mt.map)(k,function(C){return Object(B.d)(C)}).join("&nbsp;&nbsp;")+"</span>"}function bt(k,st,$){return k.markupStyleCreator.wrapRichTextStyle(st,$)}function nt(k,st,$,D,T){var O=[T],C=D?10:20;return $&&O.push({padding:[0,0,0,C],align:"right"}),k.markupStyleCreator.wrapRichTextStyle(st.join("  "),O)}function W(k,st){var $=k.getData().getItemVisual(st,"style"),D=$[k.visualDrawType];return Object(B.c)(D)}function X(k,st){var $=k.get("padding");return $!=null?$:st==="richText"?[8,10]:10}var et=function(){function k(){this.richTextStyles={},this._nextStyleNameId=Object(ht.h)()}return k.prototype._generateStyleName=function(){return"__EC_aUTo_"+this._nextStyleNameId++},k.prototype.makeTooltipMarker=function(st,$,D){var T=D==="richText"?this._generateStyleName():null,O=Object(B.h)({color:$,type:st,renderMode:D,markerId:T});return Object(mt.isString)(O)?O:(this.richTextStyles[T]=O.style,O.content)},k.prototype.wrapRichTextStyle=function(st,$){var D={};Object(mt.isArray)($)?Object(mt.each)($,function(O){return Object(mt.extend)(D,O)}):Object(mt.extend)(D,$);var T=this._generateStyleName();return this.richTextStyles[T]=D,"{"+T+"|"+st+"}"},k}()},IaEH:function(Ge,U,S){"use strict";S.d(U,"a",function(){return mt});/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var B=function(T,O){return B=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(C,L){C.__proto__=L}||function(C,L){for(var w in L)Object.prototype.hasOwnProperty.call(L,w)&&(C[w]=L[w])},B(T,O)};function mt(D,T){B(D,T);function O(){this.constructor=D}D.prototype=T===null?Object.create(T):(O.prototype=T.prototype,new O)}var H=function(){return H=Object.assign||function(O){for(var C,L=1,w=arguments.length;L<w;L++){C=arguments[L];for(var z in C)Object.prototype.hasOwnProperty.call(C,z)&&(O[z]=C[z])}return O},H.apply(this,arguments)};function ht(D,T){var O={};for(var C in D)Object.prototype.hasOwnProperty.call(D,C)&&T.indexOf(C)<0&&(O[C]=D[C]);if(D!=null&&typeof Object.getOwnPropertySymbols=="function")for(var L=0,C=Object.getOwnPropertySymbols(D);L<C.length;L++)T.indexOf(C[L])<0&&Object.prototype.propertyIsEnumerable.call(D,C[L])&&(O[C[L]]=D[C[L]]);return O}function y(D,T,O,C){var L=arguments.length,w=L<3?T:C===null?C=Object.getOwnPropertyDescriptor(T,O):C,z;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")w=Reflect.decorate(D,T,O,C);else for(var pt=D.length-1;pt>=0;pt--)(z=D[pt])&&(w=(L<3?z(w):L>3?z(T,O,w):z(T,O))||w);return L>3&&w&&Object.defineProperty(T,O,w),w}function ot(D,T){return function(O,C){T(O,C,D)}}function it(D,T){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(D,T)}function Q(D,T,O,C){function L(w){return w instanceof O?w:new O(function(z){z(w)})}return new(O||(O=Promise))(function(w,z){function pt(_t){try{rt(C.next(_t))}catch(xt){z(xt)}}function At(_t){try{rt(C.throw(_t))}catch(xt){z(xt)}}function rt(_t){_t.done?w(_t.value):L(_t.value).then(pt,At)}rt((C=C.apply(D,T||[])).next())})}function Y(D,T){var O={label:0,sent:function(){if(w[0]&1)throw w[1];return w[1]},trys:[],ops:[]},C,L,w,z;return z={next:pt(0),throw:pt(1),return:pt(2)},typeof Symbol=="function"&&(z[Symbol.iterator]=function(){return this}),z;function pt(rt){return function(_t){return At([rt,_t])}}function At(rt){if(C)throw new TypeError("Generator is already executing.");for(;O;)try{if(C=1,L&&(w=rt[0]&2?L.return:rt[0]?L.throw||((w=L.return)&&w.call(L),0):L.next)&&!(w=w.call(L,rt[1])).done)return w;switch(L=0,w&&(rt=[rt[0]&2,w.value]),rt[0]){case 0:case 1:w=rt;break;case 4:return O.label++,{value:rt[1],done:!1};case 5:O.label++,L=rt[1],rt=[0];continue;case 7:rt=O.ops.pop(),O.trys.pop();continue;default:if(w=O.trys,!(w=w.length>0&&w[w.length-1])&&(rt[0]===6||rt[0]===2)){O=0;continue}if(rt[0]===3&&(!w||rt[1]>w[0]&&rt[1]<w[3])){O.label=rt[1];break}if(rt[0]===6&&O.label<w[1]){O.label=w[1],w=rt;break}if(w&&O.label<w[2]){O.label=w[2],O.ops.push(rt);break}w[2]&&O.ops.pop(),O.trys.pop();continue}rt=T.call(D,O)}catch(_t){rt=[6,_t],L=0}finally{C=w=0}if(rt[0]&5)throw rt[1];return{value:rt[0]?rt[1]:void 0,done:!0}}}var G=Object.create?function(D,T,O,C){C===void 0&&(C=O),Object.defineProperty(D,C,{enumerable:!0,get:function(){return T[O]}})}:function(D,T,O,C){C===void 0&&(C=O),D[C]=T[O]};function q(D,T){for(var O in D)O!=="default"&&!Object.prototype.hasOwnProperty.call(T,O)&&G(T,D,O)}function N(D){var T=typeof Symbol=="function"&&Symbol.iterator,O=T&&D[T],C=0;if(O)return O.call(D);if(D&&typeof D.length=="number")return{next:function(){return D&&C>=D.length&&(D=void 0),{value:D&&D[C++],done:!D}}};throw new TypeError(T?"Object is not iterable.":"Symbol.iterator is not defined.")}function V(D,T){var O=typeof Symbol=="function"&&D[Symbol.iterator];if(!O)return D;var C=O.call(D),L,w=[],z;try{for(;(T===void 0||T-- >0)&&!(L=C.next()).done;)w.push(L.value)}catch(pt){z={error:pt}}finally{try{L&&!L.done&&(O=C.return)&&O.call(C)}finally{if(z)throw z.error}}return w}function lt(){for(var D=[],T=0;T<arguments.length;T++)D=D.concat(V(arguments[T]));return D}function at(){for(var D=0,T=0,O=arguments.length;T<O;T++)D+=arguments[T].length;for(var C=Array(D),L=0,T=0;T<O;T++)for(var w=arguments[T],z=0,pt=w.length;z<pt;z++,L++)C[L]=w[z];return C}function gt(D){return this instanceof gt?(this.v=D,this):new gt(D)}function Tt(D,T,O){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var C=O.apply(D,T||[]),L,w=[];return L={},z("next"),z("throw"),z("return"),L[Symbol.asyncIterator]=function(){return this},L;function z(ft){C[ft]&&(L[ft]=function(Mt){return new Promise(function(K,R){w.push([ft,Mt,K,R])>1||pt(ft,Mt)})})}function pt(ft,Mt){try{At(C[ft](Mt))}catch(K){xt(w[0][3],K)}}function At(ft){ft.value instanceof gt?Promise.resolve(ft.value.v).then(rt,_t):xt(w[0][2],ft)}function rt(ft){pt("next",ft)}function _t(ft){pt("throw",ft)}function xt(ft,Mt){ft(Mt),w.shift(),w.length&&pt(w[0][0],w[0][1])}}function bt(D){var T,O;return T={},C("next"),C("throw",function(L){throw L}),C("return"),T[Symbol.iterator]=function(){return this},T;function C(L,w){T[L]=D[L]?function(z){return(O=!O)?{value:gt(D[L](z)),done:L==="return"}:w?w(z):z}:w}}function nt(D){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var T=D[Symbol.asyncIterator],O;return T?T.call(D):(D=typeof N=="function"?N(D):D[Symbol.iterator](),O={},C("next"),C("throw"),C("return"),O[Symbol.asyncIterator]=function(){return this},O);function C(w){O[w]=D[w]&&function(z){return new Promise(function(pt,At){z=D[w](z),L(pt,At,z.done,z.value)})}}function L(w,z,pt,At){Promise.resolve(At).then(function(rt){w({value:rt,done:pt})},z)}}function W(D,T){return Object.defineProperty?Object.defineProperty(D,"raw",{value:T}):D.raw=T,D}var X=Object.create?function(D,T){Object.defineProperty(D,"default",{enumerable:!0,value:T})}:function(D,T){D.default=T};function et(D){if(D&&D.__esModule)return D;var T={};if(D!=null)for(var O in D)O!=="default"&&Object.prototype.hasOwnProperty.call(D,O)&&G(T,D,O);return X(T,D),T}function k(D){return D&&D.__esModule?D:{default:D}}function st(D,T){if(!T.has(D))throw new TypeError("attempted to get private field on non-instance");return T.get(D)}function $(D,T,O){if(!T.has(D))throw new TypeError("attempted to set private field on non-instance");return T.set(D,O),O}},IrRn:function(Ge,U,S){"use strict";S.d(U,"a",function(){return G});var B=S("G+eS"),mt=S("sS/r"),H=S("6Ic6"),ht=S("bLfw"),y=S("T4UG"),ot=S("bYtY"),it=S("aX58"),Q=[],Y={registerPreprocessor:B.u,registerProcessor:B.v,registerPostInit:B.s,registerPostUpdate:B.t,registerAction:B.m,registerCoordinateSystem:B.n,registerLayout:B.o,registerVisual:B.y,registerTransform:B.x,registerLoading:B.p,registerMap:B.r,PRIORITY:B.a,ComponentModel:ht.a,ComponentView:mt.a,SeriesModel:y.a,ChartView:H.a,registerComponentModel:function(q){ht.a.registerClass(q)},registerComponentView:function(q){mt.a.registerClass(q)},registerSeriesModel:function(q){y.a.registerClass(q)},registerChartView:function(q){H.a.registerClass(q)},registerSubTypeDefaulter:function(q,N){ht.a.registerSubTypeDefaulter(q,N)},registerPainter:function(q,N){Object(it.registerPainter)(q,N)}};function G(q){if(Object(ot.isArray)(q)){Object(ot.each)(q,function(N){G(N)});return}Object(ot.indexOf)(Q,q)>=0||(Q.push(q),Object(ot.isFunction)(q)&&(q={install:q}),q.install(Y))}},ItGF:function(Ge,U,S){"use strict";var B=function(){function y(){this.firefox=!1,this.ie=!1,this.edge=!1,this.newEdge=!1,this.weChat=!1}return y}(),mt=function(){function y(){this.browser=new B,this.node=!1,this.wxa=!1,this.worker=!1,this.canvasSupported=!1,this.svgSupported=!1,this.touchEventsSupported=!1,this.pointerEventsSupported=!1,this.domSupported=!1,this.transformSupported=!1,this.transform3dSupported=!1}return y}(),H=new mt;typeof wx=="object"&&typeof wx.getSystemInfoSync=="function"?(H.wxa=!0,H.canvasSupported=!0,H.touchEventsSupported=!0):typeof document=="undefined"&&typeof self!="undefined"?(H.worker=!0,H.canvasSupported=!0):typeof navigator=="undefined"?(H.node=!0,H.canvasSupported=!0,H.svgSupported=!0):ht(navigator.userAgent,H);function ht(y,ot){var it=ot.browser,Q=y.match(/Firefox\/([\d.]+)/),Y=y.match(/MSIE\s([\d.]+)/)||y.match(/Trident\/.+?rv:(([\d.]+))/),G=y.match(/Edge?\/([\d.]+)/),q=/micromessenger/i.test(y);Q&&(it.firefox=!0,it.version=Q[1]),Y&&(it.ie=!0,it.version=Y[1]),G&&(it.edge=!0,it.version=G[1],it.newEdge=+G[1].split(".")[0]>18),q&&(it.weChat=!0),ot.canvasSupported=!!document.createElement("canvas").getContext,ot.svgSupported=typeof SVGRect!="undefined",ot.touchEventsSupported="ontouchstart"in window&&!it.ie&&!it.edge,ot.pointerEventsSupported="onpointerdown"in window&&(it.edge||it.ie&&+it.version>=11),ot.domSupported=typeof document!="undefined";var N=document.documentElement.style;ot.transform3dSupported=(it.ie&&"transition"in N||it.edge||"WebKitCSSMatrix"in window&&"m11"in new WebKitCSSMatrix||"MozPerspective"in N)&&!("OTransition"in N),ot.transformSupported=ot.transform3dSupported||it.ie&&+it.version>=9}U.a=H},IwbS:function(Ge,U,S){"use strict";S.r(U),S.d(U,"extendShape",function(){return z}),S.d(U,"extendPath",function(){return At}),S.d(U,"registerShape",function(){return rt}),S.d(U,"getShapeClass",function(){return _t}),S.d(U,"makePath",function(){return xt}),S.d(U,"makeImage",function(){return ft}),S.d(U,"mergePath",function(){return K}),S.d(U,"resizePath",function(){return R}),S.d(U,"subPixelOptimizeLine",function(){return tt}),S.d(U,"subPixelOptimizeRect",function(){return Z}),S.d(U,"subPixelOptimize",function(){return ct}),S.d(U,"updateProps",function(){return Ct}),S.d(U,"initProps",function(){return Bt}),S.d(U,"removeElement",function(){return It}),S.d(U,"removeElementWithFadeOut",function(){return ee}),S.d(U,"isElementRemoved",function(){return ae}),S.d(U,"getTransform",function(){return ye}),S.d(U,"applyTransform",function(){return Le}),S.d(U,"transformDirection",function(){return _e}),S.d(U,"groupTransition",function(){return Ie}),S.d(U,"clipPointsByRect",function(){return Fe}),S.d(U,"clipRectByRect",function(){return He}),S.d(U,"createIcon",function(){return ur}),S.d(U,"linePolygonIntersect",function(){return br}),S.d(U,"lineLineIntersect",function(){return kr}),S.d(U,"setTooltipConfig",function(){return Qt});var B=S("NC18"),mt=S("Fofx"),H=S("QBsz"),ht=S("y+Vt");S.d(U,"Path",function(){return ht.b});var y=S("hYLj"),ot=S("Dagg");S.d(U,"Image",function(){return ot.a});var it=S("LcXL");S.d(U,"Group",function(){return it.a});var Q=S("dqUG");S.d(U,"Text",function(){return Q.a});var Y=S("2fw6");S.d(U,"Circle",function(){return Y.a});var G=S("rmlV");S.d(U,"Ellipse",function(){return G.a});var q=S("SqI9");S.d(U,"Sector",function(){return q.a});var N=S("RXMa");S.d(U,"Ring",function(){return N.a});var V=S("h7HQ");S.d(U,"Polygon",function(){return V.a});var lt=S("1Jh7");S.d(U,"Polyline",function(){return lt.a});var at=S("x6Kt");S.d(U,"Rect",function(){return at.a});var gt=S("yxFR");S.d(U,"Line",function(){return gt.a});var Tt=S("rA99");S.d(U,"BezierCurve",function(){return Tt.a});var bt=S("jTL6");S.d(U,"Arc",function(){return bt.a});var nt=S("1MYJ");S.d(U,"CompoundPath",function(){return nt.a});var W=S("SKnc");S.d(U,"LinearGradient",function(){return W.a});var X=S("3e3G");S.d(U,"RadialGradient",function(){return X.a});var et=S("mFDi");S.d(U,"BoundingRect",function(){return et.a});var k=S("yoD8");S.d(U,"OrientedBoundingRect",function(){return k.a});var st=S("3Oj7");S.d(U,"Point",function(){return st.a});var $=S("OS9S");S.d(U,"IncrementalDisplayable",function(){return $.a});var D=S("nPnh"),T=S("bYtY"),O=S("hhxK"),C=Math.max,L=Math.min,w={};function z(Yt){return ht.b.extend(Yt)}var pt=B.b;function At(Yt,Zt){return pt(Yt,Zt)}function rt(Yt,Zt){w[Yt]=Zt}function _t(Yt){if(w.hasOwnProperty(Yt))return w[Yt]}function xt(Yt,Zt,ce,xe){var Kt=B.a(Yt,Zt);return ce&&(xe==="center"&&(ce=Mt(ce,Kt.getBoundingRect())),R(Kt,ce)),Kt}function ft(Yt,Zt,ce){var xe=new ot.a({style:{image:Yt,x:Zt.x,y:Zt.y,width:Zt.width,height:Zt.height},onload:function(Kt){if(ce==="center"){var Rt={width:Kt.width,height:Kt.height};xe.setStyle(Mt(Zt,Rt))}}});return xe}function Mt(Yt,Zt){var ce=Zt.width/Zt.height,xe=Yt.height*ce,Kt;xe<=Yt.width?Kt=Yt.height:(xe=Yt.width,Kt=xe/ce);var Rt=Yt.x+Yt.width/2,Jt=Yt.y+Yt.height/2;return{x:Rt-xe/2,y:Jt-Kt/2,width:xe,height:Kt}}var K=B.c;function R(Yt,Zt){if(!!Yt.applyTransform){var ce=Yt.getBoundingRect(),xe=ce.calculateTransform(Zt);Yt.applyTransform(xe)}}function tt(Yt){return D.b(Yt.shape,Yt.shape,Yt.style),Yt}function Z(Yt){return D.c(Yt.shape,Yt.shape,Yt.style),Yt}var ct=D.a;function vt(Yt,Zt,ce,xe,Kt,Rt,Jt){var Xt=!1,fe;typeof Kt=="function"?(Jt=Rt,Rt=Kt,Kt=null):Object(T.isObject)(Kt)&&(Rt=Kt.cb,Jt=Kt.during,Xt=Kt.isFrom,fe=Kt.removeOpt,Kt=Kt.dataIndex);var be=Yt==="update",Ae=Yt==="remove",Ve;if(xe&&xe.ecModel){var nr=xe.ecModel.getUpdatePayload();Ve=nr&&nr.animation}var de=xe&&xe.isAnimationEnabled();if(Ae||Zt.stopAnimation("remove"),de){var _r=void 0,Nr=void 0,lr=void 0;Ve?(_r=Ve.duration||0,Nr=Ve.easing||"cubicOut",lr=Ve.delay||0):Ae?(fe=fe||{},_r=Object(T.retrieve2)(fe.duration,200),Nr=Object(T.retrieve2)(fe.easing,"cubicOut"),lr=0):(_r=xe.getShallow(be?"animationDurationUpdate":"animationDuration"),Nr=xe.getShallow(be?"animationEasingUpdate":"animationEasing"),lr=xe.getShallow(be?"animationDelayUpdate":"animationDelay")),typeof lr=="function"&&(lr=lr(Kt,xe.getAnimationDelayParams?xe.getAnimationDelayParams(Zt,Kt):null)),typeof _r=="function"&&(_r=_r(Kt)),_r>0?Xt?Zt.animateFrom(ce,{duration:_r,delay:lr||0,easing:Nr,done:Rt,force:!!Rt||!!Jt,scope:Yt,during:Jt}):Zt.animateTo(ce,{duration:_r,delay:lr||0,easing:Nr,done:Rt,force:!!Rt||!!Jt,setToFinal:!0,scope:Yt,during:Jt}):(Zt.stopAnimation(),!Xt&&Zt.attr(ce),Rt&&Rt())}else Zt.stopAnimation(),!Xt&&Zt.attr(ce),Jt&&Jt(1),Rt&&Rt()}function Ct(Yt,Zt,ce,xe,Kt,Rt){vt("update",Yt,Zt,ce,xe,Kt,Rt)}function Bt(Yt,Zt,ce,xe,Kt,Rt){vt("init",Yt,Zt,ce,xe,Kt,Rt)}function It(Yt,Zt,ce,xe,Kt,Rt){ae(Yt)||vt("remove",Yt,Zt,ce,xe,Kt,Rt)}function Wt(Yt,Zt,ce,xe){Yt.removeTextContent(),Yt.removeTextGuideLine(),It(Yt,{style:{opacity:0}},Zt,ce,xe)}function ee(Yt,Zt,ce){function xe(){Yt.parent&&Yt.parent.remove(Yt)}Yt.isGroup?Yt.traverse(function(Kt){Kt.isGroup||Wt(Kt,Zt,ce,xe)}):Wt(Yt,Zt,ce,xe)}function ae(Yt){if(!Yt.__zr)return!0;for(var Zt=0;Zt<Yt.animators.length;Zt++){var ce=Yt.animators[Zt];if(ce.scope==="remove")return!0}return!1}function ye(Yt,Zt){for(var ce=mt.identity([]);Yt&&Yt!==Zt;)mt.mul(ce,Yt.getLocalTransform(),ce),Yt=Yt.parent;return ce}function Le(Yt,Zt,ce){return Zt&&!Object(T.isArrayLike)(Zt)&&(Zt=y.a.getLocalTransform(Zt)),ce&&(Zt=mt.invert([],Zt)),H.applyTransform([],Yt,Zt)}function _e(Yt,Zt,ce){var xe=Zt[4]===0||Zt[5]===0||Zt[0]===0?1:Math.abs(2*Zt[4]/Zt[0]),Kt=Zt[4]===0||Zt[5]===0||Zt[2]===0?1:Math.abs(2*Zt[4]/Zt[2]),Rt=[Yt==="left"?-xe:Yt==="right"?xe:0,Yt==="top"?-Kt:Yt==="bottom"?Kt:0];return Rt=Le(Rt,Zt,ce),Math.abs(Rt[0])>Math.abs(Rt[1])?Rt[0]>0?"right":"left":Rt[1]>0?"bottom":"top"}function De(Yt){return!Yt.isGroup}function er(Yt){return Yt.shape!=null}function Ie(Yt,Zt,ce){if(!Yt||!Zt)return;function xe(Jt){var Xt={};return Jt.traverse(function(fe){De(fe)&&fe.anid&&(Xt[fe.anid]=fe)}),Xt}function Kt(Jt){var Xt={x:Jt.x,y:Jt.y,rotation:Jt.rotation};return er(Jt)&&(Xt.shape=Object(T.extend)({},Jt.shape)),Xt}var Rt=xe(Yt);Zt.traverse(function(Jt){if(De(Jt)&&Jt.anid){var Xt=Rt[Jt.anid];if(Xt){var fe=Kt(Jt);Jt.attr(Kt(Xt)),Ct(Jt,fe,ce,Object(O.a)(Jt).dataIndex)}}})}function Fe(Yt,Zt){return Object(T.map)(Yt,function(ce){var xe=ce[0];xe=C(xe,Zt.x),xe=L(xe,Zt.x+Zt.width);var Kt=ce[1];return Kt=C(Kt,Zt.y),Kt=L(Kt,Zt.y+Zt.height),[xe,Kt]})}function He(Yt,Zt){var ce=C(Yt.x,Zt.x),xe=L(Yt.x+Yt.width,Zt.x+Zt.width),Kt=C(Yt.y,Zt.y),Rt=L(Yt.y+Yt.height,Zt.y+Zt.height);if(xe>=ce&&Rt>=Kt)return{x:ce,y:Kt,width:xe-ce,height:Rt-Kt}}function ur(Yt,Zt,ce){var xe=Object(T.extend)({rectHover:!0},Zt),Kt=xe.style={strokeNoScale:!0};if(ce=ce||{x:-1,y:-1,width:2,height:2},Yt)return Yt.indexOf("image://")===0?(Kt.image=Yt.slice(8),Object(T.defaults)(Kt,ce),new ot.a(xe)):xt(Yt.replace("path://",""),xe,ce,"center")}function br(Yt,Zt,ce,xe,Kt){for(var Rt=0,Jt=Kt[Kt.length-1];Rt<Kt.length;Rt++){var Xt=Kt[Rt];if(kr(Yt,Zt,ce,xe,Xt[0],Xt[1],Jt[0],Jt[1]))return!0;Jt=Xt}}function kr(Yt,Zt,ce,xe,Kt,Rt,Jt,Xt){var fe=ce-Yt,be=xe-Zt,Ae=Jt-Kt,Ve=Xt-Rt,nr=Xe(Ae,Ve,fe,be);if(Ut(nr))return!1;var de=Yt-Kt,_r=Zt-Rt,Nr=Xe(de,_r,fe,be)/nr;if(Nr<0||Nr>1)return!1;var lr=Xe(de,_r,Ae,Ve)/nr;return!(lr<0||lr>1)}function Xe(Yt,Zt,ce,xe){return Yt*xe-ce*Zt}function Ut(Yt){return Yt<=1e-6&&Yt>=-1e-6}function Qt(Yt){var Zt=Yt.itemTooltipOption,ce=Yt.componentModel,xe=Yt.itemName,Kt=Object(T.isString)(Zt)?{formatter:Zt}:Zt,Rt=ce.mainType,Jt=ce.componentIndex,Xt={componentType:Rt,name:xe,$vars:["name"]};Xt[Rt+"Index"]=Jt;var fe=Yt.formatterParamsExtra;fe&&Object(T.each)(Object(T.keys)(fe),function(Ae){Object(T.hasOwn)(Xt,Ae)||(Xt[Ae]=fe[Ae],Xt.$vars.push(Ae))});var be=Object(O.a)(Yt.el);be.componentMainType=Rt,be.componentIndex=Jt,be.tooltipConfig={name:xe,option:Object(T.defaults)({content:xe,formatterParams:Xt},Kt)}}rt("circle",Y.a),rt("ellipse",G.a),rt("sector",q.a),rt("ring",N.a),rt("polygon",V.a),rt("polyline",lt.a),rt("rect",at.a),rt("line",gt.a),rt("bezierCurve",Tt.a),rt("arc",bt.a)},KCsZ:function(Ge,U,S){"use strict";S.d(U,"a",function(){return mt});var B=S("bYtY");function mt(H,ht){for(var y=0;y<H.length;y++)H[y][1]||(H[y][1]=H[y][0]);return ht=ht||!1,function(ot,it,Q){for(var Y={},G=0;G<H.length;G++){var q=H[G][1];if(!(it&&B.indexOf(it,q)>=0||Q&&B.indexOf(Q,q)<0)){var N=ot.getShallow(q,ht);N!=null&&(Y[H[G][0]]=N)}}return Y}}},KxfA:function(Ge,U,S){"use strict";S.d(U,"a",function(){return G}),S.d(U,"c",function(){return V}),S.d(U,"b",function(){return gt}),S.d(U,"d",function(){return nt}),S.d(U,"e",function(){return X});var B=S("bYtY"),mt=S("4NO4"),H=S("7G+c"),ht=S("B/3G"),y,ot,it,Q,Y,G=function(){function k(st,$){var D=Object(H.e)(st)?st:Object(H.c)(st);this._source=D;var T=this._data=D.data;D.sourceFormat===ht.g&&(this._offset=0,this._dimSize=$,this._data=T),Y(this,T,D)}return k.prototype.getSource=function(){return this._source},k.prototype.count=function(){return 0},k.prototype.getItem=function(st,$){},k.prototype.appendData=function(st){},k.prototype.clean=function(){},k.protoInitialize=function(){var st=k.prototype;st.pure=!1,st.persistent=!0}(),k.internalField=function(){var st;Y=function(C,L,w){var z=w.sourceFormat,pt=w.seriesLayoutBy,At=w.startIndex,rt=w.dimensionsDefine,_t=Q[W(z,pt)];if(Object(B.extend)(C,_t),z===ht.g)C.getItem=$,C.count=T,C.fillStorage=D;else{var xt=V(z,pt);C.getItem=Object(B.bind)(xt,null,L,At,rt);var ft=gt(z,pt);C.count=Object(B.bind)(ft,null,L,At,rt)}};var $=function(C,L){C=C-this._offset,L=L||[];for(var w=this._data,z=this._dimSize,pt=z*C,At=0;At<z;At++)L[At]=w[pt+At];return L},D=function(C,L,w,z){for(var pt=this._data,At=this._dimSize,rt=0;rt<At;rt++){for(var _t=z[rt],xt=_t[0]==null?Infinity:_t[0],ft=_t[1]==null?-Infinity:_t[1],Mt=L-C,K=w[rt],R=0;R<Mt;R++){var tt=pt[R*At+rt];K[C+R]=tt,tt<xt&&(xt=tt),tt>ft&&(ft=tt)}_t[0]=xt,_t[1]=ft}},T=function(){return this._data?this._data.length/this._dimSize:0};Q=(st={},st[ht.c+"_"+ht.a]={pure:!0,appendData:O},st[ht.c+"_"+ht.b]={pure:!0,appendData:function(){throw new Error('Do not support appendData when set seriesLayoutBy: "row".')}},st[ht.e]={pure:!0,appendData:O},st[ht.d]={pure:!0,appendData:function(C){var L=this._data;Object(B.each)(C,function(w,z){for(var pt=L[z]||(L[z]=[]),At=0;At<(w||[]).length;At++)pt.push(w[At])})}},st[ht.f]={appendData:O},st[ht.g]={persistent:!1,pure:!0,appendData:function(C){this._data=C},clean:function(){this._offset+=this.count(),this._data=null}},st);function O(C){for(var L=0;L<C.length;L++)this._data.push(C[L])}}(),k}(),q=function(k,st,$,D){return k[D]},N=(y={},y[ht.c+"_"+ht.a]=function(k,st,$,D){return k[D+st]},y[ht.c+"_"+ht.b]=function(k,st,$,D){D+=st;for(var T=[],O=k,C=0;C<O.length;C++){var L=O[C];T.push(L?L[D]:null)}return T},y[ht.e]=q,y[ht.d]=function(k,st,$,D){for(var T=[],O=0;O<$.length;O++){var C=$[O].name,L=k[C];T.push(L?L[D]:null)}return T},y[ht.f]=q,y);function V(k,st){var $=N[W(k,st)];return $}var lt=function(k,st,$){return k.length},at=(ot={},ot[ht.c+"_"+ht.a]=function(k,st,$){return Math.max(0,k.length-st)},ot[ht.c+"_"+ht.b]=function(k,st,$){var D=k[0];return D?Math.max(0,D.length-st):0},ot[ht.e]=lt,ot[ht.d]=function(k,st,$){var D=$[0].name,T=k[D];return T?T.length:0},ot[ht.f]=lt,ot);function gt(k,st){var $=at[W(k,st)];return $}var Tt=function(k,st,$){return st!=null?k[st]:k},bt=(it={},it[ht.c]=Tt,it[ht.e]=function(k,st,$){return st!=null?k[$]:k},it[ht.d]=Tt,it[ht.f]=function(k,st,$){var D=Object(mt.h)(k);return st==null||!(D instanceof Array)?D:D[st]},it[ht.g]=Tt,it);function nt(k){var st=bt[k];return st}function W(k,st){return k===ht.c?k+"_"+st:k}function X(k,st,$){if(!!k){var D=k.getRawDataItem(st);if(D!=null){var T=k.getProvider().getSource().sourceFormat,O,C,L=k.getDimensionInfo($);return L&&(O=L.name,C=L.index),nt(T)(D,C,O)}}}function et(k,st,$){if(!!k){var D=k.getProvider().getSource().sourceFormat;if(!(D!==ht.f&&D!==ht.e)){var T=k.getRawDataItem(st);if(D===ht.f&&!Object(B.isObject)(T)&&(T=null),T)return T[$]}}}},L0Ub:function(Ge,U,S){"use strict";S.d(U,"b",function(){return H}),S.d(U,"a",function(){return y});var B=S("bYtY"),mt=S("B/3G");function H(it){var Q={},Y=Q.encode={},G=Object(B.createHashMap)(),q=[],N=[],V=Q.userOutput={dimensionNames:it.dimensions.slice(),encode:{}};Object(B.each)(it.dimensions,function(bt){var nt=it.getDimensionInfo(bt),W=nt.coordDim;if(W){var X=nt.coordDimIndex;ht(Y,W)[X]=bt,nt.isExtraCoord||(G.set(W,1),ot(nt.type)&&(q[0]=bt),ht(V.encode,W)[X]=nt.index),nt.defaultTooltip&&N.push(bt)}mt.i.each(function(et,k){var st=ht(Y,k),$=nt.otherDims[k];$!=null&&$!==!1&&(st[$]=nt.name)})});var lt=[],at={};G.each(function(bt,nt){var W=Y[nt];at[nt]=W[0],lt=lt.concat(W)}),Q.dataDimsOnCoord=lt,Q.encodeFirstDimNotExtra=at;var gt=Y.label;gt&&gt.length&&(q=gt.slice());var Tt=Y.tooltip;return Tt&&Tt.length?N=Tt.slice():N.length||(N=q.slice()),Y.defaultedLabel=q,Y.defaultedTooltip=N,Q}function ht(it,Q){return it.hasOwnProperty(Q)||(it[Q]=[]),it[Q]}function y(it){return it==="category"?"ordinal":it==="time"?"time":"float"}function ot(it){return!(it==="ordinal"||it==="time")}},LPTA:function(Ge,U,S){"use strict";S.d(U,"e",function(){return H}),S.d(U,"b",function(){return ht}),S.d(U,"a",function(){return y}),S.d(U,"d",function(){return ot}),S.d(U,"c",function(){return it});var B=1;typeof window!="undefined"&&(B=Math.max(window.devicePixelRatio||window.screen&&window.screen.deviceXDPI/window.screen.logicalXDPI||1,1));var mt=0,H=B,ht=.4,y="#333",ot="#ccc",it="#eee"},LcXL:function(Ge,U,S){"use strict";var B=S("IaEH"),mt=S("bYtY"),H=S("1bdT"),ht=S("mFDi"),y=function(ot){Object(B.a)(it,ot);function it(Q){var Y=ot.call(this)||this;return Y.isGroup=!0,Y._children=[],Y.attr(Q),Y}return it.prototype.childrenRef=function(){return this._children},it.prototype.children=function(){return this._children.slice()},it.prototype.childAt=function(Q){return this._children[Q]},it.prototype.childOfName=function(Q){for(var Y=this._children,G=0;G<Y.length;G++)if(Y[G].name===Q)return Y[G]},it.prototype.childCount=function(){return this._children.length},it.prototype.add=function(Q){if(Q&&(Q!==this&&Q.parent!==this&&(this._children.push(Q),this._doAdd(Q)),Q.__hostTarget))throw"This elemenet has been used as an attachment";return this},it.prototype.addBefore=function(Q,Y){if(Q&&Q!==this&&Q.parent!==this&&Y&&Y.parent===this){var G=this._children,q=G.indexOf(Y);q>=0&&(G.splice(q,0,Q),this._doAdd(Q))}return this},it.prototype.replaceAt=function(Q,Y){var G=this._children,q=G[Y];if(Q&&Q!==this&&Q.parent!==this&&Q!==q){G[Y]=Q,q.parent=null;var N=this.__zr;N&&q.removeSelfFromZr(N),this._doAdd(Q)}return this},it.prototype._doAdd=function(Q){Q.parent&&Q.parent.remove(Q),Q.parent=this;var Y=this.__zr;Y&&Y!==Q.__zr&&Q.addSelfToZr(Y),Y&&Y.refresh()},it.prototype.remove=function(Q){var Y=this.__zr,G=this._children,q=mt.indexOf(G,Q);return q<0?this:(G.splice(q,1),Q.parent=null,Y&&Q.removeSelfFromZr(Y),Y&&Y.refresh(),this)},it.prototype.removeAll=function(){for(var Q=this._children,Y=this.__zr,G=0;G<Q.length;G++){var q=Q[G];Y&&q.removeSelfFromZr(Y),q.parent=null}return Q.length=0,this},it.prototype.eachChild=function(Q,Y){for(var G=this._children,q=0;q<G.length;q++){var N=G[q];Q.call(Y,N,q)}return this},it.prototype.traverse=function(Q,Y){for(var G=0;G<this._children.length;G++){var q=this._children[G],N=Q.call(Y,q);q.isGroup&&!N&&q.traverse(Q,Y)}return this},it.prototype.addSelfToZr=function(Q){ot.prototype.addSelfToZr.call(this,Q);for(var Y=0;Y<this._children.length;Y++){var G=this._children[Y];G.addSelfToZr(Q)}},it.prototype.removeSelfFromZr=function(Q){ot.prototype.removeSelfFromZr.call(this,Q);for(var Y=0;Y<this._children.length;Y++){var G=this._children[Y];G.removeSelfFromZr(Q)}},it.prototype.getBoundingRect=function(Q){for(var Y=new ht.a(0,0,0,0),G=Q||this._children,q=[],N=null,V=0;V<G.length;V++){var lt=G[V];if(!(lt.ignore||lt.invisible)){var at=lt.getBoundingRect(),gt=lt.getLocalTransform(q);gt?(ht.a.applyTransform(Y,at,gt),N=N||Y.clone(),N.union(Y)):(N=N||at.clone(),N.union(at))}}return N||Y},it}(H.a);y.prototype.type="group",U.a=y},Lx9C:function(Ge,U,S){"use strict";S.d(U,"b",function(){return H}),S.d(U,"a",function(){return ht});var B=S("bYtY"),mt=Object(B.createHashMap)();function H(y,ot){Object(B.assert)(mt.get(y)==null&&ot),mt.set(y,ot)}function ht(y,ot,it){var Q=mt.get(ot);if(!Q)return it;var Y=Q(y);if(!Y)return it;if(!1)var G;return it.concat(Y)}},MT78:function(Ge,U,S){"use strict";S.r(U),S.d(U,"version",function(){return mt.ab}),S.d(U,"dependencies",function(){return mt.l}),S.d(U,"PRIORITY",function(){return mt.g}),S.d(U,"init",function(){return mt.B}),S.d(U,"connect",function(){return mt.j}),S.d(U,"disConnect",function(){return mt.m}),S.d(U,"disconnect",function(){return mt.n}),S.d(U,"dispose",function(){return mt.o}),S.d(U,"getInstanceByDom",function(){return mt.w}),S.d(U,"getInstanceById",function(){return mt.x}),S.d(U,"registerTheme",function(){return mt.R}),S.d(U,"registerPreprocessor",function(){return mt.P}),S.d(U,"registerProcessor",function(){return mt.Q}),S.d(U,"registerPostInit",function(){return mt.N}),S.d(U,"registerPostUpdate",function(){return mt.O}),S.d(U,"registerAction",function(){return mt.H}),S.d(U,"registerCoordinateSystem",function(){return mt.I}),S.d(U,"getCoordinateSystemDimensions",function(){return mt.v}),S.d(U,"registerLocale",function(){return mt.L}),S.d(U,"registerLayout",function(){return mt.J}),S.d(U,"registerVisual",function(){return mt.T}),S.d(U,"registerLoading",function(){return mt.K}),S.d(U,"setCanvasCreator",function(){return mt.U}),S.d(U,"registerMap",function(){return mt.M}),S.d(U,"getMap",function(){return mt.y}),S.d(U,"registerTransform",function(){return mt.S}),S.d(U,"dataTool",function(){return mt.k}),S.d(U,"zrender",function(){return mt.cb}),S.d(U,"matrix",function(){return mt.D}),S.d(U,"vector",function(){return mt.Z}),S.d(U,"zrUtil",function(){return mt.bb}),S.d(U,"color",function(){return mt.i}),S.d(U,"throttle",function(){return mt.V}),S.d(U,"helper",function(){return mt.A}),S.d(U,"use",function(){return mt.X}),S.d(U,"parseGeoJSON",function(){return mt.F}),S.d(U,"parseGeoJson",function(){return mt.G}),S.d(U,"number",function(){return mt.E}),S.d(U,"time",function(){return mt.W}),S.d(U,"graphic",function(){return mt.z}),S.d(U,"format",function(){return mt.u}),S.d(U,"util",function(){return mt.Y}),S.d(U,"env",function(){return mt.p}),S.d(U,"List",function(){return mt.e}),S.d(U,"Model",function(){return mt.f}),S.d(U,"Axis",function(){return mt.a}),S.d(U,"ComponentModel",function(){return mt.c}),S.d(U,"ComponentView",function(){return mt.d}),S.d(U,"SeriesModel",function(){return mt.h}),S.d(U,"ChartView",function(){return mt.b}),S.d(U,"innerDrawElementOnCanvas",function(){return mt.C}),S.d(U,"extendComponentModel",function(){return mt.r}),S.d(U,"extendComponentView",function(){return mt.s}),S.d(U,"extendSeriesModel",function(){return mt.t}),S.d(U,"extendChartView",function(){return mt.q});var B=S("IrRn"),mt=S("qnTB"),H=S("+V6l");function ht(a){return document.createElementNS("http://www.w3.org/2000/svg",a)}var y=S("bYtY"),ot=S("y+Vt"),it=S("Dagg"),Q=S("3U8f");function Y(a,r,t){t||(t=function(P,j){return P===j}),a=a.slice(),r=r.slice();var i=r.length,s=a.length,l=1,f=i+s,h=[{newPos:-1,components:[]}],d=G(h[0],r,a,0,t);if(h[0].newPos+1>=i&&d+1>=s){for(var p=[],m=0;m<r.length;m++)p.push(m);return[{indices:p,count:r.length,added:!1,removed:!1}]}function b(){for(var E=-1*l;E<=l;E+=2){var P,j=h[E-1],J=h[E+1],dt=(J?J.newPos:0)-E;j&&(h[E-1]=void 0);var St=j&&j.newPos+1<i,Ot=J&&0<=dt&&dt<s;if(!St&&!Ot){h[E]=void 0;continue}if(!St||Ot&&j.newPos<J.newPos?(P=V(J),q(P.components,!1,!0)):(P=j,P.newPos++,q(P.components,!0,!1)),dt=G(P,r,a,E,t),P.newPos+1>=i&&dt+1>=s)return N(P.components);h[E]=P}l++}for(;l<=f;){var A=b();if(A)return A}}function G(a,r,t,i,s){for(var l=r.length,f=t.length,h=a.newPos,d=h-i,p=0;h+1<l&&d+1<f&&s(r[h+1],t[d+1]);)h++,d++,p++;return p&&a.components.push({count:p,added:!1,removed:!1,indices:[]}),a.newPos=h,d}function q(a,r,t){var i=a[a.length-1];i&&i.added===r&&i.removed===t?a[a.length-1]={count:i.count+1,added:r,removed:t,indices:[]}:a.push({count:1,added:r,removed:t,indices:[]})}function N(a){for(var r=0,t=a.length,i=0,s=0;r<t;r++){var l=a[r];if(l.removed){for(var h=s;h<s+l.count;h++)l.indices.push(h);s+=l.count}else{for(var f=[],h=i;h<i+l.count;h++)f.push(h);l.indices=f,i+=l.count,l.added||(s+=l.count)}}return a}function V(a){return{newPos:a.newPos,components:a.components.slice(0)}}function lt(a,r,t){return Y(a,r,t)}var at=S("IaEH"),gt=S("6GrX"),Tt=S("YIpD"),bt="none",nt=Math.round,W=Math.sin,X=Math.cos,et=Math.PI,k=Math.PI*2,st=180/et,$=1e-4;function D(a){return nt(a*1e3)/1e3}function T(a){return nt(a*1e4)/1e4}function O(a){return a<$&&a>-$}function C(a){var r=a.fill;return r!=null&&r!==bt}function L(a){var r=a.stroke;return r!=null&&r!==bt}function w(a,r){r&&z(a,"transform","matrix("+D(r[0])+","+D(r[1])+","+D(r[2])+","+D(r[3])+","+T(r[4])+","+T(r[5])+")")}function z(a,r,t){(!t||t.type!=="linear"&&t.type!=="radial")&&a.setAttribute(r,t)}function pt(a,r,t){a.setAttributeNS("http://www.w3.org/1999/xlink",r,t)}function At(a,r,t){a.setAttributeNS("http://www.w3.org/XML/1998/namespace",r,t)}function rt(a,r,t){var i=r.opacity==null?1:r.opacity;if(t instanceof it.a){a.style.opacity=i+"";return}if(C(r)){var s=r.fill;s=s==="transparent"?bt:s,z(a,"fill",s),z(a,"fill-opacity",(r.fillOpacity!=null?r.fillOpacity*i:i)+"")}else z(a,"fill",bt);if(L(r)){var l=r.stroke;l=l==="transparent"?bt:l,z(a,"stroke",l);var f=r.lineWidth,h=r.strokeNoScale?t.getLineScale():1;z(a,"stroke-width",(h?f/h:0)+""),z(a,"paint-order",r.strokeFirst?"stroke":"fill"),z(a,"stroke-opacity",(r.strokeOpacity!=null?r.strokeOpacity*i:i)+"");var d=r.lineDash&&f>0&&Object(Tt.a)(r.lineDash,f);if(d){var p=r.lineDashOffset;h&&h!==1&&(d=Object(y.map)(d,function(m){return m/h}),p&&(p/=h,p=nt(p))),z(a,"stroke-dasharray",d.join(",")),z(a,"stroke-dashoffset",(p||0)+"")}else z(a,"stroke-dasharray","");r.lineCap&&z(a,"stroke-linecap",r.lineCap),r.lineJoin&&z(a,"stroke-linejoin",r.lineJoin),r.miterLimit&&z(a,"stroke-miterlimit",r.miterLimit+"")}else z(a,"stroke",bt)}var _t=function(){function a(){}return a.prototype.reset=function(){this._d=[],this._str=""},a.prototype.moveTo=function(r,t){this._add("M",r,t)},a.prototype.lineTo=function(r,t){this._add("L",r,t)},a.prototype.bezierCurveTo=function(r,t,i,s,l,f){this._add("C",r,t,i,s,l,f)},a.prototype.quadraticCurveTo=function(r,t,i,s){this._add("Q",r,t,i,s)},a.prototype.arc=function(r,t,i,s,l,f){this.ellipse(r,t,i,i,0,s,l,f)},a.prototype.ellipse=function(r,t,i,s,l,f,h,d){var p=this._d.length===0,m=h-f,b=!d,A=Math.abs(m),E=O(A-k)||(b?m>=k:-m>=k),P=m>0?m%k:m%k+k,j=!1;E?j=!0:O(A)?j=!1:j=P>=et==!!b;var J=T(r+i*X(f)),dt=T(t+s*W(f));E&&(b?m=k-1e-4:m=-k+1e-4,j=!0,p&&this._d.push("M",J,dt));var St=T(r+i*X(f+m)),Ot=T(t+s*W(f+m));if(isNaN(J)||isNaN(dt)||isNaN(i)||isNaN(s)||isNaN(l)||isNaN(st)||isNaN(St)||isNaN(Ot))return"";this._d.push("A",T(i),T(s),nt(l*st),+j,+b,St,Ot)},a.prototype.rect=function(r,t,i,s){this._add("M",r,t),this._add("L",r+i,t),this._add("L",r+i,t+s),this._add("L",r,t+s),this._add("L",r,t)},a.prototype.closePath=function(){this._d.length>0&&this._add("Z")},a.prototype._add=function(r,t,i,s,l,f,h,d,p){this._d.push(r);for(var m=1;m<arguments.length;m++){var b=arguments[m];if(isNaN(b)){this._invalid=!0;return}this._d.push(T(b))}},a.prototype.generateStr=function(){this._str=this._invalid?"":this._d.join(" "),this._d=[]},a.prototype.getStr=function(){return this._str},a}(),xt={brush:function(r){var t=r.style,i=r.__svgEl;i||(i=ht("path"),r.__svgEl=i),r.path||r.createPathProxy();var s=r.path;r.shapeChanged()&&(s.beginPath(),r.buildPath(s,r.shape),r.pathUpdated());var l=s.getVersion(),f=r,h=f.__svgPathBuilder;(f.__svgPathVersion!==l||!h||r.style.strokePercent<1)&&(h||(h=f.__svgPathBuilder=new _t),h.reset(),s.rebuildPath(h,r.style.strokePercent),h.generateStr(),f.__svgPathVersion=l),z(i,"d",h.getStr()),rt(i,t,r),w(i,r.transform)}},ft={brush:function(r){var t=r.style,i=t.image;if(i instanceof HTMLImageElement?i=i.src:i instanceof HTMLCanvasElement&&(i=i.toDataURL()),!!i){var s=t.x||0,l=t.y||0,f=t.width,h=t.height,d=r.__svgEl;d||(d=ht("image"),r.__svgEl=d),i!==r.__imageSrc&&(pt(d,"href",i),r.__imageSrc=i),z(d,"width",f+""),z(d,"height",h+""),z(d,"x",s+""),z(d,"y",l+""),rt(d,t,r),w(d,r.transform)}}},Mt={left:"start",right:"end",center:"middle",middle:"middle"};function K(a,r,t){return t==="top"?a+=r/2:t==="bottom"&&(a-=r/2),a}var R={brush:function(r){var t=r.style,i=t.text;if(i!=null&&(i+=""),!(!i||isNaN(t.x)||isNaN(t.y))){var s=r.__svgEl;s||(s=ht("text"),At(s,"xml:space","preserve"),r.__svgEl=s);var l=t.font||gt.a,f=s.style;f.font=l,s.textContent=i,rt(s,t,r),w(s,r.transform);var h=t.x||0,d=K(t.y||0,Object(gt.f)(l),t.textBaseline),p=Mt[t.textAlign]||t.textAlign;z(s,"dominant-baseline","central"),z(s,"text-anchor",p),z(s,"x",h+""),z(s,"y",d+"")}}},tt="0",Z="1",ct=function(){function a(r,t,i,s,l){this.nextId=0,this._domName="_dom",this.createElement=ht,this._zrId=r,this._svgRoot=t,this._tagNames=typeof i=="string"?[i]:i,this._markLabel=s,l&&(this._domName=l)}return a.prototype.getDefs=function(r){var t=this._svgRoot,i=this._svgRoot.getElementsByTagName("defs");if(i.length===0)if(r){var s=t.insertBefore(this.createElement("defs"),t.firstChild);return s.contains||(s.contains=function(l){var f=s.children;if(!f)return!1;for(var h=f.length-1;h>=0;--h)if(f[h]===l)return!0;return!1}),s}else return null;else return i[0]},a.prototype.doUpdate=function(r,t){if(!!r){var i=this.getDefs(!1);if(r[this._domName]&&i.contains(r[this._domName]))typeof t=="function"&&t(r);else{var s=this.add(r);s&&(r[this._domName]=s)}}},a.prototype.add=function(r){return null},a.prototype.addDom=function(r){var t=this.getDefs(!0);r.parentNode!==t&&t.appendChild(r)},a.prototype.removeDom=function(r){var t=this.getDefs(!1);t&&r[this._domName]&&(t.removeChild(r[this._domName]),r[this._domName]=null)},a.prototype.getDoms=function(){var r=this.getDefs(!1);if(!r)return[];var t=[];return y.each(this._tagNames,function(i){for(var s=r.getElementsByTagName(i),l=0;l<s.length;l++)t.push(s[l])}),t},a.prototype.markAllUnused=function(){var r=this.getDoms(),t=this;y.each(r,function(i){i[t._markLabel]=tt})},a.prototype.markDomUsed=function(r){r&&(r[this._markLabel]=Z)},a.prototype.markDomUnused=function(r){r&&(r[this._markLabel]=tt)},a.prototype.isDomUnused=function(r){return r&&r[this._markLabel]!==Z},a.prototype.removeUnused=function(){var r=this,t=this.getDefs(!1);if(!!t){var i=this.getDoms();y.each(i,function(s){r.isDomUnused(s)&&t.removeChild(s)})}},a.prototype.getSvgProxy=function(r){return r instanceof ot.b?xt:r instanceof it.a?ft:r instanceof Q.a?R:xt},a.prototype.getSvgElement=function(r){return r.__svgEl},a}(),vt=ct,Ct=S("Qe9p");function Bt(a){return a.type==="linear"}function It(a){return a.type==="radial"}function Wt(a){return a&&(a.type==="linear"||a.type==="radial")}var ee=function(a){Object(at.a)(r,a);function r(t,i){return a.call(this,t,i,["linearGradient","radialGradient"],"__gradient_in_use__")||this}return r.prototype.addWithoutUpdate=function(t,i){if(i&&i.style){var s=this;y.each(["fill","stroke"],function(l){var f=i.style[l];if(Wt(f)){var h=f,d=s.getDefs(!0),p=void 0;h.__dom?(p=h.__dom,d.contains(h.__dom)||s.addDom(p)):p=s.add(h),s.markUsed(i);var m=p.getAttribute("id");t.setAttribute(l,"url(#"+m+")")}})}},r.prototype.add=function(t){var i;if(Bt(t))i=this.createElement("linearGradient");else if(It(t))i=this.createElement("radialGradient");else return y.logError("Illegal gradient type."),null;return t.id=t.id||this.nextId++,i.setAttribute("id","zr"+this._zrId+"-gradient-"+t.id),this.updateDom(t,i),this.addDom(i),i},r.prototype.update=function(t){if(!!Wt(t)){var i=this;this.doUpdate(t,function(){var s=t.__dom;if(!!s){var l=s.tagName,f=t.type;f==="linear"&&l==="linearGradient"||f==="radial"&&l==="radialGradient"?i.updateDom(t,t.__dom):(i.removeDom(t),i.add(t))}})}},r.prototype.updateDom=function(t,i){if(Bt(t))i.setAttribute("x1",t.x+""),i.setAttribute("y1",t.y+""),i.setAttribute("x2",t.x2+""),i.setAttribute("y2",t.y2+"");else if(It(t))i.setAttribute("cx",t.x+""),i.setAttribute("cy",t.y+""),i.setAttribute("r",t.r+"");else{y.logError("Illegal gradient type.");return}t.global?i.setAttribute("gradientUnits","userSpaceOnUse"):i.setAttribute("gradientUnits","objectBoundingBox"),i.innerHTML="";for(var s=t.colorStops,l=0,f=s.length;l<f;++l){var h=this.createElement("stop");h.setAttribute("offset",s[l].offset*100+"%");var d=s[l].color;if(d.indexOf("rgba")>-1){var p=Ct.parse(d)[3],m=Ct.toHex(d);h.setAttribute("stop-color","#"+m),h.setAttribute("stop-opacity",p+"")}else h.setAttribute("stop-color",s[l].color);i.appendChild(h)}t.__dom=i},r.prototype.markUsed=function(t){if(t.style){var i=t.style.fill;i&&i.__dom&&a.prototype.markDomUsed.call(this,i.__dom),i=t.style.stroke,i&&i.__dom&&a.prototype.markDomUsed.call(this,i.__dom)}},r}(vt),ae=ee,ye=S("Xnb7"),Le=S("R1X6");function _e(a){return a&&(!!a.image||!!a.svgElement)}var De=new Le.a,er=function(a){Object(at.a)(r,a);function r(t,i){return a.call(this,t,i,["pattern"],"__pattern_in_use__")||this}return r.prototype.addWithoutUpdate=function(t,i){if(i&&i.style){var s=this;y.each(["fill","stroke"],function(l){var f=i.style[l];if(_e(f)){var h=s.getDefs(!0),d=De.get(f);d?h.contains(d)||s.addDom(d):d=s.add(f),s.markUsed(i);var p=d.getAttribute("id");t.setAttribute(l,"url(#"+p+")")}})}},r.prototype.add=function(t){if(!!_e(t)){var i=this.createElement("pattern");return t.id=t.id==null?this.nextId++:t.id,i.setAttribute("id","zr"+this._zrId+"-pattern-"+t.id),i.setAttribute("x","0"),i.setAttribute("y","0"),i.setAttribute("patternUnits","userSpaceOnUse"),this.updateDom(t,i),this.addDom(i),i}},r.prototype.update=function(t){if(!!_e(t)){var i=this;this.doUpdate(t,function(){var s=De.get(t);i.updateDom(t,s)})}},r.prototype.updateDom=function(t,i){var s=t.svgElement;if(s instanceof SVGElement)s.parentNode!==i&&(i.innerHTML="",i.appendChild(s),i.setAttribute("width",t.svgWidth+""),i.setAttribute("height",t.svgHeight+""));else{var l=void 0,f=i.getElementsByTagName("image");if(f.length)if(t.image)l=f[0];else{i.removeChild(f[0]);return}else t.image&&(l=this.createElement("image"));if(l){var h=void 0;if(typeof t.image=="string"?h=t.image:t.image instanceof HTMLImageElement?h=t.image.src:t.image instanceof HTMLCanvasElement&&(h=t.image.toDataURL()),h){l.setAttribute("href",h),l.setAttribute("x","0"),l.setAttribute("y","0");var d={dirty:function(){}},p=Object(ye.a)(h,l,d,function(J){i.setAttribute("width",J.width+""),i.setAttribute("height",J.height+"")});p&&p.width&&p.height&&(i.setAttribute("width",p.width+""),i.setAttribute("height",p.height+"")),i.appendChild(l)}}}var m=t.x||0,b=t.y||0,A=(t.rotation||0)/Math.PI*180,E=t.scaleX||1,P=t.scaleY||1,j="translate("+m+", "+b+") rotate("+A+") scale("+E+", "+P+")";i.setAttribute("patternTransform",j),De.set(t,i)},r.prototype.markUsed=function(t){t.style&&(_e(t.style.fill)&&a.prototype.markDomUsed.call(this,De.get(t.style.fill)),_e(t.style.stroke)&&a.prototype.markDomUsed.call(this,De.get(t.style.stroke)))},r}(vt),Ie=er,Fe=S("NDc/");function He(a){var r=[];if(a)for(var t=0;t<a.length;t++){var i=a[t];r.push(i.id)}return r.join(",")}function ur(a){var r=a.__clipPaths;return r&&r.length>0}var br=function(a){Object(at.a)(r,a);function r(t,i){var s=a.call(this,t,i,"clipPath","__clippath_in_use__")||this;return s._refGroups={},s._keyDuplicateCount={},s}return r.prototype.markAllUnused=function(){a.prototype.markAllUnused.call(this);for(var t in this._refGroups)this.markDomUnused(this._refGroups[t]);this._keyDuplicateCount={}},r.prototype._getClipPathGroup=function(t,i){if(!!ur(t)){var s=t.__clipPaths,l=this._keyDuplicateCount,f=He(s);return Object(Fe.b)(s,i&&i.__clipPaths)&&(l[f]=l[f]||0,l[f]&&(f+="-"+l[f]),l[f]++),this._refGroups[f]||(this._refGroups[f]=this.createElement("g"))}},r.prototype.update=function(t,i){var s=this._getClipPathGroup(t,i);return s&&(this.markDomUsed(s),this.updateDom(s,t.__clipPaths)),s},r.prototype.updateDom=function(t,i){if(i&&i.length>0){var s=this.getDefs(!0),l=i[0],f=void 0,h=void 0;l._dom?(h=l._dom.getAttribute("id"),f=l._dom,s.contains(f)||s.appendChild(f)):(h="zr"+this._zrId+"-clip-"+this.nextId,++this.nextId,f=this.createElement("clipPath"),f.setAttribute("id",h),s.appendChild(f),l._dom=f);var d=this.getSvgProxy(l);d.brush(l);var p=this.getSvgElement(l);f.innerHTML="",f.appendChild(p),t.setAttribute("clip-path","url(#"+h+")"),i.length>1&&this.updateDom(f,i.slice(1))}else t&&t.setAttribute("clip-path","none")},r.prototype.markUsed=function(t){var i=this;t.__clipPaths&&y.each(t.__clipPaths,function(s){s._dom&&a.prototype.markDomUsed.call(i,s._dom)})},r.prototype.removeUnused=function(){a.prototype.removeUnused.call(this);var t={};for(var i in this._refGroups){var s=this._refGroups[i];this.isDomUnused(s)?s.parentNode&&s.parentNode.removeChild(s):t[i]=s}this._refGroups=t},r}(vt),kr=br,Xe=function(a){Object(at.a)(r,a);function r(t,i){var s=a.call(this,t,i,["filter"],"__filter_in_use__","_shadowDom")||this;return s._shadowDomMap={},s._shadowDomPool=[],s}return r.prototype._getFromPool=function(){var t=this._shadowDomPool.pop();if(!t){t=this.createElement("filter"),t.setAttribute("id","zr"+this._zrId+"-shadow-"+this.nextId++);var i=this.createElement("feDropShadow");t.appendChild(i),this.addDom(t)}return t},r.prototype.update=function(t,i){var s=i.style;if(Qt(s)){var l=Yt(i),f=i._shadowDom=this._shadowDomMap[l];f||(f=this._getFromPool(),this._shadowDomMap[l]=f),this.updateDom(t,i,f)}else this.remove(t,i)},r.prototype.remove=function(t,i){i._shadowDom!=null&&(i._shadowDom=null,t.style.filter="")},r.prototype.updateDom=function(t,i,s){var l=s.children[0],f=i.style,h=i.getGlobalScale(),d=h[0],p=h[1];if(!(!d||!p)){var m=f.shadowOffsetX||0,b=f.shadowOffsetY||0,A=f.shadowBlur,E=f.shadowColor;l.setAttribute("dx",m/d+""),l.setAttribute("dy",b/p+""),l.setAttribute("flood-color",E);var P=A/2/d,j=A/2/p,J=P+" "+j;l.setAttribute("stdDeviation",J),s.setAttribute("x","-100%"),s.setAttribute("y","-100%"),s.setAttribute("width","300%"),s.setAttribute("height","300%"),i._shadowDom=s;var dt=s.getAttribute("id");t.style.filter="url(#"+dt+")"}},r.prototype.removeUnused=function(){var t=this.getDefs(!1);if(!!t){var i=this._shadowDomPool;for(var s in this._shadowDomMap){var l=this._shadowDomMap[s];i.push(l)}this._shadowDomMap={}}},r}(vt),Ut=Xe;function Qt(a){return a&&(a.shadowBlur||a.shadowOffsetX||a.shadowOffsetY)}function Yt(a){var r=a.style,t=a.getGlobalScale();return[r.shadowColor,(r.shadowBlur||0).toFixed(2),(r.shadowOffsetX||0).toFixed(2),(r.shadowOffsetY||0).toFixed(2),t[0],t[1]].join(",")}function Zt(a){return parseInt(a,10)}function ce(a){return a instanceof ot.b?xt:a instanceof it.a?ft:a instanceof Q.a?R:xt}function xe(a,r){return r&&a&&r.parentNode!==a}function Kt(a,r,t){if(xe(a,r)&&t){var i=t.nextSibling;i?a.insertBefore(r,i):a.appendChild(r)}}function Rt(a,r){if(xe(a,r)){var t=a.firstChild;t?a.insertBefore(r,t):a.appendChild(r)}}function Jt(a,r){r&&a&&r.parentNode===a&&a.removeChild(r)}function Xt(a){a&&a.parentNode&&a.parentNode.removeChild(a)}function fe(a){return a.__svgEl}var be=function(){function a(r,t,i,s){this.type="svg",this.refreshHover=Ae("refreshHover"),this.pathToImage=Ae("pathToImage"),this.configLayer=Ae("configLayer"),this.root=r,this.storage=t,this._opts=i=y.extend({},i||{});var l=ht("svg");l.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns","http://www.w3.org/2000/svg"),l.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:xlink","http://www.w3.org/1999/xlink"),l.setAttribute("version","1.1"),l.setAttribute("baseProfile","full"),l.style.cssText="user-select:none;position:absolute;left:0;top:0;";var f=ht("g");l.appendChild(f);var h=ht("g");l.appendChild(h),this._gradientManager=new ae(s,h),this._patternManager=new Ie(s,h),this._clipPathManager=new kr(s,h),this._shadowManager=new Ut(s,h);var d=document.createElement("div");d.style.cssText="overflow:hidden;position:relative",this._svgDom=l,this._svgRoot=h,this._backgroundRoot=f,this._viewport=d,r.appendChild(d),d.appendChild(l),this.resize(i.width,i.height),this._visibleList=[]}return a.prototype.getType=function(){return"svg"},a.prototype.getViewportRoot=function(){return this._viewport},a.prototype.getSvgDom=function(){return this._svgDom},a.prototype.getSvgRoot=function(){return this._svgRoot},a.prototype.getViewportRootOffset=function(){var r=this.getViewportRoot();if(r)return{offsetLeft:r.offsetLeft||0,offsetTop:r.offsetTop||0}},a.prototype.refresh=function(){var r=this.storage.getDisplayList(!0);this._paintList(r)},a.prototype.setBackgroundColor=function(r){this._backgroundRoot&&this._backgroundNode&&this._backgroundRoot.removeChild(this._backgroundNode);var t=ht("rect");t.setAttribute("width",this.getWidth()),t.setAttribute("height",this.getHeight()),t.setAttribute("x",0),t.setAttribute("y",0),t.setAttribute("id",0),t.style.fill=r,this._backgroundRoot.appendChild(t),this._backgroundNode=t},a.prototype.createSVGElement=function(r){return ht(r)},a.prototype.paintOne=function(r){var t=ce(r);return t&&t.brush(r),fe(r)},a.prototype._paintList=function(r){var t=this._gradientManager,i=this._patternManager,s=this._clipPathManager,l=this._shadowManager;t.markAllUnused(),i.markAllUnused(),s.markAllUnused(),l.markAllUnused();for(var f=this._svgRoot,h=this._visibleList,d=r.length,p=[],m=0;m<d;m++){var b=r[m],A=ce(b),E=fe(b);b.invisible||((b.__dirty||!E)&&(A&&A.brush(b),E=fe(b),E&&b.style&&(t.update(b.style.fill),t.update(b.style.stroke),i.update(b.style.fill),i.update(b.style.stroke),l.update(E,b)),b.__dirty=0),E&&p.push(b))}for(var P=lt(h,p),j,J,m=0;m<P.length;m++){var dt=P[m];if(dt.removed)for(var St=0;St<dt.count;St++){var b=h[dt.indices[St]],E=fe(b);ur(b)?Xt(E):Jt(f,E)}}for(var Ot,wt,m=0;m<P.length;m++){var dt=P[m];if(!dt.removed)for(var St=0;St<dt.count;St++){var b=p[dt.indices[St]],zt=s.update(b,Ot);zt!==wt&&(j=J,zt&&(j?Kt(f,zt,j):Rt(f,zt),J=zt,j=null),wt=zt);var E=fe(b);j?Kt(wt||f,E,j):Rt(wt||f,E),j=E||j,wt||(J=j),t.markUsed(b),t.addWithoutUpdate(E,b),i.markUsed(b),i.addWithoutUpdate(E,b),s.markUsed(b),Ot=b}}t.removeUnused(),i.removeUnused(),s.removeUnused(),l.removeUnused(),this._visibleList=p},a.prototype.resize=function(r,t){var i=this._viewport;i.style.display="none";var s=this._opts;if(r!=null&&(s.width=r),t!=null&&(s.height=t),r=this._getSize(0),t=this._getSize(1),i.style.display="",this._width!==r||this._height!==t){this._width=r,this._height=t;var l=i.style;l.width=r+"px",l.height=t+"px";var f=this._svgDom;f.setAttribute("width",r+""),f.setAttribute("height",t+"")}this._backgroundNode&&(this._backgroundNode.setAttribute("width",r),this._backgroundNode.setAttribute("height",t))},a.prototype.getWidth=function(){return this._width},a.prototype.getHeight=function(){return this._height},a.prototype._getSize=function(r){var t=this._opts,i=["width","height"][r],s=["clientWidth","clientHeight"][r],l=["paddingLeft","paddingTop"][r],f=["paddingRight","paddingBottom"][r];if(t[i]!=null&&t[i]!=="auto")return parseFloat(t[i]);var h=this.root,d=document.defaultView.getComputedStyle(h);return(h[s]||Zt(d[i])||Zt(h.style[i]))-(Zt(d[l])||0)-(Zt(d[f])||0)|0},a.prototype.dispose=function(){this.root.innerHTML="",this._svgRoot=this._backgroundRoot=this._svgDom=this._backgroundNode=this._viewport=this.storage=null},a.prototype.clear=function(){var r=this._viewport;r&&r.parentNode&&r.parentNode.removeChild(r)},a.prototype.toDataURL=function(){this.refresh();var r=this._svgDom,t=r.outerHTML||(r.parentNode&&r.parentNode).innerHTML,i=encodeURIComponent(t.replace(/></g,`>
\r<`));return"data:image/svg+xml;charset=UTF-8,"+i},a}();function Ae(a){return function(){y.logError('In SVG mode painter not support method "'+a+'"')}}var Ve=be;function nr(a){a.registerPainter("svg",Ve)}var de=S("f66r"),_r=S("MwEJ"),Nr=S("T4UG"),lr=S("oVpE"),pr=S("LcXL"),zn=function(a){Object(de.b)(r,a);function r(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=r.type,t.hasSymbolVisual=!0,t}return r.prototype.getInitialData=function(t){if(!1)var i;return Object(_r.a)(this.getSource(),this,{useEncodeDefaulter:!0})},r.prototype.getLegendIcon=function(t){var i=new pr.a,s=Object(lr.a)("line",0,t.itemHeight/2,t.itemWidth,0,t.lineStyle.stroke,!1);i.add(s),s.setStyle(t.lineStyle);var l=this.getData().getVisual("symbol"),f=l==="none"?"circle":l,h=t.itemHeight*.8,d=Object(lr.a)(f,(t.itemWidth-h)/2,(t.itemHeight-h)/2,h,h,t.itemStyle.fill,t.symbolKeepAspect);return i.add(d),d.setStyle(t.itemStyle),f.indexOf("empty")>-1&&(d.style.stroke=d.style.fill,d.style.fill="#fff",d.style.lineWidth=2),i},r.type="series.line",r.dependencies=["grid","polar"],r.defaultOption={zlevel:0,z:3,coordinateSystem:"cartesian2d",legendHoverLink:!0,clip:!0,label:{position:"top"},endLabel:{show:!1,valueAnimation:!0,distance:8},lineStyle:{width:2,type:"solid"},emphasis:{scale:!0,lineStyle:{width:"bolder"}},step:!1,smooth:!1,smoothMonotone:null,symbol:"emptyCircle",symbolSize:4,symbolRotate:null,showSymbol:!0,showAllSymbol:"auto",connectNulls:!1,sampling:"none",animationEasing:"linear",progressive:0,hoverLayerThreshold:Infinity},r}(Nr.a),sa=zn,Ze=S("IwbS"),Ur=S("hhxK"),qe=S("fWwa"),Ne=S("OELB"),tl=S("KxfA");function Oa(a,r){var t=a.mapDimensionsAll("defaultedLabel"),i=t.length;if(i===1){var s=Object(tl.e)(a,r,t[0]);return s!=null?s+"":null}else if(i){for(var l=[],f=0;f<t.length;f++)l.push(Object(tl.e)(a,r,t[f]));return l.join(" ")}}function Aa(a,r){var t=a.mapDimensionsAll("defaultedLabel");if(!Object(y.isArray)(r))return r+"";for(var i=[],s=0;s<t.length;s++){var l=a.getDimensionInfo(t[s]);l&&i.push(r[l.index])}return i.join(" ")}var Ar=S("eDfh"),Tn=function(a){Object(de.b)(r,a);function r(t,i,s,l){var f=a.call(this)||this;return f.updateData(t,i,s,l),f}return r.prototype._createSymbol=function(t,i,s,l,f){this.removeAll();var h=Object(lr.a)(t,-1,-1,2,2,null,f);h.attr({z2:100,culling:!0,scaleX:l[0]/2,scaleY:l[1]/2}),h.drift=hf,this._symbolType=t,this.add(h)},r.prototype.stopSymbolAnimation=function(t){this.childAt(0).stopAnimation(null,t)},r.prototype.getSymbolPath=function(){return this.childAt(0)},r.prototype.highlight=function(){Object(qe.r)(this.childAt(0))},r.prototype.downplay=function(){Object(qe.C)(this.childAt(0))},r.prototype.setZ=function(t,i){var s=this.childAt(0);s.zlevel=t,s.z=i},r.prototype.setDraggable=function(t){var i=this.childAt(0);i.draggable=t,i.cursor=t?"move":i.cursor},r.prototype.updateData=function(t,i,s,l){this.silent=!1;var f=t.getItemVisual(i,"symbol")||"circle",h=t.hostModel,d=r.getSymbolSize(t,i),p=f!==this._symbolType,m=l&&l.disableAnimation;if(p){var b=t.getItemVisual(i,"symbolKeepAspect");this._createSymbol(f,t,i,d,b)}else{var A=this.childAt(0);A.silent=!1;var E={scaleX:d[0]/2,scaleY:d[1]/2};m?A.attr(E):Ze.updateProps(A,E,h,i)}if(this._updateCommon(t,i,d,s,l),p){var A=this.childAt(0);if(!m){var E={scaleX:this._sizeX,scaleY:this._sizeY,style:{opacity:A.style.opacity}};A.scaleX=A.scaleY=0,A.style.opacity=0,Ze.initProps(A,E,h,i)}}m&&this.childAt(0).stopAnimation("remove"),this._seriesModel=h},r.prototype._updateCommon=function(t,i,s,l,f){var h=this.childAt(0),d=t.hostModel,p,m,b,A,E,P,j,J;if(l&&(p=l.emphasisItemStyle,m=l.blurItemStyle,b=l.selectItemStyle,A=l.focus,E=l.blurScope,P=l.labelStatesModels,j=l.hoverScale,J=l.cursorStyle),!l||t.hasItemOption){var dt=l&&l.itemModel?l.itemModel:t.getItemModel(i),St=dt.getModel("emphasis");p=St.getModel("itemStyle").getItemStyle(),b=dt.getModel(["select","itemStyle"]).getItemStyle(),m=dt.getModel(["blur","itemStyle"]).getItemStyle(),A=St.get("focus"),E=St.get("blurScope"),P=Object(Ar.f)(dt),j=St.getShallow("scale"),J=dt.getShallow("cursor")}var Ot=t.getItemVisual(i,"symbolRotate");h.attr("rotation",(Ot||0)*Math.PI/180||0);var wt=t.getItemVisual(i,"symbolOffset")||0;wt&&(Object(y.isArray)(wt)||(wt=[wt,wt]),h.x=Object(Ne.o)(wt[0],s[0]),h.y=Object(Ne.o)(Object(y.retrieve2)(wt[1],wt[0])||0,s[1])),J&&h.attr("cursor",J);var zt=t.getItemVisual(i,"style"),jt=zt.fill;if(h instanceof it.a){var kt=h.style;h.useStyle(Object(y.extend)({image:kt.image,x:kt.x,y:kt.y,width:kt.width,height:kt.height},zt))}else h.__isEmptyBrush?h.useStyle(Object(y.extend)({},zt)):h.useStyle(zt),h.style.decal=null,h.setColor(jt,f&&f.symbolInnerColor),h.style.strokeNoScale=!0;var te=t.getItemVisual(i,"liftZ"),ue=this._z2;te!=null?ue==null&&(this._z2=h.z2,h.z2+=te):ue!=null&&(h.z2=ue,this._z2=null);var me=f&&f.useNameLabel;Object(Ar.h)(h,P,{labelFetcher:d,labelDataIndex:i,defaultText:ve,inheritColor:jt,defaultOpacity:zt.opacity});function ve(Oe){return me?t.getName(Oe):Oa(t,Oe)}this._sizeX=s[0]/2,this._sizeY=s[1]/2;var Me=h.ensureState("emphasis");if(Me.style=p,h.ensureState("select").style=b,h.ensureState("blur").style=m,j){var Ee=Math.max(1.1,3/this._sizeY);Me.scaleX=this._sizeX*Ee,Me.scaleY=this._sizeY*Ee}this.setSymbolScale(1),Object(qe.o)(this,A,E)},r.prototype.setSymbolScale=function(t){this.scaleX=this.scaleY=t},r.prototype.fadeOut=function(t,i){var s=this.childAt(0),l=this._seriesModel,f=Object(Ur.a)(this).dataIndex,h=i&&i.animation;if(this.silent=s.silent=!0,i&&i.fadeLabel){var d=s.getTextContent();d&&Ze.removeElement(d,{style:{opacity:0}},l,{dataIndex:f,removeOpt:h,cb:function(){s.removeTextContent()}})}else s.removeTextContent();Ze.removeElement(s,{style:{opacity:0},scaleX:0,scaleY:0},l,{dataIndex:f,cb:t,removeOpt:h})},r.getSymbolSize=function(t,i){var s=t.getItemVisual(i,"symbolSize");return Object(y.isArray)(s)?s.slice():[+s,+s]},r}(pr.a);function hf(a,r){this.parent.drift(a,r)}var Ma=Tn;function cr(a,r,t,i){return r&&!isNaN(r[0])&&!isNaN(r[1])&&!(i.isIgnore&&i.isIgnore(t))&&!(i.clipShape&&!i.clipShape.contain(r[0],r[1]))&&a.getItemVisual(t,"symbol")!=="none"}function el(a){return a!=null&&!Object(y.isObject)(a)&&(a={isIgnore:a}),a||{}}function sn(a){var r=a.hostModel,t=r.getModel("emphasis");return{emphasisItemStyle:t.getModel("itemStyle").getItemStyle(),blurItemStyle:r.getModel(["blur","itemStyle"]).getItemStyle(),selectItemStyle:r.getModel(["select","itemStyle"]).getItemStyle(),focus:t.get("focus"),blurScope:t.get("blurScope"),hoverScale:t.get("scale"),labelStatesModels:Object(Ar.f)(r),cursorStyle:r.get("cursor")}}var ir=function(){function a(r){this.group=new pr.a,this._SymbolCtor=r||Ma}return a.prototype.updateData=function(r,t){t=el(t);var i=this.group,s=r.hostModel,l=this._data,f=this._SymbolCtor,h=t.disableAnimation,d=sn(r),p={disableAnimation:h},m=t.getSymbolPoint||function(b){return r.getItemLayout(b)};l||i.removeAll(),r.diff(l).add(function(b){var A=m(b);if(cr(r,A,b,t)){var E=new f(r,b,d,p);E.setPosition(A),r.setItemGraphicEl(b,E),i.add(E)}}).update(function(b,A){var E=l.getItemGraphicEl(A),P=m(b);if(!cr(r,P,b,t)){i.remove(E);return}if(!E)E=new f(r,b),E.setPosition(P);else{E.updateData(r,b,d,p);var j={x:P[0],y:P[1]};h?E.attr(j):Ze.updateProps(E,j,s)}i.add(E),r.setItemGraphicEl(b,E)}).remove(function(b){var A=l.getItemGraphicEl(b);A&&A.fadeOut(function(){i.remove(A)})}).execute(),this._getSymbolPoint=m,this._data=r},a.prototype.isPersistent=function(){return!0},a.prototype.updateLayout=function(){var r=this,t=this._data;t&&t.eachItemGraphicEl(function(i,s){var l=r._getSymbolPoint(s);i.setPosition(l),i.markRedraw()})},a.prototype.incrementalPrepareUpdate=function(r){this._seriesScope=sn(r),this._data=null,this.group.removeAll()},a.prototype.incrementalUpdate=function(r,t,i){i=el(i);function s(d){d.isGroup||(d.incremental=!0,d.ensureState("emphasis").hoverLayer=!0)}for(var l=r.start;l<r.end;l++){var f=t.getItemLayout(l);if(cr(t,f,l,i)){var h=new this._SymbolCtor(t,l,this._seriesScope);h.traverse(s),h.setPosition(f),this.group.add(h),t.setItemGraphicEl(l,h)}}},a.prototype.remove=function(r){var t=this.group,i=this._data;i&&r?i.eachItemGraphicEl(function(s){s.fadeOut(function(){t.remove(s)})}):t.removeAll()},a}(),Er=ir,Te=S("7hqr");function fn(a,r,t){var i=a.getBaseAxis(),s=a.getOtherAxis(i),l=tu(s,t),f=i.dim,h=s.dim,d=r.mapDimension(h),p=r.mapDimension(f),m=h==="x"||h==="radius"?1:0,b=Object(y.map)(a.dimensions,function(P){return r.mapDimension(P)}),A=!1,E=r.getCalculationInfo("stackResultDimension");return Object(Te.c)(r,b[0])&&(A=!0,b[0]=E),Object(Te.c)(r,b[1])&&(A=!0,b[1]=E),{dataDimsForPoint:b,valueStart:l,valueAxisDim:h,baseAxisDim:f,stacked:!!A,valueDim:d,baseDim:p,baseDataOffset:m,stackedOverDimension:r.getCalculationInfo("stackedOverDimension")}}function tu(a,r){var t=0,i=a.scale.getExtent();return r==="start"?t=i[0]:r==="end"?t=i[1]:i[0]>0?t=i[0]:i[1]<0&&(t=i[1]),t}function rl(a,r,t,i){var s=NaN;a.stacked&&(s=t.get(t.getCalculationInfo("stackedOverDimension"),i)),isNaN(s)&&(s=a.valueStart);var l=a.baseDataOffset,f=[];return f[l]=t.get(a.baseDim,i),f[1-l]=s,r.dataToPoint(f)}var nl=typeof Float32Array!="undefined",vf=nl?Float32Array:Array;function Qa(a){return Object(y.isArray)(a)?nl?new Float32Array(a):a:new vf(a)}function Ja(a,r){var t=[];return r.diff(a).add(function(i){t.push({cmd:"+",idx:i})}).update(function(i,s){t.push({cmd:"=",idx:s,idx1:i})}).remove(function(i){t.push({cmd:"-",idx:i})}).execute(),t}function il(a,r,t,i,s,l,f,h){for(var d=Ja(a,r),p=[],m=[],b=[],A=[],E=[],P=[],j=[],J=fn(s,r,f),dt=fn(l,a,h),St=a.getLayout("points")||[],Ot=r.getLayout("points")||[],wt=0;wt<d.length;wt++){var zt=d[wt],jt=!0,kt=void 0,te=void 0;switch(zt.cmd){case"=":kt=zt.idx*2,te=zt.idx1*2;var ue=St[kt],me=St[kt+1],ve=Ot[te],Me=Ot[te+1];(isNaN(ue)||isNaN(me))&&(ue=ve,me=Me),p.push(ue,me),m.push(ve,Me),b.push(t[kt],t[kt+1]),A.push(i[te],i[te+1]),j.push(r.getRawIndex(zt.idx1));break;case"+":var Ee=zt.idx,Oe=J.dataDimsForPoint,we=s.dataToPoint([r.get(Oe[0],Ee),r.get(Oe[1],Ee)]);te=Ee*2,p.push(we[0],we[1]),m.push(Ot[te],Ot[te+1]);var We=rl(J,s,r,Ee);b.push(We[0],We[1]),A.push(i[te],i[te+1]),j.push(r.getRawIndex(Ee));break;case"-":jt=!1}jt&&(E.push(zt),P.push(P.length))}P.sort(function(Xr,_n){return j[Xr]-j[_n]});for(var $e=p.length,Je=Qa($e),fr=Qa($e),Vr=Qa($e),wr=Qa($e),jr=[],wt=0;wt<P.length;wt++){var Yn=P[wt],bn=wt*2,Yr=Yn*2;Je[bn]=p[Yr],Je[bn+1]=p[Yr+1],fr[bn]=m[Yr],fr[bn+1]=m[Yr+1],Vr[bn]=b[Yr],Vr[bn+1]=b[Yr+1],wr[bn]=A[Yr],wr[bn+1]=A[Yr+1],jr[wt]=E[Yn]}return{current:Je,next:fr,stackedOnCurrent:Vr,stackedOnNext:wr,status:jr}}var $a=S("SKnc"),en=S("dqUG"),sr=S("4NO4"),un=S("IMiH"),bi=S("Sj9i"),vr=Math.min,Ni=Math.max;function Bi(a,r){return isNaN(a)||isNaN(r)}function hi(a,r,t,i,s,l,f,h,d){for(var p,m,b,A,E,P,j=t,J=0;J<i;J++){var dt=r[j*2],St=r[j*2+1];if(j>=s||j<0)break;if(Bi(dt,St)){if(d){j+=l;continue}break}if(j===t)a[l>0?"moveTo":"lineTo"](dt,St),b=dt,A=St;else{var Ot=dt-p,wt=St-m;if(Ot*Ot+wt*wt<.5){j+=l;continue}if(f>0){var zt=j+l,jt=r[zt*2],kt=r[zt*2+1],te=J+1;if(d)for(;Bi(jt,kt)&&te<i;)te++,zt+=l,jt=r[zt*2],kt=r[zt*2+1];var ue=.5,me=0,ve=0,Me=void 0,Ee=void 0;if(te>=i||Bi(jt,kt))E=dt,P=St;else{me=jt-p,ve=kt-m;var Oe=dt-p,we=jt-dt,We=St-m,$e=kt-St,Je=void 0,fr=void 0;h==="x"?(Je=Math.abs(Oe),fr=Math.abs(we),E=dt-Je*f,P=St,Me=dt+Je*f,Ee=St):h==="y"?(Je=Math.abs(We),fr=Math.abs($e),E=dt,P=St-Je*f,Me=dt,Ee=St+Je*f):(Je=Math.sqrt(Oe*Oe+We*We),fr=Math.sqrt(we*we+$e*$e),ue=fr/(fr+Je),E=dt-me*f*(1-ue),P=St-ve*f*(1-ue),Me=dt+me*f*ue,Ee=St+ve*f*ue,Me=vr(Me,Ni(jt,dt)),Ee=vr(Ee,Ni(kt,St)),Me=Ni(Me,vr(jt,dt)),Ee=Ni(Ee,vr(kt,St)),me=Me-dt,ve=Ee-St,E=dt-me*Je/fr,P=St-ve*Je/fr,E=vr(E,Ni(p,dt)),P=vr(P,Ni(m,St)),E=Ni(E,vr(p,dt)),P=Ni(P,vr(m,St)),me=dt-E,ve=St-P,Me=dt+me*fr/Je,Ee=St+ve*fr/Je)}a.bezierCurveTo(b,A,E,P,dt,St),b=Me,A=Ee}else a.lineTo(dt,St)}p=dt,m=St,j+=l}return J}var an=function(){function a(){this.smooth=0,this.smoothConstraint=!0}return a}(),ji=function(a){Object(de.b)(r,a);function r(t){var i=a.call(this,t)||this;return i.type="ec-polyline",i}return r.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},r.prototype.getDefaultShape=function(){return new an},r.prototype.buildPath=function(t,i){var s=i.points,l=0,f=s.length/2;if(i.connectNulls){for(;f>0&&Bi(s[f*2-2],s[f*2-1]);f--);for(;l<f&&Bi(s[l*2],s[l*2+1]);l++);}for(;l<f;)l+=hi(t,s,l,f,f,1,i.smooth,i.smoothMonotone,i.connectNulls)+1},r.prototype.getPointOn=function(t,i){this.path||(this.createPathProxy(),this.buildPath(this.path,this.shape));for(var s=this.path,l=s.data,f=un.a.CMD,h,d,p=i==="x",m=[],b=0;b<l.length;){var A=l[b++],E=void 0,P=void 0,j=void 0,J=void 0,dt=void 0,St=void 0,Ot=void 0;switch(A){case f.M:h=l[b++],d=l[b++];break;case f.L:if(E=l[b++],P=l[b++],Ot=p?(t-h)/(E-h):(t-d)/(P-d),Ot<=1&&Ot>=0){var wt=p?(P-d)*Ot+d:(E-h)*Ot+h;return p?[t,wt]:[wt,t]}h=E,d=P;break;case f.C:E=l[b++],P=l[b++],j=l[b++],J=l[b++],dt=l[b++],St=l[b++];var zt=p?Object(bi.f)(h,E,j,dt,t,m):Object(bi.f)(d,P,J,St,t,m);if(zt>0)for(var jt=0;jt<zt;jt++){var kt=m[jt];if(kt<=1&&kt>=0){var wt=p?Object(bi.a)(d,P,J,St,kt):Object(bi.a)(h,E,j,dt,kt);return p?[t,wt]:[wt,t]}}h=dt,d=St;break}}},r}(ot.b),la=function(a){Object(de.b)(r,a);function r(){return a!==null&&a.apply(this,arguments)||this}return r}(an),or=function(a){Object(de.b)(r,a);function r(t){var i=a.call(this,t)||this;return i.type="ec-polygon",i}return r.prototype.getDefaultShape=function(){return new la},r.prototype.buildPath=function(t,i){var s=i.points,l=i.stackedOnPoints,f=0,h=s.length/2,d=i.smoothMonotone;if(i.connectNulls){for(;h>0&&Bi(s[h*2-2],s[h*2-1]);h--);for(;f<h&&Bi(s[f*2],s[f*2+1]);f++);}for(;f<h;){var p=hi(t,s,f,h,h,1,i.smooth,d,i.connectNulls);hi(t,l,f+p-1,p,h,-1,i.stackedOnSmooth,d,i.connectNulls),f+=p+1,t.closePath()}},r}(ot.b),yn=S("6Ic6"),nn=S("x6Kt"),vi=S("SqI9");function Hr(a,r,t,i,s){var l=a.getArea(),f=l.x,h=l.y,d=l.width,p=l.height,m=t.get(["lineStyle","width"])||2;f-=m/2,h-=m/2,d+=m,p+=m,f=Math.floor(f),d=Math.round(d);var b=new nn.a({shape:{x:f,y:h,width:d,height:p}});if(r){var A=a.getBaseAxis(),E=A.isHorizontal(),P=A.inverse;E?(P&&(b.shape.x+=d),b.shape.width=0):(P||(b.shape.y+=p),b.shape.height=0);var j=typeof s=="function"?function(J){s(J,b)}:null;Ze.initProps(b,{shape:{width:d,height:p,x:f,y:h}},t,null,i,j)}return b}function dr(a,r,t){var i=a.getArea(),s=Object(Ne.u)(i.r0,1),l=Object(Ne.u)(i.r,1),f=new vi.a({shape:{cx:Object(Ne.u)(a.cx,1),cy:Object(Ne.u)(a.cy,1),r0:s,r:l,startAngle:i.startAngle,endAngle:i.endAngle,clockwise:i.clockwise}});if(r){var h=a.getBaseAxis().dim==="angle";h?f.shape.endAngle=i.startAngle:f.shape.r=s,Ze.initProps(f,{shape:{endAngle:i.endAngle,r:l}},t)}return f}function On(a,r,t,i,s){if(a){if(a.type==="polar")return dr(a,r,t);if(a.type==="cartesian2d")return Hr(a,r,t,i,s)}else return null;return null}function Fr(a,r){return a.type===r}var Pr=S("7aKB");function Br(a,r){if(a.length===r.length){for(var t=0;t<a.length;t++)if(a[t]!==r[t])return;return!0}}function cn(a){for(var r=Infinity,t=Infinity,i=-Infinity,s=-Infinity,l=0;l<a.length;){var f=a[l++],h=a[l++];isNaN(f)||(r=Math.min(f,r),i=Math.max(f,i)),isNaN(h)||(t=Math.min(h,t),s=Math.max(h,s))}return[[r,t],[i,s]]}function Ao(a,r){var t=cn(a),i=t[0],s=t[1],l=cn(r),f=l[0],h=l[1];return Math.max(Math.abs(i[0]-f[0]),Math.abs(i[1]-f[1]),Math.abs(s[0]-h[0]),Math.abs(s[1]-h[1]))}function Mo(a){return typeof a=="number"?a:a?.5:0}function gr(a,r,t){if(!t.valueDim)return[];for(var i=r.count(),s=Qa(i*2),l=0;l<i;l++){var f=rl(t,a,r,l);s[l*2]=f[0],s[l*2+1]=f[1]}return s}function Zr(a,r,t){for(var i=r.getBaseAxis(),s=i.dim==="x"||i.dim==="radius"?0:1,l=[],f=0,h=[],d=[],p=[];f<a.length-2;f+=2)switch(p[0]=a[f+2],p[1]=a[f+3],d[0]=a[f],d[1]=a[f+1],l.push(d[0],d[1]),t){case"end":h[s]=p[s],h[1-s]=d[1-s],l.push(h[0],h[1]);break;case"middle":var m=(d[s]+p[s])/2,b=[];h[s]=b[s]=m,h[1-s]=d[1-s],b[1-s]=p[1-s],l.push(h[0],h[1]),l.push(b[0],b[1]);break;default:h[s]=d[s],h[1-s]=p[1-s],l.push(h[0],h[1])}return l.push(a[f++],a[f++]),l}function Do(a,r){var t=a.getVisual("visualMeta");if(!(!t||!t.length||!a.count())&&r.type==="cartesian2d"){for(var i,s,l=t.length-1;l>=0;l--){var f=t[l].dimension,h=a.dimensions[f],d=a.getDimensionInfo(h);if(i=d&&d.coordDim,i==="x"||i==="y"){s=t[l];break}}if(!!s){var p=r.getAxis(i),m=y.map(s.stops,function(St){return{offset:0,coord:p.toGlobalCoord(p.dataToCoord(St.value)),color:St.color}}),b=m.length,A=s.outerColors.slice();b&&m[0].coord>m[b-1].coord&&(m.reverse(),A.reverse());var E=10,P=m[0].coord-E,j=m[b-1].coord+E,J=j-P;if(J<.001)return"transparent";y.each(m,function(St){St.offset=(St.coord-P)/J}),m.push({offset:b?m[b-1].offset:.5,color:A[1]||"transparent"}),m.unshift({offset:b?m[0].offset:.5,color:A[0]||"transparent"});var dt=new $a.a(0,0,0,0,m,!0);return dt[i]=P,dt[i+"2"]=j,dt}}}function Da(a,r,t){var i=a.get("showAllSymbol"),s=i==="auto";if(!(i&&!s)){var l=t.getAxesByScale("ordinal")[0];if(!!l&&!(s&&Co(l,r))){var f=r.mapDimension(l.dim),h={};return y.each(l.getViewLabels(),function(d){var p=l.scale.getRawOrdinalNumber(d.tickValue);h[p]=1}),function(d){return!h.hasOwnProperty(r.get(f,d))}}}}function Co(a,r){var t=a.getExtent(),i=Math.abs(t[1]-t[0])/a.scale.count();isNaN(i)&&(i=0);for(var s=r.count(),l=Math.max(1,Math.round(s/5)),f=0;f<s;f+=l)if(Ma.getSymbolSize(r,f)[a.isHorizontal()?1:0]*1.5>i)return!1;return!0}function ua(a,r){return isNaN(a)||isNaN(r)}function fs(a){for(var r=a.length/2;r>0&&ua(a[r*2-2],a[r*2-1]);r--);return r-1}function Ca(a,r){return[a[r*2],a[r*2+1]]}function di(a,r,t){for(var i=a.length/2,s=t==="x"?0:1,l,f,h=0,d=-1,p=0;p<i;p++)if(f=a[p*2+s],!(isNaN(f)||isNaN(a[p*2+1-s]))){if(p===0){l=f;continue}if(l<=r&&f>=r||l>=r&&f<=r){d=p;break}h=p,l=f}return{range:[h,d],t:(r-l)/(f-l)}}function eu(a,r,t,i){if(Fr(r,"cartesian2d")){var s=i.getModel("endLabel"),l=s.get("show"),f=s.get("valueAnimation"),h=i.getData(),d={lastFrameIndex:0},p=l?function(P,j){a._endLabelOnDuring(P,j,h,d,f,s,r)}:null,m=r.getBaseAxis().isHorizontal(),b=Hr(r,t,i,function(){var P=a._endLabel;P&&t&&d.originalX!=null&&P.attr({x:d.originalX,y:d.originalY})},p);if(!i.get("clip",!0)){var A=b.shape,E=Math.max(A.width,A.height);m?(A.y-=E,A.height+=E*2):(A.x-=E,A.width+=E*2)}return p&&p(1,b),b}else return dr(r,t,i)}function al(a,r){var t=r.getBaseAxis(),i=t.isHorizontal(),s=t.inverse,l=i?s?"right":"left":"center",f=i?"middle":s?"top":"bottom";return{normal:{align:a.get("align")||l,verticalAlign:a.get("verticalAlign")||f}}}var Mi=function(a){Object(de.b)(r,a);function r(){return a!==null&&a.apply(this,arguments)||this}return r.prototype.init=function(){var t=new pr.a,i=new Er;this.group.add(i.group),this._symbolDraw=i,this._lineGroup=t},r.prototype.render=function(t,i,s){var l=this,f=t.coordinateSystem,h=this.group,d=t.getData(),p=t.getModel("lineStyle"),m=t.getModel("areaStyle"),b=d.getLayout("points")||[],A=f.type==="polar",E=this._coordSys,P=this._symbolDraw,j=this._polyline,J=this._polygon,dt=this._lineGroup,St=t.get("animation"),Ot=!m.isEmpty(),wt=m.get("origin"),zt=fn(f,d,wt),jt=Ot&&gr(f,d,zt),kt=t.get("showSymbol"),te=kt&&!A&&Da(t,d,f),ue=this._data;ue&&ue.eachItemGraphicEl(function(jr,Yn){jr.__temp&&(h.remove(jr),ue.setItemGraphicEl(Yn,null))}),kt||P.remove(),h.add(dt);var me=A?!1:t.get("step"),ve;f&&f.getArea&&t.get("clip",!0)&&(ve=f.getArea(),ve.width!=null?(ve.x-=.1,ve.y-=.1,ve.width+=.2,ve.height+=.2):ve.r0&&(ve.r0-=.5,ve.r+=.5)),this._clipShapeForSymbol=ve;var Me=Do(d,f)||d.getVisual("style")[d.getVisual("drawType")];j&&E.type===f.type&&me===this._step?(Ot&&!J?J=this._newPolygon(b,jt):J&&!Ot&&(dt.remove(J),J=this._polygon=null),A||this._initOrUpdateEndLabel(t,f,Object(Pr.c)(Me)),dt.setClipPath(eu(this,f,!1,t)),kt&&P.updateData(d,{isIgnore:te,clipShape:ve,disableAnimation:!0,getSymbolPoint:function(jr){return[b[jr*2],b[jr*2+1]]}}),(!Br(this._stackedOnPoints,jt)||!Br(this._points,b))&&(St?this._doUpdateAnimation(d,jt,f,s,me,wt):(me&&(b=Zr(b,f,me),jt&&(jt=Zr(jt,f,me))),j.setShape({points:b}),J&&J.setShape({points:b,stackedOnPoints:jt})))):(kt&&P.updateData(d,{isIgnore:te,clipShape:ve,disableAnimation:!0,getSymbolPoint:function(jr){return[b[jr*2],b[jr*2+1]]}}),St&&this._initSymbolLabelAnimation(d,f,ve),me&&(b=Zr(b,f,me),jt&&(jt=Zr(jt,f,me))),j=this._newPolyline(b),Ot&&(J=this._newPolygon(b,jt)),A||this._initOrUpdateEndLabel(t,f,Object(Pr.c)(Me)),dt.setClipPath(eu(this,f,!0,t)));var Ee=t.get(["emphasis","focus"]),Oe=t.get(["emphasis","blurScope"]);if(j.useStyle(y.defaults(p.getLineStyle(),{fill:"none",stroke:Me,lineJoin:"bevel"})),Object(qe.I)(j,t,"lineStyle"),j.style.lineWidth>0&&t.get(["emphasis","lineStyle","width"])==="bolder"){var we=j.getState("emphasis").style;we.lineWidth=+j.style.lineWidth+1}Object(Ur.a)(j).seriesIndex=t.seriesIndex,Object(qe.o)(j,Ee,Oe);var We=Mo(t.get("smooth")),$e=t.get("smoothMonotone"),Je=t.get("connectNulls");if(j.setShape({smooth:We,smoothMonotone:$e,connectNulls:Je}),J){var fr=d.getCalculationInfo("stackedOnSeries"),Vr=0;J.useStyle(y.defaults(m.getAreaStyle(),{fill:Me,opacity:.7,lineJoin:"bevel",decal:d.getVisual("style").decal})),fr&&(Vr=Mo(fr.get("smooth"))),J.setShape({smooth:We,stackedOnSmooth:Vr,smoothMonotone:$e,connectNulls:Je}),Object(qe.I)(J,t,"areaStyle"),Object(Ur.a)(J).seriesIndex=t.seriesIndex,Object(qe.o)(J,Ee,Oe)}var wr=function(jr){l._changePolyState(jr)};d.eachItemGraphicEl(function(jr){jr&&(jr.onHoverStateChange=wr)}),this._polyline.onHoverStateChange=wr,this._data=d,this._coordSys=f,this._stackedOnPoints=jt,this._points=b,this._step=me,this._valueOrigin=wt},r.prototype.dispose=function(){},r.prototype.highlight=function(t,i,s,l){var f=t.getData(),h=sr.u(f,l);if(this._changePolyState("emphasis"),!(h instanceof Array)&&h!=null&&h>=0){var d=f.getLayout("points"),p=f.getItemGraphicEl(h);if(!p){var m=d[h*2],b=d[h*2+1];if(isNaN(m)||isNaN(b)||this._clipShapeForSymbol&&!this._clipShapeForSymbol.contain(m,b))return;p=new Ma(f,h),p.x=m,p.y=b,p.setZ(t.get("zlevel"),t.get("z"));var A=p.getSymbolPath().getTextContent();A&&(A.z2=this._polyline.z2+1),p.__temp=!0,f.setItemGraphicEl(h,p),p.stopSymbolAnimation(!0),this.group.add(p)}p.highlight()}else yn.a.prototype.highlight.call(this,t,i,s,l)},r.prototype.downplay=function(t,i,s,l){var f=t.getData(),h=sr.u(f,l);if(this._changePolyState("normal"),h!=null&&h>=0){var d=f.getItemGraphicEl(h);d&&(d.__temp?(f.setItemGraphicEl(h,null),this.group.remove(d)):d.downplay())}else yn.a.prototype.downplay.call(this,t,i,s,l)},r.prototype._changePolyState=function(t){var i=this._polygon;Object(qe.H)(this._polyline,t),i&&Object(qe.H)(i,t)},r.prototype._newPolyline=function(t){var i=this._polyline;return i&&this._lineGroup.remove(i),i=new ji({shape:{points:t},segmentIgnoreThreshold:2,z2:10}),this._lineGroup.add(i),this._polyline=i,i},r.prototype._newPolygon=function(t,i){var s=this._polygon;return s&&this._lineGroup.remove(s),s=new or({shape:{points:t,stackedOnPoints:i},segmentIgnoreThreshold:2}),this._lineGroup.add(s),this._polygon=s,s},r.prototype._initSymbolLabelAnimation=function(t,i,s){var l,f,h=i.getBaseAxis(),d=h.inverse;i.type==="cartesian2d"?(l=h.isHorizontal(),f=!1):i.type==="polar"&&(l=h.dim==="angle",f=!0);var p=t.hostModel,m=p.get("animationDuration");typeof m=="function"&&(m=m(null));var b=p.get("animationDelay")||0,A=typeof b=="function"?b(null):b;t.eachItemGraphicEl(function(E,P){var j=E;if(j){var J=[E.x,E.y],dt=void 0,St=void 0,Ot=void 0;if(f){var wt=s,zt=i.pointToCoord(J);l?(dt=wt.startAngle,St=wt.endAngle,Ot=-zt[1]/180*Math.PI):(dt=wt.r0,St=wt.r,Ot=zt[0])}else{var jt=s;l?(dt=jt.x,St=jt.x+jt.width,Ot=E.x):(dt=jt.y+jt.height,St=jt.y,Ot=E.y)}var kt=St===dt?0:(Ot-dt)/(St-dt);d&&(kt=1-kt);var te=typeof b=="function"?b(P):m*kt+A,ue=j.getSymbolPath(),me=ue.getTextContent();j.attr({scaleX:0,scaleY:0}),j.animateTo({scaleX:1,scaleY:1},{duration:200,delay:te}),me&&me.animateFrom({style:{opacity:0}},{duration:300,delay:te}),ue.disableLabelAnimation=!0}})},r.prototype._initOrUpdateEndLabel=function(t,i,s){var l=t.getModel("endLabel");if(l.get("show")){var f=t.getData(),h=this._polyline,d=this._endLabel;d||(d=this._endLabel=new en.a({z2:200}),d.ignoreClip=!0,h.setTextContent(this._endLabel),h.disableLabelAnimation=!0);var p=fs(f.getLayout("points"));p>=0&&(Object(Ar.h)(h,Object(Ar.f)(t,"endLabel"),{inheritColor:s,labelFetcher:t,labelDataIndex:p,defaultText:function(m,b,A){return A!=null?Aa(f,A):Oa(f,m)},enableTextSetter:!0},al(l,i)),h.textConfig.position=null)}else this._endLabel&&(this._polyline.removeTextContent(),this._endLabel=null)},r.prototype._endLabelOnDuring=function(t,i,s,l,f,h,d){var p=this._endLabel,m=this._polyline;if(p){t<1&&l.originalX==null&&(l.originalX=p.x,l.originalY=p.y);var b=s.getLayout("points"),A=s.hostModel,E=A.get("connectNulls"),P=h.get("precision"),j=h.get("distance")||0,J=d.getBaseAxis(),dt=J.isHorizontal(),St=J.inverse,Ot=i.shape,wt=St?dt?Ot.x:Ot.y+Ot.height:dt?Ot.x+Ot.width:Ot.y,zt=(dt?j:0)*(St?-1:1),jt=(dt?0:-j)*(St?-1:1),kt=dt?"x":"y",te=di(b,wt,kt),ue=te.range,me=ue[1]-ue[0],ve=void 0;if(me>=1){if(me>1&&!E){var Me=Ca(b,ue[0]);p.attr({x:Me[0]+zt,y:Me[1]+jt}),f&&(ve=A.getRawValue(ue[0]))}else{var Me=m.getPointOn(wt,kt);Me&&p.attr({x:Me[0]+zt,y:Me[1]+jt});var Ee=A.getRawValue(ue[0]),Oe=A.getRawValue(ue[1]);f&&(ve=sr.k(s,P,Ee,Oe,te.t))}l.lastFrameIndex=ue[0]}else{var we=t===1||l.lastFrameIndex>0?ue[0]:0,Me=Ca(b,we);f&&(ve=A.getRawValue(we)),p.attr({x:Me[0]+zt,y:Me[1]+jt})}f&&Object(Ar.g)(p).setLabelText(ve)}},r.prototype._doUpdateAnimation=function(t,i,s,l,f,h){var d=this._polyline,p=this._polygon,m=t.hostModel,b=il(this._data,t,this._stackedOnPoints,i,this._coordSys,s,this._valueOrigin,h),A=b.current,E=b.stackedOnCurrent,P=b.next,j=b.stackedOnNext;if(f&&(A=Zr(b.current,s,f),E=Zr(b.stackedOnCurrent,s,f),P=Zr(b.next,s,f),j=Zr(b.stackedOnNext,s,f)),Ao(A,P)>3e3||p&&Ao(E,j)>3e3){d.setShape({points:P}),p&&p.setShape({points:P,stackedOnPoints:j});return}d.shape.__points=b.current,d.shape.points=A;var J={shape:{points:P}};b.current!==A&&(J.shape.__points=b.next),d.stopAnimation(),Ze.updateProps(d,J,m),p&&(p.setShape({points:A,stackedOnPoints:E}),p.stopAnimation(),Ze.updateProps(p,{shape:{stackedOnPoints:j}},m),d.shape.points!==p.shape.points&&(p.shape.points=d.shape.points));for(var dt=[],St=b.status,Ot=0;Ot<St.length;Ot++){var wt=St[Ot].cmd;if(wt==="="){var zt=t.getItemGraphicEl(St[Ot].idx1);zt&&dt.push({el:zt,ptIdx:Ot})}}d.animators&&d.animators.length&&d.animators[0].during(function(){p&&p.dirtyShape();for(var jt=d.shape.__points,kt=0;kt<dt.length;kt++){var te=dt[kt].el,ue=dt[kt].ptIdx*2;te.x=jt[ue],te.y=jt[ue+1],te.markRedraw()}})},r.prototype.remove=function(t){var i=this.group,s=this._data;this._lineGroup.removeAll(),this._symbolDraw.remove(!0),s&&s.eachItemGraphicEl(function(l,f){l.__temp&&(i.remove(l),s.setItemGraphicEl(f,null))}),this._polyline=this._polygon=this._coordSys=this._points=this._stackedOnPoints=this._endLabel=this._data=null},r.type="line",r}(yn.a),Si=Mi,qa=S("zM3Q");function fa(a,r){return{seriesType:a,plan:Object(qa.a)(),reset:function(t){var i=t.getData(),s=t.coordinateSystem,l=t.pipelineContext,f=r||l.large;if(!!s){var h=Object(y.map)(s.dimensions,function(P){return i.mapDimension(P)}).slice(0,2),d=h.length,p=i.getCalculationInfo("stackResultDimension");Object(Te.c)(i,h[0])&&(h[0]=p),Object(Te.c)(i,h[1])&&(h[1]=p);var m=i.getDimensionInfo(h[0]),b=i.getDimensionInfo(h[1]),A=m&&m.index,E=b&&b.index;return d&&{progress:function(P,j){for(var J=P.end-P.start,dt=f&&Qa(J*d),St=[],Ot=[],wt=P.start,zt=0;wt<P.end;wt++){var jt=void 0;if(d===1){var kt=j.getByDimIdx(A,wt);jt=s.dataToPoint(kt,null,Ot)}else St[0]=j.getByDimIdx(A,wt),St[1]=j.getByDimIdx(E,wt),jt=s.dataToPoint(St,null,Ot);f?(dt[zt++]=jt[0],dt[zt++]=jt[1]):j.setItemLayout(wt,jt.slice())}f&&j.setLayout("points",dt)}}}}}}var df={average:function(a){for(var r=0,t=0,i=0;i<a.length;i++)isNaN(a[i])||(r+=a[i],t++);return t===0?NaN:r/t},sum:function(a){for(var r=0,t=0;t<a.length;t++)r+=a[t]||0;return r},max:function(a){for(var r=-Infinity,t=0;t<a.length;t++)a[t]>r&&(r=a[t]);return isFinite(r)?r:NaN},min:function(a){for(var r=Infinity,t=0;t<a.length;t++)a[t]<r&&(r=a[t]);return isFinite(r)?r:NaN},nearest:function(a){return a[0]}},pn=function(a){return Math.round(a.length/2)};function Eo(a){return{seriesType:a,reset:function(r,t,i){var s=r.getData(),l=r.get("sampling"),f=r.coordinateSystem,h=s.count();if(h>10&&f.type==="cartesian2d"&&l){var d=f.getBaseAxis(),p=f.getOtherAxis(d),m=d.getExtent(),b=i.getDevicePixelRatio(),A=Math.abs(m[1]-m[0])*(b||1),E=Math.round(h/A);if(E>1){l==="lttb"&&r.setData(s.lttbDownSample(s.mapDimension(p.dim),1/E));var P=void 0;typeof l=="string"?P=df[l]:typeof l=="function"&&(P=l),P&&r.setData(s.downSample(s.mapDimension(p.dim),1/E,P,pn))}}}}}function Ea(a){a.registerChartView(Si),a.registerSeriesModel(sa),a.registerLayout(fa("line",!0)),a.registerVisual({seriesType:"line",reset:function(r){var t=r.getData(),i=r.getModel("lineStyle").getLineStyle();i&&!i.stroke&&(i.stroke=t.getVisual("style").fill),t.setVisual("legendLineStyle",i)}}),a.registerProcessor(a.PRIORITY.PROCESSOR.STATISTIC,Eo("line"))}var Wr=S("nVfU"),Mr=function(a){Object(de.b)(r,a);function r(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=r.type,t}return r.prototype.getInitialData=function(t,i){return Object(_r.a)(this.getSource(),this,{useEncodeDefaulter:!0})},r.prototype.getMarkerPosition=function(t){var i=this.coordinateSystem;if(i){var s=i.dataToPoint(i.clampData(t)),l=this.getData(),f=l.getLayout("offset"),h=l.getLayout("size"),d=i.getBaseAxis().isHorizontal()?0:1;return s[d]+=f+h/2,s}return[NaN,NaN]},r.type="series.__base_bar__",r.defaultOption={zlevel:0,z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,barMinHeight:0,barMinAngle:0,large:!1,largeThreshold:400,progressive:3e3,progressiveChunkMode:"mod"},r}(Nr.a);Nr.a.registerClass(Mr);var ri=Mr,ni=S("iRjW"),cs=function(a){Object(de.b)(r,a);function r(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=r.type,t}return r.prototype.getInitialData=function(){return Object(_r.a)(this.getSource(),this,{useEncodeDefaulter:!0,createInvertedIndices:!!this.get("realtimeSort",!0)||null})},r.prototype.getProgressive=function(){return this.get("large")?this.get("progressive"):!1},r.prototype.getProgressiveThreshold=function(){var t=this.get("progressiveThreshold"),i=this.get("largeThreshold");return i>t&&(t=i),t},r.prototype.brushSelector=function(t,i,s){return s.rect(i.getItemLayout(t))},r.type="series.bar",r.dependencies=["grid","polar"],r.defaultOption=Object(ni.d)(ri.defaultOption,{clip:!0,roundCap:!1,showBackground:!1,backgroundStyle:{color:"rgba(180, 180, 180, 0.2)",borderColor:null,borderWidth:0,borderType:"solid",borderRadius:0,shadowBlur:0,shadowColor:null,shadowOffsetX:0,shadowOffsetY:0,opacity:1},select:{itemStyle:{borderColor:"#212121"}},realtimeSort:!1}),r}(ri),ru=cs,ca=S("iLNv"),nu=function(){function a(){this.cx=0,this.cy=0,this.r0=0,this.r=0,this.startAngle=0,this.endAngle=Math.PI*2,this.clockwise=!0}return a}(),pf=function(a){Object(de.b)(r,a);function r(t){var i=a.call(this,t)||this;return i.type="sausage",i}return r.prototype.getDefaultShape=function(){return new nu},r.prototype.buildPath=function(t,i){var s=i.cx,l=i.cy,f=Math.max(i.r0||0,0),h=Math.max(i.r,0),d=(h-f)*.5,p=f+d,m=i.startAngle,b=i.endAngle,A=i.clockwise,E=Math.cos(m),P=Math.sin(m),j=Math.cos(b),J=Math.sin(b),dt=A?b-m<Math.PI*2:m-b<Math.PI*2;dt&&(t.moveTo(E*f+s,P*f+l),t.arc(E*p+s,P*p+l,d,-Math.PI+m,m,!A)),t.arc(s,l,h,m,b,!A),t.moveTo(j*h+s,J*h+l),t.arc(j*p+s,J*p+l,d,b-Math.PI*2,b-Math.PI,!A),f!==0&&(t.arc(s,l,f,b,m,A),t.moveTo(E*f+s,J*f+l)),t.closePath()},r}(ot.b),Lo=pf,Gr=[0,0],hs=Math.max,La=Math.min;function Pa(a,r){var t=a.getArea&&a.getArea();if(Fr(a,"cartesian2d")){var i=a.getBaseAxis();if(i.type!=="category"||!i.onBand){var s=r.getLayout("bandWidth");i.isHorizontal()?(t.x-=s,t.width+=s*2):(t.y-=s,t.height+=s*2)}}return t}var iu=function(a){Object(de.b)(r,a);function r(){var t=a.call(this)||this;return t.type=r.type,t._isFirstFrame=!0,t}return r.prototype.render=function(t,i,s,l){this._model=t,this._removeOnRenderedListener(s),this._updateDrawMode(t);var f=t.get("coordinateSystem");(f==="cartesian2d"||f==="polar")&&(this._isLargeDraw?this._renderLarge(t,i,s):this._renderNormal(t,i,s,l))},r.prototype.incrementalPrepareRender=function(t){this._clear(),this._updateDrawMode(t),this._updateLargeClip(t)},r.prototype.incrementalRender=function(t,i){this._incrementalRenderLarge(t,i)},r.prototype._updateDrawMode=function(t){var i=t.pipelineContext.large;(this._isLargeDraw==null||i!==this._isLargeDraw)&&(this._isLargeDraw=i,this._clear())},r.prototype._renderNormal=function(t,i,s,l){var f=this.group,h=t.getData(),d=this._data,p=t.coordinateSystem,m=p.getBaseAxis(),b;p.type==="cartesian2d"?b=m.isHorizontal():p.type==="polar"&&(b=m.dim==="angle");var A=t.isAnimationEnabled()?t:null,E=wa(t,p);E&&this._enableRealtimeSort(E,h,s);var P=t.get("clip",!0)||E,j=Pa(p,h);f.removeClipPath();var J=t.get("roundCap",!0),dt=t.get("showBackground",!0),St=t.getModel("backgroundStyle"),Ot=St.get("borderRadius")||0,wt=[],zt=this._backgroundEls,jt=l&&l.isInitSort,kt=l&&l.type==="changeAxisOrder";function te(ve){var Me=ki[p.type](h,ve),Ee=au(p,b,Me);return Ee.useStyle(St.getItemStyle()),p.type==="cartesian2d"&&Ee.setShape("r",Ot),wt[ve]=Ee,Ee}h.diff(d).add(function(ve){var Me=h.getItemModel(ve),Ee=ki[p.type](h,ve,Me);if(dt&&te(ve),!!h.hasValue(ve)){var Oe=!1;P&&(Oe=to[p.type](j,Ee));var we=Ki[p.type](t,h,ve,Ee,b,A,m.model,!1,J);Fn(we,h,ve,Me,Ee,t,b,p.type==="polar"),jt?we.attr({shape:Ee}):E?ii(E,A,we,Ee,ve,b,!1,!1):Object(Ze.initProps)(we,{shape:Ee},t,ve),h.setItemGraphicEl(ve,we),f.add(we),we.ignore=Oe}}).update(function(ve,Me){var Ee=h.getItemModel(ve),Oe=ki[p.type](h,ve,Ee);if(dt){var we=void 0;zt.length===0?we=te(Me):(we=zt[Me],we.useStyle(St.getItemStyle()),p.type==="cartesian2d"&&we.setShape("r",Ot),wt[ve]=we);var We=ki[p.type](h,ve),$e=sl(b,We,p);Object(Ze.updateProps)(we,{shape:$e},A,ve)}var Je=d.getItemGraphicEl(Me);if(!h.hasValue(ve)){f.remove(Je),Je=null;return}var fr=!1;P&&(fr=to[p.type](j,Oe),fr&&f.remove(Je)),Je||(Je=Ki[p.type](t,h,ve,Oe,b,A,m.model,!!Je,J)),kt||Fn(Je,h,ve,Ee,Oe,t,b,p.type==="polar"),jt?Je.attr({shape:Oe}):E?ii(E,A,Je,Oe,ve,b,!0,kt):Object(Ze.updateProps)(Je,{shape:Oe},t,ve,null),h.setItemGraphicEl(ve,Je),Je.ignore=fr,f.add(Je)}).remove(function(ve){var Me=d.getItemGraphicEl(ve);Me&&Object(Ze.removeElementWithFadeOut)(Me,t,ve)}).execute();var ue=this._backgroundGroup||(this._backgroundGroup=new pr.a);ue.removeAll();for(var me=0;me<wt.length;++me)ue.add(wt[me]);f.add(ue),this._backgroundEls=wt,this._data=h},r.prototype._renderLarge=function(t,i,s){this._clear(),Ti(t,this.group),this._updateLargeClip(t)},r.prototype._incrementalRenderLarge=function(t,i){this._removeBackground(),Ti(i,this.group,!0)},r.prototype._updateLargeClip=function(t){var i=t.get("clip",!0)?On(t.coordinateSystem,!1,t):null;i?this.group.setClipPath(i):this.group.removeClipPath()},r.prototype._enableRealtimeSort=function(t,i,s){var l=this;if(!!i.count()){var f=t.baseAxis;if(this._isFirstFrame)this._dispatchInitSort(i,t,s),this._isFirstFrame=!1;else{var h=function(d){var p=i.getItemGraphicEl(d);if(p){var m=p.shape;return(f.isHorizontal()?Math.abs(m.height):Math.abs(m.width))||0}else return 0};this._onRendered=function(){l._updateSortWithinSameData(i,h,f,s)},s.getZr().on("rendered",this._onRendered)}}},r.prototype._dataSort=function(t,i,s){var l=[];return t.each(t.mapDimension(i.dim),function(f,h){var d=s(h);d=d==null?NaN:d,l.push({dataIndex:h,mappedValue:d,ordinalNumber:f})}),l.sort(function(f,h){return h.mappedValue-f.mappedValue}),{ordinalNumbers:Object(y.map)(l,function(f){return f.ordinalNumber})}},r.prototype._isOrderChangedWithinSameData=function(t,i,s){for(var l=s.scale,f=t.mapDimension(s.dim),h=Number.MAX_VALUE,d=0,p=l.getOrdinalMeta().categories.length;d<p;++d){var m=t.rawIndexOf(f,l.getRawOrdinalNumber(d)),b=m<0?Number.MIN_VALUE:i(t.indexOfRawIndex(m));if(b>h)return!0;h=b}return!1},r.prototype._isOrderDifferentInView=function(t,i){for(var s=i.scale,l=s.getExtent(),f=Math.max(0,l[0]),h=Math.min(l[1],s.getOrdinalMeta().categories.length-1);f<=h;++f)if(t.ordinalNumbers[f]!==s.getRawOrdinalNumber(f))return!0},r.prototype._updateSortWithinSameData=function(t,i,s,l){if(!!this._isOrderChangedWithinSameData(t,i,s)){var f=this._dataSort(t,s,i);this._isOrderDifferentInView(f,s)&&(this._removeOnRenderedListener(l),l.dispatchAction({type:"changeAxisOrder",componentType:s.dim+"Axis",axisId:s.index,sortInfo:f}))}},r.prototype._dispatchInitSort=function(t,i,s){var l=i.baseAxis,f=this._dataSort(t,l,function(h){return t.get(t.mapDimension(i.otherAxis.dim),h)});s.dispatchAction({type:"changeAxisOrder",componentType:l.dim+"Axis",isInitSort:!0,axisId:l.index,sortInfo:f,animation:{duration:0}})},r.prototype.remove=function(t,i){this._clear(this._model),this._removeOnRenderedListener(i)},r.prototype.dispose=function(t,i){this._removeOnRenderedListener(i)},r.prototype._removeOnRenderedListener=function(t){this._onRendered&&(t.getZr().off("rendered",this._onRendered),this._onRendered=null)},r.prototype._clear=function(t){var i=this.group,s=this._data;t&&t.isAnimationEnabled()&&s&&!this._isLargeDraw?(this._removeBackground(),this._backgroundEls=[],s.eachItemGraphicEl(function(l){Object(Ze.removeElementWithFadeOut)(l,t,Object(Ur.a)(l).dataIndex)})):i.removeAll(),this._data=null,this._isFirstFrame=!0},r.prototype._removeBackground=function(){this.group.remove(this._backgroundGroup),this._backgroundGroup=null},r.type="bar",r}(yn.a),to={cartesian2d:function(a,r){var t=r.width<0?-1:1,i=r.height<0?-1:1;t<0&&(r.x+=r.width,r.width=-r.width),i<0&&(r.y+=r.height,r.height=-r.height);var s=a.x+a.width,l=a.y+a.height,f=hs(r.x,a.x),h=La(r.x+r.width,s),d=hs(r.y,a.y),p=La(r.y+r.height,l),m=h<f,b=p<d;return r.x=m&&f>s?h:f,r.y=b&&d>l?p:d,r.width=m?0:h-f,r.height=b?0:p-d,t<0&&(r.x+=r.width,r.width=-r.width),i<0&&(r.y+=r.height,r.height=-r.height),m||b},polar:function(a,r){var t=r.r0<=r.r?1:-1;if(t<0){var i=r.r;r.r=r.r0,r.r0=i}var s=La(r.r,a.r),l=hs(r.r0,a.r0);r.r=s,r.r0=l;var f=s-l<0;if(t<0){var i=r.r;r.r=r.r0,r.r0=i}return f}},Ki={cartesian2d:function(a,r,t,i,s,l,f,h,d){var p=new nn.a({shape:Object(y.extend)({},i),z2:1});if(p.__dataIndex=t,p.name="item",l){var m=p.shape,b=s?"height":"width";m[b]=0}return p},polar:function(a,r,t,i,s,l,f,h,d){var p=i.startAngle<i.endAngle,m=!s&&d?Lo:vi.a,b=new m({shape:Object(y.defaults)({clockwise:p},i),z2:1});if(b.name="item",l){var A=b.shape,E=s?"r":"endAngle",P={};A[E]=s?0:i.startAngle,P[E]=i[E],(h?Ze.updateProps:Ze.initProps)(b,{shape:P},l)}return b}};function wa(a,r){var t=a.get("realtimeSort",!0),i=r.getBaseAxis();if(t&&i.type==="category"&&r.type==="cartesian2d")return{baseAxis:i,otherAxis:r.getOtherAxis(i)}}function ii(a,r,t,i,s,l,f,h){var d,p;l?(p={x:i.x,width:i.width},d={y:i.y,height:i.height}):(p={y:i.y,height:i.height},d={x:i.x,width:i.width}),h||(f?Ze.updateProps:Ze.initProps)(t,{shape:d},r,s,null);var m=r?a.baseAxis.model:null;(f?Ze.updateProps:Ze.initProps)(t,{shape:p},m,s)}var ki={cartesian2d:function(a,r,t){var i=a.getItemLayout(r),s=t?_i(t,i):0,l=i.width>0?1:-1,f=i.height>0?1:-1;return{x:i.x+l*s/2,y:i.y+f*s/2,width:i.width-l*s,height:i.height-f*s}},polar:function(a,r,t){var i=a.getItemLayout(r);return{cx:i.cx,cy:i.cy,r0:i.r0,r:i.r,startAngle:i.startAngle,endAngle:i.endAngle}}};function Ia(a){return a.startAngle!=null&&a.endAngle!=null&&a.startAngle===a.endAngle}function Fn(a,r,t,i,s,l,f,h){var d=r.getItemVisual(t,"style");h||a.setShape("r",i.get(["itemStyle","borderRadius"])||0),a.useStyle(d);var p=i.getShallow("cursor");if(p&&a.attr("cursor",p),!h){var m=f?s.height>0?"bottom":"top":s.width>0?"left":"right",b=Object(Ar.f)(i);Object(Ar.h)(a,b,{labelFetcher:l,labelDataIndex:t,defaultText:Oa(l.getData(),t),inheritColor:d.fill,defaultOpacity:d.opacity,defaultOutsidePosition:m});var A=a.getTextContent();Object(Ar.i)(A,b,l.getRawValue(t),function(P){return Aa(r,P)})}var E=i.getModel(["emphasis"]);Object(qe.o)(a,E.get("focus"),E.get("blurScope")),Object(qe.I)(a,i),Ia(s)&&(a.style.fill="none",a.style.stroke="none",Object(y.each)(a.states,function(P){P.style&&(P.style.fill=P.style.stroke="none")}))}function _i(a,r){var t=a.get(["itemStyle","borderColor"]);if(!t||t==="none")return 0;var i=a.get(["itemStyle","borderWidth"])||0,s=isNaN(r.width)?Number.MAX_VALUE:Math.abs(r.width),l=isNaN(r.height)?Number.MAX_VALUE:Math.abs(r.height);return Math.min(i,s,l)}var $r=function(){function a(){}return a}(),ol=function(a){Object(de.b)(r,a);function r(t){var i=a.call(this,t)||this;return i.type="largeBar",i}return r.prototype.getDefaultShape=function(){return new $r},r.prototype.buildPath=function(t,i){for(var s=i.points,l=this.__startPoint,f=this.__baseDimIdx,h=0;h<s.length;h+=2)l[f]=s[h+f],t.moveTo(l[0],l[1]),t.lineTo(s[h],s[h+1])},r}(ot.b);function Ti(a,r,t){var i=a.getData(),s=[],l=i.getLayout("valueAxisHorizontal")?1:0;s[1-l]=i.getLayout("valueAxisStart");var f=i.getLayout("largeDataIndices"),h=i.getLayout("barWidth"),d=a.getModel("backgroundStyle"),p=a.get("showBackground",!0);if(p){var m=i.getLayout("largeBackgroundPoints"),b=[];b[1-l]=i.getLayout("backgroundStart");var A=new ol({shape:{points:m},incremental:!!t,silent:!0,z2:0});A.__startPoint=b,A.__baseDimIdx=l,A.__largeDataIndices=f,A.__barWidth=h,Xn(A,d,i),r.add(A)}var E=new ol({shape:{points:i.getLayout("largePoints")},incremental:!!t});E.__startPoint=s,E.__baseDimIdx=l,E.__largeDataIndices=f,E.__barWidth=h,r.add(E),ro(E,a,i),Object(Ur.a)(E).seriesIndex=a.seriesIndex,a.get("silent")||(E.on("mousedown",Ra),E.on("mousemove",Ra))}var Ra=Object(ca.c)(function(a){var r=this,t=eo(r,a.offsetX,a.offsetY);Object(Ur.a)(r).dataIndex=t>=0?t:null},30,!1);function eo(a,r,t){var i=a.__baseDimIdx,s=1-i,l=a.shape.points,f=a.__largeDataIndices,h=Math.abs(a.__barWidth/2),d=a.__startPoint[s];Gr[0]=r,Gr[1]=t;for(var p=Gr[i],m=Gr[1-i],b=p-h,A=p+h,E=0,P=l.length/2;E<P;E++){var j=E*2,J=l[j+i],dt=l[j+s];if(J>=b&&J<=A&&(d<=dt?m>=d&&m<=dt:m>=dt&&m<=d))return f[E]}return-1}function ro(a,r,t){var i=t.getVisual("style");a.useStyle(Object(y.extend)({},i)),a.style.fill=null,a.style.stroke=i.fill,a.style.lineWidth=t.getLayout("barWidth")}function Xn(a,r,t){var i=r.get("borderColor")||r.get("color"),s=r.getItemStyle();a.useStyle(s),a.style.fill=null,a.style.stroke=i,a.style.lineWidth=t.getLayout("barWidth")}function sl(a,r,t){if(Fr(t,"cartesian2d")){var i=r,s=t.getArea();return{x:a?i.x:s.x,y:a?s.y:i.y,width:a?i.width:s.width,height:a?s.height:i.height}}else{var s=t.getArea(),l=r;return{cx:s.cx,cy:s.cy,r0:a?s.r0:l.r0,r:a?s.r:l.r,startAngle:a?l.startAngle:0,endAngle:a?l.endAngle:Math.PI*2}}}function au(a,r,t){var i=a.type==="polar"?vi.a:nn.a;return new i({shape:sl(r,t,a),silent:!0,z2:0})}var zi=iu;function Po(a){a.registerChartView(zi),a.registerSeriesModel(ru),a.registerLayout(a.PRIORITY.VISUAL.LAYOUT,y.curry(Wr.c,"bar")),a.registerLayout(a.PRIORITY.VISUAL.PROGRESSIVE_LAYOUT,Wr.b),a.registerProcessor(a.PRIORITY.PROCESSOR.STATISTIC,Eo("bar")),a.registerAction({type:"changeAxisOrder",event:"changeAxisOrder",update:"update"},function(r,t){var i=r.componentType||"series";t.eachComponent({mainType:i,query:r},function(s){r.sortInfo&&s.axis.setCategorySortInfo(r.sortInfo)})})}var ha=S("87sf"),Tr=S("+TT/"),va=Math.PI*2,Qi=Math.PI/180;function wo(a,r){return Tr.g(a.getBoxLayoutParams(),{width:r.getWidth(),height:r.getHeight()})}function Io(a,r,t){r.eachSeriesByType(a,function(i){var s=i.getData(),l=s.mapDimension("value"),f=wo(i,t),h=i.get("center"),d=i.get("radius");y.isArray(d)||(d=[0,d]),y.isArray(h)||(h=[h,h]);var p=Object(Ne.o)(f.width,t.getWidth()),m=Object(Ne.o)(f.height,t.getHeight()),b=Math.min(p,m),A=Object(Ne.o)(h[0],p)+f.x,E=Object(Ne.o)(h[1],m)+f.y,P=Object(Ne.o)(d[0],b/2),j=Object(Ne.o)(d[1],b/2),J=-i.get("startAngle")*Qi,dt=i.get("minAngle")*Qi,St=0;s.each(l,function(Oe){!isNaN(Oe)&&St++});var Ot=s.getSum(l),wt=Math.PI/(Ot||St)*2,zt=i.get("clockwise"),jt=i.get("roseType"),kt=i.get("stillShowZeroSum"),te=s.getDataExtent(l);te[0]=0;var ue=va,me=0,ve=J,Me=zt?1:-1;if(s.setLayout({viewRect:f,r:j}),s.each(l,function(Oe,we){var We;if(isNaN(Oe)){s.setItemLayout(we,{angle:NaN,startAngle:NaN,endAngle:NaN,clockwise:zt,cx:A,cy:E,r0:P,r:jt?NaN:j});return}jt!=="area"?We=Ot===0&&kt?wt:Oe*wt:We=va/St,We<dt?(We=dt,ue-=dt):me+=Oe;var $e=ve+Me*We;s.setItemLayout(we,{angle:We,startAngle:ve,endAngle:$e,clockwise:zt,cx:A,cy:E,r0:P,r:jt?Object(Ne.k)(Oe,te,[P,j]):j}),ve=$e}),ue<va&&St)if(ue<=.001){var Ee=va/St;s.each(l,function(Oe,we){if(!isNaN(Oe)){var We=s.getItemLayout(we);We.angle=Ee,We.startAngle=J+Me*we*Ee,We.endAngle=J+Me*(we+1)*Ee}})}else wt=ue/me,ve=J,s.each(l,function(Oe,we){if(!isNaN(Oe)){var We=s.getItemLayout(we),$e=We.angle===dt?dt:Oe*wt;We.startAngle=ve,We.endAngle=ve+Me*$e,ve+=Me*$e}})})}function da(a){return{seriesType:a,reset:function(r,t){var i=t.findComponents({mainType:"legend"});if(!(!i||!i.length)){var s=r.getData();s.filterSelf(function(l){for(var f=s.getName(l),h=0;h<i.length;h++)if(!i[h].isSelected(f))return!1;return!0})}}}}var pi=S("1Jh7"),pa=S("3Oj7"),Fi=S("ibaq"),ou=S("I1WP"),no=Math.PI/180;function io(a,r,t,i,s,l,f,h,d,p){if(a.length<2)return;function m(j){for(var J=j.rB,dt=J*J,St=0;St<j.list.length;St++){var Ot=j.list[St],wt=Math.abs(Ot.label.y-t),zt=i+Ot.len,jt=zt*zt,kt=Math.sqrt((1-Math.abs(wt*wt/dt))*jt);Ot.label.x=r+(kt+Ot.len2)*s}}function b(j){for(var J={list:[],maxY:0},dt={list:[],maxY:0},St=0;St<j.length;St++)if(j[St].labelAlignTo==="none"){var Ot=j[St],wt=Ot.label.y>t?dt:J,zt=Math.abs(Ot.label.y-t);if(zt>wt.maxY){var jt=Ot.label.x-r-Ot.len2*s,kt=i+Ot.len,te=Math.abs(jt)<kt?Math.sqrt(zt*zt/(1-jt*jt/kt/kt)):kt;wt.rB=te,wt.maxY=zt}wt.list.push(Ot)}m(J),m(dt)}for(var A=a.length,E=0;E<A;E++)if(a[E].position==="outer"&&a[E].labelAlignTo==="labelLine"){var P=a[E].label.x-p;a[E].linePoints[1][0]+=P,a[E].label.x=p}Object(ou.d)(a,d,d+f)&&b(a)}function su(a,r,t,i,s,l,f,h){for(var d=[],p=[],m=Number.MAX_VALUE,b=-Number.MAX_VALUE,A=0;A<a.length;A++){var E=a[A].label;ga(a[A])||(E.x<r?(m=Math.min(m,E.x),d.push(a[A])):(b=Math.max(b,E.x),p.push(a[A])))}io(p,r,t,i,1,s,l,f,h,b),io(d,r,t,i,-1,s,l,f,h,m);for(var A=0;A<a.length;A++){var P=a[A],E=P.label;if(!ga(P)){var j=P.linePoints;if(j){var J=P.labelAlignTo==="edge",dt=P.rect.width,St=void 0;J?E.x<r?St=j[2][0]-P.labelDistance-f-P.edgeDistance:St=f+s-P.edgeDistance-j[2][0]-P.labelDistance:E.x<r?St=E.x-f-P.bleedMargin:St=f+s-E.x-P.bleedMargin,St<P.rect.width&&(P.label.style.width=St,P.labelAlignTo==="edge"&&(dt=St));var Ot=j[1][0]-j[2][0];J?E.x<r?j[2][0]=f+P.edgeDistance+dt+P.labelDistance:j[2][0]=f+s-P.edgeDistance-dt-P.labelDistance:(E.x<r?j[2][0]=E.x+P.labelDistance:j[2][0]=E.x-P.labelDistance,j[1][0]=j[2][0]+Ot),j[1][1]=j[2][1]=E.y}}}}function ga(a){return a.position==="center"}function Ro(a){var r=a.getData(),t=[],i,s,l=!1,f=(a.get("minShowLabelAngle")||0)*no,h=r.getLayout("viewRect"),d=r.getLayout("r"),p=h.width,m=h.x,b=h.y,A=h.height;function E(jt){jt.ignore=!0}function P(jt){if(!jt.ignore)return!0;for(var kt in jt.states)if(jt.states[kt].ignore===!1)return!0;return!1}r.each(function(jt){var kt=r.getItemGraphicEl(jt),te=kt.shape,ue=kt.getTextContent(),me=kt.getTextGuideLine(),ve=r.getItemModel(jt),Me=ve.getModel("label"),Ee=Me.get("position")||ve.get(["emphasis","label","position"]),Oe=Me.get("distanceToLabelLine"),we=Me.get("alignTo"),We=Object(Ne.o)(Me.get("edgeDistance"),p),$e=Me.get("bleedMargin"),Je=ve.getModel("labelLine"),fr=Je.get("length");fr=Object(Ne.o)(fr,p);var Vr=Je.get("length2");if(Vr=Object(Ne.o)(Vr,p),Math.abs(te.endAngle-te.startAngle)<f){Object(y.each)(ue.states,E),ue.ignore=!0;return}if(!!P(ue)){var wr=(te.startAngle+te.endAngle)/2,jr=Math.cos(wr),Yn=Math.sin(wr),bn,Yr,Xr,_n;i=te.cx,s=te.cy;var ln=Ee==="inside"||Ee==="inner";if(Ee==="center")bn=te.cx,Yr=te.cy,_n="center";else{var Pn=(ln?(te.r+te.r0)/2*jr:te.r*jr)+i,ei=(ln?(te.r+te.r0)/2*Yn:te.r*Yn)+s;if(bn=Pn+jr*3,Yr=ei+Yn*3,!ln){var Ri=Pn+jr*(fr+d-te.r),ci=ei+Yn*(fr+d-te.r),ea=Ri+(jr<0?-1:1)*Vr,Ta=ci;we==="edge"?bn=jr<0?m+We:m+p-We:bn=ea+(jr<0?-Oe:Oe),Yr=Ta,Xr=[[Pn,ei],[Ri,ci],[ea,Ta]]}_n=ln?"center":we==="edge"?jr>0?"right":"left":jr>0?"left":"right"}var ka,cf=Me.get("rotate");if(typeof cf=="number"?ka=cf*(Math.PI/180):ka=cf?jr<0?-wr+Math.PI:-wr:0,l=!!ka,ue.x=bn,ue.y=Yr,ue.rotation=ka,ue.setStyle({verticalAlign:"middle"}),ln){ue.setStyle({align:_n});var Yy=ue.states.select;Yy&&(Yy.x+=ue.x,Yy.y+=ue.y)}else{var ql=ue.getBoundingRect().clone();ql.applyTransform(ue.getComputedTransform());var Zx=(ue.style.margin||0)+2.1;ql.y-=Zx/2,ql.height+=Zx,t.push({label:ue,labelLine:me,position:Ee,len:fr,len2:Vr,minTurnAngle:Je.get("minTurnAngle"),maxSurfaceAngle:Je.get("maxSurfaceAngle"),surfaceNormal:new pa.a(jr,Yn),linePoints:Xr,textAlign:_n,labelDistance:Oe,labelAlignTo:we,edgeDistance:We,bleedMargin:$e,rect:ql})}kt.setTextConfig({inside:ln})}}),!l&&a.get("avoidLabelOverlap")&&su(t,i,s,d,p,A,m,b);for(var j=0;j<t.length;j++){var J=t[j],dt=J.label,St=J.labelLine,Ot=isNaN(dt.x)||isNaN(dt.y);if(dt){dt.setStyle({align:J.textAlign}),Ot&&(Object(y.each)(dt.states,E),dt.ignore=!0);var wt=dt.states.select;wt&&(wt.x+=dt.x,wt.y+=dt.y)}if(St){var zt=J.linePoints;Ot||!zt?(Object(y.each)(St.states,E),St.ignore=!0):(Object(Fi.c)(zt,J.minTurnAngle),Object(Fi.b)(zt,J.surfaceNormal,J.maxSurfaceAngle),St.setShape({points:zt}),dt.__hostTarget.textGuideLineConfig={anchor:new pa.a(zt[0][0],zt[0][1])})}}}function Na(a,r){var t=a.get("borderRadius");return t==null?null:(Object(y.isArray)(t)||(t=[t,t]),{innerCornerRadius:Object(gt.h)(t[0],r.r0),cornerRadius:Object(gt.h)(t[1],r.r)})}var ra=function(a){Object(de.b)(r,a);function r(t,i,s){var l=a.call(this)||this;l.z2=2;var f=new en.a;return l.setTextContent(f),l.updateData(t,i,s,!0),l}return r.prototype.updateData=function(t,i,s,l){var f=this,h=t.hostModel,d=t.getItemModel(i),p=d.getModel("emphasis"),m=t.getItemLayout(i),b=Object(y.extend)(Na(d.getModel("itemStyle"),m)||{},m);if(isNaN(b.startAngle)){f.setShape(b);return}if(l){f.setShape(b);var A=h.getShallow("animationType");A==="scale"?(f.shape.r=m.r0,Ze.initProps(f,{shape:{r:m.r}},h,i)):s!=null?(f.setShape({startAngle:s,endAngle:s}),Ze.initProps(f,{shape:{startAngle:m.startAngle,endAngle:m.endAngle}},h,i)):(f.shape.endAngle=m.startAngle,Ze.updateProps(f,{shape:{endAngle:m.endAngle}},h,i))}else Ze.updateProps(f,{shape:b},h,i);f.useStyle(t.getItemVisual(i,"style")),Object(qe.I)(f,d);var E=(m.startAngle+m.endAngle)/2,P=h.get("selectedOffset"),j=Math.cos(E)*P,J=Math.sin(E)*P,dt=d.getShallow("cursor");dt&&f.attr("cursor",dt),this._updateLabel(h,t,i),f.ensureState("emphasis").shape=Object(de.a)({r:m.r+(p.get("scale")&&p.get("scaleSize")||0)},Na(p.getModel("itemStyle"),m)),Object(y.extend)(f.ensureState("select"),{x:j,y:J,shape:Na(d.getModel(["select","itemStyle"]),m)}),Object(y.extend)(f.ensureState("blur"),{shape:Na(d.getModel(["blur","itemStyle"]),m)});var St=f.getTextGuideLine(),Ot=f.getTextContent();St&&Object(y.extend)(St.ensureState("select"),{x:j,y:J}),Object(y.extend)(Ot.ensureState("select"),{x:j,y:J}),Object(qe.o)(this,p.get("focus"),p.get("blurScope"))},r.prototype._updateLabel=function(t,i,s){var l=this,f=i.getItemModel(s),h=f.getModel("labelLine"),d=i.getItemVisual(s,"style"),p=d&&d.fill,m=d&&d.opacity;Object(Ar.h)(l,Object(Ar.f)(f),{labelFetcher:i.hostModel,labelDataIndex:s,inheritColor:p,defaultOpacity:m,defaultText:t.getFormattedLabel(s,"normal")||i.getName(s)});var b=l.getTextContent();l.setTextConfig({position:null,rotation:null}),b.attr({z2:10});var A=t.get(["label","position"]);if(A!=="outside"&&A!=="outer")l.removeTextGuideLine();else{var E=this.getTextGuideLine();E||(E=new pi.a,this.setTextGuideLine(E)),Object(Fi.d)(this,Object(Fi.a)(f),{stroke:p,opacity:Object(y.retrieve3)(h.get(["lineStyle","opacity"]),m,1)})}},r}(vi.a),lu=function(a){Object(de.b)(r,a);function r(){var t=a!==null&&a.apply(this,arguments)||this;return t.ignoreLabelLineUpdate=!0,t}return r.prototype.init=function(){var t=new pr.a;this._sectorGroup=t},r.prototype.render=function(t,i,s,l){var f=t.getData(),h=this._data,d=this.group,p;if(!h&&f.count()>0){for(var m=f.getItemLayout(0),b=1;isNaN(m&&m.startAngle)&&b<f.count();++b)m=f.getItemLayout(b);m&&(p=m.startAngle)}f.diff(h).add(function(A){var E=new ra(f,A,p);f.setItemGraphicEl(A,E),d.add(E)}).update(function(A,E){var P=h.getItemGraphicEl(E);P.updateData(f,A,p),P.off("click"),d.add(P),f.setItemGraphicEl(A,P)}).remove(function(A){var E=h.getItemGraphicEl(A);Ze.removeElementWithFadeOut(E,t,A)}).execute(),Ro(t),t.get("animationTypeUpdate")!=="expansion"&&(this._data=f)},r.prototype.dispose=function(){},r.prototype.containPoint=function(t,i){var s=i.getData(),l=s.getItemLayout(0);if(l){var f=t[0]-l.cx,h=t[1]-l.cy,d=Math.sqrt(f*f+h*h);return d<=l.r&&d>=l.r0}},r.type="pie",r}(yn.a),gi=lu,No=S("sdST"),Zn=S("YXkt");function Di(a,r,t){r=Object(y.isArray)(r)&&{coordDimensions:r}||Object(y.extend)({},r);var i=a.getSource(),s=Object(No.a)(i,r),l=new Zn.a(s,a);return l.initData(i,t),l}var ma=S("D5nY"),Ci=function(){function a(r,t){this._getDataWithEncodedVisual=r,this._getRawData=t}return a.prototype.getAllNames=function(){var r=this._getRawData();return r.mapArray(r.getName)},a.prototype.containName=function(r){var t=this._getRawData();return t.indexOfName(r)>=0},a.prototype.indexOfName=function(r){var t=this._getDataWithEncodedVisual();return t.indexOfName(r)},a.prototype.getItemVisual=function(r,t){var i=this._getDataWithEncodedVisual();return i.getItemVisual(r,t)},a}(),xn=Ci,ya=function(a){Object(de.b)(r,a);function r(){var t=a!==null&&a.apply(this,arguments)||this;return t.useColorPaletteOnData=!0,t}return r.prototype.init=function(t){a.prototype.init.apply(this,arguments),this.legendVisualProvider=new xn(y.bind(this.getData,this),y.bind(this.getRawData,this)),this._defaultLabelLine(t)},r.prototype.mergeOption=function(){a.prototype.mergeOption.apply(this,arguments)},r.prototype.getInitialData=function(){return Di(this,{coordDimensions:["value"],encodeDefaulter:y.curry(ma.d,this)})},r.prototype.getDataParams=function(t){var i=this.getData(),s=a.prototype.getDataParams.call(this,t),l=[];return i.each(i.mapDimension("value"),function(f){l.push(f)}),s.percent=Object(Ne.d)(l,t,i.hostModel.get("percentPrecision")),s.$vars.push("percent"),s},r.prototype._defaultLabelLine=function(t){sr.f(t,"labelLine",["show"]);var i=t.labelLine,s=t.emphasis.labelLine;i.show=i.show&&t.label.show,s.show=s.show&&t.emphasis.label.show},r.type="series.pie",r.defaultOption={zlevel:0,z:2,legendHoverLink:!0,center:["50%","50%"],radius:[0,"75%"],clockwise:!0,startAngle:90,minAngle:0,minShowLabelAngle:0,selectedOffset:10,percentPrecision:2,stillShowZeroSum:!0,left:0,top:0,right:0,bottom:0,width:null,height:null,label:{rotate:0,show:!0,overflow:"truncate",position:"outer",alignTo:"none",edgeDistance:"25%",bleedMargin:10,distanceToLabelLine:5},labelLine:{show:!0,length:15,length2:15,smooth:!1,minTurnAngle:90,maxSurfaceAngle:90,lineStyle:{width:1,type:"solid"}},itemStyle:{borderWidth:1},labelLayout:{hideOverlap:!0},emphasis:{scale:!0,scaleSize:5},avoidLabelOverlap:!0,animationType:"expansion",animationDuration:1e3,animationTypeUpdate:"transition",animationEasingUpdate:"cubicInOut",animationDurationUpdate:500,animationEasing:"cubicInOut"},r}(Nr.a),Ui=ya;function vs(a){a.registerChartView(gi),a.registerSeriesModel(Ui),Object(ha.a)("pie",a.registerAction),a.registerLayout(Object(y.curry)(Io,"pie")),a.registerProcessor(da("pie"))}var ds=function(a){Object(de.b)(r,a);function r(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=r.type,t.hasSymbolVisual=!0,t}return r.prototype.getInitialData=function(t,i){return Object(_r.a)(this.getSource(),this,{useEncodeDefaulter:!0})},r.prototype.getProgressive=function(){var t=this.option.progressive;return t==null?this.option.large?5e3:this.get("progressive"):t},r.prototype.getProgressiveThreshold=function(){var t=this.option.progressiveThreshold;return t==null?this.option.large?1e4:this.get("progressiveThreshold"):t},r.prototype.brushSelector=function(t,i,s){return s.point(i.getItemLayout(t))},r.type="series.scatter",r.dependencies=["grid","polar","geo","singleAxis","calendar"],r.defaultOption={coordinateSystem:"cartesian2d",zlevel:0,z:2,legendHoverLink:!0,symbolSize:10,large:!1,largeThreshold:2e3,itemStyle:{opacity:.8},emphasis:{scale:!0},clip:!0,select:{itemStyle:{borderColor:"#212121"}}},r}(Nr.a),Bo=ds,Ba=S("OS9S"),na=4,ja=function(){function a(){}return a}(),Ei=function(a){Object(de.b)(r,a);function r(t){return a.call(this,t)||this}return r.prototype.getDefaultShape=function(){return new ja},r.prototype.buildPath=function(t,i){var s=i.points,l=i.size,f=this.symbolProxy,h=f.shape,d=t.getContext?t.getContext():t,p=d&&l[0]<na;if(p){this._ctx=d;return}this._ctx=null;for(var m=0;m<s.length;){var b=s[m++],A=s[m++];isNaN(b)||isNaN(A)||this.softClipShape&&!this.softClipShape.contain(b,A)||(h.x=b-l[0]/2,h.y=A-l[1]/2,h.width=l[0],h.height=l[1],f.buildPath(t,h,!0))}},r.prototype.afterBrush=function(){var t=this.shape,i=t.points,s=t.size,l=this._ctx;if(!!l)for(var f=0;f<i.length;){var h=i[f++],d=i[f++];isNaN(h)||isNaN(d)||this.softClipShape&&!this.softClipShape.contain(h,d)||l.fillRect(h-s[0]/2,d-s[1]/2,s[0],s[1])}},r.prototype.findDataIndex=function(t,i){for(var s=this.shape,l=s.points,f=s.size,h=Math.max(f[0],4),d=Math.max(f[1],4),p=l.length/2-1;p>=0;p--){var m=p*2,b=l[m]-h/2,A=l[m+1]-d/2;if(t>=b&&i>=A&&t<=b+h&&i<=A+d)return p}return-1},r}(ot.b),jo=function(){function a(){this.group=new pr.a}return a.prototype.isPersistent=function(){return!this._incremental},a.prototype.updateData=function(r,t){this.group.removeAll();var i=new Ei({rectHover:!0,cursor:"default"});i.setShape({points:r.getLayout("points")}),this._setCommon(i,r,!1,t),this.group.add(i),this._incremental=null},a.prototype.updateLayout=function(r){if(!this._incremental){var t=r.getLayout("points");this.group.eachChild(function(i){if(i.startIndex!=null){var s=(i.endIndex-i.startIndex)*2,l=i.startIndex*4*2;t=new Float32Array(t.buffer,l,s)}i.setShape("points",t)})}},a.prototype.incrementalPrepareUpdate=function(r){this.group.removeAll(),this._clearIncremental(),r.count()>2e6?(this._incremental||(this._incremental=new Ba.a({silent:!0})),this.group.add(this._incremental)):this._incremental=null},a.prototype.incrementalUpdate=function(r,t,i){var s;this._incremental?(s=new Ei,this._incremental.addDisplayable(s,!0)):(s=new Ei({rectHover:!0,cursor:"default",startIndex:r.start,endIndex:r.end}),s.incremental=!0,this.group.add(s)),s.setShape({points:t.getLayout("points")}),this._setCommon(s,t,!!this._incremental,i)},a.prototype._setCommon=function(r,t,i,s){var l=t.hostModel;s=s||{};var f=t.getVisual("symbolSize");r.setShape("size",f instanceof Array?f:[f,f]),r.softClipShape=s.clipShape||null,r.symbolProxy=Object(lr.a)(t.getVisual("symbol"),0,0,0,0),r.setColor=r.symbolProxy.setColor;var h=r.shape.size[0]<na;r.useStyle(l.getModel("itemStyle").getItemStyle(h?["color","shadowBlur","shadowColor"]:["color"]));var d=t.getVisual("style"),p=d&&d.fill;if(p&&r.setColor(p),!i){var m=Object(Ur.a)(r);m.seriesIndex=l.seriesIndex,r.on("mousemove",function(b){m.dataIndex=null;var A=r.findDataIndex(b.offsetX,b.offsetY);A>=0&&(m.dataIndex=A+(r.startIndex||0))})}},a.prototype.remove=function(){this._clearIncremental(),this._incremental=null,this.group.removeAll()},a.prototype._clearIncremental=function(){var r=this._incremental;r&&r.clearDisplaybles()},a}(),zo=jo,Kn=function(a){Object(de.b)(r,a);function r(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=r.type,t}return r.prototype.render=function(t,i,s){var l=t.getData(),f=this._updateSymbolDraw(l,t);f.updateData(l,{clipShape:this._getClipShape(t)}),this._finished=!0},r.prototype.incrementalPrepareRender=function(t,i,s){var l=t.getData(),f=this._updateSymbolDraw(l,t);f.incrementalPrepareUpdate(l),this._finished=!1},r.prototype.incrementalRender=function(t,i,s){this._symbolDraw.incrementalUpdate(t,i.getData(),{clipShape:this._getClipShape(i)}),this._finished=t.end===i.getData().count()},r.prototype.updateTransform=function(t,i,s){var l=t.getData();if(this.group.dirty(),!this._finished||l.count()>1e4||!this._symbolDraw.isPersistent())return{update:!0};var f=fa("").reset(t,i,s);f.progress&&f.progress({start:0,end:l.count(),count:l.count()},l),this._symbolDraw.updateLayout(l)},r.prototype._getClipShape=function(t){var i=t.coordinateSystem,s=i&&i.getArea&&i.getArea();return t.get("clip",!0)?s:null},r.prototype._updateSymbolDraw=function(t,i){var s=this._symbolDraw,l=i.pipelineContext,f=l.large;return(!s||f!==this._isLargeDraw)&&(s&&s.remove(),s=this._symbolDraw=f?new zo:new Er,this._isLargeDraw=f,this.group.removeAll()),this.group.add(s.group),s},r.prototype.remove=function(t,i){this._symbolDraw&&this._symbolDraw.remove(!0),this._symbolDraw=null},r.prototype.dispose=function(){},r.type="scatter",r}(yn.a),ll=Kn,Vn=S("sS/r"),An=S("bLfw"),uu=function(a){Object(de.b)(r,a);function r(){return a!==null&&a.apply(this,arguments)||this}return r.type="grid",r.dependencies=["xAxis","yAxis"],r.layoutMode="box",r.defaultOption={show:!1,zlevel:0,z:0,left:"10%",top:60,right:"10%",bottom:70,containLabel:!1,backgroundColor:"rgba(0,0,0,0)",borderWidth:1,borderColor:"#ccc"},r}(An.a),ps=uu,hn=S("ICMv"),ao=function(a){Object(de.b)(r,a);function r(){return a!==null&&a.apply(this,arguments)||this}return r.prototype.getCoordSysModel=function(){return this.getReferringComponents("grid",sr.b).models[0]},r.type="cartesian2dAxis",r}(An.a);y.mixin(ao,hn.a);var Fo=ao,Vo={show:!0,zlevel:0,z:0,inverse:!1,name:"",nameLocation:"end",nameRotate:null,nameTruncate:{maxWidth:null,ellipsis:"...",placeholder:"."},nameTextStyle:{},nameGap:15,silent:!1,triggerEvent:!1,tooltip:{show:!1},axisPointer:{},axisLine:{show:!0,onZero:!0,onZeroAxisIndex:null,lineStyle:{color:"#6E7079",width:1,type:"solid"},symbol:["none","none"],symbolSize:[10,15]},axisTick:{show:!0,inside:!1,length:5,lineStyle:{width:1}},axisLabel:{show:!0,inside:!1,rotate:0,showMinLabel:null,showMaxLabel:null,margin:8,fontSize:12},splitLine:{show:!0,lineStyle:{color:["#E0E6F1"],width:1,type:"solid"}},splitArea:{show:!1,areaStyle:{color:["rgba(250,250,250,0.2)","rgba(210,219,238,0.2)"]}}},fu=y.merge({boundaryGap:!0,deduplication:null,splitLine:{show:!1},axisTick:{alignWithLabel:!1,interval:"auto"},axisLabel:{interval:"auto"}},Vo),gs=y.merge({boundaryGap:[0,0],axisLine:{show:"auto"},axisTick:{show:"auto"},splitNumber:5,minorTick:{show:!1,splitNumber:5,length:3,lineStyle:{}},minorSplitLine:{show:!1,lineStyle:{color:"#F4F7FD",width:1}}},Vo),ms=y.merge({scale:!0,splitNumber:6,axisLabel:{showMinLabel:!1,showMaxLabel:!1,rich:{primary:{fontWeight:"bold"}}},splitLine:{show:!1}},gs),cu=y.defaults({scale:!0,logBase:10},gs),za={category:fu,value:gs,time:ms,log:cu},Qc=S("jkPA"),Jc={value:1,category:1,time:1,log:1};function Go(a,r,t,i){Object(y.each)(Jc,function(s,l){var f=Object(y.merge)(Object(y.merge)({},za[l],!0),i,!0),h=function(d){Object(de.b)(p,d);function p(){for(var m=[],b=0;b<arguments.length;b++)m[b]=arguments[b];var A=d.apply(this,m)||this;return A.type=r+"Axis."+l,A}return p.prototype.mergeDefaultAndTheme=function(m,b){var A=Object(Tr.d)(this),E=A?Object(Tr.f)(m):{},P=b.getTheme();Object(y.merge)(m,P.get(l+"Axis")),Object(y.merge)(m,this.getDefaultOption()),m.type=Fa(m),A&&Object(Tr.h)(m,E,A)},p.prototype.optionUpdated=function(){var m=this.option;m.type==="category"&&(this.__ordinalMeta=Qc.a.createByAxisModel(this))},p.prototype.getCategories=function(m){var b=this.option;if(b.type==="category")return m?b.data:this.__ordinalMeta.categories},p.prototype.getOrdinalMeta=function(){return this.__ordinalMeta},p.type=r+"Axis."+l,p.defaultOption=f,p}(t);a.registerComponentModel(h)}),a.registerSubTypeDefaulter(r+"Axis",Fa)}function Fa(a){return a.type||(a.data?"category":"value")}var Bn=S("aX7z"),ai=S("mFDi"),gf=S("z35g"),vn=S("Fofx"),Ir=S("QBsz"),hu=["x","y"];function mf(a){return a.type==="interval"||a.type==="time"}var yf=function(a){Object(de.b)(r,a);function r(){var t=a!==null&&a.apply(this,arguments)||this;return t.type="cartesian2d",t.dimensions=hu,t}return r.prototype.calcAffineTransform=function(){this._transform=this._invTransform=null;var t=this.getAxis("x").scale,i=this.getAxis("y").scale;if(!(!mf(t)||!mf(i))){var s=t.getExtent(),l=i.getExtent(),f=this.dataToPoint([s[0],l[0]]),h=this.dataToPoint([s[1],l[1]]),d=s[1]-s[0],p=l[1]-l[0];if(!(!d||!p)){var m=(h[0]-f[0])/d,b=(h[1]-f[1])/p,A=f[0]-s[0]*m,E=f[1]-l[0]*b,P=this._transform=[m,0,0,b,A,E];this._invTransform=Object(vn.invert)([],P)}}},r.prototype.getBaseAxis=function(){return this.getAxesByScale("ordinal")[0]||this.getAxesByScale("time")[0]||this.getAxis("x")},r.prototype.containPoint=function(t){var i=this.getAxis("x"),s=this.getAxis("y");return i.contain(i.toLocalCoord(t[0]))&&s.contain(s.toLocalCoord(t[1]))},r.prototype.containData=function(t){return this.getAxis("x").containData(t[0])&&this.getAxis("y").containData(t[1])},r.prototype.dataToPoint=function(t,i,s){s=s||[];var l=t[0],f=t[1];if(this._transform&&l!=null&&isFinite(l)&&f!=null&&isFinite(f))return Object(Ir.applyTransform)(s,t,this._transform);var h=this.getAxis("x"),d=this.getAxis("y");return s[0]=h.toGlobalCoord(h.dataToCoord(l)),s[1]=d.toGlobalCoord(d.dataToCoord(f)),s},r.prototype.clampData=function(t,i){var s=this.getAxis("x").scale,l=this.getAxis("y").scale,f=s.getExtent(),h=l.getExtent(),d=s.parse(t[0]),p=l.parse(t[1]);return i=i||[],i[0]=Math.min(Math.max(Math.min(f[0],f[1]),d),Math.max(f[0],f[1])),i[1]=Math.min(Math.max(Math.min(h[0],h[1]),p),Math.max(h[0],h[1])),i},r.prototype.pointToData=function(t,i){if(i=i||[],this._invTransform)return Object(Ir.applyTransform)(i,t,this._invTransform);var s=this.getAxis("x"),l=this.getAxis("y");return i[0]=s.coordToData(s.toLocalCoord(t[0])),i[1]=l.coordToData(l.toLocalCoord(t[1])),i},r.prototype.getOtherAxis=function(t){return this.getAxis(t.dim==="x"?"y":"x")},r.prototype.getArea=function(){var t=this.getAxis("x").getGlobalExtent(),i=this.getAxis("y").getGlobalExtent(),s=Math.min(t[0],t[1]),l=Math.min(i[0],i[1]),f=Math.max(t[0],t[1])-s,h=Math.max(i[0],i[1])-l;return new ai.a(s,l,f,h)},r}(gf.a),Nt=yf,Ft=S("hM6l"),Lt=function(a){Object(de.b)(r,a);function r(t,i,s,l,f){var h=a.call(this,t,i,s)||this;return h.index=0,h.type=l||"value",h.position=f||"bottom",h}return r.prototype.isHorizontal=function(){var t=this.position;return t==="top"||t==="bottom"},r.prototype.getGlobalExtent=function(t){var i=this.getExtent();return i[0]=this.toGlobalCoord(i[0]),i[1]=this.toGlobalCoord(i[1]),t&&i[0]>i[1]&&i.reverse(),i},r.prototype.pointToData=function(t,i){return this.coordToData(this.toLocalCoord(t[this.dim==="x"?0:1]),i)},r.prototype.setCategorySortInfo=function(t){if(this.type!=="category")return!1;this.model.option.categorySortInfo=t,this.scale.setSortInfo(t)},r}(Ft.a),Vt=Lt;function Gt(a,r,t){t=t||{};var i=a.coordinateSystem,s=r.axis,l={},f=s.getAxesOnZeroOf()[0],h=s.position,d=f?"onZero":h,p=s.dim,m=i.getRect(),b=[m.x,m.x+m.width,m.y,m.y+m.height],A={left:0,right:1,top:0,bottom:1,onZero:2},E=r.get("offset")||0,P=p==="x"?[b[2]-E,b[3]+E]:[b[0]-E,b[1]+E];if(f){var j=f.toGlobalCoord(f.dataToCoord(0));P[A.onZero]=Math.max(Math.min(j,P[1]),P[0])}l.position=[p==="y"?P[A[d]]:b[0],p==="x"?P[A[d]]:b[3]],l.rotation=Math.PI/2*(p==="x"?0:1);var J={top:-1,bottom:1,left:-1,right:1};l.labelDirection=l.tickDirection=l.nameDirection=J[h],l.labelOffset=f?P[A[h]]-P[A.onZero]:0,r.get(["axisTick","inside"])&&(l.tickDirection=-l.tickDirection),y.retrieve(t.labelInside,r.get(["axisLabel","inside"]))&&(l.labelDirection=-l.labelDirection);var dt=r.get(["axisLabel","rotate"]);return l.labelRotate=d==="top"?-dt:dt,l.z2=1,l}function re(a){return a.get("coordinateSystem")==="cartesian2d"}function oe(a){var r={xAxisModel:null,yAxisModel:null};return y.each(r,function(t,i){var s=i.replace(/Model$/,""),l=a.getReferringComponents(s,sr.b).models[0];r[i]=l}),r}var je=function(){function a(r,t,i){this.type="grid",this._coordsMap={},this._coordsList=[],this._axesMap={},this._axesList=[],this.axisPointerEnabled=!0,this.dimensions=hu,this._initCartesian(r,t,i),this.model=r}return a.prototype.getRect=function(){return this._rect},a.prototype.update=function(r,t){var i=this._axesMap;this._updateScale(r,this.model),Object(y.each)(i.x,function(l){Object(Bn.i)(l.scale,l.model)}),Object(y.each)(i.y,function(l){Object(Bn.i)(l.scale,l.model)});var s={};Object(y.each)(i.x,function(l){ne(i,"y",l,s)}),Object(y.each)(i.y,function(l){ne(i,"x",l,s)}),this.resize(this.model,t)},a.prototype.resize=function(r,t,i){var s=r.getBoxLayoutParams(),l=!i&&r.get("containLabel"),f=Object(Tr.g)(s,{width:t.getWidth(),height:t.getHeight()});this._rect=f;var h=this._axesList;d(),l&&(Object(y.each)(h,function(p){if(!p.model.get(["axisLabel","inside"])){var m=Object(Bn.b)(p);if(m){var b=p.isHorizontal()?"height":"width",A=p.model.get(["axisLabel","margin"]);f[b]-=m[b]+A,p.position==="top"?f.y+=m.height+A:p.position==="left"&&(f.x+=m.width+A)}}}),d()),Object(y.each)(this._coordsList,function(p){p.calcAffineTransform()});function d(){Object(y.each)(h,function(p){var m=p.isHorizontal(),b=m?[0,f.width]:[0,f.height],A=p.inverse?1:0;p.setExtent(b[A],b[1-A]),ge(p,m?f.x:f.y)})}},a.prototype.getAxis=function(r,t){var i=this._axesMap[r];if(i!=null)return i[t||0]},a.prototype.getAxes=function(){return this._axesList.slice()},a.prototype.getCartesian=function(r,t){if(r!=null&&t!=null){var i="x"+r+"y"+t;return this._coordsMap[i]}Object(y.isObject)(r)&&(t=r.yAxisIndex,r=r.xAxisIndex);for(var s=0,l=this._coordsList;s<l.length;s++)if(l[s].getAxis("x").index===r||l[s].getAxis("y").index===t)return l[s]},a.prototype.getCartesians=function(){return this._coordsList.slice()},a.prototype.convertToPixel=function(r,t,i){var s=this._findConvertTarget(t);return s.cartesian?s.cartesian.dataToPoint(i):s.axis?s.axis.toGlobalCoord(s.axis.dataToCoord(i)):null},a.prototype.convertFromPixel=function(r,t,i){var s=this._findConvertTarget(t);return s.cartesian?s.cartesian.pointToData(i):s.axis?s.axis.coordToData(s.axis.toLocalCoord(i)):null},a.prototype._findConvertTarget=function(r){var t=r.seriesModel,i=r.xAxisModel||t&&t.getReferringComponents("xAxis",sr.b).models[0],s=r.yAxisModel||t&&t.getReferringComponents("yAxis",sr.b).models[0],l=r.gridModel,f=this._coordsList,h,d;if(t)h=t.coordinateSystem,Object(y.indexOf)(f,h)<0&&(h=null);else if(i&&s)h=this.getCartesian(i.componentIndex,s.componentIndex);else if(i)d=this.getAxis("x",i.componentIndex);else if(s)d=this.getAxis("y",s.componentIndex);else if(l){var p=l.coordinateSystem;p===this&&(h=this._coordsList[0])}return{cartesian:h,axis:d}},a.prototype.containPoint=function(r){var t=this._coordsList[0];if(t)return t.containPoint(r)},a.prototype._initCartesian=function(r,t,i){var s=this,l=this,f={left:!1,right:!1,top:!1,bottom:!1},h={x:{},y:{}},d={x:0,y:0};if(t.eachComponent("xAxis",p("x"),this),t.eachComponent("yAxis",p("y"),this),!d.x||!d.y){this._axesMap={},this._axesList=[];return}this._axesMap=h,Object(y.each)(h.x,function(m,b){Object(y.each)(h.y,function(A,E){var P="x"+b+"y"+E,j=new Nt(P);j.master=s,j.model=r,s._coordsMap[P]=j,s._coordsList.push(j),j.addAxis(m),j.addAxis(A)})});function p(m){return function(b,A){if(!!Be(b,r)){var E=b.get("position");m==="x"?E!=="top"&&E!=="bottom"&&(E=f.bottom?"top":"bottom"):E!=="left"&&E!=="right"&&(E=f.left?"right":"left"),f[E]=!0;var P=new Vt(m,Object(Bn.a)(b),[0,0],b.get("type"),E),j=P.type==="category";P.onBand=j&&b.get("boundaryGap"),P.inverse=b.get("inverse"),b.axis=P,P.model=b,P.grid=l,P.index=A,l._axesList.push(P),h[m][A]=P,d[m]++}}}},a.prototype._updateScale=function(r,t){Object(y.each)(this._axesList,function(s){if(s.scale.setExtent(Infinity,-Infinity),s.type==="category"){var l=s.model.get("categorySortInfo");s.scale.setSortInfo(l)}}),r.eachSeries(function(s){if(re(s)){var l=oe(s),f=l.xAxisModel,h=l.yAxisModel;if(!Be(f,t)||!Be(h,t))return;var d=this.getCartesian(f.componentIndex,h.componentIndex),p=s.getData(),m=d.getAxis("x"),b=d.getAxis("y");p.type==="list"&&(i(p,m),i(p,b))}},this);function i(s,l){Object(y.each)(Object(Bn.d)(s,l.dim),function(f){l.scale.unionExtentFromData(s,f)})}},a.prototype.getTooltipAxes=function(r){var t=[],i=[];return Object(y.each)(this.getCartesians(),function(s){var l=r!=null&&r!=="auto"?s.getAxis(r):s.getBaseAxis(),f=s.getOtherAxis(l);Object(y.indexOf)(t,l)<0&&t.push(l),Object(y.indexOf)(i,f)<0&&i.push(f)}),{baseAxes:t,otherAxes:i}},a.create=function(r,t){var i=[];return r.eachComponent("grid",function(s,l){var f=new a(s,r,t);f.name="grid_"+l,f.resize(s,t,!0),s.coordinateSystem=f,i.push(f)}),r.eachSeries(function(s){if(!!re(s)){var l=oe(s),f=l.xAxisModel,h=l.yAxisModel,d=f.getCoordSysModel(),p=d.coordinateSystem;s.coordinateSystem=p.getCartesian(f.componentIndex,h.componentIndex)}}),i},a.dimensions=hu,a}();function Be(a,r){return a.getCoordSysModel()===r}function ne(a,r,t,i){t.getAxesOnZeroOf=function(){return l?[l]:[]};var s=a[r],l,f=t.model,h=f.get(["axisLine","onZero"]),d=f.get(["axisLine","onZeroAxisIndex"]);if(!h)return;if(d!=null)pe(s[d])&&(l=s[d]);else for(var p in s)if(s.hasOwnProperty(p)&&pe(s[p])&&!i[m(s[p])]){l=s[p];break}l&&(i[m(l)]=!0);function m(b){return b.dim+"_"+b.index}}function pe(a){return a&&a.type!=="category"&&a.type!=="time"&&Object(Bn.g)(a)}function ge(a,r){var t=a.getExtent(),i=t[0]+t[1];a.toGlobalCoord=a.dim==="x"?function(s){return s+r}:function(s){return i-s+r},a.toLocalCoord=a.dim==="x"?function(s){return s-r}:function(s){return i-s+r}}var Se=je,Ce=S("yxFR"),Ye=S("Qxkt"),Qe=Math.PI,tr=function(){function a(r,t){this.group=new pr.a,this.opt=t,this.axisModel=r,Object(y.defaults)(t,{labelOffset:0,nameDirection:1,tickDirection:1,labelDirection:1,silent:!0,handleAutoShown:function(){return!0}});var i=new pr.a({x:t.position[0],y:t.position[1],rotation:t.rotation});i.updateTransform(),this._transformGroup=i}return a.prototype.hasBuilder=function(r){return!!ar[r]},a.prototype.add=function(r){ar[r](this.opt,this.axisModel,this.group,this._transformGroup)},a.prototype.getGroup=function(){return this.group},a.innerTextLayout=function(r,t,i){var s=Object(Ne.t)(t-r),l,f;return Object(Ne.j)(s)?(f=i>0?"top":"bottom",l="center"):Object(Ne.j)(s-Qe)?(f=i>0?"bottom":"top",l="center"):(f="middle",s>0&&s<Qe?l=i>0?"right":"left":l=i>0?"left":"right"),{rotation:s,textAlign:l,textVerticalAlign:f}},a.makeAxisEventDataBase=function(r){var t={componentType:r.mainType,componentIndex:r.componentIndex};return t[r.mainType+"Index"]=r.componentIndex,t},a.isLabelSilent=function(r){var t=r.get("tooltip");return r.get("silent")||!(r.get("triggerEvent")||t&&t.show)},a}(),ar={axisLine:function(a,r,t,i){var s=r.get(["axisLine","show"]);if(s==="auto"&&a.handleAutoShown&&(s=a.handleAutoShown("axisLine")),!!s){var l=r.axis.getExtent(),f=i.transform,h=[l[0],0],d=[l[1],0];f&&(Object(Ir.applyTransform)(h,h,f),Object(Ir.applyTransform)(d,d,f));var p=Object(y.extend)({lineCap:"round"},r.getModel(["axisLine","lineStyle"]).getLineStyle()),m=new Ce.a({subPixelOptimize:!0,shape:{x1:h[0],y1:h[1],x2:d[0],y2:d[1]},style:p,strokeContainThreshold:a.strokeContainThreshold||5,silent:!0,z2:1});m.anid="line",t.add(m);var b=r.get(["axisLine","symbol"]),A=r.get(["axisLine","symbolSize"]),E=r.get(["axisLine","symbolOffset"])||0;if(typeof E=="number"&&(E=[E,E]),b!=null){typeof b=="string"&&(b=[b,b]),(typeof A=="string"||typeof A=="number")&&(A=[A,A]);var P=A[0],j=A[1];Object(y.each)([{rotate:a.rotation+Math.PI/2,offset:E[0],r:0},{rotate:a.rotation-Math.PI/2,offset:E[1],r:Math.sqrt((h[0]-d[0])*(h[0]-d[0])+(h[1]-d[1])*(h[1]-d[1]))}],function(J,dt){if(b[dt]!=="none"&&b[dt]!=null){var St=Object(lr.a)(b[dt],-P/2,-j/2,P,j,p.stroke,!0),Ot=J.r+J.offset;St.attr({rotation:J.rotate,x:h[0]+Ot*Math.cos(a.rotation),y:h[1]-Ot*Math.sin(a.rotation),silent:!0,z2:11}),t.add(St)}})}}},axisTickLabel:function(a,r,t,i){var s=Oi(t,i,r,a),l=ul(t,i,r,a);Rr(r,l,s),Uo(t,i,r,a.tickDirection)},axisName:function(a,r,t,i){var s=Object(y.retrieve)(a.axisName,r.get("name"));if(!!s){var l=r.get("nameLocation"),f=a.nameDirection,h=r.getModel("nameTextStyle"),d=r.get("nameGap")||0,p=r.axis.getExtent(),m=p[0]>p[1]?-1:1,b=[l==="start"?p[0]-m*d:l==="end"?p[1]+m*d:(p[0]+p[1])/2,Mn(l)?a.labelOffset+f*d:0],A,E=r.get("nameRotate");E!=null&&(E=E*Qe/180);var P;Mn(l)?A=tr.innerTextLayout(a.rotation,E!=null?E:a.rotation,f):(A=Cr(a.rotation,l,E||0,p),P=a.axisNameAvailableWidth,P!=null&&(P=Math.abs(P/Math.sin(A.rotation)),!isFinite(P)&&(P=null)));var j=h.getFont(),J=r.get("nameTruncate",!0)||{},dt=J.ellipsis,St=Object(y.retrieve)(a.nameTruncateMaxWidth,J.maxWidth,P),Ot=new en.a({x:b[0],y:b[1],rotation:A.rotation,silent:tr.isLabelSilent(r),style:Object(Ar.c)(h,{text:s,font:j,overflow:"truncate",width:St,ellipsis:dt,fill:h.getTextColor()||r.get(["axisLine","lineStyle","color"]),align:h.get("align")||A.textAlign,verticalAlign:h.get("verticalAlign")||A.textVerticalAlign}),z2:1});if(Ze.setTooltipConfig({el:Ot,componentModel:r,itemName:s}),Ot.__fullText=s,Ot.anid="name",r.get("triggerEvent")){var wt=tr.makeAxisEventDataBase(r);wt.targetType="axisName",wt.name=s,Object(Ur.a)(Ot).eventData=wt}i.add(Ot),Ot.updateTransform(),t.add(Ot),Ot.decomposeTransform()}}};function Cr(a,r,t,i){var s=Object(Ne.t)(t-a),l,f,h=i[0]>i[1],d=r==="start"&&!h||r!=="start"&&h;return Object(Ne.j)(s-Qe/2)?(f=d?"bottom":"top",l="center"):Object(Ne.j)(s-Qe*1.5)?(f=d?"top":"bottom",l="center"):(f="middle",s<Qe*1.5&&s>Qe/2?l=d?"left":"right":l=d?"right":"left"),{rotation:s,textAlign:l,textVerticalAlign:f}}function Rr(a,r,t){if(!Object(Bn.j)(a.axis)){var i=a.get(["axisLabel","showMinLabel"]),s=a.get(["axisLabel","showMaxLabel"]);r=r||[],t=t||[];var l=r[0],f=r[1],h=r[r.length-1],d=r[r.length-2],p=t[0],m=t[1],b=t[t.length-1],A=t[t.length-2];i===!1?(Dr(l),Dr(p)):Qr(l,f)&&(i?(Dr(f),Dr(m)):(Dr(l),Dr(p))),s===!1?(Dr(h),Dr(b)):Qr(d,h)&&(s?(Dr(d),Dr(A)):(Dr(h),Dr(b)))}}function Dr(a){a&&(a.ignore=!0)}function Qr(a,r){var t=a&&a.getBoundingRect().clone(),i=r&&r.getBoundingRect().clone();if(!(!t||!i)){var s=vn.identity([]);return vn.rotate(s,s,-a.rotation),t.applyTransform(vn.mul([],s,a.getLocalTransform())),i.applyTransform(vn.mul([],s,r.getLocalTransform())),t.intersect(i)}}function Mn(a){return a==="middle"||a==="center"}function dn(a,r,t,i,s){for(var l=[],f=[],h=[],d=0;d<a.length;d++){var p=a[d].coord;f[0]=p,f[1]=0,h[0]=p,h[1]=t,r&&(Object(Ir.applyTransform)(f,f,r),Object(Ir.applyTransform)(h,h,r));var m=new Ce.a({subPixelOptimize:!0,shape:{x1:f[0],y1:f[1],x2:h[0],y2:h[1]},style:i,z2:2,autoBatch:!0,silent:!0});m.anid=s+"_"+a[d].tickValue,l.push(m)}return l}function Oi(a,r,t,i){var s=t.axis,l=t.getModel("axisTick"),f=l.get("show");if(f==="auto"&&i.handleAutoShown&&(f=i.handleAutoShown("axisTick")),!(!f||s.scale.isBlank())){for(var h=l.getModel("lineStyle"),d=i.tickDirection*l.get("length"),p=s.getTicksCoords(),m=dn(p,r.transform,d,Object(y.defaults)(h.getLineStyle(),{stroke:t.get(["axisLine","lineStyle","color"])}),"ticks"),b=0;b<m.length;b++)a.add(m[b]);return m}}function Uo(a,r,t,i){var s=t.axis,l=t.getModel("minorTick");if(!(!l.get("show")||s.scale.isBlank())){var f=s.getMinorTicksCoords();if(!!f.length)for(var h=l.getModel("lineStyle"),d=i*l.get("length"),p=Object(y.defaults)(h.getLineStyle(),Object(y.defaults)(t.getModel("axisTick").getLineStyle(),{stroke:t.get(["axisLine","lineStyle","color"])})),m=0;m<f.length;m++)for(var b=dn(f[m],r.transform,d,p,"minorticks_"+m),A=0;A<b.length;A++)a.add(b[A])}}function ul(a,r,t,i){var s=t.axis,l=Object(y.retrieve)(i.axisLabelShow,t.get(["axisLabel","show"]));if(!(!l||s.scale.isBlank())){var f=t.getModel("axisLabel"),h=f.get("margin"),d=s.getViewLabels(),p=(Object(y.retrieve)(i.labelRotate,f.get("rotate"))||0)*Qe/180,m=tr.innerTextLayout(i.rotation,p,i.labelDirection),b=t.getCategories&&t.getCategories(!0),A=[],E=tr.isLabelSilent(t),P=t.get("triggerEvent");return Object(y.each)(d,function(j,J){var dt=s.scale.type==="ordinal"?s.scale.getRawOrdinalNumber(j.tickValue):j.tickValue,St=j.formattedLabel,Ot=j.rawLabel,wt=f;if(b&&b[dt]){var zt=b[dt];Object(y.isObject)(zt)&&zt.textStyle&&(wt=new Ye.a(zt.textStyle,f,t.ecModel))}var jt=wt.getTextColor()||t.get(["axisLine","lineStyle","color"]),kt=s.dataToCoord(dt),te=new en.a({x:kt,y:i.labelOffset+i.labelDirection*h,rotation:m.rotation,silent:E,z2:10,style:Object(Ar.c)(wt,{text:St,align:wt.getShallow("align",!0)||m.textAlign,verticalAlign:wt.getShallow("verticalAlign",!0)||wt.getShallow("baseline",!0)||m.textVerticalAlign,fill:typeof jt=="function"?jt(s.type==="category"?Ot:s.type==="value"?dt+"":dt,J):jt})});if(te.anid="label_"+dt,P){var ue=tr.makeAxisEventDataBase(t);ue.targetType="axisLabel",ue.value=Ot,Object(Ur.a)(te).eventData=ue}r.add(te),te.updateTransform(),A.push(te),a.add(te),te.decomposeTransform()}),A}}var Vi=tr;function Ji(a,r){var t={axesInfo:{},seriesInvolved:!1,coordSysAxesInfo:{},coordSysMap:{}};return xf(t,a,r),t.seriesInvolved&&bf(t,a),t}function xf(a,r,t){var i=r.getComponent("tooltip"),s=r.getComponent("axisPointer"),l=s.get("link",!0)||[],f=[];Object(y.each)(t.getCoordinateSystems(),function(h){if(!h.axisPointerEnabled)return;var d=fl(h.model),p=a.coordSysAxesInfo[d]={};a.coordSysMap[d]=h;var m=h.model,b=m.getModel("tooltip",i);if(Object(y.each)(h.getAxes(),Object(y.curry)(j,!1,null)),h.getTooltipAxes&&i&&b.get("show")){var A=b.get("trigger")==="axis",E=b.get(["axisPointer","type"])==="cross",P=h.getTooltipAxes(b.get(["axisPointer","axis"]));(A||E)&&Object(y.each)(P.baseAxes,Object(y.curry)(j,E?"cross":!0,A)),E&&Object(y.each)(P.otherAxes,Object(y.curry)(j,"cross",!1))}function j(J,dt,St){var Ot=St.model.getModel("axisPointer",s),wt=Ot.get("show");if(!(!wt||wt==="auto"&&!J&&!Tf(Ot))){dt==null&&(dt=Ot.get("triggerTooltip")),Ot=J?$c(St,b,s,r,J,dt):Ot;var zt=Ot.get("snap"),jt=fl(St.model),kt=dt||zt||St.type==="category",te=a.axesInfo[jt]={key:jt,axis:St,coordSys:h,axisPointerModel:Ot,triggerTooltip:dt,involveSeries:kt,snap:zt,useHandle:Tf(Ot),seriesModels:[],linkGroup:null};p[jt]=te,a.seriesInvolved=a.seriesInvolved||kt;var ue=Sf(l,St);if(ue!=null){var me=f[ue]||(f[ue]={axesInfo:{}});me.axesInfo[jt]=te,me.mapper=l[ue].mapper,te.linkGroup=me}}}})}function $c(a,r,t,i,s,l){var f=r.getModel("axisPointer"),h=["type","snap","lineStyle","shadowStyle","label","animation","animationDurationUpdate","animationEasingUpdate","z"],d={};Object(y.each)(h,function(A){d[A]=Object(y.clone)(f.get(A))}),d.snap=a.type!=="category"&&!!l,f.get("type")==="cross"&&(d.type="line");var p=d.label||(d.label={});if(p.show==null&&(p.show=!1),s==="cross"){var m=f.get(["label","show"]);if(p.show=m!=null?m:!0,!l){var b=d.lineStyle=f.get("crossStyle");b&&Object(y.defaults)(p,b.textStyle)}}return a.model.getModel("axisPointer",new Ye.a(d,t,i))}function bf(a,r){r.eachSeries(function(t){var i=t.coordinateSystem,s=t.get(["tooltip","trigger"],!0),l=t.get(["tooltip","show"],!0);!i||s==="none"||s===!1||s==="item"||l===!1||t.get(["axisPointer","show"],!0)===!1||Object(y.each)(a.coordSysAxesInfo[fl(i.model)],function(f){var h=f.axis;i.getAxis(h.dim)===h&&(f.seriesModels.push(t),f.seriesDataCount==null&&(f.seriesDataCount=0),f.seriesDataCount+=t.getData().count())})})}function Sf(a,r){for(var t=r.model,i=r.dim,s=0;s<a.length;s++){var l=a[s]||{};if(ys(l[i+"AxisId"],t.id)||ys(l[i+"AxisIndex"],t.componentIndex)||ys(l[i+"AxisName"],t.name))return s}}function ys(a,r){return a==="all"||Object(y.isArray)(a)&&Object(y.indexOf)(a,r)>=0||a===r}function Yd(a){var r=_f(a);if(!!r){var t=r.axisPointerModel,i=r.axis.scale,s=t.option,l=t.get("status"),f=t.get("value");f!=null&&(f=i.parse(f));var h=Tf(t);l==null&&(s.status=h?"show":"hide");var d=i.getExtent().slice();d[0]>d[1]&&d.reverse(),(f==null||f>d[1])&&(f=d[1]),f<d[0]&&(f=d[0]),s.value=f,h&&(s.status=r.axis.scale.isBlank()?"hide":"show")}}function _f(a){var r=(a.ecModel.getComponent("axisPointer")||{}).coordSysAxesInfo;return r&&r.axesInfo[fl(a)]}function Xd(a){var r=_f(a);return r&&r.axisPointerModel}function Tf(a){return!!a.get(["handle","show"])}function fl(a){return a.type+"||"+a.id}var Of={},Zd=function(a){Object(de.b)(r,a);function r(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=r.type,t}return r.prototype.render=function(t,i,s,l){this.axisPointerClass&&Yd(t),a.prototype.render.apply(this,arguments),this._doUpdateAxisPointerClass(t,s,!0)},r.prototype.updateAxisPointer=function(t,i,s,l){this._doUpdateAxisPointerClass(t,s,!1)},r.prototype.remove=function(t,i){var s=this._axisPointer;s&&s.remove(i)},r.prototype.dispose=function(t,i){this._disposeAxisPointer(i),a.prototype.dispose.apply(this,arguments)},r.prototype._doUpdateAxisPointerClass=function(t,i,s){var l=r.getAxisPointerClass(this.axisPointerClass);if(!!l){var f=Xd(t);f?(this._axisPointer||(this._axisPointer=new l)).render(t,f,i,s):this._disposeAxisPointer(i)}},r.prototype._disposeAxisPointer=function(t){this._axisPointer&&this._axisPointer.dispose(t),this._axisPointer=null},r.registerAxisPointerClass=function(t,i){Of[t]=i},r.getAxisPointerClass=function(t){return t&&Of[t]},r.type="axis",r}(Vn.a),Ho=Zd,Af=Object(sr.o)();function cl(a,r,t,i){var s=t.axis;if(!s.scale.isBlank()){var l=t.getModel("splitArea"),f=l.getModel("areaStyle"),h=f.get("color"),d=i.coordinateSystem.getRect(),p=s.getTicksCoords({tickModel:l,clamp:!0});if(!!p.length){var m=h.length,b=Af(a).splitAreaColors,A=y.createHashMap(),E=0;if(b)for(var P=0;P<p.length;P++){var j=b.get(p[P].tickValue);if(j!=null){E=(j+(m-1)*P)%m;break}}var J=s.toGlobalCoord(p[0].coord),dt=f.getAreaStyle();h=y.isArray(h)?h:[h];for(var P=1;P<p.length;P++){var St=s.toGlobalCoord(p[P].coord),Ot=void 0,wt=void 0,zt=void 0,jt=void 0;s.isHorizontal()?(Ot=J,wt=d.y,zt=St-Ot,jt=d.height,J=Ot+zt):(Ot=d.x,wt=J,zt=d.width,jt=St-wt,J=wt+jt);var kt=p[P-1].tickValue;kt!=null&&A.set(kt,E),r.add(new nn.a({anid:kt!=null?"area_"+kt:null,shape:{x:Ot,y:wt,width:zt,height:jt},style:y.defaults({fill:h[E]},dt),autoBatch:!0,silent:!0})),E=(E+1)%m}Af(a).splitAreaColors=A}}}function oo(a){Af(a).splitAreaColors=null}var Mf=["axisLine","axisTickLabel","axisName"],Df=["splitArea","splitLine","minorSplitLine"],hl=function(a){Object(de.b)(r,a);function r(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=r.type,t.axisPointerClass="CartesianAxisPointer",t}return r.prototype.render=function(t,i,s,l){this.group.removeAll();var f=this._axisGroup;if(this._axisGroup=new pr.a,this.group.add(this._axisGroup),!!t.get("show")){var h=t.getCoordSysModel(),d=Gt(h,t),p=new Vi(t,y.extend({handleAutoShown:function(m){for(var b=h.coordinateSystem.getCartesians(),A=0;A<b.length;A++){var E=b[A].getOtherAxis(t.axis).type;if(E==="value"||E==="log")return!0}return!1}},d));y.each(Mf,p.add,p),this._axisGroup.add(p.getGroup()),y.each(Df,function(m){t.get([m,"show"])&&Kd[m](this,this._axisGroup,t,h)},this),Ze.groupTransition(f,this._axisGroup,t),a.prototype.render.call(this,t,i,s,l)}},r.prototype.remove=function(){oo(this)},r.type="cartesianAxis",r}(Ho),Kd={splitLine:function(a,r,t,i){var s=t.axis;if(!s.scale.isBlank()){var l=t.getModel("splitLine"),f=l.getModel("lineStyle"),h=f.get("color");h=y.isArray(h)?h:[h];for(var d=i.coordinateSystem.getRect(),p=s.isHorizontal(),m=0,b=s.getTicksCoords({tickModel:l}),A=[],E=[],P=f.getLineStyle(),j=0;j<b.length;j++){var J=s.toGlobalCoord(b[j].coord);p?(A[0]=J,A[1]=d.y,E[0]=J,E[1]=d.y+d.height):(A[0]=d.x,A[1]=J,E[0]=d.x+d.width,E[1]=J);var dt=m++%h.length,St=b[j].tickValue;r.add(new Ce.a({anid:St!=null?"line_"+b[j].tickValue:null,subPixelOptimize:!0,autoBatch:!0,shape:{x1:A[0],y1:A[1],x2:E[0],y2:E[1]},style:y.defaults({stroke:h[dt]},P),silent:!0}))}}},minorSplitLine:function(a,r,t,i){var s=t.axis,l=t.getModel("minorSplitLine"),f=l.getModel("lineStyle"),h=i.coordinateSystem.getRect(),d=s.isHorizontal(),p=s.getMinorTicksCoords();if(!!p.length)for(var m=[],b=[],A=f.getLineStyle(),E=0;E<p.length;E++)for(var P=0;P<p[E].length;P++){var j=s.toGlobalCoord(p[E][P].coord);d?(m[0]=j,m[1]=h.y,b[0]=j,b[1]=h.y+h.height):(m[0]=h.x,m[1]=j,b[0]=h.x+h.width,b[1]=j),r.add(new Ce.a({anid:"minor_line_"+p[E][P].tickValue,subPixelOptimize:!0,autoBatch:!0,shape:{x1:m[0],y1:m[1],x2:b[0],y2:b[1]},style:A,silent:!0}))}},splitArea:function(a,r,t,i){cl(a,r,t,i)}},qc=function(a){Object(de.b)(r,a);function r(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=r.type,t}return r.type="xAxis",r}(hl),xs=function(a){Object(de.b)(r,a);function r(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=qc.type,t}return r.type="yAxis",r}(hl),Xy=hl,kd=function(a){Object(de.b)(r,a);function r(){var t=a!==null&&a.apply(this,arguments)||this;return t.type="grid",t}return r.prototype.render=function(t,i){this.group.removeAll(),t.get("show")&&this.group.add(new nn.a({shape:t.coordinateSystem.getRect(),style:Object(y.defaults)({fill:t.get("backgroundColor")},t.getItemStyle()),silent:!0,z2:-1}))},r.type="grid",r}(Vn.a),Cf={offset:0};function th(a){a.registerComponentView(kd),a.registerComponentModel(ps),a.registerCoordinateSystem("cartesian2d",Se),Go(a,"x",ao,Cf),Go(a,"y",ao,Cf),a.registerComponentView(qc),a.registerComponentView(xs),a.registerPreprocessor(function(r){r.xAxis&&r.yAxis&&!r.grid&&(r.grid={})})}function Qd(a){Object(B.a)(th),a.registerSeriesModel(Bo),a.registerChartView(ll),a.registerLayout(fa("scatter"))}function Gn(a){a.eachSeriesByType("radar",function(r){var t=r.getData(),i=[],s=r.coordinateSystem;if(!!s){var l=s.getIndicatorAxes();y.each(l,function(f,h){t.each(t.mapDimension(l[h].dim),function(d,p){i[p]=i[p]||[];var m=s.dataToPoint(d,h);i[p][h]=eh(m)?m:rh(s)})}),t.each(function(f){var h=y.find(i[f],function(d){return eh(d)})||rh(s);i[f].push(h.slice()),t.setItemLayout(f,i[f])})}})}function eh(a){return!isNaN(a[0])&&!isNaN(a[1])}function rh(a){return[a.cx,a.cy]}function Wo(a){var r=a.polar;if(r){y.isArray(r)||(r=[r]);var t=[];y.each(r,function(i,s){i.indicator?(i.type&&!i.shape&&(i.shape=i.type),a.radar=a.radar||[],y.isArray(a.radar)||(a.radar=[a.radar]),a.radar.push(i)):t.push(i)}),a.polar=t}y.each(a.series,function(i){i&&i.type==="radar"&&i.polarIndex&&(i.radarIndex=i.polarIndex)})}var Hi=S("h7HQ");function vu(a){return y.isArray(a)||(a=[+a,+a]),a}var Jd=function(a){Object(de.b)(r,a);function r(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=r.type,t}return r.prototype.render=function(t,i,s){var l=t.coordinateSystem,f=this.group,h=t.getData(),d=this._data;function p(A,E){var P=A.getItemVisual(E,"symbol")||"circle";if(P!=="none"){var j=vu(A.getItemVisual(E,"symbolSize")),J=lr.a(P,-1,-1,2,2),dt=A.getItemVisual(E,"symbolRotate")||0;return J.attr({style:{strokeNoScale:!0},z2:100,scaleX:j[0]/2,scaleY:j[1]/2,rotation:dt*Math.PI/180||0}),J}}function m(A,E,P,j,J,dt){P.removeAll();for(var St=0;St<E.length-1;St++){var Ot=p(j,J);Ot&&(Ot.__dimIdx=St,A[St]?(Ot.setPosition(A[St]),Ze[dt?"initProps":"updateProps"](Ot,{x:E[St][0],y:E[St][1]},t,J)):Ot.setPosition(E[St]),P.add(Ot))}}function b(A){return y.map(A,function(E){return[l.cx,l.cy]})}h.diff(d).add(function(A){var E=h.getItemLayout(A);if(!!E){var P=new Hi.a,j=new pi.a,J={shape:{points:E}};P.shape.points=b(E),j.shape.points=b(E),Ze.initProps(P,J,t,A),Ze.initProps(j,J,t,A);var dt=new pr.a,St=new pr.a;dt.add(j),dt.add(P),dt.add(St),m(j.shape.points,E,St,h,A,!0),h.setItemGraphicEl(A,dt)}}).update(function(A,E){var P=d.getItemGraphicEl(E),j=P.childAt(0),J=P.childAt(1),dt=P.childAt(2),St={shape:{points:h.getItemLayout(A)}};!St.shape.points||(m(j.shape.points,St.shape.points,dt,h,A,!1),Ze.updateProps(j,St,t),Ze.updateProps(J,St,t),h.setItemGraphicEl(A,P))}).remove(function(A){f.remove(d.getItemGraphicEl(A))}).execute(),h.eachItemGraphicEl(function(A,E){var P=h.getItemModel(E),j=A.childAt(0),J=A.childAt(1),dt=A.childAt(2),St=h.getItemVisual(E,"style"),Ot=St.fill;f.add(A),j.useStyle(y.defaults(P.getModel("lineStyle").getLineStyle(),{fill:"none",stroke:Ot})),Object(qe.I)(j,P,"lineStyle"),Object(qe.I)(J,P,"areaStyle");var wt=P.getModel("areaStyle"),zt=wt.isEmpty()&&wt.parentModel.isEmpty();J.ignore=zt,y.each(["emphasis","select","blur"],function(te){var ue=P.getModel([te,"areaStyle"]),me=ue.isEmpty()&&ue.parentModel.isEmpty();J.ensureState(te).ignore=me&&zt}),J.useStyle(y.defaults(wt.getAreaStyle(),{fill:Ot,opacity:.7,decal:St.decal}));var jt=P.getModel("emphasis"),kt=jt.getModel("itemStyle").getItemStyle();dt.eachChild(function(te){if(te instanceof it.a){var ue=te.style;te.useStyle(y.extend({image:ue.image,x:ue.x,y:ue.y,width:ue.width,height:ue.height},St))}else te.useStyle(St),te.setColor(Ot);var me=te.ensureState("emphasis");me.style=y.clone(kt);var ve=h.get(h.dimensions[te.__dimIdx],E);(ve==null||isNaN(ve))&&(ve=""),Object(Ar.h)(te,Object(Ar.f)(P),{labelFetcher:h.hostModel,labelDataIndex:E,labelDimIndex:te.__dimIdx,defaultText:ve,inheritColor:Ot,defaultOpacity:St.opacity})}),Object(qe.o)(A,jt.get("focus"),jt.get("blurScope"))}),this._data=h},r.prototype.remove=function(){this.group.removeAll(),this._data=null},r.type="radar",r}(yn.a),$d=Jd,wn=S("IXzq"),qd=function(a){Object(de.b)(r,a);function r(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=r.type,t.useColorPaletteOnData=!0,t.hasSymbolVisual=!0,t}return r.prototype.init=function(t){a.prototype.init.apply(this,arguments),this.legendVisualProvider=new xn(y.bind(this.getData,this),y.bind(this.getRawData,this))},r.prototype.getInitialData=function(t,i){return Di(this,{generateCoord:"indicator_",generateCoordCount:Infinity})},r.prototype.formatTooltip=function(t,i,s){var l=this.getData(),f=this.coordinateSystem,h=f.getIndicatorAxes(),d=this.getData().getName(t),p=d===""?this.name:d,m=Object(wn.e)(this,t);return Object(wn.c)("section",{header:p,sortBlocks:!0,blocks:y.map(h,function(b){var A=l.get(l.mapDimension(b.dim),t);return Object(wn.c)("nameValue",{markerType:"subItem",markerColor:m,name:b.name,value:A,sortParam:A})})})},r.prototype.getTooltipPosition=function(t){if(t!=null){for(var i=this.getData(),s=this.coordinateSystem,l=i.getValues(y.map(s.dimensions,function(p){return i.mapDimension(p)}),t),f=0,h=l.length;f<h;f++)if(!isNaN(l[f])){var d=s.getIndicatorAxes();return s.coordToPoint(d[f].dataToCoord(l[f]),f)}}},r.type="series.radar",r.dependencies=["radar"],r.defaultOption={zlevel:0,z:2,coordinateSystem:"radar",legendHoverLink:!0,radarIndex:0,lineStyle:{width:2,type:"solid"},label:{position:"top"},symbolSize:8},r}(Nr.a),tp=qd,bs=za.value;function xa(a,r){return y.defaults({show:r},a)}var Zy=function(a){Object(de.b)(r,a);function r(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=r.type,t}return r.prototype.optionUpdated=function(){var t=this.get("boundaryGap"),i=this.get("splitNumber"),s=this.get("scale"),l=this.get("axisLine"),f=this.get("axisTick"),h=this.get("axisLabel"),d=this.get("axisName"),p=this.get(["axisName","show"]),m=this.get(["axisName","formatter"]),b=this.get("axisNameGap"),A=this.get("triggerEvent"),E=y.map(this.get("indicator")||[],function(P){P.max!=null&&P.max>0&&!P.min?P.min=0:P.min!=null&&P.min<0&&!P.max&&(P.max=0);var j=d;P.color!=null&&(j=y.defaults({color:P.color},d));var J=y.merge(y.clone(P),{boundaryGap:t,splitNumber:i,scale:s,axisLine:l,axisTick:f,axisLabel:h,name:P.text,nameLocation:"end",nameGap:b,nameTextStyle:j,triggerEvent:A},!1);if(p||(J.name=""),typeof m=="string"){var dt=J.name;J.name=m.replace("{value}",dt!=null?dt:"")}else typeof m=="function"&&(J.name=m(J.name,J));var St=new Ye.a(J,null,this.ecModel);return y.mixin(St,hn.a.prototype),St.mainType="radar",St.componentIndex=this.componentIndex,St},this);this._indicatorModels=E},r.prototype.getIndicatorModels=function(){return this._indicatorModels},r.type="radar",r.defaultOption={zlevel:0,z:0,center:["50%","50%"],radius:"75%",startAngle:90,axisName:{show:!0},boundaryGap:[0,0],splitNumber:5,axisNameGap:15,scale:!1,shape:"polygon",axisLine:y.merge({lineStyle:{color:"#bbb"}},bs.axisLine),axisLabel:xa(bs.axisLabel,!1),axisTick:xa(bs.axisTick,!1),splitLine:xa(bs.splitLine,!0),splitArea:xa(bs.splitArea,!0),indicator:[]},r}(An.a),ep=Zy,Ss=S("2fw6"),nh=S("RXMa"),rp=["axisLine","axisTickLabel","axisName"],np=function(a){Object(de.b)(r,a);function r(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=r.type,t}return r.prototype.render=function(t,i,s){var l=this.group;l.removeAll(),this._buildAxes(t),this._buildSplitLineAndArea(t)},r.prototype._buildAxes=function(t){var i=t.coordinateSystem,s=i.getIndicatorAxes(),l=y.map(s,function(f){var h=new Vi(f.model,{position:[i.cx,i.cy],rotation:f.angle,labelDirection:-1,tickDirection:-1,nameDirection:1});return h});y.each(l,function(f){y.each(rp,f.add,f),this.group.add(f.getGroup())},this)},r.prototype._buildSplitLineAndArea=function(t){var i=t.coordinateSystem,s=i.getIndicatorAxes();if(!s.length)return;var l=t.get("shape"),f=t.getModel("splitLine"),h=t.getModel("splitArea"),d=f.getModel("lineStyle"),p=h.getModel("areaStyle"),m=f.get("show"),b=h.get("show"),A=d.get("color"),E=p.get("color"),P=y.isArray(A)?A:[A],j=y.isArray(E)?E:[E],J=[],dt=[];function St(we,We,$e){var Je=$e%We.length;return we[Je]=we[Je]||[],Je}if(l==="circle")for(var Ot=s[0].getTicksCoords(),wt=i.cx,zt=i.cy,jt=0;jt<Ot.length;jt++){if(m){var kt=St(J,P,jt);J[kt].push(new Ss.a({shape:{cx:wt,cy:zt,r:Ot[jt].coord}}))}if(b&&jt<Ot.length-1){var kt=St(dt,j,jt);dt[kt].push(new nh.a({shape:{cx:wt,cy:zt,r0:Ot[jt].coord,r:Ot[jt+1].coord}}))}}else for(var te,ue=y.map(s,function(we,We){var $e=we.getTicksCoords();return te=te==null?$e.length-1:Math.min($e.length-1,te),y.map($e,function(Je){return i.coordToPoint(Je.coord,We)})}),me=[],jt=0;jt<=te;jt++){for(var ve=[],Me=0;Me<s.length;Me++)ve.push(ue[Me][jt]);if(ve[0]&&ve.push(ve[0].slice()),m){var kt=St(J,P,jt);J[kt].push(new pi.a({shape:{points:ve}}))}if(b&&me){var kt=St(dt,j,jt-1);dt[kt].push(new Hi.a({shape:{points:ve.concat(me)}}))}me=ve.slice().reverse()}var Ee=d.getLineStyle(),Oe=p.getAreaStyle();y.each(dt,function(we,We){this.group.add(Ze.mergePath(we,{style:y.defaults({stroke:"none",fill:j[We%j.length]},Oe),silent:!0}))},this),y.each(J,function(we,We){this.group.add(Ze.mergePath(we,{style:y.defaults({fill:"none",stroke:P[We%P.length]},Ee),silent:!0}))},this)},r.type="radar",r}(Vn.a),Kr=np,ip=function(a){Object(de.b)(r,a);function r(t,i,s){var l=a.call(this,t,i,s)||this;return l.type="value",l.angle=0,l.name="",l}return r}(Ft.a),ap=ip,ih=S("ieMj"),Ef=S("U4/e"),op=function(){function a(r,t,i){this.dimensions=[],this._model=r,this._indicatorAxes=Object(y.map)(r.getIndicatorModels(),function(s,l){var f="indicator_"+l,h=new ap(f,new ih.a);return h.name=s.get("name"),h.model=s,s.axis=h,this.dimensions.push(f),h},this),this.resize(r,i)}return a.prototype.getIndicatorAxes=function(){return this._indicatorAxes},a.prototype.dataToPoint=function(r,t){var i=this._indicatorAxes[t];return this.coordToPoint(i.dataToCoord(r),t)},a.prototype.coordToPoint=function(r,t){var i=this._indicatorAxes[t],s=i.angle,l=this.cx+r*Math.cos(s),f=this.cy-r*Math.sin(s);return[l,f]},a.prototype.pointToData=function(r){var t=r[0]-this.cx,i=r[1]-this.cy,s=Math.sqrt(t*t+i*i);t/=s,i/=s;for(var l=Math.atan2(-i,t),f=Infinity,h,d=-1,p=0;p<this._indicatorAxes.length;p++){var m=this._indicatorAxes[p],b=Math.abs(l-m.angle);b<f&&(h=m,d=p,f=b)}return[d,+(h&&h.coordToData(s))]},a.prototype.resize=function(r,t){var i=r.get("center"),s=t.getWidth(),l=t.getHeight(),f=Math.min(s,l)/2;this.cx=Ne.o(i[0],s),this.cy=Ne.o(i[1],l),this.startAngle=r.get("startAngle")*Math.PI/180;var h=r.get("radius");(typeof h=="string"||typeof h=="number")&&(h=[0,h]),this.r0=Ne.o(h[0],f),this.r=Ne.o(h[1],f),Object(y.each)(this._indicatorAxes,function(d,p){d.setExtent(this.r0,this.r);var m=this.startAngle+p*Math.PI*2/this._indicatorAxes.length;m=Math.atan2(Math.sin(m),Math.cos(m)),d.angle=m},this)},a.prototype.update=function(r,t){var i=this._indicatorAxes,s=this._model;Object(y.each)(i,function(h){h.scale.setExtent(Infinity,-Infinity)}),r.eachSeriesByType("radar",function(h,d){if(!(h.get("coordinateSystem")!=="radar"||r.getComponent("radar",h.get("radarIndex"))!==s)){var p=h.getData();Object(y.each)(i,function(m){m.scale.unionExtentFromData(p,p.mapDimension(m.dim))})}},this);var l=s.get("splitNumber");function f(h){var d=Math.pow(10,Math.floor(Math.log(h)/Math.LN10)),p=h/d;return p===2?p=5:p*=2,p*d}Object(y.each)(i,function(h,d){var p=Object(Bn.f)(h.scale,h.model).extent;Object(Bn.i)(h.scale,h.model);var m=h.model,b=h.scale,A=Object(Ef.b)(b,m.get("min",!0)),E=Object(Ef.b)(b,m.get("max",!0)),P=b.getInterval();if(A!=null&&E!=null)b.setExtent(+A,+E),b.setInterval((E-A)/l);else if(A!=null){var j=void 0;do j=A+P*l,b.setExtent(+A,j),b.setInterval(P),P=f(P);while(j<p[1]&&isFinite(j)&&isFinite(p[1]))}else if(E!=null){var J=void 0;do J=E-P*l,b.setExtent(J,+E),b.setInterval(P),P=f(P);while(J>p[0]&&isFinite(J)&&isFinite(p[0]))}else{var dt=b.getTicks().length-1;dt>l&&(P=f(P));var j=Math.ceil(p[1]/P)*P,J=Ne.u(j-P*l);b.setExtent(J,j),b.setInterval(P)}})},a.prototype.convertToPixel=function(r,t,i){return console.warn("Not implemented."),null},a.prototype.convertFromPixel=function(r,t,i){return console.warn("Not implemented."),null},a.prototype.containPoint=function(r){return console.warn("Not implemented."),!1},a.create=function(r,t){var i=[];return r.eachComponent("radar",function(s){var l=new a(s,r,t);i.push(l),s.coordinateSystem=l}),r.eachSeriesByType("radar",function(s){s.get("coordinateSystem")==="radar"&&(s.coordinateSystem=i[s.get("radarIndex")||0])}),i},a.dimensions=[],a}(),sp=op;function lp(a){a.registerCoordinateSystem("radar",sp),a.registerComponentModel(ep),a.registerComponentView(Kr),a.registerVisual({seriesType:"radar",reset:function(r){var t=r.getData();t.each(function(i){t.setItemVisual(i,"legendSymbol","roundRect")}),t.setVisual("legendSymbol","roundRect")}})}function up(a){Object(B.a)(lp),a.registerChartView($d),a.registerSeriesModel(tp),a.registerLayout(Gn),a.registerProcessor(da("radar")),a.registerPreprocessor(Wo)}var ah=S("b9Ot"),Wi=S("YH21"),Jr=S("G+eS"),_s="\0_ec_interaction_mutex";function du(a,r,t){var i=Dn(a);i[r]=t}function fp(a,r,t){var i=Dn(a),s=i[r];s===t&&(i[r]=null)}function mi(a,r){return!!Dn(a)[r]}function Dn(a){return a[_s]||(a[_s]={})}Jr.m({type:"takeGlobalCursor",event:"globalCursorTaken",update:"update"},function(){});var Li=function(a){Object(de.b)(r,a);function r(t){var i=a.call(this)||this;i._zr=t;var s=Object(y.bind)(i._mousedownHandler,i),l=Object(y.bind)(i._mousemoveHandler,i),f=Object(y.bind)(i._mouseupHandler,i),h=Object(y.bind)(i._mousewheelHandler,i),d=Object(y.bind)(i._pinchHandler,i);return i.enable=function(p,m){this.disable(),this._opt=Object(y.defaults)(Object(y.clone)(m)||{},{zoomOnMouseWheel:!0,moveOnMouseMove:!0,moveOnMouseWheel:!1,preventDefaultMouseMove:!0}),p==null&&(p=!0),(p===!0||p==="move"||p==="pan")&&(t.on("mousedown",s),t.on("mousemove",l),t.on("mouseup",f)),(p===!0||p==="scale"||p==="zoom")&&(t.on("mousewheel",h),t.on("pinch",d))},i.disable=function(){t.off("mousedown",s),t.off("mousemove",l),t.off("mouseup",f),t.off("mousewheel",h),t.off("pinch",d)},i}return r.prototype.isDragging=function(){return this._dragging},r.prototype.isPinching=function(){return this._pinching},r.prototype.setPointerChecker=function(t){this.pointerChecker=t},r.prototype.dispose=function(){this.disable()},r.prototype._mousedownHandler=function(t){if(!(Wi.d(t)||t.target&&t.target.draggable)){var i=t.offsetX,s=t.offsetY;this.pointerChecker&&this.pointerChecker(t,i,s)&&(this._x=i,this._y=s,this._dragging=!0)}},r.prototype._mousemoveHandler=function(t){if(!(!this._dragging||!In("moveOnMouseMove",t,this._opt)||t.gestureEvent==="pinch"||mi(this._zr,"globalPan"))){var i=t.offsetX,s=t.offsetY,l=this._x,f=this._y,h=i-l,d=s-f;this._x=i,this._y=s,this._opt.preventDefaultMouseMove&&Wi.g(t.event),Pi(this,"pan","moveOnMouseMove",t,{dx:h,dy:d,oldX:l,oldY:f,newX:i,newY:s,isAvailableBehavior:null})}},r.prototype._mouseupHandler=function(t){Wi.d(t)||(this._dragging=!1)},r.prototype._mousewheelHandler=function(t){var i=In("zoomOnMouseWheel",t,this._opt),s=In("moveOnMouseWheel",t,this._opt),l=t.wheelDelta,f=Math.abs(l),h=t.offsetX,d=t.offsetY;if(!(l===0||!i&&!s)){if(i){var p=f>3?1.4:f>1?1.2:1.1,m=l>0?p:1/p;Lf(this,"zoom","zoomOnMouseWheel",t,{scale:m,originX:h,originY:d,isAvailableBehavior:null})}if(s){var b=Math.abs(l),A=(l>0?1:-1)*(b>3?.4:b>1?.15:.05);Lf(this,"scrollMove","moveOnMouseWheel",t,{scrollDelta:A,originX:h,originY:d,isAvailableBehavior:null})}}},r.prototype._pinchHandler=function(t){if(!mi(this._zr,"globalPan")){var i=t.pinchScale>1?1.1:1/1.1;Lf(this,"zoom",null,t,{scale:i,originX:t.pinchX,originY:t.pinchY,isAvailableBehavior:null})}},r}(ah.a);function Lf(a,r,t,i,s){a.pointerChecker&&a.pointerChecker(i,s.originX,s.originY)&&(Wi.g(i.event),Pi(a,r,t,i,s))}function Pi(a,r,t,i,s){s.isAvailableBehavior=Object(y.bind)(In,null,t,i),a.trigger(r,s)}function In(a,r,t){var i=t[a];return!a||i&&(!Object(y.isString)(i)||r.event[i+"Key"])}var oi=Li;function Pf(a,r,t){var i=a.target;i.x+=r,i.y+=t,i.dirty()}function Un(a,r,t,i){var s=a.target,l=a.zoomLimit,f=a.zoom=a.zoom||1;if(f*=r,l){var h=l.min||0,d=l.max||Infinity;f=Math.max(Math.min(d,f),h)}var p=f/a.zoom;a.zoom=f,s.x-=(t-s.x)*(p-1),s.y-=(i-s.y)*(p-1),s.scaleX*=p,s.scaleY*=p,s.dirty()}var cp={axisPointer:1,tooltip:1,brush:1};function pu(a,r,t){var i=r.getComponentByElement(a.topTarget),s=i&&i.coordinateSystem;return i&&i!==t&&!cp.hasOwnProperty(i.mainType)&&s&&s.model!==t}var hp=S("1MYJ"),Yo=S("W4dC"),gu=S("s8Fb"),mu=S("Gev7"),wf=["rect","circle","line","ellipse","polygon","polyline","path"],vp=y.createHashMap(wf),dp=y.createHashMap(wf.concat(["g"])),pp=y.createHashMap(wf.concat(["g"])),oh=Object(sr.o)();function yu(a){var r=a.getItemStyle(),t=a.get("areaColor");return t!=null&&(r.fill=t),r}var sh=function(){function a(r){var t=new pr.a;this.uid=Object(ni.c)("ec_map_draw"),this._controller=new oi(r.getZr()),this._controllerHost={target:t},this.group=t,t.add(this._regionsGroup=new pr.a),t.add(this._svgGroup=new pr.a)}return a.prototype.draw=function(r,t,i,s,l){var f=r.mainType==="geo",h=r.getData&&r.getData();f&&t.eachComponent({mainType:"series",subType:"map"},function(dt){!h&&dt.getHostGeoModel()===r&&(h=dt.getData())});var d=r.coordinateSystem,p=this._regionsGroup,m=this.group,b=d.getTransformInfo(),A=b.raw,E=b.roam,P=!p.childAt(0)||l;P?(m.x=E.x,m.y=E.y,m.scaleX=E.scaleX,m.scaleY=E.scaleY,m.dirty()):Ze.updateProps(m,E,r);var j=h&&h.getVisual("visualMeta")&&h.getVisual("visualMeta").length>0,J={api:i,geo:d,mapOrGeoModel:r,data:h,isVisualEncodedByVisualMap:j,isGeo:f,transformInfoRaw:A};d.resourceType==="geoJSON"?this._buildGeoJSON(J):d.resourceType==="geoSVG"&&this._buildSVG(J),this._updateController(r,t,i),this._updateMapSelectHandler(r,p,i,s)},a.prototype._buildGeoJSON=function(r){var t=this._regionsGroupByName=y.createHashMap(),i=this._regionsGroup,s=r.transformInfoRaw,l=r.mapOrGeoModel,f=r.data,h=function(d){return[d[0]*s.scaleX+s.x,d[1]*s.scaleY+s.y]};i.removeAll(),y.each(r.geo.regions,function(d){var p=d.name,m=l.getRegionModel(p),b=f?f.indexOfName(p):null,A=t.get(p),E=!!A;E||(A=t.set(p,new pr.a),i.add(A));var P=new hp.a({segmentIgnoreThreshold:1,shape:{paths:[]}});A.add(P),E||(fh(r,A,p,m,l,b),zr(r,A,p,m,l),ch(r,A,p,m,l)),y.each(d.geometries,function(J){if(J.type==="polygon"){for(var dt=[],St=0;St<J.exterior.length;++St)dt.push(h(J.exterior[St]));P.shape.paths.push(new Hi.a({segmentIgnoreThreshold:1,shape:{points:dt}}));for(var St=0;St<(J.interiors?J.interiors.length:0);++St){for(var Ot=J.interiors[St],wt=[],zt=0;zt<Ot.length;++zt)wt.push(h(Ot[zt]));P.shape.paths.push(new Hi.a({segmentIgnoreThreshold:1,shape:{points:wt}}))}}}),lh(r,P,b,m),P instanceof mu.c&&(P.culling=!0);var j=h(d.getCenter());uh(r,P,p,m,l,b,j)},this)},a.prototype._buildSVG=function(r){var t=r.geo.map,i=r.transformInfoRaw;this._svgGroup.x=i.x,this._svgGroup.y=i.y,this._svgGroup.scaleX=i.scaleX,this._svgGroup.scaleY=i.scaleY,this._svgResourceChanged(t)&&(this._freeSVG(),this._useSVG(t));var s=this._svgDispatcherMap=y.createHashMap(),l=!1;y.each(this._svgGraphicRecord.named,function(f){var h=f.name,d=r.mapOrGeoModel,p=r.data,m=f.svgNodeTagLower,b=f.el,A=p?p.indexOfName(h):null,E=d.getRegionModel(h);if(vp.get(m)!=null&&b instanceof mu.c&&lh(r,b,A,E),b instanceof mu.c&&(b.culling=!0),b.z2EmphasisLift=0,!f.namedFrom&&(pp.get(m)!=null&&uh(r,b,h,E,d,A,null),fh(r,b,h,E,d,A),zr(r,b,h,E,d),dp.get(m)!=null)){var P=ch(r,b,h,E,d);P==="self"&&(l=!0);var j=s.get(h)||s.set(h,[]);j.push(b)}},this),this._enableBlurEntireSVG(l,r)},a.prototype._enableBlurEntireSVG=function(r,t){if(r&&t.isGeo){var i=t.mapOrGeoModel.getModel(["blur","itemStyle"]).getItemStyle(),s=i.opacity;this._svgGraphicRecord.root.traverse(function(l){if(!l.isGroup){Object(qe.G)(l);var f=l.ensureState("blur").style||{};f.opacity==null&&s!=null&&(f.opacity=s),l.ensureState("emphasis")}})}},a.prototype.remove=function(){this._regionsGroup.removeAll(),this._regionsGroupByName=null,this._svgGroup.removeAll(),this._freeSVG(),this._controller.dispose(),this._controllerHost=null},a.prototype.findHighDownDispatchers=function(r,t){if(r==null)return[];var i=t.coordinateSystem;if(i.resourceType==="geoJSON"){var s=this._regionsGroupByName;if(s){var l=s.get(r);return l?[l]:[]}}else if(i.resourceType==="geoSVG")return this._svgDispatcherMap&&this._svgDispatcherMap.get(r)||[]},a.prototype._svgResourceChanged=function(r){return this._svgMapName!==r},a.prototype._useSVG=function(r){var t=Yo.a.getGeoResource(r);if(t&&t.type==="geoSVG"){var i=t.useGraphic(this.uid);this._svgGroup.add(i.root),this._svgGraphicRecord=i,this._svgMapName=r}},a.prototype._freeSVG=function(){var r=this._svgMapName;if(r!=null){var t=Yo.a.getGeoResource(r);t&&t.type==="geoSVG"&&t.freeGraphic(this.uid),this._svgGraphicRecord=null,this._svgDispatcherMap=null,this._svgGroup.removeAll(),this._svgMapName=null}},a.prototype._updateController=function(r,t,i){var s=r.coordinateSystem,l=this._controller,f=this._controllerHost;f.zoomLimit=r.get("scaleLimit"),f.zoom=s.getZoom(),l.enable(r.get("roam")||!1);var h=r.mainType;function d(){var p={type:"geoRoam",componentType:h};return p[h+"Id"]=r.id,p}l.off("pan").on("pan",function(p){this._mouseDownFlag=!1,Pf(f,p.dx,p.dy),i.dispatchAction(y.extend(d(),{dx:p.dx,dy:p.dy}))},this),l.off("zoom").on("zoom",function(p){this._mouseDownFlag=!1,Un(f,p.scale,p.originX,p.originY),i.dispatchAction(y.extend(d(),{zoom:p.scale,originX:p.originX,originY:p.originY}))},this),l.setPointerChecker(function(p,m,b){return s.containPoint([m,b])&&!pu(p,i,r)})},a.prototype.resetForLabelLayout=function(){this.group.traverse(function(r){var t=r.getTextContent();t&&(t.ignore=oh(t).ignore)})},a.prototype._updateMapSelectHandler=function(r,t,i,s){var l=this;t.off("mousedown"),t.off("click"),r.get("selectedMode")&&(t.on("mousedown",function(){l._mouseDownFlag=!0}),t.on("click",function(f){!l._mouseDownFlag||(l._mouseDownFlag=!1)}))},a}();function lh(a,r,t,i){var s=i.getModel("itemStyle"),l=i.getModel(["emphasis","itemStyle"]),f=i.getModel(["blur","itemStyle"]),h=i.getModel(["select","itemStyle"]),d=yu(s),p=yu(l),m=yu(h),b=yu(f),A=a.data;if(A){var E=A.getItemVisual(t,"style"),P=A.getItemVisual(t,"decal");a.isVisualEncodedByVisualMap&&E.fill&&(d.fill=E.fill),P&&(d.decal=Object(gu.a)(P,a.api))}r.setStyle(d),r.style.strokeNoScale=!0,r.ensureState("emphasis").style=p,r.ensureState("select").style=m,r.ensureState("blur").style=b,Object(qe.G)(r)}function uh(a,r,t,i,s,l,f){var h=a.data,d=a.isGeo,p=h&&isNaN(h.get(h.mapDimension("value"),l)),m=h&&h.getItemLayout(l);if(d||p||m&&m.showLabel){var b=d?t:l,A=void 0;(!h||l>=0)&&(A=s);var E=f?{normal:{align:"center",verticalAlign:"middle"}}:null;Object(Ar.h)(r,Object(Ar.f)(i),{labelFetcher:A,labelDataIndex:b,defaultText:t},E);var P=r.getTextContent();if(P&&(oh(P).ignore=P.ignore,r.textConfig&&f)){var j=r.getBoundingRect().clone();r.textConfig.position=[(f[0]-j.x)/j.width*100+"%",(f[1]-j.y)/j.height*100+"%"]}Object(Ar.d)(r,l,null),r.disableLabelAnimation=!0}else r.removeTextContent(),r.removeTextConfig(),r.disableLabelAnimation=null}function fh(a,r,t,i,s,l){a.data?a.data.setItemGraphicEl(l,r):Object(Ur.a)(r).eventData={componentType:"geo",componentIndex:s.componentIndex,geoIndex:s.componentIndex,name:t,region:i&&i.option||{}}}function zr(a,r,t,i,s){a.data||Ze.setTooltipConfig({el:r,componentModel:s,itemName:t,itemTooltipOption:i.get("tooltip")})}function ch(a,r,t,i,s){r.highDownSilentOnTouch=!!s.get("selectedMode");var l=i.getModel("emphasis"),f=l.get("focus");return Object(qe.o)(r,f,l.get("blurScope")),a.isGeo&&Object(qe.n)(r,s,t),f}var If=sh,hh=function(a){Object(de.b)(r,a);function r(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=r.type,t}return r.prototype.render=function(t,i,s,l){if(!(l&&l.type==="mapToggleSelect"&&l.from===this.uid)){var f=this.group;if(f.removeAll(),!t.getHostGeoModel()){if(this._mapDraw&&l&&l.type==="geoRoam"&&this._mapDraw.resetForLabelLayout(),l&&l.type==="geoRoam"&&l.componentType==="series"&&l.seriesId===t.id){var h=this._mapDraw;h&&f.add(h.group)}else if(t.needsDrawMap){var h=this._mapDraw||new If(s);f.add(h.group),h.draw(t,i,s,this,l),this._mapDraw=h}else this._mapDraw&&this._mapDraw.remove(),this._mapDraw=null;t.get("showLegendSymbol")&&i.getComponent("legend")&&this._renderSymbols(t,i,s)}}},r.prototype.remove=function(){this._mapDraw&&this._mapDraw.remove(),this._mapDraw=null,this.group.removeAll()},r.prototype.dispose=function(){this._mapDraw&&this._mapDraw.remove(),this._mapDraw=null},r.prototype._renderSymbols=function(t,i,s){var l=t.originalData,f=this.group;l.each(l.mapDimension("value"),function(h,d){if(!isNaN(h)){var p=l.getItemLayout(d);if(!(!p||!p.point)){var m=p.point,b=p.offset,A=new Ss.a({style:{fill:t.getData().getVisual("style").fill},shape:{cx:m[0]+b*9,cy:m[1],r:3},silent:!0,z2:8+(b?0:qe.j+1)});if(!b){var E=t.mainSeries.getData(),P=l.getName(d),j=E.indexOfName(P),J=l.getItemModel(d),dt=J.getModel("label"),St=E.getItemGraphicEl(j);Object(Ar.h)(A,Object(Ar.f)(J),{labelFetcher:{getFormattedLabel:function(Ot,wt){return t.getFormattedLabel(j,wt)}}}),A.disableLabelAnimation=!0,dt.get("position")||A.setTextConfig({position:"bottom"}),St.onHoverStateChange=function(Ot){Object(qe.H)(A,Ot)}}f.add(A)}}})},r.type="map",r}(yn.a),se=hh,Rf=function(a){Object(de.b)(r,a);function r(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=r.type,t.needsDrawMap=!1,t.seriesGroup=[],t.getTooltipPosition=function(i){if(i!=null){var s=this.getData().getName(i),l=this.coordinateSystem,f=l.getRegion(s);return f&&l.dataToPoint(f.getCenter())}},t}return r.prototype.getInitialData=function(t){for(var i=Di(this,{coordDimensions:["value"],encodeDefaulter:y.curry(ma.d,this)}),s=y.createHashMap(),l=[],f=0,h=i.count();f<h;f++){var d=i.getName(f);s.set(d,!0)}var p=Yo.a.load(this.getMapType(),this.option.nameMap,this.option.nameProperty);return y.each(p.regions,function(m){var b=m.name;s.get(b)||l.push(b)}),i.appendValues([],l),i},r.prototype.getHostGeoModel=function(){var t=this.option.geoIndex;return t!=null?this.ecModel.getComponent("geo",t):null},r.prototype.getMapType=function(){return(this.getHostGeoModel()||this).option.map},r.prototype.getRawValue=function(t){var i=this.getData();return i.get(i.mapDimension("value"),t)},r.prototype.getRegionModel=function(t){var i=this.getData();return i.getItemModel(i.indexOfName(t))},r.prototype.formatTooltip=function(t,i,s){for(var l=this.getData(),f=this.getRawValue(t),h=l.getName(t),d=this.seriesGroup,p=[],m=0;m<d.length;m++){var b=d[m].originalData.indexOfName(h),A=l.mapDimension("value");isNaN(d[m].originalData.get(A,b))||p.push(d[m].name)}return Object(wn.c)("section",{header:p.join(", "),noHeader:!p.length,blocks:[Object(wn.c)("nameValue",{name:h,value:f})]})},r.prototype.setZoom=function(t){this.option.zoom=t},r.prototype.setCenter=function(t){this.option.center=t},r.prototype.getLegendIcon=function(t){var i=t.symbolType||"roundRect",s=Object(lr.a)(i,0,0,t.itemWidth,t.itemHeight,t.itemStyle.fill,t.symbolKeepAspect);return s.setStyle(t.itemStyle),s.style.stroke="none",i.indexOf("empty")>-1&&(s.style.stroke=s.style.fill,s.style.fill="#fff",s.style.lineWidth=2),s},r.type="series.map",r.dependencies=["geo"],r.layoutMode="box",r.defaultOption={zlevel:0,z:2,coordinateSystem:"geo",map:"",left:"center",top:"center",aspectScale:null,showLegendSymbol:!0,boundingCoords:null,center:null,zoom:1,scaleLimit:null,selectedMode:!0,label:{show:!1,color:"#000"},itemStyle:{borderWidth:.5,borderColor:"#444",areaColor:"#eee"},emphasis:{label:{show:!0,color:"rgb(100,0,0)"},itemStyle:{areaColor:"rgba(255,215,0,0.8)"}},select:{label:{show:!0,color:"rgb(100,0,0)"},itemStyle:{color:"rgba(255,215,0,0.8)"}},nameProperty:"name"},r}(Nr.a),gn=Rf;function vh(a,r){var t={};return y.each(a,function(i){i.each(i.mapDimension("value"),function(s,l){var f="ec-"+i.getName(l);t[f]=t[f]||[],isNaN(s)||t[f].push(s)})}),a[0].map(a[0].mapDimension("value"),function(i,s){for(var l="ec-"+a[0].getName(s),f=0,h=Infinity,d=-Infinity,p=t[l].length,m=0;m<p;m++)h=Math.min(h,t[l][m]),d=Math.max(d,t[l][m]),f+=t[l][m];var b;return r==="min"?b=h:r==="max"?b=d:r==="average"?b=f/p:b=f,p===0?NaN:b})}function gp(a){var r={};a.eachSeriesByType("map",function(t){var i=t.getHostGeoModel(),s=i?"o"+i.id:"i"+t.getMapType();(r[s]=r[s]||[]).push(t)}),y.each(r,function(t,i){for(var s=vh(y.map(t,function(f){return f.getData()}),t[0].get("mapValueCalculation")),l=0;l<t.length;l++)t[l].originalData=t[l].getData();for(var l=0;l<t.length;l++)t[l].seriesGroup=t,t[l].needsDrawMap=l===0&&!t[l].getHostGeoModel(),t[l].setData(s.cloneShallow()),t[l].mainSeries=t[0]})}function dh(a){var r={};a.eachSeriesByType("map",function(t){var i=t.getMapType();if(!(t.getHostGeoModel()||r[i])){var s={};y.each(t.seriesGroup,function(f){var h=f.coordinateSystem,d=f.originalData;f.get("showLegendSymbol")&&a.getComponent("legend")&&d.each(d.mapDimension("value"),function(p,m){var b=d.getName(m),A=h.getRegion(b);if(!(!A||isNaN(p))){var E=s[b]||0,P=h.dataToPoint(A.getCenter());s[b]=E+1,d.setItemLayout(m,{point:P,offset:E})}})});var l=t.getData();l.each(function(f){var h=l.getName(f),d=l.getItemLayout(f)||{};d.showLabel=!s[h],l.setItemLayout(f,d)}),r[i]=!0}})}var Ts=S("hYLj"),vl=Ir.applyTransform,mp=function(a){Object(de.b)(r,a);function r(t){var i=a.call(this)||this;return i.type="view",i.dimensions=["x","y"],i._roamTransformable=new Ts.a,i._rawTransformable=new Ts.a,i.name=t,i}return r.prototype.setBoundingRect=function(t,i,s,l){return this._rect=new ai.a(t,i,s,l),this._rect},r.prototype.getBoundingRect=function(){return this._rect},r.prototype.setViewRect=function(t,i,s,l){this._transformTo(t,i,s,l),this._viewRect=new ai.a(t,i,s,l)},r.prototype._transformTo=function(t,i,s,l){var f=this.getBoundingRect(),h=this._rawTransformable;h.transform=f.calculateTransform(new ai.a(t,i,s,l));var d=h.parent;h.parent=null,h.decomposeTransform(),h.parent=d,this._updateTransform()},r.prototype.setCenter=function(t){!t||(this._center=t,this._updateCenterAndZoom())},r.prototype.setZoom=function(t){t=t||1;var i=this.zoomLimit;i&&(i.max!=null&&(t=Math.min(i.max,t)),i.min!=null&&(t=Math.max(i.min,t))),this._zoom=t,this._updateCenterAndZoom()},r.prototype.getDefaultCenter=function(){var t=this.getBoundingRect(),i=t.x+t.width/2,s=t.y+t.height/2;return[i,s]},r.prototype.getCenter=function(){return this._center||this.getDefaultCenter()},r.prototype.getZoom=function(){return this._zoom||1},r.prototype.getRoamTransform=function(){return this._roamTransformable.getLocalTransform()},r.prototype._updateCenterAndZoom=function(){var t=this._rawTransformable.getLocalTransform(),i=this._roamTransformable,s=this.getDefaultCenter(),l=this.getCenter(),f=this.getZoom();l=Ir.applyTransform([],l,t),s=Ir.applyTransform([],s,t),i.originX=l[0],i.originY=l[1],i.x=s[0]-l[0],i.y=s[1]-l[1],i.scaleX=i.scaleY=f,this._updateTransform()},r.prototype._updateTransform=function(){var t=this._roamTransformable,i=this._rawTransformable;i.parent=t,t.updateTransform(),i.updateTransform(),vn.copy(this.transform||(this.transform=[]),i.transform||vn.create()),this._rawTransform=i.getLocalTransform(),this.invTransform=this.invTransform||[],vn.invert(this.invTransform,this.transform),this.decomposeTransform()},r.prototype.getTransformInfo=function(){var t=this._rawTransformable,i=this._roamTransformable,s=new Ts.a;return s.transform=i.transform,s.decomposeTransform(),{roam:{x:s.x,y:s.y,scaleX:s.scaleX,scaleY:s.scaleY},raw:{x:t.x,y:t.y,scaleX:t.scaleX,scaleY:t.scaleY}}},r.prototype.getViewRect=function(){return this._viewRect},r.prototype.getViewRectAfterRoam=function(){var t=this.getBoundingRect().clone();return t.applyTransform(this.transform),t},r.prototype.dataToPoint=function(t,i,s){var l=i?this._rawTransform:this.transform;return s=s||[],l?vl(s,t,l):Ir.copy(s,t)},r.prototype.pointToData=function(t){var i=this.invTransform;return i?vl([],t,i):[t[0],t[1]]},r.prototype.convertToPixel=function(t,i,s){var l=ph(i);return l===this?l.dataToPoint(s):null},r.prototype.convertFromPixel=function(t,i,s){var l=ph(i);return l===this?l.pointToData(s):null},r.prototype.containPoint=function(t){return this.getViewRectAfterRoam().contain(t[0],t[1])},r.dimensions=["x","y"],r}(Ts.a);function ph(a){var r=a.seriesModel;return r?r.coordinateSystem:null}var Os=mp,dl={geoJSON:{aspectScale:.75,invertLongitute:!0},geoSVG:{aspectScale:1,invertLongitute:!1}},gh=function(a){Object(de.b)(r,a);function r(t,i,s){var l=a.call(this,t)||this;l.dimensions=["lng","lat"],l.type="geo",l._nameCoordMap=y.createHashMap(),l.map=i;var f=Yo.a.load(i,s.nameMap,s.nameProperty),h=Yo.a.getGeoResource(i);l.resourceType=h?h.type:null;var d=dl[h.type];l._regionsMap=f.regionsMap,l._invertLongitute=d.invertLongitute,l.regions=f.regions,l.aspectScale=y.retrieve2(s.aspectScale,d.aspectScale);var p=f.boundingRect;return l.setBoundingRect(p.x,p.y,p.width,p.height),l}return r.prototype._transformTo=function(t,i,s,l){var f=this.getBoundingRect(),h=this._invertLongitute;f=f.clone(),h&&(f.y=-f.y-f.height);var d=this._rawTransformable;d.transform=f.calculateTransform(new ai.a(t,i,s,l));var p=d.parent;d.parent=null,d.decomposeTransform(),d.parent=p,h&&(d.scaleY=-d.scaleY),this._updateTransform()},r.prototype.getRegion=function(t){return this._regionsMap.get(t)},r.prototype.getRegionByCoord=function(t){for(var i=this.regions,s=0;s<i.length;s++){var l=i[s];if(l.type==="geoJSON"&&l.contain(t))return i[s]}},r.prototype.addGeoCoord=function(t,i){this._nameCoordMap.set(t,i)},r.prototype.getGeoCoord=function(t){var i=this._regionsMap.get(t);return this._nameCoordMap.get(t)||i&&i.getCenter()},r.prototype.dataToPoint=function(t,i,s){if(typeof t=="string"&&(t=this.getGeoCoord(t)),t)return Os.prototype.dataToPoint.call(this,t,i,s)},r.prototype.convertToPixel=function(t,i,s){var l=pl(i);return l===this?l.dataToPoint(s):null},r.prototype.convertFromPixel=function(t,i,s){var l=pl(i);return l===this?l.pointToData(s):null},r}(Os);y.mixin(gh,Os);function pl(a){var r=a.geoModel,t=a.seriesModel;return r?r.coordinateSystem:t?t.coordinateSystem||(t.getReferringComponents("geo",sr.b).models[0]||{}).coordinateSystem:null}var Nf=gh;function xu(a,r){var t=a.get("boundingCoords");if(t!=null){var i=t[0],s=t[1];isNaN(i[0])||isNaN(i[1])||isNaN(s[0])||isNaN(s[1])||this.setBoundingRect(i[0],i[1],s[0]-i[0],s[1]-i[1])}var l=this.getBoundingRect(),f=a.get("layoutCenter"),h=a.get("layoutSize"),d=r.getWidth(),p=r.getHeight(),m=l.width/l.height*this.aspectScale,b=!1,A,E;f&&h&&(A=[Ne.o(f[0],d),Ne.o(f[1],p)],E=Ne.o(h,Math.min(d,p)),!isNaN(A[0])&&!isNaN(A[1])&&!isNaN(E)&&(b=!0));var P;if(b)P={},m>1?(P.width=E,P.height=E/m):(P.height=E,P.width=E*m),P.y=A[1]-P.height/2,P.x=A[0]-P.width/2;else{var j=a.getBoxLayoutParams();j.aspect=m,P=Tr.g(j,{width:d,height:p})}this.setViewRect(P.x,P.y,P.width,P.height),this.setCenter(a.get("center")),this.setZoom(a.get("zoom"))}function Ky(a,r){y.each(r.get("geoCoord"),function(t,i){a.addGeoCoord(i,t)})}var bu=function(){function a(){this.dimensions=Nf.prototype.dimensions}return a.prototype.create=function(r,t){var i=[];r.eachComponent("geo",function(l,f){var h=l.get("map"),d=new Nf(h+f,h,{nameMap:l.get("nameMap"),nameProperty:l.get("nameProperty"),aspectScale:l.get("aspectScale")});d.zoomLimit=l.get("scaleLimit"),i.push(d),l.coordinateSystem=d,d.model=l,d.resize=xu,d.resize(l,t)}),r.eachSeries(function(l){var f=l.get("coordinateSystem");if(f==="geo"){var h=l.get("geoIndex")||0;l.coordinateSystem=i[h]}});var s={};return r.eachSeriesByType("map",function(l){if(!l.getHostGeoModel()){var f=l.getMapType();s[f]=s[f]||[],s[f].push(l)}}),y.each(s,function(l,f){var h=y.map(l,function(p){return p.get("nameMap")}),d=new Nf(f,f,{nameMap:y.mergeAll(h),nameProperty:l[0].get("nameProperty"),aspectScale:l[0].get("aspectScale")});d.zoomLimit=y.retrieve.apply(null,y.map(l,function(p){return p.get("scaleLimit")})),i.push(d),d.resize=xu,d.resize(l[0],t),y.each(l,function(p){p.coordinateSystem=d,Ky(d,p)})}),i},a.prototype.getFilledRegions=function(r,t,i,s){for(var l=(r||[]).slice(),f=y.createHashMap(),h=0;h<l.length;h++)f.set(l[h].name,l[h]);var d=Yo.a.load(t,i,s);return y.each(d.regions,function(p){var m=p.name;!f.get(m)&&l.push({name:m})}),l},a}(),As=new bu,Xo=As,Su=function(a){Object(de.b)(r,a);function r(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=r.type,t}return r.prototype.init=function(t,i,s){var l=Yo.a.getGeoResource(t.map);if(l&&l.type==="geoJSON"){var f=t.itemStyle=t.itemStyle||{};"color"in f||(f.color="#eee")}this.mergeDefaultAndTheme(t,s),sr.f(t,"label",["show"])},r.prototype.optionUpdated=function(){var t=this,i=this.option;i.regions=Xo.getFilledRegions(i.regions,i.map,i.nameMap,i.nameProperty);var s={};this._optionModelMap=y.reduce(i.regions||[],function(l,f){var h=f.name;return h&&(l.set(h,new Ye.a(f,t,t.ecModel)),f.selected&&(s[h]=!0)),l},y.createHashMap()),i.selectedMap||(i.selectedMap=s)},r.prototype.getRegionModel=function(t){return this._optionModelMap.get(t)||new Ye.a(null,this,this.ecModel)},r.prototype.getFormattedLabel=function(t,i){var s=this.getRegionModel(t),l=i==="normal"?s.get(["label","formatter"]):s.get(["emphasis","label","formatter"]),f={name:t};if(typeof l=="function")return f.status=i,l(f);if(typeof l=="string")return l.replace("{a}",t!=null?t:"")},r.prototype.setZoom=function(t){this.option.zoom=t},r.prototype.setCenter=function(t){this.option.center=t},r.prototype.select=function(t){var i=this.option,s=i.selectedMode;if(!!s){s!=="multiple"&&(i.selectedMap=null);var l=i.selectedMap||(i.selectedMap={});l[t]=!0}},r.prototype.unSelect=function(t){var i=this.option.selectedMap;i&&(i[t]=!1)},r.prototype.toggleSelected=function(t){this[this.isSelected(t)?"unSelect":"select"](t)},r.prototype.isSelected=function(t){var i=this.option.selectedMap;return!!(i&&i[t])},r.type="geo",r.layoutMode="box",r.defaultOption={zlevel:0,z:0,show:!0,left:"center",top:"center",aspectScale:null,silent:!1,map:"",boundingCoords:null,center:null,zoom:1,scaleLimit:null,label:{show:!1,color:"#000"},itemStyle:{borderWidth:.5,borderColor:"#444"},emphasis:{label:{show:!0,color:"rgb(100,0,0)"},itemStyle:{color:"rgba(255,215,0,0.8)"}},select:{label:{show:!0,color:"rgb(100,0,0)"},itemStyle:{color:"rgba(255,215,0,0.8)"}},regions:[]},r}(An.a),yp=Su;function Ms(a,r,t){var i=a.getZoom(),s=a.getCenter(),l=r.zoom,f=a.dataToPoint(s);if(r.dx!=null&&r.dy!=null&&(f[0]-=r.dx,f[1]-=r.dy,a.setCenter(a.pointToData(f))),l!=null){if(t){var h=t.min||0,d=t.max||Infinity;l=Math.max(Math.min(i*l,d),h)/i}a.scaleX*=l,a.scaleY*=l;var p=(r.originX-a.x)*(l-1),m=(r.originY-a.y)*(l-1);a.x-=p,a.y-=m,a.updateTransform(),a.setCenter(a.pointToData(f)),a.setZoom(l*i)}return{center:a.getCenter(),zoom:a.getZoom()}}var Ds=S("+t0R"),mh=function(a){Object(de.b)(r,a);function r(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=r.type,t.focusBlurEnabled=!0,t}return r.prototype.init=function(t,i){var s=new If(i);this._mapDraw=s,this.group.add(s.group),this._api=i},r.prototype.render=function(t,i,s,l){var f=this._mapDraw;t.get("show")?f.draw(t,i,s,this,l):this._mapDraw.group.removeAll(),f.group.on("click",this._handleRegionClick,this),f.group.silent=t.get("silent"),this._model=t,this.updateSelectStatus(t,i,s)},r.prototype._handleRegionClick=function(t){var i;Object(Ds.a)(t.target,function(s){return(i=Object(Ur.a)(s).eventData)!=null},!0),i&&this._api.dispatchAction({type:"geoToggleSelect",geoId:this._model.id,name:i.name})},r.prototype.updateSelectStatus=function(t,i,s){var l=this;this._mapDraw.group.traverse(function(f){var h=Object(Ur.a)(f).eventData;if(h)return l._model.isSelected(h.name)?s.enterSelect(f):s.leaveSelect(f),!0})},r.prototype.findHighDownDispatchers=function(t){return this._mapDraw&&this._mapDraw.findHighDownDispatchers(t,this._model)},r.prototype.dispose=function(){this._mapDraw&&this._mapDraw.remove()},r.type="geo",r}(Vn.a),yh=mh;function Bf(a){a.registerCoordinateSystem("geo",Xo),a.registerComponentModel(yp),a.registerComponentView(yh);function r(t,i){i.update="geo:updateSelectStatus",a.registerAction(i,function(s,l){var f={},h=[];return l.eachComponent({mainType:"geo",query:s},function(d){d[t](s.name);var p=d.coordinateSystem;Object(y.each)(p.regions,function(b){f[b.name]=d.isSelected(b.name)||!1});var m=[];Object(y.each)(f,function(b,A){f[A]&&m.push(A)}),h.push({geoIndex:d.componentIndex,name:m})}),{selected:f,allSelected:h,name:s.name}})}r("toggleSelected",{type:"geoToggleSelect",event:"geoselectchanged"}),r("select",{type:"geoSelect",event:"geoselected"}),r("unSelect",{type:"geoUnSelect",event:"geounselected"}),a.registerAction({type:"geoRoam",event:"geoRoam",update:"updateTransform"},function(t,i){var s=t.componentType||"series";i.eachComponent({mainType:s,query:t},function(l){var f=l.coordinateSystem;if(f.type==="geo"){var h=Ms(f,t,l.get("scaleLimit"));l.setCenter&&l.setCenter(h.center),l.setZoom&&l.setZoom(h.zoom),s==="series"&&Object(y.each)(l.seriesGroup,function(d){d.setCenter(h.center),d.setZoom(h.zoom)})}})})}function _u(a){Object(B.a)(Bf),a.registerChartView(se),a.registerSeriesModel(gn),a.registerLayout(dh),a.registerProcessor(a.PRIORITY.PROCESSOR.STATISTIC,gp),Object(ha.a)("map",a.registerAction)}var Cs=S("rA99");function xp(a){var r=a;r.hierNode={defaultAncestor:null,ancestor:r,prelim:0,modifier:0,change:0,shift:0,i:0,thread:null};for(var t=[r],i,s;i=t.pop();)if(s=i.children,i.isExpand&&s.length)for(var l=s.length,f=l-1;f>=0;f--){var h=s[f];h.hierNode={defaultAncestor:null,ancestor:h,prelim:0,modifier:0,change:0,shift:0,i:f,thread:null},t.push(h)}}function Hn(a,r){var t=a.isExpand?a.children:[],i=a.parentNode.children,s=a.hierNode.i?i[a.hierNode.i-1]:null;if(t.length){Tu(a);var l=(t[0].hierNode.prelim+t[t.length-1].hierNode.prelim)/2;s?(a.hierNode.prelim=s.hierNode.prelim+r(a,s),a.hierNode.modifier=a.hierNode.prelim-l):a.hierNode.prelim=l}else s&&(a.hierNode.prelim=s.hierNode.prelim+r(a,s));a.parentNode.hierNode.defaultAncestor=xh(a,s,a.parentNode.hierNode.defaultAncestor||i[0],r)}function jf(a){var r=a.hierNode.prelim+a.parentNode.hierNode.modifier;a.setLayout({x:r},!0),a.hierNode.modifier+=a.parentNode.hierNode.modifier}function zf(a){return arguments.length?a:bh}function Es(a,r){return a-=Math.PI/2,{x:r*Math.cos(a),y:r*Math.sin(a)}}function Zo(a,r){return Tr.g(a.getBoxLayoutParams(),{width:r.getWidth(),height:r.getHeight()})}function Tu(a){for(var r=a.children,t=r.length,i=0,s=0;--t>=0;){var l=r[t];l.hierNode.prelim+=i,l.hierNode.modifier+=i,s+=l.hierNode.change,i+=l.hierNode.shift+s}}function xh(a,r,t,i){if(r){for(var s=a,l=a,f=l.parentNode.children[0],h=r,d=s.hierNode.modifier,p=l.hierNode.modifier,m=f.hierNode.modifier,b=h.hierNode.modifier;h=gl(h),l=ml(l),h&&l;){s=gl(s),f=ml(f),s.hierNode.ancestor=a;var A=h.hierNode.prelim+b-l.hierNode.prelim-p+i(h,l);A>0&&(Ko(Ls(h,a,t),a,A),p+=A,d+=A),b+=h.hierNode.modifier,p+=l.hierNode.modifier,d+=s.hierNode.modifier,m+=f.hierNode.modifier}h&&!gl(s)&&(s.hierNode.thread=h,s.hierNode.modifier+=b-d),l&&!ml(f)&&(f.hierNode.thread=l,f.hierNode.modifier+=p-m,t=a)}return t}function gl(a){var r=a.children;return r.length&&a.isExpand?r[r.length-1]:a.hierNode.thread}function ml(a){var r=a.children;return r.length&&a.isExpand?r[0]:a.hierNode.thread}function Ls(a,r,t){return a.hierNode.ancestor.parentNode===r.parentNode?a.hierNode.ancestor:t}function Ko(a,r,t){var i=t/(r.hierNode.i-a.hierNode.i);r.hierNode.change-=i,r.hierNode.shift+=t,r.hierNode.modifier+=t,r.hierNode.prelim+=t,a.hierNode.change+=i}function bh(a,r){return a.parentNode===r.parentNode?1:2}var Sh=S("4mN7"),Ff=function(){function a(){this.parentPoint=[],this.childPoints=[]}return a}(),bp=function(a){Object(de.b)(r,a);function r(t){return a.call(this,t)||this}return r.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},r.prototype.getDefaultShape=function(){return new Ff},r.prototype.buildPath=function(t,i){var s=i.childPoints,l=s.length,f=i.parentPoint,h=s[0],d=s[l-1];if(l===1){t.moveTo(f[0],f[1]),t.lineTo(h[0],h[1]);return}var p=i.orient,m=p==="TB"||p==="BT"?0:1,b=1-m,A=Object(Ne.o)(i.forkPosition,1),E=[];E[m]=f[m],E[b]=f[b]+(d[b]-f[b])*A,t.moveTo(f[0],f[1]),t.lineTo(E[0],E[1]),t.moveTo(h[0],h[1]),E[m]=h[m],t.lineTo(E[0],E[1]),E[m]=d[m],t.lineTo(E[0],E[1]),t.lineTo(d[0],d[1]);for(var P=1;P<l-1;P++){var j=s[P];t.moveTo(j[0],j[1]),E[m]=j[m],t.lineTo(E[0],E[1])}},r}(ot.b),Sp=function(a){Object(de.b)(r,a);function r(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=r.type,t._mainGroup=new pr.a,t}return r.prototype.init=function(t,i){this._controller=new oi(i.getZr()),this._controllerHost={target:this.group},this.group.add(this._mainGroup)},r.prototype.render=function(t,i,s){var l=t.getData(),f=t.layoutInfo,h=this._mainGroup,d=t.get("layout");d==="radial"?(h.x=f.x+f.width/2,h.y=f.y+f.height/2):(h.x=f.x,h.y=f.y),this._updateViewCoordSys(t),this._updateController(t,i,s);var p=this._data;l.diff(p).add(function(m){yl(l,m)&&_h(l,m,null,h,t)}).update(function(m,b){var A=p.getItemGraphicEl(b);if(!yl(l,m)){A&&Vf(p,b,A,h,t);return}_h(l,m,A,h,t)}).remove(function(m){var b=p.getItemGraphicEl(m);b&&Vf(p,m,b,h,t)}).execute(),this._nodeScaleRatio=t.get("nodeScaleRatio"),this._updateNodeAndLinkScale(t),t.get("expandAndCollapse")===!0&&l.eachItemGraphicEl(function(m,b){m.off("click").on("click",function(){s.dispatchAction({type:"treeExpandAndCollapse",seriesId:t.id,dataIndex:b})})}),this._data=l},r.prototype._updateViewCoordSys=function(t){var i=t.getData(),s=[];i.each(function(m){var b=i.getItemLayout(m);b&&!isNaN(b.x)&&!isNaN(b.y)&&s.push([+b.x,+b.y])});var l=[],f=[];Sh.d(s,l,f);var h=this._min,d=this._max;f[0]-l[0]==0&&(l[0]=h?h[0]:l[0]-1,f[0]=d?d[0]:f[0]+1),f[1]-l[1]==0&&(l[1]=h?h[1]:l[1]-1,f[1]=d?d[1]:f[1]+1);var p=t.coordinateSystem=new Os;p.zoomLimit=t.get("scaleLimit"),p.setBoundingRect(l[0],l[1],f[0]-l[0],f[1]-l[1]),p.setCenter(t.get("center")),p.setZoom(t.get("zoom")),this.group.attr({x:p.x,y:p.y,scaleX:p.scaleX,scaleY:p.scaleY}),this._min=l,this._max=f},r.prototype._updateController=function(t,i,s){var l=this,f=this._controller,h=this._controllerHost,d=this.group;f.setPointerChecker(function(p,m,b){var A=d.getBoundingRect();return A.applyTransform(d.transform),A.contain(m,b)&&!pu(p,s,t)}),f.enable(t.get("roam")),h.zoomLimit=t.get("scaleLimit"),h.zoom=t.coordinateSystem.getZoom(),f.off("pan").off("zoom").on("pan",function(p){Pf(h,p.dx,p.dy),s.dispatchAction({seriesId:t.id,type:"treeRoam",dx:p.dx,dy:p.dy})}).on("zoom",function(p){Un(h,p.scale,p.originX,p.originY),s.dispatchAction({seriesId:t.id,type:"treeRoam",zoom:p.scale,originX:p.originX,originY:p.originY}),l._updateNodeAndLinkScale(t),s.updateLabelLayout()})},r.prototype._updateNodeAndLinkScale=function(t){var i=t.getData(),s=this._getNodeGlobalScale(t);i.eachItemGraphicEl(function(l,f){l.setSymbolScale(s)})},r.prototype._getNodeGlobalScale=function(t){var i=t.coordinateSystem;if(i.type!=="view")return 1;var s=this._nodeScaleRatio,l=i.scaleX||1,f=i.getZoom(),h=(f-1)*s+1;return h/l},r.prototype.dispose=function(){this._controller&&this._controller.dispose(),this._controllerHost=null},r.prototype.remove=function(){this._mainGroup.removeAll(),this._data=null},r.type="tree",r}(yn.a);function yl(a,r){var t=a.getItemLayout(r);return t&&!isNaN(t.x)&&!isNaN(t.y)}function _h(a,r,t,i,s){var l=!t,f=a.tree.getNodeByDataIndex(r),h=f.getModel(),d=f.getVisual("style").fill,p=f.isExpand===!1&&f.children.length!==0?d:"#fff",m=a.tree.root,b=f.parentNode===m?f:f.parentNode||f,A=a.getItemGraphicEl(b.dataIndex),E=b.getLayout(),P=A?{x:A.__oldX,y:A.__oldY,rawX:A.__radialOldRawX,rawY:A.__radialOldRawY}:E,j=f.getLayout();l?(t=new Ma(a,r,null,{symbolInnerColor:p,useNameLabel:!0}),t.x=P.x,t.y=P.y):t.updateData(a,r,null,{symbolInnerColor:p,useNameLabel:!0}),t.__radialOldRawX=t.__radialRawX,t.__radialOldRawY=t.__radialRawY,t.__radialRawX=j.rawX,t.__radialRawY=j.rawY,i.add(t),a.setItemGraphicEl(r,t),t.__oldX=t.x,t.__oldY=t.y,Ze.updateProps(t,{x:j.x,y:j.y},s);var J=t.getSymbolPath();if(s.get("layout")==="radial"){var dt=m.children[0],St=dt.getLayout(),Ot=dt.children.length,wt=void 0,zt=void 0;if(j.x===St.x&&f.isExpand===!0){var jt={x:(dt.children[0].getLayout().x+dt.children[Ot-1].getLayout().x)/2,y:(dt.children[0].getLayout().y+dt.children[Ot-1].getLayout().y)/2};wt=Math.atan2(jt.y-St.y,jt.x-St.x),wt<0&&(wt=Math.PI*2+wt),zt=jt.x<St.x,zt&&(wt=wt-Math.PI)}else wt=Math.atan2(j.y-St.y,j.x-St.x),wt<0&&(wt=Math.PI*2+wt),f.children.length===0||f.children.length!==0&&f.isExpand===!1?(zt=j.x<St.x,zt&&(wt=wt-Math.PI)):(zt=j.x>St.x,zt||(wt=wt-Math.PI));var kt=zt?"left":"right",te=h.getModel("label"),ue=te.get("rotate"),me=ue*(Math.PI/180),ve=J.getTextContent();ve&&(J.setTextConfig({position:te.get("position")||kt,rotation:ue==null?-wt:me,origin:"center"}),ve.setStyle("verticalAlign","middle"))}var Me=h.get(["emphasis","focus"]),Ee=Me==="ancestor"?f.getAncestorsIndices():Me==="descendant"?f.getDescendantIndices():null;Ee&&(Object(Ur.a)(t).focus=Ee),Th(s,f,m,t,P,E,j,i),t.__edge&&(t.onHoverStateChange=function(Oe){if(Oe!=="blur"){var we=f.parentNode&&a.getItemGraphicEl(f.parentNode.dataIndex);we&&we.hoverState===qe.d||Object(qe.H)(t.__edge,Oe)}})}function Th(a,r,t,i,s,l,f,h){var d=r.getModel(),p=a.get("edgeShape"),m=a.get("layout"),b=a.getOrient(),A=a.get(["lineStyle","curveness"]),E=a.get("edgeForkPosition"),P=d.getModel("lineStyle").getLineStyle(),j=i.__edge;if(p==="curve")r.parentNode&&r.parentNode!==t&&(j||(j=i.__edge=new Cs.a({shape:Gf(m,b,A,s,s)})),Ze.updateProps(j,{shape:Gf(m,b,A,l,f)},a));else if(p==="polyline"&&m==="orthogonal"&&r!==t&&r.children&&r.children.length!==0&&r.isExpand===!0){for(var J=r.children,dt=[],St=0;St<J.length;St++){var Ot=J[St].getLayout();dt.push([Ot.x,Ot.y])}j||(j=i.__edge=new bp({shape:{parentPoint:[f.x,f.y],childPoints:[[f.x,f.y]],orient:b,forkPosition:E}})),Ze.updateProps(j,{shape:{parentPoint:[f.x,f.y],childPoints:dt}},a)}j&&(j.useStyle(y.defaults({strokeNoScale:!0,fill:null},P)),Object(qe.I)(j,d,"lineStyle"),Object(qe.G)(j),h.add(j))}function Vf(a,r,t,i,s){for(var l=a.tree.getNodeByDataIndex(r),f=a.tree.root,h=l.parentNode===f?l:l.parentNode||l,d;d=h.getLayout(),d==null;)h=h.parentNode===f?h:h.parentNode||h;var p={duration:s.get("animationDurationUpdate"),easing:s.get("animationEasingUpdate")};Ze.removeElement(t,{x:d.x+1,y:d.y+1},s,{cb:function(){i.remove(t),a.setItemGraphicEl(r,null)},removeOpt:p}),t.fadeOut(null,{fadeLabel:!0,animation:p});var m=a.getItemGraphicEl(h.dataIndex),b=m.__edge,A=t.__edge||(h.isExpand===!1||h.children.length===1?b:void 0),E=s.get("edgeShape"),P=s.get("layout"),j=s.get("orient"),J=s.get(["lineStyle","curveness"]);A&&(E==="curve"?Ze.removeElement(A,{shape:Gf(P,j,J,d,d),style:{opacity:0}},s,{cb:function(){i.remove(A)},removeOpt:p}):E==="polyline"&&s.get("layout")==="orthogonal"&&Ze.removeElement(A,{shape:{parentPoint:[d.x,d.y],childPoints:[[d.x,d.y]]},style:{opacity:0}},s,{cb:function(){i.remove(A)},removeOpt:p}))}function Gf(a,r,t,i,s){var l,f,h,d,p,m,b,A;if(a==="radial"){p=i.rawX,b=i.rawY,m=s.rawX,A=s.rawY;var E=Es(p,b),P=Es(p,b+(A-b)*t),j=Es(m,A+(b-A)*t),J=Es(m,A);return{x1:E.x||0,y1:E.y||0,x2:J.x||0,y2:J.y||0,cpx1:P.x||0,cpy1:P.y||0,cpx2:j.x||0,cpy2:j.y||0}}else p=i.x,b=i.y,m=s.x,A=s.y,(r==="LR"||r==="RL")&&(l=p+(m-p)*t,f=b,h=m+(p-m)*t,d=A),(r==="TB"||r==="BT")&&(l=p,f=b+(A-b)*t,h=m,d=A+(b-A)*t);return{x1:p,y1:b,x2:m,y2:A,cpx1:l,cpy1:f,cpx2:h,cpy2:d}}var _p=Sp,Ou=S("Mdki"),ko=function(){function a(r,t){this.depth=0,this.height=0,this.dataIndex=-1,this.children=[],this.viewChildren=[],this.isExpand=!1,this.name=r||"",this.hostTree=t}return a.prototype.isRemoved=function(){return this.dataIndex<0},a.prototype.eachNode=function(r,t,i){typeof r=="function"&&(i=t,t=r,r=null),r=r||{},y.isString(r)&&(r={order:r});var s=r.order||"preorder",l=this[r.attr||"children"],f;s==="preorder"&&(f=t.call(i,this));for(var h=0;!f&&h<l.length;h++)l[h].eachNode(r,t,i);s==="postorder"&&t.call(i,this)},a.prototype.updateDepthAndHeight=function(r){var t=0;this.depth=r;for(var i=0;i<this.children.length;i++){var s=this.children[i];s.updateDepthAndHeight(r+1),s.height>t&&(t=s.height)}this.height=t+1},a.prototype.getNodeById=function(r){if(this.getId()===r)return this;for(var t=0,i=this.children,s=i.length;t<s;t++){var l=i[t].getNodeById(r);if(l)return l}},a.prototype.contains=function(r){if(r===this)return!0;for(var t=0,i=this.children,s=i.length;t<s;t++){var l=i[t].contains(r);if(l)return l}},a.prototype.getAncestors=function(r){for(var t=[],i=r?this:this.parentNode;i;)t.push(i),i=i.parentNode;return t.reverse(),t},a.prototype.getAncestorsIndices=function(){for(var r=[],t=this;t;)r.push(t.dataIndex),t=t.parentNode;return r.reverse(),r},a.prototype.getDescendantIndices=function(){var r=[];return this.eachNode(function(t){r.push(t.dataIndex)}),r},a.prototype.getValue=function(r){var t=this.hostTree.data;return t.get(t.getDimension(r||"value"),this.dataIndex)},a.prototype.setLayout=function(r,t){this.dataIndex>=0&&this.hostTree.data.setItemLayout(this.dataIndex,r,t)},a.prototype.getLayout=function(){return this.hostTree.data.getItemLayout(this.dataIndex)},a.prototype.getModel=function(r){if(!(this.dataIndex<0)){var t=this.hostTree,i=t.data.getItemModel(this.dataIndex);return i.getModel(r)}},a.prototype.getLevelModel=function(){return(this.hostTree.levelModels||[])[this.depth]},a.prototype.setVisual=function(r,t){this.dataIndex>=0&&this.hostTree.data.setItemVisual(this.dataIndex,r,t)},a.prototype.getVisual=function(r){return this.hostTree.data.getItemVisual(this.dataIndex,r)},a.prototype.getRawIndex=function(){return this.hostTree.data.getRawIndex(this.dataIndex)},a.prototype.getId=function(){return this.hostTree.data.getId(this.dataIndex)},a.prototype.isAncestorOf=function(r){for(var t=r.parentNode;t;){if(t===this)return!0;t=t.parentNode}return!1},a.prototype.isDescendantOf=function(r){return r!==this&&r.isAncestorOf(this)},a}(),Qo=function(){function a(r){this.type="tree",this._nodes=[],this.hostModel=r}return a.prototype.eachNode=function(r,t,i){this.root.eachNode(r,t,i)},a.prototype.getNodeByDataIndex=function(r){var t=this.data.getRawIndex(r);return this._nodes[t]},a.prototype.getNodeById=function(r){return this.root.getNodeById(r)},a.prototype.update=function(){for(var r=this.data,t=this._nodes,i=0,s=t.length;i<s;i++)t[i].dataIndex=-1;for(var i=0,s=r.count();i<s;i++)t[r.getRawIndex(i)].dataIndex=i},a.prototype.clearLayouts=function(){this.data.clearItemLayouts()},a.createTree=function(r,t,i){var s=new a(t),l=[],f=1;h(r);function h(m,b){var A=m.value;f=Math.max(f,y.isArray(A)?A.length:1),l.push(m);var E=new ko(Object(sr.e)(m.name,""),s);b?Uf(E,b):s.root=E,s._nodes.push(E);var P=m.children;if(P)for(var j=0;j<P.length;j++)h(P[j],E)}s.root.updateDepthAndHeight(0);var d=Object(No.a)(l,{coordDimensions:["value"],dimensionsCount:f}),p=new Zn.a(d,t);return p.initData(l),i&&i(p),Object(Ou.a)({mainData:p,struct:s,structAttr:"tree"}),s.update(),s},a}();function Uf(a,r){var t=r.children;a.parentNode!==r&&(t.push(a),a.parentNode=r)}var xl=Qo,Tp=function(a){Object(de.b)(r,a);function r(){var t=a!==null&&a.apply(this,arguments)||this;return t.hasSymbolVisual=!0,t.ignoreStyleOnData=!0,t}return r.prototype.getInitialData=function(t){var i={name:t.name,children:t.data},s=t.leaves||{},l=new Ye.a(s,this,this.ecModel),f=xl.createTree(i,this,h);function h(b){b.wrapMethod("getItemModel",function(A,E){var P=f.getNodeByDataIndex(E);return(!P.children.length||!P.isExpand)&&(A.parentModel=l),A})}var d=0;f.eachNode("preorder",function(b){b.depth>d&&(d=b.depth)});var p=t.expandAndCollapse,m=p&&t.initialTreeDepth>=0?t.initialTreeDepth:d;return f.root.eachNode("preorder",function(b){var A=b.hostTree.data.getRawDataItem(b.dataIndex);b.isExpand=A&&A.collapsed!=null?!A.collapsed:b.depth<=m}),f.data},r.prototype.getOrient=function(){var t=this.get("orient");return t==="horizontal"?t="LR":t==="vertical"&&(t="TB"),t},r.prototype.setZoom=function(t){this.option.zoom=t},r.prototype.setCenter=function(t){this.option.center=t},r.prototype.formatTooltip=function(t,i,s){for(var l=this.getData().tree,f=l.root.children[0],h=l.getNodeByDataIndex(t),d=h.getValue(),p=h.name;h&&h!==f;)p=h.parentNode.name+"."+p,h=h.parentNode;return Object(wn.c)("nameValue",{name:p,value:d,noValue:isNaN(d)||d==null})},r.type="series.tree",r.layoutMode="box",r.defaultOption={zlevel:0,z:2,coordinateSystem:"view",left:"12%",top:"12%",right:"12%",bottom:"12%",layout:"orthogonal",edgeShape:"curve",edgeForkPosition:"50%",roam:!1,nodeScaleRatio:.4,center:null,zoom:1,orient:"LR",symbol:"emptyCircle",symbolSize:7,expandAndCollapse:!0,initialTreeDepth:2,lineStyle:{color:"#ccc",width:1.5,curveness:.5},itemStyle:{color:"lightsteelblue",borderWidth:1.5},label:{show:!0},animationEasing:"linear",animationDuration:700,animationDurationUpdate:500},r}(Nr.a),Au=Tp;function Oh(a,r,t){for(var i=[a],s=[],l;l=i.pop();)if(s.push(l),l.isExpand){var f=l.children;if(f.length)for(var h=0;h<f.length;h++)i.push(f[h])}for(;l=s.pop();)r(l,t)}function ia(a,r){for(var t=[a],i;i=t.pop();)if(r(i),i.isExpand){var s=i.children;if(s.length)for(var l=s.length-1;l>=0;l--)t.push(s[l])}}function Op(a,r){a.eachSeriesByType("tree",function(t){Ah(t,r)})}function Ah(a,r){var t=Zo(a,r);a.layoutInfo=t;var i=a.get("layout"),s=0,l=0,f=null;i==="radial"?(s=2*Math.PI,l=Math.min(t.height,t.width)/2,f=zf(function(Ot,wt){return(Ot.parentNode===wt.parentNode?1:2)/Ot.depth})):(s=t.width,l=t.height,f=zf());var h=a.getData().tree.root,d=h.children[0];if(d){xp(h),Oh(d,Hn,f),h.hierNode.modifier=-d.hierNode.prelim,ia(d,jf);var p=d,m=d,b=d;ia(d,function(Ot){var wt=Ot.getLayout().x;wt<p.getLayout().x&&(p=Ot),wt>m.getLayout().x&&(m=Ot),Ot.depth>b.depth&&(b=Ot)});var A=p===m?1:f(p,m)/2,E=A-p.getLayout().x,P=0,j=0,J=0,dt=0;if(i==="radial")P=s/(m.getLayout().x+A+E),j=l/(b.depth-1||1),ia(d,function(Ot){J=(Ot.getLayout().x+E)*P,dt=(Ot.depth-1)*j;var wt=Es(J,dt);Ot.setLayout({x:wt.x,y:wt.y,rawX:J,rawY:dt},!0)});else{var St=a.getOrient();St==="RL"||St==="LR"?(j=l/(m.getLayout().x+A+E),P=s/(b.depth-1||1),ia(d,function(Ot){dt=(Ot.getLayout().x+E)*j,J=St==="LR"?(Ot.depth-1)*P:s-(Ot.depth-1)*P,Ot.setLayout({x:J,y:dt},!0)})):(St==="TB"||St==="BT")&&(P=s/(m.getLayout().x+A+E),j=l/(b.depth-1||1),ia(d,function(Ot){J=(Ot.getLayout().x+E)*P,dt=St==="TB"?(Ot.depth-1)*j:l-(Ot.depth-1)*j,Ot.setLayout({x:J,y:dt},!0)}))}}}function Mu(a){a.eachSeriesByType("tree",function(r){var t=r.getData(),i=t.tree;i.eachNode(function(s){var l=s.getModel(),f=l.getModel("itemStyle").getItemStyle(),h=t.ensureUniqueItemVisual(s.dataIndex,"style");Object(y.extend)(h,f)})})}function Mh(a){a.registerAction({type:"treeExpandAndCollapse",event:"treeExpandAndCollapse",update:"update"},function(r,t){t.eachComponent({mainType:"series",subType:"tree",query:r},function(i){var s=r.dataIndex,l=i.getData().tree,f=l.getNodeByDataIndex(s);f.isExpand=!f.isExpand})}),a.registerAction({type:"treeRoam",event:"treeRoam",update:"none"},function(r,t){t.eachComponent({mainType:"series",subType:"tree",query:r},function(i){var s=i.coordinateSystem,l=Ms(s,r);i.setCenter&&i.setCenter(l.center),i.setZoom&&i.setZoom(l.zoom)})})}function Du(a){a.registerChartView(_p),a.registerSeriesModel(Au),a.registerLayout(Op),a.registerVisual(Mu),Mh(a)}function bl(a,r,t){if(a&&y.indexOf(r,a.type)>=0){var i=t.getData().tree.root,s=a.targetNode;if(typeof s=="string"&&(s=i.getNodeById(s)),s&&i.contains(s))return{node:s};var l=a.targetNodeId;if(l!=null&&(s=i.getNodeById(l)))return{node:s}}}function Sl(a){for(var r=[];a;)a=a.parentNode,a&&r.push(a);return r.reverse()}function _l(a,r){var t=Sl(a);return y.indexOf(t,r)>=0}function Cu(a,r){for(var t=[];a;){var i=a.dataIndex;t.push({name:a.name,dataIndex:i,value:r.getRawValue(i)}),a=a.parentNode}return t.reverse(),t}var Hf=function(){},Wf=["treemapZoomToNode","treemapRender","treemapMove"];function Ap(a){for(var r=0;r<Wf.length;r++)a.registerAction({type:Wf[r],update:"updateView"},Hf);a.registerAction({type:"treemapRootToNode",update:"updateView"},function(t,i){i.eachComponent({mainType:"series",subType:"treemap",query:t},s);function s(l,f){var h=["treemapZoomToNode","treemapRootToNode"],d=bl(t,h,l);if(d){var p=l.getViewRoot();p&&(t.direction=_l(p,d.node)?"rollUp":"drillDown"),l.resetViewRoot(d.node)}}})}var Yf=S("QEG1");function Xf(a){var r=a.getData(),t=r.tree,i={};t.eachNode(function(s){for(var l=s;l&&l.depth>1;)l=l.parentNode;var f=Object(Yf.b)(a.ecModel,l.name||l.dataIndex+"",i);s.setVisual("decal",f)})}var Mp=function(a){Object(de.b)(r,a);function r(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=r.type,t.preventUsingHoverLayer=!0,t}return r.prototype.getInitialData=function(t,i){var s={name:t.name,children:t.data};Va(s);var l=t.levels||[],f=this.designatedVisualItemStyle={},h=new Ye.a({itemStyle:f},this,i);l=t.levels=Zf(l,i);var d=y.map(l||[],function(b){return new Ye.a(b,h,i)},this),p=xl.createTree(s,this,m);function m(b){b.wrapMethod("getItemModel",function(A,E){var P=p.getNodeByDataIndex(E),j=d[P.depth];return A.parentModel=j||h,A})}return p.data},r.prototype.optionUpdated=function(){this.resetViewRoot()},r.prototype.formatTooltip=function(t,i,s){var l=this.getData(),f=this.getRawValue(t),h=l.getName(t);return Object(wn.c)("nameValue",{name:h,value:f})},r.prototype.getDataParams=function(t){var i=a.prototype.getDataParams.apply(this,arguments),s=this.getData().tree.getNodeByDataIndex(t);return i.treePathInfo=Cu(s,this),i},r.prototype.setLayoutInfo=function(t){this.layoutInfo=this.layoutInfo||{},y.extend(this.layoutInfo,t)},r.prototype.mapIdToIndex=function(t){var i=this._idIndexMap;i||(i=this._idIndexMap=y.createHashMap(),this._idIndexMapCount=0);var s=i.get(t);return s==null&&i.set(t,s=this._idIndexMapCount++),s},r.prototype.getViewRoot=function(){return this._viewRoot},r.prototype.resetViewRoot=function(t){t?this._viewRoot=t:t=this._viewRoot;var i=this.getRawData().tree.root;(!t||t!==i&&!i.contains(t))&&(this._viewRoot=i)},r.prototype.enableAriaDecal=function(){Xf(this)},r.type="series.treemap",r.layoutMode="box",r.defaultOption={progressive:0,left:"center",top:"middle",width:"80%",height:"80%",sort:!0,clipWindow:"origin",squareRatio:.5*(1+Math.sqrt(5)),leafDepth:null,drillDownIcon:"\u25B6",zoomToNodeRatio:.32*.32,roam:!0,nodeClick:"zoomToNode",animation:!0,animationDurationUpdate:900,animationEasing:"quinticInOut",breadcrumb:{show:!0,height:22,left:"center",top:"bottom",emptyItemWidth:25,itemStyle:{color:"rgba(0,0,0,0.7)",textStyle:{color:"#fff"}}},label:{show:!0,distance:0,padding:5,position:"inside",color:"#fff",overflow:"truncate"},upperLabel:{show:!1,position:[0,"50%"],height:20,overflow:"truncate",verticalAlign:"middle"},itemStyle:{color:null,colorAlpha:null,colorSaturation:null,borderWidth:0,gapWidth:0,borderColor:"#fff",borderColorSaturation:null},emphasis:{upperLabel:{show:!0,position:[0,"50%"],ellipsis:!0,verticalAlign:"middle"}},visualDimension:0,visualMin:null,visualMax:null,color:[],colorAlpha:null,colorSaturation:null,colorMappingBy:"index",visibleMin:10,childrenVisibleMin:null,levels:[]},r}(Nr.a);function Va(a){var r=0;y.each(a.children,function(i){Va(i);var s=i.value;y.isArray(s)&&(s=s[0]),r+=s});var t=a.value;y.isArray(t)&&(t=t[0]),(t==null||isNaN(t))&&(t=r),t<0&&(t=0),y.isArray(a.value)?a.value[0]=t:a.value=t}function Zf(a,r){var t=Object(sr.r)(r.get("color")),i=Object(sr.r)(r.get(["aria","decal","decals"]));if(!!t){a=a||[];var s,l;y.each(a,function(h){var d=new Ye.a(h),p=d.get("color"),m=d.get("decal");(d.get(["itemStyle","color"])||p&&p!=="none")&&(s=!0),(d.get(["itemStyle","decal"])||m&&m!=="none")&&(l=!0)});var f=a[0]||(a[0]={});return s||(f.color=t.slice()),!l&&i&&(f.decal=i.slice()),a}}var Dh=Mp,Ai=S("gPAo"),Dp=8,Ch=8,Jo=5,Cp=function(){function a(r){this.group=new pr.a,r.add(this.group)}return a.prototype.render=function(r,t,i,s){var l=r.getModel("breadcrumb"),f=this.group;if(f.removeAll(),!(!l.get("show")||!i)){var h=l.getModel("itemStyle"),d=h.getModel("textStyle"),p={pos:{left:l.get("left"),right:l.get("right"),top:l.get("top"),bottom:l.get("bottom")},box:{width:t.getWidth(),height:t.getHeight()},emptyItemWidth:l.get("emptyItemWidth"),totalWidth:0,renderList:[]};this._prepare(i,p,d),this._renderContent(r,p,h,d,s),Tr.i(f,p.pos,p.box)}},a.prototype._prepare=function(r,t,i){for(var s=r;s;s=s.parentNode){var l=Object(sr.e)(s.getModel().get("name"),""),f=i.getTextRect(l),h=Math.max(f.width+Dp*2,t.emptyItemWidth);t.totalWidth+=h+Ch,t.renderList.push({node:s,text:l,width:h})}},a.prototype._renderContent=function(r,t,i,s,l){for(var f=0,h=t.emptyItemWidth,d=r.get(["breadcrumb","height"]),p=Tr.e(t.pos,t.box),m=t.totalWidth,b=t.renderList,A=b.length-1;A>=0;A--){var E=b[A],P=E.node,j=E.width,J=E.text;m>p.width&&(m-=j-h,j=h,J=null);var dt=new Hi.a({shape:{points:Eh(f,0,j,d,A===b.length-1,A===0)},style:Object(y.defaults)(i.getItemStyle(),{lineJoin:"bevel"}),textContent:new en.a({style:{text:J,fill:s.getTextColor(),font:s.getFont()}}),textConfig:{position:"inside"},z2:qe.j*1e4,onclick:Object(y.curry)(l,P)});dt.disableLabelAnimation=!0,this.group.add(dt),Ep(dt,r,P),f+=j+Ch}},a.prototype.remove=function(){this.group.removeAll()},a}();function Eh(a,r,t,i,s,l){var f=[[s?a:a-Jo,r],[a+t,r],[a+t,r+i],[s?a:a-Jo,r+i]];return!l&&f.splice(2,0,[a+t+Jo,r+i/2]),!s&&f.push([a,r+i/2]),f}function Ep(a,r,t){Object(Ur.a)(a).eventData={componentType:"series",componentSubType:"treemap",componentIndex:r.componentIndex,seriesIndex:r.componentIndex,seriesName:r.name,seriesType:"treemap",selfType:"breadcrumb",nodeData:{dataIndex:t&&t.dataIndex,name:t&&t.name},treePathInfo:t&&Cu(t,r)}}var Lp=Cp,Pp=function(){function a(){this._storage=[],this._elExistsMap={}}return a.prototype.add=function(r,t,i,s,l){return this._elExistsMap[r.id]?!1:(this._elExistsMap[r.id]=!0,this._storage.push({el:r,target:t,duration:i,delay:s,easing:l}),!0)},a.prototype.finished=function(r){return this._finishedCallback=r,this},a.prototype.start=function(){for(var r=this,t=this._storage.length,i=function(){t--,t<=0&&(r._storage.length=0,r._elExistsMap={},r._finishedCallback&&r._finishedCallback())},s=0,l=this._storage.length;s<l;s++){var f=this._storage[s];f.el.animateTo(f.target,{duration:f.duration,delay:f.delay,easing:f.easing,setToFinal:!0,done:i,aborted:i})}return this},a}();function wp(){return new Pp}var Lh=S("KCsZ"),Kf=pr.a,Ph=nn.a,wh=3,Ih="label",kf="upperLabel",Ip=qe.j*10,Rh=qe.j*2,Rp=qe.j*3,so=Object(Lh.a)([["fill","color"],["stroke","strokeColor"],["lineWidth","strokeWidth"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"]]),Qf=function(a){var r=so(a);return r.stroke=r.fill=r.lineWidth=null,r},Tl=Object(sr.o)(),Nh=function(a){Object(de.b)(r,a);function r(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=r.type,t._state="ready",t._storage=Ps(),t}return r.prototype.render=function(t,i,s,l){var f=i.findComponents({mainType:"series",subType:"treemap",query:l});if(!(Object(y.indexOf)(f,t)<0)){this.seriesModel=t,this.api=s,this.ecModel=i;var h=["treemapZoomToNode","treemapRootToNode"],d=bl(l,h,t),p=l&&l.type,m=t.layoutInfo,b=!this._oldTree,A=this._storage,E=p==="treemapRootToNode"&&d&&A?{rootNodeGroup:A.nodeGroup[d.node.getRawIndex()],direction:l.direction}:null,P=this._giveContainerGroup(m),j=this._doRender(P,t,E);!b&&(!p||p==="treemapZoomToNode"||p==="treemapRootToNode")?this._doAnimation(P,j,t,E):j.renderFinally(),this._resetController(s),this._renderBreadcrumb(t,s,d)}},r.prototype._giveContainerGroup=function(t){var i=this._containerGroup;return i||(i=this._containerGroup=new Kf,this._initEvents(i),this.group.add(i)),i.x=t.x,i.y=t.y,i},r.prototype._doRender=function(t,i,s){var l=i.getData().tree,f=this._oldTree,h=Ps(),d=Ps(),p=this._storage,m=[];function b(J,dt,St,Ot){return Np(i,d,p,s,h,m,J,dt,St,Ot)}E(l.root?[l.root]:[],f&&f.root?[f.root]:[],t,l===f||!f,0);var A=P(p);return this._oldTree=l,this._storage=d,{lastsForAnimation:h,willDeleteEls:A,renderFinally:j};function E(J,dt,St,Ot,wt){Ot?(dt=J,Object(y.each)(J,function(kt,te){!kt.isRemoved()&&jt(te,te)})):new Ai.a(dt,J,zt,zt).add(jt).update(jt).remove(Object(y.curry)(jt,null)).execute();function zt(kt){return kt.getId()}function jt(kt,te){var ue=kt!=null?J[kt]:null,me=te!=null?dt[te]:null,ve=b(ue,me,St,wt);ve&&E(ue&&ue.viewChildren||[],me&&me.viewChildren||[],ve,Ot,wt+1)}}function P(J){var dt=Ps();return J&&Object(y.each)(J,function(St,Ot){var wt=dt[Ot];Object(y.each)(St,function(zt){zt&&(wt.push(zt),Tl(zt).willDelete=!0)})}),dt}function j(){Object(y.each)(A,function(J){Object(y.each)(J,function(dt){dt.parent&&dt.parent.remove(dt)})}),Object(y.each)(m,function(J){J.invisible=!0,J.dirty()})}},r.prototype._doAnimation=function(t,i,s,l){if(!!s.get("animation")){var f=s.get("animationDurationUpdate"),h=s.get("animationEasing"),d=(Object(y.isFunction)(f)?0:f)||0,p=(Object(y.isFunction)(h)?null:h)||"cubicOut",m=wp();Object(y.each)(i.willDeleteEls,function(b,A){Object(y.each)(b,function(E,P){if(!E.invisible){var j=E.parent,J,dt=Tl(j);if(l&&l.direction==="drillDown")J=j===l.rootNodeGroup?{shape:{x:0,y:0,width:dt.nodeWidth,height:dt.nodeHeight},style:{opacity:0}}:{style:{opacity:0}};else{var St=0,Ot=0;dt.willDelete||(St=dt.nodeWidth/2,Ot=dt.nodeHeight/2),J=A==="nodeGroup"?{x:St,y:Ot,style:{opacity:0}}:{shape:{x:St,y:Ot,width:0,height:0},style:{opacity:0}}}J&&m.add(E,J,d,0,p)}})}),Object(y.each)(this._storage,function(b,A){Object(y.each)(b,function(E,P){var j=i.lastsForAnimation[A][P],J={};!j||(E instanceof pr.a?j.oldX!=null&&(J.x=E.x,J.y=E.y,E.x=j.oldX,E.y=j.oldY):(j.oldShape&&(J.shape=Object(y.extend)({},E.shape),E.setShape(j.oldShape)),j.fadein?(E.setStyle("opacity",0),J.style={opacity:1}):E.style.opacity!==1&&(J.style={opacity:1})),m.add(E,J,d,0,p))})},this),this._state="animating",m.finished(Object(y.bind)(function(){this._state="ready",i.renderFinally()},this)).start()}},r.prototype._resetController=function(t){var i=this._controller;i||(i=this._controller=new oi(t.getZr()),i.enable(this.seriesModel.get("roam")),i.on("pan",Object(y.bind)(this._onPan,this)),i.on("zoom",Object(y.bind)(this._onZoom,this)));var s=new ai.a(0,0,t.getWidth(),t.getHeight());i.setPointerChecker(function(l,f,h){return s.contain(f,h)})},r.prototype._clearController=function(){var t=this._controller;t&&(t.dispose(),t=null)},r.prototype._onPan=function(t){if(this._state!=="animating"&&(Math.abs(t.dx)>wh||Math.abs(t.dy)>wh)){var i=this.seriesModel.getData().tree.root;if(!i)return;var s=i.getLayout();if(!s)return;this.api.dispatchAction({type:"treemapMove",from:this.uid,seriesId:this.seriesModel.id,rootRect:{x:s.x+t.dx,y:s.y+t.dy,width:s.width,height:s.height}})}},r.prototype._onZoom=function(t){var i=t.originX,s=t.originY;if(this._state!=="animating"){var l=this.seriesModel.getData().tree.root;if(!l)return;var f=l.getLayout();if(!f)return;var h=new ai.a(f.x,f.y,f.width,f.height),d=this.seriesModel.layoutInfo;i-=d.x,s-=d.y;var p=vn.create();vn.translate(p,p,[-i,-s]),vn.scale(p,p,[t.scale,t.scale]),vn.translate(p,p,[i,s]),h.applyTransform(p),this.api.dispatchAction({type:"treemapRender",from:this.uid,seriesId:this.seriesModel.id,rootRect:{x:h.x,y:h.y,width:h.width,height:h.height}})}},r.prototype._initEvents=function(t){var i=this;t.on("click",function(s){if(i._state==="ready"){var l=i.seriesModel.get("nodeClick",!0);if(!!l){var f=i.findTarget(s.offsetX,s.offsetY);if(!!f){var h=f.node;if(h.getLayout().isLeafRoot)i._rootToNode(f);else if(l==="zoomToNode")i._zoomToNode(f);else if(l==="link"){var d=h.hostTree.data.getItemModel(h.dataIndex),p=d.get("link",!0),m=d.get("target",!0)||"blank";p&&Object(Pr.l)(p,m)}}}}},this)},r.prototype._renderBreadcrumb=function(t,i,s){var l=this;s||(s=t.get("leafDepth",!0)!=null?{node:t.getViewRoot()}:this.findTarget(i.getWidth()/2,i.getHeight()/2),s||(s={node:t.getData().tree.root})),(this._breadcrumb||(this._breadcrumb=new Lp(this.group))).render(t,i,s.node,function(f){l._state!=="animating"&&(_l(t.getViewRoot(),f)?l._rootToNode({node:f}):l._zoomToNode({node:f}))})},r.prototype.remove=function(){this._clearController(),this._containerGroup&&this._containerGroup.removeAll(),this._storage=Ps(),this._state="ready",this._breadcrumb&&this._breadcrumb.remove()},r.prototype.dispose=function(){this._clearController()},r.prototype._zoomToNode=function(t){this.api.dispatchAction({type:"treemapZoomToNode",from:this.uid,seriesId:this.seriesModel.id,targetNode:t.node})},r.prototype._rootToNode=function(t){this.api.dispatchAction({type:"treemapRootToNode",from:this.uid,seriesId:this.seriesModel.id,targetNode:t.node})},r.prototype.findTarget=function(t,i){var s,l=this.seriesModel.getViewRoot();return l.eachNode({attr:"viewChildren",order:"preorder"},function(f){var h=this._storage.background[f.getRawIndex()];if(h){var d=h.transformCoordToLocal(t,i),p=h.shape;if(p.x<=d[0]&&d[0]<=p.x+p.width&&p.y<=d[1]&&d[1]<=p.y+p.height)s={node:f,offsetX:d[0],offsetY:d[1]};else return!1}},this),s},r.type="treemap",r}(yn.a);function Ps(){return{nodeGroup:[],background:[],content:[]}}function Np(a,r,t,i,s,l,f,h,d,p){if(!f)return;var m=f.getLayout(),b=a.getData(),A=f.getModel();if(b.setItemGraphicEl(f.dataIndex,null),!m||!m.isInView)return;var E=m.width,P=m.height,j=m.borderWidth,J=m.invisible,dt=f.getRawIndex(),St=h&&h.getRawIndex(),Ot=f.viewChildren,wt=m.upperHeight,zt=Ot&&Ot.length,jt=A.getModel("itemStyle"),kt=A.getModel(["emphasis","itemStyle"]),te=A.getModel(["blur","itemStyle"]),ue=A.getModel(["select","itemStyle"]),me=jt.get("borderRadius")||0,ve=jr("nodeGroup",Kf);if(!ve)return;if(d.add(ve),ve.x=m.x||0,ve.y=m.y||0,ve.markRedraw(),Tl(ve).nodeWidth=E,Tl(ve).nodeHeight=P,m.isAboveViewRoot)return ve;var Me=jr("background",Ph,p,Rh);Me&&$e(ve,Me,zt&&m.upperLabelHeight);var Ee=A.get(["emphasis","focus"]),Oe=A.get(["emphasis","blurScope"]),we=Ee==="ancestor"?f.getAncestorsIndices():Ee==="descendant"?f.getDescendantIndices():Ee;if(zt)Object(qe.y)(ve)&&Object(qe.F)(ve,!1),Me&&(Object(qe.F)(Me,!0),b.setItemGraphicEl(f.dataIndex,Me),Object(qe.p)(Me,we,Oe));else{var We=jr("content",Ph,p,Rp);We&&Je(ve,We),Me&&Object(qe.y)(Me)&&Object(qe.F)(Me,!1),Object(qe.F)(ve,!0),b.setItemGraphicEl(f.dataIndex,ve),Object(qe.p)(ve,we,Oe)}return ve;function $e(Yr,Xr,_n){var ln=Object(Ur.a)(Xr);if(ln.dataIndex=f.dataIndex,ln.seriesIndex=a.seriesIndex,Xr.setShape({x:0,y:0,width:E,height:P,r:me}),J)fr(Xr);else{Xr.invisible=!1;var Pn=f.getVisual("style"),ei=Pn.stroke,Ri=Qf(jt);Ri.fill=ei;var ci=so(kt);ci.fill=kt.get("borderColor");var ea=so(te);ea.fill=te.get("borderColor");var Ta=so(ue);if(Ta.fill=ue.get("borderColor"),_n){var ka=E-2*j;Vr(Xr,ei,Pn.opacity,{x:j,y:0,width:ka,height:wt})}else Xr.removeTextContent();Xr.setStyle(Ri),Xr.ensureState("emphasis").style=ci,Xr.ensureState("blur").style=ea,Xr.ensureState("select").style=Ta,Object(qe.G)(Xr)}Yr.add(Xr)}function Je(Yr,Xr){var _n=Object(Ur.a)(Xr);_n.dataIndex=f.dataIndex,_n.seriesIndex=a.seriesIndex;var ln=Math.max(E-2*j,0),Pn=Math.max(P-2*j,0);if(Xr.culling=!0,Xr.setShape({x:j,y:j,width:ln,height:Pn,r:me}),J)fr(Xr);else{Xr.invisible=!1;var ei=f.getVisual("style"),Ri=ei.fill,ci=Qf(jt);ci.fill=Ri,ci.decal=ei.decal;var ea=so(kt),Ta=so(te),ka=so(ue);Vr(Xr,Ri,ei.opacity,null),Xr.setStyle(ci),Xr.ensureState("emphasis").style=ea,Xr.ensureState("blur").style=Ta,Xr.ensureState("select").style=ka,Object(qe.G)(Xr)}Yr.add(Xr)}function fr(Yr){!Yr.invisible&&l.push(Yr)}function Vr(Yr,Xr,_n,ln){var Pn=A.getModel(ln?kf:Ih),ei=Object(sr.e)(A.get("name"),null),Ri=Pn.getShallow("show");Object(Ar.h)(Yr,Object(Ar.f)(A,ln?kf:Ih),{defaultText:Ri?ei:null,inheritColor:Xr,defaultOpacity:_n,labelFetcher:a,labelDataIndex:f.dataIndex});var ci=Yr.getTextContent(),ea=ci.style,Ta=Object(y.normalizeCssArray)(ea.padding||0);ln&&(Yr.setTextConfig({layoutRect:ln}),ci.disableLabelLayout=!0),ci.beforeUpdate=function(){var cf=Math.max((ln?ln.width:Yr.shape.width)-Ta[1]-Ta[3],0),ql=Math.max((ln?ln.height:Yr.shape.height)-Ta[0]-Ta[2],0);(ea.width!==cf||ea.height!==ql)&&ci.setStyle({width:cf,height:ql})},ea.truncateMinChar=2,ea.lineOverflow="truncate",wr(ea,ln,m);var ka=ci.getState("emphasis");wr(ka?ka.style:null,ln,m)}function wr(Yr,Xr,_n){var ln=Yr?Yr.text:null;if(!Xr&&_n.isLeafRoot&&ln!=null){var Pn=a.get("drillDownIcon",!0);Yr.text=Pn?Pn+" "+ln:ln}}function jr(Yr,Xr,_n,ln){var Pn=St!=null&&t[Yr][St],ei=s[Yr];return Pn?(t[Yr][St]=null,Yn(ei,Pn)):J||(Pn=new Xr,Pn instanceof mu.c&&(Pn.z2=Bh(_n,ln)),bn(ei,Pn)),r[Yr][dt]=Pn}function Yn(Yr,Xr){var _n=Yr[dt]={};Xr instanceof Kf?(_n.oldX=Xr.x,_n.oldY=Xr.y):_n.oldShape=Object(y.extend)({},Xr.shape)}function bn(Yr,Xr){var _n=Yr[dt]={},ln=f.parentNode,Pn=Xr instanceof pr.a;if(ln&&(!i||i.direction==="drillDown")){var ei=0,Ri=0,ci=s.background[ln.getRawIndex()];!i&&ci&&ci.oldShape&&(ei=ci.oldShape.width,Ri=ci.oldShape.height),Pn?(_n.oldX=0,_n.oldY=Ri):_n.oldShape={x:ei,y:Ri,width:0,height:0}}_n.fadein=!Pn}}function Bh(a,r){return a*Ip+r}var jh=Nh,Ol=y.each,Bp=y.isObject,Eu=-1,Jf=function(){function a(r){var t=r.mappingMethod,i=r.type,s=this.option=y.clone(r);this.type=i,this.mappingMethod=t,this._normalizeData=Fp[t];var l=a.visualHandlers[i];this.applyVisual=l.applyVisual,this.getColorMapper=l.getColorMapper,this._normalizedToVisual=l._normalizedToVisual[t],t==="piecewise"?(Al(s),jp(s)):t==="category"?s.categories?zp(s):Al(s,!0):(y.assert(t!=="linear"||s.dataExtent),Al(s))}return a.prototype.mapValueToVisual=function(r){var t=this._normalizeData(r);return this._normalizedToVisual(t,r)},a.prototype.getNormalizer=function(){return y.bind(this._normalizeData,this)},a.listVisualTypes=function(){return y.keys(a.visualHandlers)},a.isValidType=function(r){return a.visualHandlers.hasOwnProperty(r)},a.eachVisual=function(r,t,i){y.isObject(r)?y.each(r,t,i):t.call(i,r)},a.mapVisual=function(r,t,i){var s,l=y.isArray(r)?[]:y.isObject(r)?{}:(s=!0,null);return a.eachVisual(r,function(f,h){var d=t.call(i,f,h);s?l=d:l[h]=d}),l},a.retrieveVisuals=function(r){var t={},i;return r&&Ol(a.visualHandlers,function(s,l){r.hasOwnProperty(l)&&(t[l]=r[l],i=!0)}),i?t:null},a.prepareVisualTypes=function(r){if(y.isArray(r))r=r.slice();else if(Bp(r)){var t=[];Ol(r,function(i,s){t.push(s)}),r=t}else return[];return r.sort(function(i,s){return s==="color"&&i!=="color"&&i.indexOf("color")===0?1:-1}),r},a.dependsOn=function(r,t){return t==="color"?!!(r&&r.indexOf(t)===0):r===t},a.findPieceIndex=function(r,t,i){for(var s,l=Infinity,f=0,h=t.length;f<h;f++){var d=t[f].value;if(d!=null){if(d===r||typeof d=="string"&&d===r+"")return f;i&&A(d,f)}}for(var f=0,h=t.length;f<h;f++){var p=t[f],m=p.interval,b=p.close;if(m){if(m[0]===-Infinity){if(Dl(b[1],r,m[1]))return f}else if(m[1]===Infinity){if(Dl(b[0],m[0],r))return f}else if(Dl(b[0],m[0],r)&&Dl(b[1],r,m[1]))return f;i&&A(m[0],f),i&&A(m[1],f)}}if(i)return r===Infinity?t.length-1:r===-Infinity?0:s;function A(E,P){var j=Math.abs(E-r);j<l&&(l=j,s=P)}},a.visualHandlers={color:{applyVisual:Ml("color"),getColorMapper:function(){var r=this.option;return y.bind(r.mappingMethod==="category"?function(t,i){return!i&&(t=this._normalizeData(t)),ws.call(this,t)}:function(t,i,s){var l=!!s;return!i&&(t=this._normalizeData(t)),s=Ct.fastLerp(t,r.parsedVisual,s),l?s:Ct.stringify(s,"rgba")},this)},_normalizedToVisual:{linear:function(r){return Ct.stringify(Ct.fastLerp(r,this.option.parsedVisual),"rgba")},category:ws,piecewise:function(r,t){var i=qf.call(this,t);return i==null&&(i=Ct.stringify(Ct.fastLerp(r,this.option.parsedVisual),"rgba")),i},fixed:$o}},colorHue:Lu(function(r,t){return Ct.modifyHSL(r,t)}),colorSaturation:Lu(function(r,t){return Ct.modifyHSL(r,null,t)}),colorLightness:Lu(function(r,t){return Ct.modifyHSL(r,null,null,t)}),colorAlpha:Lu(function(r,t){return Ct.modifyAlpha(r,t)}),decal:{applyVisual:Ml("decal"),_normalizedToVisual:{linear:null,category:ws,piecewise:null,fixed:null}},opacity:{applyVisual:Ml("opacity"),_normalizedToVisual:$f([0,1])},liftZ:{applyVisual:Ml("liftZ"),_normalizedToVisual:{linear:$o,category:$o,piecewise:$o,fixed:$o}},symbol:{applyVisual:function(r,t,i){var s=this.mapValueToVisual(r);i("symbol",s)},_normalizedToVisual:{linear:zh,category:ws,piecewise:function(r,t){var i=qf.call(this,t);return i==null&&(i=zh.call(this,r)),i},fixed:$o}},symbolSize:{applyVisual:Ml("symbolSize"),_normalizedToVisual:$f([0,1])}},a}();function jp(a){var r=a.pieceList;a.hasSpecialVisual=!1,y.each(r,function(t,i){t.originIndex=i,t.visual!=null&&(a.hasSpecialVisual=!0)})}function zp(a){var r=a.categories,t=a.categoryMap={},i=a.visual;if(Ol(r,function(f,h){t[f]=h}),!y.isArray(i)){var s=[];y.isObject(i)?Ol(i,function(f,h){var d=t[h];s[d!=null?d:Eu]=f}):s[Eu]=i,i=qo(a,s)}for(var l=r.length-1;l>=0;l--)i[l]==null&&(delete t[r[l]],r.pop())}function Al(a,r){var t=a.visual,i=[];y.isObject(t)?Ol(t,function(l){i.push(l)}):t!=null&&i.push(t);var s={color:1,symbol:1};!r&&i.length===1&&!s.hasOwnProperty(a.type)&&(i[1]=i[0]),qo(a,i)}function Lu(a){return{applyVisual:function(r,t,i){var s=this.mapValueToVisual(r);i("color",a(t("color"),s))},_normalizedToVisual:$f([0,1])}}function zh(a){var r=this.option.visual;return r[Math.round(Object(Ne.k)(a,[0,1],[0,r.length-1],!0))]||{}}function Ml(a){return function(r,t,i){i(a,this.mapValueToVisual(r))}}function ws(a){var r=this.option.visual;return r[this.option.loop&&a!==Eu?a%r.length:a]}function $o(){return this.option.visual[0]}function $f(a){return{linear:function(r){return Object(Ne.k)(r,a,this.option.visual,!0)},category:ws,piecewise:function(r,t){var i=qf.call(this,t);return i==null&&(i=Object(Ne.k)(r,a,this.option.visual,!0)),i},fixed:$o}}function qf(a){var r=this.option,t=r.pieceList;if(r.hasSpecialVisual){var i=Jf.findPieceIndex(a,t),s=t[i];if(s&&s.visual)return s.visual[this.type]}}function qo(a,r){return a.visual=r,a.type==="color"&&(a.parsedVisual=y.map(r,function(t){return Ct.parse(t)})),r}var Fp={linear:function(a){return Object(Ne.k)(a,this.option.dataExtent,[0,1],!0)},piecewise:function(a){var r=this.option.pieceList,t=Jf.findPieceIndex(a,r,!0);if(t!=null)return Object(Ne.k)(t,[0,r.length-1],[0,1],!0)},category:function(a){var r=this.option.categories?this.option.categoryMap[a]:a;return r==null?Eu:r},fixed:y.noop};function Dl(a,r,t){return a?r<=t:r<t}var si=Jf,Vp="itemStyle",ba=Object(sr.o)(),Gp={seriesType:"treemap",reset:function(a){var r=a.getData().tree,t=r.root;t.isRemoved()||Fh(t,{},a.getViewRoot().getAncestors(),a)}};function Fh(a,r,t,i){var s=a.getModel(),l=a.getLayout(),f=a.hostTree.data;if(!(!l||l.invisible||!l.isInView)){var h=s.getModel(Vp),d=Ga(h,r,i),p=f.ensureUniqueItemVisual(a.dataIndex,"style"),m=h.get("borderColor"),b=h.get("borderColorSaturation"),A;b!=null&&(A=Vh(d),m=Gh(b,A)),p.stroke=m;var E=a.viewChildren;if(!E||!E.length)A=Vh(d),p.fill=A;else{var P=ec(a,s,l,h,d,E);Object(y.each)(E,function(j,J){if(j.depth>=t.length||j===t[j.depth]){var dt=Is(s,d,j,J,P,i);Fh(j,dt,t,i)}})}}}function Ga(a,r,t){var i=Object(y.extend)({},r),s=t.designatedVisualItemStyle;return Object(y.each)(["color","colorAlpha","colorSaturation"],function(l){s[l]=r[l];var f=a.get(l);s[l]=null,f!=null&&(i[l]=f)}),i}function Vh(a){var r=tc(a,"color");if(r){var t=tc(a,"colorAlpha"),i=tc(a,"colorSaturation");return i&&(r=Object(Ct.modifyHSL)(r,null,null,i)),t&&(r=Object(Ct.modifyAlpha)(r,t)),r}}function Gh(a,r){return r!=null?Object(Ct.modifyHSL)(r,null,null,a):null}function tc(a,r){var t=a[r];if(t!=null&&t!=="none")return t}function ec(a,r,t,i,s,l){if(!(!l||!l.length)){var f=rc(r,"color")||s.color!=null&&s.color!=="none"&&(rc(r,"colorAlpha")||rc(r,"colorSaturation"));if(!!f){var h=r.get("visualMin"),d=r.get("visualMax"),p=t.dataExtent.slice();h!=null&&h<p[0]&&(p[0]=h),d!=null&&d>p[1]&&(p[1]=d);var m=r.get("colorMappingBy"),b={type:f.name,dataExtent:p,visual:f.range};b.type==="color"&&(m==="index"||m==="id")?(b.mappingMethod="category",b.loop=!0):b.mappingMethod="linear";var A=new si(b);return ba(A).drColorMappingBy=m,A}}}function rc(a,r){var t=a.get(r);return Object(y.isArray)(t)&&t.length?{name:r,range:t}:null}function Is(a,r,t,i,s,l){var f=Object(y.extend)({},r);if(s){var h=s.type,d=h==="color"&&ba(s).drColorMappingBy,p=d==="index"?i:d==="id"?l.mapIdToIndex(t.getId()):t.getValue(a.get("visualDimension"));f[h]=s.mapValueToVisual(p)}return f}var Cl=Math.max,lo=Math.min,Uh=y.retrieve,nc=y.each,Hh=["itemStyle","borderWidth"],Up=["itemStyle","gapWidth"],Wh=["upperLabel","show"],ic=["upperLabel","height"],qr={seriesType:"treemap",reset:function(a,r,t,i){var s=t.getWidth(),l=t.getHeight(),f=a.option,h=Tr.g(a.getBoxLayoutParams(),{width:t.getWidth(),height:t.getHeight()}),d=f.size||[],p=Object(Ne.o)(Uh(h.width,d[0]),s),m=Object(Ne.o)(Uh(h.height,d[1]),l),b=i&&i.type,A=["treemapZoomToNode","treemapRootToNode"],E=bl(i,A,a),P=b==="treemapRender"||b==="treemapMove"?i.rootRect:null,j=a.getViewRoot(),J=Sl(j);if(b!=="treemapMove"){var dt=b==="treemapZoomToNode"?Wp(a,E,j,p,m):P?[P.width,P.height]:[p,m],St=f.sort;St&&St!=="asc"&&St!=="desc"&&(St="desc");var Ot={squareRatio:f.squareRatio,sort:St,leafDepth:f.leafDepth};j.hostTree.clearLayouts();var wt={x:0,y:0,width:dt[0],height:dt[1],area:dt[0]*dt[1]};j.setLayout(wt),Yh(j,Ot,!1,0),wt=j.getLayout(),nc(J,function(jt,kt){var te=(J[kt+1]||j).getValue();jt.setLayout(y.extend({dataExtent:[te,te],borderWidth:0,upperHeight:0},wt))})}var zt=a.getData().tree.root;zt.setLayout(Yp(h,P,E),!0),a.setLayoutInfo(h),Kh(zt,new ai.a(-h.x,-h.y,s,l),J,j,0)}};function Yh(a,r,t,i){var s,l;if(!a.isRemoved()){var f=a.getLayout();s=f.width,l=f.height;var h=a.getModel(),d=h.get(Hh),p=h.get(Up)/2,m=oc(h),b=Math.max(d,m),A=d-p,E=b-p;a.setLayout({borderWidth:d,upperHeight:b,upperLabelHeight:m},!0),s=Cl(s-2*A,0),l=Cl(l-A-E,0);var P=s*l,j=ac(a,h,P,r,t,i);if(!!j.length){var J={x:A,y:E,width:s,height:l},dt=lo(s,l),St=Infinity,Ot=[];Ot.area=0;for(var wt=0,zt=j.length;wt<zt;){var jt=j[wt];Ot.push(jt),Ot.area+=jt.getLayout().area;var kt=uo(Ot,dt,r.squareRatio);kt<=St?(wt++,St=kt):(Ot.area-=Ot.pop().getLayout().area,Zh(Ot,dt,J,p,!1),dt=lo(J.width,J.height),Ot.length=Ot.area=0,St=Infinity)}if(Ot.length&&Zh(Ot,dt,J,p,!0),!t){var te=h.get("childrenVisibleMin");te!=null&&P<te&&(t=!0)}for(var wt=0,zt=j.length;wt<zt;wt++)Yh(j[wt],r,t,i+1)}}}function ac(a,r,t,i,s,l){var f=a.children||[],h=i.sort;h!=="asc"&&h!=="desc"&&(h=null);var d=i.leafDepth!=null&&i.leafDepth<=l;if(s&&!d)return a.viewChildren=[];f=y.filter(f,function(E){return!E.isRemoved()}),Cn(f,h);var p=Xh(r,f,h);if(p.sum===0)return a.viewChildren=[];if(p.sum=Hp(r,t,p.sum,h,f),p.sum===0)return a.viewChildren=[];for(var m=0,b=f.length;m<b;m++){var A=f[m].getValue()/p.sum*t;f[m].setLayout({area:A})}return d&&(f.length&&a.setLayout({isLeafRoot:!0},!0),f.length=0),a.viewChildren=f,a.setLayout({dataExtent:p.dataExtent},!0),f}function Hp(a,r,t,i,s){if(!i)return t;for(var l=a.get("visibleMin"),f=s.length,h=f,d=f-1;d>=0;d--){var p=s[i==="asc"?f-d-1:d].getValue();p/t*r<l&&(h=d,t-=p)}return i==="asc"?s.splice(0,f-h):s.splice(h,f-h),t}function Cn(a,r){return r&&a.sort(function(t,i){var s=r==="asc"?t.getValue()-i.getValue():i.getValue()-t.getValue();return s===0?r==="asc"?t.dataIndex-i.dataIndex:i.dataIndex-t.dataIndex:s}),a}function Xh(a,r,t){for(var i=0,s=0,l=r.length;s<l;s++)i+=r[s].getValue();var f=a.get("visualDimension"),h;return!r||!r.length?h=[NaN,NaN]:f==="value"&&t?(h=[r[r.length-1].getValue(),r[0].getValue()],t==="asc"&&h.reverse()):(h=[Infinity,-Infinity],nc(r,function(d){var p=d.getValue(f);p<h[0]&&(h[0]=p),p>h[1]&&(h[1]=p)})),{sum:i,dataExtent:h}}function uo(a,r,t){for(var i=0,s=Infinity,l=0,f=void 0,h=a.length;l<h;l++)f=a[l].getLayout().area,f&&(f<s&&(s=f),f>i&&(i=f));var d=a.area*a.area,p=r*r*t;return d?Cl(p*i/d,d/(p*s)):Infinity}function Zh(a,r,t,i,s){var l=r===t.width?0:1,f=1-l,h=["x","y"],d=["width","height"],p=t[h[l]],m=r?a.area/r:0;(s||m>t[d[f]])&&(m=t[d[f]]);for(var b=0,A=a.length;b<A;b++){var E=a[b],P={},j=m?E.getLayout().area/m:0,J=P[d[f]]=Cl(m-2*i,0),dt=t[h[l]]+t[d[l]]-p,St=b===A-1||dt<j?dt:j,Ot=P[d[l]]=Cl(St-2*i,0);P[h[f]]=t[h[f]]+lo(i,J/2),P[h[l]]=p+lo(i,Ot/2),p+=St,E.setLayout(P,!0)}t[h[f]]+=m,t[d[f]]-=m}function Wp(a,r,t,i,s){var l=(r||{}).node,f=[i,s];if(!l||l===t)return f;for(var h,d=i*s,p=d*a.option.zoomToNodeRatio;h=l.parentNode;){for(var m=0,b=h.children,A=0,E=b.length;A<E;A++)m+=b[A].getValue();var P=l.getValue();if(P===0)return f;p*=m/P;var j=h.getModel(),J=j.get(Hh),dt=Math.max(J,oc(j));p+=4*J*J+(3*J+dt)*Math.pow(p,.5),p>Ne.a&&(p=Ne.a),l=h}p<d&&(p=d);var St=Math.pow(p/d,.5);return[i*St,s*St]}function Yp(a,r,t){if(r)return{x:r.x,y:r.y};var i={x:0,y:0};if(!t)return i;var s=t.node,l=s.getLayout();if(!l)return i;for(var f=[l.width/2,l.height/2],h=s;h;){var d=h.getLayout();f[0]+=d.x,f[1]+=d.y,h=h.parentNode}return{x:a.width/2-f[0],y:a.height/2-f[1]}}function Kh(a,r,t,i,s){var l=a.getLayout(),f=t[s],h=f&&f===a;if(!(f&&!h||s===t.length&&a!==i)){a.setLayout({isInView:!0,invisible:!h&&!r.intersect(l),isAboveViewRoot:h},!0);var d=new ai.a(r.x-l.x,r.y-l.y,r.width,r.height);nc(a.viewChildren||[],function(p){Kh(p,d,t,i,s+1)})}}function oc(a){return a.get(Wh)?a.get(ic):0}function Xp(a){a.registerSeriesModel(Dh),a.registerChartView(jh),a.registerVisual(Gp),a.registerLayout(qr),Ap(a)}function kh(a){var r=a.findComponents({mainType:"legend"});!r||!r.length||a.eachSeriesByType("graph",function(t){var i=t.getCategoriesData(),s=t.getGraph(),l=s.data,f=i.mapArray(i.getName);l.filterSelf(function(h){var d=l.getItemModel(h),p=d.getShallow("category");if(p!=null){typeof p=="number"&&(p=f[p]);for(var m=0;m<r.length;m++)if(!r[m].isSelected(p))return!1}return!0})})}function Zp(a){var r={};a.eachSeriesByType("graph",function(t){var i=t.getCategoriesData(),s=t.getData(),l={};i.each(function(f){var h=i.getName(f);l["ec-"+h]=f;var d=i.getItemModel(f),p=d.getModel("itemStyle").getItemStyle();p.fill||(p.fill=t.getColorFromPalette(h,r)),i.setItemVisual(f,"style",p);for(var m=["symbol","symbolSize","symbolKeepAspect"],b=0;b<m.length;b++){var A=d.getShallow(m[b],!0);A!=null&&i.setItemVisual(f,m[b],A)}}),i.count()&&s.each(function(f){var h=s.getItemModel(f),d=h.getShallow("category");if(d!=null){typeof d=="string"&&(d=l["ec-"+d]);var p=i.getItemVisual(d,"style"),m=s.ensureUniqueItemVisual(f,"style");Object(y.extend)(m,p);for(var b=["symbol","symbolSize","symbolKeepAspect"],A=0;A<b.length;A++)s.setItemVisual(f,b[A],i.getItemVisual(d,b[A]))}})})}function Rs(a){return a instanceof Array||(a=[a,a]),a}function Kp(a){a.eachSeriesByType("graph",function(r){var t=r.getGraph(),i=r.getEdgeData(),s=Rs(r.get("edgeSymbol")),l=Rs(r.get("edgeSymbolSize"));i.setVisual("fromSymbol",s&&s[0]),i.setVisual("toSymbol",s&&s[1]),i.setVisual("fromSymbolSize",l&&l[0]),i.setVisual("toSymbolSize",l&&l[1]),i.setVisual("style",r.getModel("lineStyle").getLineStyle()),i.each(function(f){var h=i.getItemModel(f),d=t.getEdgeByIndex(f),p=Rs(h.getShallow("symbol",!0)),m=Rs(h.getShallow("symbolSize",!0)),b=h.getModel("lineStyle").getLineStyle(),A=i.ensureUniqueItemVisual(f,"style");switch(Object(y.extend)(A,b),A.stroke){case"source":{var E=d.node1.getVisual("style");A.stroke=E&&E.fill;break}case"target":{var E=d.node2.getVisual("style");A.stroke=E&&E.fill;break}}p[0]&&d.setVisual("fromSymbol",p[0]),p[1]&&d.setVisual("toSymbol",p[1]),m[0]&&d.setVisual("fromSymbolSize",m[0]),m[1]&&d.setVisual("toSymbolSize",m[1])})})}var Pu="-->",wu=function(a){return a.get("autoCurveness")||null},Qh=function(a,r){var t=wu(a),i=20,s=[];if(typeof t=="number")i=t;else if(y.isArray(t)){a.__curvenessList=t;return}r>i&&(i=r);var l=i%2?i+2:i+3;s=[];for(var f=0;f<l;f++)s.push((f%2?f+1:f)/10*(f%2?-1:1));a.__curvenessList=s},El=function(a,r,t){var i=[a.id,a.dataIndex].join("."),s=[r.id,r.dataIndex].join(".");return[t.uid,i,s].join(Pu)},Jh=function(a){var r=a.split(Pu);return[r[0],r[2],r[1]].join(Pu)},kp=function(a,r){var t=El(a.node1,a.node2,r);return r.__edgeMap[t]},Qp=function(a,r){var t=fo(El(a.node1,a.node2,r),r),i=fo(El(a.node2,a.node1,r),r);return t+i},fo=function(a,r){var t=r.__edgeMap;return t[a]?t[a].length:0};function $h(a){!wu(a)||(a.__curvenessList=[],a.__edgeMap={},Qh(a))}function Ns(a,r,t,i){if(!!wu(t)){var s=El(a,r,t),l=t.__edgeMap,f=l[Jh(s)];l[s]&&!f?l[s].isForward=!0:f&&l[s]&&(f.isForward=!0,l[s].isForward=!1),l[s]=l[s]||[],l[s].push(i)}}function sc(a,r,t,i){var s=wu(r),l=y.isArray(s);if(!s)return null;var f=kp(a,r);if(!f)return null;for(var h=-1,d=0;d<f.length;d++)if(f[d]===t){h=d;break}var p=Qp(a,r);Qh(r,p),a.lineStyle=a.lineStyle||{};var m=El(a.node1,a.node2,r),b=r.__curvenessList,A=l||p%2?0:1;if(f.isForward)return b[A+h];var E=Jh(m),P=fo(E,r),j=b[h+P+A];return i?l?s&&s[0]===0?(P+A)%2?j:-j:((P%2?0:1)+A)%2?j:-j:(P+A)%2?j:-j:b[h+P+A]}function qh(a){var r=a.coordinateSystem;if(!(r&&r.type!=="view")){var t=a.getGraph();t.eachNode(function(i){var s=i.getModel();i.setLayout([+s.get("x"),+s.get("y")])}),lc(t,a)}}function lc(a,r){a.eachEdge(function(t,i){var s=y.retrieve3(t.getModel().get(["lineStyle","curveness"]),-sc(t,r,i,!0),0),l=Ir.clone(t.node1.getLayout()),f=Ir.clone(t.node2.getLayout()),h=[l,f];+s&&h.push([(l[0]+f[0])/2-(l[1]-f[1])*s,(l[1]+f[1])/2-(f[0]-l[0])*s]),t.setLayout(h)})}function tv(a,r){a.eachSeriesByType("graph",function(t){var i=t.get("layout"),s=t.coordinateSystem;if(s&&s.type!=="view"){var l=t.getData(),f=[];Object(y.each)(s.dimensions,function(A){f=f.concat(l.mapDimensionsAll(A))});for(var h=0;h<l.count();h++){for(var d=[],p=!1,m=0;m<f.length;m++){var b=l.get(f[m],h);isNaN(b)||(p=!0),d.push(b)}p?l.setItemLayout(h,s.dataToPoint(d)):l.setItemLayout(h,[NaN,NaN])}lc(l.graph,t)}else(!i||i==="none")&&qh(t)})}function Ua(a){var r=a.coordinateSystem;if(r.type!=="view")return 1;var t=a.option.nodeScaleRatio,i=r.scaleX,s=r.getZoom(),l=(s-1)*t+1;return l/i}function Ha(a){var r=a.getVisual("symbolSize");return r instanceof Array&&(r=(r[0]+r[1])/2),+r}var ev=Math.PI,uc=[];function rv(a,r){var t=a.coordinateSystem;if(!(t&&t.type!=="view")){var i=t.getBoundingRect(),s=a.getData(),l=s.graph,f=i.width/2+i.x,h=i.height/2+i.y,d=Math.min(i.width,i.height)/2,p=s.count();s.setLayout({cx:f,cy:h}),!!p&&(Jp[r](a,l,s,d,f,h,p),l.eachEdge(function(m,b){var A=y.retrieve3(m.getModel().get(["lineStyle","curveness"]),sc(m,a,b),0),E=Ir.clone(m.node1.getLayout()),P=Ir.clone(m.node2.getLayout()),j,J=(E[0]+P[0])/2,dt=(E[1]+P[1])/2;+A&&(A*=3,j=[f*A+J*(1-A),h*A+dt*(1-A)]),m.setLayout([E,P,j])}))}}var Jp={value:function(a,r,t,i,s,l,f){var h=0,d=t.getSum("value"),p=Math.PI*2/(d||f);r.eachNode(function(m){var b=m.getValue("value"),A=p*(d?b:1)/2;h+=A,m.setLayout([i*Math.cos(h)+s,i*Math.sin(h)+l]),h+=A})},symbolSize:function(a,r,t,i,s,l,f){var h=0;uc.length=f;var d=Ua(a);r.eachNode(function(b){var A=Ha(b);isNaN(A)&&(A=2),A<0&&(A=0),A*=d;var E=Math.asin(A/2/i);isNaN(E)&&(E=ev/2),uc[b.dataIndex]=E,h+=E*2});var p=(2*ev-h)/f/2,m=0;r.eachNode(function(b){var A=p+uc[b.dataIndex];m+=A,b.setLayout([i*Math.cos(m)+s,i*Math.sin(m)+l]),m+=A})}};function $p(a){a.eachSeriesByType("graph",function(r){r.get("layout")==="circular"&&rv(r,"symbolSize")})}var Bs=Ir.scaleAndAdd;function qp(a,r,t){for(var i=a,s=r,l=t.rect,f=l.width,h=l.height,d=[l.x+f/2,l.y+h/2],p=t.gravity==null?.1:t.gravity,m=0;m<i.length;m++){var b=i[m];b.p||(b.p=Ir.create(f*(Math.random()-.5)+d[0],h*(Math.random()-.5)+d[1])),b.pp=Ir.clone(b.p),b.edges=null}var A=t.friction==null?.6:t.friction,E=A,P,j;return{warmUp:function(){E=A*.8},setFixed:function(J){i[J].fixed=!0},setUnfixed:function(J){i[J].fixed=!1},beforeStep:function(J){P=J},afterStep:function(J){j=J},step:function(J){P&&P(i,s);for(var dt=[],St=i.length,Ot=0;Ot<s.length;Ot++){var wt=s[Ot];if(!wt.ignoreForceLayout){var zt=wt.n1,jt=wt.n2;Ir.sub(dt,jt.p,zt.p);var kt=Ir.len(dt)-wt.d,te=jt.w/(zt.w+jt.w);isNaN(te)&&(te=0),Ir.normalize(dt,dt),!zt.fixed&&Bs(zt.p,zt.p,dt,te*kt*E),!jt.fixed&&Bs(jt.p,jt.p,dt,-(1-te)*kt*E)}}for(var Ot=0;Ot<St;Ot++){var ue=i[Ot];ue.fixed||(Ir.sub(dt,d,ue.p),Bs(ue.p,ue.p,dt,p*E))}for(var Ot=0;Ot<St;Ot++)for(var zt=i[Ot],me=Ot+1;me<St;me++){var jt=i[me];Ir.sub(dt,jt.p,zt.p);var kt=Ir.len(dt);kt===0&&(Ir.set(dt,Math.random()-.5,Math.random()-.5),kt=1);var ve=(zt.rep+jt.rep)/kt/kt;!zt.fixed&&Bs(zt.pp,zt.pp,dt,ve),!jt.fixed&&Bs(jt.pp,jt.pp,dt,-ve)}for(var Me=[],Ot=0;Ot<St;Ot++){var ue=i[Ot];ue.fixed||(Ir.sub(Me,ue.p,ue.pp),Bs(ue.p,ue.p,Me,E),Ir.copy(ue.pp,ue.p))}E=E*.992;var Ee=E<.01;j&&j(i,s,Ee),J&&J(Ee)}}}function tg(a){a.eachSeriesByType("graph",function(r){var t=r.coordinateSystem;if(!(t&&t.type!=="view"))if(r.get("layout")==="force"){var i=r.preservedPoints||{},s=r.getGraph(),l=s.data,f=s.edgeData,h=r.getModel("force"),d=h.get("initLayout");r.preservedPoints?l.each(function(Ot){var wt=l.getId(Ot);l.setItemLayout(Ot,i[wt]||[NaN,NaN])}):!d||d==="none"?qh(r):d==="circular"&&rv(r,"value");var p=l.getDataExtent("value"),m=f.getDataExtent("value"),b=h.get("repulsion"),A=h.get("edgeLength"),E=y.isArray(b)?b:[b,b],P=y.isArray(A)?A:[A,A];P=[P[1],P[0]];var j=l.mapArray("value",function(Ot,wt){var zt=l.getItemLayout(wt),jt=Object(Ne.k)(Ot,p,E);return isNaN(jt)&&(jt=(E[0]+E[1])/2),{w:jt,rep:jt,fixed:l.getItemModel(wt).get("fixed"),p:!zt||isNaN(zt[0])||isNaN(zt[1])?null:zt}}),J=f.mapArray("value",function(Ot,wt){var zt=s.getEdgeByIndex(wt),jt=Object(Ne.k)(Ot,m,P);isNaN(jt)&&(jt=(P[0]+P[1])/2);var kt=zt.getModel(),te=y.retrieve3(zt.getModel().get(["lineStyle","curveness"]),-sc(zt,r,wt,!0),0);return{n1:j[zt.node1.dataIndex],n2:j[zt.node2.dataIndex],d:jt,curveness:te,ignoreForceLayout:kt.get("ignoreForceLayout")}}),dt=t.getBoundingRect(),St=qp(j,J,{rect:dt,gravity:h.get("gravity"),friction:h.get("friction")});St.beforeStep(function(Ot,wt){for(var zt=0,jt=Ot.length;zt<jt;zt++)Ot[zt].fixed&&Ir.copy(Ot[zt].p,s.getNodeByIndex(zt).getLayout())}),St.afterStep(function(Ot,wt,zt){for(var jt=0,kt=Ot.length;jt<kt;jt++)Ot[jt].fixed||s.getNodeByIndex(jt).setLayout(Ot[jt].p),i[l.getId(jt)]=Ot[jt].p;for(var jt=0,kt=wt.length;jt<kt;jt++){var te=wt[jt],ue=s.getEdgeByIndex(jt),me=te.n1.p,ve=te.n2.p,Me=ue.getLayout();Me=Me?Me.slice():[],Me[0]=Me[0]||[],Me[1]=Me[1]||[],Ir.copy(Me[0],me),Ir.copy(Me[1],ve),+te.curveness&&(Me[2]=[(me[0]+ve[0])/2-(me[1]-ve[1])*te.curveness,(me[1]+ve[1])/2-(ve[0]-me[0])*te.curveness]),ue.setLayout(Me)}}),r.forceLayout=St,r.preservedPoints=i,St.step()}else r.forceLayout=null})}function eg(a,r,t){var i=Object(y.extend)(a.getBoxLayoutParams(),{aspect:t});return Object(Tr.g)(i,{width:r.getWidth(),height:r.getHeight()})}function rg(a,r){var t=[];return a.eachSeriesByType("graph",function(i){var s=i.get("coordinateSystem");if(!s||s==="view"){var l=i.getData(),f=l.mapArray(function(J){var dt=l.getItemModel(J);return[+dt.get("x"),+dt.get("y")]}),h=[],d=[];Sh.d(f,h,d),d[0]-h[0]==0&&(d[0]+=1,h[0]-=1),d[1]-h[1]==0&&(d[1]+=1,h[1]-=1);var p=(d[0]-h[0])/(d[1]-h[1]),m=eg(i,r,p);isNaN(p)&&(h=[m.x,m.y],d=[m.x+m.width,m.y+m.height]);var b=d[0]-h[0],A=d[1]-h[1],E=m.width,P=m.height,j=i.coordinateSystem=new Os;j.zoomLimit=i.get("scaleLimit"),j.setBoundingRect(h[0],h[1],b,A),j.setViewRect(m.x,m.y,E,P),j.setCenter(i.get("center")),j.setZoom(i.get("zoom")),t.push(j)}}),t}var Iu=Ce.a.prototype,fc=Cs.a.prototype,Ll=function(){function a(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.percent=1}return a}(),ky=function(a){Object(de.b)(r,a);function r(){return a!==null&&a.apply(this,arguments)||this}return r}(Ll);function yi(a){return isNaN(+a.cpx1)||isNaN(+a.cpy1)}var ts=function(a){Object(de.b)(r,a);function r(t){var i=a.call(this,t)||this;return i.type="ec-line",i}return r.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},r.prototype.getDefaultShape=function(){return new Ll},r.prototype.buildPath=function(t,i){yi(i)?Iu.buildPath.call(this,t,i):fc.buildPath.call(this,t,i)},r.prototype.pointAt=function(t){return yi(this.shape)?Iu.pointAt.call(this,t):fc.pointAt.call(this,t)},r.prototype.tangentAt=function(t){var i=this.shape,s=yi(i)?[i.x2-i.x1,i.y2-i.y1]:fc.tangentAt.call(this,t);return Ir.normalize(s,s)},r}(ot.b),nv=ts,cc=["fromSymbol","toSymbol"];function js(a){return"_"+a+"Type"}function iv(a,r,t){var i=r.getItemVisual(t,a);if(!(!i||i==="none")){var s=r.getItemVisual(t,a+"Size"),l=r.getItemVisual(t,a+"Rotate"),f=r.getItemVisual(t,a+"Offset")||0,h=r.getItemVisual(t,a+"KeepAspect"),d=Object(y.isArray)(s)?s:[s,s],p=Object(y.isArray)(f)?f:[f,f];p[0]=Object(Ne.o)(p[0],d[0]),p[1]=Object(Ne.o)(Object(y.retrieve2)(p[1],p[0]),d[1]);var m=lr.a(i,-d[0]/2+p[0],-d[1]/2+p[1],d[0],d[1],null,h);return m.__specifiedRotation=l==null||isNaN(l)?void 0:+l*Math.PI/180||0,m.name=a,m}}function av(a){var r=new nv({name:"line",subPixelOptimize:!0});return Ru(r.shape,a),r}function Ru(a,r){a.x1=r[0][0],a.y1=r[0][1],a.x2=r[1][0],a.y2=r[1][1],a.percent=1;var t=r[2];t?(a.cpx1=t[0],a.cpy1=t[1]):(a.cpx1=NaN,a.cpy1=NaN)}var Pl=function(a){Object(de.b)(r,a);function r(t,i,s){var l=a.call(this)||this;return l._createLine(t,i,s),l}return r.prototype._createLine=function(t,i,s){var l=t.hostModel,f=t.getItemLayout(i),h=av(f);h.shape.percent=0,Ze.initProps(h,{shape:{percent:1}},l,i),this.add(h),Object(y.each)(cc,function(d){var p=iv(d,t,i);this.add(p),this[js(d)]=t.getItemVisual(i,d)},this),this._updateCommonStl(t,i,s)},r.prototype.updateData=function(t,i,s){var l=t.hostModel,f=this.childOfName("line"),h=t.getItemLayout(i),d={shape:{}};Ru(d.shape,h),Ze.updateProps(f,d,l,i),Object(y.each)(cc,function(p){var m=t.getItemVisual(i,p),b=js(p);if(this[b]!==m){this.remove(this.childOfName(p));var A=iv(p,t,i);this.add(A)}this[b]=m},this),this._updateCommonStl(t,i,s)},r.prototype.getLinePath=function(){return this.childAt(0)},r.prototype._updateCommonStl=function(t,i,s){var l=t.hostModel,f=this.childOfName("line"),h=s&&s.emphasisLineStyle,d=s&&s.blurLineStyle,p=s&&s.selectLineStyle,m=s&&s.labelStatesModels;if(!s||t.hasItemOption){var b=t.getItemModel(i);h=b.getModel(["emphasis","lineStyle"]).getLineStyle(),d=b.getModel(["blur","lineStyle"]).getLineStyle(),p=b.getModel(["select","lineStyle"]).getLineStyle(),m=Object(Ar.f)(b)}var A=t.getItemVisual(i,"style"),E=A.stroke;f.useStyle(A),f.style.fill=null,f.style.strokeNoScale=!0,f.ensureState("emphasis").style=h,f.ensureState("blur").style=d,f.ensureState("select").style=p,Object(y.each)(cc,function(St){var Ot=this.childOfName(St);if(Ot){Ot.setColor(E),Ot.style.opacity=A.opacity;for(var wt=0;wt<qe.g.length;wt++){var zt=qe.g[wt],jt=f.getState(zt);if(jt){var kt=jt.style||{},te=Ot.ensureState(zt),ue=te.style||(te.style={});kt.stroke!=null&&(ue[Ot.__isEmptyBrush?"stroke":"fill"]=kt.stroke),kt.opacity!=null&&(ue.opacity=kt.opacity)}}Ot.markRedraw()}},this);var P=l.getRawValue(i);Object(Ar.h)(this,m,{labelDataIndex:i,labelFetcher:{getFormattedLabel:function(St,Ot){return l.getFormattedLabel(St,Ot,t.dataType)}},inheritColor:E||"#000",defaultOpacity:A.opacity,defaultText:(P==null?t.getName(i):isFinite(P)?Object(Ne.u)(P):P)+""});var j=this.getTextContent();if(j){var J=m.normal;j.__align=j.style.align,j.__verticalAlign=j.style.verticalAlign,j.__position=J.get("position")||"middle";var dt=J.get("distance");Object(y.isArray)(dt)||(dt=[dt,dt]),j.__labelDistance=dt}this.setTextConfig({position:null,local:!0,inside:!1}),Object(qe.o)(this)},r.prototype.highlight=function(){Object(qe.r)(this)},r.prototype.downplay=function(){Object(qe.C)(this)},r.prototype.updateLayout=function(t,i){this.setLinePoints(t.getItemLayout(i))},r.prototype.setLinePoints=function(t){var i=this.childOfName("line");Ru(i.shape,t),i.dirty()},r.prototype.beforeUpdate=function(){var t=this,i=t.childOfName("fromSymbol"),s=t.childOfName("toSymbol"),l=t.getTextContent();if(!i&&!s&&(!l||l.ignore))return;for(var f=1,h=this.parent;h;)h.scaleX&&(f/=h.scaleX),h=h.parent;var d=t.childOfName("line");if(!this.__dirty&&!d.__dirty)return;var p=d.shape.percent,m=d.pointAt(0),b=d.pointAt(p),A=Ir.sub([],b,m);Ir.normalize(A,A);function E(me,ve){var Me=me.__specifiedRotation;if(Me==null){var Ee=d.tangentAt(ve);me.attr("rotation",(ve===1?-1:1)*Math.PI/2-Math.atan2(Ee[1],Ee[0]))}else me.attr("rotation",Me)}if(i&&(i.setPosition(m),E(i,0),i.scaleX=i.scaleY=f*p,i.markRedraw()),s&&(s.setPosition(b),E(s,1),s.scaleX=s.scaleY=f*p,s.markRedraw()),l&&!l.ignore){l.x=l.y=0,l.originX=l.originY=0;var P=void 0,j=void 0,J=l.__labelDistance,dt=J[0]*f,St=J[1]*f,Ot=p/2,wt=d.tangentAt(Ot),zt=[wt[1],-wt[0]],jt=d.pointAt(Ot);zt[1]>0&&(zt[0]=-zt[0],zt[1]=-zt[1]);var kt=wt[0]<0?-1:1;if(l.__position!=="start"&&l.__position!=="end"){var te=-Math.atan2(wt[1],wt[0]);b[0]<m[0]&&(te=Math.PI+te),l.rotation=te}var ue=void 0;switch(l.__position){case"insideStartTop":case"insideMiddleTop":case"insideEndTop":case"middle":ue=-St,j="bottom";break;case"insideStartBottom":case"insideMiddleBottom":case"insideEndBottom":ue=St,j="top";break;default:ue=0,j="middle"}switch(l.__position){case"end":l.x=A[0]*dt+b[0],l.y=A[1]*St+b[1],P=A[0]>.8?"left":A[0]<-.8?"right":"center",j=A[1]>.8?"top":A[1]<-.8?"bottom":"middle";break;case"start":l.x=-A[0]*dt+m[0],l.y=-A[1]*St+m[1],P=A[0]>.8?"right":A[0]<-.8?"left":"center",j=A[1]>.8?"bottom":A[1]<-.8?"top":"middle";break;case"insideStartTop":case"insideStart":case"insideStartBottom":l.x=dt*kt+m[0],l.y=m[1]+ue,P=wt[0]<0?"right":"left",l.originX=-dt*kt,l.originY=-ue;break;case"insideMiddleTop":case"insideMiddle":case"insideMiddleBottom":case"middle":l.x=jt[0],l.y=jt[1]+ue,P="center",l.originY=-ue;break;case"insideEndTop":case"insideEnd":case"insideEndBottom":l.x=-dt*kt+b[0],l.y=b[1]+ue,P=wt[0]>=0?"right":"left",l.originX=dt*kt,l.originY=-ue;break}l.scaleX=l.scaleY=f,l.setStyle({verticalAlign:l.__verticalAlign||j,align:l.__align||P})}},r}(pr.a),wl=Pl,hc=function(){function a(r){this.group=new pr.a,this._LineCtor=r||wl}return a.prototype.isPersistent=function(){return!0},a.prototype.updateData=function(r){var t=this,i=this,s=i.group,l=i._lineData;i._lineData=r,l||s.removeAll();var f=dc(r);r.diff(l).add(function(h){t._doAdd(r,h,f)}).update(function(h,d){t._doUpdate(l,r,d,h,f)}).remove(function(h){s.remove(l.getItemGraphicEl(h))}).execute()},a.prototype.updateLayout=function(){var r=this._lineData;!r||r.eachItemGraphicEl(function(t,i){t.updateLayout(r,i)},this)},a.prototype.incrementalPrepareUpdate=function(r){this._seriesScope=dc(r),this._lineData=null,this.group.removeAll()},a.prototype.incrementalUpdate=function(r,t){function i(h){!h.isGroup&&!vc(h)&&(h.incremental=!0,h.ensureState("emphasis").hoverLayer=!0)}for(var s=r.start;s<r.end;s++){var l=t.getItemLayout(s);if(Rl(l)){var f=new this._LineCtor(t,s,this._seriesScope);f.traverse(i),this.group.add(f),t.setItemGraphicEl(s,f)}}},a.prototype.remove=function(){this.group.removeAll()},a.prototype._doAdd=function(r,t,i){var s=r.getItemLayout(t);if(!!Rl(s)){var l=new this._LineCtor(r,t,i);r.setItemGraphicEl(t,l),this.group.add(l)}},a.prototype._doUpdate=function(r,t,i,s,l){var f=r.getItemGraphicEl(i);if(!Rl(t.getItemLayout(s))){this.group.remove(f);return}f?f.updateData(t,s,l):f=new this._LineCtor(t,s,l),t.setItemGraphicEl(s,f),this.group.add(f)},a}();function vc(a){return a.animators&&a.animators.length>0}function dc(a){var r=a.hostModel;return{lineStyle:r.getModel("lineStyle").getLineStyle(),emphasisLineStyle:r.getModel(["emphasis","lineStyle"]).getLineStyle(),blurLineStyle:r.getModel(["blur","lineStyle"]).getLineStyle(),selectLineStyle:r.getModel(["select","lineStyle"]).getLineStyle(),labelStatesModels:Object(Ar.f)(r)}}function Il(a){return isNaN(a[0])||isNaN(a[1])}function Rl(a){return!Il(a[0])&&!Il(a[1])}var zs=hc,co=[],Nu=[],Bu=[],es=bi.h,Nl=Ir.distSquare,ov=Math.abs;function sv(a,r,t){for(var i=a[0],s=a[1],l=a[2],f=Infinity,h,d=t*t,p=.1,m=.1;m<=.9;m+=.1){co[0]=es(i[0],s[0],l[0],m),co[1]=es(i[1],s[1],l[1],m);var b=ov(Nl(co,r)-d);b<f&&(f=b,h=m)}for(var A=0;A<32;A++){var E=h+p;Nu[0]=es(i[0],s[0],l[0],h),Nu[1]=es(i[1],s[1],l[1],h),Bu[0]=es(i[0],s[0],l[0],E),Bu[1]=es(i[1],s[1],l[1],E);var b=Nl(Nu,r)-d;if(ov(b)<.01)break;var P=Nl(Bu,r)-d;p/=2,b<0?P>=0?h=h+p:h=h-p:P>=0?h=h-p:h=h+p}return h}function kn(a,r){var t=[],i=bi.n,s=[[],[],[]],l=[[],[]],f=[];r/=2,a.eachEdge(function(h,d){var p=h.getLayout(),m=h.getVisual("fromSymbol"),b=h.getVisual("toSymbol");p.__original||(p.__original=[Ir.clone(p[0]),Ir.clone(p[1])],p[2]&&p.__original.push(Ir.clone(p[2])));var A=p.__original;if(p[2]!=null){if(Ir.copy(s[0],A[0]),Ir.copy(s[1],A[2]),Ir.copy(s[2],A[1]),m&&m!=="none"){var E=Ha(h.node1),P=sv(s,A[0],E*r);i(s[0][0],s[1][0],s[2][0],P,t),s[0][0]=t[3],s[1][0]=t[4],i(s[0][1],s[1][1],s[2][1],P,t),s[0][1]=t[3],s[1][1]=t[4]}if(b&&b!=="none"){var E=Ha(h.node2),P=sv(s,A[1],E*r);i(s[0][0],s[1][0],s[2][0],P,t),s[1][0]=t[1],s[2][0]=t[2],i(s[0][1],s[1][1],s[2][1],P,t),s[1][1]=t[1],s[2][1]=t[2]}Ir.copy(p[0],s[0]),Ir.copy(p[1],s[2]),Ir.copy(p[2],s[1])}else{if(Ir.copy(l[0],A[0]),Ir.copy(l[1],A[1]),Ir.sub(f,l[1],l[0]),Ir.normalize(f,f),m&&m!=="none"){var E=Ha(h.node1);Ir.scaleAndAdd(l[0],l[0],f,E*r)}if(b&&b!=="none"){var E=Ha(h.node2);Ir.scaleAndAdd(l[1],l[1],f,-E*r)}Ir.copy(p[0],l[0]),Ir.copy(p[1],l[1])}})}function Qn(a){return a.type==="view"}var lv=function(a){Object(de.b)(r,a);function r(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=r.type,t}return r.prototype.init=function(t,i){var s=new Er,l=new zs,f=this.group;this._controller=new oi(i.getZr()),this._controllerHost={target:f},f.add(s.group),f.add(l.group),this._symbolDraw=s,this._lineDraw=l,this._firstRender=!0},r.prototype.render=function(t,i,s){var l=this,f=t.coordinateSystem;this._model=t;var h=this._symbolDraw,d=this._lineDraw,p=this.group;if(Qn(f)){var m={x:f.x,y:f.y,scaleX:f.scaleX,scaleY:f.scaleY};this._firstRender?p.attr(m):Ze.updateProps(p,m,t)}kn(t.getGraph(),Ua(t));var b=t.getData();h.updateData(b);var A=t.getEdgeData();d.updateData(A),this._updateNodeAndLinkScale(),this._updateController(t,i,s),clearTimeout(this._layoutTimeout);var E=t.forceLayout,P=t.get(["force","layoutAnimation"]);E&&this._startForceLayoutIteration(E,P),b.graph.eachNode(function(St){var Ot=St.dataIndex,wt=St.getGraphicEl(),zt=St.getModel();wt.off("drag").off("dragend");var jt=zt.get("draggable");jt&&wt.on("drag",function(){E&&(E.warmUp(),!l._layouting&&l._startForceLayoutIteration(E,P),E.setFixed(Ot),b.setItemLayout(Ot,[wt.x,wt.y]))}).on("dragend",function(){E&&E.setUnfixed(Ot)}),wt.setDraggable(jt&&!!E);var kt=zt.get(["emphasis","focus"]);kt==="adjacency"&&(Object(Ur.a)(wt).focus=St.getAdjacentDataIndices())}),b.graph.eachEdge(function(St){var Ot=St.getGraphicEl(),wt=St.getModel().get(["emphasis","focus"]);wt==="adjacency"&&(Object(Ur.a)(Ot).focus={edge:[St.dataIndex],node:[St.node1.dataIndex,St.node2.dataIndex]})});var j=t.get("layout")==="circular"&&t.get(["circular","rotateLabel"]),J=b.getLayout("cx"),dt=b.getLayout("cy");b.eachItemGraphicEl(function(St,Ot){var wt=b.getItemModel(Ot),zt=wt.get(["label","rotate"])||0,jt=St.getSymbolPath();if(j){var kt=b.getItemLayout(Ot),te=Math.atan2(kt[1]-dt,kt[0]-J);te<0&&(te=Math.PI*2+te);var ue=kt[0]<J;ue&&(te=te-Math.PI);var me=ue?"left":"right";jt.setTextConfig({rotation:-te,position:me,origin:"center"});var ve=jt.ensureState("emphasis");y.extend(ve.textConfig||(ve.textConfig={}),{position:me})}else jt.setTextConfig({rotation:zt*=Math.PI/180})}),this._firstRender=!1},r.prototype.dispose=function(){this._controller&&this._controller.dispose(),this._controllerHost=null},r.prototype._startForceLayoutIteration=function(t,i){var s=this;(function l(){t.step(function(f){s.updateLayout(s._model),(s._layouting=!f)&&(i?s._layoutTimeout=setTimeout(l,16):l())})})()},r.prototype._updateController=function(t,i,s){var l=this,f=this._controller,h=this._controllerHost,d=this.group;if(f.setPointerChecker(function(p,m,b){var A=d.getBoundingRect();return A.applyTransform(d.transform),A.contain(m,b)&&!pu(p,s,t)}),!Qn(t.coordinateSystem)){f.disable();return}f.enable(t.get("roam")),h.zoomLimit=t.get("scaleLimit"),h.zoom=t.coordinateSystem.getZoom(),f.off("pan").off("zoom").on("pan",function(p){Pf(h,p.dx,p.dy),s.dispatchAction({seriesId:t.id,type:"graphRoam",dx:p.dx,dy:p.dy})}).on("zoom",function(p){Un(h,p.scale,p.originX,p.originY),s.dispatchAction({seriesId:t.id,type:"graphRoam",zoom:p.scale,originX:p.originX,originY:p.originY}),l._updateNodeAndLinkScale(),kn(t.getGraph(),Ua(t)),l._lineDraw.updateLayout(),s.updateLabelLayout()})},r.prototype._updateNodeAndLinkScale=function(){var t=this._model,i=t.getData(),s=Ua(t);i.eachItemGraphicEl(function(l,f){l.setSymbolScale(s)})},r.prototype.updateLayout=function(t){kn(t.getGraph(),Ua(t)),this._symbolDraw.updateLayout(),this._lineDraw.updateLayout()},r.prototype.remove=function(t,i){this._symbolDraw&&this._symbolDraw.remove(),this._lineDraw&&this._lineDraw.remove()},r.type="graph",r}(yn.a),uv=lv,Fs=S("c2i1"),ju=S("HznI");function wi(a,r,t,i,s){for(var l=new Fs.a(i),f=0;f<a.length;f++)l.addNode(y.retrieve(a[f].id,a[f].name,f),f);for(var h=[],d=[],p=0,f=0;f<r.length;f++){var m=r[f],b=m.source,A=m.target;l.addEdge(b,A,p)&&(d.push(m),h.push(y.retrieve(Object(sr.e)(m.id,null),b+" > "+A)),p++)}var E=t.get("coordinateSystem"),P;if(E==="cartesian2d"||E==="polar")P=Object(_r.a)(a,t);else{var j=ju.a.get(E),J=j?j.dimensions||[]:[];y.indexOf(J,"value")<0&&J.concat(["value"]);var dt=Object(No.a)(a,{coordDimensions:J});P=new Zn.a(dt,t),P.initData(a)}var St=new Zn.a(["value"],t);return St.initData(d,h),s&&s(P,St),Object(Ou.a)({mainData:P,struct:l,structAttr:"graph",datas:{node:P,edge:St},datasAttr:{node:"data",edge:"edgeData"}}),l.update(),l}var pc=S("9ti/"),zu=function(a){Object(de.b)(r,a);function r(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=r.type,t.hasSymbolVisual=!0,t}return r.prototype.init=function(t){a.prototype.init.apply(this,arguments);var i=this;function s(){return i._categoriesData}this.legendVisualProvider=new xn(s,s),this.fillDataTextStyle(t.edges||t.links),this._updateCategoriesData()},r.prototype.mergeOption=function(t){a.prototype.mergeOption.apply(this,arguments),this.fillDataTextStyle(t.edges||t.links),this._updateCategoriesData()},r.prototype.mergeDefaultAndTheme=function(t){a.prototype.mergeDefaultAndTheme.apply(this,arguments),Object(sr.f)(t,"edgeLabel",["show"])},r.prototype.getInitialData=function(t,i){var s=t.edges||t.links||[],l=t.data||t.nodes||[],f=this;if(l&&s){$h(this);var h=wi(l,s,this,!0,d);return y.each(h.edges,function(p){Ns(p.node1,p.node2,this,p.dataIndex)},this),h.data}function d(p,m){p.wrapMethod("getItemModel",function(P){var j=f._categoriesModels,J=P.getShallow("category"),dt=j[J];return dt&&(dt.parentModel=P.parentModel,P.parentModel=dt),P});var b=Ye.a.prototype.getModel;function A(P,j){var J=b.call(this,P,j);return J.resolveParentPath=E,J}m.wrapMethod("getItemModel",function(P){return P.resolveParentPath=E,P.getModel=A,P});function E(P){if(P&&(P[0]==="label"||P[1]==="label")){var j=P.slice();return P[0]==="label"?j[0]="edgeLabel":P[1]==="label"&&(j[1]="edgeLabel"),j}return P}}},r.prototype.getGraph=function(){return this.getData().graph},r.prototype.getEdgeData=function(){return this.getGraph().edgeData},r.prototype.getCategoriesData=function(){return this._categoriesData},r.prototype.formatTooltip=function(t,i,s){if(s==="edge"){var l=this.getData(),f=this.getDataParams(t,s),h=l.graph.getEdgeByIndex(t),d=l.getName(h.node1.dataIndex),p=l.getName(h.node2.dataIndex),m=[];return d!=null&&m.push(d),p!=null&&m.push(p),Object(wn.c)("nameValue",{name:m.join(" > "),value:f.value,noValue:f.value==null})}var b=Object(pc.a)({series:this,dataIndex:t,multipleSeries:i});return b},r.prototype._updateCategoriesData=function(){var t=y.map(this.option.categories||[],function(s){return s.value!=null?s:y.extend({value:0},s)}),i=new Zn.a(["value"],this);i.initData(t),this._categoriesData=i,this._categoriesModels=i.mapArray(function(s){return i.getItemModel(s)})},r.prototype.setZoom=function(t){this.option.zoom=t},r.prototype.setCenter=function(t){this.option.center=t},r.prototype.isAnimationEnabled=function(){return a.prototype.isAnimationEnabled.call(this)&&!(this.get("layout")==="force"&&this.get(["force","layoutAnimation"]))},r.type="series.graph",r.dependencies=["grid","polar","geo","singleAxis","calendar"],r.defaultOption={zlevel:0,z:2,coordinateSystem:"view",legendHoverLink:!0,layout:null,circular:{rotateLabel:!1},force:{initLayout:null,repulsion:[0,50],gravity:.1,friction:.6,edgeLength:30,layoutAnimation:!0},left:"center",top:"center",symbol:"circle",symbolSize:10,edgeSymbol:["none","none"],edgeSymbolSize:10,edgeLabel:{position:"middle",distance:5},draggable:!1,roam:!1,center:null,zoom:1,nodeScaleRatio:.6,label:{show:!1,formatter:"{b}"},itemStyle:{},lineStyle:{color:"#aaa",width:1,opacity:.5},emphasis:{scale:!0,label:{show:!0}},select:{itemStyle:{borderColor:"#212121"}}},r}(Nr.a),ng=zu,ig={type:"graphRoam",event:"graphRoam",update:"none"};function ag(a){a.registerChartView(uv),a.registerSeriesModel(ng),a.registerProcessor(kh),a.registerVisual(Zp),a.registerVisual(Kp),a.registerLayout(tv),a.registerLayout(a.PRIORITY.VISUAL.POST_CHART_LAYOUT,$p),a.registerLayout(tg),a.registerCoordinateSystem("graphView",{dimensions:Os.dimensions,create:rg}),a.registerAction({type:"focusNodeAdjacency",event:"focusNodeAdjacency",update:"series:focusNodeAdjacency"},function(){}),a.registerAction({type:"unfocusNodeAdjacency",event:"unfocusNodeAdjacency",update:"series:unfocusNodeAdjacency"},function(){}),a.registerAction(ig,function(r,t){t.eachComponent({mainType:"series",query:r},function(i){var s=i.coordinateSystem,l=Ms(s,r);i.setCenter&&i.setCenter(l.center),i.setZoom&&i.setZoom(l.zoom)})})}var og=function(){function a(){this.angle=0,this.width=10,this.r=10,this.x=0,this.y=0}return a}(),Vs=function(a){Object(de.b)(r,a);function r(t){var i=a.call(this,t)||this;return i.type="pointer",i}return r.prototype.getDefaultShape=function(){return new og},r.prototype.buildPath=function(t,i){var s=Math.cos,l=Math.sin,f=i.r,h=i.width,d=i.angle,p=i.x-s(d)*h*(h>=f/3?1:2),m=i.y-l(d)*h*(h>=f/3?1:2);d=i.angle-Math.PI/2,t.moveTo(p,m),t.lineTo(i.x+s(d)*h,i.y+l(d)*h),t.lineTo(i.x+s(i.angle)*f,i.y+l(i.angle)*f),t.lineTo(i.x-s(d)*h,i.y-l(d)*h),t.lineTo(p,m)},r}(ot.b),sg=Vs;function gc(a,r){var t=a.get("center"),i=r.getWidth(),s=r.getHeight(),l=Math.min(i,s),f=Object(Ne.o)(t[0],r.getWidth()),h=Object(Ne.o)(t[1],r.getHeight()),d=Object(Ne.o)(a.get("radius"),l/2);return{cx:f,cy:h,r:d}}function Bl(a,r){var t=a==null?"":a+"";return r&&(typeof r=="string"?t=r.replace("{value}",t):typeof r=="function"&&(t=r(a))),t}var mc=Math.PI*2,lg=function(a){Object(de.b)(r,a);function r(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=r.type,t}return r.prototype.render=function(t,i,s){this.group.removeAll();var l=t.get(["axisLine","lineStyle","color"]),f=gc(t,s);this._renderMain(t,i,s,l,f),this._data=t.getData()},r.prototype.dispose=function(){},r.prototype._renderMain=function(t,i,s,l,f){for(var h=this.group,d=t.get("clockwise"),p=-t.get("startAngle")/180*Math.PI,m=-t.get("endAngle")/180*Math.PI,b=t.getModel("axisLine"),A=b.get("roundCap"),E=A?Lo:vi.a,P=b.get("show"),j=b.getModel("lineStyle"),J=j.get("width"),dt=!((m-p)%mc)&&m!==p?mc:(m-p)%mc,St=p,Ot=0;P&&Ot<l.length;Ot++){var wt=Math.min(Math.max(l[Ot][0],0),1);m=p+dt*wt;var zt=new E({shape:{startAngle:St,endAngle:m,cx:f.cx,cy:f.cy,clockwise:d,r0:f.r-J,r:f.r},silent:!0});zt.setStyle({fill:l[Ot][1]}),zt.setStyle(j.getLineStyle(["color","width"])),h.add(zt),St=m}var jt=function(te){if(te<=0)return l[0][1];var ue;for(ue=0;ue<l.length;ue++)if(l[ue][0]>=te&&(ue===0?0:l[ue-1][0])<te)return l[ue][1];return l[ue-1][1]};if(!d){var kt=p;p=m,m=kt}this._renderTicks(t,i,s,jt,f,p,m,d,J),this._renderTitleAndDetail(t,i,s,jt,f),this._renderAnchor(t,f),this._renderPointer(t,i,s,jt,f,p,m,d,J)},r.prototype._renderTicks=function(t,i,s,l,f,h,d,p,m){for(var b=this.group,A=f.cx,E=f.cy,P=f.r,j=+t.get("min"),J=+t.get("max"),dt=t.getModel("splitLine"),St=t.getModel("axisTick"),Ot=t.getModel("axisLabel"),wt=t.get("splitNumber"),zt=St.get("splitNumber"),jt=Object(Ne.o)(dt.get("length"),P),kt=Object(Ne.o)(St.get("length"),P),te=h,ue=(d-h)/wt,me=ue/zt,ve=dt.getModel("lineStyle").getLineStyle(),Me=St.getModel("lineStyle").getLineStyle(),Ee=dt.get("distance"),Oe,we,We=0;We<=wt;We++){if(Oe=Math.cos(te),we=Math.sin(te),dt.get("show")){var $e=Ee?Ee+m:m,Je=new Ce.a({shape:{x1:Oe*(P-$e)+A,y1:we*(P-$e)+E,x2:Oe*(P-jt-$e)+A,y2:we*(P-jt-$e)+E},style:ve,silent:!0});ve.stroke==="auto"&&Je.setStyle({stroke:l(We/wt)}),b.add(Je)}if(Ot.get("show")){var $e=Ot.get("distance")+Ee,fr=Bl(Object(Ne.u)(We/wt*(J-j)+j),Ot.get("formatter")),Vr=l(We/wt);b.add(new en.a({style:Object(Ar.c)(Ot,{text:fr,x:Oe*(P-jt-$e)+A,y:we*(P-jt-$e)+E,verticalAlign:we<-.8?"top":we>.8?"bottom":"middle",align:Oe<-.4?"left":Oe>.4?"right":"center"},{inheritColor:Vr}),silent:!0}))}if(St.get("show")&&We!==wt){var $e=St.get("distance");$e=$e?$e+m:m;for(var wr=0;wr<=zt;wr++){Oe=Math.cos(te),we=Math.sin(te);var jr=new Ce.a({shape:{x1:Oe*(P-$e)+A,y1:we*(P-$e)+E,x2:Oe*(P-kt-$e)+A,y2:we*(P-kt-$e)+E},silent:!0,style:Me});Me.stroke==="auto"&&jr.setStyle({stroke:l((We+wr/zt)/wt)}),b.add(jr),te+=me}te-=me}else te+=ue}},r.prototype._renderPointer=function(t,i,s,l,f,h,d,p,m){var b=this.group,A=this._data,E=this._progressEls,P=[],j=t.get(["pointer","show"]),J=t.getModel("progress"),dt=J.get("show"),St=t.getData(),Ot=St.mapDimension("value"),wt=+t.get("min"),zt=+t.get("max"),jt=[wt,zt],kt=[h,d];function te(me,ve){var Me=St.getItemModel(me),Ee=Me.getModel("pointer"),Oe=Object(Ne.o)(Ee.get("width"),f.r),we=Object(Ne.o)(Ee.get("length"),f.r),We=t.get(["pointer","icon"]),$e=Ee.get("offsetCenter"),Je=Object(Ne.o)($e[0],f.r),fr=Object(Ne.o)($e[1],f.r),Vr=Ee.get("keepAspect"),wr;return We?wr=Object(lr.a)(We,Je-Oe/2,fr-we,Oe,we,null,Vr):wr=new sg({shape:{angle:-Math.PI/2,width:Oe,r:we,x:Je,y:fr}}),wr.rotation=-(ve+Math.PI/2),wr.x=f.cx,wr.y=f.cy,wr}function ue(me,ve){var Me=J.get("roundCap"),Ee=Me?Lo:vi.a,Oe=J.get("overlap"),we=Oe?J.get("width"):m/St.count(),We=Oe?f.r-we:f.r-(me+1)*we,$e=Oe?f.r:f.r-me*we,Je=new Ee({shape:{startAngle:h,endAngle:ve,cx:f.cx,cy:f.cy,clockwise:p,r0:We,r:$e}});return Oe&&(Je.z2=zt-St.get(Ot,me)%zt),Je}(dt||j)&&(St.diff(A).add(function(me){if(j){var ve=te(me,h);Ze.initProps(ve,{rotation:-(Object(Ne.k)(St.get(Ot,me),jt,kt,!0)+Math.PI/2)},t),b.add(ve),St.setItemGraphicEl(me,ve)}if(dt){var Me=ue(me,h),Ee=J.get("clip");Ze.initProps(Me,{shape:{endAngle:Object(Ne.k)(St.get(Ot,me),jt,kt,Ee)}},t),b.add(Me),P[me]=Me}}).update(function(me,ve){if(j){var Me=A.getItemGraphicEl(ve),Ee=Me?Me.rotation:h,Oe=te(me,Ee);Oe.rotation=Ee,Ze.updateProps(Oe,{rotation:-(Object(Ne.k)(St.get(Ot,me),jt,kt,!0)+Math.PI/2)},t),b.add(Oe),St.setItemGraphicEl(me,Oe)}if(dt){var we=E[ve],We=we?we.shape.endAngle:h,$e=ue(me,We),Je=J.get("clip");Ze.updateProps($e,{shape:{endAngle:Object(Ne.k)(St.get(Ot,me),jt,kt,Je)}},t),b.add($e),P[me]=$e}}).execute(),St.each(function(me){var ve=St.getItemModel(me),Me=ve.getModel("emphasis");if(j){var Ee=St.getItemGraphicEl(me),Oe=St.getItemVisual(me,"style"),we=Oe.fill;if(Ee instanceof it.a){var We=Ee.style;Ee.useStyle(Object(y.extend)({image:We.image,x:We.x,y:We.y,width:We.width,height:We.height},Oe))}else Ee.useStyle(Oe),Ee.type!=="pointer"&&Ee.setColor(we);Ee.setStyle(ve.getModel(["pointer","itemStyle"]).getItemStyle()),Ee.style.fill==="auto"&&Ee.setStyle("fill",l(Object(Ne.k)(St.get(Ot,me),jt,[0,1],!0))),Ee.z2EmphasisLift=0,Object(qe.I)(Ee,ve),Object(qe.o)(Ee,Me.get("focus"),Me.get("blurScope"))}if(dt){var $e=P[me];$e.useStyle(St.getItemVisual(me,"style")),$e.setStyle(ve.getModel(["progress","itemStyle"]).getItemStyle()),$e.z2EmphasisLift=0,Object(qe.I)($e,ve),Object(qe.o)($e,Me.get("focus"),Me.get("blurScope"))}}),this._progressEls=P)},r.prototype._renderAnchor=function(t,i){var s=t.getModel("anchor"),l=s.get("show");if(l){var f=s.get("size"),h=s.get("icon"),d=s.get("offsetCenter"),p=s.get("keepAspect"),m=Object(lr.a)(h,i.cx-f/2+Object(Ne.o)(d[0],i.r),i.cy-f/2+Object(Ne.o)(d[1],i.r),f,f,null,p);m.z2=s.get("showAbove")?1:0,m.setStyle(s.getModel("itemStyle").getItemStyle()),this.group.add(m)}},r.prototype._renderTitleAndDetail=function(t,i,s,l,f){var h=this,d=t.getData(),p=d.mapDimension("value"),m=+t.get("min"),b=+t.get("max"),A=new pr.a,E=[],P=[],j=t.isAnimationEnabled();d.diff(this._data).add(function(J){E[J]=new en.a({silent:!0}),P[J]=new en.a({silent:!0})}).update(function(J,dt){E[J]=h._titleEls[dt],P[J]=h._detailEls[dt]}).execute(),d.each(function(J){var dt=d.getItemModel(J),St=d.get(p,J),Ot=new pr.a,wt=l(Object(Ne.k)(St,[m,b],[0,1],!0)),zt=dt.getModel("title");if(zt.get("show")){var jt=zt.get("offsetCenter"),kt=f.cx+Object(Ne.o)(jt[0],f.r),te=f.cy+Object(Ne.o)(jt[1],f.r),ue=E[J];ue.attr({style:Object(Ar.c)(zt,{x:kt,y:te,text:d.getName(J),align:"center",verticalAlign:"middle"},{inheritColor:wt})}),Ot.add(ue)}var me=dt.getModel("detail");if(me.get("show")){var ve=me.get("offsetCenter"),Me=f.cx+Object(Ne.o)(ve[0],f.r),Ee=f.cy+Object(Ne.o)(ve[1],f.r),Oe=Object(Ne.o)(me.get("width"),f.r),we=Object(Ne.o)(me.get("height"),f.r),We=t.get(["progress","show"])?d.getItemVisual(J,"style").fill:wt,ue=P[J],$e=me.get("formatter");ue.attr({style:Object(Ar.c)(me,{x:Me,y:Ee,text:Bl(St,$e),width:isNaN(Oe)?null:Oe,height:isNaN(we)?null:we,align:"center",verticalAlign:"middle"},{inheritColor:We})}),Object(Ar.i)(ue,{normal:me},St,function(fr){return Bl(fr,$e)}),j&&Object(Ar.a)(ue,J,d,t,{getFormattedLabel:function(fr,Vr,wr,jr,Yn,bn){return Bl(bn?bn.interpolatedValue:St,$e)}}),Ot.add(ue)}A.add(Ot)}),this.group.add(A),this._titleEls=E,this._detailEls=P},r.type="gauge",r}(yn.a),Qy=lg,fv=function(a){Object(de.b)(r,a);function r(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=r.type,t.visualStyleAccessPath="itemStyle",t.useColorPaletteOnData=!0,t}return r.prototype.getInitialData=function(t,i){return Di(this,["value"])},r.type="series.gauge",r.defaultOption={zlevel:0,z:2,center:["50%","50%"],legendHoverLink:!0,radius:"75%",startAngle:225,endAngle:-45,clockwise:!0,min:0,max:100,splitNumber:10,axisLine:{show:!0,roundCap:!1,lineStyle:{color:[[1,"#E6EBF8"]],width:10}},progress:{show:!1,overlap:!0,width:10,roundCap:!1,clip:!0},splitLine:{show:!0,length:10,distance:10,lineStyle:{color:"#63677A",width:3,type:"solid"}},axisTick:{show:!0,splitNumber:5,length:6,distance:10,lineStyle:{color:"#63677A",width:1,type:"solid"}},axisLabel:{show:!0,distance:15,color:"#464646",fontSize:12},pointer:{icon:null,offsetCenter:[0,0],show:!0,length:"60%",width:6,keepAspect:!1},anchor:{show:!1,showAbove:!1,size:6,icon:"circle",offsetCenter:[0,0],keepAspect:!1,itemStyle:{color:"#fff",borderWidth:0,borderColor:"#5470c6"}},title:{show:!0,offsetCenter:[0,"20%"],color:"#464646",fontSize:16,valueAnimation:!1},detail:{show:!0,backgroundColor:"rgba(0,0,0,0)",borderWidth:0,borderColor:"#ccc",width:100,height:null,padding:[5,10],offsetCenter:[0,"40%"],color:"#464646",fontSize:30,fontWeight:"bold",lineHeight:30,valueAnimation:!1}},r}(Nr.a),cv=fv;function hv(a){a.registerChartView(Qy),a.registerSeriesModel(cv)}var vv=["itemStyle","opacity"],dv=function(a){Object(de.b)(r,a);function r(t,i){var s=a.call(this)||this,l=s,f=new pi.a,h=new en.a;return l.setTextContent(h),s.setTextGuideLine(f),s.updateData(t,i,!0),s}return r.prototype.updateData=function(t,i,s){var l=this,f=t.hostModel,h=t.getItemModel(i),d=t.getItemLayout(i),p=h.getModel("emphasis"),m=h.get(vv);m=m==null?1:m,l.useStyle(t.getItemVisual(i,"style")),l.style.lineJoin="round",s?(l.setShape({points:d.points}),l.style.opacity=0,Ze.initProps(l,{style:{opacity:m}},f,i)):Ze.updateProps(l,{style:{opacity:m},shape:{points:d.points}},f,i),Object(qe.I)(l,h),this._updateLabel(t,i),Object(qe.o)(this,p.get("focus"),p.get("blurScope"))},r.prototype._updateLabel=function(t,i){var s=this,l=this.getTextGuideLine(),f=s.getTextContent(),h=t.hostModel,d=t.getItemModel(i),p=t.getItemLayout(i),m=p.label,b=t.getItemVisual(i,"style"),A=b.fill;Object(Ar.h)(f,Object(Ar.f)(d),{labelFetcher:t.hostModel,labelDataIndex:i,defaultOpacity:b.opacity,defaultText:t.getName(i)},{normal:{align:m.textAlign,verticalAlign:m.verticalAlign}}),s.setTextConfig({local:!0,inside:!!m.inside,insideStroke:A,outsideFill:A});var E=m.linePoints;l.setShape({points:E}),s.textGuideLineConfig={anchor:E?new pa.a(E[0][0],E[0][1]):null},Ze.updateProps(f,{style:{x:m.x,y:m.y}},h,i),f.attr({rotation:m.rotation,originX:m.x,originY:m.y,z2:10}),Object(Fi.d)(s,Object(Fi.a)(d),{stroke:A})},r}(Hi.a),rs=function(a){Object(de.b)(r,a);function r(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=r.type,t.ignoreLabelLineUpdate=!0,t}return r.prototype.render=function(t,i,s){var l=t.getData(),f=this._data,h=this.group;l.diff(f).add(function(d){var p=new dv(l,d);l.setItemGraphicEl(d,p),h.add(p)}).update(function(d,p){var m=f.getItemGraphicEl(p);m.updateData(l,d),h.add(m),l.setItemGraphicEl(d,m)}).remove(function(d){var p=f.getItemGraphicEl(d);Ze.removeElementWithFadeOut(p,t,d)}).execute(),this._data=l},r.prototype.remove=function(){this.group.removeAll(),this._data=null},r.prototype.dispose=function(){},r.type="funnel",r}(yn.a),ug=rs,pv=function(a){Object(de.b)(r,a);function r(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=r.type,t.useColorPaletteOnData=!0,t}return r.prototype.init=function(t){a.prototype.init.apply(this,arguments),this.legendVisualProvider=new xn(y.bind(this.getData,this),y.bind(this.getRawData,this)),this._defaultLabelLine(t)},r.prototype.getInitialData=function(t,i){return Di(this,{coordDimensions:["value"],encodeDefaulter:y.curry(ma.d,this)})},r.prototype._defaultLabelLine=function(t){Object(sr.f)(t,"labelLine",["show"]);var i=t.labelLine,s=t.emphasis.labelLine;i.show=i.show&&t.label.show,s.show=s.show&&t.emphasis.label.show},r.prototype.getDataParams=function(t){var i=this.getData(),s=a.prototype.getDataParams.call(this,t),l=i.mapDimension("value"),f=i.getSum(l);return s.percent=f?+(i.get(l,t)/f*100).toFixed(2):0,s.$vars.push("percent"),s},r.type="series.funnel",r.defaultOption={zlevel:0,z:2,legendHoverLink:!0,left:80,top:60,right:80,bottom:60,minSize:"0%",maxSize:"100%",sort:"descending",orient:"vertical",gap:0,funnelAlign:"center",label:{show:!0,position:"outer"},labelLine:{show:!0,length:20,lineStyle:{width:1}},itemStyle:{borderColor:"#fff",borderWidth:1},emphasis:{label:{show:!0}},select:{itemStyle:{borderColor:"#212121"}}},r}(Nr.a),$i=pv;function Wa(a,r){return Tr.g(a.getBoxLayoutParams(),{width:r.getWidth(),height:r.getHeight()})}function gv(a,r){for(var t=a.mapDimension("value"),i=a.mapArray(t,function(d){return d}),s=[],l=r==="ascending",f=0,h=a.count();f<h;f++)s[f]=f;return typeof r=="function"?s.sort(r):r!=="none"&&s.sort(function(d,p){return l?i[d]-i[p]:i[p]-i[d]}),s}function mv(a){var r=a.hostModel,t=r.get("orient");a.each(function(i){var s=a.getItemModel(i),l=s.getModel("label"),f=l.get("position"),h=s.getModel("labelLine"),d=a.getItemLayout(i),p=d.points,m=f==="inner"||f==="inside"||f==="center"||f==="insideLeft"||f==="insideRight",b,A,E,P;if(m)f==="insideLeft"?(A=(p[0][0]+p[3][0])/2+5,E=(p[0][1]+p[3][1])/2,b="left"):f==="insideRight"?(A=(p[1][0]+p[2][0])/2-5,E=(p[1][1]+p[2][1])/2,b="right"):(A=(p[0][0]+p[1][0]+p[2][0]+p[3][0])/4,E=(p[0][1]+p[1][1]+p[2][1]+p[3][1])/4,b="center"),P=[[A,E],[A,E]];else{var j=void 0,J=void 0,dt=void 0,St=void 0,Ot=h.get("length");f==="left"?(j=(p[3][0]+p[0][0])/2,J=(p[3][1]+p[0][1])/2,dt=j-Ot,A=dt-5,b="right"):f==="right"?(j=(p[1][0]+p[2][0])/2,J=(p[1][1]+p[2][1])/2,dt=j+Ot,A=dt+5,b="left"):f==="top"?(j=(p[3][0]+p[0][0])/2,J=(p[3][1]+p[0][1])/2,St=J-Ot,E=St-5,b="center"):f==="bottom"?(j=(p[1][0]+p[2][0])/2,J=(p[1][1]+p[2][1])/2,St=J+Ot,E=St+5,b="center"):f==="rightTop"?(j=t==="horizontal"?p[3][0]:p[1][0],J=t==="horizontal"?p[3][1]:p[1][1],t==="horizontal"?(St=J-Ot,E=St-5,b="center"):(dt=j+Ot,A=dt+5,b="top")):f==="rightBottom"?(j=p[2][0],J=p[2][1],t==="horizontal"?(St=J+Ot,E=St+5,b="center"):(dt=j+Ot,A=dt+5,b="bottom")):f==="leftTop"?(j=p[0][0],J=t==="horizontal"?p[0][1]:p[1][1],t==="horizontal"?(St=J-Ot,E=St-5,b="center"):(dt=j-Ot,A=dt-5,b="right")):f==="leftBottom"?(j=t==="horizontal"?p[1][0]:p[3][0],J=t==="horizontal"?p[1][1]:p[2][1],t==="horizontal"?(St=J+Ot,E=St+5,b="center"):(dt=j-Ot,A=dt-5,b="right")):(j=(p[1][0]+p[2][0])/2,J=(p[1][1]+p[2][1])/2,t==="horizontal"?(St=J+Ot,E=St+5,b="center"):(dt=j+Ot,A=dt+5,b="left")),t==="horizontal"?(dt=j,A=dt):(St=J,E=St),P=[[j,J],[dt,St]]}d.label={linePoints:P,x:A,y:E,verticalAlign:"middle",textAlign:b,inside:m}})}function yv(a,r){a.eachSeriesByType("funnel",function(t){var i=t.getData(),s=i.mapDimension("value"),l=t.get("sort"),f=Wa(t,r),h=t.get("orient"),d=f.width,p=f.height,m=gv(i,l),b=f.x,A=f.y,E=h==="horizontal"?[Object(Ne.o)(t.get("minSize"),p),Object(Ne.o)(t.get("maxSize"),p)]:[Object(Ne.o)(t.get("minSize"),d),Object(Ne.o)(t.get("maxSize"),d)],P=i.getDataExtent(s),j=t.get("min"),J=t.get("max");j==null&&(j=Math.min(P[0],0)),J==null&&(J=P[1]);var dt=t.get("funnelAlign"),St=t.get("gap"),Ot=h==="horizontal"?d:p,wt=(Ot-St*(i.count()-1))/i.count(),zt=function(Oe,we){if(h==="horizontal"){var We=i.get(s,Oe)||0,$e=Object(Ne.k)(We,[j,J],E,!0),Je=void 0;switch(dt){case"top":Je=A;break;case"center":Je=A+(p-$e)/2;break;case"bottom":Je=A+(p-$e);break}return[[we,Je],[we,Je+$e]]}var fr=i.get(s,Oe)||0,Vr=Object(Ne.k)(fr,[j,J],E,!0),wr;switch(dt){case"left":wr=b;break;case"center":wr=b+(d-Vr)/2;break;case"right":wr=b+d-Vr;break}return[[wr,we],[wr+Vr,we]]};l==="ascending"&&(wt=-wt,St=-St,h==="horizontal"?b+=d:A+=p,m=m.reverse());for(var jt=0;jt<m.length;jt++){var kt=m[jt],te=m[jt+1],ue=i.getItemModel(kt);if(h==="horizontal"){var me=ue.get(["itemStyle","width"]);me==null?me=wt:(me=Object(Ne.o)(me,d),l==="ascending"&&(me=-me));var ve=zt(kt,b),Me=zt(te,b+me);b+=me+St,i.setItemLayout(kt,{points:ve.concat(Me.slice().reverse())})}else{var Ee=ue.get(["itemStyle","height"]);Ee==null?Ee=wt:(Ee=Object(Ne.o)(Ee,p),l==="ascending"&&(Ee=-Ee));var ve=zt(kt,A),Me=zt(te,A+Ee);A+=Ee+St,i.setItemLayout(kt,{points:ve.concat(Me.slice().reverse())})}}mv(i)})}function ns(a){a.registerChartView(ug),a.registerSeriesModel($i),a.registerLayout(yv),a.registerProcessor(da("funnel"))}var fg=.3,cg=function(a){Object(de.b)(r,a);function r(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=r.type,t._dataGroup=new pr.a,t._initialized=!1,t}return r.prototype.init=function(){this.group.add(this._dataGroup)},r.prototype.render=function(t,i,s,l){var f=this._dataGroup,h=t.getData(),d=this._data,p=t.coordinateSystem,m=p.dimensions,b=jl(t);h.diff(d).add(A).update(E).remove(P).execute();function A(J){var dt=bv(h,f,J,m,p);yc(dt,h,J,b)}function E(J,dt){var St=d.getItemGraphicEl(dt),Ot=xv(h,J,m,p);h.setItemGraphicEl(J,St),Ze.updateProps(St,{shape:{points:Ot}},t,J),yc(St,h,J,b)}function P(J){var dt=d.getItemGraphicEl(J);f.remove(dt)}if(!this._initialized){this._initialized=!0;var j=hg(p,t,function(){setTimeout(function(){f.removeClipPath()})});f.setClipPath(j)}this._data=h},r.prototype.incrementalPrepareRender=function(t,i,s){this._initialized=!0,this._data=null,this._dataGroup.removeAll()},r.prototype.incrementalRender=function(t,i,s){for(var l=i.getData(),f=i.coordinateSystem,h=f.dimensions,d=jl(i),p=t.start;p<t.end;p++){var m=bv(l,this._dataGroup,p,h,f);m.incremental=!0,yc(m,l,p,d)}},r.prototype.remove=function(){this._dataGroup&&this._dataGroup.removeAll(),this._data=null},r.type="parallel",r}(yn.a);function hg(a,r,t){var i=a.model,s=a.getRect(),l=new nn.a({shape:{x:s.x,y:s.y,width:s.width,height:s.height}}),f=i.get("layout")==="horizontal"?"width":"height";return l.setShape(f,0),Ze.initProps(l,{shape:{width:s.width,height:s.height}},r,t),l}function xv(a,r,t,i){for(var s=[],l=0;l<t.length;l++){var f=t[l],h=a.get(a.mapDimension(f),r);vg(h,i.getAxis(f).type)||s.push(i.dataToPoint(h,f))}return s}function bv(a,r,t,i,s){var l=xv(a,t,i,s),f=new pi.a({shape:{points:l},z2:10});return r.add(f),a.setItemGraphicEl(t,f),f}function jl(a){var r=a.get("smooth",!0);return r===!0&&(r=fg),r=Object(Ne.m)(r),Object(y.eqNaN)(r)&&(r=0),{smooth:r}}function yc(a,r,t,i){a.useStyle(r.getItemVisual(t,"style")),a.style.fill=null,a.setShape("smooth",i.smooth);var s=r.getItemModel(t),l=s.getModel("emphasis");Object(qe.I)(a,s,"lineStyle"),Object(qe.o)(a,l.get("focus"),l.get("blurScope"))}function vg(a,r){return r==="category"?a==null:a==null||isNaN(a)}var dg=cg,pg=function(a){Object(de.b)(r,a);function r(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=r.type,t.visualStyleAccessPath="lineStyle",t.visualDrawType="stroke",t}return r.prototype.getInitialData=function(t,i){return Object(_r.a)(this.getSource(),this,{useEncodeDefaulter:Object(y.bind)(gg,null,this)})},r.prototype.getRawIndicesByActiveState=function(t){var i=this.coordinateSystem,s=this.getData(),l=[];return i.eachActiveState(s,function(f,h){t===f&&l.push(s.getRawIndex(h))}),l},r.type="series.parallel",r.dependencies=["parallel"],r.defaultOption={zlevel:0,z:2,coordinateSystem:"parallel",parallelIndex:0,label:{show:!1},inactiveOpacity:.05,activeOpacity:1,lineStyle:{width:1,opacity:.45,type:"solid"},emphasis:{label:{show:!1}},progressive:500,smooth:!1,animationEasing:"linear"},r}(Nr.a);function gg(a){var r=a.ecModel.getComponent("parallel",a.get("parallelIndex"));if(!!r){var t={};return Object(y.each)(r.dimensions,function(i){var s=mg(i);t[i]=s}),t}}function mg(a){return+a.replace("dim","")}var yg=pg,xg=["lineStyle","opacity"],Sv={seriesType:"parallel",reset:function(a,r){var t=a.coordinateSystem,i={normal:a.get(["lineStyle","opacity"]),active:a.get("activeOpacity"),inactive:a.get("inactiveOpacity")};return{progress:function(s,l){t.eachActiveState(l,function(f,h){var d=i[f];if(f==="normal"&&l.hasItemOption){var p=l.getItemModel(h).get(xg,!0);p!=null&&(d=p)}var m=l.ensureUniqueItemVisual(h,"style");m.opacity=d},s.start,s.end)}}}},bg=Sv;function Sg(a){_g(a),Tg(a)}function _g(a){if(!a.parallel){var r=!1;y.each(a.series,function(t){t&&t.type==="parallel"&&(r=!0)}),r&&(a.parallel=[{}])}}function Tg(a){var r=sr.r(a.parallelAxis);y.each(r,function(t){if(!!y.isObject(t)){var i=t.parallelIndex||0,s=sr.r(a.parallel)[i];s&&s.parallelAxisDefault&&y.merge(t,s.parallelAxisDefault,!1)}})}var xc=5,_v=function(a){Object(de.b)(r,a);function r(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=r.type,t}return r.prototype.render=function(t,i,s){this._model=t,this._api=s,this._handlers||(this._handlers={},Object(y.each)(Og,function(l,f){s.getZr().on(f,this._handlers[f]=Object(y.bind)(l,this))},this)),Object(ca.b)(this,"_throttledDispatchExpand",t.get("axisExpandRate"),"fixRate")},r.prototype.dispose=function(t,i){Object(y.each)(this._handlers,function(s,l){i.getZr().off(l,s)}),this._handlers=null},r.prototype._throttledDispatchExpand=function(t){this._dispatchExpand(t)},r.prototype._dispatchExpand=function(t){t&&this._api.dispatchAction(Object(y.extend)({type:"parallelAxisExpand"},t))},r.type="parallel",r}(Vn.a),Og={mousedown:function(a){bc(this,"click")&&(this._mouseDownPoint=[a.offsetX,a.offsetY])},mouseup:function(a){var r=this._mouseDownPoint;if(bc(this,"click")&&r){var t=[a.offsetX,a.offsetY],i=Math.pow(r[0]-t[0],2)+Math.pow(r[1]-t[1],2);if(i>xc)return;var s=this._model.coordinateSystem.getSlidedAxisExpandWindow([a.offsetX,a.offsetY]);s.behavior!=="none"&&this._dispatchExpand({axisExpandWindow:s.axisExpandWindow})}this._mouseDownPoint=null},mousemove:function(a){if(!(this._mouseDownPoint||!bc(this,"mousemove"))){var r=this._model,t=r.coordinateSystem.getSlidedAxisExpandWindow([a.offsetX,a.offsetY]),i=t.behavior;i==="jump"&&this._throttledDispatchExpand.debounceNextCall(r.get("axisExpandDebounce")),this._throttledDispatchExpand(i==="none"?null:{axisExpandWindow:t.axisExpandWindow,animation:i==="jump"?null:{duration:0}})}}};function bc(a,r){var t=a._model;return t.get("axisExpandable")&&t.get("axisExpandTriggerOn")===r}var Ag=_v,Mg=function(a){Object(de.b)(r,a);function r(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=r.type,t}return r.prototype.init=function(){a.prototype.init.apply(this,arguments),this.mergeOption({})},r.prototype.mergeOption=function(t){var i=this.option;t&&y.merge(i,t,!0),this._initDimensions()},r.prototype.contains=function(t,i){var s=t.get("parallelIndex");return s!=null&&i.getComponent("parallel",s)===this},r.prototype.setAxisExpand=function(t){y.each(["axisExpandable","axisExpandCenter","axisExpandCount","axisExpandWidth","axisExpandWindow"],function(i){t.hasOwnProperty(i)&&(this.option[i]=t[i])},this)},r.prototype._initDimensions=function(){var t=this.dimensions=[],i=this.parallelAxisIndex=[],s=y.filter(this.ecModel.queryComponents({mainType:"parallelAxis"}),function(l){return(l.get("parallelIndex")||0)===this.componentIndex},this);y.each(s,function(l){t.push("dim"+l.get("dim")),i.push(l.componentIndex)})},r.type="parallel",r.dependencies=["parallelAxis"],r.layoutMode="box",r.defaultOption={zlevel:0,z:0,left:80,top:60,right:80,bottom:60,layout:"horizontal",axisExpandable:!1,axisExpandCenter:null,axisExpandCount:0,axisExpandWidth:50,axisExpandRate:17,axisExpandDebounce:50,axisExpandSlideTriggerArea:[-.15,.05,.4],axisExpandTriggerOn:"click",parallelAxisDefault:null},r}(An.a),Dg=Mg,Cg=function(a){Object(de.b)(r,a);function r(t,i,s,l,f){var h=a.call(this,t,i,s)||this;return h.type=l||"value",h.axisIndex=f,h}return r.prototype.isHorizontal=function(){return this.coordinateSystem.getModel().get("layout")!=="horizontal"},r}(Ft.a),Tv=Cg;function Ya(a,r,t,i,s,l){a=a||0;var f=t[1]-t[0];if(s!=null&&(s=Yi(s,[0,f])),l!=null&&(l=Math.max(l,s!=null?s:0)),i==="all"){var h=Math.abs(r[1]-r[0]);h=Yi(h,[0,f]),s=l=Yi(h,[s,l]),i=0}r[0]=Yi(r[0],t),r[1]=Yi(r[1],t);var d=Sc(r,i);r[i]+=a;var p=s||0,m=t.slice();d.sign<0?m[0]+=p:m[1]-=p,r[i]=Yi(r[i],m);var b;return b=Sc(r,i),s!=null&&(b.sign!==d.sign||b.span<s)&&(r[1-i]=r[i]+d.sign*s),b=Sc(r,i),l!=null&&b.span>l&&(r[1-i]=r[i]+b.sign*l),r}function Sc(a,r){var t=a[r]-a[1-r];return{span:Math.abs(t),sign:t>0?-1:t<0?1:r?-1:1}}function Yi(a,r){return Math.min(r[1]!=null?r[1]:Infinity,Math.max(r[0]!=null?r[0]:-Infinity,a))}var Fu=y.each,Ov=Math.min,_c=Math.max,Eg=Math.floor,Lg=Math.ceil,Xa=Ne.u,zl=Math.PI,Tc=function(){function a(r,t,i){this.type="parallel",this._axesMap=y.createHashMap(),this._axesLayout={},this.dimensions=r.dimensions,this._model=r,this._init(r,t,i)}return a.prototype._init=function(r,t,i){var s=r.dimensions,l=r.parallelAxisIndex;Fu(s,function(f,h){var d=l[h],p=t.getComponent("parallelAxis",d),m=this._axesMap.set(f,new Tv(f,Bn.a(p),[0,0],p.get("type"),d)),b=m.type==="category";m.onBand=b&&p.get("boundaryGap"),m.inverse=p.get("inverse"),p.axis=m,m.model=p,m.coordinateSystem=p.coordinateSystem=this},this)},a.prototype.update=function(r,t){this._updateAxesFromSeries(this._model,r)},a.prototype.containPoint=function(r){var t=this._makeLayoutInfo(),i=t.axisBase,s=t.layoutBase,l=t.pixelDimIndex,f=r[1-l],h=r[l];return f>=i&&f<=i+t.axisLength&&h>=s&&h<=s+t.layoutLength},a.prototype.getModel=function(){return this._model},a.prototype._updateAxesFromSeries=function(r,t){t.eachSeries(function(i){if(!!r.contains(i,t)){var s=i.getData();Fu(this.dimensions,function(l){var f=this._axesMap.get(l);f.scale.unionExtentFromData(s,s.mapDimension(l)),Bn.i(f.scale,f.model)},this)}},this)},a.prototype.resize=function(r,t){this._rect=Tr.g(r.getBoxLayoutParams(),{width:t.getWidth(),height:t.getHeight()}),this._layoutAxes()},a.prototype.getRect=function(){return this._rect},a.prototype._makeLayoutInfo=function(){var r=this._model,t=this._rect,i=["x","y"],s=["width","height"],l=r.get("layout"),f=l==="horizontal"?0:1,h=t[s[f]],d=[0,h],p=this.dimensions.length,m=xi(r.get("axisExpandWidth"),d),b=xi(r.get("axisExpandCount")||0,[0,p]),A=r.get("axisExpandable")&&p>3&&p>b&&b>1&&m>0&&h>0,E=r.get("axisExpandWindow"),P;if(E)P=xi(E[1]-E[0],d),E[1]=E[0]+P;else{P=xi(m*(b-1),d);var j=r.get("axisExpandCenter")||Eg(p/2);E=[m*j-P/2],E[1]=E[0]+P}var J=(h-P)/(p-b);J<3&&(J=0);var dt=[Eg(Xa(E[0]/m,1))+1,Lg(Xa(E[1]/m,1))-1],St=J/m*E[0];return{layout:l,pixelDimIndex:f,layoutBase:t[i[f]],layoutLength:h,axisBase:t[i[1-f]],axisLength:t[s[1-f]],axisExpandable:A,axisExpandWidth:m,axisCollapseWidth:J,axisExpandWindow:E,axisCount:p,winInnerIndices:dt,axisExpandWindow0Pos:St}},a.prototype._layoutAxes=function(){var r=this._rect,t=this._axesMap,i=this.dimensions,s=this._makeLayoutInfo(),l=s.layout;t.each(function(f){var h=[0,s.axisLength],d=f.inverse?1:0;f.setExtent(h[d],h[1-d])}),Fu(i,function(f,h){var d=(s.axisExpandable?Oc:Gs)(h,s),p={horizontal:{x:d.position,y:s.axisLength},vertical:{x:0,y:d.position}},m={horizontal:zl/2,vertical:0},b=[p[l].x+r.x,p[l].y+r.y],A=m[l],E=vn.create();vn.rotate(E,E,A),vn.translate(E,E,b),this._axesLayout[f]={position:b,rotation:A,transform:E,axisNameAvailableWidth:d.axisNameAvailableWidth,axisLabelShow:d.axisLabelShow,nameTruncateMaxWidth:d.nameTruncateMaxWidth,tickDirection:1,labelDirection:1}},this)},a.prototype.getAxis=function(r){return this._axesMap.get(r)},a.prototype.dataToPoint=function(r,t){return this.axisCoordToPoint(this._axesMap.get(t).dataToCoord(r),t)},a.prototype.eachActiveState=function(r,t,i,s){i==null&&(i=0),s==null&&(s=r.count());var l=this._axesMap,f=this.dimensions,h=[],d=[];y.each(f,function(J){h.push(r.mapDimension(J)),d.push(l.get(J).model)});for(var p=this.hasAxisBrushed(),m=i;m<s;m++){var b=void 0;if(!p)b="normal";else{b="active";for(var A=r.getValues(h,m),E=0,P=f.length;E<P;E++){var j=d[E].getActiveState(A[E]);if(j==="inactive"){b="inactive";break}}}t(b,m)}},a.prototype.hasAxisBrushed=function(){for(var r=this.dimensions,t=this._axesMap,i=!1,s=0,l=r.length;s<l;s++)t.get(r[s]).model.getActiveState()!=="normal"&&(i=!0);return i},a.prototype.axisCoordToPoint=function(r,t){var i=this._axesLayout[t];return Ze.applyTransform([r,0],i.transform)},a.prototype.getAxisLayout=function(r){return y.clone(this._axesLayout[r])},a.prototype.getSlidedAxisExpandWindow=function(r){var t=this._makeLayoutInfo(),i=t.pixelDimIndex,s=t.axisExpandWindow.slice(),l=s[1]-s[0],f=[0,t.axisExpandWidth*(t.axisCount-1)];if(!this.containPoint(r))return{behavior:"none",axisExpandWindow:s};var h=r[i]-t.layoutBase-t.axisExpandWindow0Pos,d,p="slide",m=t.axisCollapseWidth,b=this._model.get("axisExpandSlideTriggerArea"),A=b[0]!=null;if(m)A&&m&&h<l*b[0]?(p="jump",d=h-l*b[2]):A&&m&&h>l*(1-b[0])?(p="jump",d=h-l*(1-b[2])):(d=h-l*b[1])>=0&&(d=h-l*(1-b[1]))<=0&&(d=0),d*=t.axisExpandWidth/m,d?Ya(d,s,f,"all"):p="none";else{var E=s[1]-s[0],P=f[1]*h/E;s=[_c(0,P-E/2)],s[1]=Ov(f[1],s[0]+E),s[0]=s[1]-E}return{axisExpandWindow:s,behavior:p}},a}();function xi(a,r){return Ov(_c(a,r[0]),r[1])}function Gs(a,r){var t=r.layoutLength/(r.axisCount-1);return{position:t*a,axisNameAvailableWidth:t,axisLabelShow:!0}}function Oc(a,r){var t=r.layoutLength,i=r.axisExpandWidth,s=r.axisCount,l=r.axisCollapseWidth,f=r.winInnerIndices,h,d=l,p=!1,m;return a<f[0]?(h=a*l,m=l):a<=f[1]?(h=r.axisExpandWindow0Pos+a*i-r.axisExpandWindow[0],d=i,p=!0):(h=t-(s-1-a)*l,m=l),{position:h,axisNameAvailableWidth:d,axisLabelShow:p,nameTruncateMaxWidth:m}}var Vu=Tc;function Fl(a,r){var t=[];return a.eachComponent("parallel",function(i,s){var l=new Vu(i,a,r);l.name="parallel_"+s,l.resize(i,r),i.coordinateSystem=l,l.model=i,t.push(l)}),a.eachSeries(function(i){if(i.get("coordinateSystem")==="parallel"){var s=i.getReferringComponents("parallel",sr.b).models[0];i.coordinateSystem=s.coordinateSystem}}),t}var Pg={create:Fl},Av=Pg,Mv=function(a){Object(de.b)(r,a);function r(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=r.type,t.activeIntervals=[],t}return r.prototype.getAreaSelectStyle=function(){return Object(Lh.a)([["fill","color"],["lineWidth","borderWidth"],["stroke","borderColor"],["width","width"],["opacity","opacity"]])(this.getModel("areaSelectStyle"))},r.prototype.setActiveIntervals=function(t){var i=this.activeIntervals=y.clone(t);if(i)for(var s=i.length-1;s>=0;s--)Ne.b(i[s])},r.prototype.getActiveState=function(t){var i=this.activeIntervals;if(!i.length)return"normal";if(t==null||isNaN(+t))return"inactive";if(i.length===1){var s=i[0];if(s[0]<=t&&t<=s[1])return"active"}else for(var l=0,f=i.length;l<f;l++)if(i[l][0]<=t&&t<=i[l][1])return"active";return"inactive"},r}(An.a);y.mixin(Mv,hn.a);var Dv=Mv,is=!0,Us=Math.min,ho=Math.max,wg=Math.pow,vo=1e4,Cv=6,Ig=6,Ev="globalPan",Rg={w:[0,0],e:[0,1],n:[1,0],s:[1,1]},Ng={w:"ew",e:"ew",n:"ns",s:"ns",ne:"nesw",sw:"nesw",nw:"nwse",se:"nwse"},Hs={brushStyle:{lineWidth:2,stroke:"rgba(210,219,238,0.3)",fill:"#D2DBEE"},transformable:!0,brushMode:"single",removeOnClick:!1},Bg=0,jg=function(a){Object(de.b)(r,a);function r(t){var i=a.call(this)||this;return i._track=[],i._covers=[],i._handlers={},i._zr=t,i.group=new pr.a,i._uid="brushController_"+Bg++,Object(y.each)(Gg,function(s,l){this._handlers[l]=Object(y.bind)(s,this)},i),i}return r.prototype.enableBrush=function(t){return this._brushType&&this._doDisableBrush(),t.brushType&&this._doEnableBrush(t),this},r.prototype._doEnableBrush=function(t){var i=this._zr;this._enableGlobalPan||du(i,Ev,this._uid),Object(y.each)(this._handlers,function(s,l){i.on(l,s)}),this._brushType=t.brushType,this._brushOption=Object(y.merge)(Object(y.clone)(Hs),t,!0)},r.prototype._doDisableBrush=function(){var t=this._zr;fp(t,Ev,this._uid),Object(y.each)(this._handlers,function(i,s){t.off(s,i)}),this._brushType=this._brushOption=null},r.prototype.setPanels=function(t){if(t&&t.length){var i=this._panels={};Object(y.each)(t,function(s){i[s.panelId]=Object(y.clone)(s)})}else this._panels=null;return this},r.prototype.mount=function(t){t=t||{},this._enableGlobalPan=t.enableGlobalPan;var i=this.group;return this._zr.add(i),i.attr({x:t.x||0,y:t.y||0,rotation:t.rotation||0,scaleX:t.scaleX||1,scaleY:t.scaleY||1}),this._transform=i.getLocalTransform(),this},r.prototype.updateCovers=function(t){t=Object(y.map)(t,function(A){return Object(y.merge)(Object(y.clone)(Hs),A,!0)});var i="\0-brush-index-",s=this._covers,l=this._covers=[],f=this,h=this._creatingCover;return new Ai.a(s,t,p,d).add(m).update(m).remove(b).execute(),this;function d(A,E){return(A.id!=null?A.id:i+E)+"-"+A.brushType}function p(A,E){return d(A.__brushOption,E)}function m(A,E){var P=t[A];if(E!=null&&s[E]===h)l[A]=s[E];else{var j=l[A]=E!=null?(s[E].__brushOption=P,s[E]):Pv(f,Lv(f,P));Ac(f,j)}}function b(A){s[A]!==h&&f.group.remove(s[A])}},r.prototype.unmount=function(){return this.enableBrush(!1),Uu(this),this._zr.remove(this.group),this},r.prototype.dispose=function(){this.unmount(),this.off()},r}(ah.a);function Lv(a,r){var t=Wu[r.brushType].createCover(a,r);return t.__brushOption=r,Iv(t,r),a.group.add(t),t}function Pv(a,r){var t=Mc(r);return t.endCreating&&(t.endCreating(a,r),Iv(r,r.__brushOption)),r}function wv(a,r){var t=r.__brushOption;Mc(r).updateCoverShape(a,r,t.range,t)}function Iv(a,r){var t=r.z;t==null&&(t=vo),a.traverse(function(i){i.z=t,i.z2=t})}function Ac(a,r){Mc(r).updateCommon(a,r),wv(a,r)}function Mc(a){return Wu[a.__brushOption.brushType]}function Dc(a,r,t){var i=a._panels;if(!i)return is;var s,l=a._transform;return Object(y.each)(i,function(f){f.isTargetByCursor(r,t,l)&&(s=f)}),s}function Gu(a,r){var t=a._panels;if(!t)return is;var i=r.__brushOption.panelId;return i!=null?t[i]:is}function Uu(a){var r=a._covers,t=r.length;return Object(y.each)(r,function(i){a.group.remove(i)},a),r.length=0,!!t}function as(a,r){var t=Object(y.map)(a._covers,function(i){var s=i.__brushOption,l=Object(y.clone)(s.range);return{brushType:s.brushType,panelId:s.panelId,range:l}});a.trigger("brush",{areas:t,isEnd:!!r.isEnd,removeOnClick:!!r.removeOnClick})}function zg(a){var r=a._track;if(!r.length)return!1;var t=r[r.length-1],i=r[0],s=t[0]-i[0],l=t[1]-i[1],f=wg(s*s+l*l,.5);return f>Cv}function Rv(a){var r=a.length-1;return r<0&&(r=0),[a[0],a[r]]}function Nv(a,r,t,i){var s=new pr.a;return s.add(new nn.a({name:"main",style:po(t),silent:!0,draggable:!0,cursor:"move",drift:Object(y.curry)(zv,a,r,s,["n","s","w","e"]),ondragend:Object(y.curry)(as,r,{isEnd:!0})})),Object(y.each)(i,function(l){s.add(new nn.a({name:l.join(""),style:{opacity:0},draggable:!0,silent:!0,invisible:!0,drift:Object(y.curry)(zv,a,r,s,l),ondragend:Object(y.curry)(as,r,{isEnd:!0})}))}),s}function Hu(a,r,t,i){var s=i.brushStyle.lineWidth||0,l=ho(s,Ig),f=t[0][0],h=t[1][0],d=f-s/2,p=h-s/2,m=t[0][1],b=t[1][1],A=m-l+s/2,E=b-l+s/2,P=m-f,j=b-h,J=P+s,dt=j+s;aa(a,r,"main",f,h,P,j),i.transformable&&(aa(a,r,"w",d,p,l,dt),aa(a,r,"e",A,p,l,dt),aa(a,r,"n",d,p,J,l),aa(a,r,"s",d,E,J,l),aa(a,r,"nw",d,p,l,l),aa(a,r,"ne",A,p,l,l),aa(a,r,"sw",d,E,l,l),aa(a,r,"se",A,E,l,l))}function Cc(a,r){var t=r.__brushOption,i=t.transformable,s=r.childAt(0);s.useStyle(po(t)),s.attr({silent:!i,cursor:i?"move":"default"}),Object(y.each)([["w"],["e"],["n"],["s"],["s","e"],["s","w"],["n","e"],["n","w"]],function(l){var f=r.childOfName(l.join("")),h=l.length===1?Ws(a,l[0]):jv(a,l);f&&f.attr({silent:!i,invisible:!i,cursor:i?Ng[h]+"-resize":null})})}function aa(a,r,t,i,s,l,f){var h=r.childOfName(t);h&&h.setShape(Fg(Gl(a,r,[[i,s],[i+l,s+f]])))}function po(a){return Object(y.defaults)({strokeNoScale:!0},a.brushStyle)}function Bv(a,r,t,i){var s=[Us(a,t),Us(r,i)],l=[ho(a,t),ho(r,i)];return[[s[0],l[0]],[s[1],l[1]]]}function Vl(a){return Ze.getTransform(a.group)}function Ws(a,r){var t={w:"left",e:"right",n:"top",s:"bottom"},i={left:"w",right:"e",top:"n",bottom:"s"},s=Ze.transformDirection(t[r],Vl(a));return i[s]}function jv(a,r){var t=[Ws(a,r[0]),Ws(a,r[1])];return(t[0]==="e"||t[0]==="w")&&t.reverse(),t.join("")}function zv(a,r,t,i,s,l){var f=t.__brushOption,h=a.toRectRange(f.range),d=Fv(r,s,l);Object(y.each)(i,function(p){var m=Rg[p];h[m[0]][m[1]]+=d[m[0]]}),f.range=a.fromRectRange(Bv(h[0][0],h[1][0],h[0][1],h[1][1])),Ac(r,t),as(r,{isEnd:!1})}function Rn(a,r,t,i){var s=r.__brushOption.range,l=Fv(a,t,i);Object(y.each)(s,function(f){f[0]+=l[0],f[1]+=l[1]}),Ac(a,r),as(a,{isEnd:!1})}function Fv(a,r,t){var i=a.group,s=i.transformCoordToLocal(r,t),l=i.transformCoordToLocal(0,0);return[s[0]-l[0],s[1]-l[1]]}function Gl(a,r,t){var i=Gu(a,r);return i&&i!==is?i.clipPath(t,a._transform):Object(y.clone)(t)}function Fg(a){var r=Us(a[0][0],a[1][0]),t=Us(a[0][1],a[1][1]),i=ho(a[0][0],a[1][0]),s=ho(a[0][1],a[1][1]);return{x:r,y:t,width:i-r,height:s-t}}function Vg(a,r,t){if(!(!a._brushType||Ug(a,r.offsetX,r.offsetY))){var i=a._zr,s=a._covers,l=Dc(a,r,t);if(!a._dragging)for(var f=0;f<s.length;f++){var h=s[f].__brushOption;if(l&&(l===is||h.panelId===l.panelId)&&Wu[h.brushType].contain(s[f],t[0],t[1]))return}l&&i.setCursorStyle("crosshair")}}function Ec(a){var r=a.event;r.preventDefault&&r.preventDefault()}function Lc(a,r,t){return a.childOfName("main").contain(r,t)}function Vv(a,r,t,i){var s=a._creatingCover,l=a._creatingPanel,f=a._brushOption,h;if(a._track.push(t.slice()),zg(a)||s){if(l&&!s){f.brushMode==="single"&&Uu(a);var d=Object(y.clone)(f);d.brushType=Gv(d.brushType,l),d.panelId=l===is?null:l.panelId,s=a._creatingCover=Lv(a,d),a._covers.push(s)}if(s){var p=Wu[Gv(a._brushType,l)],m=s.__brushOption;m.range=p.getCreatingRange(Gl(a,s,a._track)),i&&(Pv(a,s),p.updateCommon(a,s)),wv(a,s),h={isEnd:i}}}else i&&f.brushMode==="single"&&f.removeOnClick&&Dc(a,r,t)&&Uu(a)&&(h={isEnd:i,removeOnClick:!0});return h}function Gv(a,r){return a==="auto"?r.defaultBrushType:a}var Gg={mousedown:function(a){if(this._dragging)Uv(this,a);else if(!a.target||!a.target.draggable){Ec(a);var r=this.group.transformCoordToLocal(a.offsetX,a.offsetY);this._creatingCover=null;var t=this._creatingPanel=Dc(this,a,r);t&&(this._dragging=!0,this._track=[r.slice()])}},mousemove:function(a){var r=a.offsetX,t=a.offsetY,i=this.group.transformCoordToLocal(r,t);if(Vg(this,a,i),this._dragging){Ec(a);var s=Vv(this,a,i,!1);s&&as(this,s)}},mouseup:function(a){Uv(this,a)}};function Uv(a,r){if(a._dragging){Ec(r);var t=r.offsetX,i=r.offsetY,s=a.group.transformCoordToLocal(t,i),l=Vv(a,r,s,!0);a._dragging=!1,a._track=[],a._creatingCover=null,l&&as(a,l)}}function Ug(a,r,t){var i=a._zr;return r<0||r>i.getWidth()||t<0||t>i.getHeight()}var Wu={lineX:Hv(0),lineY:Hv(1),rect:{createCover:function(a,r){function t(i){return i}return Nv({toRectRange:t,fromRectRange:t},a,r,[["w"],["e"],["n"],["s"],["s","e"],["s","w"],["n","e"],["n","w"]])},getCreatingRange:function(a){var r=Rv(a);return Bv(r[1][0],r[1][1],r[0][0],r[0][1])},updateCoverShape:function(a,r,t,i){Hu(a,r,t,i)},updateCommon:Cc,contain:Lc},polygon:{createCover:function(a,r){var t=new pr.a;return t.add(new pi.a({name:"main",style:po(r),silent:!0})),t},getCreatingRange:function(a){return a},endCreating:function(a,r){r.remove(r.childAt(0)),r.add(new Hi.a({name:"main",draggable:!0,drift:Object(y.curry)(Rn,a,r),ondragend:Object(y.curry)(as,a,{isEnd:!0})}))},updateCoverShape:function(a,r,t,i){r.childAt(0).setShape({points:Gl(a,r,t)})},updateCommon:Cc,contain:Lc}};function Hv(a){return{createCover:function(r,t){return Nv({toRectRange:function(i){var s=[i,[0,100]];return a&&s.reverse(),s},fromRectRange:function(i){return i[a]}},r,t,[[["w"],["e"]],[["n"],["s"]]][a])},getCreatingRange:function(r){var t=Rv(r),i=Us(t[0][a],t[1][a]),s=ho(t[0][a],t[1][a]);return[i,s]},updateCoverShape:function(r,t,i,s){var l,f=Gu(r,t);if(f!==is&&f.getLinearBrushOtherExtent)l=f.getLinearBrushOtherExtent(a);else{var h=r._zr;l=[0,[h.getWidth(),h.getHeight()][1-a]]}var d=[i,l];a&&d.reverse(),Hu(r,t,d,s)},updateCommon:Cc,contain:Lc}}var Ul=jg;function Wv(a){return a=Xu(a),function(r){return Ze.clipPointsByRect(r,a)}}function Yv(a,r){return a=Xu(a),function(t){var i=r!=null?r:t,s=i?a.width:a.height,l=i?a.x:a.y;return[l,l+(s||0)]}}function Yu(a,r,t){var i=Xu(a);return function(s,l){return i.contain(l[0],l[1])&&!pu(s,r,t)}}function Xu(a){return ai.a.create(a)}var Xv=["axisLine","axisTickLabel","axisName"],Hg=function(a){Object(de.b)(r,a);function r(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=r.type,t}return r.prototype.init=function(t,i){a.prototype.init.apply(this,arguments),(this._brushController=new Ul(i.getZr())).on("brush",y.bind(this._onBrush,this))},r.prototype.render=function(t,i,s,l){if(!Wg(t,i,l)){this.axisModel=t,this.api=s,this.group.removeAll();var f=this._axisGroup;if(this._axisGroup=new pr.a,this.group.add(this._axisGroup),!!t.get("show")){var h=Yg(t,i),d=h.coordinateSystem,p=t.getAreaSelectStyle(),m=p.width,b=t.axis.dim,A=d.getAxisLayout(b),E=y.extend({strokeContainThreshold:m},A),P=new Vi(t,E);y.each(Xv,P.add,P),this._axisGroup.add(P.getGroup()),this._refreshBrushController(E,p,t,h,m,s),Ze.groupTransition(f,this._axisGroup,t)}}},r.prototype._refreshBrushController=function(t,i,s,l,f,h){var d=s.axis.getExtent(),p=d[1]-d[0],m=Math.min(30,Math.abs(p)*.1),b=ai.a.create({x:d[0],y:-f/2,width:p,height:f});b.x-=m,b.width+=2*m,this._brushController.mount({enableGlobalPan:!0,rotation:t.rotation,x:t.position[0],y:t.position[1]}).setPanels([{panelId:"pl",clipPath:Wv(b),isTargetByCursor:Yu(b,h,l),getLinearBrushOtherExtent:Yv(b,0)}]).enableBrush({brushType:"lineX",brushStyle:i,removeOnClick:!0}).updateCovers(Pc(s))},r.prototype._onBrush=function(t){var i=t.areas,s=this.axisModel,l=s.axis,f=y.map(i,function(h){return[l.coordToData(h.range[0],!0),l.coordToData(h.range[1],!0)]});(!s.option.realtime===t.isEnd||t.removeOnClick)&&this.api.dispatchAction({type:"axisAreaSelect",parallelAxisId:s.id,intervals:f})},r.prototype.dispose=function(){this._brushController.dispose()},r.type="parallelAxis",r}(Vn.a);function Wg(a,r,t){return t&&t.type==="axisAreaSelect"&&r.findComponents({mainType:"parallelAxis",query:t})[0]===a}function Pc(a){var r=a.axis;return y.map(a.activeIntervals,function(t){return{brushType:"lineX",panelId:"pl",range:[r.dataToCoord(t[0],!0),r.dataToCoord(t[1],!0)]}})}function Yg(a,r){return r.getComponent("parallel",a.get("parallelIndex"))}var Xg=Hg,Zv={type:"axisAreaSelect",event:"axisAreaSelected"};function Kv(a){a.registerAction(Zv,function(r,t){t.eachComponent({mainType:"parallelAxis",query:r},function(i){i.axis.model.setActiveIntervals(r.intervals)})}),a.registerAction("parallelAxisExpand",function(r,t){t.eachComponent({mainType:"parallel",query:r},function(i){i.setAxisExpand(r)})})}var Zg={type:"value",areaSelectStyle:{width:20,borderWidth:1,borderColor:"rgba(160,197,232)",color:"rgba(160,197,232)",opacity:.3},realtime:!0,z:10};function Zu(a){a.registerComponentView(Ag),a.registerComponentModel(Dg),a.registerCoordinateSystem("parallel",Av),a.registerPreprocessor(Sg),a.registerComponentModel(Dv),a.registerComponentView(Xg),Go(a,"parallel",Dv,Zg),Kv(a)}function Hl(a){Object(B.a)(Zu),a.registerChartView(dg),a.registerSeriesModel(yg),a.registerVisual(a.PRIORITY.VISUAL.BRUSH,bg)}var Kg=function(){function a(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.cpx1=0,this.cpy1=0,this.cpx2=0,this.cpy2=0,this.extent=0}return a}(),kg=function(a){Object(de.b)(r,a);function r(t){return a.call(this,t)||this}return r.prototype.getDefaultShape=function(){return new Kg},r.prototype.buildPath=function(t,i){var s=i.extent;t.moveTo(i.x1,i.y1),t.bezierCurveTo(i.cpx1,i.cpy1,i.cpx2,i.cpy2,i.x2,i.y2),i.orient==="vertical"?(t.lineTo(i.x2+s,i.y2),t.bezierCurveTo(i.cpx2+s,i.cpy2,i.cpx1+s,i.cpy1,i.x1+s,i.y1)):(t.lineTo(i.x2,i.y2+s),t.bezierCurveTo(i.cpx2,i.cpy2+s,i.cpx1,i.cpy1+s,i.x1,i.y1+s)),t.closePath()},r.prototype.highlight=function(){Object(qe.r)(this)},r.prototype.downplay=function(){Object(qe.C)(this)},r}(ot.b),Jn=function(a){Object(de.b)(r,a);function r(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=r.type,t._focusAdjacencyDisabled=!1,t}return r.prototype.render=function(t,i,s){var l=this,f=t.getGraph(),h=this.group,d=t.layoutInfo,p=d.width,m=d.height,b=t.getData(),A=t.getData("edge"),E=t.get("orient");this._model=t,h.removeAll(),h.x=d.x,h.y=d.y,f.eachEdge(function(P){var j=new kg,J=Object(Ur.a)(j);J.dataIndex=P.dataIndex,J.seriesIndex=t.seriesIndex,J.dataType="edge";var dt=P.getModel(),St=dt.getModel("lineStyle"),Ot=St.get("curveness"),wt=P.node1.getLayout(),zt=P.node1.getModel(),jt=zt.get("localX"),kt=zt.get("localY"),te=P.node2.getLayout(),ue=P.node2.getModel(),me=ue.get("localX"),ve=ue.get("localY"),Me=P.getLayout(),Ee,Oe,we,We,$e,Je,fr,Vr;switch(j.shape.extent=Math.max(1,Me.dy),j.shape.orient=E,E==="vertical"?(Ee=(jt!=null?jt*p:wt.x)+Me.sy,Oe=(kt!=null?kt*m:wt.y)+wt.dy,we=(me!=null?me*p:te.x)+Me.ty,We=ve!=null?ve*m:te.y,$e=Ee,Je=Oe*(1-Ot)+We*Ot,fr=we,Vr=Oe*Ot+We*(1-Ot)):(Ee=(jt!=null?jt*p:wt.x)+wt.dx,Oe=(kt!=null?kt*m:wt.y)+Me.sy,we=me!=null?me*p:te.x,We=(ve!=null?ve*m:te.y)+Me.ty,$e=Ee*(1-Ot)+we*Ot,Je=Oe,fr=Ee*Ot+we*(1-Ot),Vr=We),j.setShape({x1:Ee,y1:Oe,x2:we,y2:We,cpx1:$e,cpy1:Je,cpx2:fr,cpy2:Vr}),j.useStyle(St.getItemStyle()),j.style.fill){case"source":j.style.fill=P.node1.getVisual("color"),j.style.decal=P.node1.getVisual("style").decal;break;case"target":j.style.fill=P.node2.getVisual("color"),j.style.decal=P.node2.getVisual("style").decal;break;case"gradient":var wr=P.node1.getVisual("color"),jr=P.node2.getVisual("color");typeof wr=="string"&&typeof jr=="string"&&(j.style.fill=new $a.a(0,0,1,0,[{color:wr,offset:0},{color:jr,offset:1}]))}var Yn=dt.getModel("emphasis");Object(qe.I)(j,dt,"lineStyle",function(Yr){return Yr.getItemStyle()}),h.add(j),A.setItemGraphicEl(P.dataIndex,j);var bn=Yn.get("focus");Object(qe.o)(j,bn==="adjacency"?P.getAdjacentDataIndices():bn,Yn.get("blurScope")),Object(Ur.a)(j).dataType="edge"}),f.eachNode(function(P){var j=P.getLayout(),J=P.getModel(),dt=J.get("localX"),St=J.get("localY"),Ot=J.getModel("emphasis"),wt=new nn.a({shape:{x:dt!=null?dt*p:j.x,y:St!=null?St*m:j.y,width:j.dx,height:j.dy},style:J.getModel("itemStyle").getItemStyle(),z2:10});Object(Ar.h)(wt,Object(Ar.f)(J),{labelFetcher:t,labelDataIndex:P.dataIndex,defaultText:P.id}),wt.disableLabelAnimation=!0,wt.setStyle("fill",P.getVisual("color")),wt.setStyle("decal",P.getVisual("style").decal),Object(qe.I)(wt,J),h.add(wt),b.setItemGraphicEl(P.dataIndex,wt),Object(Ur.a)(wt).dataType="node";var zt=Ot.get("focus");Object(qe.o)(wt,zt==="adjacency"?P.getAdjacentDataIndices():zt,Ot.get("blurScope"))}),b.eachItemGraphicEl(function(P,j){var J=b.getItemModel(j);J.get("draggable")&&(P.drift=function(dt,St){l._focusAdjacencyDisabled=!0,this.shape.x+=dt,this.shape.y+=St,this.dirty(),s.dispatchAction({type:"dragNode",seriesId:t.id,dataIndex:b.getRawIndex(j),localX:this.shape.x/p,localY:this.shape.y/m})},P.ondragend=function(){l._focusAdjacencyDisabled=!1},P.draggable=!0,P.cursor="move")}),!this._data&&t.isAnimationEnabled()&&h.setClipPath(kv(h.getBoundingRect(),t,function(){h.removeClipPath()})),this._data=t.getData()},r.prototype.dispose=function(){},r.type="sankey",r}(yn.a);function kv(a,r,t){var i=new nn.a({shape:{x:a.x-10,y:a.y-10,width:0,height:a.height+20}});return Ze.initProps(i,{shape:{width:a.width+20}},r,t),i}var Za=Jn,Ku=function(a){Object(de.b)(r,a);function r(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=r.type,t}return r.prototype.getInitialData=function(t,i){var s=t.edges||t.links,l=t.data||t.nodes,f=t.levels;this.levelModels=[];for(var h=this.levelModels,d=0;d<f.length;d++)f[d].depth!=null&&f[d].depth>=0&&(h[f[d].depth]=new Ye.a(f[d],this,i));if(l&&s){var p=wi(l,s,this,!0,m);return p.data}function m(b,A){b.wrapMethod("getItemModel",function(E,P){var j=E.parentModel,J=j.getData().getItemLayout(P);if(J){var dt=J.depth,St=j.levelModels[dt];St&&(E.parentModel=St)}return E}),A.wrapMethod("getItemModel",function(E,P){var j=E.parentModel,J=j.getGraph().getEdgeByIndex(P),dt=J.node1.getLayout();if(dt){var St=dt.depth,Ot=j.levelModels[St];Ot&&(E.parentModel=Ot)}return E})}},r.prototype.setNodePosition=function(t,i){var s=this.option.data[t];s.localX=i[0],s.localY=i[1]},r.prototype.getGraph=function(){return this.getData().graph},r.prototype.getEdgeData=function(){return this.getGraph().edgeData},r.prototype.formatTooltip=function(t,i,s){function l(E){return isNaN(E)||E==null}if(s==="edge"){var f=this.getDataParams(t,s),h=f.data,d=f.value,p=h.source+" -- "+h.target;return Object(wn.c)("nameValue",{name:p,value:d,noValue:l(d)})}else{var m=this.getGraph().getNodeByIndex(t),b=m.getLayout().value,A=this.getDataParams(t,s).data.name;return Object(wn.c)("nameValue",{name:A!=null?A+"":null,value:b,noValue:l(b)})}},r.prototype.optionUpdated=function(){var t=this.option},r.prototype.getDataParams=function(t,i){var s=a.prototype.getDataParams.call(this,t,i);if(s.value==null&&i==="node"){var l=this.getGraph().getNodeByIndex(t),f=l.getLayout().value;s.value=f}return s},r.type="series.sankey",r.defaultOption={zlevel:0,z:2,coordinateSystem:"view",left:"5%",top:"5%",right:"20%",bottom:"5%",orient:"horizontal",nodeWidth:20,nodeGap:8,draggable:!0,layoutIterations:32,label:{show:!0,position:"right",fontSize:12},levels:[],nodeAlign:"justify",lineStyle:{color:"#314656",opacity:.2,curveness:.5},emphasis:{label:{show:!0},lineStyle:{opacity:.5}},select:{itemStyle:{borderColor:"#212121"}},animationEasing:"linear",animationDuration:1e3},r}(Nr.a),Qv=Ku;function wc(a,r){a.eachSeriesByType("sankey",function(t){var i=t.get("nodeWidth"),s=t.get("nodeGap"),l=go(t,r);t.layoutInfo=l;var f=l.width,h=l.height,d=t.getGraph(),p=d.nodes,m=d.edges;qi(p);var b=y.filter(p,function(j){return j.getLayout().value===0}),A=b.length!==0?0:t.get("layoutIterations"),E=t.get("orient"),P=t.get("nodeAlign");mo(p,m,i,s,f,h,A,E,P)})}function go(a,r){return Tr.g(a.getBoxLayoutParams(),{width:r.getWidth(),height:r.getHeight()})}function mo(a,r,t,i,s,l,f,h,d){yo(a,r,t,s,l,h,d),Jg(a,r,l,s,i,f,h),rm(a,h)}function qi(a){y.each(a,function(r){var t=bo(r.outEdges,ku),i=bo(r.inEdges,ku),s=r.getValue()||0,l=Math.max(t,i,s);r.setLayout({value:l},!0)})}function yo(a,r,t,i,s,l,f){for(var h=[],d=[],p=[],m=[],b=0,A=0;A<r.length;A++)h[A]=1;for(var A=0;A<a.length;A++)d[A]=a[A].inEdges.length,d[A]===0&&p.push(a[A]);for(var E=-1;p.length;){for(var P=0;P<p.length;P++){var j=p[P],J=j.hostGraph.data.getRawDataItem(j.dataIndex),dt=J.depth!=null&&J.depth>=0;dt&&J.depth>E&&(E=J.depth),j.setLayout({depth:dt?J.depth:b},!0),l==="vertical"?j.setLayout({dy:t},!0):j.setLayout({dx:t},!0);for(var St=0;St<j.outEdges.length;St++){var Ot=j.outEdges[St],wt=r.indexOf(Ot);h[wt]=0;var zt=Ot.node2,jt=a.indexOf(zt);--d[jt]==0&&m.indexOf(zt)<0&&m.push(zt)}}++b,p=m,m=[]}for(var A=0;A<h.length;A++)if(h[A]===1)throw new Error("Sankey is a DAG, the original data has cycle!");var kt=E>b-1?E:b-1;f&&f!=="left"&&Jv(a,f,l,kt);var te=l==="vertical"?(s-t)/kt:(i-t)/kt;Qg(a,te,l)}function Ys(a){var r=a.hostGraph.data.getRawDataItem(a.dataIndex);return r.depth!=null&&r.depth>=0}function Jv(a,r,t,i){if(r==="right"){for(var s=[],l=a,f=0;l.length;){for(var h=0;h<l.length;h++){var d=l[h];d.setLayout({skNodeHeight:f},!0);for(var p=0;p<d.inEdges.length;p++){var m=d.inEdges[p];s.indexOf(m.node1)<0&&s.push(m.node1)}}l=s,s=[],++f}y.each(a,function(b){Ys(b)||b.setLayout({depth:Math.max(0,i-b.getLayout().skNodeHeight)},!0)})}else r==="justify"&&$v(a,i)}function $v(a,r){y.each(a,function(t){!Ys(t)&&!t.outEdges.length&&t.setLayout({depth:r},!0)})}function Qg(a,r,t){y.each(a,function(i){var s=i.getLayout().depth*r;t==="vertical"?i.setLayout({y:s},!0):i.setLayout({x:s},!0)})}function Jg(a,r,t,i,s,l,f){var h=qv(a,f);td(h,r,t,i,s,f),Ic(h,s,t,i,f);for(var d=1;l>0;l--)d*=.99,ed(h,d,f),Ic(h,s,t,i,f),em(h,d,f),Ic(h,s,t,i,f)}function qv(a,r){var t=[],i=r==="vertical"?"y":"x",s=Object(sr.j)(a,function(l){return l.getLayout()[i]});return s.keys.sort(function(l,f){return l-f}),y.each(s.keys,function(l){t.push(s.buckets.get(l))}),t}function td(a,r,t,i,s,l){var f=Infinity;y.each(a,function(h){var d=h.length,p=0;y.each(h,function(b){p+=b.getLayout().value});var m=l==="vertical"?(i-(d-1)*s)/p:(t-(d-1)*s)/p;m<f&&(f=m)}),y.each(a,function(h){y.each(h,function(d,p){var m=d.getLayout().value*f;l==="vertical"?(d.setLayout({x:p},!0),d.setLayout({dx:m},!0)):(d.setLayout({y:p},!0),d.setLayout({dy:m},!0))})}),y.each(r,function(h){var d=+h.getValue()*f;h.setLayout({dy:d},!0)})}function Ic(a,r,t,i,s){var l=s==="vertical"?"x":"y";y.each(a,function(f){f.sort(function(j,J){return j.getLayout()[l]-J.getLayout()[l]});for(var h,d,p,m=0,b=f.length,A=s==="vertical"?"dx":"dy",E=0;E<b;E++)d=f[E],p=m-d.getLayout()[l],p>0&&(h=d.getLayout()[l]+p,s==="vertical"?d.setLayout({x:h},!0):d.setLayout({y:h},!0)),m=d.getLayout()[l]+d.getLayout()[A]+r;var P=s==="vertical"?i:t;if(p=m-r-P,p>0){h=d.getLayout()[l]-p,s==="vertical"?d.setLayout({x:h},!0):d.setLayout({y:h},!0),m=h;for(var E=b-2;E>=0;--E)d=f[E],p=d.getLayout()[l]+d.getLayout()[A]+r-m,p>0&&(h=d.getLayout()[l]-p,s==="vertical"?d.setLayout({x:h},!0):d.setLayout({y:h},!0)),m=d.getLayout()[l]}})}function ed(a,r,t){y.each(a.slice().reverse(),function(i){y.each(i,function(s){if(s.outEdges.length){var l=bo(s.outEdges,$g,t)/bo(s.outEdges,ku);if(isNaN(l)){var f=s.outEdges.length;l=f?bo(s.outEdges,qg,t)/f:0}if(t==="vertical"){var h=s.getLayout().x+(l-xo(s,t))*r;s.setLayout({x:h},!0)}else{var d=s.getLayout().y+(l-xo(s,t))*r;s.setLayout({y:d},!0)}}})})}function $g(a,r){return xo(a.node2,r)*a.getValue()}function qg(a,r){return xo(a.node2,r)}function tm(a,r){return xo(a.node1,r)*a.getValue()}function rd(a,r){return xo(a.node1,r)}function xo(a,r){return r==="vertical"?a.getLayout().x+a.getLayout().dx/2:a.getLayout().y+a.getLayout().dy/2}function ku(a){return a.getValue()}function bo(a,r,t){for(var i=0,s=a.length,l=-1;++l<s;){var f=+r(a[l],t);isNaN(f)||(i+=f)}return i}function em(a,r,t){y.each(a,function(i){y.each(i,function(s){if(s.inEdges.length){var l=bo(s.inEdges,tm,t)/bo(s.inEdges,ku);if(isNaN(l)){var f=s.inEdges.length;l=f?bo(s.inEdges,rd,t)/f:0}if(t==="vertical"){var h=s.getLayout().x+(l-xo(s,t))*r;s.setLayout({x:h},!0)}else{var d=s.getLayout().y+(l-xo(s,t))*r;s.setLayout({y:d},!0)}}})})}function rm(a,r){var t=r==="vertical"?"x":"y";y.each(a,function(i){i.outEdges.sort(function(s,l){return s.node2.getLayout()[t]-l.node2.getLayout()[t]}),i.inEdges.sort(function(s,l){return s.node1.getLayout()[t]-l.node1.getLayout()[t]})}),y.each(a,function(i){var s=0,l=0;y.each(i.outEdges,function(f){f.setLayout({sy:s},!0),s+=f.getLayout().dy}),y.each(i.inEdges,function(f){f.setLayout({ty:l},!0),l+=f.getLayout().dy})})}function nd(a){a.eachSeriesByType("sankey",function(r){var t=r.getGraph(),i=t.nodes;if(i.length){var s=Infinity,l=-Infinity;y.each(i,function(f){var h=f.getLayout().value;h<s&&(s=h),h>l&&(l=h)}),y.each(i,function(f){var h=new si({type:"color",mappingMethod:"linear",dataExtent:[s,l],visual:r.get("color")}),d=h.mapValueToVisual(f.getLayout().value),p=f.getModel().get(["itemStyle","color"]);p!=null?(f.setVisual("color",p),f.setVisual("style",{fill:p})):(f.setVisual("color",d),f.setVisual("style",{fill:d}))})}})}function id(a){a.registerChartView(Za),a.registerSeriesModel(Qv),a.registerLayout(wc),a.registerVisual(nd),a.registerAction({type:"dragNode",event:"dragnode",update:"update"},function(r,t){t.eachComponent({mainType:"series",subType:"sankey",query:r},function(i){i.setNodePosition(r.dataIndex,[r.localX,r.localY])})})}var Rc=S("L0Ub"),ad=function(){function a(){}return a.prototype.getInitialData=function(r,t){var i,s=t.getComponent("xAxis",this.get("xAxisIndex")),l=t.getComponent("yAxis",this.get("yAxisIndex")),f=s.get("type"),h=l.get("type"),d;f==="category"?(r.layout="horizontal",i=s.getOrdinalMeta(),d=!0):h==="category"?(r.layout="vertical",i=l.getOrdinalMeta(),d=!0):r.layout=r.layout||"horizontal";var p=["x","y"],m=r.layout==="horizontal"?0:1,b=this._baseAxisDim=p[m],A=p[1-m],E=[s,l],P=E[m].get("type"),j=E[1-m].get("type"),J=r.data;if(J&&d){var dt=[];y.each(J,function(wt,zt){var jt;y.isArray(wt)?(jt=wt.slice(),wt.unshift(zt)):y.isArray(wt.value)?(jt=wt.value.slice(),wt.value.unshift(zt)):jt=wt,dt.push(jt)}),r.data=dt}var St=this.defaultValueDimensions,Ot=[{name:b,type:Object(Rc.a)(P),ordinalMeta:i,otherDims:{tooltip:!1,itemName:0},dimsDef:["base"]},{name:A,type:Object(Rc.a)(j),dimsDef:St.slice()}];return Di(this,{coordDimensions:Ot,dimensionsCount:St.length+1,encodeDefaulter:y.curry(ma.c,Ot,this)})},a.prototype.getBaseAxis=function(){var r=this._baseAxisDim;return this.ecModel.getComponent(r+"Axis",this.get(r+"AxisIndex")).axis},a}(),od=function(a){Object(de.b)(r,a);function r(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=r.type,t.defaultValueDimensions=[{name:"min",defaultTooltip:!0},{name:"Q1",defaultTooltip:!0},{name:"median",defaultTooltip:!0},{name:"Q3",defaultTooltip:!0},{name:"max",defaultTooltip:!0}],t.visualDrawType="stroke",t}return r.type="series.boxplot",r.dependencies=["xAxis","yAxis","grid"],r.defaultOption={zlevel:0,z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,layout:null,boxWidth:[7,50],itemStyle:{color:"#fff",borderWidth:1},emphasis:{scale:!0,itemStyle:{borderWidth:2,shadowBlur:5,shadowOffsetX:1,shadowOffsetY:1,shadowColor:"rgba(0,0,0,0.2)"}},animationDuration:800},r}(Nr.a);Object(y.mixin)(od,ad,!0);var sd=od,nm=function(a){Object(de.b)(r,a);function r(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=r.type,t}return r.prototype.render=function(t,i,s){var l=t.getData(),f=this.group,h=this._data;this._data||f.removeAll();var d=t.get("layout")==="horizontal"?1:0;l.diff(h).add(function(p){if(l.hasValue(p)){var m=l.getItemLayout(p),b=ld(m,l,p,d,!0);l.setItemGraphicEl(p,b),f.add(b)}}).update(function(p,m){var b=h.getItemGraphicEl(m);if(!l.hasValue(p)){f.remove(b);return}var A=l.getItemLayout(p);b?ud(A,b,l,p):b=ld(A,l,p,d),f.add(b),l.setItemGraphicEl(p,b)}).remove(function(p){var m=h.getItemGraphicEl(p);m&&f.remove(m)}).execute(),this._data=l},r.prototype.remove=function(t){var i=this.group,s=this._data;this._data=null,s&&s.eachItemGraphicEl(function(l){l&&i.remove(l)})},r.type="boxplot",r}(yn.a),os=function(){function a(){}return a}(),im=function(a){Object(de.b)(r,a);function r(t){var i=a.call(this,t)||this;return i.type="boxplotBoxPath",i}return r.prototype.getDefaultShape=function(){return new os},r.prototype.buildPath=function(t,i){var s=i.points,l=0;for(t.moveTo(s[l][0],s[l][1]),l++;l<4;l++)t.lineTo(s[l][0],s[l][1]);for(t.closePath();l<s.length;l++)t.moveTo(s[l][0],s[l][1]),l++,t.lineTo(s[l][0],s[l][1])},r}(ot.b);function ld(a,r,t,i,s){var l=a.ends,f=new im({shape:{points:s?fd(l,i,a):l}});return ud(a,f,r,t,s),f}function ud(a,r,t,i,s){var l=t.hostModel,f=Ze[s?"initProps":"updateProps"];f(r,{shape:{points:a.ends}},l,i),r.useStyle(t.getItemVisual(i,"style")),r.style.strokeNoScale=!0,r.z2=100;var h=t.getItemModel(i);Object(qe.I)(r,h),Object(qe.o)(r,h.get(["emphasis","focus"]),h.get(["emphasis","blurScope"]))}function fd(a,r,t){return y.map(a,function(i){return i=i.slice(),i[r]=t.initBaseline,i})}var Xs=nm;function am(a,r){}var Wl=y.each;function om(a){var r=sm(a);Wl(r,function(t){var i=t.seriesModels;!i.length||(cd(t),Wl(i,function(s,l){hd(s,t.boxOffsetList[l],t.boxWidthList[l])}))})}function sm(a){var r=[],t=[];return a.eachSeriesByType("boxplot",function(i){var s=i.getBaseAxis(),l=y.indexOf(t,s);l<0&&(l=t.length,t[l]=s,r[l]={axis:s,seriesModels:[]}),r[l].seriesModels.push(i)}),r}function cd(a){var r,t=a.axis,i=a.seriesModels,s=i.length,l=a.boxWidthList=[],f=a.boxOffsetList=[],h=[],d;if(t.type==="category")d=t.getBandWidth();else{var p=0;Wl(i,function(P){p=Math.max(p,P.getData().count())}),r=t.getExtent(),Math.abs(r[1]-r[0])/p}Wl(i,function(P){var j=P.get("boxWidth");y.isArray(j)||(j=[j,j]),h.push([Object(Ne.o)(j[0],d)||0,Object(Ne.o)(j[1],d)||0])});var m=d*.8-2,b=m/s*.3,A=(m-b*(s-1))/s,E=A/2-m/2;Wl(i,function(P,j){f.push(E),E+=b+A,l.push(Math.min(Math.max(A,h[j][0]),h[j][1]))})}function hd(a,r,t){var i=a.coordinateSystem,s=a.getData(),l=t/2,f=a.get("layout")==="horizontal"?0:1,h=1-f,d=["x","y"],p=s.mapDimension(d[f]),m=s.mapDimensionsAll(d[h]);if(p==null||m.length<5)return;for(var b=0;b<s.count();b++){var A=s.get(p,b),E=Ot(A,m[2],b),P=Ot(A,m[0],b),j=Ot(A,m[1],b),J=Ot(A,m[3],b),dt=Ot(A,m[4],b),St=[];wt(St,j,!1),wt(St,J,!0),St.push(P,j,dt,J),zt(St,P),zt(St,dt),zt(St,E),s.setItemLayout(b,{initBaseline:E[h],ends:St})}function Ot(jt,kt,te){var ue=s.get(kt,te),me=[];me[f]=jt,me[h]=ue;var ve;return isNaN(jt)||isNaN(ue)?ve=[NaN,NaN]:(ve=i.dataToPoint(me),ve[f]+=r),ve}function wt(jt,kt,te){var ue=kt.slice(),me=kt.slice();ue[f]+=l,me[f]-=l,te?jt.push(ue,me):jt.push(me,ue)}function zt(jt,kt){var te=kt.slice(),ue=kt.slice();te[f]-=l,ue[f]+=l,jt.push(te,ue)}}function So(a,r){r=r||{};for(var t=[],i=[],s=r.boundIQR,l=s==="none"||s===0,f=0;f<a.length;f++){var h=Object(Ne.b)(a[f].slice()),d=Object(Ne.p)(h,.25),p=Object(Ne.p)(h,.5),m=Object(Ne.p)(h,.75),b=h[0],A=h[h.length-1],E=(s==null?1.5:s)*(m-d),P=l?b:Math.max(b,d-E),j=l?A:Math.min(A,m+E),J=r.itemNameFormatter,dt=Object(y.isFunction)(J)?J({value:f}):Object(y.isString)(J)?J.replace("{value}",f+""):f+"";t.push([dt,P,d,p,m,j]);for(var St=0;St<h.length;St++){var Ot=h[St];if(Ot<P||Ot>j){var wt=[dt,Ot];i.push(wt)}}}return{boxData:t,outliers:i}}var Nn=S("7a4p"),Nc=S("B/3G"),lm={type:"echarts:boxplot",transform:function(r){var t=r.upstream;if(t.sourceFormat!==Nc.c){var i="";Object(Nn.b)(i)}var s=So(t.getRawData(),r.config);return[{dimensions:["ItemName","Low","Q1","Q2","Q3","High"],data:s.boxData},{data:s.outliers}]}};function um(a){a.registerSeriesModel(sd),a.registerChartView(Xs),a.registerVisual(am),a.registerLayout(om),a.registerTransform(lm)}var fm=["color","borderColor"],cm=function(a){Object(de.b)(r,a);function r(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=r.type,t}return r.prototype.render=function(t,i,s){this.group.removeClipPath(),this._updateDrawMode(t),this._isLargeDraw?this._renderLarge(t):this._renderNormal(t)},r.prototype.incrementalPrepareRender=function(t,i,s){this._clear(),this._updateDrawMode(t)},r.prototype.incrementalRender=function(t,i,s,l){this._isLargeDraw?this._incrementalRenderLarge(t,i):this._incrementalRenderNormal(t,i)},r.prototype._updateDrawMode=function(t){var i=t.pipelineContext.large;(this._isLargeDraw==null||i!==this._isLargeDraw)&&(this._isLargeDraw=i,this._clear())},r.prototype._renderNormal=function(t){var i=t.getData(),s=this._data,l=this.group,f=i.getLayout("isSimpleBox"),h=t.get("clip",!0),d=t.coordinateSystem,p=d.getArea&&d.getArea();this._data||l.removeAll(),i.diff(s).add(function(m){if(i.hasValue(m)){var b=i.getItemLayout(m);if(h&&Bc(p,b))return;var A=Wn(b,m,!0);Ze.initProps(A,{shape:{points:b.ends}},t,m),Qu(A,i,m,f),l.add(A),i.setItemGraphicEl(m,A)}}).update(function(m,b){var A=s.getItemGraphicEl(b);if(!i.hasValue(m)){l.remove(A);return}var E=i.getItemLayout(m);if(h&&Bc(p,E)){l.remove(A);return}A?Ze.updateProps(A,{shape:{points:E.ends}},t,m):A=Wn(E,m),Qu(A,i,m,f),l.add(A),i.setItemGraphicEl(m,A)}).remove(function(m){var b=s.getItemGraphicEl(m);b&&l.remove(b)}).execute(),this._data=i},r.prototype._renderLarge=function(t){this._clear(),ti(t,this.group);var i=t.get("clip",!0)?On(t.coordinateSystem,!1,t):null;i?this.group.setClipPath(i):this.group.removeClipPath()},r.prototype._incrementalRenderNormal=function(t,i){for(var s=i.getData(),l=s.getLayout("isSimpleBox"),f;(f=t.next())!=null;){var h=s.getItemLayout(f),d=Wn(h,f);Qu(d,s,f,l),d.incremental=!0,this.group.add(d)}},r.prototype._incrementalRenderLarge=function(t,i){ti(i,this.group,!0)},r.prototype.remove=function(t){this._clear()},r.prototype._clear=function(){this.group.removeAll(),this._data=null},r.type="candlestick",r}(yn.a),Yl=function(){function a(){}return a}(),hm=function(a){Object(de.b)(r,a);function r(t){var i=a.call(this,t)||this;return i.type="normalCandlestickBox",i}return r.prototype.getDefaultShape=function(){return new Yl},r.prototype.buildPath=function(t,i){var s=i.points;this.__simpleBox?(t.moveTo(s[4][0],s[4][1]),t.lineTo(s[6][0],s[6][1])):(t.moveTo(s[0][0],s[0][1]),t.lineTo(s[1][0],s[1][1]),t.lineTo(s[2][0],s[2][1]),t.lineTo(s[3][0],s[3][1]),t.closePath(),t.moveTo(s[4][0],s[4][1]),t.lineTo(s[5][0],s[5][1]),t.moveTo(s[6][0],s[6][1]),t.lineTo(s[7][0],s[7][1]))},r}(ot.b);function Wn(a,r,t){var i=a.ends;return new hm({shape:{points:t?vd(i,a):i},z2:100})}function Bc(a,r){for(var t=!0,i=0;i<r.ends.length;i++)if(a.contain(r.ends[i][0],r.ends[i][1])){t=!1;break}return t}function Qu(a,r,t,i){var s=r.getItemModel(t);a.useStyle(r.getItemVisual(t,"style")),a.style.strokeNoScale=!0,a.__simpleBox=i,Object(qe.I)(a,s)}function vd(a,r){return y.map(a,function(t){return t=t.slice(),t[1]=r.initBaseline,t})}var vm=function(){function a(){}return a}(),Ju=function(a){Object(de.b)(r,a);function r(t){var i=a.call(this,t)||this;return i.type="largeCandlestickBox",i}return r.prototype.getDefaultShape=function(){return new vm},r.prototype.buildPath=function(t,i){for(var s=i.points,l=0;l<s.length;)if(this.__sign===s[l++]){var f=s[l++];t.moveTo(f,s[l++]),t.lineTo(f,s[l++])}else l+=3},r}(ot.b);function ti(a,r,t){var i=a.getData(),s=i.getLayout("largePoints"),l=new Ju({shape:{points:s},__sign:1});r.add(l);var f=new Ju({shape:{points:s},__sign:-1});r.add(f),$u(1,l,a,i),$u(-1,f,a,i),t&&(l.incremental=!0,f.incremental=!0)}function $u(a,r,t,i){var s=t.get(["itemStyle",a>0?"borderColor":"borderColor0"])||t.get(["itemStyle",a>0?"color":"color0"]),l=t.getModel("itemStyle").getItemStyle(fm);r.useStyle(l),r.style.fill=null,r.style.stroke=s}var dm=cm,dd=function(a){Object(de.b)(r,a);function r(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=r.type,t.defaultValueDimensions=[{name:"open",defaultTooltip:!0},{name:"close",defaultTooltip:!0},{name:"lowest",defaultTooltip:!0},{name:"highest",defaultTooltip:!0}],t}return r.prototype.getShadowDim=function(){return"open"},r.prototype.brushSelector=function(t,i,s){var l=i.getItemLayout(t);return l&&s.rect(l.brushRect)},r.type="series.candlestick",r.dependencies=["xAxis","yAxis","grid"],r.defaultOption={zlevel:0,z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,layout:null,clip:!0,itemStyle:{color:"#eb5454",color0:"#47b262",borderColor:"#eb5454",borderColor0:"#47b262",borderWidth:1},emphasis:{scale:!0,itemStyle:{borderWidth:2}},barMaxWidth:null,barMinWidth:null,barWidth:null,large:!0,largeThreshold:600,progressive:3e3,progressiveThreshold:1e4,progressiveChunkMode:"mod",animationEasing:"linear",animationDuration:300},r}(Nr.a);Object(y.mixin)(dd,ad,!0);var Xl=dd;function Zl(a){!a||!y.isArray(a.series)||y.each(a.series,function(r){y.isObject(r)&&r.type==="k"&&(r.type="candlestick")})}var Xi=["itemStyle","borderColor"],pd=["itemStyle","borderColor0"],pm=["itemStyle","color"],gm=["itemStyle","color0"],mm={seriesType:"candlestick",plan:Object(qa.a)(),performRawSeries:!0,reset:function(a,r){function t(f,h){return h.get(f>0?pm:gm)}function i(f,h){return h.get(f>0?Xi:pd)}var s=a.getData();if(!r.isSeriesFiltered(a)){var l=a.pipelineContext.large;return!l&&{progress:function(f,h){for(var d;(d=f.next())!=null;){var p=h.getItemModel(d),m=h.getItemLayout(d).sign,b=p.getItemStyle();b.fill=t(m,p),b.stroke=i(m,p)||b.fill;var A=h.ensureUniqueItemVisual(d,"style");Object(y.extend)(A,b)}}}}}},qu=mm,ym=typeof Float32Array!="undefined"?Float32Array:Array,xm={seriesType:"candlestick",plan:Object(qa.a)(),reset:function(a){var r=a.coordinateSystem,t=a.getData(),i=bm(a,t),s=0,l=1,f=["x","y"],h=t.mapDimension(f[s]),d=t.mapDimensionsAll(f[l]),p=d[0],m=d[1],b=d[2],A=d[3];if(t.setLayout({candleWidth:i,isSimpleBox:i<=1.3}),h==null||d.length<4)return;return{progress:a.pipelineContext.large?P:E};function E(j,J){for(var dt;(dt=j.next())!=null;){var St=J.get(h,dt),Ot=J.get(p,dt),wt=J.get(m,dt),zt=J.get(b,dt),jt=J.get(A,dt),kt=Math.min(Ot,wt),te=Math.max(Ot,wt),ue=Oe(kt,St),me=Oe(te,St),ve=Oe(zt,St),Me=Oe(jt,St),Ee=[];we(Ee,me,0),we(Ee,ue,1),Ee.push($e(Me),$e(me),$e(ve),$e(ue)),J.setItemLayout(dt,{sign:Kl(J,dt,Ot,wt,m),initBaseline:Ot>wt?me[l]:ue[l],ends:Ee,brushRect:We(zt,jt,St)})}function Oe(Je,fr){var Vr=[];return Vr[s]=fr,Vr[l]=Je,isNaN(fr)||isNaN(Je)?[NaN,NaN]:r.dataToPoint(Vr)}function we(Je,fr,Vr){var wr=fr.slice(),jr=fr.slice();wr[s]=Object(Ze.subPixelOptimize)(wr[s]+i/2,1,!1),jr[s]=Object(Ze.subPixelOptimize)(jr[s]-i/2,1,!0),Vr?Je.push(wr,jr):Je.push(jr,wr)}function We(Je,fr,Vr){var wr=Oe(Je,Vr),jr=Oe(fr,Vr);return wr[s]-=i/2,jr[s]-=i/2,{x:wr[0],y:wr[1],width:l?i:jr[0]-wr[0],height:l?jr[1]-wr[1]:i}}function $e(Je){return Je[s]=Object(Ze.subPixelOptimize)(Je[s],1),Je}}function P(j,J){for(var dt=new ym(j.count*4),St=0,Ot,wt=[],zt=[],jt;(jt=j.next())!=null;){var kt=J.get(h,jt),te=J.get(p,jt),ue=J.get(m,jt),me=J.get(b,jt),ve=J.get(A,jt);if(isNaN(kt)||isNaN(me)||isNaN(ve)){dt[St++]=NaN,St+=3;continue}dt[St++]=Kl(J,jt,te,ue,m),wt[s]=kt,wt[l]=me,Ot=r.dataToPoint(wt,null,zt),dt[St++]=Ot?Ot[0]:NaN,dt[St++]=Ot?Ot[1]:NaN,wt[l]=ve,Ot=r.dataToPoint(wt,null,zt),dt[St++]=Ot?Ot[1]:NaN}J.setLayout("largePoints",dt)}}};function Kl(a,r,t,i,s){var l;return t>i?l=-1:t<i?l=1:l=r>0?a.get(s,r-1)<=i?1:-1:1,l}function bm(a,r){var t=a.getBaseAxis(),i,s=t.type==="category"?t.getBandWidth():(i=t.getExtent(),Math.abs(i[1]-i[0])/r.count()),l=Object(Ne.o)(Object(y.retrieve2)(a.get("barMaxWidth"),s),s),f=Object(Ne.o)(Object(y.retrieve2)(a.get("barMinWidth"),1),s),h=a.get("barWidth");return h!=null?Object(Ne.o)(h,s):Math.max(Math.min(s/2,l),f)}var Sm=xm;function _m(a){a.registerChartView(dm),a.registerSeriesModel(Xl),a.registerPreprocessor(Zl),a.registerVisual(qu),a.registerLayout(Sm)}var gd=3;function Tm(a){return y.isArray(a)||(a=[+a,+a]),a}function md(a,r){var t=r.rippleEffectColor||r.color;a.eachChild(function(i){i.attr({z:r.z,zlevel:r.zlevel,style:{stroke:r.brushType==="stroke"?t:null,fill:r.brushType==="fill"?t:null}})})}var jc=function(a){Object(de.b)(r,a);function r(t,i){var s=a.call(this)||this,l=new Ma(t,i),f=new pr.a;return s.add(l),s.add(f),s.updateData(t,i),s}return r.prototype.stopEffectAnimation=function(){this.childAt(1).removeAll()},r.prototype.startEffectAnimation=function(t){for(var i=t.symbolType,s=t.color,l=this.childAt(1),f=0;f<gd;f++){var h=Object(lr.a)(i,-1,-1,2,2,s);h.attr({style:{strokeNoScale:!0},z2:99,silent:!0,scaleX:.5,scaleY:.5});var d=-f/gd*t.period+t.effectOffset;h.animate("",!0).when(t.period,{scaleX:t.rippleScale/2,scaleY:t.rippleScale/2}).delay(d).start(),h.animateStyle(!0).when(t.period,{opacity:0}).delay(d).start(),l.add(h)}md(l,t)},r.prototype.updateEffectAnimation=function(t){for(var i=this._effectCfg,s=this.childAt(1),l=["symbolType","period","rippleScale"],f=0;f<l.length;f++){var h=l[f];if(i[h]!==t[h]){this.stopEffectAnimation(),this.startEffectAnimation(t);return}}md(s,t)},r.prototype.highlight=function(){Object(qe.r)(this)},r.prototype.downplay=function(){Object(qe.C)(this)},r.prototype.updateData=function(t,i){var s=this,l=t.hostModel;this.childAt(0).updateData(t,i);var f=this.childAt(1),h=t.getItemModel(i),d=t.getItemVisual(i,"symbol"),p=Tm(t.getItemVisual(i,"symbolSize")),m=t.getItemVisual(i,"style"),b=m&&m.fill;f.setScale(p),f.traverse(function(j){j.setStyle("fill",b)});var A=t.getItemVisual(i,"symbolOffset");A&&(y.isArray(A)||(A=[A,A]),f.x=Object(Ne.o)(A[0],p[0]),f.y=Object(Ne.o)(y.retrieve2(A[1],A[0])||0,p[1]));var E=t.getItemVisual(i,"symbolRotate");f.rotation=(E||0)*Math.PI/180||0;var P={};P.showEffectOn=l.get("showEffectOn"),P.rippleScale=h.get(["rippleEffect","scale"]),P.brushType=h.get(["rippleEffect","brushType"]),P.period=h.get(["rippleEffect","period"])*1e3,P.effectOffset=i/t.count(),P.z=l.getShallow("z")||0,P.zlevel=l.getShallow("zlevel")||0,P.symbolType=d,P.color=b,P.rippleEffectColor=h.get(["rippleEffect","color"]),this.off("mouseover").off("mouseout").off("emphasis").off("normal"),P.showEffectOn==="render"?(this._effectCfg?this.updateEffectAnimation(P):this.startEffectAnimation(P),this._effectCfg=P):(this._effectCfg=null,this.stopEffectAnimation(),this.onHoverStateChange=function(j){j==="emphasis"?P.showEffectOn!=="render"&&s.startEffectAnimation(P):j==="normal"&&P.showEffectOn!=="render"&&s.stopEffectAnimation()}),this._effectCfg=P,Object(qe.o)(this)},r.prototype.fadeOut=function(t){this.off("mouseover").off("mouseout"),t&&t()},r}(pr.a),Om=jc,Am=function(a){Object(de.b)(r,a);function r(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=r.type,t}return r.prototype.init=function(){this._symbolDraw=new Er(Om)},r.prototype.render=function(t,i,s){var l=t.getData(),f=this._symbolDraw;f.updateData(l,{clipShape:this._getClipShape(t)}),this.group.add(f.group)},r.prototype._getClipShape=function(t){var i=t.coordinateSystem,s=i&&i.getArea&&i.getArea();return t.get("clip",!0)?s:null},r.prototype.updateTransform=function(t,i,s){var l=t.getData();this.group.dirty();var f=fa("").reset(t,i,s);f.progress&&f.progress({start:0,end:l.count(),count:l.count()},l),this._symbolDraw.updateLayout()},r.prototype._updateGroupTransform=function(t){var i=t.coordinateSystem;i&&i.getRoamTransform&&(this.group.transform=vn.clone(i.getRoamTransform()),this.group.decomposeTransform())},r.prototype.remove=function(t,i){this._symbolDraw&&this._symbolDraw.remove(!0)},r.type="effectScatter",r}(yn.a),Mm=Am,yd=function(a){Object(de.b)(r,a);function r(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=r.type,t.hasSymbolVisual=!0,t}return r.prototype.getInitialData=function(t,i){return Object(_r.a)(this.getSource(),this,{useEncodeDefaulter:!0})},r.prototype.brushSelector=function(t,i,s){return s.point(i.getItemLayout(t))},r.type="series.effectScatter",r.dependencies=["grid","polar"],r.defaultOption={coordinateSystem:"cartesian2d",zlevel:0,z:2,legendHoverLink:!0,effectType:"ripple",progressive:0,showEffectOn:"render",clip:!0,rippleEffect:{period:4,scale:2.5,brushType:"fill"},symbolSize:10},r}(Nr.a),zc=yd;function Dm(a){a.registerChartView(Mm),a.registerSeriesModel(zc),a.registerLayout(fa("effectScatter"))}var Cm=function(a){Object(de.b)(r,a);function r(t,i,s){var l=a.call(this)||this;return l.add(l.createLine(t,i,s)),l._updateEffectSymbol(t,i),l}return r.prototype.createLine=function(t,i,s){return new wl(t,i,s)},r.prototype._updateEffectSymbol=function(t,i){var s=t.getItemModel(i),l=s.getModel("effect"),f=l.get("symbolSize"),h=l.get("symbol");y.isArray(f)||(f=[f,f]);var d=t.getItemVisual(i,"style"),p=l.get("color")||d&&d.stroke,m=this.childAt(1);this._symbolType!==h&&(this.remove(m),m=Object(lr.a)(h,-.5,-.5,1,1,p),m.z2=100,m.culling=!0,this.add(m)),!!m&&(m.setStyle("shadowColor",p),m.setStyle(l.getItemStyle(["color"])),m.scaleX=f[0],m.scaleY=f[1],m.setColor(p),this._symbolType=h,this._symbolScale=f,this._updateEffectAnimation(t,l,i))},r.prototype._updateEffectAnimation=function(t,i,s){var l=this.childAt(1);if(!!l){var f=this,h=t.getItemLayout(s),d=i.get("period")*1e3,p=i.get("loop"),m=i.get("constantSpeed"),b=y.retrieve(i.get("delay"),function(P){return P/t.count()*d/3});if(l.ignore=!0,this._updateAnimationPoints(l,h),m>0&&(d=this._getLineLength(l)/m*1e3),(d!==this._period||p!==this._loop)&&(l.stopAnimation(),d>0)){var A=void 0;typeof b=="function"?A=b(s):A=b,l.__t>0&&(A=-d*l.__t),l.__t=0;var E=l.animate("",p).when(d,{__t:1}).delay(A).during(function(){f._updateSymbolPosition(l)});p||E.done(function(){f.remove(l)}),E.start()}this._period=d,this._loop=p}},r.prototype._getLineLength=function(t){return Ir.dist(t.__p1,t.__cp1)+Ir.dist(t.__cp1,t.__p2)},r.prototype._updateAnimationPoints=function(t,i){t.__p1=i[0],t.__p2=i[1],t.__cp1=i[2]||[(i[0][0]+i[1][0])/2,(i[0][1]+i[1][1])/2]},r.prototype.updateData=function(t,i,s){this.childAt(0).updateData(t,i,s),this._updateEffectSymbol(t,i)},r.prototype._updateSymbolPosition=function(t){var i=t.__p1,s=t.__p2,l=t.__cp1,f=t.__t,h=[t.x,t.y],d=h.slice(),p=bi.h,m=bi.i;h[0]=p(i[0],l[0],s[0],f),h[1]=p(i[1],l[1],s[1],f);var b=m(i[0],l[0],s[0],f),A=m(i[1],l[1],s[1],f);t.rotation=-Math.atan2(A,b)-Math.PI/2,(this._symbolType==="line"||this._symbolType==="rect"||this._symbolType==="roundRect")&&(t.__lastT!==void 0&&t.__lastT<t.__t?(t.scaleY=Ir.dist(d,h)*1.05,f===1&&(h[0]=d[0]+(h[0]-d[0])/2,h[1]=d[1]+(h[1]-d[1])/2)):t.__lastT===1?t.scaleY=2*Ir.dist(i,h):t.scaleY=this._symbolScale[1]),t.__lastT=t.__t,t.ignore=!1,t.x=h[0],t.y=h[1]},r.prototype.updateLayout=function(t,i){this.childAt(0).updateLayout(t,i);var s=t.getItemModel(i).getModel("effect");this._updateEffectAnimation(t,s,i)},r}(pr.a),xd=Cm,n=function(a){Object(de.b)(r,a);function r(t,i,s){var l=a.call(this)||this;return l._createPolyline(t,i,s),l}return r.prototype._createPolyline=function(t,i,s){var l=t.getItemLayout(i),f=new pi.a({shape:{points:l}});this.add(f),this._updateCommonStl(t,i,s)},r.prototype.updateData=function(t,i,s){var l=t.hostModel,f=this.childAt(0),h={shape:{points:t.getItemLayout(i)}};Ze.updateProps(f,h,l,i),this._updateCommonStl(t,i,s)},r.prototype._updateCommonStl=function(t,i,s){var l=this.childAt(0),f=t.getItemModel(i),h=s&&s.emphasisLineStyle;(!s||t.hasItemOption)&&(h=f.getModel(["emphasis","lineStyle"]).getLineStyle()),l.useStyle(t.getItemVisual(i,"style")),l.style.fill=null,l.style.strokeNoScale=!0;var d=l.ensureState("emphasis");d.style=h,Object(qe.o)(this)},r.prototype.updateLayout=function(t,i){var s=this.childAt(0);s.setShape("points",t.getItemLayout(i))},r}(pr.a),e=n,o=function(a){Object(de.b)(r,a);function r(){var t=a!==null&&a.apply(this,arguments)||this;return t._lastFrame=0,t._lastFramePercent=0,t}return r.prototype.createLine=function(t,i,s){return new e(t,i,s)},r.prototype._updateAnimationPoints=function(t,i){this._points=i;for(var s=[0],l=0,f=1;f<i.length;f++){var h=i[f-1],d=i[f];l+=Ir.dist(h,d),s.push(l)}if(l===0){this._length=0;return}for(var f=0;f<s.length;f++)s[f]/=l;this._offsets=s,this._length=l},r.prototype._getLineLength=function(){return this._length},r.prototype._updateSymbolPosition=function(t){var i=t.__t,s=this._points,l=this._offsets,f=s.length;if(!!l){var h=this._lastFrame,d;if(i<this._lastFramePercent){var p=Math.min(h+1,f-1);for(d=p;d>=0&&!(l[d]<=i);d--);d=Math.min(d,f-2)}else{for(d=h;d<f&&!(l[d]>i);d++);d=Math.min(d-1,f-2)}var m=(i-l[d])/(l[d+1]-l[d]),b=s[d],A=s[d+1];t.x=b[0]*(1-m)+m*A[0],t.y=b[1]*(1-m)+m*A[1];var E=A[0]-b[0],P=A[1]-b[1];t.rotation=-Math.atan2(P,E)-Math.PI/2,this._lastFrame=d,this._lastFramePercent=i,t.ignore=!1}},r}(xd),u=o,c=S("loD1"),v=S("aKvl"),g=function(){function a(){this.polyline=!1,this.curveness=0,this.segs=[]}return a}(),x=function(a){Object(de.b)(r,a);function r(t){return a.call(this,t)||this}return r.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},r.prototype.getDefaultShape=function(){return new g},r.prototype.buildPath=function(t,i){var s=i.segs,l=i.curveness;if(i.polyline)for(var f=0;f<s.length;){var h=s[f++];if(h>0){t.moveTo(s[f++],s[f++]);for(var d=1;d<h;d++)t.lineTo(s[f++],s[f++])}}else for(var f=0;f<s.length;){var p=s[f++],m=s[f++],b=s[f++],A=s[f++];if(t.moveTo(p,m),l>0){var E=(p+b)/2-(m-A)*l,P=(m+A)/2-(b-p)*l;t.quadraticCurveTo(E,P,b,A)}else t.lineTo(b,A)}},r.prototype.findDataIndex=function(t,i){var s=this.shape,l=s.segs,f=s.curveness,h=this.style.lineWidth;if(s.polyline)for(var d=0,p=0;p<l.length;){var m=l[p++];if(m>0)for(var b=l[p++],A=l[p++],E=1;E<m;E++){var P=l[p++],j=l[p++];if(c.a(b,A,P,j,h,t,i))return d}d++}else for(var d=0,p=0;p<l.length;){var b=l[p++],A=l[p++],P=l[p++],j=l[p++];if(f>0){var J=(b+P)/2-(A-j)*f,dt=(A+j)/2-(P-b)*f;if(v.a(b,A,J,dt,P,j,h,t,i))return d}else if(c.a(b,A,P,j,h,t,i))return d;d++}return-1},r}(ot.b),_=function(){function a(){this.group=new pr.a}return a.prototype.isPersistent=function(){return!this._incremental},a.prototype.updateData=function(r){this.group.removeAll();var t=new x({rectHover:!0,cursor:"default"});t.setShape({segs:r.getLayout("linesPoints")}),this._setCommon(t,r),this.group.add(t),this._incremental=null},a.prototype.incrementalPrepareUpdate=function(r){this.group.removeAll(),this._clearIncremental(),r.count()>5e5?(this._incremental||(this._incremental=new Ba.a({silent:!0})),this.group.add(this._incremental)):this._incremental=null},a.prototype.incrementalUpdate=function(r,t){var i=new x;i.setShape({segs:t.getLayout("linesPoints")}),this._setCommon(i,t,!!this._incremental),this._incremental?this._incremental.addDisplayable(i,!0):(i.rectHover=!0,i.cursor="default",i.__startIndex=r.start,this.group.add(i))},a.prototype.remove=function(){this._clearIncremental(),this._incremental=null,this.group.removeAll()},a.prototype._setCommon=function(r,t,i){var s=t.hostModel;r.setShape({polyline:s.get("polyline"),curveness:s.get(["lineStyle","curveness"])}),r.useStyle(s.getModel("lineStyle").getLineStyle()),r.style.strokeNoScale=!0;var l=t.getVisual("style");if(l&&l.stroke&&r.setStyle("stroke",l.stroke),r.setStyle("fill",null),!i){var f=Object(Ur.a)(r);f.seriesIndex=s.seriesIndex,r.on("mousemove",function(h){f.dataIndex=null;var d=r.findDataIndex(h.offsetX,h.offsetY);d>0&&(f.dataIndex=d+r.__startIndex)})}},a.prototype._clearIncremental=function(){var r=this._incremental;r&&r.clearDisplaybles()},a}(),M=_,I={seriesType:"lines",plan:Object(qa.a)(),reset:function(a){var r=a.coordinateSystem,t=a.get("polyline"),i=a.pipelineContext.large;return{progress:function(s,l){var f=[];if(i){var h=void 0,d=s.end-s.start;if(t){for(var p=0,m=s.start;m<s.end;m++)p+=a.getLineCoordsCount(m);h=new Float32Array(d+p*2)}else h=new Float32Array(d*4);for(var b=0,A=[],m=s.start;m<s.end;m++){var E=a.getLineCoords(m,f);t&&(h[b++]=E);for(var P=0;P<E;P++)A=r.dataToPoint(f[P],!1,A),h[b++]=A[0],h[b++]=A[1]}l.setLayout("linesPoints",h)}else for(var m=s.start;m<s.end;m++){var j=l.getItemModel(m),E=a.getLineCoords(m,f),J=[];if(t)for(var dt=0;dt<E;dt++)J.push(r.dataToPoint(f[dt]));else{J[0]=r.dataToPoint(f[0]),J[1]=r.dataToPoint(f[1]);var St=j.get(["lineStyle","curveness"]);+St&&(J[2]=[(J[0][0]+J[1][0])/2-(J[0][1]-J[1][1])*St,(J[0][1]+J[1][1])/2-(J[1][0]-J[0][0])*St])}l.setItemLayout(m,J)}}}}},F=I,ut=function(a){Object(de.b)(r,a);function r(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=r.type,t}return r.prototype.render=function(t,i,s){var l=t.getData(),f=this._updateLineDraw(l,t),h=t.get("zlevel"),d=t.get(["effect","trailLength"]),p=s.getZr(),m=p.painter.getType()==="svg";if(m||p.painter.getLayer(h).clear(!0),this._lastZlevel!=null&&!m&&p.configLayer(this._lastZlevel,{motionBlur:!1}),this._showEffect(t)&&d){if(!1)var b;m||p.configLayer(h,{motionBlur:!0,lastFrameAlpha:Math.max(Math.min(d/10+.9,1),0)})}f.updateData(l);var A=t.get("clip",!0)&&On(t.coordinateSystem,!1,t);A?this.group.setClipPath(A):this.group.removeClipPath(),this._lastZlevel=h,this._finished=!0},r.prototype.incrementalPrepareRender=function(t,i,s){var l=t.getData(),f=this._updateLineDraw(l,t);f.incrementalPrepareUpdate(l),this._clearLayer(s),this._finished=!1},r.prototype.incrementalRender=function(t,i,s){this._lineDraw.incrementalUpdate(t,i.getData()),this._finished=t.end===i.getData().count()},r.prototype.updateTransform=function(t,i,s){var l=t.getData(),f=t.pipelineContext;if(!this._finished||f.large||f.progressiveRender)return{update:!0};var h=F.reset(t,i,s);h.progress&&h.progress({start:0,end:l.count(),count:l.count()},l),this._lineDraw.updateLayout(),this._clearLayer(s)},r.prototype._updateLineDraw=function(t,i){var s=this._lineDraw,l=this._showEffect(i),f=!!i.get("polyline"),h=i.pipelineContext,d=h.large;return(!s||l!==this._hasEffet||f!==this._isPolyline||d!==this._isLargeDraw)&&(s&&s.remove(),s=this._lineDraw=d?new M:new zs(f?l?u:e:l?xd:wl),this._hasEffet=l,this._isPolyline=f,this._isLargeDraw=d,this.group.removeAll()),this.group.add(s.group),s},r.prototype._showEffect=function(t){return!!t.get(["effect","show"])},r.prototype._clearLayer=function(t){var i=t.getZr(),s=i.painter.getType()==="svg";!s&&this._lastZlevel!=null&&i.painter.getLayer(this._lastZlevel).clear(!0)},r.prototype.remove=function(t,i){this._lineDraw&&this._lineDraw.remove(),this._lineDraw=null,this._clearLayer(i)},r.type="lines",r}(yn.a),yt=ut,Dt=typeof Uint32Array=="undefined"?Array:Uint32Array,Et=typeof Float64Array=="undefined"?Array:Float64Array;function Pt(a){var r=a.data;r&&r[0]&&r[0][0]&&r[0][0].coord&&(a.data=Object(y.map)(r,function(t){var i=[t[0].coord,t[1].coord],s={coords:i};return t[0].name&&(s.fromName=t[0].name),t[1].name&&(s.toName=t[1].name),Object(y.mergeAll)([s,t[0],t[1]])}))}var Ht=function(a){Object(de.b)(r,a);function r(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=r.type,t.visualStyleAccessPath="lineStyle",t.visualDrawType="stroke",t}return r.prototype.init=function(t){t.data=t.data||[],Pt(t);var i=this._processFlatCoordsArray(t.data);this._flatCoords=i.flatCoords,this._flatCoordsOffset=i.flatCoordsOffset,i.flatCoords&&(t.data=new Float32Array(i.count)),a.prototype.init.apply(this,arguments)},r.prototype.mergeOption=function(t){if(Pt(t),t.data){var i=this._processFlatCoordsArray(t.data);this._flatCoords=i.flatCoords,this._flatCoordsOffset=i.flatCoordsOffset,i.flatCoords&&(t.data=new Float32Array(i.count))}a.prototype.mergeOption.apply(this,arguments)},r.prototype.appendData=function(t){var i=this._processFlatCoordsArray(t.data);i.flatCoords&&(this._flatCoords?(this._flatCoords=Object(y.concatArray)(this._flatCoords,i.flatCoords),this._flatCoordsOffset=Object(y.concatArray)(this._flatCoordsOffset,i.flatCoordsOffset)):(this._flatCoords=i.flatCoords,this._flatCoordsOffset=i.flatCoordsOffset),t.data=new Float32Array(i.count)),this.getRawData().appendData(t.data)},r.prototype._getCoordsFromItemModel=function(t){var i=this.getData().getItemModel(t),s=i.option instanceof Array?i.option:i.getShallow("coords");return s},r.prototype.getLineCoordsCount=function(t){return this._flatCoordsOffset?this._flatCoordsOffset[t*2+1]:this._getCoordsFromItemModel(t).length},r.prototype.getLineCoords=function(t,i){if(this._flatCoordsOffset){for(var s=this._flatCoordsOffset[t*2],l=this._flatCoordsOffset[t*2+1],f=0;f<l;f++)i[f]=i[f]||[],i[f][0]=this._flatCoords[s+f*2],i[f][1]=this._flatCoords[s+f*2+1];return l}else{for(var h=this._getCoordsFromItemModel(t),f=0;f<h.length;f++)i[f]=i[f]||[],i[f][0]=h[f][0],i[f][1]=h[f][1];return h.length}},r.prototype._processFlatCoordsArray=function(t){var i=0;if(this._flatCoords&&(i=this._flatCoords.length),typeof t[0]=="number"){for(var s=t.length,l=new Dt(s),f=new Et(s),h=0,d=0,p=0,m=0;m<s;){p++;var b=t[m++];l[d++]=h+i,l[d++]=b;for(var A=0;A<b;A++){var E=t[m++],P=t[m++];f[h++]=E,f[h++]=P,m>s}}return{flatCoordsOffset:new Uint32Array(l.buffer,0,d),flatCoords:f,count:p}}return{flatCoordsOffset:null,flatCoords:null,count:t.length}},r.prototype.getInitialData=function(t,i){if(!1)var s;var l=new Zn.a(["value"],this);return l.hasItemOption=!1,l.initData(t.data,[],function(f,h,d,p){if(f instanceof Array)return NaN;l.hasItemOption=!0;var m=f.value;if(m!=null)return m instanceof Array?m[p]:m}),l},r.prototype.formatTooltip=function(t,i,s){var l=this.getData(),f=l.getItemModel(t),h=f.get("name");if(h)return h;var d=f.get("fromName"),p=f.get("toName"),m=[];return d!=null&&m.push(d),p!=null&&m.push(p),Object(wn.c)("nameValue",{name:m.join(" > ")})},r.prototype.preventIncremental=function(){return!!this.get(["effect","show"])},r.prototype.getProgressive=function(){var t=this.option.progressive;return t==null?this.option.large?1e4:this.get("progressive"):t},r.prototype.getProgressiveThreshold=function(){var t=this.option.progressiveThreshold;return t==null?this.option.large?2e4:this.get("progressiveThreshold"):t},r.type="series.lines",r.dependencies=["grid","polar","geo","calendar"],r.defaultOption={coordinateSystem:"geo",zlevel:0,z:2,legendHoverLink:!0,xAxisIndex:0,yAxisIndex:0,symbol:["none","none"],symbolSize:[10,10],geoIndex:0,effect:{show:!1,period:4,constantSpeed:0,symbol:"circle",symbolSize:3,loop:!0,trailLength:.2},large:!1,largeThreshold:2e3,polyline:!1,clip:!0,label:{show:!1,position:"end"},lineStyle:{opacity:.5}},r}(Nr.a),$t=Ht;function qt(a){return a instanceof Array||(a=[a,a]),a}var le={seriesType:"lines",reset:function(a){var r=qt(a.get("symbol")),t=qt(a.get("symbolSize")),i=a.getData();i.setVisual("fromSymbol",r&&r[0]),i.setVisual("toSymbol",r&&r[1]),i.setVisual("fromSymbolSize",t&&t[0]),i.setVisual("toSymbolSize",t&&t[1]);function s(l,f){var h=l.getItemModel(f),d=qt(h.getShallow("symbol",!0)),p=qt(h.getShallow("symbolSize",!0));d[0]&&l.setItemVisual(f,"fromSymbol",d[0]),d[1]&&l.setItemVisual(f,"toSymbol",d[1]),p[0]&&l.setItemVisual(f,"fromSymbolSize",p[0]),p[1]&&l.setItemVisual(f,"toSymbolSize",p[1])}return{dataEach:i.hasItemOption?s:null}}},ie=le;function he(a){a.registerChartView(yt),a.registerSeriesModel($t),a.registerLayout(F),a.registerVisual(ie)}var Re=256,ze=function(){function a(){this.blurSize=30,this.pointSize=20,this.maxOpacity=1,this.minOpacity=0,this._gradientPixels={inRange:null,outOfRange:null};var r=y.createCanvas();this.canvas=r}return a.prototype.update=function(r,t,i,s,l,f){var h=this._getBrush(),d=this._getGradient(l,"inRange"),p=this._getGradient(l,"outOfRange"),m=this.pointSize+this.blurSize,b=this.canvas,A=b.getContext("2d"),E=r.length;b.width=t,b.height=i;for(var P=0;P<E;++P){var j=r[P],J=j[0],dt=j[1],St=j[2],Ot=s(St);A.globalAlpha=Ot,A.drawImage(h,J-m,dt-m)}if(!b.width||!b.height)return b;for(var wt=A.getImageData(0,0,b.width,b.height),zt=wt.data,jt=0,kt=zt.length,te=this.minOpacity,ue=this.maxOpacity,me=ue-te;jt<kt;){var Ot=zt[jt+3]/256,ve=Math.floor(Ot*(Re-1))*4;if(Ot>0){var Me=f(Ot)?d:p;Ot>0&&(Ot=Ot*me+te),zt[jt++]=Me[ve],zt[jt++]=Me[ve+1],zt[jt++]=Me[ve+2],zt[jt++]=Me[ve+3]*Ot*256}else jt+=4}return A.putImageData(wt,0,0),b},a.prototype._getBrush=function(){var r=this._brushCanvas||(this._brushCanvas=y.createCanvas()),t=this.pointSize+this.blurSize,i=t*2;r.width=i,r.height=i;var s=r.getContext("2d");return s.clearRect(0,0,i,i),s.shadowOffsetX=i,s.shadowBlur=this.blurSize,s.shadowColor="#000",s.beginPath(),s.arc(-t,t,this.pointSize,0,Math.PI*2,!0),s.closePath(),s.fill(),r},a.prototype._getGradient=function(r,t){for(var i=this._gradientPixels,s=i[t]||(i[t]=new Uint8ClampedArray(256*4)),l=[0,0,0,0],f=0,h=0;h<256;h++)r[t](h/255,!0,l),s[f++]=l[0],s[f++]=l[1],s[f++]=l[2],s[f++]=l[3];return s},a}(),Pe=ze;function Ke(a,r,t){var i=a[1]-a[0];r=y.map(r,function(f){return{interval:[(f.interval[0]-a[0])/i,(f.interval[1]-a[0])/i]}});var s=r.length,l=0;return function(f){var h;for(h=l;h<s;h++){var d=r[h].interval;if(d[0]<=f&&f<=d[1]){l=h;break}}if(h===s)for(h=l-1;h>=0;h--){var d=r[h].interval;if(d[0]<=f&&f<=d[1]){l=h;break}}return h>=0&&h<s&&t[h]}}function rr(a,r){var t=a[1]-a[0];return r=[(r[0]-a[0])/t,(r[1]-a[0])/t],function(i){return i>=r[0]&&i<=r[1]}}function Ue(a){var r=a.dimensions;return r[0]==="lng"&&r[1]==="lat"}var hr=function(a){Object(de.b)(r,a);function r(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=r.type,t}return r.prototype.render=function(t,i,s){var l;i.eachComponent("visualMap",function(h){h.eachTargetSeries(function(d){d===t&&(l=h)})}),this.group.removeAll(),this._incrementalDisplayable=null;var f=t.coordinateSystem;f.type==="cartesian2d"||f.type==="calendar"?this._renderOnCartesianAndCalendar(t,s,0,t.getData().count()):Ue(f)&&this._renderOnGeo(f,t,l,s)},r.prototype.incrementalPrepareRender=function(t,i,s){this.group.removeAll()},r.prototype.incrementalRender=function(t,i,s,l){var f=i.coordinateSystem;f&&(Ue(f)?this.render(i,s,l):this._renderOnCartesianAndCalendar(i,l,t.start,t.end,!0))},r.prototype._renderOnCartesianAndCalendar=function(t,i,s,l,f){var h=t.coordinateSystem,d,p,m,b;if(Fr(h,"cartesian2d")){var A=h.getAxis("x"),E=h.getAxis("y");d=A.getBandWidth(),p=E.getBandWidth(),m=A.scale.getExtent(),b=E.scale.getExtent()}for(var P=this.group,j=t.getData(),J=t.getModel(["emphasis","itemStyle"]).getItemStyle(),dt=t.getModel(["blur","itemStyle"]).getItemStyle(),St=t.getModel(["select","itemStyle"]).getItemStyle(),Ot=Object(Ar.f)(t),wt=t.get(["emphasis","focus"]),zt=t.get(["emphasis","blurScope"]),jt=Fr(h,"cartesian2d")?[j.mapDimension("x"),j.mapDimension("y"),j.mapDimension("value")]:[j.mapDimension("time"),j.mapDimension("value")],kt=s;kt<l;kt++){var te=void 0,ue=j.getItemVisual(kt,"style");if(Fr(h,"cartesian2d")){var me=j.get(jt[0],kt),ve=j.get(jt[1],kt);if(isNaN(j.get(jt[2],kt))||me<m[0]||me>m[1]||ve<b[0]||ve>b[1])continue;var Me=h.dataToPoint([me,ve]);te=new nn.a({shape:{x:Math.floor(Math.round(Me[0])-d/2),y:Math.floor(Math.round(Me[1])-p/2),width:Math.ceil(d),height:Math.ceil(p)},style:ue})}else{if(isNaN(j.get(jt[1],kt)))continue;te=new nn.a({z2:1,shape:h.dataToRect([j.get(jt[0],kt)]).contentShape,style:ue})}var Ee=j.getItemModel(kt);if(j.hasItemOption){var Oe=Ee.getModel("emphasis");J=Oe.getModel("itemStyle").getItemStyle(),dt=Ee.getModel(["blur","itemStyle"]).getItemStyle(),St=Ee.getModel(["select","itemStyle"]).getItemStyle(),wt=Oe.get("focus"),zt=Oe.get("blurScope"),Ot=Object(Ar.f)(Ee)}var we=t.getRawValue(kt),We="-";we&&we[2]!=null&&(We=we[2]+""),Object(Ar.h)(te,Ot,{labelFetcher:t,labelDataIndex:kt,defaultOpacity:ue.opacity,defaultText:We}),te.ensureState("emphasis").style=J,te.ensureState("blur").style=dt,te.ensureState("select").style=St,Object(qe.o)(te,wt,zt),te.incremental=f,f&&(te.states.emphasis.hoverLayer=!0),P.add(te),j.setItemGraphicEl(kt,te)}},r.prototype._renderOnGeo=function(t,i,s,l){var f=s.targetVisuals.inRange,h=s.targetVisuals.outOfRange,d=i.getData(),p=this._hmLayer||this._hmLayer||new Pe;p.blurSize=i.get("blurSize"),p.pointSize=i.get("pointSize"),p.minOpacity=i.get("minOpacity"),p.maxOpacity=i.get("maxOpacity");var m=t.getViewRect().clone(),b=t.getRoamTransform();m.applyTransform(b);var A=Math.max(m.x,0),E=Math.max(m.y,0),P=Math.min(m.width+m.x,l.getWidth()),j=Math.min(m.height+m.y,l.getHeight()),J=P-A,dt=j-E,St=[d.mapDimension("lng"),d.mapDimension("lat"),d.mapDimension("value")],Ot=d.mapArray(St,function(kt,te,ue){var me=t.dataToPoint([kt,te]);return me[0]-=A,me[1]-=E,me.push(ue),me}),wt=s.getExtent(),zt=s.type==="visualMap.continuous"?rr(wt,s.option.range):Ke(wt,s.getPieceList(),s.option.selected);p.update(Ot,J,dt,f.color.getNormalizer(),{inRange:f.color.getColorMapper(),outOfRange:h.color.getColorMapper()},zt);var jt=new it.a({style:{width:J,height:dt,x:A,y:E,image:p.canvas},silent:!0});this.group.add(jt)},r.type="heatmap",r}(yn.a),ke=hr,Lr=function(a){Object(de.b)(r,a);function r(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=r.type,t}return r.prototype.getInitialData=function(t,i){return Object(_r.a)(this.getSource(),this,{generateCoord:"value"})},r.prototype.preventIncremental=function(){var t=ju.a.get(this.get("coordinateSystem"));if(t&&t.dimensions)return t.dimensions[0]==="lng"&&t.dimensions[1]==="lat"},r.type="series.heatmap",r.dependencies=["grid","geo","calendar"],r.defaultOption={coordinateSystem:"cartesian2d",zlevel:0,z:2,geoIndex:0,blurSize:30,pointSize:20,maxOpacity:1,minOpacity:0,select:{itemStyle:{borderColor:"#212121"}}},r}(Nr.a),yr=Lr;function xr(a){a.registerChartView(ke),a.registerSeriesModel(yr)}var Sr=["itemStyle","borderWidth"],mr=[{xy:"x",wh:"width",index:0,posDesc:["left","right"]},{xy:"y",wh:"height",index:1,posDesc:["top","bottom"]}],on=new Ss.a,Or=function(a){Object(de.b)(r,a);function r(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=r.type,t}return r.prototype.render=function(t,i,s){var l=this.group,f=t.getData(),h=this._data,d=t.coordinateSystem,p=d.getBaseAxis(),m=p.isHorizontal(),b=d.master.getRect(),A={ecSize:{width:s.getWidth(),height:s.getHeight()},seriesModel:t,coordSys:d,coordSysExtent:[[b.x,b.x+b.width],[b.y,b.y+b.height]],isHorizontal:m,valueDim:mr[+m],categoryDim:mr[1-+m]};return f.diff(h).add(function(E){if(!!f.hasValue(E)){var P=Zs(f,E),j=Sn(f,E,P,A),J=Gi(f,A,j);f.setItemGraphicEl(E,J),l.add(J),$y(J,A,j)}}).update(function(E,P){var j=h.getItemGraphicEl(P);if(!f.hasValue(E)){l.remove(j);return}var J=Zs(f,E),dt=Sn(f,E,J,A),St=Jy(f,dt);j&&St!==j.__pictorialShapeStr&&(l.remove(j),f.setItemGraphicEl(E,null),j=null),j?Ka(j,A,dt):j=Gi(f,A,dt,!0),f.setItemGraphicEl(E,j),j.__pictorialSymbolMeta=dt,l.add(j),$y(j,A,dt)}).remove(function(E){var P=h.getItemGraphicEl(E);P&&tf(h,E,P.__pictorialSymbolMeta.animationModel,P)}).execute(),this._data=f,this.group},r.prototype.remove=function(t,i){var s=this.group,l=this._data;t.get("animation")?l&&l.eachItemGraphicEl(function(f){tf(l,Object(Ur.a)(f).dataIndex,t,f)}):s.removeAll()},r.type="pictorialBar",r}(yn.a);function Sn(a,r,t,i){var s=a.getItemLayout(r),l=t.get("symbolRepeat"),f=t.get("symbolClip"),h=t.get("symbolPosition")||"start",d=t.get("symbolRotate"),p=(d||0)*Math.PI/180||0,m=t.get("symbolPatternSize")||2,b=t.isAnimationEnabled(),A={dataIndex:r,layout:s,itemModel:t,symbolType:a.getItemVisual(r,"symbol")||"circle",style:a.getItemVisual(r,"style"),symbolClip:f,symbolRepeat:l,symbolRepeatDirection:t.get("symbolRepeatDirection"),symbolPatternSize:m,rotation:p,animationModel:b?t:null,hoverScale:b&&t.get(["emphasis","scale"]),z2:t.getShallow("z",!0)||0};rn(t,l,s,i,A),En(a,r,s,l,f,A.boundingLength,A.pxSign,m,i,A),tn(t,A.symbolScale,p,i,A);var E=A.symbolSize,P=t.get("symbolOffset");return y.isArray(P)&&(P=[Object(Ne.o)(P[0],E[0]),Object(Ne.o)(P[1],E[1])]),li(t,E,s,l,f,P,h,A.valueLineWidth,A.boundingLength,A.repeatCutLength,i,A),A}function rn(a,r,t,i,s){var l=i.valueDim,f=a.get("symbolBoundingData"),h=i.coordSys.getOtherAxis(i.coordSys.getBaseAxis()),d=h.toGlobalCoord(h.dataToCoord(0)),p=1-+(t[l.wh]<=0),m;if(y.isArray(f)){var b=[mn(h,f[0])-d,mn(h,f[1])-d];b[1]<b[0]&&b.reverse(),m=b[p]}else f!=null?m=mn(h,f)-d:r?m=i.coordSysExtent[l.index][p]-d:m=t[l.wh];s.boundingLength=m,r&&(s.repeatCutLength=t[l.wh]),s.pxSign=m>0?1:m<0?-1:0}function mn(a,r){return a.toGlobalCoord(a.dataToCoord(a.scale.parse(r)))}function En(a,r,t,i,s,l,f,h,d,p){var m=d.valueDim,b=d.categoryDim,A=Math.abs(t[b.wh]),E=a.getItemVisual(r,"symbolSize"),P;y.isArray(E)?P=E.slice():E==null?P=["100%","100%"]:P=[E,E],P[b.index]=Object(Ne.o)(P[b.index],A),P[m.index]=Object(Ne.o)(P[m.index],i?A:Math.abs(l)),p.symbolSize=P;var j=p.symbolScale=[P[0]/h,P[1]/h];j[m.index]*=(d.isHorizontal?-1:1)*f}function tn(a,r,t,i,s){var l=a.get(Sr)||0;l&&(on.attr({scaleX:r[0],scaleY:r[1],rotation:t}),on.updateTransform(),l/=on.getLineScale(),l*=r[i.valueDim.index]),s.valueLineWidth=l}function li(a,r,t,i,s,l,f,h,d,p,m,b){var A=m.categoryDim,E=m.valueDim,P=b.pxSign,j=Math.max(r[E.index]+h,0),J=j;if(i){var dt=Math.abs(d),St=y.retrieve(a.get("symbolMargin"),"15%")+"",Ot=!1;St.lastIndexOf("!")===St.length-1&&(Ot=!0,St=St.slice(0,St.length-1));var wt=Object(Ne.o)(St,r[E.index]),zt=Math.max(j+wt*2,0),jt=Ot?0:wt*2,kt=Object(Ne.i)(i),te=kt?i:qy((dt+jt)/zt),ue=dt-te*j;wt=ue/2/(Ot?te:te-1),zt=j+wt*2,jt=Ot?0:wt*2,!kt&&i!=="fixed"&&(te=p?qy((Math.abs(p)+jt)/zt):0),J=te*zt-jt,b.repeatTimes=te,b.symbolMargin=wt}var me=P*(J/2),ve=b.pathPosition=[];ve[A.index]=t[A.wh]/2,ve[E.index]=f==="start"?me:f==="end"?d-me:d/2,l&&(ve[0]+=l[0],ve[1]+=l[1]);var Me=b.bundlePosition=[];Me[A.index]=t[A.xy],Me[E.index]=t[E.xy];var Ee=b.barRectShape=y.extend({},t);Ee[E.wh]=P*Math.max(Math.abs(t[E.wh]),Math.abs(ve[E.index]+me)),Ee[A.wh]=t[A.wh];var Oe=b.clipShape={};Oe[A.xy]=-t[A.xy],Oe[A.wh]=m.ecSize[A.wh],Oe[E.xy]=0,Oe[E.wh]=t[E.wh]}function Ln(a){var r=a.symbolPatternSize,t=Object(lr.a)(a.symbolType,-r/2,-r/2,r,r);return t.attr({culling:!0}),t.type!=="image"&&t.setStyle({strokeNoScale:!0}),t}function jn(a,r,t,i){var s=a.__pictorialBundle,l=t.symbolSize,f=t.valueLineWidth,h=t.pathPosition,d=r.valueDim,p=t.repeatTimes||0,m=0,b=l[r.valueDim.index]+f+t.symbolMargin*2;for(Em(a,function(j){j.__pictorialAnimationIndex=m,j.__pictorialRepeatTimes=p,m<p?ef(j,null,P(m),t,i):ef(j,null,{scaleX:0,scaleY:0},t,i,function(){s.remove(j)}),m++});m<p;m++){var A=Ln(t);A.__pictorialAnimationIndex=m,A.__pictorialRepeatTimes=p,s.add(A);var E=P(m);ef(A,{x:E.x,y:E.y,scaleX:0,scaleY:0},{scaleX:E.scaleX,scaleY:E.scaleY,rotation:E.rotation},t,i)}function P(j){var J=h.slice(),dt=t.pxSign,St=j;return(t.symbolRepeatDirection==="start"?dt>0:dt<0)&&(St=p-1-j),J[d.index]=b*(St-p/2+.5)+h[d.index],{x:J[0],y:J[1],scaleX:t.symbolScale[0],scaleY:t.symbolScale[1],rotation:t.rotation}}}function ui(a,r,t,i){var s=a.__pictorialBundle,l=a.__pictorialMainPath;l?ef(l,null,{x:t.pathPosition[0],y:t.pathPosition[1],scaleX:t.symbolScale[0],scaleY:t.symbolScale[1],rotation:t.rotation},t,i):(l=a.__pictorialMainPath=Ln(t),s.add(l),ef(l,{x:t.pathPosition[0],y:t.pathPosition[1],scaleX:0,scaleY:0,rotation:t.rotation},{scaleX:t.symbolScale[0],scaleY:t.symbolScale[1]},t,i))}function $n(a,r,t){var i=y.extend({},r.barRectShape),s=a.__pictorialBarRect;s?ef(s,null,{shape:i},r,t):(s=a.__pictorialBarRect=new nn.a({z2:2,shape:i,silent:!0,style:{stroke:"transparent",fill:"transparent",lineWidth:0}}),a.add(s))}function qn(a,r,t,i){if(t.symbolClip){var s=a.__pictorialClipPath,l=y.extend({},t.clipShape),f=r.valueDim,h=t.animationModel,d=t.dataIndex;if(s)Ze.updateProps(s,{shape:l},h,d);else{l[f.wh]=0,s=new nn.a({shape:l}),a.__pictorialBundle.setClipPath(s),a.__pictorialClipPath=s;var p={};p[f.wh]=t.clipShape[f.wh],Ze[i?"updateProps":"initProps"](s,{shape:p},h,d)}}}function Zs(a,r){var t=a.getItemModel(r);return t.getAnimationDelayParams=Zi,t.isAnimationEnabled=ta,t}function Zi(a){return{index:a.__pictorialAnimationIndex,count:a.__pictorialRepeatTimes}}function ta(){return this.parentModel.isAnimationEnabled()&&!!this.getShallow("animation")}function Gi(a,r,t,i){var s=new pr.a,l=new pr.a;return s.add(l),s.__pictorialBundle=l,l.x=t.bundlePosition[0],l.y=t.bundlePosition[1],t.symbolRepeat?jn(s,r,t):ui(s,r,t),$n(s,t,i),qn(s,r,t,i),s.__pictorialShapeStr=Jy(a,t),s.__pictorialSymbolMeta=t,s}function Ka(a,r,t){var i=t.animationModel,s=t.dataIndex,l=a.__pictorialBundle;Ze.updateProps(l,{x:t.bundlePosition[0],y:t.bundlePosition[1]},i,s),t.symbolRepeat?jn(a,r,t,!0):ui(a,r,t,!0),$n(a,t,!0),qn(a,r,t,!0)}function tf(a,r,t,i){var s=i.__pictorialBarRect;s&&s.removeTextContent();var l=[];Em(i,function(f){l.push(f)}),i.__pictorialMainPath&&l.push(i.__pictorialMainPath),i.__pictorialClipPath&&(t=null),y.each(l,function(f){Ze.removeElement(f,{scaleX:0,scaleY:0},t,r,function(){i.parent&&i.parent.remove(i)})}),a.setItemGraphicEl(r,null)}function Jy(a,r){return[a.getItemVisual(r.dataIndex,"symbol")||"none",!!r.symbolRepeat,!!r.symbolClip].join(":")}function Em(a,r,t){y.each(a.__pictorialBundle.children(),function(i){i!==a.__pictorialBarRect&&r.call(t,i)})}function ef(a,r,t,i,s,l){r&&a.attr(r),i.symbolClip&&!s?t&&a.attr(t):t&&Ze[s?"updateProps":"initProps"](a,t,i.animationModel,i.dataIndex,l)}function $y(a,r,t){var i=t.dataIndex,s=t.itemModel,l=s.getModel("emphasis"),f=l.getModel("itemStyle").getItemStyle(),h=s.getModel(["blur","itemStyle"]).getItemStyle(),d=s.getModel(["select","itemStyle"]).getItemStyle(),p=s.getShallow("cursor"),m=l.get("focus"),b=l.get("blurScope"),A=l.get("scale");Em(a,function(j){if(j instanceof it.a){var J=j.style;j.useStyle(y.extend({image:J.image,x:J.x,y:J.y,width:J.width,height:J.height},t.style))}else j.useStyle(t.style);var dt=j.ensureState("emphasis");dt.style=f,A&&(dt.scaleX=j.scaleX*1.1,dt.scaleY=j.scaleY*1.1),j.ensureState("blur").style=h,j.ensureState("select").style=d,p&&(j.cursor=p),j.z2=t.z2});var E=r.valueDim.posDesc[+(t.boundingLength>0)],P=a.__pictorialBarRect;Object(Ar.h)(P,Object(Ar.f)(s),{labelFetcher:r.seriesModel,labelDataIndex:i,defaultText:Oa(r.seriesModel.getData(),i),inheritColor:t.style.fill,defaultOpacity:t.style.opacity,defaultOutsidePosition:E}),Object(qe.o)(a,m,b)}function qy(a){var r=Math.round(a);return Math.abs(a-r)<1e-4?r:Math.ceil(a)}var Kx=Or,kx=function(a){Object(de.b)(r,a);function r(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=r.type,t.hasSymbolVisual=!0,t.defaultSymbol="roundRect",t}return r.prototype.getInitialData=function(t){return t.stack=null,a.prototype.getInitialData.apply(this,arguments)},r.type="series.pictorialBar",r.dependencies=["grid"],r.defaultOption=Object(ni.d)(ri.defaultOption,{symbol:"circle",symbolSize:null,symbolRotate:null,symbolPosition:null,symbolOffset:null,symbolMargin:null,symbolRepeat:!1,symbolRepeatDirection:"end",symbolClip:!1,symbolBoundingData:null,symbolPatternSize:400,barGap:"-100%",progressive:0,emphasis:{scale:!1},select:{itemStyle:{borderColor:"#212121"}}}),r}(ri),Qx=kx;function Jx(a){a.registerChartView(Kx),a.registerSeriesModel(Qx),a.registerLayout(Object(y.curry)(Wr.c,"pictorialBar"))}var $x=function(a){Object(de.b)(r,a);function r(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=r.type,t._layers=[],t}return r.prototype.render=function(t,i,s){var l=t.getData(),f=this,h=this.group,d=t.getLayerSeries(),p=l.getLayout("layoutInfo"),m=p.rect,b=p.boundaryGap;h.x=0,h.y=m.y+b[0];function A(J){return J.name}var E=new Ai.a(this._layersSeries||[],d,A,A),P=[];E.add(Object(y.bind)(j,this,"add")).update(Object(y.bind)(j,this,"update")).remove(Object(y.bind)(j,this,"remove")).execute();function j(J,dt,St){var Ot=f._layers;if(J==="remove"){h.remove(Ot[dt]);return}for(var wt=[],zt=[],jt,kt=d[dt].indices,te=0;te<kt.length;te++){var ue=l.getItemLayout(kt[te]),me=ue.x,ve=ue.y0,Me=ue.y;wt.push(me,ve),zt.push(me,ve+Me),jt=l.getItemVisual(kt[te],"style")}var Ee,Oe=l.getItemLayout(kt[0]),we=t.getModel("label"),We=we.get("margin"),$e=t.getModel("emphasis");if(J==="add"){var Je=P[dt]=new pr.a;Ee=new or({shape:{points:wt,stackedOnPoints:zt,smooth:.4,stackedOnSmooth:.4,smoothConstraint:!1},z2:0}),Je.add(Ee),h.add(Je),t.isAnimationEnabled()&&Ee.setClipPath(qx(Ee.getBoundingRect(),t,function(){Ee.removeClipPath()}))}else{var Je=Ot[St];Ee=Je.childAt(0),h.add(Je),P[dt]=Je,Ze.updateProps(Ee,{shape:{points:wt,stackedOnPoints:zt}},t)}Object(Ar.h)(Ee,Object(Ar.f)(t),{labelDataIndex:kt[te-1],defaultText:l.getName(kt[te-1]),inheritColor:jt.fill},{normal:{verticalAlign:"middle"}}),Ee.setTextConfig({position:null,local:!0});var fr=Ee.getTextContent();fr&&(fr.x=Oe.x-We,fr.y=Oe.y0+Oe.y/2),Ee.useStyle(jt),l.setItemGraphicEl(dt,Ee),Object(qe.I)(Ee,t),Object(qe.o)(Ee,$e.get("focus"),$e.get("blurScope"))}this._layersSeries=d,this._layers=P},r.type="themeRiver",r}(yn.a);function qx(a,r,t){var i=new nn.a({shape:{x:a.x-10,y:a.y-10,width:0,height:a.height+20}});return Ze.initProps(i,{shape:{x:a.x-50,width:a.width+100,height:a.height+20}},r,t),i}var tb=$x,Lm=2,eb=function(a){Object(de.b)(r,a);function r(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=r.type,t.useColorPaletteOnData=!0,t}return r.prototype.init=function(t){a.prototype.init.apply(this,arguments),this.legendVisualProvider=new xn(y.bind(this.getData,this),y.bind(this.getRawData,this))},r.prototype.fixData=function(t){var i=t.length,s={},l=Object(sr.j)(t,function(A){return s.hasOwnProperty(A[0]+"")||(s[A[0]+""]=-1),A[2]}),f=[];l.buckets.each(function(A,E){f.push({name:E,dataList:A})});for(var h=f.length,d=0;d<h;++d){for(var p=f[d].name,m=0;m<f[d].dataList.length;++m){var b=f[d].dataList[m][0]+"";s[b]=d}for(var b in s)s.hasOwnProperty(b)&&s[b]!==d&&(s[b]=d,t[i]=[b,0,p],i++)}return t},r.prototype.getInitialData=function(t,i){for(var s=this.getReferringComponents("singleAxis",sr.b).models[0],l=s.get("type"),f=y.filter(t.data,function(P){return P[2]!==void 0}),h=this.fixData(f||[]),d=[],p=this.nameMap=y.createHashMap(),m=0,b=0;b<h.length;++b)d.push(h[b][Lm]),p.get(h[b][Lm])||(p.set(h[b][Lm],m),m++);var A=Object(No.a)(h,{coordDimensions:["single"],dimensionsDefine:[{name:"time",type:Object(Rc.a)(l)},{name:"value",type:"float"},{name:"name",type:"ordinal"}],encodeDefine:{single:0,value:1,itemName:2}}),E=new Zn.a(A,this);return E.initData(h),E},r.prototype.getLayerSeries=function(){for(var t=this.getData(),i=t.count(),s=[],l=0;l<i;++l)s[l]=l;var f=t.mapDimension("single"),h=Object(sr.j)(s,function(p){return t.get("name",p)}),d=[];return h.buckets.each(function(p,m){p.sort(function(b,A){return t.get(f,b)-t.get(f,A)}),d.push({name:m,indices:p})}),d},r.prototype.getAxisTooltipData=function(t,i,s){y.isArray(t)||(t=t?[t]:[]);for(var l=this.getData(),f=this.getLayerSeries(),h=[],d=f.length,p,m=0;m<d;++m){for(var b=Number.MAX_VALUE,A=-1,E=f[m].indices.length,P=0;P<E;++P){var j=l.get(t[0],f[m].indices[P]),J=Math.abs(j-i);J<=b&&(p=j,b=J,A=f[m].indices[P])}h.push(A)}return{dataIndices:h,nestestValue:p}},r.prototype.formatTooltip=function(t,i,s){var l=this.getData(),f=l.getName(t),h=l.get(l.mapDimension("value"),t);return Object(wn.c)("nameValue",{name:f,value:h})},r.type="series.themeRiver",r.dependencies=["singleAxis"],r.defaultOption={zlevel:0,z:2,coordinateSystem:"singleAxis",boundaryGap:["10%","10%"],singleAxisIndex:0,animationEasing:"linear",label:{margin:4,show:!0,position:"left",fontSize:11},emphasis:{label:{show:!0}}},r}(Nr.a),rb=eb;function nb(a,r){a.eachSeriesByType("themeRiver",function(t){var i=t.getData(),s=t.coordinateSystem,l={},f=s.getRect();l.rect=f;var h=t.get("boundaryGap"),d=s.getAxis();if(l.boundaryGap=h,d.orient==="horizontal"){h[0]=Ne.o(h[0],f.height),h[1]=Ne.o(h[1],f.height);var p=f.height-h[0]-h[1];t0(i,t,p)}else{h[0]=Ne.o(h[0],f.width),h[1]=Ne.o(h[1],f.width);var m=f.width-h[0]-h[1];t0(i,t,m)}i.setLayout("layoutInfo",l)})}function t0(a,r,t){if(!!a.count())for(var i=r.coordinateSystem,s=r.getLayerSeries(),l=a.mapDimension("single"),f=a.mapDimension("value"),h=y.map(s,function(J){return y.map(J.indices,function(dt){var St=i.dataToPoint(a.get(l,dt));return St[1]=a.get(f,dt),St})}),d=ib(h),p=d.y0,m=t/d.max,b=s.length,A=s[0].indices.length,E,P=0;P<A;++P){E=p[P]*m,a.setItemLayout(s[0].indices[P],{layerIndex:0,x:h[0][P][0],y0:E,y:h[0][P][1]*m});for(var j=1;j<b;++j)E+=h[j-1][P][1]*m,a.setItemLayout(s[j].indices[P],{layerIndex:j,x:h[j][P][0],y0:E,y:h[j][P][1]*m})}}function ib(a){for(var r=a.length,t=a[0].length,i=[],s=[],l=0,f=0;f<t;++f){for(var h=0,d=0;d<r;++d)h+=a[d][f][1];h>l&&(l=h),i.push(h)}for(var p=0;p<t;++p)s[p]=(l-i[p])/2;l=0;for(var m=0;m<t;++m){var b=i[m]+s[m];b>l&&(l=b)}return{y0:s,max:l}}function ab(a){a.registerChartView(tb),a.registerSeriesModel(rb),a.registerLayout(nb),a.registerProcessor(da("themeRiver"))}var ob=2,sb=4,lb=function(a){Object(de.b)(r,a);function r(t,i,s,l){var f=a.call(this)||this;f.z2=ob,f.textConfig={inside:!0},Object(Ur.a)(f).seriesIndex=i.seriesIndex;var h=new en.a({z2:sb,silent:t.getModel().get(["label","silent"])});return f.setTextContent(h),f.updateData(!0,t,i,s,l),f}return r.prototype.updateData=function(t,i,s,l,f){this.node=i,i.piece=this,s=s||this._seriesModel,l=l||this._ecModel;var h=this;Object(Ur.a)(h).dataIndex=i.dataIndex;var d=i.getModel(),p=d.getModel("emphasis"),m=i.getLayout(),b=y.extend({},m);b.label=null;var A=i.getVisual("style");A.lineJoin="bevel";var E=i.getVisual("decal");E&&(A.decal=Object(gu.a)(E,f));var P=Na(d.getModel("itemStyle"),b);y.extend(b,P),y.each(qe.g,function(St){var Ot=h.ensureState(St),wt=d.getModel([St,"itemStyle"]);Ot.style=wt.getItemStyle();var zt=Na(wt,b);zt&&(Ot.shape=zt)}),t?(h.setShape(b),h.shape.r=m.r0,Ze.updateProps(h,{shape:{r:m.r}},s,i.dataIndex)):Ze.updateProps(h,{shape:b},s),h.useStyle(A),this._updateLabel(s);var j=d.getShallow("cursor");j&&h.attr("cursor",j),this._seriesModel=s||this._seriesModel,this._ecModel=l||this._ecModel;var J=p.get("focus"),dt=J==="ancestor"?i.getAncestorsIndices():J==="descendant"?i.getDescendantIndices():J;Object(qe.o)(this,dt,p.get("blurScope"))},r.prototype._updateLabel=function(t){var i=this,s=this.node.getModel(),l=s.getModel("label"),f=this.node.getLayout(),h=f.endAngle-f.startAngle,d=(f.startAngle+f.endAngle)/2,p=Math.cos(d),m=Math.sin(d),b=this,A=b.getTextContent(),E=this.node.dataIndex,P=l.get("minAngle")/180*Math.PI,j=l.get("show")&&!(P!=null&&Math.abs(h)<P);A.ignore=!j,y.each(qe.a,function(dt){var St=dt==="normal"?s.getModel("label"):s.getModel([dt,"label"]),Ot=dt==="normal",wt=Ot?A:A.ensureState(dt),zt=t.getFormattedLabel(E,dt);Ot&&(zt=zt||i.node.name),wt.style=Object(Ar.c)(St,{},null,dt!=="normal",!0),zt&&(wt.style.text=zt);var jt=St.get("show");jt!=null&&!Ot&&(wt.ignore=!jt);var kt=J(St,"position"),te=Ot?b:b.states[dt],ue=te.style.fill;te.textConfig={outsideFill:St.get("color")==="inherit"?ue:null,inside:kt!=="outside"};var me,ve=J(St,"distance")||0,Me=J(St,"align");kt==="outside"?(me=f.r+ve,Me=d>Math.PI/2?"right":"left"):!Me||Me==="center"?(me=(f.r+f.r0)/2,Me="center"):Me==="left"?(me=f.r0+ve,d>Math.PI/2&&(Me="right")):Me==="right"&&(me=f.r-ve,d>Math.PI/2&&(Me="left")),wt.style.align=Me,wt.style.verticalAlign=J(St,"verticalAlign")||"middle",wt.x=me*p+f.cx,wt.y=me*m+f.cy;var Ee=J(St,"rotate"),Oe=0;Ee==="radial"?(Oe=-d,Oe<-Math.PI/2&&(Oe+=Math.PI)):Ee==="tangential"?(Oe=Math.PI/2-d,Oe>Math.PI/2?Oe-=Math.PI:Oe<-Math.PI/2&&(Oe+=Math.PI)):typeof Ee=="number"&&(Oe=Ee*Math.PI/180),wt.rotation=Oe});function J(dt,St){var Ot=dt.get(St);return Ot==null?l.get(St):Ot}A.dirtyStyle()},r}(vi.a),e0=lb,Pm="sunburstRootToNode",r0="sunburstHighlight",ub="sunburstUnhighlight";function fb(a){a.registerAction({type:Pm,update:"updateView"},function(r,t){t.eachComponent({mainType:"series",subType:"sunburst",query:r},i);function i(s,l){var f=bl(r,[Pm],s);if(f){var h=s.getViewRoot();h&&(r.direction=_l(h,f.node)?"rollUp":"drillDown"),s.resetViewRoot(f.node)}}}),a.registerAction({type:r0,update:"none"},function(r,t,i){r=Object(y.extend)({},r),t.eachComponent({mainType:"series",subType:"sunburst",query:r},s);function s(l){var f=bl(r,[r0],l);f&&(r.dataIndex=f.node.dataIndex)}i.dispatchAction(Object(y.extend)(r,{type:"highlight"}))}),a.registerAction({type:ub,update:"updateView"},function(r,t,i){r=Object(y.extend)({},r),i.dispatchAction(Object(y.extend)(r,{type:"downplay"}))})}var cb=function(a){Object(de.b)(r,a);function r(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=r.type,t}return r.prototype.render=function(t,i,s,l){var f=this;this.seriesModel=t,this.api=s,this.ecModel=i;var h=t.getData(),d=h.tree.root,p=t.getViewRoot(),m=this.group,b=t.get("renderLabelForZeroData"),A=[];p.eachNode(function(St){A.push(St)});var E=this._oldChildren||[];P(A,E),dt(d,p),this._initEvents(),this._oldChildren=A;function P(St,Ot){if(St.length===0&&Ot.length===0)return;new Ai.a(Ot,St,wt,wt).add(zt).update(zt).remove(y.curry(zt,null)).execute();function wt(jt){return jt.getId()}function zt(jt,kt){var te=jt==null?null:St[jt],ue=kt==null?null:Ot[kt];j(te,ue)}}function j(St,Ot){if(!b&&St&&!St.getValue()&&(St=null),St!==d&&Ot!==d){if(Ot&&Ot.piece)St?(Ot.piece.updateData(!1,St,t,i,s),h.setItemGraphicEl(St.dataIndex,Ot.piece)):J(Ot);else if(St){var wt=new e0(St,t,i,s);m.add(wt),h.setItemGraphicEl(St.dataIndex,wt)}}}function J(St){!St||St.piece&&(m.remove(St.piece),St.piece=null)}function dt(St,Ot){Ot.depth>0?(f.virtualPiece?f.virtualPiece.updateData(!1,St,t,i,s):(f.virtualPiece=new e0(St,t,i,s),m.add(f.virtualPiece)),Ot.piece.off("click"),f.virtualPiece.on("click",function(wt){f._rootToNode(Ot.parentNode)})):f.virtualPiece&&(m.remove(f.virtualPiece),f.virtualPiece=null)}},r.prototype._initEvents=function(){var t=this;this.group.off("click"),this.group.on("click",function(i){var s=!1,l=t.seriesModel.getViewRoot();l.eachNode(function(f){if(!s&&f.piece&&f.piece===i.target){var h=f.getModel().get("nodeClick");if(h==="rootToNode")t._rootToNode(f);else if(h==="link"){var d=f.getModel(),p=d.get("link");if(p){var m=d.get("target",!0)||"_blank";Object(Pr.l)(p,m)}}s=!0}})})},r.prototype._rootToNode=function(t){t!==this.seriesModel.getViewRoot()&&this.api.dispatchAction({type:Pm,from:this.uid,seriesId:this.seriesModel.id,targetNode:t})},r.prototype.containPoint=function(t,i){var s=i.getData(),l=s.getItemLayout(0);if(l){var f=t[0]-l.cx,h=t[1]-l.cy,d=Math.sqrt(f*f+h*h);return d<=l.r&&d>=l.r0}},r.type="sunburst",r}(yn.a),hb=cb,vb=function(a){Object(de.b)(r,a);function r(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=r.type,t.ignoreStyleOnData=!0,t}return r.prototype.getInitialData=function(t,i){var s={name:t.name,children:t.data};n0(s);var l=y.map(t.levels||[],function(d){return new Ye.a(d,this,i)},this),f=xl.createTree(s,this,h);function h(d){d.wrapMethod("getItemModel",function(p,m){var b=f.getNodeByDataIndex(m),A=l[b.depth];return A&&(p.parentModel=A),p})}return f.data},r.prototype.optionUpdated=function(){this.resetViewRoot()},r.prototype.getDataParams=function(t){var i=a.prototype.getDataParams.apply(this,arguments),s=this.getData().tree.getNodeByDataIndex(t);return i.treePathInfo=Cu(s,this),i},r.prototype.getViewRoot=function(){return this._viewRoot},r.prototype.resetViewRoot=function(t){t?this._viewRoot=t:t=this._viewRoot;var i=this.getRawData().tree.root;(!t||t!==i&&!i.contains(t))&&(this._viewRoot=i)},r.prototype.enableAriaDecal=function(){Xf(this)},r.type="series.sunburst",r.defaultOption={zlevel:0,z:2,center:["50%","50%"],radius:[0,"75%"],clockwise:!0,startAngle:90,minAngle:0,stillShowZeroSum:!0,nodeClick:"rootToNode",renderLabelForZeroData:!1,label:{rotate:"radial",show:!0,opacity:1,align:"center",position:"inside",distance:5,silent:!0},itemStyle:{borderWidth:1,borderColor:"white",borderType:"solid",shadowBlur:0,shadowColor:"rgba(0, 0, 0, 0.2)",shadowOffsetX:0,shadowOffsetY:0,opacity:1},emphasis:{focus:"descendant"},blur:{itemStyle:{opacity:.2},label:{opacity:.1}},animationType:"expansion",animationDuration:1e3,animationDurationUpdate:500,data:[],levels:[],sort:"desc"},r}(Nr.a);function n0(a){var r=0;y.each(a.children,function(i){n0(i);var s=i.value;y.isArray(s)&&(s=s[0]),r+=s});var t=a.value;y.isArray(t)&&(t=t[0]),(t==null||isNaN(t))&&(t=r),t<0&&(t=0),y.isArray(a.value)?a.value[0]=t:a.value=t}var db=vb,i0=Math.PI/180;function pb(a,r,t){r.eachSeriesByType(a,function(i){var s=i.get("center"),l=i.get("radius");y.isArray(l)||(l=[0,l]),y.isArray(s)||(s=[s,s]);var f=t.getWidth(),h=t.getHeight(),d=Math.min(f,h),p=Object(Ne.o)(s[0],f),m=Object(Ne.o)(s[1],h),b=Object(Ne.o)(l[0],d/2),A=Object(Ne.o)(l[1],d/2),E=-i.get("startAngle")*i0,P=i.get("minAngle")*i0,j=i.getData().tree.root,J=i.getViewRoot(),dt=J.depth,St=i.get("sort");St!=null&&a0(J,St);var Ot=0;y.each(J.children,function(We){!isNaN(We.getValue())&&Ot++});var wt=J.getValue(),zt=Math.PI/(wt||Ot)*2,jt=J.depth>0,kt=J.height-(jt?-1:1),te=(A-b)/(kt||1),ue=i.get("clockwise"),me=i.get("stillShowZeroSum"),ve=ue?1:-1,Me=function(We,$e){if(!!We){var Je=$e;if(We!==j){var fr=We.getValue(),Vr=wt===0&&me?zt:fr*zt;Vr<P&&(Vr=P),Je=$e+ve*Vr;var wr=We.depth-dt-(jt?-1:1),jr=b+te*wr,Yn=b+te*(wr+1),bn=We.getModel();bn.get("r0")!=null&&(jr=Object(Ne.o)(bn.get("r0"),d/2)),bn.get("r")!=null&&(Yn=Object(Ne.o)(bn.get("r"),d/2)),We.setLayout({angle:Vr,startAngle:$e,endAngle:Je,clockwise:ue,cx:p,cy:m,r0:jr,r:Yn})}if(We.children&&We.children.length){var Yr=0;y.each(We.children,function(Xr){Yr+=Me(Xr,$e+Yr)})}return Je-$e}};if(jt){var Ee=b,Oe=b+te,we=Math.PI*2;j.setLayout({angle:we,startAngle:E,endAngle:E+we,clockwise:ue,cx:p,cy:m,r0:Ee,r:Oe})}Me(J,E)})}function a0(a,r){var t=a.children||[];a.children=gb(t,r),t.length&&y.each(a.children,function(i){a0(i,r)})}function gb(a,r){if(typeof r=="function"){var t=y.map(a,function(s,l){var f=s.getValue();return{params:{depth:s.depth,height:s.height,dataIndex:s.dataIndex,getValue:function(){return f}},index:l}});return t.sort(function(s,l){return r(s.params,l.params)}),y.map(t,function(s){return a[s.index]})}else{var i=r==="asc";return a.sort(function(s,l){var f=(s.getValue()-l.getValue())*(i?1:-1);return f===0?(s.dataIndex-l.dataIndex)*(i?-1:1):f})}}function mb(a){var r={};function t(i,s,l){for(var f=i;f&&f.depth>1;)f=f.parentNode;var h=s.getColorFromPalette(f.name||f.dataIndex+"",r);return i.depth>1&&typeof h=="string"&&(h=Object(Ct.lift)(h,(i.depth-1)/(l-1)*.5)),h}a.eachSeriesByType("sunburst",function(i){var s=i.getData(),l=s.tree;l.eachNode(function(f){var h=f.getModel(),d=h.getModel("itemStyle").getItemStyle();d.fill||(d.fill=t(f,i,l.root.height));var p=s.ensureUniqueItemVisual(f.dataIndex,"style");Object(y.extend)(p,d)})})}function yb(a){a.registerChartView(hb),a.registerSeriesModel(db),a.registerLayout(Object(y.curry)(pb,"sunburst")),a.registerProcessor(Object(y.curry)(da,"sunburst")),a.registerVisual(mb),fb(a)}function xb(a,r){return r=r||[0,0],y.map(["x","y"],function(t,i){var s=this.getAxis(t),l=r[i],f=a[i]/2;return s.type==="category"?s.getBandWidth():Math.abs(s.dataToCoord(l-f)-s.dataToCoord(l+f))},this)}function bb(a){var r=a.master.getRect();return{coordSys:{type:"cartesian2d",x:r.x,y:r.y,width:r.width,height:r.height},api:{coord:function(t){return a.dataToPoint(t)},size:y.bind(xb,a)}}}function Sb(a,r){return r=r||[0,0],y.map([0,1],function(t){var i=r[t],s=a[t]/2,l=[],f=[];return l[t]=i-s,f[t]=i+s,l[1-t]=f[1-t]=r[1-t],Math.abs(this.dataToPoint(l)[t]-this.dataToPoint(f)[t])},this)}function _b(a){var r=a.getBoundingRect();return{coordSys:{type:"geo",x:r.x,y:r.y,width:r.width,height:r.height,zoom:a.getZoom()},api:{coord:function(t){return a.dataToPoint(t)},size:y.bind(Sb,a)}}}function Tb(a,r){var t=this.getAxis(),i=r instanceof Array?r[0]:r,s=(a instanceof Array?a[0]:a)/2;return t.type==="category"?t.getBandWidth():Math.abs(t.dataToCoord(i-s)-t.dataToCoord(i+s))}function Ob(a){var r=a.getRect();return{coordSys:{type:"singleAxis",x:r.x,y:r.y,width:r.width,height:r.height},api:{coord:function(t){return a.dataToPoint(t)},size:Object(y.bind)(Tb,a)}}}function Ab(a,r){return r=r||[0,0],y.map(["Radius","Angle"],function(t,i){var s="get"+t+"Axis",l=this[s](),f=r[i],h=a[i]/2,d=l.type==="category"?l.getBandWidth():Math.abs(l.dataToCoord(f-h)-l.dataToCoord(f+h));return t==="Angle"&&(d=d*Math.PI/180),d},this)}function Mb(a){var r=a.getRadiusAxis(),t=a.getAngleAxis(),i=r.getExtent();return i[0]>i[1]&&i.reverse(),{coordSys:{type:"polar",cx:a.cx,cy:a.cy,r:i[1],r0:i[0]},api:{coord:function(s){var l=r.dataToRadius(s[0]),f=t.dataToAngle(s[1]),h=a.coordToPoint([l,f]);return h.push(l,f*Math.PI/180),h},size:y.bind(Ab,a)}}}function Db(a){var r=a.getRect(),t=a.getRangeInfo();return{coordSys:{type:"calendar",x:r.x,y:r.y,width:r.width,height:r.height,cellWidth:a.getCellWidth(),cellHeight:a.getCellHeight(),rangeInfo:{start:t.start,end:t.end,weeks:t.weeks,dayCount:t.allDay}},api:{coord:function(i,s){return a.dataToPoint(i,s)}}}}var dD={};function o0(a,r,t,i){return a&&(a.legacy||a.legacy!==!1&&!t&&!i&&r!=="tspan"&&(r==="text"||Object(y.hasOwn)(a,"text")))}function s0(a,r,t){var i=a,s,l,f;if(r==="text")f=i;else{f={},Object(y.hasOwn)(i,"text")&&(f.text=i.text),Object(y.hasOwn)(i,"rich")&&(f.rich=i.rich),Object(y.hasOwn)(i,"textFill")&&(f.fill=i.textFill),Object(y.hasOwn)(i,"textStroke")&&(f.stroke=i.textStroke),l={type:"text",style:f,silent:!0},s={};var h=Object(y.hasOwn)(i,"textPosition");t?s.position=h?i.textPosition:"inside":h&&(s.position=i.textPosition),Object(y.hasOwn)(i,"textPosition")&&(s.position=i.textPosition),Object(y.hasOwn)(i,"textOffset")&&(s.offset=i.textOffset),Object(y.hasOwn)(i,"textRotation")&&(s.rotation=i.textRotation),Object(y.hasOwn)(i,"textDistance")&&(s.distance=i.textDistance)}return l0(f,a),Object(y.each)(f.rich,function(d){l0(d,d)}),{textConfig:s,textContent:l}}function l0(a,r){!r||(r.font=r.textFont||r.font,Object(y.hasOwn)(r,"textStrokeWidth")&&(a.lineWidth=r.textStrokeWidth),Object(y.hasOwn)(r,"textAlign")&&(a.align=r.textAlign),Object(y.hasOwn)(r,"textVerticalAlign")&&(a.verticalAlign=r.textVerticalAlign),Object(y.hasOwn)(r,"textLineHeight")&&(a.lineHeight=r.textLineHeight),Object(y.hasOwn)(r,"textWidth")&&(a.width=r.textWidth),Object(y.hasOwn)(r,"textHeight")&&(a.height=r.textHeight),Object(y.hasOwn)(r,"textBackgroundColor")&&(a.backgroundColor=r.textBackgroundColor),Object(y.hasOwn)(r,"textPadding")&&(a.padding=r.textPadding),Object(y.hasOwn)(r,"textBorderColor")&&(a.borderColor=r.textBorderColor),Object(y.hasOwn)(r,"textBorderWidth")&&(a.borderWidth=r.textBorderWidth),Object(y.hasOwn)(r,"textBorderRadius")&&(a.borderRadius=r.textBorderRadius),Object(y.hasOwn)(r,"textBoxShadowColor")&&(a.shadowColor=r.textBoxShadowColor),Object(y.hasOwn)(r,"textBoxShadowBlur")&&(a.shadowBlur=r.textBoxShadowBlur),Object(y.hasOwn)(r,"textBoxShadowOffsetX")&&(a.shadowOffsetX=r.textBoxShadowOffsetX),Object(y.hasOwn)(r,"textBoxShadowOffsetY")&&(a.shadowOffsetY=r.textBoxShadowOffsetY))}function u0(a,r,t){var i=a;i.textPosition=i.textPosition||t.position||"inside",t.offset!=null&&(i.textOffset=t.offset),t.rotation!=null&&(i.textRotation=t.rotation),t.distance!=null&&(i.textDistance=t.distance);var s=i.textPosition.indexOf("inside")>=0,l=a.fill||"#000";f0(i,r);var f=i.textFill==null;return s?f&&(i.textFill=t.insideFill||"#fff",!i.textStroke&&t.insideStroke&&(i.textStroke=t.insideStroke),!i.textStroke&&(i.textStroke=l),i.textStrokeWidth==null&&(i.textStrokeWidth=2)):(f&&(i.textFill=a.fill||t.outsideFill||"#000"),!i.textStroke&&t.outsideStroke&&(i.textStroke=t.outsideStroke)),i.text=r.text,i.rich=r.rich,Object(y.each)(r.rich,function(h){f0(h,h)}),i}function f0(a,r){!r||(Object(y.hasOwn)(r,"fill")&&(a.textFill=r.fill),Object(y.hasOwn)(r,"stroke")&&(a.textStroke=r.fill),Object(y.hasOwn)(r,"lineWidth")&&(a.textStrokeWidth=r.lineWidth),Object(y.hasOwn)(r,"font")&&(a.font=r.font),Object(y.hasOwn)(r,"fontStyle")&&(a.fontStyle=r.fontStyle),Object(y.hasOwn)(r,"fontWeight")&&(a.fontWeight=r.fontWeight),Object(y.hasOwn)(r,"fontSize")&&(a.fontSize=r.fontSize),Object(y.hasOwn)(r,"fontFamily")&&(a.fontFamily=r.fontFamily),Object(y.hasOwn)(r,"align")&&(a.textAlign=r.align),Object(y.hasOwn)(r,"verticalAlign")&&(a.textVerticalAlign=r.verticalAlign),Object(y.hasOwn)(r,"lineHeight")&&(a.textLineHeight=r.lineHeight),Object(y.hasOwn)(r,"width")&&(a.textWidth=r.width),Object(y.hasOwn)(r,"height")&&(a.textHeight=r.height),Object(y.hasOwn)(r,"backgroundColor")&&(a.textBackgroundColor=r.backgroundColor),Object(y.hasOwn)(r,"padding")&&(a.textPadding=r.padding),Object(y.hasOwn)(r,"borderColor")&&(a.textBorderColor=r.borderColor),Object(y.hasOwn)(r,"borderWidth")&&(a.textBorderWidth=r.borderWidth),Object(y.hasOwn)(r,"borderRadius")&&(a.textBorderRadius=r.borderRadius),Object(y.hasOwn)(r,"shadowColor")&&(a.textBoxShadowColor=r.shadowColor),Object(y.hasOwn)(r,"shadowBlur")&&(a.textBoxShadowBlur=r.shadowBlur),Object(y.hasOwn)(r,"shadowOffsetX")&&(a.textBoxShadowOffsetX=r.shadowOffsetX),Object(y.hasOwn)(r,"shadowOffsetY")&&(a.textBoxShadowOffsetY=r.shadowOffsetY),Object(y.hasOwn)(r,"textShadowColor")&&(a.textShadowColor=r.textShadowColor),Object(y.hasOwn)(r,"textShadowBlur")&&(a.textShadowBlur=r.textShadowBlur),Object(y.hasOwn)(r,"textShadowOffsetX")&&(a.textShadowOffsetX=r.textShadowOffsetX),Object(y.hasOwn)(r,"textShadowOffsetY")&&(a.textShadowOffsetY=r.textShadowOffsetY))}function pD(a,r){if(!1)var t}var Cb=S("Bq2U"),_o=un.a.CMD,c0=Math.PI*2,Eb=["x","y"],Lb=["width","height"],To=[];function h0(a,r){return Math.abs(a-r)<1e-5}function v0(a){var r=a.data,t=a.len(),i=[],s,l=0,f=0,h=0,d=0;function p(Ee,Oe){s&&s.length>2&&i.push(s),s=[Ee,Oe]}function m(Ee,Oe,we,We){h0(Ee,we)&&h0(Oe,We)||s.push(Ee,Oe,we,We,we,We)}function b(Ee,Oe,we,We,$e,Je){var fr=Math.abs(Oe-Ee),Vr=Math.tan(fr/4)*4/3,wr=Oe<Ee?-1:1,jr=Math.cos(Ee),Yn=Math.sin(Ee),bn=Math.cos(Oe),Yr=Math.sin(Oe),Xr=jr*$e+we,_n=Yn*Je+We,ln=bn*$e+we,Pn=Yr*Je+We,ei=$e*Vr*wr,Ri=Je*Vr*wr;s.push(Xr-ei*Yn,_n+Ri*jr,ln+ei*Yr,Pn-Ri*bn,ln,Pn)}for(var A,E,P,j,J=0;J<t;){var dt=r[J++],St=J===1;switch(St&&(l=r[J],f=r[J+1],h=l,d=f,(dt===_o.L||dt===_o.C||dt===_o.Q)&&(s=[h,d])),dt){case _o.M:l=h=r[J++],f=d=r[J++],p(h,d);break;case _o.L:A=r[J++],E=r[J++],m(l,f,A,E),l=A,f=E;break;case _o.C:s.push(r[J++],r[J++],r[J++],r[J++],l=r[J++],f=r[J++]);break;case _o.Q:A=r[J++],E=r[J++],P=r[J++],j=r[J++],s.push(l+2/3*(A-l),f+2/3*(E-f),P+2/3*(A-P),j+2/3*(E-j),P,j),l=P,f=j;break;case _o.A:var Ot=r[J++],wt=r[J++],zt=r[J++],jt=r[J++],kt=r[J++],te=r[J++]+kt;J+=1;var ue=!r[J++];A=Math.cos(kt)*zt+Ot,E=Math.sin(kt)*jt+wt,St?(h=A,d=E,p(h,d)):m(l,f,A,E),l=Math.cos(te)*zt+Ot,f=Math.sin(te)*jt+wt;for(var me=(ue?-1:1)*Math.PI/2,ve=kt;ue?ve>te:ve<te;ve+=me){var Me=ue?Math.max(ve+me,te):Math.min(ve+me,te);b(ve,Me,Ot,wt,zt,jt)}break;case _o.R:h=l=r[J++],d=f=r[J++],A=h+r[J++],E=d+r[J++],p(A,d),m(A,d,A,E),m(A,E,h,E),m(h,E,h,d),m(h,d,A,d);break;case _o.Z:s&&m(l,f,h,d),l=h,f=d;break}}return s&&s.length>2&&i.push(s),i}function Pb(a,r){var t=a.length,i=r.length;if(t===i)return[a,r];for(var s=t<i?a:r,l=Math.min(t,i),f=Math.abs(i-t)/6,h=(l-2)/6,d=Math.ceil(f/h)+1,p=[s[0],s[1]],m=f,b=[],A=[],E=2;E<l;){var P=s[E-2],j=s[E-1],J=s[E++],dt=s[E++],St=s[E++],Ot=s[E++],wt=s[E++],zt=s[E++];if(m<=0){p.push(J,dt,St,Ot,wt,zt);continue}for(var jt=Math.min(m,d-1)+1,kt=1;kt<=jt;kt++){var te=kt/jt;Object(bi.g)(P,J,St,wt,te,b),Object(bi.g)(j,dt,Ot,zt,te,A),P=b[3],j=A[3],p.push(b[1],A[1],b[2],A[2],P,j),J=b[5],dt=A[5],St=b[6],Ot=A[6]}m-=jt-1}return s===a?[p,r]:[a,p]}function d0(a,r){for(var t=a.length,i=a[t-2],s=a[t-1],l=[],f=0;f<r.length;)l[f++]=i,l[f++]=s;return l}function wb(a,r){for(var t,i,s,l=[],f=[],h=0;h<Math.max(a.length,r.length);h++){var d=a[h],p=r[h],m=void 0,b=void 0;d?p?(t=Pb(d,p),m=t[0],b=t[1],i=m,s=b):(b=d0(s||d,d),m=d):(m=d0(i||p,p),b=p),l.push(m),f.push(b)}return[l,f]}function p0(a){for(var r=0,t=0,i=0,s=a.length,l=0,f=s-2;l<s;f=l,l+=2){var h=a[f],d=a[f+1],p=a[l],m=a[l+1],b=h*m-p*d;r+=b,t+=(h+p)*b,i+=(d+m)*b}return r===0?[a[0]||0,a[1]||0]:[t/r/3,i/r/3,r]}function Ib(a,r,t,i){for(var s=(a.length-2)/6,l=Infinity,f=0,h=a.length,d=h-2,p=0;p<s;p++){for(var m=p*6,b=0,A=0;A<h;A+=2){var E=A===0?m:(m+A-2)%d+2,P=a[E]-t[0],j=a[E+1]-t[1],J=r[A]-i[0],dt=r[A+1]-i[1],St=J-P,Ot=dt-j;b+=St*St+Ot*Ot}b<l&&(l=b,f=p)}return f}function Rb(a){for(var r=[],t=a.length,i=0;i<t;i+=2)r[i]=a[t-i-2],r[i+1]=a[t-i-1];return r}function Nb(a,r,t,i){for(var s=[],l,f=0;f<a.length;f++){var h=a[f],d=r[f],p=p0(h),m=p0(d);l==null&&(l=p[2]<0!=m[2]<0);var b=[],A=[],E=0,P=Infinity,j=[],J=h.length;l&&(h=Rb(h));for(var dt=Ib(h,d,p,m)*6,St=J-2,Ot=0;Ot<St;Ot+=2){var wt=(dt+Ot)%St+2;b[Ot+2]=h[wt]-p[0],b[Ot+3]=h[wt+1]-p[1]}if(b[0]=h[dt]-p[0],b[1]=h[dt+1]-p[1],t>0)for(var zt=i/t,jt=-i/2;jt<=i/2;jt+=zt){for(var kt=Math.sin(jt),te=Math.cos(jt),ue=0,Ot=0;Ot<h.length;Ot+=2){var me=b[Ot],ve=b[Ot+1],Me=d[Ot]-m[0],Ee=d[Ot+1]-m[1],Oe=Me*te-Ee*kt,we=Me*kt+Ee*te;j[Ot]=Oe,j[Ot+1]=we;var We=Oe-me,$e=we-ve;ue+=We*We+$e*$e}if(ue<P){P=ue,E=jt;for(var Je=0;Je<j.length;Je++)A[Je]=j[Je]}}else for(var fr=0;fr<J;fr+=2)A[fr]=d[fr]-m[0],A[fr+1]=d[fr+1]-m[1];s.push({from:b,to:A,fromCp:p,toCp:m,rotation:-E})}return s}function wm(a,r,t){var i,s;if(!a||!r)return r;!a.path&&a.createPathProxy(),i=a.path,i.beginPath(),a.buildPath(i,a.shape),!r.path&&r.createPathProxy(),s=r.path,s===i&&(s=new un.a(!1)),s.beginPath(),bd(r)?r.__oldBuildPath(s,r.shape):r.buildPath(s,r.shape);var l=wb(v0(i),v0(s)),f=l[0],h=l[1],d=Nb(f,h,10,Math.PI);jb(r,d,0);var p=t&&t.done,m=t&&t.aborted,b=t&&t.during;return r.animateTo({__morphT:1},Object(y.defaults)({during:function(E){r.dirtyShape(),b&&b(E)},done:function(){zb(r),r.createPathProxy(),r.dirtyShape(),p&&p()},aborted:function(){m&&m()}},t)),r}function Bb(a){for(var r=this.__morphingData,t=this.__morphT,i=1-t,s=[],l=0;l<r.length;l++){var f=r[l],h=f.from,d=f.to,p=f.rotation*t,m=f.fromCp,b=f.toCp,A=Math.sin(p),E=Math.cos(p);Object(Ir.lerp)(s,m,b,t);for(var P=0;P<h.length;P+=2){var j=h[P],J=h[P+1],dt=d[P],St=d[P+1],Ot=j*i+dt*t,wt=J*i+St*t;To[P]=Ot*E-wt*A+s[0],To[P+1]=Ot*A+wt*E+s[1]}for(var P=0;P<h.length;)P===0&&a.moveTo(To[P++],To[P++]),a.bezierCurveTo(To[P++],To[P++],To[P++],To[P++],To[P++],To[P++])}}function jb(a,r,t){if(bd(a)){g0(a,r,t);return}var i=a;i.__oldBuildPath=i.buildPath,i.buildPath=Bb,g0(i,r,t)}function g0(a,r,t){a.__morphingData=r,a.__morphT=t}function zb(a){bd(a)&&(a.buildPath=a.__oldBuildPath,a.__oldBuildPath=a.__morphingData=null)}function bd(a){return a.__oldBuildPath!=null}function rf(a){return!!a.__combiningSubList}function Fb(a){return bd(a)||rf(a)}function m0(a,r,t,i){for(var s=[],l=0,f=0;f<a.length;f++){var h=a[f];if(rf(h)){for(var d=h.__combiningSubList,p=0;p<d.length;p++)s.push(d[p]);l+=d.length}else s.push(h),l++}if(!!l){var m=t?t.dividingMethod:null,b=Nm(r,l,m);Object(y.assert)(b.length===l);for(var A=t&&t.done,E=t&&t.aborted,P=t&&t.during,j=0,J=!1,dt=Object(y.defaults)({during:function(zt){P&&P(zt)},done:function(){j++,j===b.length&&(Gb(r),A&&A())},aborted:function(){J||(J=!0,E&&E())}},t),f=0;f<l;f++){var St=s[f],Ot=b[f];i&&i(r,Ot,!0),wm(St,Ot,dt)}return Vb(r,b),{fromIndividuals:s,toIndividuals:b,count:l}}}function Vb(a,r){if(rf(a)){Im(a,r);return}var t=a;Im(t,r),t.__oldAddSelfToZr=a.addSelfToZr,t.__oldRemoveSelfFromZr=a.removeSelfFromZr,t.addSelfToZr=Ub,t.removeSelfFromZr=Hb,t.__oldBuildPath=t.buildPath,t.buildPath=y.noop,t.childrenRef=Wb}function Gb(a){if(!!rf(a)){var r=a;Im(r,null),r.addSelfToZr=r.__oldAddSelfToZr,r.removeSelfFromZr=r.__oldRemoveSelfFromZr,r.buildPath=r.__oldBuildPath,r.childrenRef=r.__combiningSubList=r.__oldAddSelfToZr=r.__oldRemoveSelfFromZr=r.__oldBuildPath=null}}function Im(a,r){if(a.__combiningSubList!==r){if(Rm(a,"removeSelfFromZr"),a.__combiningSubList=r,r)for(var t=0;t<r.length;t++)r[t].parent=a;Rm(a,"addSelfToZr")}}function Ub(a){this.__oldAddSelfToZr(a),Rm(this,"addSelfToZr")}function Rm(a,r){var t=a.__combiningSubList,i=a.__zr;if(t&&i)for(var s=0;s<t.length;s++){var l=t[s];l[r](i)}}function Hb(a){this.__oldRemoveSelfFromZr(a);for(var r=this.__combiningSubList,t=0;t<r.length;t++){var i=r[t];i.removeSelfFromZr(a)}}function Wb(){return this.__combiningSubList}function Yb(a,r,t,i){var s=r.length,l,f=t?t.dividingMethod:null,h=!1;if(rf(a)){var d=a.__combiningSubList;d.length===s?l=d:(l=Nm(a,s,f),h=!0)}else l=Nm(a,s,f),h=!0;Object(y.assert)(l.length===s);for(var p=0;p<s;p++)h&&i&&i(a,l[p],!1),wm(l[p],r[p],t);return{fromIndividuals:l,toIndividuals:r,count:s}}function Nm(a,r,t){return t==="duplicate"?Bm(a,r):Xb(a,r)}function Xb(a,r){var t=[];if(r<=0)return t;if(r===1)return Bm(a,r);if(a instanceof nn.a)for(var i=a.shape,s=i.height>i.width?1:0,l=Lb[s],f=Eb[s],h=i[l]/r,d=i[f],p=0;p<r;p++,d+=h){var m={x:i.x,y:i.y,width:i.width,height:i.height};m[f]=d,m[l]=p<r-1?h:i[f]+i[l]-d;var b=new nn.a({shape:m});t.push(b)}else if(a instanceof vi.a)for(var i=a.shape,A=i.clockwise,E=i.startAngle,P=i.endAngle,j=Zb(E,i.endAngle,A),J=(j-E)/r,dt=E,p=0;p<r;p++,dt+=J){var b=new vi.a({shape:{cx:i.cx,cy:i.cy,r:i.r,r0:i.r0,clockwise:A,startAngle:dt,endAngle:p===r-1?P:dt+J}});t.push(b)}else return Bm(a,r);return t}function Bm(a,r){var t=[];if(r<=0)return t;for(var i=a.constructor,s=0;s<r;s++){var l=new i({shape:Object(y.clone)(a.shape)});t.push(l)}return t}function Zb(a,r,t){return r+c0*Math[t?"ceil":"floor"]((a-r)/c0)}var Sa=Object(sr.o)(),Kb={x:1,y:1,scaleX:1,scaleY:1,originX:1,originY:1,rotation:1},gD=Object(y.keys)(Kb).join(", "),y0={color:"fill",borderColor:"stroke"},kb={symbol:1,symbolSize:1,symbolKeepAspect:1,legendSymbol:1,visualMeta:1,liftZ:1,decal:1},ss="emphasis",Ks="normal",jm="blur",zm="select",ks=[Ks,ss,jm,zm],Fm={normal:["itemStyle"],emphasis:[ss,"itemStyle"],blur:[jm,"itemStyle"],select:[zm,"itemStyle"]},Vm={normal:["label"],emphasis:[ss,"label"],blur:[jm,"label"],select:[zm,"label"]},Qb="e\0\0",oa={normal:{},emphasis:{},blur:{},select:{}},Jb={position:["x","y"],scale:["scaleX","scaleY"],origin:["originX","originY"]},kl=new Ts.a,$b={cartesian2d:bb,geo:_b,singleAxis:Ob,polar:Mb,calendar:Db},qb=function(a){Object(de.b)(r,a);function r(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=r.type,t}return r.prototype.optionUpdated=function(){this.currentZLevel=this.get("zlevel",!0),this.currentZ=this.get("z",!0)},r.prototype.getInitialData=function(t,i){return Object(_r.a)(this.getSource(),this)},r.prototype.getDataParams=function(t,i,s){var l=a.prototype.getDataParams.call(this,t,i);return s&&(l.info=Sa(s).info),l},r.type="series.custom",r.dependencies=["grid","polar","geo","singleAxis","calendar"],r.defaultOption={coordinateSystem:"cartesian2d",zlevel:0,z:2,legendHoverLink:!0,clip:!1},r}(Nr.a),tS=function(a){Object(de.b)(r,a);function r(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=r.type,t}return r.prototype.render=function(t,i,s,l){var f=this._data,h=t.getData(),d=this.group,p=_0(t,h,i,s),m=t.__transientTransitionOpt;if(m&&(m.from==null||m.to==null))f&&f.each(function(P){Td(f.getItemGraphicEl(P),t,d)}),h.each(function(P){nf(s,null,P,p(P,l),t,d,h,null)});else{var b=new pS(t,m),A=m?"multiple":"oneToOne";new Ai.a(f?f.getIndices():[],h.getIndices(),x0(f,A,m&&m.from),x0(h,A,m&&m.to),null,A).add(function(P){nf(s,null,P,p(P,l),t,d,h,null)}).remove(function(P){Td(f.getItemGraphicEl(P),t,d)}).update(function(P,j){b.reset("oneToOne");var J=f.getItemGraphicEl(j);b.findAndAddFrom(J),b.hasFrom()&&(Od(J,d),J=null),nf(s,J,P,p(P,l),t,d,h,b),b.applyMorphing()}).updateManyToOne(function(P,j){b.reset("manyToOne");for(var J=0;J<j.length;J++){var dt=f.getItemGraphicEl(j[J]);b.findAndAddFrom(dt),Od(dt,d)}nf(s,null,P,p(P,l),t,d,h,b),b.applyMorphing()}).updateOneToMany(function(P,j){b.reset("oneToMany");var J=P.length,dt=f.getItemGraphicEl(j);b.findAndAddFrom(dt),Od(dt,d);for(var St=0;St<J;St++)nf(s,null,P[St],p(P[St],l),t,d,h,b);b.applyMorphing()}).execute()}var E=t.get("clip",!0)?On(t.coordinateSystem,!1,t):null;E?d.setClipPath(E):d.removeClipPath(),this._data=h},r.prototype.incrementalPrepareRender=function(t,i,s){this.group.removeAll(),this._data=null},r.prototype.incrementalRender=function(t,i,s,l,f){var h=i.getData(),d=_0(i,h,s,l);function p(A){A.isGroup||(A.incremental=!0,A.ensureState("emphasis").hoverLayer=!0)}for(var m=t.start;m<t.end;m++){var b=nf(null,null,m,d(m,f),i,this.group,h,null);b.traverse(p)}},r.prototype.filterForExposedEvent=function(t,i,s,l){var f=i.element;if(f==null||s.name===f)return!0;for(;(s=s.__hostTarget||s.parent)&&s!==this.group;)if(s.name===f)return!0;return!1},r.type="custom",r}(yn.a);function x0(a,r,t){if(!!a){if(r==="oneToOne")return function(h,d){return a.getId(d)};var i=a.getDimension(t),s=a.getDimensionInfo(i);if(!s){var l="";Object(Nn.b)(l)}var f=s.ordinalMeta;return function(h,d){var p=a.get(i,d);return f&&(p=f.categories[p]),p==null||Object(y.eqNaN)(p)?h+"":"_ec_"+p}}}function Gm(a){var r=a.type,t;if(r==="path"){var i=a.shape,s=i.width!=null&&i.height!=null?{x:i.x||0,y:i.y||0,width:i.width,height:i.height}:null,l=D0(i);t=Ze.makePath(l,null,s,i.layout||"center"),Sa(t).customPathData=l}else if(r==="image")t=new it.a({}),Sa(t).customImagePath=a.style.image;else if(r==="text")t=new en.a({});else if(r==="group")t=new pr.a;else{if(r==="compoundPath")throw new Error('"compoundPath" is not supported yet.');var f=Ze.getShapeClass(r);if(!f){var h="";Object(Nn.b)(h)}t=new f}return Sa(t).customGraphicType=r,t.name=a.name,t.z2EmphasisLift=1,t.z2SelectLift=1,t}function Um(a,r,t,i,s,l,f,h,d,p){var m={},b={},A=r.isGroup?null:r;!t&&Sd("shape",r,null,s,m,d),b0("shape",s,b),!t&&Sd("extra",r,null,s,m,d),b0("extra",s,b),!t&&Wm(r,null,s,m,d),eS(s,b);var E=f&&f.normal.cfg;if(E&&r.setTextConfig(E),r.type==="text"&&l){var P=l;Object(y.hasOwn)(P,"textFill")&&(P.fill=P.textFill),Object(y.hasOwn)(P,"textStroke")&&(P.stroke=P.textStroke)}if(l){var j=void 0,J=C0(r)?l.decal:null;a&&J&&(J.dirty=!0,j=Object(gu.a)(J,a)),l.__decalPattern=j}return!t&&Ym(r,null,s,l,m,d),A&&Object(y.hasOwn)(s,"invisible")&&(A.invisible=s.invisible),t||(Fc(r,b,l),Hm(r,i,s,h,m,d)),Object(y.hasOwn)(s,"silent")&&(r.silent=s.silent),Object(y.hasOwn)(s,"ignore")&&(r.ignore=s.ignore),p||Object(y.hasOwn)(s,"info")&&(Sa(r).info=s.info),l?r.dirty():r.markRedraw(),t?b:null}function Fc(a,r,t){var i=a.isGroup?null:a;if(i&&t){var s=t.__decalPattern,l=void 0;s&&(l=t.decal,t.decal=s),i.useStyle(t),s&&(t.decal=l);for(var f=i.animators,h=0;h<f.length;h++){var d=f[h];d.targetName==="style"&&d.changeTarget(i.style)}}r&&a.attr(r)}function Hm(a,r,t,i,s,l){if(s){var f=t.during;Sa(a).userDuring=f;var h=f?Object(y.bind)(aS,{el:a,userDuring:f}):null,d={dataIndex:r,isFrom:!0,during:h};l?Ze.initProps(a,s,i,d):Ze.updateProps(a,s,i,d)}}function Sd(a,r,t,i,s,l){var f=i[a];if(!!f){var h=r[a],d,p=f.enterFrom;if(l&&p){!d&&(d=s[a]={});for(var m=Object(y.keys)(p),b=0;b<m.length;b++){var A=m[b];d[A]=p[A]}}if(!l&&h&&!(t!=null&&a==="shape")){if(f.transition){!d&&(d=s[a]={});for(var E=Object(sr.r)(f.transition),b=0;b<E.length;b++){var A=E[b],P=h[A];d[A]=P}}else if(Object(y.indexOf)(i.transition,a)>=0){!d&&(d=s[a]={});for(var j=Object(y.keys)(h),b=0;b<j.length;b++){var A=j[b],P=h[A];nS(f[A],P)&&(d[A]=P)}}}var J=f.leaveTo;if(J)for(var dt=Xm(r),St=dt[a]||(dt[a]={}),Ot=Object(y.keys)(J),b=0;b<Ot.length;b++){var A=Ot[b];St[A]=J[A]}}}function b0(a,r,t){var i=r[a];if(!!i)for(var s=t[a]={},l=Object(y.keys)(i),f=0;f<l.length;f++){var h=l[f];s[h]=Object(Cb.a)(i[h])}}function Wm(a,r,t,i,s){var l=t.enterFrom;if(s&&l)for(var f=Object(y.keys)(l),h=0;h<f.length;h++){var d=f[h];i[d]=l[d]}if(!s)if(r){var p=rS(r,a);ls(i,"x",p),ls(i,"y",p),ls(i,"scaleX",p),ls(i,"scaleY",p),ls(i,"originX",p),ls(i,"originY",p),ls(i,"rotation",p)}else if(t.transition)for(var m=Object(sr.r)(t.transition),h=0;h<m.length;h++){var d=m[h];if(!(d==="style"||d==="shape"||d==="extra")){var b=a[d];i[d]=b}}else ls(i,"x",a),ls(i,"y",a);var A=t.leaveTo;if(A)for(var E=Xm(a),P=Object(y.keys)(A),h=0;h<P.length;h++){var d=P[h];E[d]=A[d]}}function eS(a,r){Zm(a,r,"position"),Zm(a,r,"scale"),Zm(a,r,"origin"),Ql(a,r,"x"),Ql(a,r,"y"),Ql(a,r,"scaleX"),Ql(a,r,"scaleY"),Ql(a,r,"originX"),Ql(a,r,"originY"),Ql(a,r,"rotation")}function Ym(a,r,t,i,s,l){if(!!i){var f=r||a,h=f.style,d,p=i.enterFrom;if(l&&p){var m=Object(y.keys)(p);!d&&(d=s.style={});for(var b=0;b<m.length;b++){var A=m[b];d[A]=p[A]}}if(!l&&h){if(i.transition){var E=Object(sr.r)(i.transition);!d&&(d=s.style={});for(var b=0;b<E.length;b++){var A=E[b],P=h[A];d[A]=P}}else if(a.getAnimationStyleProps&&Object(y.indexOf)(t.transition,"style")>=0){var j=a.getAnimationStyleProps(),J=j?j.style:null;if(J){!d&&(d=s.style={});for(var dt=Object(y.keys)(i),b=0;b<dt.length;b++){var A=dt[b];if(J[A]){var P=h[A];d[A]=P}}}}}var St=i.leaveTo;if(St)for(var Ot=Object(y.keys)(St),wt=Xm(a),zt=wt.style||(wt.style={}),b=0;b<Ot.length;b++){var A=Ot[b];zt[A]=St[A]}}}function rS(a,r){if(!a||a===r||a.parent===r.parent)return a;var t=kl.transform||(kl.transform=vn.identity([])),i=a.getComputedTransform();i?vn.copy(t,i):vn.identity(t);var s=r.parent;return s&&s.getComputedTransform(),kl.originX=a.originX,kl.originY=a.originY,kl.parent=s,kl.decomposeTransform(),kl}var mD;function nS(a,r){return Object(y.isArrayLike)(a)?a!==r:a!=null&&isFinite(a)}var yD;function Xm(a){var r=Sa(a);return r.leaveToProps||(r.leaveToProps={})}var Ii={},iS={setTransform:function(a,r){return Ii.el[a]=r,this},getTransform:function(a){return Ii.el[a]},setShape:function(a,r){var t=Ii.el.shape||(Ii.el.shape={});return t[a]=r,Ii.isShapeDirty=!0,this},getShape:function(a){var r=Ii.el.shape;if(r)return r[a]},setStyle:function(a,r){var t=Ii.el.style;return t&&(t[a]=r,Ii.isStyleDirty=!0),this},getStyle:function(a){var r=Ii.el.style;if(r)return r[a]},setExtra:function(a,r){var t=Ii.el.extra||(Ii.el.extra={});return t[a]=r,this},getExtra:function(a){var r=Ii.el.extra;if(r)return r[a]}};function xD(a){}function aS(){var a=this,r=a.el;if(!!r){var t=Sa(r).userDuring,i=a.userDuring;if(t!==i){a.el=a.userDuring=null;return}Ii.el=r,Ii.isShapeDirty=!1,Ii.isStyleDirty=!1,i(iS),Ii.isShapeDirty&&r.dirtyShape&&r.dirtyShape(),Ii.isStyleDirty&&r.dirtyStyle&&r.dirtyStyle()}}function S0(a,r,t,i,s,l,f){var h=r.isGroup?null:r,d=s&&s[a].cfg;if(h){var p=h.ensureState(a);if(i===!1){var m=h.getState(a);m&&(m.style=null)}else p.style=i||null;d&&(p.textConfig=d),Object(qe.G)(h)}}function oS(a,r,t,i){if(!a.isGroup){var s=a,l=t.currentZ,f=t.currentZLevel;s.z=l,s.zlevel=f;var h=r.z2;h!=null&&(s.z2=h||0);for(var d=0;d<ks.length;d++)sS(s,r,ks[d])}}function sS(a,r,t){var i=t===Ks,s=i?r:_d(r,t),l=s?s.z2:null,f;l!=null&&(f=i?a:a.ensureState(t),f.z2=l||0)}function Zm(a,r,t,i){var s=a[t],l=Jb[t];s&&(i?(r[l[0]]=i[l[0]],r[l[1]]=i[l[1]]):(r[l[0]]=s[0],r[l[1]]=s[1]))}function Ql(a,r,t,i){a[t]!=null&&(r[t]=i?i[t]:a[t])}function ls(a,r,t){t&&(a[r]=t[r])}function _0(a,r,t,i){var s=a.get("renderItem"),l=a.coordinateSystem,f={};l&&(f=l.prepareCustoms?l.prepareCustoms(l):$b[l.type](l));for(var h=Object(y.defaults)({getWidth:i.getWidth,getHeight:i.getHeight,getZr:i.getZr,getDevicePixelRatio:i.getDevicePixelRatio,value:wt,style:jt,ordinalRawValue:zt,styleEmphasis:kt,visual:me,barLayout:ve,currentSeriesIndices:Me,font:Ee},f.api||{}),d={context:{},seriesId:a.id,seriesName:a.name,seriesIndex:a.seriesIndex,coordSys:f.coordSys,dataInsideLength:r.count(),encode:lS(a.getData())},p,m,b={},A={},E={},P={},j=0;j<ks.length;j++){var J=ks[j];E[J]=a.getModel(Fm[J]),P[J]=a.getModel(Vm[J])}function dt(Oe){return Oe===p?m||(m=r.getItemModel(Oe)):r.getItemModel(Oe)}function St(Oe,we){return r.hasItemOption?Oe===p?b[we]||(b[we]=dt(Oe).getModel(Fm[we])):dt(Oe).getModel(Fm[we]):E[we]}function Ot(Oe,we){return r.hasItemOption?Oe===p?A[we]||(A[we]=dt(Oe).getModel(Vm[we])):dt(Oe).getModel(Vm[we]):P[we]}return function(Oe,we){return p=Oe,m=null,b={},A={},s&&s(Object(y.defaults)({dataIndexInside:Oe,dataIndex:r.getRawIndex(Oe),actionType:we?we.type:null},d),h)};function wt(Oe,we){return we==null&&(we=p),r.get(r.getDimension(Oe||0),we)}function zt(Oe,we){we==null&&(we=p);var We=r.getDimensionInfo(Oe||0);if(!!We){var $e=r.get(We.name,we),Je=We&&We.ordinalMeta;return Je?Je.categories[$e]:$e}}function jt(Oe,we){we==null&&(we=p);var We=r.getItemVisual(we,"style"),$e=We&&We.fill,Je=We&&We.opacity,fr=St(we,Ks).getItemStyle();$e!=null&&(fr.fill=$e),Je!=null&&(fr.opacity=Je);var Vr={inheritColor:Object(y.isString)($e)?$e:"#000"},wr=Ot(we,Ks),jr=Ar.c(wr,null,Vr,!1,!0);jr.text=wr.getShallow("show")?Object(y.retrieve2)(a.getFormattedLabel(we,Ks),Oa(r,we)):null;var Yn=Ar.b(wr,Vr,!1);return ue(Oe,fr),fr=u0(fr,jr,Yn),Oe&&te(fr,Oe),fr.legacy=!0,fr}function kt(Oe,we){we==null&&(we=p);var We=St(we,ss).getItemStyle(),$e=Ot(we,ss),Je=Ar.c($e,null,null,!0,!0);Je.text=$e.getShallow("show")?Object(y.retrieve3)(a.getFormattedLabel(we,ss),a.getFormattedLabel(we,Ks),Oa(r,we)):null;var fr=Ar.b($e,null,!0);return ue(Oe,We),We=u0(We,Je,fr),Oe&&te(We,Oe),We.legacy=!0,We}function te(Oe,we){for(var We in we)Object(y.hasOwn)(we,We)&&(Oe[We]=we[We])}function ue(Oe,we){Oe&&(Oe.textFill&&(we.textFill=Oe.textFill),Oe.textPosition&&(we.textPosition=Oe.textPosition))}function me(Oe,we){if(we==null&&(we=p),Object(y.hasOwn)(y0,Oe)){var We=r.getItemVisual(we,"style");return We?We[y0[Oe]]:null}if(Object(y.hasOwn)(kb,Oe))return r.getItemVisual(we,Oe)}function ve(Oe){if(l.type==="cartesian2d"){var we=l.getBaseAxis();return Object(Wr.a)(Object(y.defaults)({axis:we},Oe))}}function Me(){return t.getCurrentSeriesIndices()}function Ee(Oe){return Ar.e(Oe,t)}}function lS(a){var r={};return Object(y.each)(a.dimensions,function(t,i){var s=a.getDimensionInfo(t);if(!s.isExtraCoord){var l=s.coordDim,f=r[l]=r[l]||[];f[s.coordDimIndex]=i}}),r}function nf(a,r,t,i,s,l,f,h){if(!i){Od(r,l);return}return r=Km(a,r,t,i,s,l,!0,h),r&&f.setItemGraphicEl(t,r),Object(qe.o)(r,i.focus,i.blurScope),r}function Km(a,r,t,i,s,l,f,h){var d=-1;r&&T0(r,i)&&(d=l.childrenRef().indexOf(r),r=null);var p=!r;r?r.clearStates():r=Gm(i);var m=Sa(r).canMorph=i.morph&&C0(r),b=m&&h&&h.hasFrom(),A=p&&!b;oa.normal.cfg=oa.normal.conOpt=oa.emphasis.cfg=oa.emphasis.conOpt=oa.blur.cfg=oa.blur.conOpt=oa.select.cfg=oa.select.conOpt=null,oa.isLegacy=!1,fS(r,t,i,s,A,oa),uS(r,t,i,s,A);var E=Um(a,r,b,t,i,i.style,oa,s,A,!1);b&&h.addTo(r,i,t,E);for(var P=0;P<ks.length;P++){var j=ks[P];if(j!==Ks){var J=_d(i,j),dt=km(i,J,j);S0(j,r,J,dt,oa,f,!1)}}return oS(r,i,s,oa),i.type==="group"&&cS(a,r,t,i,s,h),d>=0?l.replaceAt(r,d):l.add(r),r}function T0(a,r){var t=Sa(a),i=r.type,s=r.shape,l=r.style;return i!=null&&i!==t.customGraphicType||i==="path"&&dS(s)&&D0(s)!==t.customPathData||i==="image"&&Object(y.hasOwn)(l,"image")&&l.image!==t.customImagePath}function uS(a,r,t,i,s){var l=t.clipPath;if(l===!1)a&&a.getClipPath()&&a.removeClipPath();else if(l){var f=a.getClipPath();f&&T0(f,l)&&(f=null),f||(f=Gm(l),a.setClipPath(f)),Um(null,f,null,r,l,null,null,i,s,!1)}}function fS(a,r,t,i,s,l){if(!a.isGroup){O0(t,null,l),O0(t,ss,l);var f=l.normal.conOpt,h=l.emphasis.conOpt,d=l.blur.conOpt,p=l.select.conOpt;if(f!=null||h!=null||p!=null||d!=null){var m=a.getTextContent();if(f===!1)m&&a.removeTextContent();else{f=l.normal.conOpt=f||{type:"text"},m?m.clearStates():(m=Gm(f),a.setTextContent(m));var b=f&&f.style;Um(null,m,null,r,f,b,null,i,s,!0);for(var A=0;A<ks.length;A++){var E=ks[A];if(E!==Ks){var P=l[E].conOpt;S0(E,m,P,km(f,P,E),null,!1,!0)}}b?m.dirty():m.markRedraw()}}}}function O0(a,r,t){var i=r?_d(a,r):a,s=r?km(a,i,ss):a.style,l=a.type,f=i?i.textConfig:null,h=a.textContent,d=h?r?_d(h,r):h:null;if(s&&(t.isLegacy||o0(s,l,!!f,!!d))){t.isLegacy=!0;var p=s0(s,l,!r);!f&&p.textConfig&&(f=p.textConfig),!d&&p.textContent&&(d=p.textContent)}if(!r&&d){var m=d;!m.type&&(m.type="text")}var b=r?t[r]:t.normal;b.cfg=f,b.conOpt=d}function _d(a,r){return r?a?a[r]:null:a}function km(a,r,t){var i=r&&r.style;return i==null&&t===ss&&a&&(i=a.styleEmphasis),i}function cS(a,r,t,i,s,l){var f=i.children,h=f?f.length:0,d=i.$mergeChildren,p=d==="byName"||i.diffChildrenByName,m=d===!1;if(!(!h&&!p&&!m)){if(p){hS({api:a,oldChildren:r.children()||[],newChildren:f||[],dataIndex:t,seriesModel:s,group:r,morphPreparation:l});return}m&&r.removeAll();for(var b=0;b<h;b++)f[b]&&Km(a,r.childAt(b),t,f[b],s,r,!1,l);for(var A=r.childCount()-1;A>=b;A--)Td(r.childAt(A),s,r)}}function hS(a){new Ai.a(a.oldChildren,a.newChildren,A0,A0,a).add(M0).update(M0).remove(vS).execute()}function A0(a,r){var t=a&&a.name;return t!=null?t:Qb+r}function M0(a,r){var t=this.context,i=a!=null?t.newChildren[a]:null,s=r!=null?t.oldChildren[r]:null;Km(t.api,s,t.dataIndex,i,t.seriesModel,t.group,!1,t.morphPreparation)}function vS(a){var r=this.context,t=r.oldChildren[a];Td(t,r.seriesModel,r.group)}function Td(a,r,t){if(a){var i=Sa(a).leaveToProps;i?Ze.updateProps(a,i,r,{cb:function(){t.remove(a)}}):t.remove(a)}}function D0(a){return a&&(a.pathData||a.d)}function dS(a){return a&&(Object(y.hasOwn)(a,"pathData")||Object(y.hasOwn)(a,"d"))}function C0(a){return a&&a instanceof ot.b}function Od(a,r){a&&r.remove(a)}var pS=function(){function a(r,t){this._fromList=[],this._toList=[],this._toElOptionList=[],this._allPropsFinalList=[],this._toDataIndices=[],this._morphConfigList=[],this._seriesModel=r,this._transOpt=t}return a.prototype.hasFrom=function(){return!!this._fromList.length},a.prototype.findAndAddFrom=function(r){if(!!r&&(Sa(r).canMorph&&this._fromList.push(r),r.isGroup))for(var t=r.childrenRef(),i=0;i<t.length;i++)this.findAndAddFrom(t[i])},a.prototype.addTo=function(r,t,i,s){r&&(this._toList.push(r),this._toElOptionList.push(t),this._toDataIndices.push(i),this._allPropsFinalList.push(s))},a.prototype.applyMorphing=function(){var r=this._type,t=this._fromList,i=this._toList,s=i.length,l=t.length;if(!(!l||!s)){if(r==="oneToOne")for(var f=0;f<s;f++)this._oneToOneForSingleTo(f,f);else if(r==="manyToOne")for(var h=Math.max(1,Math.floor(l/s)),f=0,d=0;f<s;f++,d+=h){var p=f+1>=s?l-d:h;this._manyToOneForSingleTo(f,d>=l?null:d,p)}else if(r==="oneToMany")for(var m=Math.max(1,Math.floor(s/l)),b=0,A=0;b<s;b+=m,A++){var E=b+m>=s?s-b:m;this._oneToManyForSingleFrom(b,E,A>=l?null:A)}}},a.prototype._oneToOneForSingleTo=function(r,t){var i=this._toList[r],s=this._toElOptionList[r],l=this._toDataIndices[r],f=this._allPropsFinalList[r],h=this._fromList[t],d=this._getOrCreateMorphConfig(l),p=d.duration;if(h&&rf(h)){if(Fc(i,f,s.style),p){var m=m0([h],i,d,Qm);this._processResultIndividuals(m,r,null)}}else{var b=p&&h&&(h!==i||Fb(h))?h:null,A={};Sd("shape",i,b,s,A,!1),Sd("extra",i,b,s,A,!1),Wm(i,b,s,A,!1),Ym(i,b,s,s.style,A,!1),Fc(i,f,s.style),b&&wm(b,i,d),Hm(i,l,s,this._seriesModel,A,!1)}},a.prototype._manyToOneForSingleTo=function(r,t,i){var s=this._toList[r],l=this._toElOptionList[r],f=this._allPropsFinalList[r];Fc(s,f,l.style);var h=this._getOrCreateMorphConfig(this._toDataIndices[r]);if(h.duration&&t!=null){for(var d=[],p=t;p<i;p++)d.push(this._fromList[p]);var m=m0(d,s,h,Qm);this._processResultIndividuals(m,r,null)}},a.prototype._oneToManyForSingleFrom=function(r,t,i){for(var s=i==null?null:this._fromList[i],l=this._toList,f=[],h=r;h<t;h++){var d=l[h];Fc(d,this._allPropsFinalList[h],this._toElOptionList[h].style),f.push(d)}var p=this._getOrCreateMorphConfig(this._toDataIndices[r]);if(p.duration&&s){var m=Yb(s,f,p,Qm);this._processResultIndividuals(m,r,t)}},a.prototype._processResultIndividuals=function(r,t,i){for(var s=i!=null,l=0;l<r.count;l++){var f=r.fromIndividuals[l],h=r.toIndividuals[l],d=t+(s?l:0),p=this._toElOptionList[d],m=this._toDataIndices[d],b={};Wm(h,f,p,b,!1),Ym(h,f,p,p.style,b,!1),Hm(h,m,p,this._seriesModel,b,!1)}},a.prototype._getOrCreateMorphConfig=function(r){var t=this._morphConfigList,i=t[r];if(i)return i;var s,l,f,h=this._seriesModel,d=this._transOpt;if(h.isAnimationEnabled()){var p=void 0;if(h&&h.ecModel){var m=h.ecModel.getUpdatePayload();p=m&&m.animation}if(p)s=p.duration||0,l=p.easing||"cubicOut",f=p.delay||0;else{l=h.get("animationEasingUpdate");var b=h.get("animationDelayUpdate");f=Object(y.isFunction)(b)?b(r):b;var A=h.get("animationDurationUpdate");s=Object(y.isFunction)(A)?A(r):A}}return i={duration:s||0,delay:f,easing:l,dividingMethod:d?d.dividingMethod:null},t[r]=i,i},a.prototype.reset=function(r){this._type=r,this._fromList.length=this._toList.length=this._toElOptionList.length=this._allPropsFinalList.length=this._toDataIndices.length=0},a}();function Qm(a,r,t){r.style=t?Object(y.clone)(a.style):a.style,r.zlevel=a.zlevel,r.z=a.z,r.z2=a.z2}function gS(a){a.registerChartView(tS),a.registerSeriesModel(qb)}var Jl=Object(sr.o)(),E0=y.clone,Jm=y.bind,mS=function(){function a(){this._dragging=!1,this.animationThreshold=15}return a.prototype.render=function(r,t,i,s){var l=t.get("value"),f=t.get("status");if(this._axisModel=r,this._axisPointerModel=t,this._api=i,!(!s&&this._lastValue===l&&this._lastStatus===f)){this._lastValue=l,this._lastStatus=f;var h=this._group,d=this._handle;if(!f||f==="hide"){h&&h.hide(),d&&d.hide();return}h&&h.show(),d&&d.show();var p={};this.makeElOption(p,l,r,t,i);var m=p.graphicKey;m!==this._lastGraphicKey&&this.clear(i),this._lastGraphicKey=m;var b=this._moveAnimation=this.determineAnimation(r,t);if(!h)h=this._group=new pr.a,this.createPointerEl(h,p,r,t),this.createLabelEl(h,p,r,t),i.getZr().add(h);else{var A=y.curry(L0,t,b);this.updatePointerEl(h,p,A),this.updateLabelEl(h,p,A,t)}I0(h,t,!0),this._renderHandle(l)}},a.prototype.remove=function(r){this.clear(r)},a.prototype.dispose=function(r){this.clear(r)},a.prototype.determineAnimation=function(r,t){var i=t.get("animation"),s=r.axis,l=s.type==="category",f=t.get("snap");if(!f&&!l)return!1;if(i==="auto"||i==null){var h=this.animationThreshold;if(l&&s.getBandWidth()>h)return!0;if(f){var d=_f(r).seriesDataCount,p=s.getExtent();return Math.abs(p[0]-p[1])/d>h}return!1}return i===!0},a.prototype.makeElOption=function(r,t,i,s,l){},a.prototype.createPointerEl=function(r,t,i,s){var l=t.pointer;if(l){var f=Jl(r).pointerEl=new Ze[l.type](E0(t.pointer));r.add(f)}},a.prototype.createLabelEl=function(r,t,i,s){if(t.label){var l=Jl(r).labelEl=new en.a(E0(t.label));r.add(l),w0(l,s)}},a.prototype.updatePointerEl=function(r,t,i){var s=Jl(r).pointerEl;s&&t.pointer&&(s.setStyle(t.pointer.style),i(s,{shape:t.pointer.shape}))},a.prototype.updateLabelEl=function(r,t,i,s){var l=Jl(r).labelEl;l&&(l.setStyle(t.label.style),i(l,{x:t.label.x,y:t.label.y}),w0(l,s))},a.prototype._renderHandle=function(r){if(!(this._dragging||!this.updateHandleTransform)){var t=this._axisPointerModel,i=this._api.getZr(),s=this._handle,l=t.getModel("handle"),f=t.get("status");if(!l.get("show")||!f||f==="hide"){s&&i.remove(s),this._handle=null;return}var h;this._handle||(h=!0,s=this._handle=Ze.createIcon(l.get("icon"),{cursor:"move",draggable:!0,onmousemove:function(p){Wi.g(p.event)},onmousedown:Jm(this._onHandleDragMove,this,0,0),drift:Jm(this._onHandleDragMove,this),ondragend:Jm(this._onHandleDragEnd,this)}),i.add(s)),I0(s,t,!1),s.setStyle(l.getItemStyle(null,["color","borderColor","borderWidth","opacity","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY"]));var d=l.get("size");y.isArray(d)||(d=[d,d]),s.scaleX=d[0]/2,s.scaleY=d[1]/2,ca.b(this,"_doDispatchAxisPointer",l.get("throttle")||0,"fixRate"),this._moveHandleToValue(r,h)}},a.prototype._moveHandleToValue=function(r,t){L0(this._axisPointerModel,!t&&this._moveAnimation,this._handle,$m(this.getHandleTransform(r,this._axisModel,this._axisPointerModel)))},a.prototype._onHandleDragMove=function(r,t){var i=this._handle;if(!!i){this._dragging=!0;var s=this.updateHandleTransform($m(i),[r,t],this._axisModel,this._axisPointerModel);this._payloadInfo=s,i.stopAnimation(),i.attr($m(s)),Jl(i).lastProp=null,this._doDispatchAxisPointer()}},a.prototype._doDispatchAxisPointer=function(){var r=this._handle;if(!!r){var t=this._payloadInfo,i=this._axisModel;this._api.dispatchAction({type:"updateAxisPointer",x:t.cursorPoint[0],y:t.cursorPoint[1],tooltipOption:t.tooltipOption,axesInfo:[{axisDim:i.axis.dim,axisIndex:i.componentIndex}]})}},a.prototype._onHandleDragEnd=function(){this._dragging=!1;var r=this._handle;if(!!r){var t=this._axisPointerModel.get("value");this._moveHandleToValue(t),this._api.dispatchAction({type:"hideTip"})}},a.prototype.clear=function(r){this._lastValue=null,this._lastStatus=null;var t=r.getZr(),i=this._group,s=this._handle;t&&i&&(this._lastGraphicKey=null,i&&t.remove(i),s&&t.remove(s),this._group=null,this._handle=null,this._payloadInfo=null)},a.prototype.doClear=function(){},a.prototype.buildLabel=function(r,t,i){return i=i||0,{x:r[i],y:r[1-i],width:t[i],height:t[1-i]}},a}();function L0(a,r,t,i){P0(Jl(t).lastProp,i)||(Jl(t).lastProp=i,r?Ze.updateProps(t,i,a):(t.stopAnimation(),t.attr(i)))}function P0(a,r){if(y.isObject(a)&&y.isObject(r)){var t=!0;return y.each(r,function(i,s){t=t&&P0(a[s],i)}),!!t}else return a===r}function w0(a,r){a[r.get(["label","show"])?"show":"hide"]()}function $m(a){return{x:a.x||0,y:a.y||0,rotation:a.rotation||0}}function I0(a,r,t){var i=r.get("z"),s=r.get("zlevel");a&&a.traverse(function(l){l.type!=="group"&&(i!=null&&(l.z=i),s!=null&&(l.zlevel=s),l.silent=t)})}var qm=mS;function ty(a){var r=a.get("type"),t=a.getModel(r+"Style"),i;return r==="line"?(i=t.getLineStyle(),i.fill=null):r==="shadow"&&(i=t.getAreaStyle(),i.stroke=null),i}function R0(a,r,t,i,s){var l=t.get("value"),f=N0(l,r.axis,r.ecModel,t.get("seriesDataIndices"),{precision:t.get(["label","precision"]),formatter:t.get(["label","formatter"])}),h=t.getModel("label"),d=Pr.j(h.get("padding")||0),p=h.getFont(),m=gt.e(f,p),b=s.position,A=m.width+d[1]+d[3],E=m.height+d[0]+d[2],P=s.align;P==="right"&&(b[0]-=A),P==="center"&&(b[0]-=A/2);var j=s.verticalAlign;j==="bottom"&&(b[1]-=E),j==="middle"&&(b[1]-=E/2),yS(b,A,E,i);var J=h.get("backgroundColor");(!J||J==="auto")&&(J=r.get(["axisLine","lineStyle","color"])),a.label={x:b[0],y:b[1],style:Object(Ar.c)(h,{text:f,font:p,fill:h.getTextColor(),padding:d,backgroundColor:J}),z2:10}}function yS(a,r,t,i){var s=i.getWidth(),l=i.getHeight();a[0]=Math.min(a[0]+r,s)-r,a[1]=Math.min(a[1]+t,l)-t,a[0]=Math.max(a[0],0),a[1]=Math.max(a[1],0)}function N0(a,r,t,i,s){a=r.scale.parse(a);var l=r.scale.getLabel({value:a},{precision:s.precision}),f=s.formatter;if(f){var h={value:Bn.c(r,{value:a}),axisDimension:r.dim,axisIndex:r.index,seriesData:[]};y.each(i,function(d){var p=t.getSeriesByIndex(d.seriesIndex),m=d.dataIndexInside,b=p&&p.getDataParams(m);b&&h.seriesData.push(b)}),y.isString(f)?l=f.replace("{value}",l):y.isFunction(f)&&(l=f(h))}return l}function ey(a,r,t){var i=vn.create();return vn.rotate(i,i,t.rotation),vn.translate(i,i,t.position),Ze.applyTransform([a.dataToCoord(r),(t.labelOffset||0)+(t.labelDirection||1)*(t.labelMargin||0)],i)}function B0(a,r,t,i,s,l){var f=Vi.innerTextLayout(t.rotation,0,t.labelDirection);t.labelMargin=s.get(["label","margin"]),R0(r,i,s,l,{position:ey(i.axis,a,t),align:f.textAlign,verticalAlign:f.textVerticalAlign})}function ry(a,r,t){return t=t||0,{x1:a[t],y1:a[1-t],x2:r[t],y2:r[1-t]}}function j0(a,r,t){return t=t||0,{x:a[t],y:a[1-t],width:r[t],height:r[1-t]}}function z0(a,r,t,i,s,l){return{cx:a,cy:r,r0:t,r:i,startAngle:s,endAngle:l,clockwise:!0}}var xS=function(a){Object(de.b)(r,a);function r(){return a!==null&&a.apply(this,arguments)||this}return r.prototype.makeElOption=function(t,i,s,l,f){var h=s.axis,d=h.grid,p=l.get("type"),m=F0(d,h).getOtherAxis(h).getGlobalExtent(),b=h.toGlobalCoord(h.dataToCoord(i,!0));if(p&&p!=="none"){var A=ty(l),E=bS[p](h,b,m);E.style=A,t.graphicKey=E.type,t.pointer=E}var P=Gt(d.model,s);B0(i,t,P,s,l,f)},r.prototype.getHandleTransform=function(t,i,s){var l=Gt(i.axis.grid.model,i,{labelInside:!1});l.labelMargin=s.get(["handle","margin"]);var f=ey(i.axis,t,l);return{x:f[0],y:f[1],rotation:l.rotation+(l.labelDirection<0?Math.PI:0)}},r.prototype.updateHandleTransform=function(t,i,s,l){var f=s.axis,h=f.grid,d=f.getGlobalExtent(!0),p=F0(h,f).getOtherAxis(f).getGlobalExtent(),m=f.dim==="x"?0:1,b=[t.x,t.y];b[m]+=i[m],b[m]=Math.min(d[1],b[m]),b[m]=Math.max(d[0],b[m]);var A=(p[1]+p[0])/2,E=[A,A];E[m]=b[m];var P=[{verticalAlign:"middle"},{align:"center"}];return{x:b[0],y:b[1],rotation:t.rotation,cursorPoint:E,tooltipOption:P[m]}},r}(qm);function F0(a,r){var t={};return t[r.dim+"AxisIndex"]=r.index,a.getCartesian(t)}var bS={line:function(a,r,t){var i=ry([r,t[0]],[r,t[1]],V0(a));return{type:"Line",subPixelOptimize:!0,shape:i}},shadow:function(a,r,t){var i=Math.max(1,a.getBandWidth()),s=t[1]-t[0];return{type:"Rect",shape:j0([r-i/2,t[0]],[i,s],V0(a))}}};function V0(a){return a.dim==="x"?0:1}var SS=xS,_S=function(a){Object(de.b)(r,a);function r(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=r.type,t}return r.type="axisPointer",r.defaultOption={show:"auto",zlevel:0,z:50,type:"line",snap:!1,triggerTooltip:!0,value:null,status:null,link:[],animation:null,animationDurationUpdate:200,lineStyle:{color:"#B9BEC9",width:1,type:"dashed"},shadowStyle:{color:"rgba(210,219,238,0.2)"},label:{show:!0,formatter:null,precision:"auto",margin:3,color:"#fff",padding:[5,7,5,7],backgroundColor:"auto",borderColor:null,borderWidth:0,borderRadius:3},handle:{show:!1,icon:"M10.7,11.9v-1.3H9.3v1.3c-4.9,0.3-8.8,4.4-8.8,9.4c0,5,3.9,9.1,8.8,9.4h1.3c4.9-0.3,8.8-4.4,8.8-9.4C19.5,16.3,15.6,12.2,10.7,11.9z M13.3,24.4H6.7v-1.2h6.6z M13.3,22H6.7v-1.2h6.6z M13.3,19.6H6.7v-1.2h6.6z",size:45,margin:50,color:"#333",shadowBlur:3,shadowColor:"#aaa",shadowOffsetX:0,shadowOffsetY:2,throttle:40}},r}(An.a),TS=_S,fi=S("ItGF"),us=Object(sr.o)(),OS=y.each;function G0(a,r,t){if(!fi.a.node){var i=r.getZr();us(i).records||(us(i).records={}),AS(i,r);var s=us(i).records[a]||(us(i).records[a]={});s.handler=t}}function AS(a,r){if(us(a).initialized)return;us(a).initialized=!0,t("click",y.curry(U0,"click")),t("mousemove",y.curry(U0,"mousemove")),t("globalout",DS);function t(i,s){a.on(i,function(l){var f=CS(r);OS(us(a).records,function(h){h&&s(h,l,f.dispatchAction)}),MS(f.pendings,r)})}}function MS(a,r){var t=a.showTip.length,i=a.hideTip.length,s;t?s=a.showTip[t-1]:i&&(s=a.hideTip[i-1]),s&&(s.dispatchAction=null,r.dispatchAction(s))}function DS(a,r,t){a.handler("leave",null,t)}function U0(a,r,t,i){r.handler(a,t,i)}function CS(a){var r={showTip:[],hideTip:[]},t=function(i){var s=r[i.type];s?s.push(i):(i.dispatchAction=t,a.dispatchAction(i))};return{dispatchAction:t,pendings:r}}function ny(a,r){if(!fi.a.node){var t=r.getZr(),i=(us(t).records||{})[a];i&&(us(t).records[a]=null)}}var ES=function(a){Object(de.b)(r,a);function r(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=r.type,t}return r.prototype.render=function(t,i,s){var l=i.getComponent("tooltip"),f=t.get("triggerOn")||l&&l.get("triggerOn")||"mousemove|click";G0("axisPointer",s,function(h,d,p){f!=="none"&&(h==="leave"||f.indexOf(h)>=0)&&p({type:"updateAxisPointer",currTrigger:h,x:d&&d.offsetX,y:d&&d.offsetY})})},r.prototype.remove=function(t,i){ny("axisPointer",i)},r.prototype.dispose=function(t,i){ny("axisPointer",i)},r.type="axisPointer",r}(Vn.a),LS=ES;function H0(a,r){var t=[],i=a.seriesIndex,s;if(i==null||!(s=r.getSeriesByIndex(i)))return{point:[]};var l=s.getData(),f=sr.u(l,a);if(f==null||f<0||y.isArray(f))return{point:[]};var h=l.getItemGraphicEl(f),d=s.coordinateSystem;if(s.getTooltipPosition)t=s.getTooltipPosition(f)||[];else if(d&&d.dataToPoint)if(a.isStacked){var p=d.getBaseAxis(),m=d.getOtherAxis(p),b=m.dim,A=p.dim,E=b==="x"||b==="radius"?1:0,P=l.mapDimension(A),j=[];j[E]=l.get(P,f),j[1-E]=l.get(l.getCalculationInfo("stackResultDimension"),f),t=d.dataToPoint(j)||[]}else t=d.dataToPoint(l.getValues(y.map(d.dimensions,function(dt){return l.mapDimension(dt)}),f))||[];else if(h){var J=h.getBoundingRect().clone();J.applyTransform(h.transform),t=[J.x+J.width/2,J.y+J.height/2]}return{point:t,el:h}}var W0=Object(sr.o)();function PS(a,r,t){var i=a.currTrigger,s=[a.x,a.y],l=a,f=a.dispatchAction||Object(y.bind)(t.dispatchAction,t),h=r.getComponent("axisPointer").coordSysAxesInfo;if(!!h){Ad(s)&&(s=H0({seriesIndex:l.seriesIndex,dataIndex:l.dataIndex},r).point);var d=Ad(s),p=l.axesInfo,m=h.axesInfo,b=i==="leave"||Ad(s),A={},E={},P={list:[],map:{}},j={showPointer:Object(y.curry)(IS,E),showTooltip:Object(y.curry)(RS,P)};Object(y.each)(h.coordSysMap,function(dt,St){var Ot=d||dt.containPoint(s);Object(y.each)(h.coordSysAxesInfo[St],function(wt,zt){var jt=wt.axis,kt=zS(p,wt);if(!b&&Ot&&(!p||kt)){var te=kt&&kt.value;te==null&&!d&&(te=jt.pointToData(s)),te!=null&&Y0(wt,te,j,!1,A)}})});var J={};return Object(y.each)(m,function(dt,St){var Ot=dt.linkGroup;Ot&&!E[St]&&Object(y.each)(Ot.axesInfo,function(wt,zt){var jt=E[zt];if(wt!==dt&&jt){var kt=jt.value;Ot.mapper&&(kt=dt.axis.scale.parse(Ot.mapper(kt,X0(wt),X0(dt)))),J[dt.key]=kt}})}),Object(y.each)(J,function(dt,St){Y0(m[St],dt,j,!0,A)}),NS(E,m,A),BS(P,s,a,f),jS(m,f,t),A}}function Y0(a,r,t,i,s){var l=a.axis;if(!(l.scale.isBlank()||!l.containData(r))){if(!a.involveSeries){t.showPointer(a,r);return}var f=wS(r,a),h=f.payloadBatch,d=f.snapToValue;h[0]&&s.seriesIndex==null&&Object(y.extend)(s,h[0]),!i&&a.snap&&l.containData(d)&&d!=null&&(r=d),t.showPointer(a,r,h),t.showTooltip(a,f,d)}}function wS(a,r){var t=r.axis,i=t.dim,s=a,l=[],f=Number.MAX_VALUE,h=-1;return Object(y.each)(r.seriesModels,function(d,p){var m=d.getData().mapDimensionsAll(i),b,A;if(d.getAxisTooltipData){var E=d.getAxisTooltipData(m,a,t);A=E.dataIndices,b=E.nestestValue}else{if(A=d.getData().indicesOfNearest(m[0],a,t.type==="category"?.5:null),!A.length)return;b=d.getData().get(m[0],A[0])}if(!(b==null||!isFinite(b))){var P=a-b,j=Math.abs(P);j<=f&&((j<f||P>=0&&h<0)&&(f=j,h=P,s=b,l.length=0),Object(y.each)(A,function(J){l.push({seriesIndex:d.seriesIndex,dataIndexInside:J,dataIndex:d.getData().getRawIndex(J)})}))}}),{payloadBatch:l,snapToValue:s}}function IS(a,r,t,i){a[r.key]={value:t,payloadBatch:i}}function RS(a,r,t,i){var s=t.payloadBatch,l=r.axis,f=l.model,h=r.axisPointerModel;if(!(!r.triggerTooltip||!s.length)){var d=r.coordSys.model,p=fl(d),m=a.map[p];m||(m=a.map[p]={coordSysId:d.id,coordSysIndex:d.componentIndex,coordSysType:d.type,coordSysMainType:d.mainType,dataByAxis:[]},a.list.push(m)),m.dataByAxis.push({axisDim:l.dim,axisIndex:f.componentIndex,axisType:f.type,axisId:f.id,value:i,valueLabelOpt:{precision:h.get(["label","precision"]),formatter:h.get(["label","formatter"])},seriesDataIndices:s.slice()})}}function NS(a,r,t){var i=t.axesInfo=[];Object(y.each)(r,function(s,l){var f=s.axisPointerModel.option,h=a[l];h?(!s.useHandle&&(f.status="show"),f.value=h.value,f.seriesDataIndices=(h.payloadBatch||[]).slice()):!s.useHandle&&(f.status="hide"),f.status==="show"&&i.push({axisDim:s.axis.dim,axisIndex:s.axis.model.componentIndex,value:f.value})})}function BS(a,r,t,i){if(Ad(r)||!a.list.length){i({type:"hideTip"});return}var s=((a.list[0].dataByAxis[0]||{}).seriesDataIndices||[])[0]||{};i({type:"showTip",escapeConnect:!0,x:r[0],y:r[1],tooltipOption:t.tooltipOption,position:t.position,dataIndexInside:s.dataIndexInside,dataIndex:s.dataIndex,seriesIndex:s.seriesIndex,dataByCoordSys:a.list})}function jS(a,r,t){var i=t.getZr(),s="axisPointerLastHighlights",l=W0(i)[s]||{},f=W0(i)[s]={};Object(y.each)(a,function(p,m){var b=p.axisPointerModel.option;b.status==="show"&&Object(y.each)(b.seriesDataIndices,function(A){var E=A.seriesIndex+" | "+A.dataIndex;f[E]=A})});var h=[],d=[];Object(y.each)(l,function(p,m){!f[m]&&d.push(p)}),Object(y.each)(f,function(p,m){!l[m]&&h.push(p)}),d.length&&t.dispatchAction({type:"downplay",escapeConnect:!0,notBlur:!0,batch:d}),h.length&&t.dispatchAction({type:"highlight",escapeConnect:!0,notBlur:!0,batch:h})}function zS(a,r){for(var t=0;t<(a||[]).length;t++){var i=a[t];if(r.axis.dim===i.axisDim&&r.axis.model.componentIndex===i.axisIndex)return i}}function X0(a){var r=a.axis.model,t={},i=t.axisDim=a.axis.dim;return t.axisIndex=t[i+"AxisIndex"]=r.componentIndex,t.axisName=t[i+"AxisName"]=r.name,t.axisId=t[i+"AxisId"]=r.id,t}function Ad(a){return!a||a[0]==null||isNaN(a[0])||a[1]==null||isNaN(a[1])}function Vc(a){Ho.registerAxisPointerClass("CartesianAxisPointer",SS),a.registerComponentModel(TS),a.registerComponentView(LS),a.registerPreprocessor(function(r){if(r){(!r.axisPointer||r.axisPointer.length===0)&&(r.axisPointer={});var t=r.axisPointer.link;t&&!Object(y.isArray)(t)&&(r.axisPointer.link=[t])}}),a.registerProcessor(a.PRIORITY.PROCESSOR.STATISTIC,function(r,t){r.getComponent("axisPointer").coordSysAxesInfo=Ji(r,t)}),a.registerAction({type:"updateAxisPointer",event:"updateAxisPointer",update:":updateAxisPointer"},PS)}function FS(a){Object(B.a)(th),Object(B.a)(Vc)}var VS=function(a){Object(de.b)(r,a);function r(){return a!==null&&a.apply(this,arguments)||this}return r.prototype.makeElOption=function(t,i,s,l,f){var h=s.axis;h.dim==="angle"&&(this.animationThreshold=Math.PI/18);var d=h.polar,p=d.getOtherAxis(h),m=p.getExtent(),b=h.dataToCoord(i),A=l.get("type");if(A&&A!=="none"){var E=ty(l),P=US[A](h,d,b,m);P.style=E,t.graphicKey=P.type,t.pointer=P}var j=l.get(["label","margin"]),J=GS(i,s,l,d,j);R0(t,s,l,f,J)},r}(qm);function GS(a,r,t,i,s){var l=r.axis,f=l.dataToCoord(a),h=i.getAngleAxis().getExtent()[0];h=h/180*Math.PI;var d=i.getRadiusAxis().getExtent(),p,m,b;if(l.dim==="radius"){var A=vn.create();vn.rotate(A,A,h),vn.translate(A,A,[i.cx,i.cy]),p=Ze.applyTransform([f,-s],A);var E=r.getModel("axisLabel").get("rotate")||0,P=Vi.innerTextLayout(h,E*Math.PI/180,-1);m=P.textAlign,b=P.textVerticalAlign}else{var j=d[1];p=i.coordToPoint([j+s,f]);var J=i.cx,dt=i.cy;m=Math.abs(p[0]-J)/j<.3?"center":p[0]>J?"left":"right",b=Math.abs(p[1]-dt)/j<.3?"middle":p[1]>dt?"top":"bottom"}return{position:p,align:m,verticalAlign:b}}var US={line:function(a,r,t,i){return a.dim==="angle"?{type:"Line",shape:ry(r.coordToPoint([i[0],t]),r.coordToPoint([i[1],t]))}:{type:"Circle",shape:{cx:r.cx,cy:r.cy,r:t}}},shadow:function(a,r,t,i){var s=Math.max(1,a.getBandWidth()),l=Math.PI/180;return a.dim==="angle"?{type:"Sector",shape:z0(r.cx,r.cy,i[0],i[1],(-t-s/2)*l,(-t+s/2)*l)}:{type:"Sector",shape:z0(r.cx,r.cy,t-s/2,t+s/2,0,Math.PI*2)}}},HS=VS,WS=function(a){Object(de.b)(r,a);function r(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=r.type,t}return r.prototype.findAxisModel=function(t){var i,s=this.ecModel;return s.eachComponent(t,function(l){l.getCoordSysModel()===this&&(i=l)},this),i},r.type="polar",r.dependencies=["radiusAxis","angleAxis"],r.defaultOption={zlevel:0,z:0,center:["50%","50%"],radius:"80%"},r}(An.a),YS=WS,iy=function(a){Object(de.b)(r,a);function r(){return a!==null&&a.apply(this,arguments)||this}return r.prototype.getCoordSysModel=function(){return this.getReferringComponents("polar",sr.b).models[0]},r.type="polarAxis",r}(An.a);y.mixin(iy,hn.a);var XS=function(a){Object(de.b)(r,a);function r(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=r.type,t}return r.type="angleAxis",r}(iy),ZS=function(a){Object(de.b)(r,a);function r(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=r.type,t}return r.type="radiusAxis",r}(iy),ay=function(a){Object(de.b)(r,a);function r(t,i){return a.call(this,"radius",t,i)||this}return r.prototype.pointToData=function(t,i){return this.polar.pointToData(t,i)[this.dim==="radius"?0:1]},r}(Ft.a);ay.prototype.dataToRadius=Ft.a.prototype.dataToCoord,ay.prototype.radiusToData=Ft.a.prototype.coordToData;var KS=ay,kS=Object(sr.o)(),oy=function(a){Object(de.b)(r,a);function r(t,i){return a.call(this,"angle",t,i||[0,360])||this}return r.prototype.pointToData=function(t,i){return this.polar.pointToData(t,i)[this.dim==="radius"?0:1]},r.prototype.calculateCategoryInterval=function(){var t=this,i=t.getLabelModel(),s=t.scale,l=s.getExtent(),f=s.count();if(l[1]-l[0]<1)return 0;var h=l[0],d=t.dataToCoord(h+1)-t.dataToCoord(h),p=Math.abs(d),m=gt.e(h==null?"":h+"",i.getFont(),"center","top"),b=Math.max(m.height,7),A=b/p;isNaN(A)&&(A=Infinity);var E=Math.max(0,Math.floor(A)),P=kS(t.model),j=P.lastAutoInterval,J=P.lastTickCount;return j!=null&&J!=null&&Math.abs(j-E)<=1&&Math.abs(J-f)<=1&&j>E?E=j:(P.lastTickCount=f,P.lastAutoInterval=E),E},r}(Ft.a);oy.prototype.dataToAngle=Ft.a.prototype.dataToCoord,oy.prototype.angleToData=Ft.a.prototype.coordToData;var QS=oy,JS=function(){function a(r){this.dimensions=["radius","angle"],this.type="polar",this.cx=0,this.cy=0,this._radiusAxis=new KS,this._angleAxis=new QS,this.axisPointerEnabled=!0,this.name=r||"",this._radiusAxis.polar=this._angleAxis.polar=this}return a.prototype.containPoint=function(r){var t=this.pointToCoord(r);return this._radiusAxis.contain(t[0])&&this._angleAxis.contain(t[1])},a.prototype.containData=function(r){return this._radiusAxis.containData(r[0])&&this._angleAxis.containData(r[1])},a.prototype.getAxis=function(r){var t="_"+r+"Axis";return this[t]},a.prototype.getAxes=function(){return[this._radiusAxis,this._angleAxis]},a.prototype.getAxesByScale=function(r){var t=[],i=this._angleAxis,s=this._radiusAxis;return i.scale.type===r&&t.push(i),s.scale.type===r&&t.push(s),t},a.prototype.getAngleAxis=function(){return this._angleAxis},a.prototype.getRadiusAxis=function(){return this._radiusAxis},a.prototype.getOtherAxis=function(r){var t=this._angleAxis;return r===t?this._radiusAxis:t},a.prototype.getBaseAxis=function(){return this.getAxesByScale("ordinal")[0]||this.getAxesByScale("time")[0]||this.getAngleAxis()},a.prototype.getTooltipAxes=function(r){var t=r!=null&&r!=="auto"?this.getAxis(r):this.getBaseAxis();return{baseAxes:[t],otherAxes:[this.getOtherAxis(t)]}},a.prototype.dataToPoint=function(r,t){return this.coordToPoint([this._radiusAxis.dataToRadius(r[0],t),this._angleAxis.dataToAngle(r[1],t)])},a.prototype.pointToData=function(r,t){var i=this.pointToCoord(r);return[this._radiusAxis.radiusToData(i[0],t),this._angleAxis.angleToData(i[1],t)]},a.prototype.pointToCoord=function(r){var t=r[0]-this.cx,i=r[1]-this.cy,s=this.getAngleAxis(),l=s.getExtent(),f=Math.min(l[0],l[1]),h=Math.max(l[0],l[1]);s.inverse?f=h-360:h=f+360;var d=Math.sqrt(t*t+i*i);t/=d,i/=d;for(var p=Math.atan2(-i,t)/Math.PI*180,m=p<f?1:-1;p<f||p>h;)p+=m*360;return[d,p]},a.prototype.coordToPoint=function(r){var t=r[0],i=r[1]/180*Math.PI,s=Math.cos(i)*t+this.cx,l=-Math.sin(i)*t+this.cy;return[s,l]},a.prototype.getArea=function(){var r=this.getAngleAxis(),t=this.getRadiusAxis(),i=t.getExtent().slice();i[0]>i[1]&&i.reverse();var s=r.getExtent(),l=Math.PI/180;return{cx:this.cx,cy:this.cy,r0:i[0],r:i[1],startAngle:-s[0]*l,endAngle:-s[1]*l,clockwise:r.inverse,contain:function(f,h){var d=f-this.cx,p=h-this.cy,m=d*d+p*p,b=this.r,A=this.r0;return m<=b*b&&m>=A*A}}},a.prototype.convertToPixel=function(r,t,i){var s=Z0(t);return s===this?this.dataToPoint(i):null},a.prototype.convertFromPixel=function(r,t,i){var s=Z0(t);return s===this?this.pointToData(i):null},a}();function Z0(a){var r=a.seriesModel,t=a.polarModel;return t&&t.coordinateSystem||r&&r.coordinateSystem}var K0=JS;function $S(a,r,t){var i=r.get("center"),s=t.getWidth(),l=t.getHeight();a.cx=Object(Ne.o)(i[0],s),a.cy=Object(Ne.o)(i[1],l);var f=a.getRadiusAxis(),h=Math.min(s,l)/2,d=r.get("radius");d==null?d=[0,"100%"]:y.isArray(d)||(d=[0,d]);var p=[Object(Ne.o)(d[0],h),Object(Ne.o)(d[1],h)];f.inverse?f.setExtent(p[1],p[0]):f.setExtent(p[0],p[1])}function qS(a,r){var t=this,i=t.getAngleAxis(),s=t.getRadiusAxis();if(i.scale.setExtent(Infinity,-Infinity),s.scale.setExtent(Infinity,-Infinity),a.eachSeries(function(h){if(h.coordinateSystem===t){var d=h.getData();y.each(Object(Bn.d)(d,"radius"),function(p){s.scale.unionExtentFromData(d,p)}),y.each(Object(Bn.d)(d,"angle"),function(p){i.scale.unionExtentFromData(d,p)})}}),Object(Bn.i)(i.scale,i.model),Object(Bn.i)(s.scale,s.model),i.type==="category"&&!i.onBand){var l=i.getExtent(),f=360/i.scale.count();i.inverse?l[1]+=f:l[1]-=f,i.setExtent(l[0],l[1])}}function t_(a){return a.mainType==="angleAxis"}function k0(a,r){if(a.type=r.get("type"),a.scale=Object(Bn.a)(r),a.onBand=r.get("boundaryGap")&&a.type==="category",a.inverse=r.get("inverse"),t_(r)){a.inverse=a.inverse!==r.get("clockwise");var t=r.get("startAngle");a.setExtent(t,t+(a.inverse?-360:360))}r.axis=a,a.model=r}var e_={dimensions:K0.prototype.dimensions,create:function(a,r){var t=[];return a.eachComponent("polar",function(i,s){var l=new K0(s+"");l.update=qS;var f=l.getRadiusAxis(),h=l.getAngleAxis(),d=i.findAxisModel("radiusAxis"),p=i.findAxisModel("angleAxis");k0(f,d),k0(h,p),$S(l,i,r),t.push(l),i.coordinateSystem=l,l.model=i}),a.eachSeries(function(i){if(i.get("coordinateSystem")==="polar"){var s=i.getReferringComponents("polar",sr.b).models[0];i.coordinateSystem=s.coordinateSystem}}),t}},r_=e_,n_=["axisLine","axisLabel","axisTick","minorTick","splitLine","minorSplitLine","splitArea"];function Md(a,r,t){r[1]>r[0]&&(r=r.slice().reverse());var i=a.coordToPoint([r[0],t]),s=a.coordToPoint([r[1],t]);return{x1:i[0],y1:i[1],x2:s[0],y2:s[1]}}function Dd(a){var r=a.getRadiusAxis();return r.inverse?0:1}function Q0(a){var r=a[0],t=a[a.length-1];r&&t&&Math.abs(Math.abs(r.coord-t.coord)-360)<1e-4&&a.pop()}var i_=function(a){Object(de.b)(r,a);function r(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=r.type,t.axisPointerClass="PolarAxisPointer",t}return r.prototype.render=function(t,i){if(this.group.removeAll(),!!t.get("show")){var s=t.axis,l=s.polar,f=l.getRadiusAxis().getExtent(),h=s.getTicksCoords(),d=s.getMinorTicksCoords(),p=y.map(s.getViewLabels(),function(m){m=y.clone(m);var b=s.scale,A=b.type==="ordinal"?b.getRawOrdinalNumber(m.tickValue):m.tickValue;return m.coord=s.dataToCoord(A),m});Q0(p),Q0(h),y.each(n_,function(m){t.get([m,"show"])&&(!s.scale.isBlank()||m==="axisLine")&&a_[m](this.group,t,l,h,d,f,p)},this)}},r.type="angleAxis",r}(Ho),a_={axisLine:function(a,r,t,i,s,l){var f=r.getModel(["axisLine","lineStyle"]),h=Dd(t),d=h?0:1,p;l[d]===0?p=new Ss.a({shape:{cx:t.cx,cy:t.cy,r:l[h]},style:f.getLineStyle(),z2:1,silent:!0}):p=new nh.a({shape:{cx:t.cx,cy:t.cy,r:l[h],r0:l[d]},style:f.getLineStyle(),z2:1,silent:!0}),p.style.fill=null,a.add(p)},axisTick:function(a,r,t,i,s,l){var f=r.getModel("axisTick"),h=(f.get("inside")?-1:1)*f.get("length"),d=l[Dd(t)],p=y.map(i,function(m){return new Ce.a({shape:Md(t,[d,d+h],m.coord)})});a.add(Ze.mergePath(p,{style:y.defaults(f.getModel("lineStyle").getLineStyle(),{stroke:r.get(["axisLine","lineStyle","color"])})}))},minorTick:function(a,r,t,i,s,l){if(!!s.length){for(var f=r.getModel("axisTick"),h=r.getModel("minorTick"),d=(f.get("inside")?-1:1)*h.get("length"),p=l[Dd(t)],m=[],b=0;b<s.length;b++)for(var A=0;A<s[b].length;A++)m.push(new Ce.a({shape:Md(t,[p,p+d],s[b][A].coord)}));a.add(Ze.mergePath(m,{style:y.defaults(h.getModel("lineStyle").getLineStyle(),y.defaults(f.getLineStyle(),{stroke:r.get(["axisLine","lineStyle","color"])}))}))}},axisLabel:function(a,r,t,i,s,l,f){var h=r.getCategories(!0),d=r.getModel("axisLabel"),p=d.get("margin"),m=r.get("triggerEvent");y.each(f,function(b,A){var E=d,P=b.tickValue,j=l[Dd(t)],J=t.coordToPoint([j+p,b.coord]),dt=t.cx,St=t.cy,Ot=Math.abs(J[0]-dt)/j<.3?"center":J[0]>dt?"left":"right",wt=Math.abs(J[1]-St)/j<.3?"middle":J[1]>St?"top":"bottom";if(h&&h[P]){var zt=h[P];y.isObject(zt)&&zt.textStyle&&(E=new Ye.a(zt.textStyle,d,d.ecModel))}var jt=new en.a({silent:Vi.isLabelSilent(r),style:Object(Ar.c)(E,{x:J[0],y:J[1],fill:E.getTextColor()||r.get(["axisLine","lineStyle","color"]),text:b.formattedLabel,align:Ot,verticalAlign:wt})});if(a.add(jt),m){var kt=Vi.makeAxisEventDataBase(r);kt.targetType="axisLabel",kt.value=b.rawLabel,Object(Ur.a)(jt).eventData=kt}},this)},splitLine:function(a,r,t,i,s,l){var f=r.getModel("splitLine"),h=f.getModel("lineStyle"),d=h.get("color"),p=0;d=d instanceof Array?d:[d];for(var m=[],b=0;b<i.length;b++){var A=p++%d.length;m[A]=m[A]||[],m[A].push(new Ce.a({shape:Md(t,l,i[b].coord)}))}for(var b=0;b<m.length;b++)a.add(Ze.mergePath(m[b],{style:y.defaults({stroke:d[b%d.length]},h.getLineStyle()),silent:!0,z:r.get("z")}))},minorSplitLine:function(a,r,t,i,s,l){if(!!s.length){for(var f=r.getModel("minorSplitLine"),h=f.getModel("lineStyle"),d=[],p=0;p<s.length;p++)for(var m=0;m<s[p].length;m++)d.push(new Ce.a({shape:Md(t,l,s[p][m].coord)}));a.add(Ze.mergePath(d,{style:h.getLineStyle(),silent:!0,z:r.get("z")}))}},splitArea:function(a,r,t,i,s,l){if(!!i.length){var f=r.getModel("splitArea"),h=f.getModel("areaStyle"),d=h.get("color"),p=0;d=d instanceof Array?d:[d];for(var m=[],b=Math.PI/180,A=-i[0].coord*b,E=Math.min(l[0],l[1]),P=Math.max(l[0],l[1]),j=r.get("clockwise"),J=1,dt=i.length;J<=dt;J++){var St=J===dt?i[0].coord:i[J].coord,Ot=p++%d.length;m[Ot]=m[Ot]||[],m[Ot].push(new vi.a({shape:{cx:t.cx,cy:t.cy,r0:E,r:P,startAngle:A,endAngle:-St*b,clockwise:j},silent:!0})),A=-St*b}for(var J=0;J<m.length;J++)a.add(Ze.mergePath(m[J],{style:y.defaults({fill:d[J%d.length]},h.getAreaStyle()),silent:!0}))}}},o_=i_,s_=["axisLine","axisTickLabel","axisName"],l_=["splitLine","splitArea","minorSplitLine"],u_=function(a){Object(de.b)(r,a);function r(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=r.type,t.axisPointerClass="PolarAxisPointer",t}return r.prototype.render=function(t,i){if(this.group.removeAll(),!!t.get("show")){var s=this._axisGroup,l=this._axisGroup=new pr.a;this.group.add(l);var f=t.axis,h=f.polar,d=h.getAngleAxis(),p=f.getTicksCoords(),m=f.getMinorTicksCoords(),b=d.getExtent()[0],A=f.getExtent(),E=c_(h,t,b),P=new Vi(t,E);y.each(s_,P.add,P),l.add(P.getGroup()),Ze.groupTransition(s,l,t),y.each(l_,function(j){t.get([j,"show"])&&!f.scale.isBlank()&&f_[j](this.group,t,h,b,A,p,m)},this)}},r.type="radiusAxis",r}(Ho),f_={splitLine:function(a,r,t,i,s,l){var f=r.getModel("splitLine"),h=f.getModel("lineStyle"),d=h.get("color"),p=0;d=d instanceof Array?d:[d];for(var m=[],b=0;b<l.length;b++){var A=p++%d.length;m[A]=m[A]||[],m[A].push(new Ss.a({shape:{cx:t.cx,cy:t.cy,r:l[b].coord}}))}for(var b=0;b<m.length;b++)a.add(Ze.mergePath(m[b],{style:y.defaults({stroke:d[b%d.length],fill:null},h.getLineStyle()),silent:!0}))},minorSplitLine:function(a,r,t,i,s,l,f){if(!!f.length){for(var h=r.getModel("minorSplitLine"),d=h.getModel("lineStyle"),p=[],m=0;m<f.length;m++)for(var b=0;b<f[m].length;b++)p.push(new Ss.a({shape:{cx:t.cx,cy:t.cy,r:f[m][b].coord}}));a.add(Ze.mergePath(p,{style:y.defaults({fill:null},d.getLineStyle()),silent:!0}))}},splitArea:function(a,r,t,i,s,l){if(!!l.length){var f=r.getModel("splitArea"),h=f.getModel("areaStyle"),d=h.get("color"),p=0;d=d instanceof Array?d:[d];for(var m=[],b=l[0].coord,A=1;A<l.length;A++){var E=p++%d.length;m[E]=m[E]||[],m[E].push(new vi.a({shape:{cx:t.cx,cy:t.cy,r0:b,r:l[A].coord,startAngle:0,endAngle:Math.PI*2},silent:!0})),b=l[A].coord}for(var A=0;A<m.length;A++)a.add(Ze.mergePath(m[A],{style:y.defaults({fill:d[A%d.length]},h.getAreaStyle()),silent:!0}))}}};function c_(a,r,t){return{position:[a.cx,a.cy],rotation:t/180*Math.PI,labelDirection:-1,tickDirection:-1,nameDirection:1,labelRotate:r.getModel("axisLabel").get("rotate"),z2:1}}var h_=u_;function J0(a){return a.get("stack")||"__ec_stack_"+a.seriesIndex}function $0(a,r){return r.dim+a.model.componentIndex}function v_(a,r,t){var i={},s=d_(y.filter(r.getSeriesByType(a),function(l){return!r.isSeriesFiltered(l)&&l.coordinateSystem&&l.coordinateSystem.type==="polar"}));r.eachSeriesByType(a,function(l){if(l.coordinateSystem.type==="polar"){var f=l.getData(),h=l.coordinateSystem,d=h.getBaseAxis(),p=$0(h,d),m=J0(l),b=s[p][m],A=b.offset,E=b.width,P=h.getOtherAxis(d),j=l.coordinateSystem.cx,J=l.coordinateSystem.cy,dt=l.get("barMinHeight")||0,St=l.get("barMinAngle")||0;i[m]=i[m]||[];for(var Ot=f.mapDimension(P.dim),wt=f.mapDimension(d.dim),zt=Object(Te.c)(f,Ot),jt=d.dim!=="radius"||!l.get("roundCap",!0),kt=P.dataToCoord(0),te=0,ue=f.count();te<ue;te++){var me=f.get(Ot,te),ve=f.get(wt,te),Me=me>=0?"p":"n",Ee=kt;zt&&(i[m][ve]||(i[m][ve]={p:kt,n:kt}),Ee=i[m][ve][Me]);var Oe=void 0,we=void 0,We=void 0,$e=void 0;if(P.dim==="radius"){var Je=P.dataToCoord(me)-kt,fr=d.dataToCoord(ve);Math.abs(Je)<dt&&(Je=(Je<0?-1:1)*dt),Oe=Ee,we=Ee+Je,We=fr-A,$e=We-E,zt&&(i[m][ve][Me]=we)}else{var Vr=P.dataToCoord(me,jt)-kt,wr=d.dataToCoord(ve);Math.abs(Vr)<St&&(Vr=(Vr<0?-1:1)*St),Oe=wr+A,we=Oe+E,We=Ee,$e=Ee+Vr,zt&&(i[m][ve][Me]=$e)}f.setItemLayout(te,{cx:j,cy:J,r0:Oe,r:we,startAngle:-We*Math.PI/180,endAngle:-$e*Math.PI/180})}}})}function d_(a){var r={};y.each(a,function(i,s){var l=i.getData(),f=i.coordinateSystem,h=f.getBaseAxis(),d=$0(f,h),p=h.getExtent(),m=h.type==="category"?h.getBandWidth():Math.abs(p[1]-p[0])/l.count(),b=r[d]||{bandWidth:m,remainedWidth:m,autoWidthCount:0,categoryGap:"20%",gap:"30%",stacks:{}},A=b.stacks;r[d]=b;var E=J0(i);A[E]||b.autoWidthCount++,A[E]=A[E]||{width:0,maxWidth:0};var P=Object(Ne.o)(i.get("barWidth"),m),j=Object(Ne.o)(i.get("barMaxWidth"),m),J=i.get("barGap"),dt=i.get("barCategoryGap");P&&!A[E].width&&(P=Math.min(b.remainedWidth,P),A[E].width=P,b.remainedWidth-=P),j&&(A[E].maxWidth=j),J!=null&&(b.gap=J),dt!=null&&(b.categoryGap=dt)});var t={};return y.each(r,function(i,s){t[s]={};var l=i.stacks,f=i.bandWidth,h=Object(Ne.o)(i.categoryGap,f),d=Object(Ne.o)(i.gap,1),p=i.remainedWidth,m=i.autoWidthCount,b=(p-h)/(m+(m-1)*d);b=Math.max(b,0),y.each(l,function(j,J){var dt=j.maxWidth;dt&&dt<b&&(dt=Math.min(dt,p),j.width&&(dt=Math.min(dt,j.width)),p-=dt,j.width=dt,m--)}),b=(p-h)/(m+(m-1)*d),b=Math.max(b,0);var A=0,E;y.each(l,function(j,J){j.width||(j.width=b),E=j,A+=j.width*(1+d)}),E&&(A-=E.width*d);var P=-A/2;y.each(l,function(j,J){t[s][J]=t[s][J]||{offset:P,width:j.width},P+=j.width*(1+d)})}),t}var p_=v_,g_={startAngle:90,clockwise:!0,splitNumber:12,axisLabel:{rotate:0}},m_={splitNumber:5},y_=function(a){Object(de.b)(r,a);function r(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=r.type,t}return r.type="polar",r}(Vn.a);function x_(a){Object(B.a)(Vc),Ho.registerAxisPointerClass("PolarAxisPointer",HS),a.registerCoordinateSystem("polar",r_),a.registerComponentModel(YS),a.registerComponentView(y_),Go(a,"angle",XS,g_),Go(a,"radius",ZS,m_),a.registerComponentView(o_),a.registerComponentView(h_),a.registerLayout(Object(y.curry)(p_,"bar"))}function sy(a,r){r=r||{};var t=a.coordinateSystem,i=a.axis,s={},l=i.position,f=i.orient,h=t.getRect(),d=[h.x,h.x+h.width,h.y,h.y+h.height],p={horizontal:{top:d[2],bottom:d[3]},vertical:{left:d[0],right:d[1]}};s.position=[f==="vertical"?p.vertical[l]:d[0],f==="horizontal"?p.horizontal[l]:d[3]];var m={horizontal:0,vertical:1};s.rotation=Math.PI/2*m[f];var b={top:-1,bottom:1,right:1,left:-1};s.labelDirection=s.tickDirection=s.nameDirection=b[l],a.get(["axisTick","inside"])&&(s.tickDirection=-s.tickDirection),y.retrieve(r.labelInside,a.get(["axisLabel","inside"]))&&(s.labelDirection=-s.labelDirection);var A=r.rotate;return A==null&&(A=a.get(["axisLabel","rotate"])),s.labelRotation=l==="top"?-A:A,s.z2=1,s}var b_=["axisLine","axisTickLabel","axisName"],S_=["splitArea","splitLine"],__=function(a){Object(de.b)(r,a);function r(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=r.type,t.axisPointerClass="SingleAxisPointer",t}return r.prototype.render=function(t,i,s,l){var f=this.group;f.removeAll();var h=this._axisGroup;this._axisGroup=new pr.a;var d=sy(t),p=new Vi(t,d);y.each(b_,p.add,p),f.add(this._axisGroup),f.add(p.getGroup()),y.each(S_,function(m){t.get([m,"show"])&&T_[m](this,this.group,this._axisGroup,t)},this),Ze.groupTransition(h,this._axisGroup,t),a.prototype.render.call(this,t,i,s,l)},r.prototype.remove=function(){oo(this)},r.type="singleAxis",r}(Ho),T_={splitLine:function(a,r,t,i){var s=i.axis;if(!s.scale.isBlank()){var l=i.getModel("splitLine"),f=l.getModel("lineStyle"),h=f.get("color");h=h instanceof Array?h:[h];for(var d=i.coordinateSystem.getRect(),p=s.isHorizontal(),m=[],b=0,A=s.getTicksCoords({tickModel:l}),E=[],P=[],j=0;j<A.length;++j){var J=s.toGlobalCoord(A[j].coord);p?(E[0]=J,E[1]=d.y,P[0]=J,P[1]=d.y+d.height):(E[0]=d.x,E[1]=J,P[0]=d.x+d.width,P[1]=J);var dt=b++%h.length;m[dt]=m[dt]||[],m[dt].push(new Ce.a({subPixelOptimize:!0,shape:{x1:E[0],y1:E[1],x2:P[0],y2:P[1]},silent:!0}))}for(var St=f.getLineStyle(["color"]),j=0;j<m.length;++j)r.add(Ze.mergePath(m[j],{style:y.defaults({stroke:h[j%h.length]},St),silent:!0}))}},splitArea:function(a,r,t,i){cl(a,t,i,i)}},O_=__,q0=function(a){Object(de.b)(r,a);function r(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=r.type,t}return r.prototype.getCoordSysModel=function(){return this},r.type="singleAxis",r.layoutMode="box",r.defaultOption={left:"5%",top:"5%",right:"5%",bottom:"5%",type:"value",position:"bottom",orient:"horizontal",axisLine:{show:!0,lineStyle:{width:1,type:"solid"}},tooltip:{show:!0},axisTick:{show:!0,length:6,lineStyle:{width:1}},axisLabel:{show:!0,interval:"auto"},splitLine:{show:!0,lineStyle:{type:"dashed",opacity:.2}}},r}(An.a);Object(y.mixin)(q0,hn.a.prototype);var ly=q0,A_=function(a){Object(de.b)(r,a);function r(t,i,s,l,f){var h=a.call(this,t,i,s)||this;return h.type=l||"value",h.position=f||"bottom",h}return r.prototype.isHorizontal=function(){var t=this.position;return t==="top"||t==="bottom"},r.prototype.pointToData=function(t,i){return this.coordinateSystem.pointToData(t)[0]},r}(Ft.a),M_=A_,D_=function(){function a(r,t,i){this.type="single",this.dimension="single",this.dimensions=["single"],this.axisPointerEnabled=!0,this.model=r,this._init(r,t,i)}return a.prototype._init=function(r,t,i){var s=this.dimension,l=new M_(s,Bn.a(r),[0,0],r.get("type"),r.get("position")),f=l.type==="category";l.onBand=f&&r.get("boundaryGap"),l.inverse=r.get("inverse"),l.orient=r.get("orient"),r.axis=l,l.model=r,l.coordinateSystem=this,this._axis=l},a.prototype.update=function(r,t){r.eachSeries(function(i){if(i.coordinateSystem===this){var s=i.getData();Object(y.each)(s.mapDimensionsAll(this.dimension),function(l){this._axis.scale.unionExtentFromData(s,l)},this),Bn.i(this._axis.scale,this._axis.model)}},this)},a.prototype.resize=function(r,t){this._rect=Object(Tr.g)({left:r.get("left"),top:r.get("top"),right:r.get("right"),bottom:r.get("bottom"),width:r.get("width"),height:r.get("height")},{width:t.getWidth(),height:t.getHeight()}),this._adjustAxis()},a.prototype.getRect=function(){return this._rect},a.prototype._adjustAxis=function(){var r=this._rect,t=this._axis,i=t.isHorizontal(),s=i?[0,r.width]:[0,r.height],l=t.reverse?1:0;t.setExtent(s[l],s[1-l]),this._updateAxisTransform(t,i?r.x:r.y)},a.prototype._updateAxisTransform=function(r,t){var i=r.getExtent(),s=i[0]+i[1],l=r.isHorizontal();r.toGlobalCoord=l?function(f){return f+t}:function(f){return s-f+t},r.toLocalCoord=l?function(f){return f-t}:function(f){return s-f+t}},a.prototype.getAxis=function(){return this._axis},a.prototype.getBaseAxis=function(){return this._axis},a.prototype.getAxes=function(){return[this._axis]},a.prototype.getTooltipAxes=function(){return{baseAxes:[this.getAxis()],otherAxes:[]}},a.prototype.containPoint=function(r){var t=this.getRect(),i=this.getAxis(),s=i.orient;return s==="horizontal"?i.contain(i.toLocalCoord(r[0]))&&r[1]>=t.y&&r[1]<=t.y+t.height:i.contain(i.toLocalCoord(r[1]))&&r[0]>=t.y&&r[0]<=t.y+t.height},a.prototype.pointToData=function(r){var t=this.getAxis();return[t.coordToData(t.toLocalCoord(r[t.orient==="horizontal"?0:1]))]},a.prototype.dataToPoint=function(r){var t=this.getAxis(),i=this.getRect(),s=[],l=t.orient==="horizontal"?0:1;return r instanceof Array&&(r=r[0]),s[l]=t.toGlobalCoord(t.dataToCoord(+r)),s[1-l]=l===0?i.y+i.height/2:i.x+i.width/2,s},a.prototype.convertToPixel=function(r,t,i){var s=t1(t);return s===this?this.dataToPoint(i):null},a.prototype.convertFromPixel=function(r,t,i){var s=t1(t);return s===this?this.pointToData(i):null},a}();function t1(a){var r=a.seriesModel,t=a.singleAxisModel;return t&&t.coordinateSystem||r&&r.coordinateSystem}var e1=D_;function C_(a,r){var t=[];return a.eachComponent("singleAxis",function(i,s){var l=new e1(i,a,r);l.name="single_"+s,l.resize(i,r),i.coordinateSystem=l,t.push(l)}),a.eachSeries(function(i){if(i.get("coordinateSystem")==="singleAxis"){var s=i.getReferringComponents("singleAxis",sr.b).models[0];i.coordinateSystem=s&&s.coordinateSystem}}),t}var E_={create:C_,dimensions:e1.prototype.dimensions},L_=E_,r1=["x","y"],P_=["width","height"],w_=function(a){Object(de.b)(r,a);function r(){return a!==null&&a.apply(this,arguments)||this}return r.prototype.makeElOption=function(t,i,s,l,f){var h=s.axis,d=h.coordinateSystem,p=uy(d,1-Cd(h)),m=d.dataToPoint(i)[0],b=l.get("type");if(b&&b!=="none"){var A=ty(l),E=I_[b](h,m,p);E.style=A,t.graphicKey=E.type,t.pointer=E}var P=sy(s);B0(i,t,P,s,l,f)},r.prototype.getHandleTransform=function(t,i,s){var l=sy(i,{labelInside:!1});l.labelMargin=s.get(["handle","margin"]);var f=ey(i.axis,t,l);return{x:f[0],y:f[1],rotation:l.rotation+(l.labelDirection<0?Math.PI:0)}},r.prototype.updateHandleTransform=function(t,i,s,l){var f=s.axis,h=f.coordinateSystem,d=Cd(f),p=uy(h,d),m=[t.x,t.y];m[d]+=i[d],m[d]=Math.min(p[1],m[d]),m[d]=Math.max(p[0],m[d]);var b=uy(h,1-d),A=(b[1]+b[0])/2,E=[A,A];return E[d]=m[d],{x:m[0],y:m[1],rotation:t.rotation,cursorPoint:E,tooltipOption:{verticalAlign:"middle"}}},r}(qm),I_={line:function(a,r,t){var i=ry([r,t[0]],[r,t[1]],Cd(a));return{type:"Line",subPixelOptimize:!0,shape:i}},shadow:function(a,r,t){var i=a.getBandWidth(),s=t[1]-t[0];return{type:"Rect",shape:j0([r-i/2,t[0]],[i,s],Cd(a))}}};function Cd(a){return a.isHorizontal()?0:1}function uy(a,r){var t=a.getRect();return[t[r1[r]],t[r1[r]]+t[P_[r]]]}var R_=w_,N_=function(a){Object(de.b)(r,a);function r(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=r.type,t}return r.type="single",r}(Vn.a);function B_(a){Object(B.a)(Vc),Ho.registerAxisPointerClass("SingleAxisPointer",R_),a.registerComponentView(N_),a.registerComponentView(O_),a.registerComponentModel(ly),Go(a,"single",ly,ly.defaultOption),a.registerCoordinateSystem("single",L_)}var j_=function(a){Object(de.b)(r,a);function r(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=r.type,t}return r.prototype.init=function(t,i,s){var l=Object(Tr.f)(t);a.prototype.init.apply(this,arguments),n1(t,l)},r.prototype.mergeOption=function(t){a.prototype.mergeOption.apply(this,arguments),n1(this.option,t)},r.prototype.getCellSize=function(){return this.option.cellSize},r.type="calendar",r.defaultOption={zlevel:0,z:2,left:80,top:60,cellSize:20,orient:"horizontal",splitLine:{show:!0,lineStyle:{color:"#000",width:1,type:"solid"}},itemStyle:{color:"#fff",borderWidth:1,borderColor:"#ccc"},dayLabel:{show:!0,firstDay:0,position:"start",margin:"50%",nameMap:"en",color:"#000"},monthLabel:{show:!0,position:"start",margin:5,align:"center",nameMap:"en",formatter:null,color:"#000"},yearLabel:{show:!0,position:null,margin:30,formatter:null,color:"#ccc",fontFamily:"sans-serif",fontWeight:"bolder",fontSize:20}},r}(An.a);function n1(a,r){var t=a.cellSize,i;y.isArray(t)?i=t:i=a.cellSize=[t,t],i.length===1&&(i[1]=i[0]);var s=y.map([0,1],function(l){return Object(Tr.j)(r,l)&&(i[l]="auto"),i[l]!=null&&i[l]!=="auto"});Object(Tr.h)(a,r,{type:"box",ignoreSize:s})}var z_=j_,F_={EN:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],CN:["\u4E00\u6708","\u4E8C\u6708","\u4E09\u6708","\u56DB\u6708","\u4E94\u6708","\u516D\u6708","\u4E03\u6708","\u516B\u6708","\u4E5D\u6708","\u5341\u6708","\u5341\u4E00\u6708","\u5341\u4E8C\u6708"]},V_={EN:["S","M","T","W","T","F","S"],CN:["\u65E5","\u4E00","\u4E8C","\u4E09","\u56DB","\u4E94","\u516D"]},G_=function(a){Object(de.b)(r,a);function r(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=r.type,t}return r.prototype.render=function(t,i,s){var l=this.group;l.removeAll();var f=t.coordinateSystem,h=f.getRangeInfo(),d=f.getOrient();this._renderDayRect(t,h,l),this._renderLines(t,h,d,l),this._renderYearText(t,h,d,l),this._renderMonthText(t,d,l),this._renderWeekText(t,h,d,l)},r.prototype._renderDayRect=function(t,i,s){for(var l=t.coordinateSystem,f=t.getModel("itemStyle").getItemStyle(),h=l.getCellWidth(),d=l.getCellHeight(),p=i.start.time;p<=i.end.time;p=l.getNextNDay(p,1).time){var m=l.dataToRect([p],!1).tl,b=new nn.a({shape:{x:m[0],y:m[1],width:h,height:d},cursor:"default",style:f});s.add(b)}},r.prototype._renderLines=function(t,i,s,l){var f=this,h=t.coordinateSystem,d=t.getModel(["splitLine","lineStyle"]).getLineStyle(),p=t.get(["splitLine","show"]),m=d.lineWidth;this._tlpoints=[],this._blpoints=[],this._firstDayOfMonth=[],this._firstDayPoints=[];for(var b=i.start,A=0;b.time<=i.end.time;A++){P(b.formatedDate),A===0&&(b=h.getDateInfo(i.start.y+"-"+i.start.m));var E=b.date;E.setMonth(E.getMonth()+1),b=h.getDateInfo(E)}P(h.getNextNDay(i.end.time,1).formatedDate);function P(j){f._firstDayOfMonth.push(h.getDateInfo(j)),f._firstDayPoints.push(h.dataToRect([j],!1).tl);var J=f._getLinePointsOfOneWeek(t,j,s);f._tlpoints.push(J[0]),f._blpoints.push(J[J.length-1]),p&&f._drawSplitline(J,d,l)}p&&this._drawSplitline(f._getEdgesPoints(f._tlpoints,m,s),d,l),p&&this._drawSplitline(f._getEdgesPoints(f._blpoints,m,s),d,l)},r.prototype._getEdgesPoints=function(t,i,s){var l=[t[0].slice(),t[t.length-1].slice()],f=s==="horizontal"?0:1;return l[0][f]=l[0][f]-i/2,l[1][f]=l[1][f]+i/2,l},r.prototype._drawSplitline=function(t,i,s){var l=new pi.a({z2:20,shape:{points:t},style:i});s.add(l)},r.prototype._getLinePointsOfOneWeek=function(t,i,s){for(var l=t.coordinateSystem,f=l.getDateInfo(i),h=[],d=0;d<7;d++){var p=l.getNextNDay(f.time,d),m=l.dataToRect([p.time],!1);h[2*p.day]=m.tl,h[2*p.day+1]=m[s==="horizontal"?"bl":"tr"]}return h},r.prototype._formatterLabel=function(t,i){return typeof t=="string"&&t?Pr.g(t,i):typeof t=="function"?t(i):i.nameMap},r.prototype._yearTextPositionControl=function(t,i,s,l,f){var h=i[0],d=i[1],p=["center","bottom"];l==="bottom"?(d+=f,p=["center","top"]):l==="left"?h-=f:l==="right"?(h+=f,p=["center","top"]):d-=f;var m=0;return(l==="left"||l==="right")&&(m=Math.PI/2),{rotation:m,x:h,y:d,style:{align:p[0],verticalAlign:p[1]}}},r.prototype._renderYearText=function(t,i,s,l){var f=t.getModel("yearLabel");if(!!f.get("show")){var h=f.get("margin"),d=f.get("position");d||(d=s!=="horizontal"?"top":"left");var p=[this._tlpoints[this._tlpoints.length-1],this._blpoints[0]],m=(p[0][0]+p[1][0])/2,b=(p[0][1]+p[1][1])/2,A=s==="horizontal"?0:1,E={top:[m,p[A][1]],bottom:[m,p[1-A][1]],left:[p[1-A][0],b],right:[p[A][0],b]},P=i.start.y;+i.end.y>+i.start.y&&(P=P+"-"+i.end.y);var j=f.get("formatter"),J={start:i.start.y,end:i.end.y,nameMap:P},dt=this._formatterLabel(j,J),St=new en.a({z2:30,style:Object(Ar.c)(f,{text:dt})});St.attr(this._yearTextPositionControl(St,E[d],s,d,h)),l.add(St)}},r.prototype._monthTextPositionControl=function(t,i,s,l,f){var h="left",d="top",p=t[0],m=t[1];return s==="horizontal"?(m=m+f,i&&(h="center"),l==="start"&&(d="bottom")):(p=p+f,i&&(d="middle"),l==="start"&&(h="right")),{x:p,y:m,align:h,verticalAlign:d}},r.prototype._renderMonthText=function(t,i,s){var l=t.getModel("monthLabel");if(!!l.get("show")){var f=l.get("nameMap"),h=l.get("margin"),d=l.get("position"),p=l.get("align"),m=[this._tlpoints,this._blpoints];y.isString(f)&&(f=F_[f.toUpperCase()]||[]);var b=d==="start"?0:1,A=i==="horizontal"?0:1;h=d==="start"?-h:h;for(var E=p==="center",P=0;P<m[b].length-1;P++){var j=m[b][P].slice(),J=this._firstDayOfMonth[P];if(E){var dt=this._firstDayPoints[P];j[A]=(dt[A]+m[0][P+1][A])/2}var St=l.get("formatter"),Ot=f[+J.m-1],wt={yyyy:J.y,yy:(J.y+"").slice(2),MM:J.m,M:+J.m,nameMap:Ot},zt=this._formatterLabel(St,wt),jt=new en.a({z2:30,style:y.extend(Object(Ar.c)(l,{text:zt}),this._monthTextPositionControl(j,E,i,d,h))});s.add(jt)}}},r.prototype._weekTextPositionControl=function(t,i,s,l,f){var h="center",d="middle",p=t[0],m=t[1],b=s==="start";return i==="horizontal"?(p=p+l+(b?1:-1)*f[0]/2,h=b?"right":"left"):(m=m+l+(b?1:-1)*f[1]/2,d=b?"bottom":"top"),{x:p,y:m,align:h,verticalAlign:d}},r.prototype._renderWeekText=function(t,i,s,l){var f=t.getModel("dayLabel");if(!!f.get("show")){var h=t.coordinateSystem,d=f.get("position"),p=f.get("nameMap"),m=f.get("margin"),b=h.getFirstDayOfWeek();y.isString(p)&&(p=V_[p.toUpperCase()]||[]);var A=h.getNextNDay(i.end.time,7-i.lweek).time,E=[h.getCellWidth(),h.getCellHeight()];m=Ne.o(m,Math.min(E[1],E[0])),d==="start"&&(A=h.getNextNDay(i.start.time,-(7+i.fweek)).time,m=-m);for(var P=0;P<7;P++){var j=h.getNextNDay(A,P),J=h.dataToRect([j.time],!1).center,dt=P;dt=Math.abs((P+b)%7);var St=new en.a({z2:30,style:y.extend(Object(Ar.c)(f,{text:p[dt]}),this._weekTextPositionControl(J,s,d,m,E))});l.add(St)}}},r.type="calendar",r}(Vn.a),U_=G_,fy=864e5,H_=function(){function a(r,t,i){this.type="calendar",this.dimensions=a.dimensions,this.getDimensionsInfo=a.getDimensionsInfo,this._model=r}return a.getDimensionsInfo=function(){return[{name:"time",type:"time"},"value"]},a.prototype.getRangeInfo=function(){return this._rangeInfo},a.prototype.getModel=function(){return this._model},a.prototype.getRect=function(){return this._rect},a.prototype.getCellWidth=function(){return this._sw},a.prototype.getCellHeight=function(){return this._sh},a.prototype.getOrient=function(){return this._orient},a.prototype.getFirstDayOfWeek=function(){return this._firstDayOfWeek},a.prototype.getDateInfo=function(r){r=Ne.n(r);var t=r.getFullYear(),i=r.getMonth()+1,s=i<10?"0"+i:""+i,l=r.getDate(),f=l<10?"0"+l:""+l,h=r.getDay();return h=Math.abs((h+7-this.getFirstDayOfWeek())%7),{y:t+"",m:s,d:f,day:h,time:r.getTime(),formatedDate:t+"-"+s+"-"+f,date:r}},a.prototype.getNextNDay=function(r,t){return t=t||0,t===0?this.getDateInfo(r):(r=new Date(this.getDateInfo(r).time),r.setDate(r.getDate()+t),this.getDateInfo(r))},a.prototype.update=function(r,t){this._firstDayOfWeek=+this._model.getModel("dayLabel").get("firstDay"),this._orient=this._model.get("orient"),this._lineWidth=this._model.getModel("itemStyle").getItemStyle().lineWidth||0,this._rangeInfo=this._getRangeInfo(this._initRangeOption());var i=this._rangeInfo.weeks||1,s=["width","height"],l=this._model.getCellSize().slice(),f=this._model.getBoxLayoutParams(),h=this._orient==="horizontal"?[i,7]:[7,i];y.each([0,1],function(b){m(l,b)&&(f[s[b]]=l[b]*h[b])});var d={width:t.getWidth(),height:t.getHeight()},p=this._rect=Tr.g(f,d);y.each([0,1],function(b){m(l,b)||(l[b]=p[s[b]]/h[b])});function m(b,A){return b[A]!=null&&b[A]!=="auto"}this._sw=l[0],this._sh=l[1]},a.prototype.dataToPoint=function(r,t){y.isArray(r)&&(r=r[0]),t==null&&(t=!0);var i=this.getDateInfo(r),s=this._rangeInfo,l=i.formatedDate;if(t&&!(i.time>=s.start.time&&i.time<s.end.time+fy))return[NaN,NaN];var f=i.day,h=this._getRangeInfo([s.start.time,l]).nthWeek;return this._orient==="vertical"?[this._rect.x+f*this._sw+this._sw/2,this._rect.y+h*this._sh+this._sh/2]:[this._rect.x+h*this._sw+this._sw/2,this._rect.y+f*this._sh+this._sh/2]},a.prototype.pointToData=function(r){var t=this.pointToDate(r);return t&&t.time},a.prototype.dataToRect=function(r,t){var i=this.dataToPoint(r,t);return{contentShape:{x:i[0]-(this._sw-this._lineWidth)/2,y:i[1]-(this._sh-this._lineWidth)/2,width:this._sw-this._lineWidth,height:this._sh-this._lineWidth},center:i,tl:[i[0]-this._sw/2,i[1]-this._sh/2],tr:[i[0]+this._sw/2,i[1]-this._sh/2],br:[i[0]+this._sw/2,i[1]+this._sh/2],bl:[i[0]-this._sw/2,i[1]+this._sh/2]}},a.prototype.pointToDate=function(r){var t=Math.floor((r[0]-this._rect.x)/this._sw)+1,i=Math.floor((r[1]-this._rect.y)/this._sh)+1,s=this._rangeInfo.range;return this._orient==="vertical"?this._getDateByWeeksAndDay(i,t-1,s):this._getDateByWeeksAndDay(t,i-1,s)},a.prototype.convertToPixel=function(r,t,i){var s=i1(t);return s===this?s.dataToPoint(i):null},a.prototype.convertFromPixel=function(r,t,i){var s=i1(t);return s===this?s.pointToData(i):null},a.prototype.containPoint=function(r){return console.warn("Not implemented."),!1},a.prototype._initRangeOption=function(){var r=this._model.get("range"),t;if(y.isArray(r)&&r.length===1&&(r=r[0]),y.isArray(r))t=r;else{var i=r.toString();if(/^\d{4}$/.test(i)&&(t=[i+"-01-01",i+"-12-31"]),/^\d{4}[\/|-]\d{1,2}$/.test(i)){var s=this.getDateInfo(i),l=s.date;l.setMonth(l.getMonth()+1);var f=this.getNextNDay(l,-1);t=[s.formatedDate,f.formatedDate]}/^\d{4}[\/|-]\d{1,2}[\/|-]\d{1,2}$/.test(i)&&(t=[i,i])}if(!t)return r;var h=this._getRangeInfo(t);return h.start.time>h.end.time&&t.reverse(),t},a.prototype._getRangeInfo=function(r){var t=[this.getDateInfo(r[0]),this.getDateInfo(r[1])],i;t[0].time>t[1].time&&(i=!0,t.reverse());var s=Math.floor(t[1].time/fy)-Math.floor(t[0].time/fy)+1,l=new Date(t[0].time),f=l.getDate(),h=t[1].date.getDate();l.setDate(f+s-1);var d=l.getDate();if(d!==h)for(var p=l.getTime()-t[1].time>0?1:-1;(d=l.getDate())!==h&&(l.getTime()-t[1].time)*p>0;)s-=p,l.setDate(d-p);var m=Math.floor((s+t[0].day+6)/7),b=i?-m+1:m-1;return i&&t.reverse(),{range:[t[0].formatedDate,t[1].formatedDate],start:t[0],end:t[1],allDay:s,weeks:m,nthWeek:b,fweek:t[0].day,lweek:t[1].day}},a.prototype._getDateByWeeksAndDay=function(r,t,i){var s=this._getRangeInfo(i);if(r>s.weeks||r===0&&t<s.fweek||r===s.weeks&&t>s.lweek)return null;var l=(r-1)*7-s.fweek+t,f=new Date(s.start.time);return f.setDate(+s.start.d+l),this.getDateInfo(f)},a.create=function(r,t){var i=[];return r.eachComponent("calendar",function(s){var l=new a(s,r,t);i.push(l),s.coordinateSystem=l}),r.eachSeries(function(s){s.get("coordinateSystem")==="calendar"&&(s.coordinateSystem=i[s.get("calendarIndex")||0])}),i},a.dimensions=["time","value"],a}();function i1(a){var r=a.calendarModel,t=a.seriesModel,i=r?r.coordinateSystem:t?t.coordinateSystem:null;return i}var W_=H_;function Y_(a){a.registerComponentModel(z_),a.registerComponentView(U_),a.registerCoordinateSystem("calendar",W_)}var bD={x:1,y:1,scaleX:1,scaleY:1,originX:1,originY:1,rotation:1},af=sr.o(),a1={path:null,compoundPath:null,group:pr.a,image:it.a,text:en.a},X_=function(a){var r=a.graphic;y.isArray(r)?!r[0]||!r[0].elements?a.graphic=[{elements:r}]:a.graphic=[a.graphic[0]]:r&&!r.elements&&(a.graphic=[{elements:[r]}])},Z_=function(a){Object(de.b)(r,a);function r(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=r.type,t.preventAutoZ=!0,t}return r.prototype.mergeOption=function(t,i){var s=this.option.elements;this.option.elements=null,a.prototype.mergeOption.call(this,t,i),this.option.elements=s},r.prototype.optionUpdated=function(t,i){var s=this.option,l=(i?s:t).elements,f=s.elements=i?[]:s.elements,h=[];this._flatten(l,h,null);var d=sr.q(f,h,"normalMerge"),p=this._elOptionsToUpdate=[];y.each(d,function(b,A){var E=b.newOption;!E||(p.push(E),Q_(b,E),J_(f,A,E),$_(f[A],E))},this);for(var m=f.length-1;m>=0;m--)f[m]==null?f.splice(m,1):delete f[m].$action},r.prototype._flatten=function(t,i,s){y.each(t,function(l){if(!!l){s&&(l.parentOption=s),i.push(l);var f=l.children;l.type==="group"&&f&&this._flatten(f,i,l),delete l.children}},this)},r.prototype.useElOptionsToUpdate=function(){var t=this._elOptionsToUpdate;return this._elOptionsToUpdate=null,t},r.type="graphic",r.defaultOption={elements:[]},r}(An.a),K_=function(a){Object(de.b)(r,a);function r(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=r.type,t}return r.prototype.init=function(){this._elMap=y.createHashMap()},r.prototype.render=function(t,i,s){t!==this._lastGraphicModel&&this._clear(),this._lastGraphicModel=t,this._updateElements(t),this._relocate(t,s)},r.prototype._updateElements=function(t){var i=t.useElOptionsToUpdate();if(!!i){var s=this._elMap,l=this.group;y.each(i,function(f){var h=sr.e(f.id,null),d=h!=null?s.get(h):null,p=sr.e(f.parentId,null),m=p!=null?s.get(p):l,b=f.type,A=f.style;b==="text"&&A&&f.hv&&f.hv[1]&&(A.textVerticalAlign=A.textBaseline=A.verticalAlign=A.align=null);var E=f.textContent,P=f.textConfig;if(A&&o0(A,b,!!P,!!E)){var j=s0(A,b,!0);!P&&j.textConfig&&(P=f.textConfig=j.textConfig),!E&&j.textContent&&(E=j.textContent)}var J=k_(f),dt=f.$action||"merge";dt==="merge"?d?d.attr(J):o1(h,m,J,s):dt==="replace"?(Ed(d,s),o1(h,m,J,s)):dt==="remove"&&Ed(d,s);var St=s.get(h);if(St&&E)if(dt==="merge"){var Ot=St.getTextContent();Ot?Ot.attr(E):St.setTextContent(new en.a(E))}else dt==="replace"&&St.setTextContent(new en.a(E));if(St){var wt=af(St);wt.__ecGraphicWidthOption=f.width,wt.__ecGraphicHeightOption=f.height,q_(St,t,f),Ze.setTooltipConfig({el:St,componentModel:t,itemName:St.name,itemTooltipOption:f.tooltip})}})}},r.prototype._relocate=function(t,i){for(var s=t.option.elements,l=this.group,f=this._elMap,h=i.getWidth(),d=i.getHeight(),p=0;p<s.length;p++){var m=s[p],b=sr.e(m.id,null),A=b!=null?f.get(b):null;if(!(!A||!A.isGroup)){var E=A.parent,P=E===l,j=af(A),J=af(E);j.__ecGraphicWidth=Object(Ne.o)(j.__ecGraphicWidthOption,P?h:J.__ecGraphicWidth)||0,j.__ecGraphicHeight=Object(Ne.o)(j.__ecGraphicHeightOption,P?d:J.__ecGraphicHeight)||0}}for(var p=s.length-1;p>=0;p--){var m=s[p],b=sr.e(m.id,null),A=b!=null?f.get(b):null;if(!!A){var E=A.parent,J=af(E),dt=E===l?{width:h,height:d}:{width:J.__ecGraphicWidth,height:J.__ecGraphicHeight};Tr.i(A,m,dt,null,{hv:m.hv,boundingMode:m.bounding})}}},r.prototype._clear=function(){var t=this._elMap;t.each(function(i){Ed(i,t)}),this._elMap=y.createHashMap()},r.prototype.dispose=function(){this._clear()},r.type="graphic",r}(Vn.a);function o1(a,r,t,i){var s=t.type,l=y.hasOwn(a1,s)?a1[s]:Ze.getShapeClass(s),f=new l(t);r.add(f),i.set(a,f),af(f).__ecGraphicId=a}function Ed(a,r){var t=a&&a.parent;t&&(a.type==="group"&&a.traverse(function(i){Ed(i,r)}),r.removeKey(af(a).__ecGraphicId),t.remove(a))}function k_(a){return a=y.extend({},a),y.each(["id","parentId","$action","hv","bounding","textContent"].concat(Tr.a),function(r){delete a[r]}),a}function s1(a,r){var t;return y.each(r,function(i){a[i]!=null&&a[i]!=="auto"&&(t=!0)}),t}function Q_(a,r){var t=a.existing;if(r.id=a.keyInfo.id,!r.type&&t&&(r.type=t.type),r.parentId==null){var i=r.parentOption;i?r.parentId=i.id:t&&(r.parentId=t.parentId)}r.parentOption=null}function J_(a,r,t){var i=y.extend({},t),s=a[r],l=t.$action||"merge";if(l==="merge")if(s){if(!1)var f;y.merge(s,i,!0),Tr.h(s,i,{ignoreSize:!0}),Tr.c(t,s)}else a[r]=i;else l==="replace"?a[r]=i:l==="remove"&&s&&(a[r]=null)}function $_(a,r){if(!!a&&(a.hv=r.hv=[s1(r,["left","right"]),s1(r,["top","bottom"])],a.type==="group")){var t=a,i=r;t.width==null&&(t.width=i.width=0),t.height==null&&(t.height=i.height=0)}}function q_(a,r,t){var i=Object(Ur.a)(a).eventData;!a.silent&&!a.ignore&&!i&&(i=Object(Ur.a)(a).eventData={componentType:"graphic",componentIndex:r.componentIndex,name:a.name}),i&&(i.info=t.info)}function tT(a){a.registerComponentModel(Z_),a.registerComponentView(K_),a.registerPreprocessor(X_)}var l1=["x","y","radius","angle","single"],eT=["cartesian2d","polar","singleAxis"];function rT(a){var r=a.get("coordinateSystem");return Object(y.indexOf)(eT,r)>=0}function Qs(a){return a+"Axis"}function SD(a){return a+"AxisIndex"}function _D(a){return a+"AxisId"}function nT(a,r){var t=Object(y.createHashMap)(),i=[],s=Object(y.createHashMap)();a.eachComponent({mainType:"dataZoom",query:r},function(m){s.get(m.uid)||h(m)});var l;do l=!1,a.eachComponent("dataZoom",f);while(l);function f(m){!s.get(m.uid)&&d(m)&&(h(m),l=!0)}function h(m){s.set(m.uid,!0),i.push(m),p(m)}function d(m){var b=!1;return m.eachTargetAxis(function(A,E){var P=t.get(A);P&&P[E]&&(b=!0)}),b}function p(m){m.eachTargetAxis(function(b,A){(t.get(b)||t.set(b,[]))[A]=!0})}return i}function u1(a){var r=a.ecModel,t={infoList:[],infoMap:Object(y.createHashMap)()};return a.eachTargetAxis(function(i,s){var l=r.getComponent(Qs(i),s);if(!!l){var f=l.getCoordSysModel();if(!!f){var h=f.uid,d=t.infoMap.get(h);d||(d={model:f,axisModels:[]},t.infoList.push(d),t.infoMap.set(h,d)),d.axisModels.push(l)}}}),t}var cy=function(){function a(){this.indexList=[],this.indexMap=[]}return a.prototype.add=function(r){this.indexMap[r]||(this.indexList.push(r),this.indexMap[r]=!0)},a}(),iT=function(a){Object(de.b)(r,a);function r(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=r.type,t._autoThrottle=!0,t._noTarget=!0,t._rangePropMode=["percent","percent"],t}return r.prototype.init=function(t,i,s){var l=f1(t);this.settledOption=l,this.mergeDefaultAndTheme(t,s),this._doInit(l)},r.prototype.mergeOption=function(t){var i=f1(t);Object(y.merge)(this.option,t,!0),Object(y.merge)(this.settledOption,i,!0),this._doInit(i)},r.prototype._doInit=function(t){var i=this.option;this._setDefaultThrottle(t),this._updateRangeUse(t);var s=this.settledOption;Object(y.each)([["start","startValue"],["end","endValue"]],function(l,f){this._rangePropMode[f]==="value"&&(i[l[0]]=s[l[0]]=null)},this),this._resetTarget()},r.prototype._resetTarget=function(){var t=this.get("orient",!0),i=this._targetAxisInfoMap=Object(y.createHashMap)(),s=this._fillSpecifiedTargetAxis(i);s?this._orient=t||this._makeAutoOrientByTargetAxis():(this._orient=t||"horizontal",this._fillAutoTargetAxisByOrient(i,this._orient)),this._noTarget=!0,i.each(function(l){l.indexList.length&&(this._noTarget=!1)},this)},r.prototype._fillSpecifiedTargetAxis=function(t){var i=!1;return Object(y.each)(l1,function(s){var l=this.getReferringComponents(Qs(s),sr.a);if(!!l.specified){i=!0;var f=new cy;Object(y.each)(l.models,function(h){f.add(h.componentIndex)}),t.set(s,f)}},this),i},r.prototype._fillAutoTargetAxisByOrient=function(t,i){var s=this.ecModel,l=!0;if(l){var f=i==="vertical"?"y":"x",h=s.findComponents({mainType:f+"Axis"});d(h,f)}if(l){var h=s.findComponents({mainType:"singleAxis",filter:function(m){return m.get("orient",!0)===i}});d(h,"single")}function d(p,m){var b=p[0];if(!!b){var A=new cy;if(A.add(b.componentIndex),t.set(m,A),l=!1,m==="x"||m==="y"){var E=b.getReferringComponents("grid",sr.b).models[0];E&&Object(y.each)(p,function(P){b.componentIndex!==P.componentIndex&&E===P.getReferringComponents("grid",sr.b).models[0]&&A.add(P.componentIndex)})}}}l&&Object(y.each)(l1,function(p){if(!!l){var m=s.findComponents({mainType:Qs(p),filter:function(A){return A.get("type",!0)==="category"}});if(m[0]){var b=new cy;b.add(m[0].componentIndex),t.set(p,b),l=!1}}},this)},r.prototype._makeAutoOrientByTargetAxis=function(){var t;return this.eachTargetAxis(function(i){!t&&(t=i)},this),t==="y"?"vertical":"horizontal"},r.prototype._setDefaultThrottle=function(t){if(t.hasOwnProperty("throttle")&&(this._autoThrottle=!1),this._autoThrottle){var i=this.ecModel.option;this.option.throttle=i.animation&&i.animationDurationUpdate>0?100:20}},r.prototype._updateRangeUse=function(t){var i=this._rangePropMode,s=this.get("rangeMode");Object(y.each)([["start","startValue"],["end","endValue"]],function(l,f){var h=t[l[0]]!=null,d=t[l[1]]!=null;h&&!d?i[f]="percent":!h&&d?i[f]="value":s?i[f]=s[f]:h&&(i[f]="percent")})},r.prototype.noTarget=function(){return this._noTarget},r.prototype.getFirstTargetAxisModel=function(){var t;return this.eachTargetAxis(function(i,s){t==null&&(t=this.ecModel.getComponent(Qs(i),s))},this),t},r.prototype.eachTargetAxis=function(t,i){this._targetAxisInfoMap.each(function(s,l){Object(y.each)(s.indexList,function(f){t.call(i,l,f)})})},r.prototype.getAxisProxy=function(t,i){var s=this.getAxisModel(t,i);if(s)return s.__dzAxisProxy},r.prototype.getAxisModel=function(t,i){var s=this._targetAxisInfoMap.get(t);if(s&&s.indexMap[i])return this.ecModel.getComponent(Qs(t),i)},r.prototype.setRawRange=function(t){var i=this.option,s=this.settledOption;Object(y.each)([["start","startValue"],["end","endValue"]],function(l){(t[l[0]]!=null||t[l[1]]!=null)&&(i[l[0]]=s[l[0]]=t[l[0]],i[l[1]]=s[l[1]]=t[l[1]])},this),this._updateRangeUse(t)},r.prototype.setCalculatedRange=function(t){var i=this.option;Object(y.each)(["start","startValue","end","endValue"],function(s){i[s]=t[s]})},r.prototype.getPercentRange=function(){var t=this.findRepresentativeAxisProxy();if(t)return t.getDataPercentWindow()},r.prototype.getValueRange=function(t,i){if(t==null&&i==null){var s=this.findRepresentativeAxisProxy();if(s)return s.getDataValueWindow()}else return this.getAxisProxy(t,i).getDataValueWindow()},r.prototype.findRepresentativeAxisProxy=function(t){if(t)return t.__dzAxisProxy;for(var i,s=this._targetAxisInfoMap.keys(),l=0;l<s.length;l++)for(var f=s[l],h=this._targetAxisInfoMap.get(f),d=0;d<h.indexList.length;d++){var p=this.getAxisProxy(f,h.indexList[d]);if(p.hostedBy(this))return p;i||(i=p)}return i},r.prototype.getRangePropMode=function(){return this._rangePropMode.slice()},r.prototype.getOrient=function(){return this._orient},r.type="dataZoom",r.dependencies=["xAxis","yAxis","radiusAxis","angleAxis","singleAxis","series","toolbox"],r.defaultOption={zlevel:0,z:4,filterMode:"filter",start:0,end:100},r}(An.a);function f1(a){var r={};return Object(y.each)(["start","end","startValue","endValue","throttle"],function(t){a.hasOwnProperty(t)&&(r[t]=a[t])}),r}var Gc=iT,aT=function(a){Object(de.b)(r,a);function r(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=r.type,t}return r.type="dataZoom.select",r}(Gc),oT=aT,sT=function(a){Object(de.b)(r,a);function r(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=r.type,t}return r.prototype.render=function(t,i,s,l){this.dataZoomModel=t,this.ecModel=i,this.api=s},r.type="dataZoom",r}(Vn.a),hy=sT,lT=function(a){Object(de.b)(r,a);function r(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=r.type,t}return r.type="dataZoom.select",r}(hy),uT=lT,of=y.each,c1=Ne.b,fT=function(){function a(r,t,i,s){this._dimName=r,this._axisIndex=t,this.ecModel=s,this._dataZoomModel=i}return a.prototype.hostedBy=function(r){return this._dataZoomModel===r},a.prototype.getDataValueWindow=function(){return this._valueWindow.slice()},a.prototype.getDataPercentWindow=function(){return this._percentWindow.slice()},a.prototype.getTargetSeriesModels=function(){var r=[];return this.ecModel.eachSeries(function(t){if(rT(t)){var i=Qs(this._dimName),s=t.getReferringComponents(i,sr.b).models[0];s&&this._axisIndex===s.componentIndex&&r.push(t)}},this),r},a.prototype.getAxisModel=function(){return this.ecModel.getComponent(this._dimName+"Axis",this._axisIndex)},a.prototype.getMinMaxSpan=function(){return y.clone(this._minMaxSpan)},a.prototype.calculateDataWindow=function(r){var t=this._dataExtent,i=this.getAxisModel(),s=i.axis.scale,l=this._dataZoomModel.getRangePropMode(),f=[0,100],h=[],d=[],p;of(["start","end"],function(A,E){var P=r[A],j=r[A+"Value"];l[E]==="percent"?(P==null&&(P=f[E]),j=s.parse(Ne.k(P,f,t))):(p=!0,j=j==null?t[E]:s.parse(j),P=Ne.k(j,t,f)),d[E]=j,h[E]=P}),c1(d),c1(h);var m=this._minMaxSpan;p?b(d,h,t,f,!1):b(h,d,f,t,!0);function b(A,E,P,j,J){var dt=J?"Span":"ValueSpan";Ya(0,A,P,"all",m["min"+dt],m["max"+dt]);for(var St=0;St<2;St++)E[St]=Ne.k(A[St],P,j,!0),J&&(E[St]=s.parse(E[St]))}return{valueWindow:d,percentWindow:h}},a.prototype.reset=function(r){if(r===this._dataZoomModel){var t=this.getTargetSeriesModels();this._dataExtent=cT(this,this._dimName,t),this._updateMinMaxSpan();var i=this.calculateDataWindow(r.settledOption);this._valueWindow=i.valueWindow,this._percentWindow=i.percentWindow,this._setAxisModel()}},a.prototype.filterData=function(r,t){if(r!==this._dataZoomModel)return;var i=this._dimName,s=this.getTargetSeriesModels(),l=r.get("filterMode"),f=this._valueWindow;if(l==="none")return;of(s,function(d){var p=d.getData(),m=p.mapDimensionsAll(i);!m.length||(l==="weakFilter"?p.filterSelf(function(b){for(var A,E,P,j=0;j<m.length;j++){var J=p.get(m[j],b),dt=!isNaN(J),St=J<f[0],Ot=J>f[1];if(dt&&!St&&!Ot)return!0;dt&&(P=!0),St&&(A=!0),Ot&&(E=!0)}return P&&A&&E}):of(m,function(b){if(l==="empty")d.setData(p=p.map(b,function(E){return h(E)?E:NaN}));else{var A={};A[b]=f,p.selectRange(A)}}),of(m,function(b){p.setApproximateExtent(f,b)}))});function h(d){return d>=f[0]&&d<=f[1]}},a.prototype._updateMinMaxSpan=function(){var r=this._minMaxSpan={},t=this._dataZoomModel,i=this._dataExtent;of(["min","max"],function(s){var l=t.get(s+"Span"),f=t.get(s+"ValueSpan");f!=null&&(f=this.getAxisModel().axis.scale.parse(f)),f!=null?l=Ne.k(i[0]+f,i,[0,100],!0):l!=null&&(f=Ne.k(l,[0,100],i,!0)-i[0]),r[s+"Span"]=l,r[s+"ValueSpan"]=f},this)},a.prototype._setAxisModel=function(){var r=this.getAxisModel(),t=this._percentWindow,i=this._valueWindow;if(!!t){var s=Ne.e(i,[0,500]);s=Math.min(s,20);var l=r.axis.scale.rawExtentInfo;t[0]!==0&&l.setDeterminedMinMax("min",+i[0].toFixed(s)),t[1]!==100&&l.setDeterminedMinMax("max",+i[1].toFixed(s)),l.freeze()}},a}();function cT(a,r,t){var i=[Infinity,-Infinity];of(t,function(f){Object(Bn.k)(i,f.getData(),r)});var s=a.getAxisModel(),l=Object(Ef.a)(s.axis.scale,s,i).calculate();return[l.min,l.max]}var hT=fT,vT={getTargetSeries:function(a){function r(s){a.eachComponent("dataZoom",function(l){l.eachTargetAxis(function(f,h){var d=a.getComponent(Qs(f),h);s(f,h,d,l)})})}r(function(s,l,f,h){f.__dzAxisProxy=null});var t=[];r(function(s,l,f,h){f.__dzAxisProxy||(f.__dzAxisProxy=new hT(s,l,h,a),t.push(f.__dzAxisProxy))});var i=Object(y.createHashMap)();return Object(y.each)(t,function(s){Object(y.each)(s.getTargetSeriesModels(),function(l){i.set(l.uid,l)})}),i},overallReset:function(a,r){a.eachComponent("dataZoom",function(t){t.eachTargetAxis(function(i,s){t.getAxisProxy(i,s).reset(t)}),t.eachTargetAxis(function(i,s){t.getAxisProxy(i,s).filterData(t,r)})}),a.eachComponent("dataZoom",function(t){var i=t.findRepresentativeAxisProxy();if(i){var s=i.getDataPercentWindow(),l=i.getDataValueWindow();t.setCalculatedRange({start:s[0],end:s[1],startValue:l[0],endValue:l[1]})}})}},dT=vT;function pT(a){a.registerAction("dataZoom",function(r,t){var i=nT(t,r);Object(y.each)(i,function(s){s.setRawRange({start:r.start,end:r.end,startValue:r.startValue,endValue:r.endValue})})})}var h1=!1;function vy(a){h1||(h1=!0,a.registerProcessor(a.PRIORITY.PROCESSOR.FILTER,dT),pT(a),a.registerSubTypeDefaulter("dataZoom",function(){return"slider"}))}function gT(a){a.registerComponentModel(oT),a.registerComponentView(uT),vy(a)}var _a=function(){function a(){}return a}(),v1={};function sf(a,r){v1[a]=r}function d1(a){return v1[a]}var mT=function(a){Object(de.b)(r,a);function r(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=r.type,t}return r.prototype.optionUpdated=function(){a.prototype.optionUpdated.apply(this,arguments);var t=this.ecModel;y.each(this.option.feature,function(i,s){var l=d1(s);l&&(l.getDefaultOption&&(l.defaultOption=l.getDefaultOption(t)),y.merge(i,l.defaultOption))})},r.type="toolbox",r.layoutMode={type:"box",ignoreSize:!0},r.defaultOption={show:!0,z:6,zlevel:0,orient:"horizontal",left:"right",top:"top",backgroundColor:"transparent",borderColor:"#ccc",borderRadius:0,borderWidth:0,padding:5,itemSize:15,itemGap:8,showTitle:!0,iconStyle:{borderColor:"#666",color:"none"},emphasis:{iconStyle:{borderColor:"#3E98C5"}},tooltip:{show:!1,position:"bottom"}},r}(An.a),yT=mT;function xT(a,r,t){var i=r.getBoxLayoutParams(),s=r.get("padding"),l={width:t.getWidth(),height:t.getHeight()},f=Object(Tr.g)(i,l,s);Object(Tr.b)(r.get("orient"),a,r.get("itemGap"),f.width,f.height),Object(Tr.i)(a,i,l,s)}function p1(a,r){var t=Pr.j(r.get("padding")),i=r.getItemStyle(["color","opacity"]);return i.fill=r.get("backgroundColor"),a=new nn.a({shape:{x:a.x-t[3],y:a.y-t[0],width:a.width+t[1]+t[3],height:a.height+t[0]+t[2],r:r.get("borderRadius")},style:i,silent:!0,z2:-1}),a}var bT=function(a){Object(de.b)(r,a);function r(){return a!==null&&a.apply(this,arguments)||this}return r.prototype.render=function(t,i,s,l){var f=this.group;if(f.removeAll(),!t.get("show"))return;var h=+t.get("itemSize"),d=t.get("feature")||{},p=this._features||(this._features={}),m=[];y.each(d,function(E,P){m.push(P)}),new Ai.a(this._featureNames||[],m).add(b).update(b).remove(y.curry(b,null)).execute(),this._featureNames=m;function b(E,P){var j=m[E],J=m[P],dt=d[j],St=new Ye.a(dt,t,t.ecModel),Ot;if(l&&l.newTitle!=null&&l.featureName===j&&(dt.title=l.newTitle),j&&!J){if(ST(j))Ot={onclick:St.option.onclick,featureName:j};else{var wt=d1(j);if(!wt)return;Ot=new wt}p[j]=Ot}else if(Ot=p[J],!Ot)return;if(Ot.uid=Object(ni.c)("toolbox-feature"),Ot.model=St,Ot.ecModel=i,Ot.api=s,Ot instanceof _a){if(!j&&J){Ot.dispose&&Ot.dispose(i,s);return}if(!St.get("show")||Ot.unusable){Ot.remove&&Ot.remove(i,s);return}}A(St,Ot,j),St.setIconStatus=function(zt,jt){var kt=this.option,te=this.iconPaths;kt.iconStatus=kt.iconStatus||{},kt.iconStatus[zt]=jt,te[zt]&&(jt==="emphasis"?qe.r:qe.C)(te[zt])},Ot instanceof _a&&Ot.render&&Ot.render(St,i,s,l)}function A(E,P,j){var J=E.getModel("iconStyle"),dt=E.getModel(["emphasis","iconStyle"]),St=P instanceof _a&&P.getIcons?P.getIcons():E.get("icon"),Ot=E.get("title")||{},wt,zt;typeof St=="string"?(wt={},wt[j]=St):wt=St,typeof Ot=="string"?(zt={},zt[j]=Ot):zt=Ot;var jt=E.iconPaths={};y.each(wt,function(kt,te){var ue=Ze.createIcon(kt,{},{x:-h/2,y:-h/2,width:h,height:h});ue.setStyle(J.getItemStyle());var me=ue.ensureState("emphasis");me.style=dt.getItemStyle();var ve=new en.a({style:{text:zt[te],align:dt.get("textAlign"),borderRadius:dt.get("textBorderRadius"),padding:dt.get("textPadding"),fill:null},ignore:!0});ue.setTextContent(ve),Ze.setTooltipConfig({el:ue,componentModel:t,itemName:te,formatterParamsExtra:{title:zt[te]}}),ue.__title=zt[te],ue.on("mouseover",function(){var Me=dt.getItemStyle(),Ee=t.get("orient")==="vertical"?t.get("right")==null?"right":"left":t.get("bottom")==null?"bottom":"top";ve.setStyle({fill:dt.get("textFill")||Me.fill||Me.stroke||"#000",backgroundColor:dt.get("textBackgroundColor")}),ue.setTextConfig({position:dt.get("textPosition")||Ee}),ve.ignore=!t.get("showTitle"),Object(qe.r)(this)}).on("mouseout",function(){E.get(["iconStatus",te])!=="emphasis"&&Object(qe.C)(this),ve.hide()}),(E.get(["iconStatus",te])==="emphasis"?qe.r:qe.C)(ue),f.add(ue),ue.on("click",y.bind(P.onclick,P,i,s,te)),jt[te]=ue})}xT(f,t,s),f.add(p1(f.getBoundingRect(),t)),f.eachChild(function(E){var P=E.__title,j=E.ensureState("emphasis"),J=j.textConfig||(j.textConfig={}),dt=E.getTextContent(),St=dt&&dt.states.emphasis;if(St&&!y.isFunction(St)&&P){var Ot=St.style||(St.style={}),wt=gt.e(P,en.a.makeFont(Ot)),zt=E.x+f.x,jt=E.y+f.y+h,kt=!1;jt+wt.height>s.getHeight()&&(J.position="top",kt=!0);var te=kt?-5-wt.height:h+8;zt+wt.width/2>s.getWidth()?(J.position=["100%",te],Ot.align="right"):zt-wt.width/2<0&&(J.position=[0,te],Ot.align="left")}})},r.prototype.updateView=function(t,i,s,l){y.each(this._features,function(f){f instanceof _a&&f.updateView&&f.updateView(f.model,i,s,l)})},r.prototype.remove=function(t,i){y.each(this._features,function(s){s instanceof _a&&s.remove&&s.remove(t,i)}),this.group.removeAll()},r.prototype.dispose=function(t,i){y.each(this._features,function(s){s instanceof _a&&s.dispose&&s.dispose(t,i)})},r.type="toolbox",r}(Vn.a);function ST(a){return a.indexOf("my")===0}var _T=bT,g1=function(a){Object(de.b)(r,a);function r(){return a!==null&&a.apply(this,arguments)||this}return r.prototype.onclick=function(t,i){var s=this.model,l=s.get("name")||t.get("title.0.text")||"echarts",f=i.getZr().painter.getType()==="svg",h=f?"svg":s.get("type",!0)||"png",d=i.getConnectedDataURL({type:h,backgroundColor:s.get("backgroundColor",!0)||t.get("backgroundColor")||"#fff",connectedBackgroundColor:s.get("connectedBackgroundColor"),excludeComponents:s.get("excludeComponents"),pixelRatio:s.get("pixelRatio")});if(typeof MouseEvent=="function"&&(fi.a.browser.newEdge||!fi.a.browser.ie&&!fi.a.browser.edge)){var p=document.createElement("a");p.download=l+"."+h,p.target="_blank",p.href=d;var m=new MouseEvent("click",{view:document.defaultView,bubbles:!0,cancelable:!1});p.dispatchEvent(m)}else if(window.navigator.msSaveOrOpenBlob||f){var b=d.split(","),A=b[0].indexOf("base64")>-1,E=f?decodeURIComponent(b[1]):b[1];A&&(E=atob(E));var P=l+"."+h;if(window.navigator.msSaveOrOpenBlob){for(var j=E.length,J=new Uint8Array(j);j--;)J[j]=E.charCodeAt(j);var dt=new Blob([J]);window.navigator.msSaveOrOpenBlob(dt,P)}else{var St=document.createElement("iframe");document.body.appendChild(St);var Ot=St.contentWindow,wt=Ot.document;wt.open("image/svg+xml","replace"),wt.write(E),wt.close(),Ot.focus(),wt.execCommand("SaveAs",!0,P),document.body.removeChild(St)}}else{var zt=s.get("lang"),jt='<body style="margin:0;"><img src="'+d+'" style="max-width:100%;" title="'+(zt&&zt[0]||"")+'" /></body>',kt=window.open();kt.document.write(jt),kt.document.title=l}},r.getDefaultOption=function(t){var i={show:!0,icon:"M4.7,22.9L29.3,45.5L54.7,23.4M4.6,43.6L4.6,58L53.8,58L53.8,43.6M29.2,45.1L29.2,0",title:t.getLocale(["toolbox","saveAsImage","title"]),type:"png",connectedBackgroundColor:"#fff",name:"",excludeComponents:["toolbox"],lang:t.getLocale(["toolbox","saveAsImage","lang"])};return i},r}(_a);g1.prototype.unusable=!fi.a.canvasSupported;var TT=g1,m1="__ec_magicType_stack__",TD=["line","bar","stack"],OD=["line","bar","stack","tiled"],OT=[["line","bar"],["stack"]],AT=function(a){Object(de.b)(r,a);function r(){return a!==null&&a.apply(this,arguments)||this}return r.prototype.getIcons=function(){var t=this.model,i=t.get("icon"),s={};return y.each(t.get("type"),function(l){i[l]&&(s[l]=i[l])}),s},r.getDefaultOption=function(t){var i={show:!0,type:[],icon:{line:"M4.1,28.9h7.1l9.3-22l7.4,38l9.7-19.7l3,12.8h14.9M4.1,58h51.4",bar:"M6.7,22.9h10V48h-10V22.9zM24.9,13h10v35h-10V13zM43.2,2h10v46h-10V2zM3.1,58h53.7",stack:"M8.2,38.4l-8.4,4.1l30.6,15.3L60,42.5l-8.1-4.1l-21.5,11L8.2,38.4z M51.9,30l-8.1,4.2l-13.4,6.9l-13.9-6.9L8.2,30l-8.4,4.2l8.4,4.2l22.2,11l21.5-11l8.1-4.2L51.9,30z M51.9,21.7l-8.1,4.2L35.7,30l-5.3,2.8L24.9,30l-8.4-4.1l-8.3-4.2l-8.4,4.2L8.2,30l8.3,4.2l13.9,6.9l13.4-6.9l8.1-4.2l8.1-4.1L51.9,21.7zM30.4,2.2L-0.2,17.5l8.4,4.1l8.3,4.2l8.4,4.2l5.5,2.7l5.3-2.7l8.1-4.2l8.1-4.2l8.1-4.1L30.4,2.2z"},title:t.getLocale(["toolbox","magicType","title"]),option:{},seriesIndex:{}};return i},r.prototype.onclick=function(t,i,s){var l=this.model,f=l.get(["seriesIndex",s]);if(!!y1[s]){var h={series:[]},d=function(m){var b=m.subType,A=m.id,E=y1[s](b,A,m,l);E&&(y.defaults(E,m.option),h.series.push(E));var P=m.coordinateSystem;if(P&&P.type==="cartesian2d"&&(s==="line"||s==="bar")){var j=P.getAxesByScale("ordinal")[0];if(j){var J=j.dim,dt=J+"Axis",St=m.getReferringComponents(dt,sr.b).models[0],Ot=St.componentIndex;h[dt]=h[dt]||[];for(var wt=0;wt<=Ot;wt++)h[dt][Ot]=h[dt][Ot]||{};h[dt][Ot].boundaryGap=s==="bar"}}};y.each(OT,function(m){y.indexOf(m,s)>=0&&y.each(m,function(b){l.setIconStatus(b,"normal")})}),l.setIconStatus(s,"emphasis"),t.eachComponent({mainType:"series",query:f==null?null:{seriesIndex:f}},d);var p;s==="stack"&&(p=y.merge({stack:l.option.title.tiled,tiled:l.option.title.stack},l.option.title)),i.dispatchAction({type:"changeMagicType",currentType:s,newOption:h,newTitle:p,featureName:"magicType"})}},r}(_a),y1={line:function(a,r,t,i){if(a==="bar")return y.merge({id:r,type:"line",data:t.get("data"),stack:t.get("stack"),markPoint:t.get("markPoint"),markLine:t.get("markLine")},i.get(["option","line"])||{},!0)},bar:function(a,r,t,i){if(a==="line")return y.merge({id:r,type:"bar",data:t.get("data"),stack:t.get("stack"),markPoint:t.get("markPoint"),markLine:t.get("markLine")},i.get(["option","bar"])||{},!0)},stack:function(a,r,t,i){var s=t.get("stack")===m1;if(a==="line"||a==="bar")return i.setIconStatus("stack",s?"normal":"emphasis"),y.merge({id:r,stack:s?"":m1},i.get(["option","stack"])||{},!0)}};Jr.m({type:"changeMagicType",event:"magicTypeChanged",update:"prepareAndUpdate"},function(a,r){r.mergeOption(a.newOption)});var MT=AT,Ld=new Array(60).join("-"),lf="	";function DT(a){var r={},t=[],i=[];return a.eachRawSeries(function(s){var l=s.coordinateSystem;if(l&&(l.type==="cartesian2d"||l.type==="polar")){var f=l.getBaseAxis();if(f.type==="category"){var h=f.dim+"_"+f.index;r[h]||(r[h]={categoryAxis:f,valueAxis:l.getOtherAxis(f),series:[]},i.push({axisDim:f.dim,axisIndex:f.index})),r[h].series.push(s)}else t.push(s)}else t.push(s)}),{seriesGroupByCategoryAxis:r,other:t,meta:i}}function CT(a){var r=[];return y.each(a,function(t,i){var s=t.categoryAxis,l=t.valueAxis,f=l.dim,h=[" "].concat(y.map(t.series,function(E){return E.name})),d=[s.model.getCategories()];y.each(t.series,function(E){var P=E.getRawData();d.push(E.getRawData().mapArray(P.mapDimension(f),function(j){return j}))});for(var p=[h.join(lf)],m=0;m<d[0].length;m++){for(var b=[],A=0;A<d.length;A++)b.push(d[A][m]);p.push(b.join(lf))}r.push(p.join(`
`))}),r.join(`

`+Ld+`

`)}function ET(a){return y.map(a,function(r){var t=r.getRawData(),i=[r.name],s=[];return t.each(t.dimensions,function(){for(var l=arguments.length,f=arguments[l-1],h=t.getName(f),d=0;d<l-1;d++)s[d]=arguments[d];i.push((h?h+lf:"")+s.join(lf))}),i.join(`
`)}).join(`

`+Ld+`

`)}function LT(a){var r=DT(a);return{value:y.filter([CT(r.seriesGroupByCategoryAxis),ET(r.other)],function(t){return!!t.replace(/[\n\t\s]/g,"")}).join(`

`+Ld+`

`),meta:r.meta}}function Pd(a){return a.replace(/^\s\s*/,"").replace(/\s\s*$/,"")}function PT(a){var r=a.slice(0,a.indexOf(`
`));if(r.indexOf(lf)>=0)return!0}var dy=new RegExp("["+lf+"]+","g");function wT(a){for(var r=a.split(/\n+/g),t=Pd(r.shift()).split(dy),i=[],s=y.map(t,function(d){return{name:d,data:[]}}),l=0;l<r.length;l++){var f=Pd(r[l]).split(dy);i.push(f.shift());for(var h=0;h<f.length;h++)s[h]&&(s[h].data[l]=f[h])}return{series:s,categories:i}}function IT(a){for(var r=a.split(/\n+/g),t=Pd(r.shift()),i=[],s=0;s<r.length;s++){var l=Pd(r[s]);if(!!l){var f=l.split(dy),h="",d=void 0,p=!1;isNaN(f[0])?(p=!0,h=f[0],f=f.slice(1),i[s]={name:h,value:[]},d=i[s].value):d=i[s]=[];for(var m=0;m<f.length;m++)d.push(+f[m]);d.length===1&&(p?i[s].value=d[0]:i[s]=d[0])}}return{name:t,data:i}}function RT(a,r){var t=a.split(new RegExp(`
*`+Ld+`
*`,"g")),i={series:[]};return y.each(t,function(s,l){if(PT(s)){var f=wT(s),h=r[l],d=h.axisDim+"Axis";h&&(i[d]=i[d]||[],i[d][h.axisIndex]={data:f.categories},i.series=i.series.concat(f.series))}else{var f=IT(s);i.series.push(f)}}),i}var NT=function(a){Object(de.b)(r,a);function r(){return a!==null&&a.apply(this,arguments)||this}return r.prototype.onclick=function(t,i){var s=i.getDom(),l=this.model;this._dom&&s.removeChild(this._dom);var f=document.createElement("div");f.style.cssText="position:absolute;left:5px;top:5px;bottom:5px;right:5px;",f.style.backgroundColor=l.get("backgroundColor")||"#fff";var h=document.createElement("h4"),d=l.get("lang")||[];h.innerHTML=d[0]||l.get("title"),h.style.cssText="margin: 10px 20px;",h.style.color=l.get("textColor");var p=document.createElement("div"),m=document.createElement("textarea");p.style.cssText="display:block;width:100%;overflow:auto;";var b=l.get("optionToContent"),A=l.get("contentToOption"),E=LT(t);if(typeof b=="function"){var P=b(i.getOption());typeof P=="string"?p.innerHTML=P:y.isDom(P)&&p.appendChild(P)}else p.appendChild(m),m.readOnly=l.get("readOnly"),m.style.cssText="width:100%;height:100%;font-family:monospace;font-size:14px;line-height:1.6rem;",m.style.color=l.get("textColor"),m.style.borderColor=l.get("textareaBorderColor"),m.style.backgroundColor=l.get("textareaColor"),m.value=E.value;var j=E.meta,J=document.createElement("div");J.style.cssText="position:absolute;bottom:0;left:0;right:0;";var dt="float:right;margin-right:20px;border:none;cursor:pointer;padding:2px 5px;font-size:12px;border-radius:3px",St=document.createElement("div"),Ot=document.createElement("div");dt+=";background-color:"+l.get("buttonColor"),dt+=";color:"+l.get("buttonTextColor");var wt=this;function zt(){s.removeChild(f),wt._dom=null}Object(Wi.a)(St,"click",zt),Object(Wi.a)(Ot,"click",function(){if(A==null&&b!=null||A!=null&&b==null){zt();return}var jt;try{typeof A=="function"?jt=A(p,i.getOption()):jt=RT(m.value,j)}catch(kt){throw zt(),new Error("Data view format error "+kt)}jt&&i.dispatchAction({type:"changeDataView",newOption:jt}),zt()}),St.innerHTML=d[1],Ot.innerHTML=d[2],Ot.style.cssText=dt,St.style.cssText=dt,!l.get("readOnly")&&J.appendChild(Ot),J.appendChild(St),f.appendChild(h),f.appendChild(p),f.appendChild(J),p.style.height=s.clientHeight-80+"px",s.appendChild(f),this._dom=f},r.prototype.remove=function(t,i){this._dom&&i.getDom().removeChild(this._dom)},r.prototype.dispose=function(t,i){this.remove(t,i)},r.getDefaultOption=function(t){var i={show:!0,readOnly:!1,optionToContent:null,contentToOption:null,icon:"M17.5,17.3H33 M17.5,17.3H33 M45.4,29.5h-28 M11.5,2v56H51V14.8L38.4,2H11.5z M38.4,2.2v12.7H51 M45.4,41.7h-28",title:t.getLocale(["toolbox","dataView","title"]),lang:t.getLocale(["toolbox","dataView","lang"]),backgroundColor:"#fff",textColor:"#000",textareaColor:"#fff",textareaBorderColor:"#333",buttonColor:"#c23531",buttonTextColor:"#fff"};return i},r}(_a);function BT(a,r){return y.map(a,function(t,i){var s=r&&r[i];if(y.isObject(s)&&!y.isArray(s)){var l=y.isObject(t)&&!y.isArray(t);l||(t={value:t});var f=s.name!=null&&t.name==null;return t=y.defaults(t,s),f&&delete t.name,t}else return t})}Jr.m({type:"changeDataView",event:"dataViewChanged",update:"prepareAndUpdate"},function(a,r){var t=[];y.each(a.newOption.series,function(i){var s=r.getSeriesByName(i.name)[0];if(!s)t.push(y.extend({type:"scatter"},i));else{var l=s.get("data");t.push({name:i.name,data:BT(i.data,l)})}}),r.mergeOption(y.defaults({series:t},a.newOption))});var jT=NT,x1=y.each,b1=Object(sr.o)();function zT(a,r){var t=py(a);x1(r,function(i,s){for(var l=t.length-1;l>=0;l--){var f=t[l];if(f[s])break}if(l<0){var h=a.queryComponents({mainType:"dataZoom",subType:"select",id:s})[0];if(h){var d=h.getPercentRange();t[0][s]={dataZoomId:s,start:d[0],end:d[1]}}}}),t.push(r)}function FT(a){var r=py(a),t=r[r.length-1];r.length>1&&r.pop();var i={};return x1(t,function(s,l){for(var f=r.length-1;f>=0;f--)if(s=r[f][l],s){i[l]=s;break}}),i}function VT(a){b1(a).snapshots=null}function GT(a){return py(a).length}function py(a){var r=b1(a);return r.snapshots||(r.snapshots=[{}]),r.snapshots}var UT=function(a){Object(de.b)(r,a);function r(){return a!==null&&a.apply(this,arguments)||this}return r.prototype.onclick=function(t,i){VT(t),i.dispatchAction({type:"restore",from:this.uid})},r.getDefaultOption=function(t){var i={show:!0,icon:"M3.8,33.4 M47,18.9h9.8V8.7 M56.3,20.1 C52.1,9,40.5,0.6,26.8,2.1C12.6,3.7,1.6,16.2,2.1,30.6 M13,41.1H3.1v10.2 M3.7,39.9c4.2,11.1,15.8,19.5,29.5,18 c14.2-1.6,25.2-14.1,24.7-28.5",title:t.getLocale(["toolbox","restore","title"])};return i},r}(_a);Jr.m({type:"restore",event:"restore",update:"prepareAndUpdate"},function(a,r){r.resetOption("recreate")});var HT=UT,gy=["dataToPoint","pointToData"],WT=["grid","xAxis","yAxis","geo","graph","polar","radiusAxis","angleAxis","bmap"],YT=function(){function a(r,t,i){var s=this;this._targetInfoList=[];var l=S1(t,r);Object(y.each)(XT,function(f,h){(!i||!i.include||Object(y.indexOf)(i.include,h)>=0)&&f(l,s._targetInfoList)})}return a.prototype.setOutputRanges=function(r,t){return this.matchOutputRanges(r,t,function(i,s,l){if((i.coordRanges||(i.coordRanges=[])).push(s),!i.coordRange){i.coordRange=s;var f=yy[i.brushType](0,l,s);i.__rangeOffset={offset:A1[i.brushType](f.values,i.range,[1,1]),xyMinMax:f.xyMinMax}}}),r},a.prototype.matchOutputRanges=function(r,t,i){Object(y.each)(r,function(s){var l=this.findTargetInfo(s,t);l&&l!==!0&&Object(y.each)(l.coordSyses,function(f){var h=yy[s.brushType](1,f,s.range);i(s,h.values,f,t)})},this)},a.prototype.setInputRanges=function(r,t){Object(y.each)(r,function(i){var s=this.findTargetInfo(i,t);if(i.range=i.range||[],s&&s!==!0){i.panelId=s.panelId;var l=yy[i.brushType](0,s.coordSys,i.coordRange),f=i.__rangeOffset;i.range=f?A1[i.brushType](l.values,f.offset,ZT(l.xyMinMax,f.xyMinMax)):l.values}},this)},a.prototype.makePanelOpts=function(r,t){return Object(y.map)(this._targetInfoList,function(i){var s=i.getPanelRect();return{panelId:i.panelId,defaultBrushType:t?t(i):null,clipPath:Wv(s),isTargetByCursor:Yu(s,r,i.coordSysModel),getLinearBrushOtherExtent:Yv(s)}})},a.prototype.controlSeries=function(r,t,i){var s=this.findTargetInfo(r,i);return s===!0||s&&Object(y.indexOf)(s.coordSyses,t.coordinateSystem)>=0},a.prototype.findTargetInfo=function(r,t){for(var i=this._targetInfoList,s=S1(t,r),l=0;l<i.length;l++){var f=i[l],h=r.panelId;if(h){if(f.panelId===h)return f}else for(var d=0;d<_1.length;d++)if(_1[d](s,f))return f}return!0},a}();function my(a){return a[0]>a[1]&&a.reverse(),a}function S1(a,r){return Object(sr.s)(a,r,{includeMainTypes:WT})}var XT={grid:function(a,r){var t=a.xAxisModels,i=a.yAxisModels,s=a.gridModels,l=Object(y.createHashMap)(),f={},h={};!t&&!i&&!s||(Object(y.each)(t,function(d){var p=d.axis.grid.model;l.set(p.id,p),f[p.id]=!0}),Object(y.each)(i,function(d){var p=d.axis.grid.model;l.set(p.id,p),h[p.id]=!0}),Object(y.each)(s,function(d){l.set(d.id,d),f[d.id]=!0,h[d.id]=!0}),l.each(function(d){var p=d.coordinateSystem,m=[];Object(y.each)(p.getCartesians(),function(b,A){(Object(y.indexOf)(t,b.getAxis("x").model)>=0||Object(y.indexOf)(i,b.getAxis("y").model)>=0)&&m.push(b)}),r.push({panelId:"grid--"+d.id,gridModel:d,coordSysModel:d,coordSys:m[0],coordSyses:m,getPanelRect:T1.grid,xAxisDeclared:f[d.id],yAxisDeclared:h[d.id]})}))},geo:function(a,r){Object(y.each)(a.geoModels,function(t){var i=t.coordinateSystem;r.push({panelId:"geo--"+t.id,geoModel:t,coordSysModel:t,coordSys:i,coordSyses:[i],getPanelRect:T1.geo})})}},_1=[function(a,r){var t=a.xAxisModel,i=a.yAxisModel,s=a.gridModel;return!s&&t&&(s=t.axis.grid.model),!s&&i&&(s=i.axis.grid.model),s&&s===r.gridModel},function(a,r){var t=a.geoModel;return t&&t===r.geoModel}],T1={grid:function(){return this.coordSys.master.getRect().clone()},geo:function(){var a=this.coordSys,r=a.getBoundingRect().clone();return r.applyTransform(Ze.getTransform(a)),r}},yy={lineX:Object(y.curry)(O1,0),lineY:Object(y.curry)(O1,1),rect:function(a,r,t){var i=r[gy[a]]([t[0][0],t[1][0]]),s=r[gy[a]]([t[0][1],t[1][1]]),l=[my([i[0],s[0]]),my([i[1],s[1]])];return{values:l,xyMinMax:l}},polygon:function(a,r,t){var i=[[Infinity,-Infinity],[Infinity,-Infinity]],s=Object(y.map)(t,function(l){var f=r[gy[a]](l);return i[0][0]=Math.min(i[0][0],f[0]),i[1][0]=Math.min(i[1][0],f[1]),i[0][1]=Math.max(i[0][1],f[0]),i[1][1]=Math.max(i[1][1],f[1]),f});return{values:s,xyMinMax:i}}};function O1(a,r,t,i){var s=t.getAxis(["x","y"][a]),l=my(Object(y.map)([0,1],function(h){return r?s.coordToData(s.toLocalCoord(i[h])):s.toGlobalCoord(s.dataToCoord(i[h]))})),f=[];return f[a]=l,f[1-a]=[NaN,NaN],{values:l,xyMinMax:f}}var A1={lineX:Object(y.curry)(M1,0),lineY:Object(y.curry)(M1,1),rect:function(a,r,t){return[[a[0][0]-t[0]*r[0][0],a[0][1]-t[0]*r[0][1]],[a[1][0]-t[1]*r[1][0],a[1][1]-t[1]*r[1][1]]]},polygon:function(a,r,t){return Object(y.map)(a,function(i,s){return[i[0]-t[0]*r[s][0],i[1]-t[1]*r[s][1]]})}};function M1(a,r,t,i){return[r[0]-i[a]*t[0],r[1]-i[a]*t[1]]}function ZT(a,r){var t=D1(a),i=D1(r),s=[t[0]/i[0],t[1]/i[1]];return isNaN(s[0])&&(s[0]=1),isNaN(s[1])&&(s[1]=1),s}function D1(a){return a?[a[0][1]-a[0][0],a[1][1]-a[1][0]]:[NaN,NaN]}var xy=YT,KT=S("Lx9C"),by=y.each,kT=Object(sr.p)("toolbox-dataZoom_"),AD=["zoom","back"],QT=function(a){Object(de.b)(r,a);function r(){return a!==null&&a.apply(this,arguments)||this}return r.prototype.render=function(t,i,s,l){this._brushController||(this._brushController=new Ul(s.getZr()),this._brushController.on("brush",y.bind(this._onBrush,this)).mount()),qT(t,i,this,l,s),$T(t,i)},r.prototype.onclick=function(t,i,s){JT[s].call(this)},r.prototype.remove=function(t,i){this._brushController&&this._brushController.unmount()},r.prototype.dispose=function(t,i){this._brushController&&this._brushController.dispose()},r.prototype._onBrush=function(t){var i=t.areas;if(!t.isEnd||!i.length)return;var s={},l=this.ecModel;this._brushController.updateCovers([]);var f=new xy(Sy(this.model),l,{include:["grid"]});f.matchOutputRanges(i,l,function(p,m,b){if(b.type==="cartesian2d"){var A=p.brushType;A==="rect"?(h("x",b,m[0]),h("y",b,m[1])):h({lineX:"x",lineY:"y"}[A],b,m)}}),zT(l,s),this._dispatchZoomAction(s);function h(p,m,b){var A=m.getAxis(p),E=A.model,P=d(p,E,l),j=P.findRepresentativeAxisProxy(E).getMinMaxSpan();(j.minValueSpan!=null||j.maxValueSpan!=null)&&(b=Ya(0,b.slice(),A.scale.getExtent(),0,j.minValueSpan,j.maxValueSpan)),P&&(s[P.id]={dataZoomId:P.id,startValue:b[0],endValue:b[1]})}function d(p,m,b){var A;return b.eachComponent({mainType:"dataZoom",subType:"select"},function(E){var P=E.getAxisModel(p,m.componentIndex);P&&(A=E)}),A}},r.prototype._dispatchZoomAction=function(t){var i=[];by(t,function(s,l){i.push(y.clone(s))}),i.length&&this.api.dispatchAction({type:"dataZoom",from:this.uid,batch:i})},r.getDefaultOption=function(t){var i={show:!0,filterMode:"filter",icon:{zoom:"M0,13.5h26.9 M13.5,26.9V0 M32.1,13.5H58V58H13.5 V32.1",back:"M22,1.4L9.9,13.5l12.3,12.3 M10.3,13.5H54.9v44.6 H10.3v-26"},title:t.getLocale(["toolbox","dataZoom","title"]),brushStyle:{borderWidth:0,color:"rgba(210,219,238,0.2)"}};return i},r}(_a),JT={zoom:function(){var a=!this._isZoomActive;this.api.dispatchAction({type:"takeGlobalCursor",key:"dataZoomSelect",dataZoomSelectActive:a})},back:function(){this._dispatchZoomAction(FT(this.ecModel))}};function Sy(a){var r={xAxisIndex:a.get("xAxisIndex",!0),yAxisIndex:a.get("yAxisIndex",!0),xAxisId:a.get("xAxisId",!0),yAxisId:a.get("yAxisId",!0)};return r.xAxisIndex==null&&r.xAxisId==null&&(r.xAxisIndex="all"),r.yAxisIndex==null&&r.yAxisId==null&&(r.yAxisIndex="all"),r}function $T(a,r){a.setIconStatus("back",GT(r)>1?"emphasis":"normal")}function qT(a,r,t,i,s){var l=t._isZoomActive;i&&i.type==="takeGlobalCursor"&&(l=i.key==="dataZoomSelect"?i.dataZoomSelectActive:!1),t._isZoomActive=l,a.setIconStatus("zoom",l?"emphasis":"normal");var f=new xy(Sy(a),r,{include:["grid"]}),h=f.makePanelOpts(s,function(d){return d.xAxisDeclared&&!d.yAxisDeclared?"lineX":!d.xAxisDeclared&&d.yAxisDeclared?"lineY":"rect"});t._brushController.setPanels(h).enableBrush(l&&h.length?{brushType:"auto",brushStyle:a.getModel("brushStyle").getItemStyle()}:!1)}Object(KT.b)("dataZoom",function(a){var r=a.getComponent("toolbox",0);if(!r)return;var t=r.getModel(["feature","dataZoom"]),i=[],s=Sy(t),l=Object(sr.s)(a,s);by(l.xAxisModels,function(h){return f(h,"xAxis","xAxisIndex")}),by(l.yAxisModels,function(h){return f(h,"yAxis","yAxisIndex")});function f(h,d,p){var m=h.componentIndex,b={type:"select",$fromToolbox:!0,filterMode:t.get("filterMode",!0)||"filter",id:kT+d+m};b[p]=m,i.push(b)}return i});var tO=QT;function eO(a){a.registerComponentModel(yT),a.registerComponentView(_T),sf("saveAsImage",TT),sf("magicType",MT),sf("dataView",jT),sf("dataZoom",tO),sf("restore",HT),Object(B.a)(gT)}var rO=function(a){Object(de.b)(r,a);function r(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=r.type,t}return r.type="tooltip",r.dependencies=["axisPointer"],r.defaultOption={zlevel:0,z:60,show:!0,showContent:!0,trigger:"item",triggerOn:"mousemove|click",alwaysShowContent:!1,displayMode:"single",renderMode:"auto",confine:null,showDelay:0,hideDelay:100,transitionDuration:.4,enterable:!1,backgroundColor:"#fff",shadowBlur:10,shadowColor:"rgba(0, 0, 0, .2)",shadowOffsetX:1,shadowOffsetY:2,borderRadius:4,borderWidth:1,padding:null,extraCssText:"",axisPointer:{type:"line",axis:"auto",animation:"auto",animationDurationUpdate:200,animationEasingUpdate:"exponentialOut",crossStyle:{color:"#999",width:1,type:"dashed",textStyle:{}}},textStyle:{color:"#666",fontSize:14}},r}(An.a),nO=rO,iO=S("Ze12");function C1(a){var r=a.get("confine");return r!=null?!!r:a.get("renderMode")==="richText"}function E1(a){if(!!fi.a.domSupported){for(var r=document.documentElement.style,t=0,i=a.length;t<i;t++)if(a[t]in r)return a[t]}}var _y=E1(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),aO=E1(["webkitTransition","transition","OTransition","MozTransition","msTransition"]);function L1(a,r){if(!a)return r;r=Object(Pr.k)(r,!0);var t=a.indexOf(r);return a=t===-1?r:"-"+a.slice(0,t)+"-"+r,a.toLowerCase()}function P1(a,r){var t=a.currentStyle||document.defaultView&&document.defaultView.getComputedStyle(a);return t?r?t[r]:t:null}var oO=L1(aO,"transition"),w1=L1(_y,"transform"),sO="position:absolute;display:block;border-style:solid;white-space:nowrap;z-index:9999999;"+(fi.a.transform3dSupported?"will-change:transform;":"");function lO(a){return a=a==="left"?"right":a==="right"?"left":a==="top"?"bottom":"top",a}function uO(a,r,t){if(!Object(y.isString)(t)||t==="inside")return"";r=Object(Pr.c)(r);var i=lO(t),s=i+":-6px;",l=w1+":";Object(y.indexOf)(["left","right"],i)>-1?(s+="top:50%",l+="translateY(-50%) rotate("+(i==="left"?-225:-45)+"deg)"):(s+="left:50%",l+="translateX(-50%) rotate("+(i==="top"?225:45)+"deg)");var f=r+" solid 1px;",h=["position:absolute;width:10px;height:10px;",s+";"+l+";","border-bottom:"+f,"border-right:"+f,"background-color:"+a+";","box-shadow:8px 8px 16px -3px #000;"];return'<div style="'+h.join("")+'"></div>'}function fO(a,r){var t="cubic-bezier(0.23,1,0.32,1)",i=" "+a/2+"s "+t,s="opacity"+i+",visibility"+i;return r||(i=" "+a+"s "+t,s+=fi.a.transformSupported?","+_y+i:",left"+i+",top"+i),oO+":"+s}function I1(a,r,t){var i=a.toFixed(0)+"px",s=r.toFixed(0)+"px";if(!fi.a.transformSupported)return t?"top:"+s+";left:"+i+";":[["top",s],["left",i]];var l=fi.a.transform3dSupported,f="translate"+(l?"3d":"")+"("+i+","+s+(l?",0":"")+")";return t?"top:0;left:0;"+w1+":"+f+";":[["top",0],["left",0],[_y,f]]}function cO(a){var r=[],t=a.get("fontSize"),i=a.getTextColor();i&&r.push("color:"+i),r.push("font:"+a.getFont()),t&&r.push("line-height:"+Math.round(t*3/2)+"px");var s=a.get("textShadowColor"),l=a.get("textShadowBlur")||0,f=a.get("textShadowOffsetX")||0,h=a.get("textShadowOffsetY")||0;return s&&l&&r.push("text-shadow:"+f+"px "+h+"px "+l+"px "+s),Object(y.each)(["decoration","align"],function(d){var p=a.get(d);p&&r.push("text-"+d+":"+p)}),r.join(";")}function hO(a,r,t){var i=[],s=a.get("transitionDuration"),l=a.get("backgroundColor"),f=a.get("shadowBlur"),h=a.get("shadowColor"),d=a.get("shadowOffsetX"),p=a.get("shadowOffsetY"),m=a.getModel("textStyle"),b=Object(wn.d)(a,"html"),A=d+"px "+p+"px "+f+"px "+h;return i.push("box-shadow:"+A),r&&s&&i.push(fO(s,t)),l&&(fi.a.canvasSupported?i.push("background-color:"+l):(i.push("background-color:#"+Object(Ct.toHex)(l)),i.push("filter:alpha(opacity=70)"))),Object(y.each)(["width","color","radius"],function(E){var P="border-"+E,j=Object(Pr.k)(P),J=a.get(j);J!=null&&i.push(P+":"+J+(E==="color"?"":"px"))}),i.push(cO(m)),b!=null&&i.push("padding:"+Object(Pr.j)(b).join("px ")+"px"),i.join(";")+";"}function R1(a,r,t,i,s){var l=r&&r.painter;if(t){var f=l&&l.getViewportRoot();f&&Object(iO.c)(a,f,document.body,i,s)}else{a[0]=i,a[1]=s;var h=l&&l.getViewportRootOffset();h&&(a[0]+=h.offsetLeft,a[1]+=h.offsetTop)}a[2]=a[0]/r.getWidth(),a[3]=a[1]/r.getHeight()}var vO=function(){function a(r,t,i){if(this._show=!1,this._styleCoord=[0,0,0,0],this._enterable=!0,this._firstShow=!0,this._longHide=!0,fi.a.wxa)return null;var s=document.createElement("div");s.domBelongToZr=!0,this.el=s;var l=this._zr=t.getZr(),f=this._appendToBody=i&&i.appendToBody;R1(this._styleCoord,l,f,t.getWidth()/2,t.getHeight()/2),f?document.body.appendChild(s):r.appendChild(s),this._container=r;var h=this;s.onmouseenter=function(){h._enterable&&(clearTimeout(h._hideTimeout),h._show=!0),h._inContent=!0},s.onmousemove=function(d){if(d=d||window.event,!h._enterable){var p=l.handler,m=l.painter.getViewportRoot();Object(Wi.e)(m,d,!0),p.dispatch("mousemove",d)}},s.onmouseleave=function(){h._inContent=!1,h._enterable&&h._show&&h.hideLater(h._hideDelay)}}return a.prototype.update=function(r){var t=this._container,i=P1(t,"position"),s=t.style;s.position!=="absolute"&&i!=="absolute"&&(s.position="relative");var l=r.get("alwaysShowContent");l&&this._moveIfResized(),this.el.className=r.get("className")||""},a.prototype.show=function(r,t){clearTimeout(this._hideTimeout),clearTimeout(this._longHideTimeout);var i=this.el,s=i.style,l=this._styleCoord;i.innerHTML?s.cssText=sO+hO(r,!this._firstShow,this._longHide)+I1(l[0],l[1],!0)+("border-color:"+Object(Pr.c)(t)+";")+(r.get("extraCssText")||"")+(";pointer-event:"+(this._enterable?"auto":"none")):s.display="none",this._show=!0,this._firstShow=!1,this._longHide=!1},a.prototype.setContent=function(r,t,i,s,l){if(r!=null){var f=this.el;if(Object(y.isString)(l)&&i.get("trigger")==="item"&&!C1(i)&&(r+=uO(i.get("backgroundColor"),s,l)),Object(y.isString)(r))f.innerHTML=r;else if(r){f.innerHTML="",Object(y.isArray)(r)||(r=[r]);for(var h=0;h<r.length;h++)Object(y.isDom)(r[h])&&r[h].parentNode!==f&&f.appendChild(r[h])}}},a.prototype.setEnterable=function(r){this._enterable=r},a.prototype.getSize=function(){var r=this.el;return[r.clientWidth,r.clientHeight]},a.prototype.moveTo=function(r,t){var i=this._styleCoord;if(R1(i,this._zr,this._appendToBody,r,t),i[0]!=null&&i[1]!=null){var s=this.el.style,l=I1(i[0],i[1]);Object(y.each)(l,function(f){s[f[0]]=f[1]})}},a.prototype._moveIfResized=function(){var r=this._styleCoord[2],t=this._styleCoord[3];this.moveTo(r*this._zr.getWidth(),t*this._zr.getHeight())},a.prototype.hide=function(){var r=this,t=this.el.style;t.visibility="hidden",t.opacity="0",fi.a.transform3dSupported&&(t.willChange=""),this._show=!1,this._longHideTimeout=setTimeout(function(){return r._longHide=!0},500)},a.prototype.hideLater=function(r){this._show&&!(this._inContent&&this._enterable)&&(r?(this._hideDelay=r,this._show=!1,this._hideTimeout=setTimeout(Object(y.bind)(this.hide,this),r)):this.hide())},a.prototype.isShow=function(){return this._show},a.prototype.dispose=function(){this.el.parentNode.removeChild(this.el)},a.prototype.getOuterSize=function(){var r=this.el.clientWidth,t=this.el.clientHeight,i=P1(this.el);return i&&(r+=parseInt(i.borderLeftWidth,10)+parseInt(i.borderRightWidth,10),t+=parseInt(i.borderTopWidth,10)+parseInt(i.borderBottomWidth,10)),{width:r,height:t}},a}(),dO=vO,pO=function(){function a(r){this._show=!1,this._styleCoord=[0,0,0,0],this._enterable=!0,this._zr=r.getZr(),B1(this._styleCoord,this._zr,r.getWidth()/2,r.getHeight()/2)}return a.prototype.update=function(r){var t=r.get("alwaysShowContent");t&&this._moveIfResized()},a.prototype.show=function(){this._hideTimeout&&clearTimeout(this._hideTimeout),this.el.show(),this._show=!0},a.prototype.setContent=function(r,t,i,s,l){y.isObject(r)&&Object(Nn.b)(""),this.el&&this._zr.remove(this.el);var f=i.getModel("textStyle");this.el=new en.a({style:{rich:t.richTextStyles,text:r,lineHeight:22,backgroundColor:i.get("backgroundColor"),borderRadius:i.get("borderRadius"),borderWidth:1,borderColor:s,shadowColor:i.get("shadowColor"),shadowBlur:i.get("shadowBlur"),shadowOffsetX:i.get("shadowOffsetX"),shadowOffsetY:i.get("shadowOffsetY"),textShadowColor:f.get("textShadowColor"),textShadowBlur:f.get("textShadowBlur")||0,textShadowOffsetX:f.get("textShadowOffsetX")||0,textShadowOffsetY:f.get("textShadowOffsetY")||0,fill:i.get(["textStyle","color"]),padding:Object(wn.d)(i,"richText"),verticalAlign:"top",align:"left"},z:i.get("z")}),this._zr.add(this.el);var h=this;this.el.on("mouseover",function(){h._enterable&&(clearTimeout(h._hideTimeout),h._show=!0),h._inContent=!0}),this.el.on("mouseout",function(){h._enterable&&h._show&&h.hideLater(h._hideDelay),h._inContent=!1})},a.prototype.setEnterable=function(r){this._enterable=r},a.prototype.getSize=function(){var r=this.el,t=this.el.getBoundingRect(),i=N1(r.style);return[t.width+i.left+i.right,t.height+i.top+i.bottom]},a.prototype.moveTo=function(r,t){var i=this.el;if(i){var s=this._styleCoord;B1(s,this._zr,r,t),r=s[0],t=s[1];var l=i.style,f=Js(l.borderWidth||0),h=N1(l);i.x=r+f+h.left,i.y=t+f+h.top,i.markRedraw()}},a.prototype._moveIfResized=function(){var r=this._styleCoord[2],t=this._styleCoord[3];this.moveTo(r*this._zr.getWidth(),t*this._zr.getHeight())},a.prototype.hide=function(){this.el&&this.el.hide(),this._show=!1},a.prototype.hideLater=function(r){this._show&&!(this._inContent&&this._enterable)&&(r?(this._hideDelay=r,this._show=!1,this._hideTimeout=setTimeout(y.bind(this.hide,this),r)):this.hide())},a.prototype.isShow=function(){return this._show},a.prototype.getOuterSize=function(){var r=this.getSize();return{width:r[0],height:r[1]}},a.prototype.dispose=function(){this._zr.remove(this.el)},a}();function Js(a){return Math.max(0,a)}function N1(a){var r=Js(a.shadowBlur||0),t=Js(a.shadowOffsetX||0),i=Js(a.shadowOffsetY||0);return{left:Js(r-t),right:Js(r+t),top:Js(r-i),bottom:Js(r+i)}}function B1(a,r,t,i){a[0]=t,a[1]=i,a[2]=a[0]/r.getWidth(),a[3]=a[1]/r.getHeight()}var gO=pO,mO=S("+Hau"),wd=S("OKJ2"),j1=y.bind,Uc=y.each,z1=Ne.o,yO=new nn.a({shape:{x:-1,y:-1,width:2,height:2}}),xO=function(a){Object(de.b)(r,a);function r(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=r.type,t}return r.prototype.init=function(t,i){if(!fi.a.node){var s=t.getComponent("tooltip"),l=s.get("renderMode");this._renderMode=Object(sr.i)(l),this._tooltipContent=this._renderMode==="richText"?new gO(i):new dO(i.getDom(),i,{appendToBody:s.get("appendToBody",!0)})}},r.prototype.render=function(t,i,s){if(!fi.a.node){this.group.removeAll(),this._tooltipModel=t,this._ecModel=i,this._api=s,this._alwaysShowContent=t.get("alwaysShowContent");var l=this._tooltipContent;l.update(t),l.setEnterable(t.get("enterable")),this._initGlobalListener(),this._keepShow()}},r.prototype._initGlobalListener=function(){var t=this._tooltipModel,i=t.get("triggerOn");G0("itemTooltip",this._api,j1(function(s,l,f){i!=="none"&&(i.indexOf(s)>=0?this._tryShow(l,f):s==="leave"&&this._hide(f))},this))},r.prototype._keepShow=function(){var t=this._tooltipModel,i=this._ecModel,s=this._api;if(this._lastX!=null&&this._lastY!=null&&t.get("triggerOn")!=="none"){var l=this;clearTimeout(this._refreshUpdateTimeout),this._refreshUpdateTimeout=setTimeout(function(){!s.isDisposed()&&l.manuallyShowTip(t,i,s,{x:l._lastX,y:l._lastY,dataByCoordSys:l._lastDataByCoordSys})})}},r.prototype.manuallyShowTip=function(t,i,s,l){if(!(l.from===this.uid||fi.a.node)){var f=F1(l,s);this._ticket="";var h=l.dataByCoordSys,d=TO(l,i,s);if(d){var p=d.el.getBoundingRect().clone();p.applyTransform(d.el.transform),this._tryShow({offsetX:p.x+p.width/2,offsetY:p.y+p.height/2,target:d.el,position:l.position,positionDefault:"bottom"},f)}else if(l.tooltip&&l.x!=null&&l.y!=null){var m=yO;m.x=l.x,m.y=l.y,m.update(),Object(Ur.a)(m).tooltipConfig={name:null,option:l.tooltip},this._tryShow({offsetX:l.x,offsetY:l.y,target:m},f)}else if(h)this._tryShow({offsetX:l.x,offsetY:l.y,position:l.position,dataByCoordSys:h,tooltipOption:l.tooltipOption},f);else if(l.seriesIndex!=null){if(this._manuallyAxisShowTip(t,i,s,l))return;var b=H0(l,i),A=b.point[0],E=b.point[1];A!=null&&E!=null&&this._tryShow({offsetX:A,offsetY:E,target:b.el,position:l.position,positionDefault:"bottom"},f)}else l.x!=null&&l.y!=null&&(s.dispatchAction({type:"updateAxisPointer",x:l.x,y:l.y}),this._tryShow({offsetX:l.x,offsetY:l.y,position:l.position,target:s.getZr().findHover(l.x,l.y).target},f))}},r.prototype.manuallyHideTip=function(t,i,s,l){var f=this._tooltipContent;!this._alwaysShowContent&&this._tooltipModel&&f.hideLater(this._tooltipModel.get("hideDelay")),this._lastX=this._lastY=this._lastDataByCoordSys=null,l.from!==this.uid&&this._hide(F1(l,s))},r.prototype._manuallyAxisShowTip=function(t,i,s,l){var f=l.seriesIndex,h=l.dataIndex,d=i.getComponent("axisPointer").coordSysAxesInfo;if(!(f==null||h==null||d==null)){var p=i.getSeriesByIndex(f);if(!!p){var m=p.getData(),b=Id([m.getItemModel(h),p,(p.coordinateSystem||{}).model],this._tooltipModel);if(b.get("trigger")==="axis")return s.dispatchAction({type:"updateAxisPointer",seriesIndex:f,dataIndex:h,position:l.position}),!0}}},r.prototype._tryShow=function(t,i){var s=t.target,l=this._tooltipModel;if(!!l){this._lastX=t.offsetX,this._lastY=t.offsetY;var f=t.dataByCoordSys;if(f&&f.length)this._showAxisTooltip(f,t);else if(s){this._lastDataByCoordSys=null;var h,d;Object(Ds.a)(s,function(p){if(Object(Ur.a)(p).dataIndex!=null)return h=p,!0;if(Object(Ur.a)(p).tooltipConfig!=null)return d=p,!0},!0),h?this._showSeriesItemTooltip(t,h,i):d?this._showComponentItemTooltip(t,d,i):this._hide(i)}else this._lastDataByCoordSys=null,this._hide(i)}},r.prototype._showOrMove=function(t,i){var s=t.get("showDelay");i=y.bind(i,this),clearTimeout(this._showTimout),s>0?this._showTimout=setTimeout(i,s):i()},r.prototype._showAxisTooltip=function(t,i){var s=this._ecModel,l=this._tooltipModel,f=[i.offsetX,i.offsetY],h=Id([i.tooltipOption],l),d=this._renderMode,p=[],m=Object(wn.c)("section",{blocks:[],noHeader:!0}),b=[],A=new wn.a;Uc(t,function(St){Uc(St.dataByAxis,function(Ot){var wt=s.getComponent(Ot.axisDim+"Axis",Ot.axisIndex),zt=Ot.value;if(!(!wt||zt==null)){var jt=N0(zt,wt.axis,s,Ot.seriesDataIndices,Ot.valueLabelOpt),kt=Object(wn.c)("section",{header:jt,noHeader:!y.trim(jt),sortBlocks:!0,blocks:[]});m.blocks.push(kt),y.each(Ot.seriesDataIndices,function(te){var ue=s.getSeriesByIndex(te.seriesIndex),me=te.dataIndexInside,ve=ue.getDataParams(me);ve.axisDim=Ot.axisDim,ve.axisIndex=Ot.axisIndex,ve.axisType=Ot.axisType,ve.axisId=Ot.axisId,ve.axisValue=Bn.c(wt.axis,{value:zt}),ve.axisValueLabel=jt,ve.marker=A.makeTooltipMarker("item",Pr.c(ve.color),d);var Me=Object(wd.b)(ue.formatTooltip(me,!0,null));Me.markupFragment&&kt.blocks.push(Me.markupFragment),Me.markupText&&b.push(Me.markupText),p.push(ve)})}})}),m.blocks.reverse(),b.reverse();var E=i.position,P=h.get("order"),j=Object(wn.b)(m,A,d,P,s.get("useUTC"),h.get("textStyle"));j&&b.unshift(j);var J=d==="richText"?`

`:"<br/>",dt=b.join(J);this._showOrMove(h,function(){this._updateContentNotChangedOnAxis(t)?this._updatePosition(h,E,f[0],f[1],this._tooltipContent,p):this._showTooltipContent(h,dt,p,Math.random()+"",f[0],f[1],E,null,A)})},r.prototype._showSeriesItemTooltip=function(t,i,s){var l=this._ecModel,f=Object(Ur.a)(i),h=f.seriesIndex,d=l.getSeriesByIndex(h),p=f.dataModel||d,m=f.dataIndex,b=f.dataType,A=p.getData(b),E=this._renderMode,P=t.positionDefault,j=Id([A.getItemModel(m),p,d&&(d.coordinateSystem||{}).model],this._tooltipModel,P?{position:P}:null),J=j.get("trigger");if(!(J!=null&&J!=="item")){var dt=p.getDataParams(m,b),St=new wn.a;dt.marker=St.makeTooltipMarker("item",Pr.c(dt.color),E);var Ot=Object(wd.b)(p.formatTooltip(m,!1,b)),wt=j.get("order"),zt=Ot.markupFragment?Object(wn.b)(Ot.markupFragment,St,E,wt,l.get("useUTC"),j.get("textStyle")):Ot.markupText,jt="item_"+p.name+"_"+m;this._showOrMove(j,function(){this._showTooltipContent(j,zt,dt,jt,t.offsetX,t.offsetY,t.position,t.target,St)}),s({type:"showTip",dataIndexInside:m,dataIndex:A.getRawIndex(m),seriesIndex:h,from:this.uid})}},r.prototype._showComponentItemTooltip=function(t,i,s){var l=Object(Ur.a)(i),f=l.tooltipConfig,h=f.option;if(y.isString(h)){var d=h;h={content:d,formatter:d}}var p=[h],m=this._ecModel.getComponent(l.componentMainType,l.componentIndex);m&&p.push(m);var b=t.positionDefault,A=Id(p,this._tooltipModel,b?{position:b}:null),E=A.get("content"),P=Math.random()+"",j=new wn.a;this._showOrMove(A,function(){var J=y.clone(A.get("formatterParams")||{});this._showTooltipContent(A,E,J,P,t.offsetX,t.offsetY,t.position,i,j)}),s({type:"showTip",from:this.uid})},r.prototype._showTooltipContent=function(t,i,s,l,f,h,d,p,m){if(this._ticket="",!(!t.get("showContent")||!t.get("show"))){var b=this._tooltipContent,A=t.get("formatter");d=d||t.get("position");var E=i,P=this._getNearestPoint([f,h],s,t.get("trigger"),t.get("borderColor")),j=P.color;if(A&&y.isString(A)){var J=t.ecModel.get("useUTC"),dt=y.isArray(s)?s[0]:s,St=dt&&dt.axisType&&dt.axisType.indexOf("time")>=0;E=A,St&&(E=Object(mO.h)(dt.axisValue,E,J)),E=Pr.f(E,s,!0)}else if(y.isFunction(A)){var Ot=j1(function(wt,zt){wt===this._ticket&&(b.setContent(zt,m,t,j,d),this._updatePosition(t,d,f,h,b,s,p))},this);this._ticket=l,E=A(s,l,Ot)}b.setContent(E,m,t,j,d),b.show(t,j),this._updatePosition(t,d,f,h,b,s,p)}},r.prototype._getNearestPoint=function(t,i,s,l){if(s==="axis"||y.isArray(i))return{color:l||(this._renderMode==="html"?"#fff":"none")};if(!y.isArray(i))return{color:l||i.color||i.borderColor}},r.prototype._updatePosition=function(t,i,s,l,f,h,d){var p=this._api.getWidth(),m=this._api.getHeight();i=i||t.get("position");var b=f.getSize(),A=t.get("align"),E=t.get("verticalAlign"),P=d&&d.getBoundingRect().clone();if(d&&P.applyTransform(d.transform),y.isFunction(i)&&(i=i([s,l],h,f.el,P,{viewSize:[p,m],contentSize:b.slice()})),y.isArray(i))s=z1(i[0],p),l=z1(i[1],m);else if(y.isObject(i)){var j=i;j.width=b[0],j.height=b[1];var J=Tr.g(j,{width:p,height:m});s=J.x,l=J.y,A=null,E=null}else if(y.isString(i)&&d){var dt=_O(i,P,b);s=dt[0],l=dt[1]}else{var dt=bO(s,l,f,p,m,A?null:20,E?null:20);s=dt[0],l=dt[1]}if(A&&(s-=V1(A)?b[0]/2:A==="right"?b[0]:0),E&&(l-=V1(E)?b[1]/2:E==="bottom"?b[1]:0),C1(t)){var dt=SO(s,l,f,p,m);s=dt[0],l=dt[1]}f.moveTo(s,l)},r.prototype._updateContentNotChangedOnAxis=function(t){var i=this._lastDataByCoordSys,s=!!i&&i.length===t.length;return s&&Uc(i,function(l,f){var h=l.dataByAxis||[],d=t[f]||{},p=d.dataByAxis||[];s=s&&h.length===p.length,s&&Uc(h,function(m,b){var A=p[b]||{},E=m.seriesDataIndices||[],P=A.seriesDataIndices||[];s=s&&m.value===A.value&&m.axisType===A.axisType&&m.axisId===A.axisId&&E.length===P.length,s&&Uc(E,function(j,J){var dt=P[J];s=s&&j.seriesIndex===dt.seriesIndex&&j.dataIndex===dt.dataIndex})})}),this._lastDataByCoordSys=t,!!s},r.prototype._hide=function(t){this._lastDataByCoordSys=null,t({type:"hideTip",from:this.uid})},r.prototype.dispose=function(t,i){fi.a.node||(this._tooltipContent.dispose(),ny("itemTooltip",i))},r.type="tooltip",r}(Vn.a);function Id(a,r,t){var i=r.ecModel,s;t?(s=new Ye.a(t,i,i),s=new Ye.a(r.option,s,i)):s=r;for(var l=a.length-1;l>=0;l--){var f=a[l];f&&(f instanceof Ye.a&&(f=f.get("tooltip",!0)),y.isString(f)&&(f={formatter:f}),f&&(s=new Ye.a(f,s,i)))}return s}function F1(a,r){return a.dispatchAction||y.bind(r.dispatchAction,r)}function bO(a,r,t,i,s,l,f){var h=t.getOuterSize(),d=h.width,p=h.height;return l!=null&&(a+d+l+2>i?a-=d+l:a+=l),f!=null&&(r+p+f>s?r-=p+f:r+=f),[a,r]}function SO(a,r,t,i,s){var l=t.getOuterSize(),f=l.width,h=l.height;return a=Math.min(a+f,i)-f,r=Math.min(r+h,s)-h,a=Math.max(a,0),r=Math.max(r,0),[a,r]}function _O(a,r,t){var i=t[0],s=t[1],l=10,f=5,h=0,d=0,p=r.width,m=r.height;switch(a){case"inside":h=r.x+p/2-i/2,d=r.y+m/2-s/2;break;case"top":h=r.x+p/2-i/2,d=r.y-s-l;break;case"bottom":h=r.x+p/2-i/2,d=r.y+m+l;break;case"left":h=r.x-i-l-f,d=r.y+m/2-s/2;break;case"right":h=r.x+p+l+f,d=r.y+m/2-s/2}return[h,d]}function V1(a){return a==="center"||a==="middle"}function TO(a,r,t){var i=Object(sr.t)(a).queryOptionMap,s=i.keys()[0];if(!(!s||s==="series")){var l=Object(sr.v)(r,s,i.get(s),{useDefault:!1,enableAll:!1,enableNone:!1}),f=l.models[0];if(!!f){var h=t.getViewOfComponentModel(f),d;if(h.group.traverse(function(p){var m=Object(Ur.a)(p).tooltipConfig;if(m&&m.name===a.name)return d=p,!0}),d)return{componentMainType:s,componentIndex:f.componentIndex,el:d}}}}var OO=xO;function AO(a){Object(B.a)(Vc),a.registerComponentModel(nO),a.registerComponentView(OO),a.registerAction({type:"showTip",event:"showTip",update:"tooltip:manuallyShowTip"},function(){}),a.registerAction({type:"hideTip",event:"hideTip",update:"tooltip:manuallyHideTip"},function(){})}var MO=["rect","polygon","keep","clear"];function DO(a,r){var t=Object(sr.r)(a?a.brush:[]);if(!!t.length){var i=[];y.each(t,function(d){var p=d.hasOwnProperty("toolbox")?d.toolbox:[];p instanceof Array&&(i=i.concat(p))});var s=a&&a.toolbox;y.isArray(s)&&(s=s[0]),s||(s={feature:{}},a.toolbox=[s]);var l=s.feature||(s.feature={}),f=l.brush||(l.brush={}),h=f.type||(f.type=[]);h.push.apply(h,i),CO(h),r&&!h.length&&h.push.apply(h,MO)}}function CO(a){var r={};y.each(a,function(t){r[t]=1}),a.length=0,y.each(r,function(t,i){a.push(i)})}var $s=S("CSTQ"),G1=y.each;function U1(a){if(a){for(var r in a)if(a.hasOwnProperty(r))return!0}}function Ty(a,r,t){var i={};return G1(r,function(l){var f=i[l]=s();G1(a[l],function(h,d){if(!!si.isValidType(d)){var p={type:d,visual:h};t&&t(p,l),f[d]=new si(p),d==="opacity"&&(p=y.clone(p),p.type="colorAlpha",f.__hidden.__alphaForOpacity=new si(p))}})}),i;function s(){var l=function(){};l.prototype.__hidden=l.prototype;var f=new l;return f}}function H1(a,r,t){var i;y.each(t,function(s){r.hasOwnProperty(s)&&U1(r[s])&&(i=!0)}),i&&y.each(t,function(s){r.hasOwnProperty(s)&&U1(r[s])?a[s]=y.clone(r[s]):delete a[s]})}function EO(a,r,t,i,s,l){var f={};y.each(a,function(b){var A=si.prepareVisualTypes(r[b]);f[b]=A});var h;function d(b){return Object($s.a)(t,h,b)}function p(b,A){Object($s.c)(t,h,b,A)}l==null?t.each(m):t.each([l],m);function m(b,A){h=l==null?b:A;var E=t.getRawDataItem(h);if(!(E&&E.visualMap===!1))for(var P=i.call(s,b),j=r[P],J=f[P],dt=0,St=J.length;dt<St;dt++){var Ot=J[dt];j[Ot]&&j[Ot].applyVisual(b,d,p)}}}function LO(a,r,t,i){var s={};return y.each(a,function(l){var f=si.prepareVisualTypes(r[l]);s[l]=f}),{progress:function(f,h){var d;i!=null&&(d=h.getDimension(i));function p(wt){return Object($s.a)(h,b,wt)}function m(wt,zt){Object($s.c)(h,b,wt,zt)}for(var b;(b=f.next())!=null;){var A=h.getRawDataItem(b);if(!(A&&A.visualMap===!1))for(var E=i!=null?h.get(d,b):b,P=t(E),j=r[P],J=s[P],dt=0,St=J.length;dt<St;dt++){var Ot=J[dt];j[Ot]&&j[Ot].applyVisual(E,p,m)}}}}}var Hc=S("BlVb");function PO(a){var r=a.brushType,t={point:function(i){return Oy[r].point(i,t,a)},rect:function(i){return Oy[r].rect(i,t,a)}};return t}var Oy={lineX:W1(0),lineY:W1(1),rect:{point:function(a,r,t){return a&&t.boundingRect.contain(a[0],a[1])},rect:function(a,r,t){return a&&t.boundingRect.intersect(a)}},polygon:{point:function(a,r,t){return a&&t.boundingRect.contain(a[0],a[1])&&Hc.a(t.range,a[0],a[1])},rect:function(a,r,t){var i=t.range;if(!a||i.length<=1)return!1;var s=a.x,l=a.y,f=a.width,h=a.height,d=i[0];if(Hc.a(i,s,l)||Hc.a(i,s+f,l)||Hc.a(i,s,l+h)||Hc.a(i,s+f,l+h)||ai.a.create(a).contain(d[0],d[1])||Object(Ze.linePolygonIntersect)(s,l,s+f,l,i)||Object(Ze.linePolygonIntersect)(s,l,s,l+h,i)||Object(Ze.linePolygonIntersect)(s+f,l,s+f,l+h,i)||Object(Ze.linePolygonIntersect)(s,l+h,s+f,l+h,i))return!0}}};function W1(a){var r=["x","y"],t=["width","height"];return{point:function(i,s,l){if(i){var f=l.range,h=i[a];return Wc(h,f)}},rect:function(i,s,l){if(i){var f=l.range,h=[i[r[a]],i[r[a]]+i[t[a]]];return h[1]<h[0]&&h.reverse(),Wc(h[0],f)||Wc(h[1],f)||Wc(f[0],h)||Wc(f[1],h)}}}}function Wc(a,r){return r[0]<=a&&a<=r[1]}var MD=Oy,Y1=["inBrush","outOfBrush"],Ay="__ecBrushSelect",My="__ecInBrushSelectEvent";function X1(a){a.eachComponent({mainType:"brush"},function(r){var t=r.brushTargetManager=new xy(r.option,a);t.setInputRanges(r.areas,a)})}function wO(a,r,t){var i=[],s,l;a.eachComponent({mainType:"brush"},function(f){t&&t.type==="takeGlobalCursor"&&f.setBrushOption(t.key==="brush"?t.brushOption:{brushType:!1})}),X1(a),a.eachComponent({mainType:"brush"},function(f,h){var d={brushId:f.id,brushIndex:h,brushName:f.name,areas:y.clone(f.areas),selected:[]};i.push(d);var p=f.option,m=p.brushLink,b=[],A=[],E=[],P=!1;h||(s=p.throttleType,l=p.throttleDelay);var j=y.map(f.areas,function(zt){var jt=BO[zt.brushType],kt=y.defaults({boundingRect:jt?jt(zt):void 0},zt);return kt.selectors=PO(kt),kt}),J=Ty(f.option,Y1,function(zt){zt.mappingMethod="fixed"});y.isArray(m)&&y.each(m,function(zt){b[zt]=1});function dt(zt){return m==="all"||!!b[zt]}function St(zt){return!!zt.length}a.eachSeries(function(zt,jt){var kt=E[jt]=[];zt.subType==="parallel"?Ot(zt,jt):wt(zt,jt,kt)});function Ot(zt,jt){var kt=zt.coordinateSystem;P=P||kt.hasAxisBrushed(),dt(jt)&&kt.eachActiveState(zt.getData(),function(te,ue){te==="active"&&(A[ue]=1)})}function wt(zt,jt,kt){if(!(!zt.brushSelector||NO(f,jt))&&(y.each(j,function(ue){f.brushTargetManager.controlSeries(ue,zt,a)&&kt.push(ue),P=P||St(kt)}),dt(jt)&&St(kt))){var te=zt.getData();te.each(function(ue){Z1(zt,kt,te,ue)&&(A[ue]=1)})}}a.eachSeries(function(zt,jt){var kt={seriesId:zt.id,seriesIndex:jt,seriesName:zt.name,dataIndex:[]};d.selected.push(kt);var te=E[jt],ue=zt.getData(),me=dt(jt)?function(ve){return A[ve]?(kt.dataIndex.push(ue.getRawIndex(ve)),"inBrush"):"outOfBrush"}:function(ve){return Z1(zt,te,ue,ve)?(kt.dataIndex.push(ue.getRawIndex(ve)),"inBrush"):"outOfBrush"};(dt(jt)?P:St(te))&&EO(Y1,J,ue,me)})}),IO(r,s,l,i,t)}function IO(a,r,t,i,s){if(!!s){var l=a.getZr();if(!l[My]){l[Ay]||(l[Ay]=RO);var f=ca.b(l,Ay,t,r);f(a,i)}}}function RO(a,r){if(!a.isDisposed()){var t=a.getZr();t[My]=!0,a.dispatchAction({type:"brushSelect",batch:r}),t[My]=!1}}function Z1(a,r,t,i){for(var s=0,l=r.length;s<l;s++){var f=r[s];if(a.brushSelector(i,t,f.selectors,f))return!0}}function NO(a,r){var t=a.option.seriesIndex;return t!=null&&t!=="all"&&(y.isArray(t)?y.indexOf(t,r)<0:r!==t)}var BO={rect:function(a){return K1(a.range)},polygon:function(a){for(var r,t=a.range,i=0,s=t.length;i<s;i++){r=r||[[Infinity,-Infinity],[Infinity,-Infinity]];var l=t[i];l[0]<r[0][0]&&(r[0][0]=l[0]),l[0]>r[0][1]&&(r[0][1]=l[0]),l[1]<r[1][0]&&(r[1][0]=l[1]),l[1]>r[1][1]&&(r[1][1]=l[1])}return r&&K1(r)}};function K1(a){return new ai.a(a[0][0],a[1][0],a[0][1]-a[0][0],a[1][1]-a[1][0])}var jO=function(a){Object(de.b)(r,a);function r(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=r.type,t}return r.prototype.init=function(t,i){this.ecModel=t,this.api=i,this.model,(this._brushController=new Ul(i.getZr())).on("brush",y.bind(this._onBrush,this)).mount()},r.prototype.render=function(t,i,s,l){this.model=t,this._updateController(t,i,s,l)},r.prototype.updateTransform=function(t,i,s,l){X1(i),this._updateController(t,i,s,l)},r.prototype.updateVisual=function(t,i,s,l){this.updateTransform(t,i,s,l)},r.prototype.updateView=function(t,i,s,l){this._updateController(t,i,s,l)},r.prototype._updateController=function(t,i,s,l){(!l||l.$from!==t.id)&&this._brushController.setPanels(t.brushTargetManager.makePanelOpts(s)).enableBrush(t.brushOption).updateCovers(t.areas.slice())},r.prototype.dispose=function(){this._brushController.dispose()},r.prototype._onBrush=function(t){var i=this.model.id,s=this.model.brushTargetManager.setOutputRanges(t.areas,this.ecModel);(!t.isEnd||t.removeOnClick)&&this.api.dispatchAction({type:"brush",brushId:i,areas:y.clone(s),$from:i}),t.isEnd&&this.api.dispatchAction({type:"brushEnd",brushId:i,areas:y.clone(s),$from:i})},r.type="brush",r}(Vn.a),zO=jO,FO="#ddd",VO=function(a){Object(de.b)(r,a);function r(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=r.type,t.areas=[],t.brushOption={},t}return r.prototype.optionUpdated=function(t,i){var s=this.option;!i&&H1(s,t,["inBrush","outOfBrush"]);var l=s.inBrush=s.inBrush||{};s.outOfBrush=s.outOfBrush||{color:FO},l.hasOwnProperty("liftZ")||(l.liftZ=5)},r.prototype.setAreas=function(t){!t||(this.areas=y.map(t,function(i){return k1(this.option,i)},this))},r.prototype.setBrushOption=function(t){this.brushOption=k1(this.option,t),this.brushType=this.brushOption.brushType},r.type="brush",r.dependencies=["geo","grid","xAxis","yAxis","parallel","series"],r.defaultOption={seriesIndex:"all",brushType:"rect",brushMode:"single",transformable:!0,brushStyle:{borderWidth:1,color:"rgba(210,219,238,0.3)",borderColor:"#D2DBEE"},throttleType:"fixRate",throttleDelay:0,removeOnClick:!0,z:1e4},r}(An.a);function k1(a,r){return y.merge({brushType:a.brushType,brushMode:a.brushMode,transformable:a.transformable,brushStyle:new Ye.a(a.brushStyle).getItemStyle(),removeOnClick:a.removeOnClick,z:a.z},r,!0)}var GO=VO,UO=["rect","polygon","lineX","lineY","keep","clear"],HO=function(a){Object(de.b)(r,a);function r(){return a!==null&&a.apply(this,arguments)||this}return r.prototype.render=function(t,i,s){var l,f,h;i.eachComponent({mainType:"brush"},function(d){l=d.brushType,f=d.brushOption.brushMode||"single",h=h||!!d.areas.length}),this._brushType=l,this._brushMode=f,y.each(t.get("type",!0),function(d){t.setIconStatus(d,(d==="keep"?f==="multiple":d==="clear"?h:d===l)?"emphasis":"normal")})},r.prototype.updateView=function(t,i,s){this.render(t,i,s)},r.prototype.getIcons=function(){var t=this.model,i=t.get("icon",!0),s={};return y.each(t.get("type",!0),function(l){i[l]&&(s[l]=i[l])}),s},r.prototype.onclick=function(t,i,s){var l=this._brushType,f=this._brushMode;s==="clear"?(i.dispatchAction({type:"axisAreaSelect",intervals:[]}),i.dispatchAction({type:"brush",command:"clear",areas:[]})):i.dispatchAction({type:"takeGlobalCursor",key:"brush",brushOption:{brushType:s==="keep"?l:l===s?!1:s,brushMode:s==="keep"?f==="multiple"?"single":"multiple":f}})},r.getDefaultOption=function(t){var i={show:!0,type:UO.slice(),icon:{rect:"M7.3,34.7 M0.4,10V-0.2h9.8 M89.6,10V-0.2h-9.8 M0.4,60v10.2h9.8 M89.6,60v10.2h-9.8 M12.3,22.4V10.5h13.1 M33.6,10.5h7.8 M49.1,10.5h7.8 M77.5,22.4V10.5h-13 M12.3,31.1v8.2 M77.7,31.1v8.2 M12.3,47.6v11.9h13.1 M33.6,59.5h7.6 M49.1,59.5 h7.7 M77.5,47.6v11.9h-13",polygon:"M55.2,34.9c1.7,0,3.1,1.4,3.1,3.1s-1.4,3.1-3.1,3.1 s-3.1-1.4-3.1-3.1S53.5,34.9,55.2,34.9z M50.4,51c1.7,0,3.1,1.4,3.1,3.1c0,1.7-1.4,3.1-3.1,3.1c-1.7,0-3.1-1.4-3.1-3.1 C47.3,52.4,48.7,51,50.4,51z M55.6,37.1l1.5-7.8 M60.1,13.5l1.6-8.7l-7.8,4 M59,19l-1,5.3 M24,16.1l6.4,4.9l6.4-3.3 M48.5,11.6 l-5.9,3.1 M19.1,12.8L9.7,5.1l1.1,7.7 M13.4,29.8l1,7.3l6.6,1.6 M11.6,18.4l1,6.1 M32.8,41.9 M26.6,40.4 M27.3,40.2l6.1,1.6 M49.9,52.1l-5.6-7.6l-4.9-1.2",lineX:"M15.2,30 M19.7,15.6V1.9H29 M34.8,1.9H40.4 M55.3,15.6V1.9H45.9 M19.7,44.4V58.1H29 M34.8,58.1H40.4 M55.3,44.4 V58.1H45.9 M12.5,20.3l-9.4,9.6l9.6,9.8 M3.1,29.9h16.5 M62.5,20.3l9.4,9.6L62.3,39.7 M71.9,29.9H55.4",lineY:"M38.8,7.7 M52.7,12h13.2v9 M65.9,26.6V32 M52.7,46.3h13.2v-9 M24.9,12H11.8v9 M11.8,26.6V32 M24.9,46.3H11.8v-9 M48.2,5.1l-9.3-9l-9.4,9.2 M38.9-3.9V12 M48.2,53.3l-9.3,9l-9.4-9.2 M38.9,62.3V46.4",keep:"M4,10.5V1h10.3 M20.7,1h6.1 M33,1h6.1 M55.4,10.5V1H45.2 M4,17.3v6.6 M55.6,17.3v6.6 M4,30.5V40h10.3 M20.7,40 h6.1 M33,40h6.1 M55.4,30.5V40H45.2 M21,18.9h62.9v48.6H21V18.9z",clear:"M22,14.7l30.9,31 M52.9,14.7L22,45.7 M4.7,16.8V4.2h13.1 M26,4.2h7.8 M41.6,4.2h7.8 M70.3,16.8V4.2H57.2 M4.7,25.9v8.6 M70.3,25.9v8.6 M4.7,43.2v12.6h13.1 M26,55.8h7.8 M41.6,55.8h7.8 M70.3,43.2v12.6H57.2"},title:t.getLocale(["toolbox","brush","title"])};return i},r}(_a),WO=HO;function YO(a){a.registerComponentView(zO),a.registerComponentModel(GO),a.registerPreprocessor(DO),a.registerVisual(a.PRIORITY.VISUAL.BRUSH,wO),a.registerAction({type:"brush",event:"brush",update:"updateVisual"},function(r,t){t.eachComponent({mainType:"brush",query:r},function(i){i.setAreas(r.areas)})}),a.registerAction({type:"brushSelect",event:"brushSelected",update:"none"},function(){}),a.registerAction({type:"brushEnd",event:"brushEnd",update:"none"},function(){}),sf("brush",WO)}var XO=function(a){Object(de.b)(r,a);function r(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=r.type,t.layoutMode={type:"box",ignoreSize:!0},t}return r.type="title",r.defaultOption={zlevel:0,z:6,show:!0,text:"",target:"blank",subtext:"",subtarget:"blank",left:0,top:0,backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderWidth:0,padding:5,itemGap:10,textStyle:{fontSize:18,fontWeight:"bold",color:"#464646"},subtextStyle:{fontSize:12,color:"#6E7079"}},r}(An.a),ZO=function(a){Object(de.b)(r,a);function r(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=r.type,t}return r.prototype.render=function(t,i,s){if(this.group.removeAll(),!!t.get("show")){var l=this.group,f=t.getModel("textStyle"),h=t.getModel("subtextStyle"),d=t.get("textAlign"),p=y.retrieve2(t.get("textBaseline"),t.get("textVerticalAlign")),m=new en.a({style:Object(Ar.c)(f,{text:t.get("text"),fill:f.getTextColor()},{disableBox:!0}),z2:10}),b=m.getBoundingRect(),A=t.get("subtext"),E=new en.a({style:Object(Ar.c)(h,{text:A,fill:h.getTextColor(),y:b.height+t.get("itemGap"),verticalAlign:"top"},{disableBox:!0}),z2:10}),P=t.get("link"),j=t.get("sublink"),J=t.get("triggerEvent",!0);m.silent=!P&&!J,E.silent=!j&&!J,P&&m.on("click",function(){Object(Pr.l)(P,"_"+t.get("target"))}),j&&E.on("click",function(){Object(Pr.l)(j,"_"+t.get("subtarget"))}),Object(Ur.a)(m).eventData=Object(Ur.a)(E).eventData=J?{componentType:"title",componentIndex:t.componentIndex}:null,l.add(m),A&&l.add(E);var dt=l.getBoundingRect(),St=t.getBoxLayoutParams();St.width=dt.width,St.height=dt.height;var Ot=Object(Tr.g)(St,{width:s.getWidth(),height:s.getHeight()},t.get("padding"));d||(d=t.get("left")||t.get("right"),d==="middle"&&(d="center"),d==="right"?Ot.x+=Ot.width:d==="center"&&(Ot.x+=Ot.width/2)),p||(p=t.get("top")||t.get("bottom"),p==="center"&&(p="middle"),p==="bottom"?Ot.y+=Ot.height:p==="middle"&&(Ot.y+=Ot.height/2),p=p||"top"),l.x=Ot.x,l.y=Ot.y,l.markRedraw();var wt={align:d,verticalAlign:p};m.setStyle(wt),E.setStyle(wt),dt=l.getBoundingRect();var zt=Ot.margin,jt=t.getItemStyle(["color","opacity"]);jt.fill=t.get("backgroundColor");var kt=new nn.a({shape:{x:dt.x-zt[3],y:dt.y-zt[0],width:dt.width+zt[1]+zt[3],height:dt.height+zt[0]+zt[2],r:t.get("borderRadius")},style:jt,subPixelOptimize:!0,silent:!0});l.add(kt)}},r.type="title",r}(Vn.a);function KO(a){a.registerComponentModel(XO),a.registerComponentView(ZO)}var kO=function(a){Object(de.b)(r,a);function r(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=r.type,t.layoutMode="box",t}return r.prototype.init=function(t,i,s){this.mergeDefaultAndTheme(t,s),this._initData()},r.prototype.mergeOption=function(t){a.prototype.mergeOption.apply(this,arguments),this._initData()},r.prototype.setCurrentIndex=function(t){t==null&&(t=this.option.currentIndex);var i=this._data.count();this.option.loop?t=(t%i+i)%i:(t>=i&&(t=i-1),t<0&&(t=0)),this.option.currentIndex=t},r.prototype.getCurrentIndex=function(){return this.option.currentIndex},r.prototype.isIndexMax=function(){return this.getCurrentIndex()>=this._data.count()-1},r.prototype.setPlayState=function(t){this.option.autoPlay=!!t},r.prototype.getPlayState=function(){return!!this.option.autoPlay},r.prototype._initData=function(){var t=this.option,i=t.data||[],s=t.axisType,l=this._names=[],f;s==="category"?(f=[],Object(y.each)(i,function(p,m){var b=Object(sr.e)(Object(sr.h)(p),""),A;Object(y.isObject)(p)?(A=Object(y.clone)(p),A.value=m):A=m,f.push(A),l.push(b)})):f=i;var h={category:"ordinal",time:"time",value:"number"}[s]||"number",d=this._data=new Zn.a([{name:"value",type:h}],this);d.initData(f,l)},r.prototype.getData=function(){return this._data},r.prototype.getCategories=function(){if(this.get("axisType")==="category")return this._names.slice()},r.type="timeline",r.defaultOption={zlevel:0,z:4,show:!0,axisType:"time",realtime:!0,left:"20%",top:null,right:"20%",bottom:0,width:null,height:40,padding:5,controlPosition:"left",autoPlay:!1,rewind:!1,loop:!0,playInterval:2e3,currentIndex:0,itemStyle:{},label:{color:"#000"},data:[]},r}(An.a),Q1=kO,J1=function(a){Object(de.b)(r,a);function r(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=r.type,t}return r.type="timeline.slider",r.defaultOption=Object(ni.d)(Q1.defaultOption,{backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderWidth:0,orient:"horizontal",inverse:!1,tooltip:{trigger:"item"},symbol:"circle",symbolSize:12,lineStyle:{show:!0,width:2,color:"#DAE1F5"},label:{position:"auto",show:!0,interval:"auto",rotate:0,color:"#A4B1D7"},itemStyle:{color:"#A4B1D7",borderWidth:1},checkpointStyle:{symbol:"circle",symbolSize:15,color:"#316bf3",borderColor:"#fff",borderWidth:2,shadowBlur:2,shadowOffsetX:1,shadowOffsetY:1,shadowColor:"rgba(0, 0, 0, 0.3)",animation:!0,animationDuration:300,animationEasing:"quinticInOut"},controlStyle:{show:!0,showPlayBtn:!0,showPrevBtn:!0,showNextBtn:!0,itemSize:24,itemGap:12,position:"left",playIcon:"path://M31.6,53C17.5,53,6,41.5,6,27.4S17.5,1.8,31.6,1.8C45.7,1.8,57.2,13.3,57.2,27.4S45.7,53,31.6,53z M31.6,3.3 C18.4,3.3,7.5,14.1,7.5,27.4c0,13.3,10.8,24.1,24.1,24.1C44.9,51.5,55.7,40.7,55.7,27.4C55.7,14.1,44.9,3.3,31.6,3.3z M24.9,21.3 c0-2.2,1.6-3.1,3.5-2l10.5,6.1c1.899,1.1,1.899,2.9,0,4l-10.5,6.1c-1.9,1.1-3.5,0.2-3.5-2V21.3z",stopIcon:"path://M30.9,53.2C16.8,53.2,5.3,41.7,5.3,27.6S16.8,2,30.9,2C45,2,56.4,13.5,56.4,27.6S45,53.2,30.9,53.2z M30.9,3.5C17.6,3.5,6.8,14.4,6.8,27.6c0,13.3,10.8,24.1,24.101,24.1C44.2,51.7,55,40.9,55,27.6C54.9,14.4,44.1,3.5,30.9,3.5z M36.9,35.8c0,0.601-0.4,1-0.9,1h-1.3c-0.5,0-0.9-0.399-0.9-1V19.5c0-0.6,0.4-1,0.9-1H36c0.5,0,0.9,0.4,0.9,1V35.8z M27.8,35.8 c0,0.601-0.4,1-0.9,1h-1.3c-0.5,0-0.9-0.399-0.9-1V19.5c0-0.6,0.4-1,0.9-1H27c0.5,0,0.9,0.4,0.9,1L27.8,35.8L27.8,35.8z",nextIcon:"M2,18.5A1.52,1.52,0,0,1,.92,18a1.49,1.49,0,0,1,0-2.12L7.81,9.36,1,3.11A1.5,1.5,0,1,1,3,.89l8,7.34a1.48,1.48,0,0,1,.49,1.09,1.51,1.51,0,0,1-.46,1.1L3,18.08A1.5,1.5,0,0,1,2,18.5Z",prevIcon:"M10,.5A1.52,1.52,0,0,1,11.08,1a1.49,1.49,0,0,1,0,2.12L4.19,9.64,11,15.89a1.5,1.5,0,1,1-2,2.22L1,10.77A1.48,1.48,0,0,1,.5,9.68,1.51,1.51,0,0,1,1,8.58L9,.92A1.5,1.5,0,0,1,10,.5Z",prevBtnSize:18,nextBtnSize:18,color:"#A4B1D7",borderColor:"#A4B1D7",borderWidth:1},emphasis:{label:{show:!0,color:"#6f778d"},itemStyle:{color:"#316BF3"},controlStyle:{color:"#316BF3",borderColor:"#316BF3",borderWidth:2}},progress:{lineStyle:{color:"#316BF3"},itemStyle:{color:"#316BF3"},label:{color:"#6f778d"}},data:[]}),r}(Q1);Object(y.mixin)(J1,wd.a.prototype);var QO=J1,JO=function(a){Object(de.b)(r,a);function r(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=r.type,t}return r.type="timeline",r}(Vn.a),$O=JO,qO=function(a){Object(de.b)(r,a);function r(t,i,s,l){var f=a.call(this,t,i,s)||this;return f.type=l||"value",f}return r.prototype.getLabelModel=function(){return this.model.getModel("label")},r.prototype.isHorizontal=function(){return this.model.get("orient")==="horizontal"},r}(Ft.a),tA=qO,eA=S("GMDS"),rA=S("IWp7"),Dy=Math.PI,$1=Object(sr.o)(),nA=function(a){Object(de.b)(r,a);function r(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=r.type,t}return r.prototype.init=function(t,i){this.api=i},r.prototype.render=function(t,i,s){if(this.model=t,this.api=s,this.ecModel=i,this.group.removeAll(),t.get("show",!0)){var l=this._layout(t,s),f=this._createGroup("_mainGroup"),h=this._createGroup("_labelGroup"),d=this._axis=this._createAxis(l,t);t.formatTooltip=function(p){var m=d.scale.getLabel({value:p});return Object(wn.c)("nameValue",{noName:!0,value:m})},Object(y.each)(["AxisLine","AxisTick","Control","CurrentPointer"],function(p){this["_render"+p](l,f,d,t)},this),this._renderAxisLabel(l,h,d,t),this._position(l,t)}this._doPlayStop(),this._updateTicksStatus()},r.prototype.remove=function(){this._clearTimer(),this.group.removeAll()},r.prototype.dispose=function(){this._clearTimer()},r.prototype._layout=function(t,i){var s=t.get(["label","position"]),l=t.get("orient"),f=aA(t,i),h;s==null||s==="auto"?h=l==="horizontal"?f.y+f.height/2<i.getHeight()/2?"-":"+":f.x+f.width/2<i.getWidth()/2?"+":"-":Object(y.isString)(s)?h={horizontal:{top:"-",bottom:"+"},vertical:{left:"-",right:"+"}}[l][s]:h=s;var d={horizontal:"center",vertical:h>=0||h==="+"?"left":"right"},p={horizontal:h>=0||h==="+"?"top":"bottom",vertical:"middle"},m={horizontal:0,vertical:Dy/2},b=l==="vertical"?f.height:f.width,A=t.getModel("controlStyle"),E=A.get("show",!0),P=E?A.get("itemSize"):0,j=E?A.get("itemGap"):0,J=P+j,dt=t.get(["label","rotate"])||0;dt=dt*Dy/180;var St,Ot,wt,zt=A.get("position",!0),jt=E&&A.get("showPlayBtn",!0),kt=E&&A.get("showPrevBtn",!0),te=E&&A.get("showNextBtn",!0),ue=0,me=b;zt==="left"||zt==="bottom"?(jt&&(St=[0,0],ue+=J),kt&&(Ot=[ue,0],ue+=J),te&&(wt=[me-P,0],me-=J)):(jt&&(St=[me-P,0],me-=J),kt&&(Ot=[0,0],ue+=J),te&&(wt=[me-P,0],me-=J));var ve=[ue,me];return t.get("inverse")&&ve.reverse(),{viewRect:f,mainLength:b,orient:l,rotation:m[l],labelRotation:dt,labelPosOpt:h,labelAlign:t.get(["label","align"])||d[l],labelBaseline:t.get(["label","verticalAlign"])||t.get(["label","baseline"])||p[l],playPosition:St,prevBtnPosition:Ot,nextBtnPosition:wt,axisExtent:ve,controlSize:P,controlGap:j}},r.prototype._position=function(t,i){var s=this._mainGroup,l=this._labelGroup,f=t.viewRect;if(t.orient==="vertical"){var h=vn.create(),d=f.x,p=f.y+f.height;vn.translate(h,h,[-d,-p]),vn.rotate(h,h,-Dy/2),vn.translate(h,h,[d,p]),f=f.clone(),f.applyTransform(h)}var m=St(f),b=St(s.getBoundingRect()),A=St(l.getBoundingRect()),E=[s.x,s.y],P=[l.x,l.y];P[0]=E[0]=m[0][0];var j=t.labelPosOpt;if(j==null||Object(y.isString)(j)){var J=j==="+"?0:1;Ot(E,b,m,1,J),Ot(P,A,m,1,1-J)}else{var J=j>=0?0:1;Ot(E,b,m,1,J),P[1]=E[1]+j}s.setPosition(E),l.setPosition(P),s.rotation=l.rotation=t.rotation,dt(s),dt(l);function dt(wt){wt.originX=m[0][0]-wt.x,wt.originY=m[1][0]-wt.y}function St(wt){return[[wt.x,wt.x+wt.width],[wt.y,wt.y+wt.height]]}function Ot(wt,zt,jt,kt,te){wt[kt]+=jt[kt][te]-zt[kt][te]}},r.prototype._createAxis=function(t,i){var s=i.getData(),l=i.get("axisType"),f=iA(i,l);f.getTicks=function(){return s.mapArray(["value"],function(p){return{value:p}})};var h=s.getDataExtent("value");f.setExtent(h[0],h[1]),f.niceTicks();var d=new tA("value",f,t.axisExtent,l);return d.model=i,d},r.prototype._createGroup=function(t){var i=this[t]=new pr.a;return this.group.add(i),i},r.prototype._renderAxisLine=function(t,i,s,l){var f=s.getExtent();if(!!l.get(["lineStyle","show"])){var h=new Ce.a({shape:{x1:f[0],y1:0,x2:f[1],y2:0},style:Object(y.extend)({lineCap:"round"},l.getModel("lineStyle").getLineStyle()),silent:!0,z2:1});i.add(h);var d=this._progressLine=new Ce.a({shape:{x1:f[0],x2:this._currentPointer?this._currentPointer.x:f[0],y1:0,y2:0},style:Object(y.defaults)({lineCap:"round",lineWidth:h.style.lineWidth},l.getModel(["progress","lineStyle"]).getLineStyle()),silent:!0,z2:1});i.add(d)}},r.prototype._renderAxisTick=function(t,i,s,l){var f=this,h=l.getData(),d=s.scale.getTicks();this._tickSymbols=[],Object(y.each)(d,function(p){var m=s.dataToCoord(p.value),b=h.getItemModel(p.value),A=b.getModel("itemStyle"),E=b.getModel(["emphasis","itemStyle"]),P=b.getModel(["progress","itemStyle"]),j={x:m,y:0,onclick:Object(y.bind)(f._changeTimeline,f,p.value)},J=q1(b,A,i,j);J.ensureState("emphasis").style=E.getItemStyle(),J.ensureState("progress").style=P.getItemStyle(),Object(qe.o)(J);var dt=Object(Ur.a)(J);b.get("tooltip")?(dt.dataIndex=p.value,dt.dataModel=l):dt.dataIndex=dt.dataModel=null,f._tickSymbols.push(J)})},r.prototype._renderAxisLabel=function(t,i,s,l){var f=this,h=s.getLabelModel();if(!!h.get("show")){var d=l.getData(),p=s.getViewLabels();this._tickLabels=[],Object(y.each)(p,function(m){var b=m.tickValue,A=d.getItemModel(b),E=A.getModel("label"),P=A.getModel(["emphasis","label"]),j=A.getModel(["progress","label"]),J=s.dataToCoord(m.tickValue),dt=new en.a({x:J,y:0,rotation:t.labelRotation-t.rotation,onclick:Object(y.bind)(f._changeTimeline,f,b),silent:!1,style:Object(Ar.c)(E,{text:m.formattedLabel,align:t.labelAlign,verticalAlign:t.labelBaseline})});dt.ensureState("emphasis").style=Object(Ar.c)(P),dt.ensureState("progress").style=Object(Ar.c)(j),i.add(dt),Object(qe.o)(dt),$1(dt).dataIndex=b,f._tickLabels.push(dt)})}},r.prototype._renderControl=function(t,i,s,l){var f=t.controlSize,h=t.rotation,d=l.getModel("controlStyle").getItemStyle(),p=l.getModel(["emphasis","controlStyle"]).getItemStyle(),m=l.getPlayState(),b=l.get("inverse",!0);A(t.nextBtnPosition,"next",Object(y.bind)(this._changeTimeline,this,b?"-":"+")),A(t.prevBtnPosition,"prev",Object(y.bind)(this._changeTimeline,this,b?"+":"-")),A(t.playPosition,m?"stop":"play",Object(y.bind)(this._handlePlayClick,this,!m),!0);function A(E,P,j,J){if(!!E){var dt=Object(gt.h)(Object(y.retrieve2)(l.get(["controlStyle",P+"BtnSize"]),f),f),St=[0,-dt/2,dt,dt],Ot=oA(l,P+"Icon",St,{x:E[0],y:E[1],originX:f/2,originY:0,rotation:J?-h:0,rectHover:!0,style:d,onclick:j});Ot.ensureState("emphasis").style=p,i.add(Ot),Object(qe.o)(Ot)}}},r.prototype._renderCurrentPointer=function(t,i,s,l){var f=l.getData(),h=l.getCurrentIndex(),d=f.getItemModel(h).getModel("checkpointStyle"),p=this,m={onCreate:function(b){b.draggable=!0,b.drift=Object(y.bind)(p._handlePointerDrag,p),b.ondragend=Object(y.bind)(p._handlePointerDragend,p),tx(b,p._progressLine,h,s,l,!0)},onUpdate:function(b){tx(b,p._progressLine,h,s,l)}};this._currentPointer=q1(d,d,this._mainGroup,{},this._currentPointer,m)},r.prototype._handlePlayClick=function(t){this._clearTimer(),this.api.dispatchAction({type:"timelinePlayChange",playState:t,from:this.uid})},r.prototype._handlePointerDrag=function(t,i,s){this._clearTimer(),this._pointerChangeTimeline([s.offsetX,s.offsetY])},r.prototype._handlePointerDragend=function(t){this._pointerChangeTimeline([t.offsetX,t.offsetY],!0)},r.prototype._pointerChangeTimeline=function(t,i){var s=this._toAxisCoord(t)[0],l=this._axis,f=Ne.b(l.getExtent().slice());s>f[1]&&(s=f[1]),s<f[0]&&(s=f[0]),this._currentPointer.x=s,this._currentPointer.markRedraw(),this._progressLine.shape.x2=s,this._progressLine.dirty();var h=this._findNearestTick(s),d=this.model;(i||h!==d.getCurrentIndex()&&d.get("realtime"))&&this._changeTimeline(h)},r.prototype._doPlayStop=function(){var t=this;this._clearTimer(),this.model.getPlayState()&&(this._timer=setTimeout(function(){var i=t.model;t._changeTimeline(i.getCurrentIndex()+(i.get("rewind",!0)?-1:1))},this.model.get("playInterval")))},r.prototype._toAxisCoord=function(t){var i=this._mainGroup.getLocalTransform();return Ze.applyTransform(t,i,!0)},r.prototype._findNearestTick=function(t){var i=this.model.getData(),s=Infinity,l,f=this._axis;return i.each(["value"],function(h,d){var p=f.dataToCoord(h),m=Math.abs(p-t);m<s&&(s=m,l=d)}),l},r.prototype._clearTimer=function(){this._timer&&(clearTimeout(this._timer),this._timer=null)},r.prototype._changeTimeline=function(t){var i=this.model.getCurrentIndex();t==="+"?t=i+1:t==="-"&&(t=i-1),this.api.dispatchAction({type:"timelineChange",currentIndex:t,from:this.uid})},r.prototype._updateTicksStatus=function(){var t=this.model.getCurrentIndex(),i=this._tickSymbols,s=this._tickLabels;if(i)for(var l=0;l<i.length;l++)i&&i[l]&&i[l].toggleState("progress",l<t);if(s)for(var l=0;l<s.length;l++)s&&s[l]&&s[l].toggleState("progress",$1(s[l]).dataIndex<=t)},r.type="timeline.slider",r}($O);function iA(a,r){if(r=r||a.get("type"),r)switch(r){case"category":return new eA.a({ordinalMeta:a.getCategories(),extent:[Infinity,-Infinity]});case"time":return new rA.a({locale:a.ecModel.getLocaleModel(),useUTC:a.ecModel.get("useUTC")});default:return new ih.a}}function aA(a,r){return Tr.g(a.getBoxLayoutParams(),{width:r.getWidth(),height:r.getHeight()},a.get("padding"))}function oA(a,r,t,i){var s=i.style,l=Ze.createIcon(a.get(["controlStyle",r]),i||{},new ai.a(t[0],t[1],t[2],t[3]));return s&&l.setStyle(s),l}function q1(a,r,t,i,s,l){var f=r.get("color");if(s)s.setColor(f),t.add(s),l&&l.onUpdate(s);else{var h=a.get("symbol");s=Object(lr.a)(h,-1,-1,2,2,f),s.setStyle("strokeNoScale",!0),t.add(s),l&&l.onCreate(s)}var d=r.getItemStyle(["color"]);s.setStyle(d),i=Object(y.merge)({rectHover:!0,z2:100},i,!0);var p=a.get("symbolSize");p=p instanceof Array?p.slice():[+p,+p],i.scaleX=p[0]/2,i.scaleY=p[1]/2;var m=a.get("symbolOffset");m&&(i.x=i.x||0,i.y=i.y||0,i.x+=Ne.o(m[0],p[0]),i.y+=Ne.o(m[1],p[1]));var b=a.get("symbolRotate");return i.rotation=(b||0)*Math.PI/180||0,s.attr(i),s.updateTransform(),s}function tx(a,r,t,i,s,l){if(!a.dragging){var f=s.getModel("checkpointStyle"),h=i.dataToCoord(s.getData().get("value",t));if(l||!f.get("animation",!0))a.attr({x:h,y:0}),r&&r.attr({shape:{x2:h}});else{var d={duration:f.get("animationDuration",!0),easing:f.get("animationEasing",!0)};a.stopAnimation(null,!0),a.animateTo({x:h,y:0},d),r&&r.animateTo({shape:{x2:h}},d)}}}var sA=nA;function lA(a){a.registerAction({type:"timelineChange",event:"timelineChanged",update:"prepareAndUpdate"},function(r,t){var i=t.getComponent("timeline");return i&&r.currentIndex!=null&&(i.setCurrentIndex(r.currentIndex),!i.get("loop",!0)&&i.isIndexMax()&&i.setPlayState(!1)),t.resetOption("timeline",{replaceMerge:i.get("replaceMerge",!0)}),Object(y.defaults)({currentIndex:i.option.currentIndex},r)}),a.registerAction({type:"timelinePlayChange",event:"timelinePlayChanged",update:"update"},function(r,t){var i=t.getComponent("timeline");i&&r.playState!=null&&i.setPlayState(r.playState)})}function uA(a){var r=a&&a.timeline;y.isArray(r)||(r=r?[r]:[]),y.each(r,function(t){!t||fA(t)})}function fA(a){var r=a.type,t={number:"value",time:"time"};if(t[r]&&(a.axisType=t[r],delete a.type),ex(a),$l(a,"controlPosition")){var i=a.controlStyle||(a.controlStyle={});$l(i,"position")||(i.position=a.controlPosition),i.position==="none"&&!$l(i,"show")&&(i.show=!1,delete i.position),delete a.controlPosition}y.each(a.data||[],function(s){y.isObject(s)&&!y.isArray(s)&&(!$l(s,"value")&&$l(s,"name")&&(s.value=s.name),ex(s))})}function ex(a){var r=a.itemStyle||(a.itemStyle={}),t=r.emphasis||(r.emphasis={}),i=a.label||a.label||{},s=i.normal||(i.normal={}),l={normal:1,emphasis:1};y.each(i,function(f,h){!l[h]&&!$l(s,h)&&(s[h]=f)}),t.label&&!$l(i,"emphasis")&&(i.emphasis=t.label,delete t.label)}function $l(a,r){return a.hasOwnProperty(r)}function cA(a){a.registerComponentModel(QO),a.registerComponentView(sA),a.registerSubTypeDefaulter("timeline",function(){return"slider"}),lA(a),a.registerPreprocessor(uA)}function Cy(a,r){if(!a)return!1;for(var t=Object(y.isArray)(a)?a:[a],i=0;i<t.length;i++)if(t[i]&&t[i][r])return!0;return!1}function Rd(a){Object(sr.f)(a,"label",["show"])}var Nd=Object(sr.o)(),rx=function(a){Object(de.b)(r,a);function r(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=r.type,t.createdBySelf=!1,t}return r.prototype.init=function(t,i,s){this.mergeDefaultAndTheme(t,s),this._mergeOption(t,s,!1,!0)},r.prototype.isAnimationEnabled=function(){if(fi.a.node)return!1;var t=this.__hostSeries;return this.getShallow("animation")&&t&&t.isAnimationEnabled()},r.prototype.mergeOption=function(t,i){this._mergeOption(t,i,!1,!1)},r.prototype._mergeOption=function(t,i,s,l){var f=this.mainType;s||i.eachSeries(function(h){var d=h.get(this.mainType,!0),p=Nd(h)[f];if(!d||!d.data){Nd(h)[f]=null;return}p?p._mergeOption(d,i,!0):(l&&Rd(d),y.each(d.data,function(m){m instanceof Array?(Rd(m[0]),Rd(m[1])):Rd(m)}),p=this.createMarkerModelFromSeries(d,this,i),y.extend(p,{mainType:this.mainType,seriesIndex:h.seriesIndex,name:h.name,createdBySelf:!0}),p.__hostSeries=h),Nd(h)[f]=p},this)},r.prototype.formatTooltip=function(t,i,s){var l=this.getData(),f=this.getRawValue(t),h=l.getName(t);return Object(wn.c)("section",{header:this.name,blocks:[Object(wn.c)("nameValue",{name:h,value:f,noName:!h,noValue:f==null})]})},r.prototype.getData=function(){return this._data},r.prototype.setData=function(t){this._data=t},r.getMarkerModelFromSeries=function(t,i){return Nd(t)[i]},r.type="marker",r.dependencies=["series","grid","polar","geo"],r}(An.a);y.mixin(rx,wd.a.prototype);var qs=rx,hA=function(a){Object(de.b)(r,a);function r(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=r.type,t}return r.prototype.createMarkerModelFromSeries=function(t,i,s){return new r(t,i,s)},r.type="markPoint",r.defaultOption={zlevel:0,z:5,symbol:"pin",symbolSize:50,tooltip:{trigger:"item"},label:{show:!0,position:"inside"},itemStyle:{borderWidth:2},emphasis:{label:{show:!0}}},r}(qs),vA=hA;function dA(a){return!(isNaN(parseFloat(a.x))&&isNaN(parseFloat(a.y)))}function pA(a){return!isNaN(parseFloat(a.x))&&!isNaN(parseFloat(a.y))}function Bd(a,r,t,i,s,l){var f=[],h=Object(Te.c)(r,i),d=h?r.getCalculationInfo("stackResultDimension"):i,p=Ly(r,d,a),m=r.indicesOfNearest(d,p)[0];f[s]=r.get(t,m),f[l]=r.get(d,m);var b=r.get(i,m),A=Ne.f(r.get(i,m));return A=Math.min(A,20),A>=0&&(f[l]=+f[l].toFixed(A)),[f,b]}var Ey={min:Object(y.curry)(Bd,"min"),max:Object(y.curry)(Bd,"max"),average:Object(y.curry)(Bd,"average"),median:Object(y.curry)(Bd,"median")};function Yc(a,r){var t=a.getData(),i=a.coordinateSystem;if(r&&!pA(r)&&!Object(y.isArray)(r.coord)&&i){var s=i.dimensions,l=nx(r,t,i,a);if(r=Object(y.clone)(r),r.type&&Ey[r.type]&&l.baseAxis&&l.valueAxis){var f=Object(y.indexOf)(s,l.baseAxis.dim),h=Object(y.indexOf)(s,l.valueAxis.dim),d=Ey[r.type](t,l.baseDataDim,l.valueDataDim,f,h);r.coord=d[0],r.value=d[1]}else{for(var p=[r.xAxis!=null?r.xAxis:r.radiusAxis,r.yAxis!=null?r.yAxis:r.angleAxis],m=0;m<2;m++)Ey[p[m]]&&(p[m]=Ly(t,t.mapDimension(s[m]),p[m]));r.coord=p}}return r}function nx(a,r,t,i){var s={};return a.valueIndex!=null||a.valueDim!=null?(s.valueDataDim=a.valueIndex!=null?r.getDimension(a.valueIndex):a.valueDim,s.valueAxis=t.getAxis(gA(i,s.valueDataDim)),s.baseAxis=t.getOtherAxis(s.valueAxis),s.baseDataDim=r.mapDimension(s.baseAxis.dim)):(s.baseAxis=i.getBaseAxis(),s.valueAxis=t.getOtherAxis(s.baseAxis),s.baseDataDim=r.mapDimension(s.baseAxis.dim),s.valueDataDim=r.mapDimension(s.valueAxis.dim)),s}function gA(a,r){var t=a.getData(),i=t.dimensions;r=t.getDimension(r);for(var s=0;s<i.length;s++){var l=t.getDimensionInfo(i[s]);if(l.name===r)return l.coordDim}}function Xc(a,r){return a&&a.containData&&r.coord&&!dA(r)?a.containData(r.coord):!0}function ix(a,r,t,i){return i<2?a.coord&&a.coord[i]:a.value}function Ly(a,r,t){if(t==="average"){var i=0,s=0;return a.each(r,function(l,f){isNaN(l)||(i+=l,s++)}),i/s}else return t==="median"?a.getMedian(r):a.getDataExtent(r)[t==="max"?1:0]}var Py=Object(sr.o)(),mA=function(a){Object(de.b)(r,a);function r(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=r.type,t}return r.prototype.init=function(){this.markerGroupMap=Object(y.createHashMap)()},r.prototype.render=function(t,i,s){var l=this,f=this.markerGroupMap;f.each(function(h){Py(h).keep=!1}),i.eachSeries(function(h){var d=qs.getMarkerModelFromSeries(h,l.type);d&&l.renderSeries(h,d,i,s)}),f.each(function(h){!Py(h).keep&&l.group.remove(h.group)})},r.prototype.markKeep=function(t){Py(t).keep=!0},r.prototype.blurSeries=function(t){var i=this;Object(y.each)(t,function(s){var l=qs.getMarkerModelFromSeries(s,i.type);if(l){var f=l.getData();f.eachItemGraphicEl(function(h){h&&Object(qe.q)(h)})}})},r.type="marker",r}(Vn.a),wy=mA;function ax(a,r,t){var i=r.coordinateSystem;a.each(function(s){var l=a.getItemModel(s),f,h=Ne.o(l.get("x"),t.getWidth()),d=Ne.o(l.get("y"),t.getHeight());if(!isNaN(h)&&!isNaN(d))f=[h,d];else if(r.getMarkerPosition)f=r.getMarkerPosition(a.getValues(a.dimensions,s));else if(i){var p=a.get(i.dimensions[0],s),m=a.get(i.dimensions[1],s);f=i.dataToPoint([p,m])}isNaN(h)||(f[0]=h),isNaN(d)||(f[1]=d),a.setItemLayout(s,f)})}var yA=function(a){Object(de.b)(r,a);function r(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=r.type,t}return r.prototype.updateTransform=function(t,i,s){i.eachSeries(function(l){var f=qs.getMarkerModelFromSeries(l,"markPoint");f&&(ax(f.getData(),l,s),this.markerGroupMap.get(l.id).updateLayout())},this)},r.prototype.renderSeries=function(t,i,s,l){var f=t.coordinateSystem,h=t.id,d=t.getData(),p=this.markerGroupMap,m=p.get(h)||p.set(h,new Er),b=xA(f,t,i);i.setData(b),ax(i.getData(),t,l),b.each(function(A){var E=b.getItemModel(A),P=E.getShallow("symbol"),j=E.getShallow("symbolSize"),J=E.getShallow("symbolRotate");if(Object(y.isFunction)(P)||Object(y.isFunction)(j)||Object(y.isFunction)(J)){var dt=i.getRawValue(A),St=i.getDataParams(A);Object(y.isFunction)(P)&&(P=P(dt,St)),Object(y.isFunction)(j)&&(j=j(dt,St)),Object(y.isFunction)(J)&&(J=J(dt,St))}var Ot=E.getModel("itemStyle").getItemStyle(),wt=Object($s.b)(d,"color");Ot.fill||(Ot.fill=wt),b.setItemVisual(A,{symbol:P,symbolSize:j,symbolRotate:J,style:Ot})}),m.updateData(b),this.group.add(m.group),b.eachItemGraphicEl(function(A){A.traverse(function(E){Object(Ur.a)(E).dataModel=i})}),this.markKeep(m),m.group.silent=i.get("silent")||t.get("silent")},r.type="markPoint",r}(wy);function xA(a,r,t){var i;a?i=Object(y.map)(a&&a.dimensions,function(f){var h=r.getData().getDimensionInfo(r.getData().mapDimension(f))||{};return Object(y.defaults)({name:f},h)}):i=[{name:"value",type:"float"}];var s=new Zn.a(i,t),l=Object(y.map)(t.get("data"),Object(y.curry)(Yc,r));return a&&(l=Object(y.filter)(l,Object(y.curry)(Xc,a))),s.initData(l,null,a?ix:function(f){return f.value}),s}var bA=yA;function SA(a){a.registerComponentModel(vA),a.registerComponentView(bA),a.registerPreprocessor(function(r){Cy(r.series,"markPoint")&&(r.markPoint=r.markPoint||{})})}var _A=function(a){Object(de.b)(r,a);function r(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=r.type,t}return r.prototype.createMarkerModelFromSeries=function(t,i,s){return new r(t,i,s)},r.type="markLine",r.defaultOption={zlevel:0,z:5,symbol:["circle","arrow"],symbolSize:[8,16],symbolOffset:0,precision:2,tooltip:{trigger:"item"},label:{show:!0,position:"end",distance:5},lineStyle:{type:"dashed"},emphasis:{label:{show:!0},lineStyle:{width:3}},animationEasing:"linear"},r}(qs),TA=_A,jd=Object(sr.o)(),OA=function(a,r,t,i){var s=a.getData(),l;if(Object(y.isArray)(i))l=i;else{var f=i.type;if(f==="min"||f==="max"||f==="average"||f==="median"||i.xAxis!=null||i.yAxis!=null){var h=void 0,d=void 0;if(i.yAxis!=null||i.xAxis!=null)h=r.getAxis(i.yAxis!=null?"y":"x"),d=Object(y.retrieve)(i.yAxis,i.xAxis);else{var p=nx(i,s,r,a);h=p.valueAxis;var m=Object(Te.b)(s,p.valueDataDim);d=Ly(s,m,f)}var b=h.dim==="x"?0:1,A=1-b,E=Object(y.clone)(i),P={coord:[]};E.type=null,E.coord=[],E.coord[A]=-Infinity,P.coord[A]=Infinity;var j=t.get("precision");j>=0&&typeof d=="number"&&(d=+d.toFixed(Math.min(j,20))),E.coord[b]=P.coord[b]=d,l=[E,P,{type:f,valueIndex:i.valueIndex,value:d}]}else l=[]}var J=[Yc(a,l[0]),Yc(a,l[1]),Object(y.extend)({},l[2])];return J[2].type=J[2].type||null,Object(y.merge)(J[2],J[0]),Object(y.merge)(J[2],J[1]),J};function zd(a){return!isNaN(a)&&!isFinite(a)}function ox(a,r,t,i){var s=1-a,l=i.dimensions[a];return zd(r[s])&&zd(t[s])&&r[a]===t[a]&&i.getAxis(l).containData(r[a])}function AA(a,r){if(a.type==="cartesian2d"){var t=r[0].coord,i=r[1].coord;if(t&&i&&(ox(1,t,i,a)||ox(0,t,i,a)))return!0}return Xc(a,r[0])&&Xc(a,r[1])}function Iy(a,r,t,i,s){var l=i.coordinateSystem,f=a.getItemModel(r),h,d=Ne.o(f.get("x"),s.getWidth()),p=Ne.o(f.get("y"),s.getHeight());if(!isNaN(d)&&!isNaN(p))h=[d,p];else{if(i.getMarkerPosition)h=i.getMarkerPosition(a.getValues(a.dimensions,r));else{var m=l.dimensions,b=a.get(m[0],r),A=a.get(m[1],r);h=l.dataToPoint([b,A])}if(Fr(l,"cartesian2d")){var E=l.getAxis("x"),P=l.getAxis("y"),m=l.dimensions;zd(a.get(m[0],r))?h[0]=E.toGlobalCoord(E.getExtent()[t?0:1]):zd(a.get(m[1],r))&&(h[1]=P.toGlobalCoord(P.getExtent()[t?0:1]))}isNaN(d)||(h[0]=d),isNaN(p)||(h[1]=p)}a.setItemLayout(r,h)}var MA=function(a){Object(de.b)(r,a);function r(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=r.type,t}return r.prototype.updateTransform=function(t,i,s){i.eachSeries(function(l){var f=qs.getMarkerModelFromSeries(l,"markLine");if(f){var h=f.getData(),d=jd(f).from,p=jd(f).to;d.each(function(m){Iy(d,m,!0,l,s),Iy(p,m,!1,l,s)}),h.each(function(m){h.setItemLayout(m,[d.getItemLayout(m),p.getItemLayout(m)])}),this.markerGroupMap.get(l.id).updateLayout()}},this)},r.prototype.renderSeries=function(t,i,s,l){var f=t.coordinateSystem,h=t.id,d=t.getData(),p=this.markerGroupMap,m=p.get(h)||p.set(h,new zs);this.group.add(m.group);var b=DA(f,t,i),A=b.from,E=b.to,P=b.line;jd(i).from=A,jd(i).to=E,i.setData(P);var j=i.get("symbol"),J=i.get("symbolSize"),dt=i.get("symbolRotate"),St=i.get("symbolOffset");Object(y.isArray)(j)||(j=[j,j]),Object(y.isArray)(J)||(J=[J,J]),Object(y.isArray)(dt)||(dt=[dt,dt]),Object(y.isArray)(St)||(St=[St,St]),b.from.each(function(wt){Ot(A,wt,!0),Ot(E,wt,!1)}),P.each(function(wt){var zt=P.getItemModel(wt).getModel("lineStyle").getLineStyle();P.setItemLayout(wt,[A.getItemLayout(wt),E.getItemLayout(wt)]),zt.stroke==null&&(zt.stroke=A.getItemVisual(wt,"style").fill),P.setItemVisual(wt,{fromSymbolKeepAspect:A.getItemVisual(wt,"symbolKeepAspect"),fromSymbolOffset:A.getItemVisual(wt,"symbolOffset"),fromSymbolRotate:A.getItemVisual(wt,"symbolRotate"),fromSymbolSize:A.getItemVisual(wt,"symbolSize"),fromSymbol:A.getItemVisual(wt,"symbol"),toSymbolKeepAspect:E.getItemVisual(wt,"symbolKeepAspect"),toSymbolOffset:E.getItemVisual(wt,"symbolOffset"),toSymbolRotate:E.getItemVisual(wt,"symbolRotate"),toSymbolSize:E.getItemVisual(wt,"symbolSize"),toSymbol:E.getItemVisual(wt,"symbol"),style:zt})}),m.updateData(P),b.line.eachItemGraphicEl(function(wt,zt){wt.traverse(function(jt){Object(Ur.a)(jt).dataModel=i})});function Ot(wt,zt,jt){var kt=wt.getItemModel(zt);Iy(wt,zt,jt,t,l);var te=kt.getModel("itemStyle").getItemStyle();te.fill==null&&(te.fill=Object($s.b)(d,"color")),wt.setItemVisual(zt,{symbolKeepAspect:kt.get("symbolKeepAspect"),symbolOffset:Object(y.retrieve2)(kt.get("symbolOffset"),St[jt?0:1]),symbolRotate:Object(y.retrieve2)(kt.get("symbolRotate",!0),dt[jt?0:1]),symbolSize:Object(y.retrieve2)(kt.get("symbolSize"),J[jt?0:1]),symbol:Object(y.retrieve2)(kt.get("symbol",!0),j[jt?0:1]),style:te})}this.markKeep(m),m.group.silent=i.get("silent")||t.get("silent")},r.type="markLine",r}(wy);function DA(a,r,t){var i;a?i=Object(y.map)(a&&a.dimensions,function(p){var m=r.getData().getDimensionInfo(r.getData().mapDimension(p))||{};return Object(y.defaults)({name:p},m)}):i=[{name:"value",type:"float"}];var s=new Zn.a(i,t),l=new Zn.a(i,t),f=new Zn.a([],t),h=Object(y.map)(t.get("data"),Object(y.curry)(OA,r,a,t));a&&(h=Object(y.filter)(h,Object(y.curry)(AA,a)));var d=a?ix:function(p){return p.value};return s.initData(Object(y.map)(h,function(p){return p[0]}),null,d),l.initData(Object(y.map)(h,function(p){return p[1]}),null,d),f.initData(Object(y.map)(h,function(p){return p[2]})),f.hasItemOption=!0,{from:s,to:l,line:f}}var CA=MA;function EA(a){a.registerComponentModel(TA),a.registerComponentView(CA),a.registerPreprocessor(function(r){Cy(r.series,"markLine")&&(r.markLine=r.markLine||{})})}var LA=function(a){Object(de.b)(r,a);function r(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=r.type,t}return r.prototype.createMarkerModelFromSeries=function(t,i,s){return new r(t,i,s)},r.type="markArea",r.defaultOption={zlevel:0,z:1,tooltip:{trigger:"item"},animation:!1,label:{show:!0,position:"top"},itemStyle:{borderWidth:0},emphasis:{label:{show:!0,position:"top"}}},r}(qs),PA=LA,Fd=Object(sr.o)(),wA=function(a,r,t,i){var s=Yc(a,i[0]),l=Yc(a,i[1]),f=s.coord,h=l.coord;f[0]=Object(y.retrieve)(f[0],-Infinity),f[1]=Object(y.retrieve)(f[1],-Infinity),h[0]=Object(y.retrieve)(h[0],Infinity),h[1]=Object(y.retrieve)(h[1],Infinity);var d=Object(y.mergeAll)([{},s,l]);return d.coord=[s.coord,l.coord],d.x0=s.x,d.y0=s.y,d.x1=l.x,d.y1=l.y,d};function Vd(a){return!isNaN(a)&&!isFinite(a)}function sx(a,r,t,i){var s=1-a;return Vd(r[s])&&Vd(t[s])}function IA(a,r){var t=r.coord[0],i=r.coord[1];return Fr(a,"cartesian2d")&&t&&i&&(sx(1,t,i,a)||sx(0,t,i,a))?!0:Xc(a,{coord:t,x:r.x0,y:r.y0})||Xc(a,{coord:i,x:r.x1,y:r.y1})}function lx(a,r,t,i,s){var l=i.coordinateSystem,f=a.getItemModel(r),h,d=Ne.o(f.get(t[0]),s.getWidth()),p=Ne.o(f.get(t[1]),s.getHeight());if(!isNaN(d)&&!isNaN(p))h=[d,p];else{if(i.getMarkerPosition)h=i.getMarkerPosition(a.getValues(t,r));else{var m=a.get(t[0],r),b=a.get(t[1],r),A=[m,b];l.clampData&&l.clampData(A,A),h=l.dataToPoint(A,!0)}if(Fr(l,"cartesian2d")){var E=l.getAxis("x"),P=l.getAxis("y"),m=a.get(t[0],r),b=a.get(t[1],r);Vd(m)?h[0]=E.toGlobalCoord(E.getExtent()[t[0]==="x0"?0:1]):Vd(b)&&(h[1]=P.toGlobalCoord(P.getExtent()[t[1]==="y0"?0:1]))}isNaN(d)||(h[0]=d),isNaN(p)||(h[1]=p)}return h}var ux=[["x0","y0"],["x1","y0"],["x1","y1"],["x0","y1"]],RA=function(a){Object(de.b)(r,a);function r(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=r.type,t}return r.prototype.updateTransform=function(t,i,s){i.eachSeries(function(l){var f=qs.getMarkerModelFromSeries(l,"markArea");if(f){var h=f.getData();h.each(function(d){var p=Object(y.map)(ux,function(b){return lx(h,d,b,l,s)});h.setItemLayout(d,p);var m=h.getItemGraphicEl(d);m.setShape("points",p)})}},this)},r.prototype.renderSeries=function(t,i,s,l){var f=t.coordinateSystem,h=t.id,d=t.getData(),p=this.markerGroupMap,m=p.get(h)||p.set(h,{group:new pr.a});this.group.add(m.group),this.markKeep(m);var b=NA(f,t,i);i.setData(b),b.each(function(A){var E=Object(y.map)(ux,function(te){return lx(b,A,te,t,l)}),P=f.getAxis("x").scale,j=f.getAxis("y").scale,J=P.getExtent(),dt=j.getExtent(),St=[P.parse(b.get("x0",A)),P.parse(b.get("x1",A))],Ot=[j.parse(b.get("y0",A)),j.parse(b.get("y1",A))];Ne.b(St),Ne.b(Ot);var wt=!(J[0]>St[1]||J[1]<St[0]||dt[0]>Ot[1]||dt[1]<Ot[0]),zt=!wt;b.setItemLayout(A,{points:E,allClipped:zt});var jt=b.getItemModel(A).getModel("itemStyle").getItemStyle(),kt=Object($s.b)(d,"color");jt.fill||(jt.fill=kt,typeof jt.fill=="string"&&(jt.fill=Ct.modifyAlpha(jt.fill,.4))),jt.stroke||(jt.stroke=kt),b.setItemVisual(A,"style",jt)}),b.diff(Fd(m).data).add(function(A){var E=b.getItemLayout(A);if(!E.allClipped){var P=new Hi.a({shape:{points:E.points}});b.setItemGraphicEl(A,P),m.group.add(P)}}).update(function(A,E){var P=Fd(m).data.getItemGraphicEl(E),j=b.getItemLayout(A);j.allClipped?P&&m.group.remove(P):(P?Ze.updateProps(P,{shape:{points:j.points}},i,A):P=new Hi.a({shape:{points:j.points}}),b.setItemGraphicEl(A,P),m.group.add(P))}).remove(function(A){var E=Fd(m).data.getItemGraphicEl(A);m.group.remove(E)}).execute(),b.eachItemGraphicEl(function(A,E){var P=b.getItemModel(E),j=b.getItemVisual(E,"style");A.useStyle(b.getItemVisual(E,"style")),Object(Ar.h)(A,Object(Ar.f)(P),{labelFetcher:i,labelDataIndex:E,defaultText:b.getName(E)||"",inheritColor:typeof j.fill=="string"?Ct.modifyAlpha(j.fill,1):"#000"}),Object(qe.I)(A,P),Object(qe.o)(A),Object(Ur.a)(A).dataModel=i}),Fd(m).data=b,m.group.silent=i.get("silent")||t.get("silent")},r.type="markArea",r}(wy);function NA(a,r,t){var i,s,l=["x0","y0","x1","y1"];a?(i=Object(y.map)(a&&a.dimensions,function(d){var p=r.getData(),m=p.getDimensionInfo(p.mapDimension(d))||{};return Object(y.defaults)({name:d},m)}),s=new Zn.a(Object(y.map)(l,function(d,p){return{name:d,type:i[p%2].type}}),t)):(i=[{name:"value",type:"float"}],s=new Zn.a(i,t));var f=Object(y.map)(t.get("data"),Object(y.curry)(wA,r,a,t));a&&(f=Object(y.filter)(f,Object(y.curry)(IA,a)));var h=a?function(d,p,m,b){return d.coord[Math.floor(b/2)][b%2]}:function(d){return d.value};return s.initData(f,null,h),s.hasItemOption=!0,s}var BA=RA;function jA(a){a.registerComponentModel(PA),a.registerComponentView(BA),a.registerPreprocessor(function(r){Cy(r.series,"markArea")&&(r.markArea=r.markArea||{})})}var zA=function(a,r){if(r==="all")return{type:"all",title:a.getLocale(["legend","selector","all"])};if(r==="inverse")return{type:"inverse",title:a.getLocale(["legend","selector","inverse"])}},FA=function(a){Object(de.b)(r,a);function r(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=r.type,t.layoutMode={type:"box",ignoreSize:!0},t}return r.prototype.init=function(t,i,s){this.mergeDefaultAndTheme(t,s),t.selected=t.selected||{},this._updateSelector(t)},r.prototype.mergeOption=function(t,i){a.prototype.mergeOption.call(this,t,i),this._updateSelector(t)},r.prototype._updateSelector=function(t){var i=t.selector,s=this.ecModel;i===!0&&(i=t.selector=["all","inverse"]),y.isArray(i)&&y.each(i,function(l,f){y.isString(l)&&(l={type:l}),i[f]=y.merge(l,zA(s,l.type))})},r.prototype.optionUpdated=function(){this._updateData(this.ecModel);var t=this._data;if(t[0]&&this.get("selectedMode")==="single"){for(var i=!1,s=0;s<t.length;s++){var l=t[s].get("name");if(this.isSelected(l)){this.select(l),i=!0;break}}!i&&this.select(t[0].get("name"))}},r.prototype._updateData=function(t){var i=[],s=[];t.eachRawSeries(function(h){var d=h.name;s.push(d);var p;if(h.legendVisualProvider){var m=h.legendVisualProvider,b=m.getAllNames();t.isSeriesFiltered(h)||(s=s.concat(b)),b.length?i=i.concat(b):p=!0}else p=!0;p&&Object(sr.n)(h)&&i.push(h.name)}),this._availableNames=s;var l=this.get("data")||i,f=y.map(l,function(h){return(typeof h=="string"||typeof h=="number")&&(h={name:h}),new Ye.a(h,this,this.ecModel)},this);this._data=f},r.prototype.getData=function(){return this._data},r.prototype.select=function(t){var i=this.option.selected,s=this.get("selectedMode");if(s==="single"){var l=this._data;y.each(l,function(f){i[f.get("name")]=!1})}i[t]=!0},r.prototype.unSelect=function(t){this.get("selectedMode")!=="single"&&(this.option.selected[t]=!1)},r.prototype.toggleSelected=function(t){var i=this.option.selected;i.hasOwnProperty(t)||(i[t]=!0),this[i[t]?"unSelect":"select"](t)},r.prototype.allSelect=function(){var t=this._data,i=this.option.selected;y.each(t,function(s){i[s.get("name",!0)]=!0})},r.prototype.inverseSelect=function(){var t=this._data,i=this.option.selected;y.each(t,function(s){var l=s.get("name",!0);i.hasOwnProperty(l)||(i[l]=!0),i[l]=!i[l]})},r.prototype.isSelected=function(t){var i=this.option.selected;return!(i.hasOwnProperty(t)&&!i[t])&&y.indexOf(this._availableNames,t)>=0},r.prototype.getOrient=function(){return this.get("orient")==="vertical"?{index:1,name:"vertical"}:{index:0,name:"horizontal"}},r.type="legend.plain",r.dependencies=["series"],r.defaultOption={zlevel:0,z:4,show:!0,orient:"horizontal",left:"center",top:0,align:"auto",backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderRadius:0,borderWidth:0,padding:5,itemGap:10,itemWidth:25,itemHeight:14,symbolSize:"auto",inactiveColor:"#ccc",inactiveBorderColor:"#ccc",inactiveBorderWidth:"auto",itemStyle:{color:"inherit",opacity:"inherit",decal:"inherit",shadowBlur:0,shadowColor:null,shadowOffsetX:0,shadowOffsetY:0,borderColor:"inherit",borderWidth:"auto",borderCap:"inherit",borderJoin:"inherit",borderDashOffset:"inherit",borderMiterLimit:"inherit"},lineStyle:{width:"auto",color:"inherit",inactiveColor:"#ccc",inactiveWidth:2,opacity:"inherit",type:"inherit",cap:"inherit",join:"inherit",dashOffset:"inherit",miterLimit:"inherit",shadowBlur:0,shadowColor:null,shadowOffsetX:0,shadowOffsetY:0},textStyle:{color:"#333"},selectedMode:!0,selector:!1,selectorLabel:{show:!0,borderRadius:10,padding:[3,5,3,5],fontSize:12,fontFamily:" sans-serif",color:"#666",borderWidth:1,borderColor:"#666"},emphasis:{selectorLabel:{show:!0,color:"#eee",backgroundColor:"#666"}},selectorPosition:"auto",selectorItemGap:7,selectorButtonGap:10,tooltip:{show:!1}},r}(An.a),Ry=FA,VA=S("OQFs"),GA=S("VR9l"),uf=y.curry,fx=y.each,Gd=pr.a,UA=function(a){Object(de.b)(r,a);function r(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=r.type,t.newlineDisabled=!1,t}return r.prototype.init=function(){this.group.add(this._contentGroup=new Gd),this.group.add(this._selectorGroup=new Gd),this._isFirstRender=!0},r.prototype.getContentGroup=function(){return this._contentGroup},r.prototype.getSelectorGroup=function(){return this._selectorGroup},r.prototype.render=function(t,i,s){var l=this._isFirstRender;if(this._isFirstRender=!1,this.resetInner(),!!t.get("show",!0)){var f=t.get("align"),h=t.get("orient");(!f||f==="auto")&&(f=t.get("left")==="right"&&h==="vertical"?"right":"left");var d=t.get("selector",!0),p=t.get("selectorPosition",!0);d&&(!p||p==="auto")&&(p=h==="horizontal"?"end":"start"),this.renderInner(f,t,i,s,d,h,p);var m=t.getBoxLayoutParams(),b={width:s.getWidth(),height:s.getHeight()},A=t.get("padding"),E=Tr.g(m,b,A),P=this.layoutInner(t,f,E,l,d,p),j=Tr.g(y.defaults({width:P.width,height:P.height},m),b,A);this.group.x=j.x-P.x,this.group.y=j.y-P.y,this.group.markRedraw(),this.group.add(this._backgroundEl=p1(P,t))}},r.prototype.resetInner=function(){this.getContentGroup().removeAll(),this._backgroundEl&&this.group.remove(this._backgroundEl),this.getSelectorGroup().removeAll()},r.prototype.renderInner=function(t,i,s,l,f,h,d){var p=this.getContentGroup(),m=y.createHashMap(),b=i.get("selectedMode"),A=[];s.eachRawSeries(function(E){!E.get("legendHoverLink")&&A.push(E.id)}),fx(i.getData(),function(E,P){var j=E.get("name");if(!this.newlineDisabled&&(j===""||j===`
`)){var J=new Gd;J.newline=!0,p.add(J);return}var dt=s.getSeriesByName(j)[0];if(!m.get(j))if(dt){var St=dt.getData(),Ot=St.getVisual("legendLineStyle")||{},wt=St.getVisual("legendSymbol"),zt=St.getVisual("style");St.getVisual("symbolSize");var jt=this._createItem(dt,j,P,E,i,t,Ot,zt,wt,b);jt.on("click",uf(cx,j,null,l,A)).on("mouseover",uf(Ny,dt.name,null,l,A)).on("mouseout",uf(By,dt.name,null,l,A)),m.set(j,!0)}else s.eachRawSeries(function(kt){if(!m.get(j)&&kt.legendVisualProvider){var te=kt.legendVisualProvider;if(!te.containName(j))return;var ue=te.indexOfName(j),me=te.getItemVisual(ue,"style"),ve=te.getItemVisual(ue,"legendSymbol"),Me=Object(Ct.parse)(me.fill);Me&&Me[3]===0&&(Me[3]=.2,me.fill=Object(Ct.stringify)(Me,"rgba"));var Ee=this._createItem(kt,j,P,E,i,t,{},me,ve,b);Ee.on("click",uf(cx,null,j,l,A)).on("mouseover",uf(Ny,null,j,l,A)).on("mouseout",uf(By,null,j,l,A)),m.set(j,!0)}},this)},this),f&&this._createSelector(f,i,l,h,d)},r.prototype._createSelector=function(t,i,s,l,f){var h=this.getSelectorGroup();fx(t,function(p){var m=p.type,b=new en.a({style:{x:0,y:0,align:"center",verticalAlign:"middle"},onclick:function(){s.dispatchAction({type:m==="all"?"legendAllSelect":"legendInverseSelect"})}});h.add(b);var A=i.getModel("selectorLabel"),E=i.getModel(["emphasis","selectorLabel"]);Object(Ar.h)(b,{normal:A,emphasis:E},{defaultText:p.title}),Object(qe.o)(b)})},r.prototype._createItem=function(t,i,s,l,f,h,d,p,m,b){var A=t.visualDrawType,E=f.get("itemWidth"),P=f.get("itemHeight"),j=f.isSelected(i),J=l.get("symbolKeepAspect"),dt=l.get("icon");m=dt||m||"roundRect";var St=f.getModel("lineStyle"),Ot=HA(m,l,St,d,p,A,j),wt=new Gd,zt=l.getModel("textStyle");typeof t.getLegendIcon=="function"&&!dt?wt.add(t.getLegendIcon({itemWidth:E,itemHeight:P,symbolType:m,symbolKeepAspect:J,itemStyle:Ot.itemStyle,lineStyle:Ot.lineStyle})):wt.add(WA({itemWidth:E,itemHeight:P,symbolType:m,symbolKeepAspect:J,itemStyle:Ot.itemStyle,lineStyle:Ot.lineStyle}));var jt=h==="left"?E+5:-5,kt=h,te=f.get("formatter"),ue=i;typeof te=="string"&&te?ue=te.replace("{name}",i!=null?i:""):typeof te=="function"&&(ue=te(i));var me=l.get("inactiveColor");wt.add(new en.a({style:Object(Ar.c)(zt,{text:ue,x:jt,y:P/2,fill:j?zt.getTextColor():me,align:kt,verticalAlign:"middle"})}));var ve=new nn.a({shape:wt.getBoundingRect(),invisible:!0}),Me=l.getModel("tooltip");return Me.get("show")&&Ze.setTooltipConfig({el:ve,componentModel:f,itemName:i,itemTooltipOption:Me.option}),wt.add(ve),wt.eachChild(function(Ee){Ee.silent=!0}),ve.silent=!b,this.getContentGroup().add(wt),Object(qe.o)(wt),wt.__legendDataIndex=s,wt},r.prototype.layoutInner=function(t,i,s,l,f,h){var d=this.getContentGroup(),p=this.getSelectorGroup();Tr.b(t.get("orient"),d,t.get("itemGap"),s.width,s.height);var m=d.getBoundingRect(),b=[-m.x,-m.y];if(p.markRedraw(),d.markRedraw(),f){Tr.b("horizontal",p,t.get("selectorItemGap",!0));var A=p.getBoundingRect(),E=[-A.x,-A.y],P=t.get("selectorButtonGap",!0),j=t.getOrient().index,J=j===0?"width":"height",dt=j===0?"height":"width",St=j===0?"y":"x";h==="end"?E[j]+=m[J]+P:b[j]+=A[J]+P,E[1-j]+=m[dt]/2-A[dt]/2,p.x=E[0],p.y=E[1],d.x=b[0],d.y=b[1];var Ot={x:0,y:0};return Ot[J]=m[J]+P+A[J],Ot[dt]=Math.max(m[dt],A[dt]),Ot[St]=Math.min(0,A[St]+E[1-j]),Ot}else return d.x=b[0],d.y=b[1],this.group.getBoundingRect()},r.prototype.remove=function(){this.getContentGroup().removeAll(),this._isFirstRender=!0},r.type="legend.plain",r}(Vn.a);function HA(a,r,t,i,s,l,f){for(var h=r.getModel("itemStyle"),d=GA.a.concat([["decal"]]),p={},m=0;m<d.length;++m){var b=d[m][d[m].length-1],A=d[m][0],E=h.getShallow(b);if(E==="inherit")switch(A){case"fill":p.fill=s[l];break;case"stroke":p.stroke=s[a.startsWith("empty")?"fill":"stroke"];break;case"opacity":p.opacity=(l==="fill"?s:i).opacity;break;default:p[A]=s[A]}else E==="auto"&&A==="lineWidth"?p.lineWidth=s.lineWidth>0?2:0:p[A]=E}for(var P=r.getModel("lineStyle"),j=VA.a.concat([["inactiveColor"],["inactiveWidth"]]),J={},m=0;m<j.length;++m){var b=j[m][1],A=j[m][0],E=P.getShallow(b);E==="inherit"?J[A]=i[A]:E==="auto"&&A==="lineWidth"?J.lineWidth=i.lineWidth>0?2:0:J[A]=E}if(p.fill==="auto"&&(p.fill=s.fill),p.stroke==="auto"&&(p.stroke=s.fill),J.stroke==="auto"&&(J.stroke=s.fill),!f){var dt=r.get("inactiveBorderWidth"),St=p[a.indexOf("empty")>-1?"fill":"stroke"];p.lineWidth=dt==="auto"?s.lineWidth>0&&St?2:0:p.lineWidth,p.fill=r.get("inactiveColor"),p.stroke=r.get("inactiveBorderColor"),J.stroke=t.get("inactiveColor"),J.lineWidth=t.get("inactiveWidth")}return{itemStyle:p,lineStyle:J}}function WA(a){var r=a.symbolType||"roundRect",t=Object(lr.a)(r,0,0,a.itemWidth,a.itemHeight,a.itemStyle.fill,a.symbolKeepAspect);return t.setStyle(a.itemStyle),r.indexOf("empty")>-1&&(t.style.stroke=t.style.fill,t.style.fill="#fff",t.style.lineWidth=2),t}function cx(a,r,t,i){By(a,r,t,i),t.dispatchAction({type:"legendToggleSelect",name:a!=null?a:r}),Ny(a,r,t,i)}function hx(a){for(var r=a.getZr().storage.getDisplayList(),t,i=0,s=r.length;i<s&&!(t=r[i].states.emphasis);)i++;return t&&t.hoverLayer}function Ny(a,r,t,i){hx(t)||t.dispatchAction({type:"highlight",seriesName:a,name:r,excludeSeriesId:i})}function By(a,r,t,i){hx(t)||t.dispatchAction({type:"downplay",seriesName:a,name:r,excludeSeriesId:i})}var vx=UA;function YA(a){var r=a.findComponents({mainType:"legend"});r&&r.length&&a.filterSeries(function(t){for(var i=0;i<r.length;i++)if(!r[i].isSelected(t.name))return!1;return!0})}function Zc(a,r,t){var i={},s=a==="toggleSelected",l;return t.eachComponent("legend",function(f){s&&l!=null?f[l?"select":"unSelect"](r.name):a==="allSelect"||a==="inverseSelect"?f[a]():(f[a](r.name),l=f.isSelected(r.name));var h=f.getData();Object(y.each)(h,function(d){var p=d.get("name");if(!(p===`
`||p==="")){var m=f.isSelected(p);i.hasOwnProperty(p)?i[p]=i[p]&&m:i[p]=m}})}),a==="allSelect"||a==="inverseSelect"?{selected:i}:{name:r.name,selected:i}}function XA(a){a.registerAction("legendToggleSelect","legendselectchanged",Object(y.curry)(Zc,"toggleSelected")),a.registerAction("legendAllSelect","legendselectall",Object(y.curry)(Zc,"allSelect")),a.registerAction("legendInverseSelect","legendinverseselect",Object(y.curry)(Zc,"inverseSelect")),a.registerAction("legendSelect","legendselected",Object(y.curry)(Zc,"select")),a.registerAction("legendUnSelect","legendunselected",Object(y.curry)(Zc,"unSelect"))}function dx(a){a.registerComponentModel(Ry),a.registerComponentView(vx),a.registerProcessor(a.PRIORITY.PROCESSOR.SERIES_FILTER,YA),a.registerSubTypeDefaulter("legend",function(){return"plain"}),XA(a)}var ZA=function(a){Object(de.b)(r,a);function r(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=r.type,t}return r.prototype.setScrollDataIndex=function(t){this.option.scrollDataIndex=t},r.prototype.init=function(t,i,s){var l=Object(Tr.f)(t);a.prototype.init.call(this,t,i,s),px(this,t,l)},r.prototype.mergeOption=function(t,i){a.prototype.mergeOption.call(this,t,i),px(this,this.option,t)},r.type="legend.scroll",r.defaultOption=Object(ni.d)(Ry.defaultOption,{scrollDataIndex:0,pageButtonItemGap:5,pageButtonGap:null,pageButtonPosition:"end",pageFormatter:"{current}/{total}",pageIcons:{horizontal:["M0,0L12,-10L12,10z","M0,0L-12,-10L-12,10z"],vertical:["M0,0L20,0L10,-20z","M0,0L20,0L10,20z"]},pageIconColor:"#2f4554",pageIconInactiveColor:"#aaa",pageIconSize:15,pageTextStyle:{color:"#333"},animationDurationUpdate:800}),r}(Ry);function px(a,r,t){var i=a.getOrient(),s=[1,1];s[i.index]=0,Object(Tr.h)(r,t,{type:"box",ignoreSize:!!s})}var KA=ZA,gx=pr.a,jy=["width","height"],zy=["x","y"],kA=function(a){Object(de.b)(r,a);function r(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=r.type,t.newlineDisabled=!0,t._currentIndex=0,t}return r.prototype.init=function(){a.prototype.init.call(this),this.group.add(this._containerGroup=new gx),this._containerGroup.add(this.getContentGroup()),this.group.add(this._controllerGroup=new gx)},r.prototype.resetInner=function(){a.prototype.resetInner.call(this),this._controllerGroup.removeAll(),this._containerGroup.removeClipPath(),this._containerGroup.__rectSize=null},r.prototype.renderInner=function(t,i,s,l,f,h,d){var p=this;a.prototype.renderInner.call(this,t,i,s,l,f,h,d);var m=this._controllerGroup,b=i.get("pageIconSize",!0),A=y.isArray(b)?b:[b,b];P("pagePrev",0);var E=i.getModel("pageTextStyle");m.add(new en.a({name:"pageText",style:{text:"xx/xx",fill:E.getTextColor(),font:E.getFont(),verticalAlign:"middle",align:"center"},silent:!0})),P("pageNext",1);function P(j,J){var dt=j+"DataIndex",St=Ze.createIcon(i.get("pageIcons",!0)[i.getOrient().name][J],{onclick:y.bind(p._pageGo,p,dt,i,l)},{x:-A[0]/2,y:-A[1]/2,width:A[0],height:A[1]});St.name=j,m.add(St)}},r.prototype.layoutInner=function(t,i,s,l,f,h){var d=this.getSelectorGroup(),p=t.getOrient().index,m=jy[p],b=zy[p],A=jy[1-p],E=zy[1-p];f&&Tr.b("horizontal",d,t.get("selectorItemGap",!0));var P=t.get("selectorButtonGap",!0),j=d.getBoundingRect(),J=[-j.x,-j.y],dt=y.clone(s);f&&(dt[m]=s[m]-j[m]-P);var St=this._layoutContentAndController(t,l,dt,p,m,A,E,b);if(f){if(h==="end")J[p]+=St[m]+P;else{var Ot=j[m]+P;J[p]-=Ot,St[b]-=Ot}St[m]+=j[m]+P,J[1-p]+=St[E]+St[A]/2-j[A]/2,St[A]=Math.max(St[A],j[A]),St[E]=Math.min(St[E],j[E]+J[1-p]),d.x=J[0],d.y=J[1],d.markRedraw()}return St},r.prototype._layoutContentAndController=function(t,i,s,l,f,h,d,p){var m=this.getContentGroup(),b=this._containerGroup,A=this._controllerGroup;Tr.b(t.get("orient"),m,t.get("itemGap"),l?s.width:null,l?null:s.height),Tr.b("horizontal",A,t.get("pageButtonItemGap",!0));var E=m.getBoundingRect(),P=A.getBoundingRect(),j=this._showController=E[f]>s[f],J=[-E.x,-E.y];i||(J[l]=m[p]);var dt=[0,0],St=[-P.x,-P.y],Ot=y.retrieve2(t.get("pageButtonGap",!0),t.get("itemGap",!0));if(j){var wt=t.get("pageButtonPosition",!0);wt==="end"?St[l]+=s[f]-P[f]:dt[l]+=P[f]+Ot}St[1-l]+=E[h]/2-P[h]/2,m.setPosition(J),b.setPosition(dt),A.setPosition(St);var zt={x:0,y:0};if(zt[f]=j?s[f]:E[f],zt[h]=Math.max(E[h],P[h]),zt[d]=Math.min(0,P[d]+St[1-l]),b.__rectSize=s[f],j){var jt={x:0,y:0};jt[f]=Math.max(s[f]-P[f]-Ot,0),jt[h]=zt[h],b.setClipPath(new nn.a({shape:jt})),b.__rectSize=jt[f]}else A.eachChild(function(te){te.attr({invisible:!0,silent:!0})});var kt=this._getPageInfo(t);return kt.pageIndex!=null&&Ze.updateProps(m,{x:kt.contentPosition[0],y:kt.contentPosition[1]},j?t:null),this._updatePageInfoView(t,kt),zt},r.prototype._pageGo=function(t,i,s){var l=this._getPageInfo(i)[t];l!=null&&s.dispatchAction({type:"legendScroll",scrollDataIndex:l,legendId:i.id})},r.prototype._updatePageInfoView=function(t,i){var s=this._controllerGroup;y.each(["pagePrev","pageNext"],function(m){var b=m+"DataIndex",A=i[b]!=null,E=s.childOfName(m);E&&(E.setStyle("fill",A?t.get("pageIconColor",!0):t.get("pageIconInactiveColor",!0)),E.cursor=A?"pointer":"default")});var l=s.childOfName("pageText"),f=t.get("pageFormatter"),h=i.pageIndex,d=h!=null?h+1:0,p=i.pageCount;l&&f&&l.setStyle("text",y.isString(f)?f.replace("{current}",d==null?"":d+"").replace("{total}",p==null?"":p+""):f({current:d,total:p}))},r.prototype._getPageInfo=function(t){var i=t.get("scrollDataIndex",!0),s=this.getContentGroup(),l=this._containerGroup.__rectSize,f=t.getOrient().index,h=jy[f],d=zy[f],p=this._findTargetItemIndex(i),m=s.children(),b=m[p],A=m.length,E=A?1:0,P={contentPosition:[s.x,s.y],pageCount:E,pageIndex:E-1,pagePrevDataIndex:null,pageNextDataIndex:null};if(!b)return P;var j=wt(b);P.contentPosition[f]=-j.s;for(var J=p+1,dt=j,St=j,Ot=null;J<=A;++J)Ot=wt(m[J]),(!Ot&&St.e>dt.s+l||Ot&&!zt(Ot,dt.s))&&(St.i>dt.i?dt=St:dt=Ot,dt&&(P.pageNextDataIndex==null&&(P.pageNextDataIndex=dt.i),++P.pageCount)),St=Ot;for(var J=p-1,dt=j,St=j,Ot=null;J>=-1;--J)Ot=wt(m[J]),(!Ot||!zt(St,Ot.s))&&dt.i<St.i&&(St=dt,P.pagePrevDataIndex==null&&(P.pagePrevDataIndex=dt.i),++P.pageCount,++P.pageIndex),dt=Ot;return P;function wt(jt){if(jt){var kt=jt.getBoundingRect(),te=kt[d]+jt[d];return{s:te,e:te+kt[h],i:jt.__legendDataIndex}}}function zt(jt,kt){return jt.e>=kt&&jt.s<=kt+l}},r.prototype._findTargetItemIndex=function(t){if(!this._showController)return 0;var i,s=this.getContentGroup(),l;return s.eachChild(function(f,h){var d=f.__legendDataIndex;l==null&&d!=null&&(l=h),d===t&&(i=h)}),i!=null?i:l},r.type="legend.scroll",r}(vx),QA=kA;function JA(a){a.registerAction("legendScroll","legendscroll",function(r,t){var i=r.scrollDataIndex;i!=null&&t.eachComponent({mainType:"legend",subType:"scroll",query:r},function(s){s.setScrollDataIndex(i)})})}function $A(a){Object(B.a)(dx),a.registerComponentModel(KA),a.registerComponentView(QA),JA(a)}function qA(a){Object(B.a)(dx),Object(B.a)($A)}var tM=function(a){Object(de.b)(r,a);function r(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=r.type,t}return r.type="dataZoom.inside",r.defaultOption=Object(ni.d)(Gc.defaultOption,{disabled:!1,zoomLock:!1,zoomOnMouseWheel:!0,moveOnMouseMove:!0,moveOnMouseWheel:!1,preventDefaultMouseMove:!0}),r}(Gc),eM=tM,Fy=Object(sr.o)();function rM(a,r,t){Fy(a).coordSysRecordMap.each(function(i){var s=i.dataZoomInfoMap.get(r.uid);s&&(s.getRange=t)})}function nM(a,r){for(var t=Fy(a).coordSysRecordMap,i=t.keys(),s=0;s<i.length;s++){var l=i[s],f=t.get(l),h=f.dataZoomInfoMap;if(h){var d=r.uid,p=h.get(d);p&&(h.removeKey(d),h.keys().length||mx(t,f))}}}function mx(a,r){if(r){a.removeKey(r.model.uid);var t=r.controller;t&&t.dispose()}}function iM(a,r){var t={model:r,containsPoint:Object(y.curry)(oM,r),dispatchAction:Object(y.curry)(aM,a),dataZoomInfoMap:null,controller:null},i=t.controller=new oi(a.getZr());return Object(y.each)(["pan","zoom","scrollMove"],function(s){i.on(s,function(l){var f=[];t.dataZoomInfoMap.each(function(h){if(!!l.isAvailableBehavior(h.model.option)){var d=(h.getRange||{})[s],p=d&&d(h.dzReferCoordSysInfo,t.model.mainType,t.controller,l);!h.model.get("disabled",!0)&&p&&f.push({dataZoomId:h.model.id,start:p[0],end:p[1]})}}),f.length&&t.dispatchAction(f)})}),t}function aM(a,r){a.dispatchAction({type:"dataZoom",animation:{easing:"cubicOut",duration:100},batch:r})}function oM(a,r,t,i){return a.coordinateSystem.containPoint([t,i])}function sM(a){var r,t="type_",i={type_true:2,type_move:1,type_false:0,type_undefined:-1},s=!0;return a.each(function(l){var f=l.model,h=f.get("disabled",!0)?!1:f.get("zoomLock",!0)?"move":!0;i[t+h]>i[t+r]&&(r=h),s=s&&f.get("preventDefaultMouseMove",!0)}),{controlType:r,opt:{zoomOnMouseWheel:!0,moveOnMouseMove:!0,moveOnMouseWheel:!0,preventDefaultMouseMove:!!s}}}function lM(a){a.registerProcessor(a.PRIORITY.PROCESSOR.FILTER,function(r,t){var i=Fy(t),s=i.coordSysRecordMap||(i.coordSysRecordMap=Object(y.createHashMap)());s.each(function(l){l.dataZoomInfoMap=null}),r.eachComponent({mainType:"dataZoom",subType:"inside"},function(l){var f=u1(l);Object(y.each)(f.infoList,function(h){var d=h.model.uid,p=s.get(d)||s.set(d,iM(t,h.model)),m=p.dataZoomInfoMap||(p.dataZoomInfoMap=Object(y.createHashMap)());m.set(l.uid,{dzReferCoordSysInfo:h,model:l,getRange:null})})}),s.each(function(l){var f=l.controller,h,d=l.dataZoomInfoMap;if(d){var p=d.keys()[0];p!=null&&(h=d.get(p))}if(!h){mx(s,l);return}var m=sM(d);f.enable(m.controlType,m.opt),f.setPointerChecker(l.containsPoint),ca.b(l,"dispatchAction",h.model.get("throttle",!0),"fixRate")})})}var uM=function(a){Object(de.b)(r,a);function r(){var t=a!==null&&a.apply(this,arguments)||this;return t.type="dataZoom.inside",t}return r.prototype.render=function(t,i,s){if(a.prototype.render.apply(this,arguments),t.noTarget()){this._clear();return}this.range=t.getPercentRange(),rM(s,t,{pan:Object(y.bind)(Vy.pan,this),zoom:Object(y.bind)(Vy.zoom,this),scrollMove:Object(y.bind)(Vy.scrollMove,this)})},r.prototype.dispose=function(){this._clear(),a.prototype.dispose.apply(this,arguments)},r.prototype._clear=function(){nM(this.api,this.dataZoomModel),this.range=null},r.type="dataZoom.inside",r}(hy),Vy={zoom:function(a,r,t,i){var s=this.range,l=s.slice(),f=a.axisModels[0];if(!!f){var h=Gy[r](null,[i.originX,i.originY],f,t,a),d=(h.signal>0?h.pixelStart+h.pixelLength-h.pixel:h.pixel-h.pixelStart)/h.pixelLength*(l[1]-l[0])+l[0],p=Math.max(1/i.scale,0);l[0]=(l[0]-d)*p+d,l[1]=(l[1]-d)*p+d;var m=this.dataZoomModel.findRepresentativeAxisProxy().getMinMaxSpan();if(Ya(0,l,[0,100],0,m.minSpan,m.maxSpan),this.range=l,s[0]!==l[0]||s[1]!==l[1])return l}},pan:yx(function(a,r,t,i,s,l){var f=Gy[i]([l.oldX,l.oldY],[l.newX,l.newY],r,s,t);return f.signal*(a[1]-a[0])*f.pixel/f.pixelLength}),scrollMove:yx(function(a,r,t,i,s,l){var f=Gy[i]([0,0],[l.scrollDelta,l.scrollDelta],r,s,t);return f.signal*(a[1]-a[0])*l.scrollDelta})};function yx(a){return function(r,t,i,s){var l=this.range,f=l.slice(),h=r.axisModels[0];if(!!h){var d=a(f,h,r,t,i,s);if(Ya(d,f,[0,100],"all"),this.range=f,l[0]!==f[0]||l[1]!==f[1])return f}}}var Gy={grid:function(a,r,t,i,s){var l=t.axis,f={},h=s.model.coordinateSystem.getRect();return a=a||[0,0],l.dim==="x"?(f.pixel=r[0]-a[0],f.pixelLength=h.width,f.pixelStart=h.x,f.signal=l.inverse?1:-1):(f.pixel=r[1]-a[1],f.pixelLength=h.height,f.pixelStart=h.y,f.signal=l.inverse?-1:1),f},polar:function(a,r,t,i,s){var l=t.axis,f={},h=s.model.coordinateSystem,d=h.getRadiusAxis().getExtent(),p=h.getAngleAxis().getExtent();return a=a?h.pointToCoord(a):[0,0],r=h.pointToCoord(r),t.mainType==="radiusAxis"?(f.pixel=r[0]-a[0],f.pixelLength=d[1]-d[0],f.pixelStart=d[0],f.signal=l.inverse?1:-1):(f.pixel=r[1]-a[1],f.pixelLength=p[1]-p[0],f.pixelStart=p[0],f.signal=l.inverse?-1:1),f},singleAxis:function(a,r,t,i,s){var l=t.axis,f=s.model.coordinateSystem.getRect(),h={};return a=a||[0,0],l.orient==="horizontal"?(h.pixel=r[0]-a[0],h.pixelLength=f.width,h.pixelStart=f.x,h.signal=l.inverse?1:-1):(h.pixel=r[1]-a[1],h.pixelLength=f.height,h.pixelStart=f.y,h.signal=l.inverse?-1:1),h}},fM=uM;function xx(a){vy(a),a.registerComponentModel(eM),a.registerComponentView(fM),lM(a)}var cM=function(a){Object(de.b)(r,a);function r(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=r.type,t}return r.type="dataZoom.slider",r.layoutMode="box",r.defaultOption=Object(ni.d)(Gc.defaultOption,{show:!0,right:"ph",top:"ph",width:"ph",height:"ph",left:null,bottom:null,borderColor:"#d2dbee",borderRadius:3,backgroundColor:"rgba(47,69,84,0)",dataBackground:{lineStyle:{color:"#d2dbee",width:.5},areaStyle:{color:"#d2dbee",opacity:.2}},selectedDataBackground:{lineStyle:{color:"#8fb0f7",width:.5},areaStyle:{color:"#8fb0f7",opacity:.2}},fillerColor:"rgba(135,175,274,0.2)",handleIcon:"path://M-9.35,34.56V42m0-40V9.5m-2,0h4a2,2,0,0,1,2,2v21a2,2,0,0,1-2,2h-4a2,2,0,0,1-2-2v-21A2,2,0,0,1-11.35,9.5Z",handleSize:"100%",handleStyle:{color:"#fff",borderColor:"#ACB8D1"},moveHandleSize:7,moveHandleIcon:"path://M-320.9-50L-320.9-50c18.1,0,27.1,9,27.1,27.1V85.7c0,18.1-9,27.1-27.1,27.1l0,0c-18.1,0-27.1-9-27.1-27.1V-22.9C-348-41-339-50-320.9-50z M-212.3-50L-212.3-50c18.1,0,27.1,9,27.1,27.1V85.7c0,18.1-9,27.1-27.1,27.1l0,0c-18.1,0-27.1-9-27.1-27.1V-22.9C-239.4-41-230.4-50-212.3-50z M-103.7-50L-103.7-50c18.1,0,27.1,9,27.1,27.1V85.7c0,18.1-9,27.1-27.1,27.1l0,0c-18.1,0-27.1-9-27.1-27.1V-22.9C-130.9-41-121.8-50-103.7-50z",moveHandleStyle:{color:"#D2DBEE",opacity:.7},showDetail:!0,showDataShadow:"auto",realtime:!0,zoomLock:!1,textStyle:{color:"#6E7079"},brushSelect:!0,brushStyle:{color:"rgba(135,175,274,0.15)"},emphasis:{handleStyle:{borderColor:"#8FB0F7"},moveHandleStyle:{color:"#8FB0F7"}}}),r}(Gc),hM=cM,Kc=nn.a,bx=7,vM=1,Uy=30,dM=7,kc="horizontal",Sx="vertical",pM=5,gM=["line","bar","candlestick","scatter"],mM={easing:"cubicOut",duration:100},yM=function(a){Object(de.b)(r,a);function r(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=r.type,t._displayables={},t}return r.prototype.init=function(t,i){this.api=i,this._onBrush=Object(y.bind)(this._onBrush,this),this._onBrushEnd=Object(y.bind)(this._onBrushEnd,this)},r.prototype.render=function(t,i,s,l){if(a.prototype.render.apply(this,arguments),ca.b(this,"_dispatchZoomAction",t.get("throttle"),"fixRate"),this._orient=t.getOrient(),t.get("show")===!1){this.group.removeAll();return}if(t.noTarget()){this._clear(),this.group.removeAll();return}(!l||l.type!=="dataZoom"||l.from!==this.uid)&&this._buildView(),this._updateView()},r.prototype.dispose=function(){this._clear(),a.prototype.dispose.apply(this,arguments)},r.prototype._clear=function(){ca.a(this,"_dispatchZoomAction");var t=this.api.getZr();t.off("mousemove",this._onBrush),t.off("mouseup",this._onBrushEnd)},r.prototype._buildView=function(){var t=this.group;t.removeAll(),this._brushing=!1,this._displayables.brushRect=null,this._resetLocation(),this._resetInterval();var i=this._displayables.sliderGroup=new pr.a;this._renderBackground(),this._renderHandle(),this._renderDataShadow(),t.add(i),this._positionGroup()},r.prototype._resetLocation=function(){var t=this.dataZoomModel,i=this.api,s=t.get("brushSelect"),l=s?dM:0,f=this._findCoordRect(),h={width:i.getWidth(),height:i.getHeight()},d=this._orient===kc?{right:h.width-f.x-f.width,top:h.height-Uy-bx-l,width:f.width,height:Uy}:{right:bx,top:f.y,width:Uy,height:f.height},p=Tr.f(t.option);Object(y.each)(["right","top","width","height"],function(b){p[b]==="ph"&&(p[b]=d[b])});var m=Tr.g(p,h);this._location={x:m.x,y:m.y},this._size=[m.width,m.height],this._orient===Sx&&this._size.reverse()},r.prototype._positionGroup=function(){var t=this.group,i=this._location,s=this._orient,l=this.dataZoomModel.getFirstTargetAxisModel(),f=l&&l.get("inverse"),h=this._displayables.sliderGroup,d=(this._dataShadowInfo||{}).otherAxisInverse;h.attr(s===kc&&!f?{scaleY:d?1:-1,scaleX:1}:s===kc&&f?{scaleY:d?1:-1,scaleX:-1}:s===Sx&&!f?{scaleY:d?-1:1,scaleX:1,rotation:Math.PI/2}:{scaleY:d?-1:1,scaleX:-1,rotation:Math.PI/2});var p=t.getBoundingRect([h]);t.x=i.x-p.x,t.y=i.y-p.y,t.markRedraw()},r.prototype._getViewExtent=function(){return[0,this._size[0]]},r.prototype._renderBackground=function(){var t=this.dataZoomModel,i=this._size,s=this._displayables.sliderGroup,l=t.get("brushSelect");s.add(new Kc({silent:!0,shape:{x:0,y:0,width:i[0],height:i[1]},style:{fill:t.get("backgroundColor")},z2:-40}));var f=new Kc({shape:{x:0,y:0,width:i[0],height:i[1]},style:{fill:"transparent"},z2:0,onclick:Object(y.bind)(this._onClickPanel,this)}),h=this.api.getZr();l?(f.on("mousedown",this._onBrushStart,this),f.cursor="crosshair",h.on("mousemove",this._onBrush),h.on("mouseup",this._onBrushEnd)):(h.off("mousemove",this._onBrush),h.off("mouseup",this._onBrushEnd)),s.add(f)},r.prototype._renderDataShadow=function(){var t=this._dataShadowInfo=this._prepareDataShadowInfo();if(this._displayables.dataShadowSegs=[],!t)return;var i=this._size,s=t.series,l=s.getRawData(),f=s.getShadowDim?s.getShadowDim():t.otherDim;if(f==null)return;var h=l.getDataExtent(f),d=(h[1]-h[0])*.3;h=[h[0]-d,h[1]+d];var p=[0,i[1]],m=[0,i[0]],b=[[i[0],0],[0,0]],A=[],E=m[1]/(l.count()-1),P=0,j=Math.round(l.count()/i[0]),J;l.each([f],function(zt,jt){if(j>0&&jt%j){P+=E;return}var kt=zt==null||isNaN(zt)||zt==="",te=kt?0:Object(Ne.k)(zt,h,p,!0);kt&&!J&&jt?(b.push([b[b.length-1][0],0]),A.push([A[A.length-1][0],0])):!kt&&J&&(b.push([P,0]),A.push([P,0])),b.push([P,te]),A.push([P,te]),P+=E,J=kt});var dt=this.dataZoomModel;function St(zt){var jt=dt.getModel(zt?"selectedDataBackground":"dataBackground"),kt=new pr.a,te=new Hi.a({shape:{points:b},segmentIgnoreThreshold:1,style:jt.getModel("areaStyle").getAreaStyle(),silent:!0,z2:-20}),ue=new pi.a({shape:{points:A},segmentIgnoreThreshold:1,style:jt.getModel("lineStyle").getLineStyle(),silent:!0,z2:-19});return kt.add(te),kt.add(ue),kt}for(var Ot=0;Ot<3;Ot++){var wt=St(Ot===1);this._displayables.sliderGroup.add(wt),this._displayables.dataShadowSegs.push(wt)}},r.prototype._prepareDataShadowInfo=function(){var t=this.dataZoomModel,i=t.get("showDataShadow");if(i!==!1){var s,l=this.ecModel;return t.eachTargetAxis(function(f,h){var d=t.getAxisProxy(f,h).getTargetSeriesModels();Object(y.each)(d,function(p){if(!s&&!(i!==!0&&Object(y.indexOf)(gM,p.get("type"))<0)){var m=l.getComponent(Qs(f),h).axis,b=xM(f),A,E=p.coordinateSystem;b!=null&&E.getOtherAxis&&(A=E.getOtherAxis(m).inverse),b=p.getData().mapDimension(b),s={thisAxis:m,series:p,thisDim:f,otherDim:b,otherAxisInverse:A}}},this)},this),s}},r.prototype._renderHandle=function(){var t=this.group,i=this._displayables,s=i.handles=[null,null],l=i.handleLabels=[null,null],f=this._displayables.sliderGroup,h=this._size,d=this.dataZoomModel,p=this.api,m=d.get("borderRadius")||0,b=d.get("brushSelect"),A=i.filler=new Kc({silent:b,style:{fill:d.get("fillerColor")},textConfig:{position:"inside"}});f.add(A),f.add(new Kc({silent:!0,subPixelOptimize:!0,shape:{x:0,y:0,width:h[0],height:h[1],r:m},style:{stroke:d.get("dataBackgroundColor")||d.get("borderColor"),lineWidth:vM,fill:"rgba(0,0,0,0)"}})),Object(y.each)([0,1],function(Ot){var wt=d.get("handleIcon");!lr.b[wt]&&wt.indexOf("path://")<0&&wt.indexOf("image://")<0&&(wt="path://"+wt);var zt=Object(lr.a)(wt,-1,0,2,2,null,!0);zt.attr({cursor:_x(this._orient),draggable:!0,drift:Object(y.bind)(this._onDragMove,this,Ot),ondragend:Object(y.bind)(this._onDragEnd,this),onmouseover:Object(y.bind)(this._showDataInfo,this,!0),onmouseout:Object(y.bind)(this._showDataInfo,this,!1),z2:5});var jt=zt.getBoundingRect(),kt=d.get("handleSize");this._handleHeight=Object(Ne.o)(kt,this._size[1]),this._handleWidth=jt.width/jt.height*this._handleHeight,zt.setStyle(d.getModel("handleStyle").getItemStyle()),zt.style.strokeNoScale=!0,zt.rectHover=!0,zt.ensureState("emphasis").style=d.getModel(["emphasis","handleStyle"]).getItemStyle(),Object(qe.o)(zt);var te=d.get("handleColor");te!=null&&(zt.style.fill=te),f.add(s[Ot]=zt);var ue=d.getModel("textStyle");t.add(l[Ot]=new en.a({silent:!0,invisible:!0,style:Object(Ar.c)(ue,{x:0,y:0,text:"",verticalAlign:"middle",align:"center",fill:ue.getTextColor(),font:ue.getFont()}),z2:10}))},this);var E=A;if(b){var P=Object(Ne.o)(d.get("moveHandleSize"),h[1]),j=i.moveHandle=new nn.a({style:d.getModel("moveHandleStyle").getItemStyle(),silent:!0,shape:{r:[0,0,2,2],y:h[1]-.5,height:P}}),J=P*.8,dt=i.moveHandleIcon=Object(lr.a)(d.get("moveHandleIcon"),-J/2,-J/2,J,J,"#fff",!0);dt.silent=!0,dt.y=h[1]+P/2-.5,j.ensureState("emphasis").style=d.getModel(["emphasis","moveHandleStyle"]).getItemStyle();var St=Math.min(h[1]/2,Math.max(P,10));E=i.moveZone=new nn.a({invisible:!0,shape:{y:h[1]-St,height:P+St}}),E.on("mouseover",function(){p.enterEmphasis(j)}).on("mouseout",function(){p.leaveEmphasis(j)}),f.add(j),f.add(dt),f.add(E)}E.attr({draggable:!0,cursor:_x(this._orient),drift:Object(y.bind)(this._onDragMove,this,"all"),ondragstart:Object(y.bind)(this._showDataInfo,this,!0),ondragend:Object(y.bind)(this._onDragEnd,this),onmouseover:Object(y.bind)(this._showDataInfo,this,!0),onmouseout:Object(y.bind)(this._showDataInfo,this,!1)})},r.prototype._resetInterval=function(){var t=this._range=this.dataZoomModel.getPercentRange(),i=this._getViewExtent();this._handleEnds=[Object(Ne.k)(t[0],[0,100],i,!0),Object(Ne.k)(t[1],[0,100],i,!0)]},r.prototype._updateInterval=function(t,i){var s=this.dataZoomModel,l=this._handleEnds,f=this._getViewExtent(),h=s.findRepresentativeAxisProxy().getMinMaxSpan(),d=[0,100];Ya(i,l,f,s.get("zoomLock")?"all":t,h.minSpan!=null?Object(Ne.k)(h.minSpan,d,f,!0):null,h.maxSpan!=null?Object(Ne.k)(h.maxSpan,d,f,!0):null);var p=this._range,m=this._range=Object(Ne.b)([Object(Ne.k)(l[0],f,d,!0),Object(Ne.k)(l[1],f,d,!0)]);return!p||p[0]!==m[0]||p[1]!==m[1]},r.prototype._updateView=function(t){var i=this._displayables,s=this._handleEnds,l=Object(Ne.b)(s.slice()),f=this._size;Object(y.each)([0,1],function(E){var P=i.handles[E],j=this._handleHeight;P.attr({scaleX:j/2,scaleY:j/2,x:s[E]+(E?-1:1),y:f[1]/2-j/2})},this),i.filler.setShape({x:l[0],y:0,width:l[1]-l[0],height:f[1]});var h={x:l[0],width:l[1]-l[0]};i.moveHandle&&(i.moveHandle.setShape(h),i.moveZone.setShape(h),i.moveZone.getBoundingRect(),i.moveHandleIcon&&i.moveHandleIcon.attr("x",h.x+h.width/2));for(var d=i.dataShadowSegs,p=[0,l[0],l[1],f[0]],m=0;m<d.length;m++){var b=d[m],A=b.getClipPath();A||(A=new nn.a,b.setClipPath(A)),A.setShape({x:p[m],y:0,width:p[m+1]-p[m],height:f[1]})}this._updateDataInfo(t)},r.prototype._updateDataInfo=function(t){var i=this.dataZoomModel,s=this._displayables,l=s.handleLabels,f=this._orient,h=["",""];if(i.get("showDetail")){var d=i.findRepresentativeAxisProxy();if(d){var p=d.getAxisModel().axis,m=this._range,b=t?d.calculateDataWindow({start:m[0],end:m[1]}).valueWindow:d.getDataValueWindow();h=[this._formatLabel(b[0],p),this._formatLabel(b[1],p)]}}var A=Object(Ne.b)(this._handleEnds.slice());E.call(this,0),E.call(this,1);function E(P){var j=Ze.getTransform(s.handles[P].parent,this.group),J=Ze.transformDirection(P===0?"right":"left",j),dt=this._handleWidth/2+pM,St=Ze.applyTransform([A[P]+(P===0?-dt:dt),this._size[1]/2],j);l[P].setStyle({x:St[0],y:St[1],verticalAlign:f===kc?"middle":J,align:f===kc?J:"center",text:h[P]})}},r.prototype._formatLabel=function(t,i){var s=this.dataZoomModel,l=s.get("labelFormatter"),f=s.get("labelPrecision");(f==null||f==="auto")&&(f=i.getPixelPrecision());var h=t==null||isNaN(t)?"":i.type==="category"||i.type==="time"?i.scale.getLabel({value:Math.round(t)}):t.toFixed(Math.min(f,20));return Object(y.isFunction)(l)?l(t,h):Object(y.isString)(l)?l.replace("{value}",h):h},r.prototype._showDataInfo=function(t){t=this._dragging||t;var i=this._displayables,s=i.handleLabels;s[0].attr("invisible",!t),s[1].attr("invisible",!t),i.moveHandle&&this.api[t?"enterEmphasis":"leaveEmphasis"](i.moveHandle,1)},r.prototype._onDragMove=function(t,i,s,l){this._dragging=!0,Wi.g(l.event);var f=this._displayables.sliderGroup.getLocalTransform(),h=Ze.applyTransform([i,s],f,!0),d=this._updateInterval(t,h[0]),p=this.dataZoomModel.get("realtime");this._updateView(!p),d&&p&&this._dispatchZoomAction(!0)},r.prototype._onDragEnd=function(){this._dragging=!1,this._showDataInfo(!1);var t=this.dataZoomModel.get("realtime");!t&&this._dispatchZoomAction(!1)},r.prototype._onClickPanel=function(t){var i=this._size,s=this._displayables.sliderGroup.transformCoordToLocal(t.offsetX,t.offsetY);if(!(s[0]<0||s[0]>i[0]||s[1]<0||s[1]>i[1])){var l=this._handleEnds,f=(l[0]+l[1])/2,h=this._updateInterval("all",s[0]-f);this._updateView(),h&&this._dispatchZoomAction(!1)}},r.prototype._onBrushStart=function(t){var i=t.offsetX,s=t.offsetY;this._brushStart=new pa.a(i,s),this._brushing=!0,this._brushStartTime=+new Date},r.prototype._onBrushEnd=function(t){if(!!this._brushing){var i=this._displayables.brushRect;if(this._brushing=!1,!!i){i.attr("ignore",!0);var s=i.shape,l=+new Date;if(!(l-this._brushStartTime<200&&Math.abs(s.width)<5)){var f=this._getViewExtent(),h=[0,100];this._range=Object(Ne.b)([Object(Ne.k)(s.x,f,h,!0),Object(Ne.k)(s.x+s.width,f,h,!0)]),this._handleEnds=[s.x,s.x+s.width],this._updateView(),this._dispatchZoomAction(!1)}}}},r.prototype._onBrush=function(t){this._brushing&&(Wi.g(t.event),this._updateBrushRect(t.offsetX,t.offsetY))},r.prototype._updateBrushRect=function(t,i){var s=this._displayables,l=this.dataZoomModel,f=s.brushRect;f||(f=s.brushRect=new Kc({silent:!0,style:l.getModel("brushStyle").getItemStyle()}),s.sliderGroup.add(f)),f.attr("ignore",!1);var h=this._brushStart,d=this._displayables.sliderGroup,p=d.transformCoordToLocal(t,i),m=d.transformCoordToLocal(h.x,h.y),b=this._size;p[0]=Math.max(Math.min(b[0],p[0]),0),f.setShape({x:m[0],y:0,width:p[0]-m[0],height:b[1]})},r.prototype._dispatchZoomAction=function(t){var i=this._range;this.api.dispatchAction({type:"dataZoom",from:this.uid,dataZoomId:this.dataZoomModel.id,animation:t?mM:null,start:i[0],end:i[1]})},r.prototype._findCoordRect=function(){var t,i=u1(this.dataZoomModel).infoList;if(!t&&i.length){var s=i[0].model.coordinateSystem;t=s.getRect&&s.getRect()}if(!t){var l=this.api.getWidth(),f=this.api.getHeight();t={x:l*.2,y:f*.2,width:l*.6,height:f*.6}}return t},r.type="dataZoom.slider",r}(hy);function xM(a){var r={x:"y",y:"x",radius:"angle",angle:"radius"};return r[a]}function _x(a){return a==="vertical"?"ns-resize":"ew-resize"}var bM=yM;function Tx(a){a.registerComponentModel(hM),a.registerComponentView(bM),vy(a)}function SM(a){Object(B.a)(xx),Object(B.a)(Tx)}var _M={get:function(a,r,t){var i=y.clone((TM[a]||{})[r]);return t&&y.isArray(i)?i[i.length-1]:i}},TM={color:{active:["#006edd","#e0ffff"],inactive:["rgba(0,0,0,0)"]},colorHue:{active:[0,360],inactive:[0,0]},colorSaturation:{active:[.3,1],inactive:[0,0]},colorLightness:{active:[.9,.5],inactive:[0,0]},colorAlpha:{active:[.3,1],inactive:[0,0]},opacity:{active:[.3,1],inactive:[0,0]},symbol:{active:["circle","roundRect","diamond"],inactive:["none"]},symbolSize:{active:[10,50],inactive:[0,0]}},Ox=_M,Ax=si.mapVisual,OM=si.eachVisual,AM=y.isArray,Mx=y.each,MM=Ne.b,DM=Ne.k,CM=function(a){Object(de.b)(r,a);function r(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=r.type,t.stateList=["inRange","outOfRange"],t.replacableOptionKeys=["inRange","outOfRange","target","controller","color"],t.layoutMode={type:"box",ignoreSize:!0},t.dataBound=[-Infinity,Infinity],t.targetVisuals={},t.controllerVisuals={},t}return r.prototype.init=function(t,i,s){this.mergeDefaultAndTheme(t,s)},r.prototype.optionUpdated=function(t,i){var s=this.option;fi.a.canvasSupported||(s.realtime=!1),!i&&H1(s,t,this.replacableOptionKeys),this.textStyleModel=this.getModel("textStyle"),this.resetItemSize(),this.completeVisualOption()},r.prototype.resetVisual=function(t){var i=this.stateList;t=y.bind(t,this),this.controllerVisuals=Ty(this.option.controller,i,t),this.targetVisuals=Ty(this.option.target,i,t)},r.prototype.getItemSymbol=function(){return null},r.prototype.getTargetSeriesIndices=function(){var t=this.option.seriesIndex,i=[];return t==null||t==="all"?this.ecModel.eachSeries(function(s,l){i.push(l)}):i=sr.r(t),i},r.prototype.eachTargetSeries=function(t,i){y.each(this.getTargetSeriesIndices(),function(s){var l=this.ecModel.getSeriesByIndex(s);l&&t.call(i,l)},this)},r.prototype.isTargetSeries=function(t){var i=!1;return this.eachTargetSeries(function(s){s===t&&(i=!0)}),i},r.prototype.formatValueText=function(t,i,s){var l=this.option,f=l.precision,h=this.dataBound,d=l.formatter,p;s=s||["<",">"],y.isArray(t)&&(t=t.slice(),p=!0);var m=i?t:p?[b(t[0]),b(t[1])]:b(t);if(y.isString(d))return d.replace("{value}",p?m[0]:m).replace("{value2}",p?m[1]:m);if(y.isFunction(d))return p?d(t[0],t[1]):d(t);if(p)return t[0]===h[0]?s[0]+" "+m[1]:t[1]===h[1]?s[1]+" "+m[0]:m[0]+" - "+m[1];return m;function b(A){return A===h[0]?"min":A===h[1]?"max":(+A).toFixed(Math.min(f,20))}},r.prototype.resetExtent=function(){var t=this.option,i=MM([t.min,t.max]);this._dataExtent=i},r.prototype.getDataDimension=function(t){var i=this.option.dimension,s=t.dimensions;if(!(i==null&&!s.length)){if(i!=null)return t.getDimension(i);for(var l=t.dimensions,f=l.length-1;f>=0;f--){var h=l[f],d=t.getDimensionInfo(h);if(!d.isCalculationCoord)return h}}},r.prototype.getExtent=function(){return this._dataExtent.slice()},r.prototype.completeVisualOption=function(){var t=this.ecModel,i=this.option,s={inRange:i.inRange,outOfRange:i.outOfRange},l=i.target||(i.target={}),f=i.controller||(i.controller={});y.merge(l,s),y.merge(f,s);var h=this.isCategory();d.call(this,l),d.call(this,f),p.call(this,l,"inRange","outOfRange"),m.call(this,f);function d(b){AM(i.color)&&!b.inRange&&(b.inRange={color:i.color.slice().reverse()}),b.inRange=b.inRange||{color:t.get("gradientColor")}}function p(b,A,E){var P=b[A],j=b[E];P&&!j&&(j=b[E]={},Mx(P,function(J,dt){if(!!si.isValidType(dt)){var St=Ox.get(dt,"inactive",h);St!=null&&(j[dt]=St,dt==="color"&&!j.hasOwnProperty("opacity")&&!j.hasOwnProperty("colorAlpha")&&(j.opacity=[0,0]))}}))}function m(b){var A=(b.inRange||{}).symbol||(b.outOfRange||{}).symbol,E=(b.inRange||{}).symbolSize||(b.outOfRange||{}).symbolSize,P=this.get("inactiveColor"),j=this.getItemSymbol(),J=j||"roundRect";Mx(this.stateList,function(dt){var St=this.itemSize,Ot=b[dt];Ot||(Ot=b[dt]={color:h?P:[P]}),Ot.symbol==null&&(Ot.symbol=A&&y.clone(A)||(h?J:[J])),Ot.symbolSize==null&&(Ot.symbolSize=E&&y.clone(E)||(h?St[0]:[St[0],St[0]])),Ot.symbol=Ax(Ot.symbol,function(jt){return jt==="none"?J:jt});var wt=Ot.symbolSize;if(wt!=null){var zt=-Infinity;OM(wt,function(jt){jt>zt&&(zt=jt)}),Ot.symbolSize=Ax(wt,function(jt){return DM(jt,[0,zt],[0,St[0]],!0)})}},this)}},r.prototype.resetItemSize=function(){this.itemSize=[parseFloat(this.get("itemWidth")),parseFloat(this.get("itemHeight"))]},r.prototype.isCategory=function(){return!!this.option.categories},r.prototype.setSelected=function(t){},r.prototype.getSelected=function(){return null},r.prototype.getValueState=function(t){return null},r.prototype.getVisualMeta=function(t){return null},r.type="visualMap",r.dependencies=["series"],r.defaultOption={show:!0,zlevel:0,z:4,seriesIndex:"all",min:0,max:200,left:0,right:null,top:null,bottom:0,itemWidth:null,itemHeight:null,inverse:!1,orient:"vertical",backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",contentColor:"#5793f3",inactiveColor:"#aaa",borderWidth:0,padding:5,textGap:10,precision:0,textStyle:{color:"#333"}},r}(An.a),Ud=CM,Dx=[20,140],EM=function(a){Object(de.b)(r,a);function r(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=r.type,t}return r.prototype.optionUpdated=function(t,i){a.prototype.optionUpdated.apply(this,arguments),this.resetExtent(),this.resetVisual(function(s){s.mappingMethod="linear",s.dataExtent=this.getExtent()}),this._resetRange()},r.prototype.resetItemSize=function(){a.prototype.resetItemSize.apply(this,arguments);var t=this.itemSize;(t[0]==null||isNaN(t[0]))&&(t[0]=Dx[0]),(t[1]==null||isNaN(t[1]))&&(t[1]=Dx[1])},r.prototype._resetRange=function(){var t=this.getExtent(),i=this.option.range;!i||i.auto?(t.auto=1,this.option.range=t):y.isArray(i)&&(i[0]>i[1]&&i.reverse(),i[0]=Math.max(i[0],t[0]),i[1]=Math.min(i[1],t[1]))},r.prototype.completeVisualOption=function(){a.prototype.completeVisualOption.apply(this,arguments),y.each(this.stateList,function(t){var i=this.option.controller[t].symbolSize;i&&i[0]!==i[1]&&(i[0]=i[1]/3)},this)},r.prototype.setSelected=function(t){this.option.range=t.slice(),this._resetRange()},r.prototype.getSelected=function(){var t=this.getExtent(),i=Ne.b((this.get("range")||[]).slice());return i[0]>t[1]&&(i[0]=t[1]),i[1]>t[1]&&(i[1]=t[1]),i[0]<t[0]&&(i[0]=t[0]),i[1]<t[0]&&(i[1]=t[0]),i},r.prototype.getValueState=function(t){var i=this.option.range,s=this.getExtent();return(i[0]<=s[0]||i[0]<=t)&&(i[1]>=s[1]||t<=i[1])?"inRange":"outOfRange"},r.prototype.findTargetDataIndices=function(t){var i=[];return this.eachTargetSeries(function(s){var l=[],f=s.getData();f.each(this.getDataDimension(f),function(h,d){t[0]<=h&&h<=t[1]&&l.push(d)},this),i.push({seriesId:s.id,dataIndex:l})},this),i},r.prototype.getVisualMeta=function(t){var i=Cx(this,"outOfRange",this.getExtent()),s=Cx(this,"inRange",this.option.range.slice()),l=[];function f(E,P){l.push({value:E,color:t(E,P)})}for(var h=0,d=0,p=s.length,m=i.length;d<m&&(!s.length||i[d]<=s[0]);d++)i[d]<s[h]&&f(i[d],"outOfRange");for(var b=1;h<p;h++,b=0)b&&l.length&&f(s[h],"outOfRange"),f(s[h],"inRange");for(var b=1;d<m;d++)(!s.length||s[s.length-1]<i[d])&&(b&&(l.length&&f(l[l.length-1].value,"outOfRange"),b=0),f(i[d],"outOfRange"));var A=l.length;return{stops:l,outerColors:[A?l[0].color:"transparent",A?l[A-1].color:"transparent"]}},r.type="visualMap.continuous",r.defaultOption=Object(ni.d)(Ud.defaultOption,{align:"auto",calculable:!1,hoverLink:!0,realtime:!0,handleIcon:"path://M-11.39,9.77h0a3.5,3.5,0,0,1-3.5,3.5h-22a3.5,3.5,0,0,1-3.5-3.5h0a3.5,3.5,0,0,1,3.5-3.5h22A3.5,3.5,0,0,1-11.39,9.77Z",handleSize:"120%",handleStyle:{borderColor:"#fff",borderWidth:1},indicatorIcon:"circle",indicatorSize:"50%",indicatorStyle:{borderColor:"#fff",borderWidth:2,shadowBlur:2,shadowOffsetX:1,shadowOffsetY:1,shadowColor:"rgba(0,0,0,0.2)"}}),r}(Ud);function Cx(a,r,t){if(t[0]===t[1])return t.slice();for(var i=200,s=(t[1]-t[0])/i,l=t[0],f=[],h=0;h<=i&&l<t[1];h++)f.push(l),l+=s;return f.push(t[1]),f}var LM=EM,PM=function(a){Object(de.b)(r,a);function r(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=r.type,t.autoPositionValues={left:1,right:1,top:1,bottom:1},t}return r.prototype.init=function(t,i){this.ecModel=t,this.api=i},r.prototype.render=function(t,i,s,l){if(this.visualMapModel=t,t.get("show")===!1){this.group.removeAll();return}this.doRender(t,i,s,l)},r.prototype.renderBackground=function(t){var i=this.visualMapModel,s=Pr.j(i.get("padding")||0),l=t.getBoundingRect();t.add(new nn.a({z2:-1,silent:!0,shape:{x:l.x-s[3],y:l.y-s[0],width:l.width+s[3]+s[1],height:l.height+s[0]+s[2]},style:{fill:i.get("backgroundColor"),stroke:i.get("borderColor"),lineWidth:i.get("borderWidth")}}))},r.prototype.getControllerVisual=function(t,i,s){s=s||{};var l=s.forceState,f=this.visualMapModel,h={};if(i==="color"){var d=f.get("contentColor");h.color=d}function p(E){return h[E]}function m(E,P){h[E]=P}var b=f.controllerVisuals[l||f.getValueState(t)],A=si.prepareVisualTypes(b);return y.each(A,function(E){var P=b[E];s.convertOpacityToAlpha&&E==="opacity"&&(E="colorAlpha",P=b.__alphaForOpacity),si.dependsOn(E,i)&&P&&P.applyVisual(t,p,m)}),h[i]},r.prototype.positionGroup=function(t){var i=this.visualMapModel,s=this.api;Tr.i(t,i.getBoxLayoutParams(),{width:s.getWidth(),height:s.getHeight()})},r.prototype.doRender=function(t,i,s,l){},r.type="visualMap",r}(Vn.a),Ex=PM,Lx=[["left","right","width"],["top","bottom","height"]];function Px(a,r,t){var i=a.option,s=i.align;if(s!=null&&s!=="auto")return s;for(var l={width:r.getWidth(),height:r.getHeight()},f=i.orient==="horizontal"?1:0,h=Lx[f],d=[0,null,10],p={},m=0;m<3;m++)p[Lx[1-f][m]]=d[m],p[h[m]]=m===2?t[0]:i[h[m]];var b=[["x","width",3],["y","height",0]][f],A=Object(Tr.g)(p,l,i.padding);return h[(A.margin[b[2]]||0)+A[b[0]]+A[b[1]]*.5<l[b[1]]*.5?0:1]}function Hd(a,r){return y.each(a||[],function(t){t.dataIndex!=null&&(t.dataIndexInside=t.dataIndex,t.dataIndex=null),t.highlightKey="visualMap"+(r?r.componentIndex:"")}),a}var Oo=Ne.k,wM=y.each,Ix=Math.min,Hy=Math.max,IM=12,RM=6,NM=function(a){Object(de.b)(r,a);function r(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=r.type,t._shapes={},t._dataInterval=[],t._handleEnds=[],t._hoverLinkDataIndices=[],t}return r.prototype.doRender=function(t,i,s,l){this._api=s,(!l||l.type!=="selectDataRange"||l.from!==this.uid)&&this._buildView()},r.prototype._buildView=function(){this.group.removeAll();var t=this.visualMapModel,i=this.group;this._orient=t.get("orient"),this._useHandle=t.get("calculable"),this._resetInterval(),this._renderBar(i);var s=t.get("text");this._renderEndsText(i,s,0),this._renderEndsText(i,s,1),this._updateView(!0),this.renderBackground(i),this._updateView(),this._enableHoverLinkToSeries(),this._enableHoverLinkFromSeries(),this.positionGroup(i)},r.prototype._renderEndsText=function(t,i,s){if(!!i){var l=i[1-s];l=l!=null?l+"":"";var f=this.visualMapModel,h=f.get("textGap"),d=f.itemSize,p=this._shapes.mainGroup,m=this._applyTransform([d[0]/2,s===0?-h:d[1]+h],p),b=this._applyTransform(s===0?"bottom":"top",p),A=this._orient,E=this.visualMapModel.textStyleModel;this.group.add(new en.a({style:{x:m[0],y:m[1],verticalAlign:A==="horizontal"?"middle":b,align:A==="horizontal"?b:"center",text:l,font:E.getFont(),fill:E.getTextColor()}}))}},r.prototype._renderBar=function(t){var i=this.visualMapModel,s=this._shapes,l=i.itemSize,f=this._orient,h=this._useHandle,d=Px(i,this.api,l),p=s.mainGroup=this._createBarGroup(d),m=new pr.a;p.add(m),m.add(s.outOfRange=Rx()),m.add(s.inRange=Rx(null,h?Bx(this._orient):null,y.bind(this._dragHandle,this,"all",!1),y.bind(this._dragHandle,this,"all",!0))),m.setClipPath(new nn.a({shape:{x:0,y:0,width:l[0],height:l[1],r:3}}));var b=i.textStyleModel.getTextRect("\u56FD"),A=Hy(b.width,b.height);h&&(s.handleThumbs=[],s.handleLabels=[],s.handleLabelPoints=[],this._createHandle(i,p,0,l,A,f),this._createHandle(i,p,1,l,A,f)),this._createIndicator(i,p,l,A,f),t.add(p)},r.prototype._createHandle=function(t,i,s,l,f,h){var d=y.bind(this._dragHandle,this,s,!1),p=y.bind(this._dragHandle,this,s,!0),m=Object(gt.h)(t.get("handleSize"),l[0]),b=Object(lr.a)(t.get("handleIcon"),-m/2,-m/2,m,m,null,!0),A=Bx(this._orient);b.attr({cursor:A,draggable:!0,drift:d,ondragend:p,onmousemove:function(dt){Wi.g(dt.event)}}),b.x=l[0]/2,b.useStyle(t.getModel("handleStyle").getItemStyle()),b.setStyle({strokeNoScale:!0,strokeFirst:!0}),b.style.lineWidth*=2,b.ensureState("emphasis").style=t.getModel(["emphasis","handleStyle"]).getItemStyle(),Object(qe.F)(b,!0),i.add(b);var E=this.visualMapModel.textStyleModel,P=new en.a({cursor:A,draggable:!0,drift:d,onmousemove:function(dt){Wi.g(dt.event)},ondragend:p,style:{x:0,y:0,text:"",font:E.getFont(),fill:E.getTextColor()}});P.ensureState("blur").style={opacity:.1},P.stateTransition={duration:200},this.group.add(P);var j=[m,0],J=this._shapes;J.handleThumbs[s]=b,J.handleLabelPoints[s]=j,J.handleLabels[s]=P},r.prototype._createIndicator=function(t,i,s,l,f){var h=Object(gt.h)(t.get("indicatorSize"),s[0]),d=Object(lr.a)(t.get("indicatorIcon"),-h/2,-h/2,h,h,null,!0);d.attr({cursor:"move",invisible:!0,silent:!0,x:s[0]/2});var p=t.getModel("indicatorStyle").getItemStyle();if(d instanceof it.a){var m=d.style;d.useStyle(y.extend({image:m.image,x:m.x,y:m.y,width:m.width,height:m.height},p))}else d.useStyle(p);i.add(d);var b=this.visualMapModel.textStyleModel,A=new en.a({silent:!0,invisible:!0,style:{x:0,y:0,text:"",font:b.getFont(),fill:b.getTextColor()}});this.group.add(A);var E=[(f==="horizontal"?l/2:RM)+s[0]/2,0],P=this._shapes;P.indicator=d,P.indicatorLabel=A,P.indicatorLabelPoint=E,this._firstShowIndicator=!0},r.prototype._dragHandle=function(t,i,s,l){if(!!this._useHandle){if(this._dragging=!i,!i){var f=this._applyTransform([s,l],this._shapes.mainGroup,!0);this._updateInterval(t,f[1]),this._hideIndicator(),this._updateView()}i===!this.visualMapModel.get("realtime")&&this.api.dispatchAction({type:"selectDataRange",from:this.uid,visualMapId:this.visualMapModel.id,selected:this._dataInterval.slice()}),i?!this._hovering&&this._clearHoverLinkToSeries():Nx(this.visualMapModel)&&this._doHoverLinkToSeries(this._handleEnds[t],!1)}},r.prototype._resetInterval=function(){var t=this.visualMapModel,i=this._dataInterval=t.getSelected(),s=t.getExtent(),l=[0,t.itemSize[1]];this._handleEnds=[Oo(i[0],s,l,!0),Oo(i[1],s,l,!0)]},r.prototype._updateInterval=function(t,i){i=i||0;var s=this.visualMapModel,l=this._handleEnds,f=[0,s.itemSize[1]];Ya(i,l,f,t,0);var h=s.getExtent();this._dataInterval=[Oo(l[0],f,h,!0),Oo(l[1],f,h,!0)]},r.prototype._updateView=function(t){var i=this.visualMapModel,s=i.getExtent(),l=this._shapes,f=[0,i.itemSize[1]],h=t?f:this._handleEnds,d=this._createBarVisual(this._dataInterval,s,h,"inRange"),p=this._createBarVisual(s,s,f,"outOfRange");l.inRange.setStyle({fill:d.barColor}).setShape("points",d.barPoints),l.outOfRange.setStyle({fill:p.barColor}).setShape("points",p.barPoints),this._updateHandle(h,d)},r.prototype._createBarVisual=function(t,i,s,l){var f={forceState:l,convertOpacityToAlpha:!0},h=this._makeColorGradient(t,f),d=[this.getControllerVisual(t[0],"symbolSize",f),this.getControllerVisual(t[1],"symbolSize",f)],p=this._createBarPoints(s,d);return{barColor:new $a.a(0,0,0,1,h),barPoints:p,handlesColor:[h[0].color,h[h.length-1].color]}},r.prototype._makeColorGradient=function(t,i){var s=100,l=[],f=(t[1]-t[0])/s;l.push({color:this.getControllerVisual(t[0],"color",i),offset:0});for(var h=1;h<s;h++){var d=t[0]+f*h;if(d>t[1])break;l.push({color:this.getControllerVisual(d,"color",i),offset:h/s})}return l.push({color:this.getControllerVisual(t[1],"color",i),offset:1}),l},r.prototype._createBarPoints=function(t,i){var s=this.visualMapModel.itemSize;return[[s[0]-i[0],t[0]],[s[0],t[0]],[s[0],t[1]],[s[0]-i[1],t[1]]]},r.prototype._createBarGroup=function(t){var i=this._orient,s=this.visualMapModel.get("inverse");return new pr.a(i==="horizontal"&&!s?{scaleX:t==="bottom"?1:-1,rotation:Math.PI/2}:i==="horizontal"&&s?{scaleX:t==="bottom"?-1:1,rotation:-Math.PI/2}:i==="vertical"&&!s?{scaleX:t==="left"?1:-1,scaleY:-1}:{scaleX:t==="left"?1:-1})},r.prototype._updateHandle=function(t,i){if(!!this._useHandle){var s=this._shapes,l=this.visualMapModel,f=s.handleThumbs,h=s.handleLabels,d=l.itemSize,p=l.getExtent();wM([0,1],function(m){var b=f[m];b.setStyle("fill",i.handlesColor[m]),b.y=t[m];var A=Oo(t[m],[0,d[1]],p,!0),E=this.getControllerVisual(A,"symbolSize");b.scaleX=b.scaleY=E/d[0],b.x=d[0]-E/2;var P=Ze.applyTransform(s.handleLabelPoints[m],Ze.getTransform(b,this.group));h[m].setStyle({x:P[0],y:P[1],text:l.formatValueText(this._dataInterval[m]),verticalAlign:"middle",align:this._orient==="vertical"?this._applyTransform("left",s.mainGroup):"center"})},this)}},r.prototype._showIndicator=function(t,i,s,l){var f=this.visualMapModel,h=f.getExtent(),d=f.itemSize,p=[0,d[1]],m=this._shapes,b=m.indicator;if(!!b){b.attr("invisible",!1);var A={convertOpacityToAlpha:!0},E=this.getControllerVisual(t,"color",A),P=this.getControllerVisual(t,"symbolSize"),j=Oo(t,h,p,!0),J=d[0]-P/2,dt={x:b.x,y:b.y};b.y=j,b.x=J;var St=Ze.applyTransform(m.indicatorLabelPoint,Ze.getTransform(b,this.group)),Ot=m.indicatorLabel;Ot.attr("invisible",!1);var wt=this._applyTransform("left",m.mainGroup),zt=this._orient,jt=zt==="horizontal";Ot.setStyle({text:(s||"")+f.formatValueText(i),verticalAlign:jt?wt:"middle",align:jt?"center":wt});var kt={x:J,y:j,style:{fill:E}},te={style:{x:St[0],y:St[1]}};if(f.ecModel.isAnimationEnabled()&&!this._firstShowIndicator){var ue={duration:100,easing:"cubicInOut",additive:!0};b.x=dt.x,b.y=dt.y,b.animateTo(kt,ue),Ot.animateTo(te,ue)}else b.attr(kt),Ot.attr(te);this._firstShowIndicator=!1;var me=this._shapes.handleLabels;if(me)for(var ve=0;ve<me.length;ve++)this._api.enterBlur(me[ve])}},r.prototype._enableHoverLinkToSeries=function(){var t=this;this._shapes.mainGroup.on("mousemove",function(i){if(t._hovering=!0,!t._dragging){var s=t.visualMapModel.itemSize,l=t._applyTransform([i.offsetX,i.offsetY],t._shapes.mainGroup,!0,!0);l[1]=Ix(Hy(0,l[1]),s[1]),t._doHoverLinkToSeries(l[1],0<=l[0]&&l[0]<=s[0])}}).on("mouseout",function(){t._hovering=!1,!t._dragging&&t._clearHoverLinkToSeries()})},r.prototype._enableHoverLinkFromSeries=function(){var t=this.api.getZr();this.visualMapModel.option.hoverLink?(t.on("mouseover",this._hoverLinkFromSeriesMouseOver,this),t.on("mouseout",this._hideIndicator,this)):this._clearHoverLinkFromSeries()},r.prototype._doHoverLinkToSeries=function(t,i){var s=this.visualMapModel,l=s.itemSize;if(!!s.option.hoverLink){var f=[0,l[1]],h=s.getExtent();t=Ix(Hy(f[0],t),f[1]);var d=BM(s,h,f),p=[t-d,t+d],m=Oo(t,f,h,!0),b=[Oo(p[0],f,h,!0),Oo(p[1],f,h,!0)];p[0]<f[0]&&(b[0]=-Infinity),p[1]>f[1]&&(b[1]=Infinity),i&&(b[0]===-Infinity?this._showIndicator(m,b[1],"< ",d):b[1]===Infinity?this._showIndicator(m,b[0],"> ",d):this._showIndicator(m,m,"\u2248 ",d));var A=this._hoverLinkDataIndices,E=[];(i||Nx(s))&&(E=this._hoverLinkDataIndices=s.findTargetDataIndices(b));var P=sr.d(A,E);this._dispatchHighDown("downplay",Hd(P[0],s)),this._dispatchHighDown("highlight",Hd(P[1],s))}},r.prototype._hoverLinkFromSeriesMouseOver=function(t){var i=t.target,s=this.visualMapModel;if(!(!i||Object(Ur.a)(i).dataIndex==null)){var l=Object(Ur.a)(i),f=this.ecModel.getSeriesByIndex(l.seriesIndex);if(!!s.isTargetSeries(f)){var h=f.getData(l.dataType),d=h.get(s.getDataDimension(h),l.dataIndex);isNaN(d)||this._showIndicator(d,d)}}},r.prototype._hideIndicator=function(){var t=this._shapes;t.indicator&&t.indicator.attr("invisible",!0),t.indicatorLabel&&t.indicatorLabel.attr("invisible",!0);var i=this._shapes.handleLabels;if(i)for(var s=0;s<i.length;s++)this._api.leaveBlur(i[s])},r.prototype._clearHoverLinkToSeries=function(){this._hideIndicator();var t=this._hoverLinkDataIndices;this._dispatchHighDown("downplay",Hd(t,this.visualMapModel)),t.length=0},r.prototype._clearHoverLinkFromSeries=function(){this._hideIndicator();var t=this.api.getZr();t.off("mouseover",this._hoverLinkFromSeriesMouseOver),t.off("mouseout",this._hideIndicator)},r.prototype._applyTransform=function(t,i,s,l){var f=Ze.getTransform(i,l?null:this.group);return y.isArray(t)?Ze.applyTransform(t,f,s):Ze.transformDirection(t,f,s)},r.prototype._dispatchHighDown=function(t,i){i&&i.length&&this.api.dispatchAction({type:t,batch:i})},r.prototype.dispose=function(){this._clearHoverLinkFromSeries(),this._clearHoverLinkToSeries()},r.prototype.remove=function(){this._clearHoverLinkFromSeries(),this._clearHoverLinkToSeries()},r.type="visualMap.continuous",r}(Ex);function Rx(a,r,t,i){return new Hi.a({shape:{points:a},draggable:!!t,cursor:r,drift:t,onmousemove:function(s){Wi.g(s.event)},ondragend:i})}function BM(a,r,t){var i=IM/2,s=a.get("hoverLinkDataSize");return s&&(i=Oo(s,r,t,!0)/2),i}function Nx(a){var r=a.get("hoverLinkOnHandle");return!!(r==null?a.get("realtime"):r)}function Bx(a){return a==="vertical"?"ns-resize":"ew-resize"}var jM=NM,zM={type:"selectDataRange",event:"dataRangeSelected",update:"update"},FM=function(a,r){r.eachComponent({mainType:"visualMap",query:a},function(t){t.setSelected(a.selected)})},VM=[{createOnAllSeries:!0,reset:function(a,r){var t=[];return r.eachComponent("visualMap",function(i){var s=a.pipelineContext;!i.isTargetSeries(a)||s&&s.large||t.push(LO(i.stateList,i.targetVisuals,y.bind(i.getValueState,i),i.getDataDimension(a.getData())))}),t}},{createOnAllSeries:!0,reset:function(a,r){var t=a.getData(),i=[];r.eachComponent("visualMap",function(s){if(s.isTargetSeries(a)){var l=s.getVisualMeta(y.bind(GM,null,a,s))||{stops:[],outerColors:[]},f=s.getDataDimension(t),h=t.getDimensionInfo(f);h!=null&&(l.dimension=h.index,i.push(l))}}),a.getData().setVisual("visualMeta",i)}}];function GM(a,r,t,i){for(var s=r.targetVisuals[i],l=si.prepareVisualTypes(s),f={color:Object($s.b)(a.getData(),"color")},h=0,d=l.length;h<d;h++){var p=l[h],m=s[p==="opacity"?"__alphaForOpacity":p];m&&m.applyVisual(t,b,A)}return f.color;function b(E){return f[E]}function A(E,P){f[E]=P}}var jx=y.each;function UM(a){var r=a&&a.visualMap;y.isArray(r)||(r=r?[r]:[]),jx(r,function(t){if(!!t){ff(t,"splitList")&&!ff(t,"pieces")&&(t.pieces=t.splitList,delete t.splitList);var i=t.pieces;i&&y.isArray(i)&&jx(i,function(s){y.isObject(s)&&(ff(s,"start")&&!ff(s,"min")&&(s.min=s.start),ff(s,"end")&&!ff(s,"max")&&(s.max=s.end))})}})}function ff(a,r){return a&&a.hasOwnProperty&&a.hasOwnProperty(r)}var zx=!1;function Fx(a){zx||(zx=!0,a.registerSubTypeDefaulter("visualMap",function(r){return!r.categories&&(!(r.pieces?r.pieces.length>0:r.splitNumber>0)||r.calculable)?"continuous":"piecewise"}),a.registerAction(zM,FM),Object(y.each)(VM,function(r){a.registerVisual(a.PRIORITY.VISUAL.COMPONENT,r)}),a.registerPreprocessor(UM))}function Vx(a){a.registerComponentModel(LM),a.registerComponentView(jM),Fx(a)}var HM=function(a){Object(de.b)(r,a);function r(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=r.type,t._pieceList=[],t}return r.prototype.optionUpdated=function(t,i){a.prototype.optionUpdated.apply(this,arguments),this.resetExtent();var s=this._mode=this._determineMode();this._pieceList=[],WM[this._mode].call(this,this._pieceList),this._resetSelected(t,i);var l=this.option.categories;this.resetVisual(function(f,h){s==="categories"?(f.mappingMethod="category",f.categories=y.clone(l)):(f.dataExtent=this.getExtent(),f.mappingMethod="piecewise",f.pieceList=y.map(this._pieceList,function(d){return d=y.clone(d),h!=="inRange"&&(d.visual=null),d}))})},r.prototype.completeVisualOption=function(){var t=this.option,i={},s=si.listVisualTypes(),l=this.isCategory();y.each(t.pieces,function(h){y.each(s,function(d){h.hasOwnProperty(d)&&(i[d]=1)})}),y.each(i,function(h,d){var p=!1;y.each(this.stateList,function(m){p=p||f(t,m,d)||f(t.target,m,d)},this),!p&&y.each(this.stateList,function(m){(t[m]||(t[m]={}))[d]=Ox.get(d,m==="inRange"?"active":"inactive",l)})},this);function f(h,d,p){return h&&h[d]&&h[d].hasOwnProperty(p)}a.prototype.completeVisualOption.apply(this,arguments)},r.prototype._resetSelected=function(t,i){var s=this.option,l=this._pieceList,f=(i?s:t).selected||{};if(s.selected=f,y.each(l,function(d,p){var m=this.getSelectedMapKey(d);f.hasOwnProperty(m)||(f[m]=!0)},this),s.selectedMode==="single"){var h=!1;y.each(l,function(d,p){var m=this.getSelectedMapKey(d);f[m]&&(h?f[m]=!1:h=!0)},this)}},r.prototype.getItemSymbol=function(){return this.get("itemSymbol")},r.prototype.getSelectedMapKey=function(t){return this._mode==="categories"?t.value+"":t.index+""},r.prototype.getPieceList=function(){return this._pieceList},r.prototype._determineMode=function(){var t=this.option;return t.pieces&&t.pieces.length>0?"pieces":this.option.categories?"categories":"splitNumber"},r.prototype.setSelected=function(t){this.option.selected=y.clone(t)},r.prototype.getValueState=function(t){var i=si.findPieceIndex(t,this._pieceList);return i!=null&&this.option.selected[this.getSelectedMapKey(this._pieceList[i])]?"inRange":"outOfRange"},r.prototype.findTargetDataIndices=function(t){var i=[],s=this._pieceList;return this.eachTargetSeries(function(l){var f=[],h=l.getData();h.each(this.getDataDimension(h),function(d,p){var m=si.findPieceIndex(d,s);m===t&&f.push(p)},this),i.push({seriesId:l.id,dataIndex:f})},this),i},r.prototype.getRepresentValue=function(t){var i;if(this.isCategory())i=t.value;else if(t.value!=null)i=t.value;else{var s=t.interval||[];i=s[0]===-Infinity&&s[1]===Infinity?0:(s[0]+s[1])/2}return i},r.prototype.getVisualMeta=function(t){if(this.isCategory())return;var i=[],s=["",""],l=this;function f(m,b){var A=l.getRepresentValue({interval:m});b||(b=l.getValueState(A));var E=t(A,b);m[0]===-Infinity?s[0]=E:m[1]===Infinity?s[1]=E:i.push({value:m[0],color:E},{value:m[1],color:E})}var h=this._pieceList.slice();if(!h.length)h.push({interval:[-Infinity,Infinity]});else{var d=h[0].interval[0];d!==-Infinity&&h.unshift({interval:[-Infinity,d]}),d=h[h.length-1].interval[1],d!==Infinity&&h.push({interval:[d,Infinity]})}var p=-Infinity;return y.each(h,function(m){var b=m.interval;b&&(b[0]>p&&f([p,b[0]],"outOfRange"),f(b.slice()),p=b[1])},this),{stops:i,outerColors:s}},r.type="visualMap.piecewise",r.defaultOption=Object(ni.d)(Ud.defaultOption,{selected:null,minOpen:!1,maxOpen:!1,align:"auto",itemWidth:20,itemHeight:14,itemSymbol:"roundRect",pieces:null,categories:null,splitNumber:5,selectedMode:"multiple",itemGap:10,hoverLink:!0}),r}(Ud),WM={splitNumber:function(a){var r=this.option,t=Math.min(r.precision,20),i=this.getExtent(),s=r.splitNumber;s=Math.max(parseInt(s,10),1),r.splitNumber=s;for(var l=(i[1]-i[0])/s;+l.toFixed(t)!==l&&t<5;)t++;r.precision=t,l=+l.toFixed(t),r.minOpen&&a.push({interval:[-Infinity,i[0]],close:[0,0]});for(var f=0,h=i[0];f<s;h+=l,f++){var d=f===s-1?i[1]:h+l;a.push({interval:[h,d],close:[1,1]})}r.maxOpen&&a.push({interval:[i[1],Infinity],close:[0,0]}),Object(Ne.s)(a),y.each(a,function(p,m){p.index=m,p.text=this.formatValueText(p.interval)},this)},categories:function(a){var r=this.option;y.each(r.categories,function(t){a.push({text:this.formatValueText(t,!0),value:t})},this),Gx(r,a)},pieces:function(a){var r=this.option;y.each(r.pieces,function(t,i){y.isObject(t)||(t={value:t});var s={text:"",index:i};if(t.label!=null&&(s.text=t.label),t.hasOwnProperty("value")){var l=s.value=t.value;s.interval=[l,l],s.close=[1,1]}else{for(var f=s.interval=[],h=s.close=[0,0],d=[1,0,1],p=[-Infinity,Infinity],m=[],b=0;b<2;b++){for(var A=[["gte","gt","min"],["lte","lt","max"]][b],E=0;E<3&&f[b]==null;E++)f[b]=t[A[E]],h[b]=d[E],m[b]=E===2;f[b]==null&&(f[b]=p[b])}m[0]&&f[1]===Infinity&&(h[0]=0),m[1]&&f[0]===-Infinity&&(h[1]=0),f[0]===f[1]&&h[0]&&h[1]&&(s.value=f[0])}s.visual=si.retrieveVisuals(t),a.push(s)},this),Gx(r,a),Object(Ne.s)(a),y.each(a,function(t){var i=t.close,s=[["<","\u2264"][i[1]],[">","\u2265"][i[0]]];t.text=t.text||this.formatValueText(t.value!=null?t.value:t.interval,!1,s)},this)}};function Gx(a,r){var t=a.inverse;(a.orient==="vertical"?!t:t)&&r.reverse()}var YM=HM,XM=function(a){Object(de.b)(r,a);function r(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=r.type,t}return r.prototype.doRender=function(){var t=this.group;t.removeAll();var i=this.visualMapModel,s=i.get("textGap"),l=i.textStyleModel,f=l.getFont(),h=l.getTextColor(),d=this._getItemAlign(),p=i.itemSize,m=this._getViewData(),b=m.endsText,A=y.retrieve(i.get("showLabel",!0),!b);b&&this._renderEndsText(t,b[0],p,A,d),y.each(m.viewPieceList,function(E){var P=E.piece,j=new pr.a;j.onclick=y.bind(this._onItemClick,this,P),this._enableHoverLink(j,E.indexInModelPieceList);var J=i.getRepresentValue(P);if(this._createItemSymbol(j,J,[0,0,p[0],p[1]]),A){var dt=this.visualMapModel.getValueState(J);j.add(new en.a({style:{x:d==="right"?-s:p[0]+s,y:p[1]/2,text:P.text,verticalAlign:"middle",align:d,font:f,fill:h,opacity:dt==="outOfRange"?.5:1}}))}t.add(j)},this),b&&this._renderEndsText(t,b[1],p,A,d),Tr.b(i.get("orient"),t,i.get("itemGap")),this.renderBackground(t),this.positionGroup(t)},r.prototype._enableHoverLink=function(t,i){var s=this;t.on("mouseover",function(){return l("highlight")}).on("mouseout",function(){return l("downplay")});var l=function(f){var h=s.visualMapModel;h.option.hoverLink&&s.api.dispatchAction({type:f,batch:Hd(h.findTargetDataIndices(i),h)})}},r.prototype._getItemAlign=function(){var t=this.visualMapModel,i=t.option;if(i.orient==="vertical")return Px(t,this.api,t.itemSize);var s=i.align;return(!s||s==="auto")&&(s="left"),s},r.prototype._renderEndsText=function(t,i,s,l,f){if(!!i){var h=new pr.a,d=this.visualMapModel.textStyleModel;h.add(new en.a({style:{x:l?f==="right"?s[0]:0:s[0]/2,y:s[1]/2,verticalAlign:"middle",align:l?f:"center",text:i,font:d.getFont(),fill:d.getTextColor()}})),t.add(h)}},r.prototype._getViewData=function(){var t=this.visualMapModel,i=y.map(t.getPieceList(),function(h,d){return{piece:h,indexInModelPieceList:d}}),s=t.get("text"),l=t.get("orient"),f=t.get("inverse");return(l==="horizontal"?f:!f)?i.reverse():s&&(s=s.slice().reverse()),{viewPieceList:i,endsText:s}},r.prototype._createItemSymbol=function(t,i,s){t.add(Object(lr.a)(this.getControllerVisual(i,"symbol"),s[0],s[1],s[2],s[3],this.getControllerVisual(i,"color")))},r.prototype._onItemClick=function(t){var i=this.visualMapModel,s=i.option,l=y.clone(s.selected),f=i.getSelectedMapKey(t);s.selectedMode==="single"?(l[f]=!0,y.each(l,function(h,d){l[d]=d===f})):l[f]=!l[f],this.api.dispatchAction({type:"selectDataRange",from:this.uid,visualMapId:this.visualMapModel.id,selected:l})},r.type="visualMap.piecewise",r}(Ex),ZM=XM;function Ux(a){a.registerComponentModel(YM),a.registerComponentView(ZM),Fx(a)}function KM(a){Object(B.a)(Vx),Object(B.a)(Ux)}var kM={label:{enabled:!0},decal:{show:!1}},Hx=Object(sr.o)(),QM={};function JM(a,r){var t=a.getModel("aria");if(!t.get("enabled"))return;var i=y.clone(kM);y.merge(i.label,a.getLocaleModel().get("aria"),!1),y.merge(t.option,i,!1),s(),l();function s(){var p=t.getModel("decal"),m=p.get("show");if(m){var b=y.createHashMap();a.eachSeries(function(A){if(!!A.useColorPaletteOnData){var E=b.get(A.type);E||(E={},b.set(A.type,E)),Hx(A).scope=E}}),a.eachRawSeries(function(A){if(a.isSeriesFiltered(A))return;if(typeof A.enableAriaDecal=="function"){A.enableAriaDecal();return}var E=A.getData();if(A.useColorPaletteOnData){var P=A.getRawData(),j={},J=Hx(A).scope;E.each(function(zt){var jt=E.getRawIndex(zt);j[jt]=zt});var dt=P.count();P.each(function(zt){var jt=j[zt],kt=P.getName(zt)||zt+"",te=Object(Yf.b)(A.ecModel,kt,J,dt),ue=E.getItemVisual(jt,"decal");E.setItemVisual(jt,"decal",wt(ue,te))})}else{var St=Object(Yf.b)(A.ecModel,A.name,QM,a.getSeriesCount()),Ot=E.getVisual("decal");E.setVisual("decal",wt(Ot,St))}function wt(zt,jt){var kt=zt?y.extend(y.extend({},jt),zt):jt;return kt.dirty=!0,kt}})}}function l(){var p=a.getLocaleModel().get("aria"),m=t.getModel("label");if(m.option=y.defaults(m.option,p),!!m.get("enabled")){var b=r.getZr().dom;if(m.get("description")){b.setAttribute("aria-label",m.get("description"));return}var A=a.getSeriesCount(),E=m.get(["data","maxCount"])||10,P=m.get(["series","maxCount"])||10,j=Math.min(A,P),J;if(!(A<1)){var dt=h();if(dt){var St=m.get(["general","withTitle"]);J=f(St,{title:dt})}else J=m.get(["general","withoutTitle"]);var Ot=[],wt=A>1?m.get(["series","multiple","prefix"]):m.get(["series","single","prefix"]);J+=f(wt,{seriesCount:A}),a.eachSeries(function(te,ue){if(ue<j){var me=void 0,ve=te.get("name"),Me=ve?"withName":"withoutName";me=A>1?m.get(["series","multiple",Me]):m.get(["series","single",Me]),me=f(me,{seriesId:te.seriesIndex,seriesName:te.get("name"),seriesType:d(te.subType)});var Ee=te.getData();if(Ee.count()>E){var Oe=m.get(["data","partialData"]);me+=f(Oe,{displayCnt:E})}else me+=m.get(["data","allData"]);for(var we=[],We=0;We<Ee.count();We++)if(We<E){var $e=Ee.getName(We),Je=Object(tl.e)(Ee,We),fr=m.get(["data",$e?"withName":"withoutName"]);we.push(f(fr,{name:$e,value:Je}))}var Vr=m.get(["data","separator","middle"]),wr=m.get(["data","separator","end"]);me+=we.join(Vr)+wr,Ot.push(me)}});var zt=m.getModel(["series","multiple","separator"]),jt=zt.get("middle"),kt=zt.get("end");J+=Ot.join(jt)+kt,b.setAttribute("aria-label",J)}}}function f(p,m){if(typeof p!="string")return p;var b=p;return y.each(m,function(A,E){b=b.replace(new RegExp("\\{\\s*"+E+"\\s*\\}","g"),A)}),b}function h(){var p=a.get("title");return p&&p.length&&(p=p[0]),p&&p.text}function d(p){return a.getLocaleModel().get(["series","typeNames"])[p]||"\u81EA\u5B9A\u4E49\u56FE"}}function $M(a){if(!(!a||!a.aria)){var r=a.aria;r.show!=null&&(r.enabled=r.show),r.label=r.label||{},y.each(["description","general","series","data"],function(t){r[t]!=null&&(r.label[t]=r[t])})}}function qM(a){a.registerPreprocessor($M),a.registerVisual(a.PRIORITY.VISUAL.ARIA,JM)}var Wd=S("t9mh"),Wx={value:"eq","<":"lt","<=":"lte",">":"gt",">=":"gte","=":"eq","!=":"ne","<>":"ne"},tD=function(){function a(r){var t=this._condVal=Object(y.isString)(r)?new RegExp(r):Object(y.isRegExp)(r)?r:null;if(t==null){var i="";Object(Nn.b)(i)}}return a.prototype.evaluate=function(r){var t=typeof r;return t==="string"?this._condVal.test(r):t==="number"?this._condVal.test(r+""):!1},a}(),eD=function(){function a(){}return a.prototype.evaluate=function(){return this.value},a}(),rD=function(){function a(){}return a.prototype.evaluate=function(){for(var r=this.children,t=0;t<r.length;t++)if(!r[t].evaluate())return!1;return!0},a}(),nD=function(){function a(){}return a.prototype.evaluate=function(){for(var r=this.children,t=0;t<r.length;t++)if(r[t].evaluate())return!0;return!1},a}(),iD=function(){function a(){}return a.prototype.evaluate=function(){return!this.child.evaluate()},a}(),aD=function(){function a(){}return a.prototype.evaluate=function(){for(var r=!!this.valueParser,t=this.getValue,i=t(this.valueGetterParam),s=r?this.valueParser(i):null,l=0;l<this.subCondList.length;l++)if(!this.subCondList[l].evaluate(r?s:i))return!1;return!0},a}();function Wy(a,r){if(a===!0||a===!1){var t=new eD;return t.value=a,t}var i="";return Xx(a)||Object(Nn.b)(i),a.and?Yx("and",a,r):a.or?Yx("or",a,r):a.not?oD(a,r):sD(a,r)}function Yx(a,r,t){var i=r[a],s="";Object(y.isArray)(i)||Object(Nn.b)(s),i.length||Object(Nn.b)(s);var l=a==="and"?new rD:new nD;return l.children=Object(y.map)(i,function(f){return Wy(f,t)}),l.children.length||Object(Nn.b)(s),l}function oD(a,r){var t=a.not,i="";Xx(t)||Object(Nn.b)(i);var s=new iD;return s.child=Wy(t,r),s.child||Object(Nn.b)(i),s}function sD(a,r){for(var t="",i=r.prepareGetValue(a),s=[],l=Object(y.keys)(a),f=a.parser,h=f?Object(Wd.c)(f):null,d=0;d<l.length;d++){var p=l[d];if(!(p==="parser"||r.valueGetterAttrMap.get(p))){var m=Object(y.hasOwn)(Wx,p)?Wx[p]:p,b=a[p],A=h?h(b):b,E=Object(Wd.b)(m,A)||m==="reg"&&new tD(A);E||Object(Nn.b)(t),s.push(E)}}s.length||Object(Nn.b)(t);var P=new aD;return P.valueGetterParam=i,P.valueParser=h,P.getValue=r.getValue,P.subCondList=s,P}function Xx(a){return Object(y.isObject)(a)&&!Object(y.isArrayLike)(a)}var lD=function(){function a(r,t){this._cond=Wy(r,t)}return a.prototype.evaluate=function(){return this._cond.evaluate()},a}();function uD(a,r){return new lD(a,r)}var fD={type:"echarts:filter",transform:function(a){for(var r=a.upstream,t,i=uD(a.config,{valueGetterAttrMap:Object(y.createHashMap)({dimension:!0}),prepareGetValue:function(h){var d="",p=h.dimension;Object(y.hasOwn)(h,"dimension")||Object(Nn.b)(d);var m=r.getDimensionInfo(p);return m||Object(Nn.b)(d),{dimIdx:m.index}},getValue:function(h){return r.retrieveValueFromItem(t,h.dimIdx)}}),s=[],l=0,f=r.count();l<f;l++)t=r.getRawDataItem(l),i.evaluate()&&s.push(t);return{data:s}}},DD="",cD={type:"echarts:sort",transform:function(a){var r=a.upstream,t=a.config,i="",s=Object(sr.r)(t);s.length||Object(Nn.b)(i);var l=[];Object(y.each)(s,function(m){var b=m.dimension,A=m.order,E=m.parser,P=m.incomparable;if(b==null&&Object(Nn.b)(i),A!=="asc"&&A!=="desc"&&Object(Nn.b)(i),P&&P!=="min"&&P!=="max"){var j="";Object(Nn.b)(j)}if(A!=="asc"&&A!=="desc"){var J="";Object(Nn.b)(J)}var dt=r.getDimensionInfo(b);dt||Object(Nn.b)(i);var St=E?Object(Wd.c)(E):null;E&&!St&&Object(Nn.b)(i),l.push({dimIdx:dt.index,parser:St,comparator:new Wd.a(A,P)})});var f=r.sourceFormat;f!==Nc.c&&f!==Nc.e&&Object(Nn.b)(i);for(var h=[],d=0,p=r.count();d<p;d++)h.push(r.getRawDataItem(d));return h.sort(function(m,b){for(var A=0;A<l.length;A++){var E=l[A],P=r.retrieveValueFromItem(m,E.dimIdx),j=r.retrieveValueFromItem(b,E.dimIdx);E.parser&&(P=E.parser(P),j=E.parser(j));var J=E.comparator.evaluate(P,j);if(J!==0)return J}return 0}),{data:h}}};function hD(a){a.registerTransform(fD),a.registerTransform(cD)}var vD=S("XoG2");Object(B.a)([H.a]),Object(B.a)([nr]),Object(B.a)([Ea,Po,vs,Qd,up,_u,Du,Xp,ag,hv,ns,Hl,id,um,_m,Dm,he,xr,Jx,ab,yb,gS]),Object(B.a)(FS),Object(B.a)(x_),Object(B.a)(Bf),Object(B.a)(B_),Object(B.a)(Zu),Object(B.a)(Y_),Object(B.a)(tT),Object(B.a)(eO),Object(B.a)(AO),Object(B.a)(Vc),Object(B.a)(YO),Object(B.a)(KO),Object(B.a)(cA),Object(B.a)(SA),Object(B.a)(EA),Object(B.a)(jA),Object(B.a)(qA),Object(B.a)(SM),Object(B.a)(xx),Object(B.a)(Tx),Object(B.a)(KM),Object(B.a)(Vx),Object(B.a)(Ux),Object(B.a)(qM),Object(B.a)(hD),Object(B.a)(vD.a)},Mdki:function(Ge,U,S){"use strict";var B=S("bYtY"),mt=S("4NO4"),H=Object(mt.o)();function ht(V){var lt=V.mainData,at=V.datas;at||(at={main:lt},V.datasAttr={main:"data"}),V.datas=V.mainData=null,q(lt,at,V),Object(B.each)(at,function(gt){Object(B.each)(lt.TRANSFERABLE_METHODS,function(Tt){gt.wrapMethod(Tt,Object(B.curry)(y,V))})}),lt.wrapMethod("cloneShallow",Object(B.curry)(it,V)),Object(B.each)(lt.CHANGABLE_METHODS,function(gt){lt.wrapMethod(gt,Object(B.curry)(ot,V))}),Object(B.assert)(at[lt.dataType]===lt)}function y(V,lt){if(G(this)){var at=Object(B.extend)({},H(this).datas);at[this.dataType]=lt,q(lt,at,V)}else N(lt,this.dataType,H(this).mainData,V);return lt}function ot(V,lt){return V.struct&&V.struct.update(),lt}function it(V,lt){return Object(B.each)(H(lt).datas,function(at,gt){at!==lt&&N(at.cloneShallow(),gt,lt,V)}),lt}function Q(V){var lt=H(this).mainData;return V==null||lt==null?lt:H(lt).datas[V]}function Y(){var V=H(this).mainData;return V==null?[{data:V}]:Object(B.map)(Object(B.keys)(H(V).datas),function(lt){return{type:lt,data:H(V).datas[lt]}})}function G(V){return H(V).mainData===V}function q(V,lt,at){H(V).datas={},Object(B.each)(lt,function(gt,Tt){N(gt,Tt,V,at)})}function N(V,lt,at,gt){H(at).datas[lt]=V,H(V).mainData=at,V.dataType=lt,gt.struct&&(V[gt.structAttr]=gt.struct,gt.struct[gt.datasAttr[lt]]=V),V.getLinkedData=Q,V.getLinkedDataAll=Y}U.a=ht},MwEJ:function(Ge,U,S){"use strict";var B=S("bYtY"),mt=S("YXkt"),H=S("sdST"),ht=S("L0Ub"),y=S("4NO4"),ot=S("HznI"),it=function(){function nt(W){this.coordSysDims=[],this.axisMap=Object(B.createHashMap)(),this.categoryAxisMap=Object(B.createHashMap)(),this.coordSysName=W}return nt}();function Q(nt){var W=nt.get("coordinateSystem"),X=new it(W),et=Y[W];if(et)return et(nt,X,X.axisMap,X.categoryAxisMap),X}var Y={cartesian2d:function(nt,W,X,et){var k=nt.getReferringComponents("xAxis",y.b).models[0],st=nt.getReferringComponents("yAxis",y.b).models[0];W.coordSysDims=["x","y"],X.set("x",k),X.set("y",st),G(k)&&(et.set("x",k),W.firstCategoryDimIndex=0),G(st)&&(et.set("y",st),W.firstCategoryDimIndex==null&&(W.firstCategoryDimIndex=1))},singleAxis:function(nt,W,X,et){var k=nt.getReferringComponents("singleAxis",y.b).models[0];W.coordSysDims=["single"],X.set("single",k),G(k)&&(et.set("single",k),W.firstCategoryDimIndex=0)},polar:function(nt,W,X,et){var k=nt.getReferringComponents("polar",y.b).models[0],st=k.findAxisModel("radiusAxis"),$=k.findAxisModel("angleAxis");W.coordSysDims=["radius","angle"],X.set("radius",st),X.set("angle",$),G(st)&&(et.set("radius",st),W.firstCategoryDimIndex=0),G($)&&(et.set("angle",$),W.firstCategoryDimIndex==null&&(W.firstCategoryDimIndex=1))},geo:function(nt,W,X,et){W.coordSysDims=["lng","lat"]},parallel:function(nt,W,X,et){var k=nt.ecModel,st=k.getComponent("parallel",nt.get("parallelIndex")),$=W.coordSysDims=st.dimensions.slice();Object(B.each)(st.parallelAxisIndex,function(D,T){var O=k.getComponent("parallelAxis",D),C=$[T];X.set(C,O),G(O)&&(et.set(C,O),W.firstCategoryDimIndex==null&&(W.firstCategoryDimIndex=T))})}};function G(nt){return nt.get("type")==="category"}var q=S("7G+c"),N=S("7hqr"),V=S("D5nY"),lt=S("B/3G");function at(nt,W,X){X=X||{},Object(q.e)(nt)||(nt=Object(q.c)(nt));var et=W.get("coordinateSystem"),k=ot.a.get(et),st=Q(W),$;st&&st.coordSysDims&&($=B.map(st.coordSysDims,function(pt){var At={name:pt},rt=st.axisMap.get(pt);if(rt){var _t=rt.get("type");At.type=Object(ht.a)(_t)}return At})),$||($=k&&(k.getDimensionsInfo?k.getDimensionsInfo():k.dimensions.slice())||["x","y"]);var D=X.useEncodeDefaulter,T=Object(H.a)(nt,{coordDimensions:$,generateCoord:X.generateCoord,encodeDefaulter:B.isFunction(D)?D:D?B.curry(V.c,$,W):null}),O,C;st&&B.each(T,function(pt,At){var rt=pt.coordDim,_t=st.categoryAxisMap.get(rt);_t&&(O==null&&(O=At),pt.ordinalMeta=_t.getOrdinalMeta(),X.createInvertedIndices&&(pt.createInvertedIndices=!0)),pt.otherDims.itemName!=null&&(C=!0)}),!C&&O!=null&&(T[O].otherDims.itemName=0);var L=Object(N.a)(W,T),w=new mt.a(T,W);w.setCalculationInfo(L);var z=O!=null&&gt(nt)?function(pt,At,rt,_t){return _t===O?rt:this.defaultDimValueGetter(pt,At,rt,_t)}:null;return w.hasItemOption=!1,w.initData(nt,null,z),w}function gt(nt){if(nt.sourceFormat===lt.f){var W=Tt(nt.data||[]);return W!=null&&!B.isArray(Object(y.h)(W))}}function Tt(nt){for(var W=0;W<nt.length&&nt[W]==null;)W++;return nt[W]}var bt=U.a=at},NC18:function(Ge,U,S){"use strict";S.d(U,"a",function(){return $}),S.d(U,"b",function(){return D}),S.d(U,"c",function(){return T});var B=S("IaEH"),mt=S("y+Vt"),H=S("IMiH"),ht=S("QBsz"),y=H.a.CMD,ot=[[],[],[]],it=Math.sqrt,Q=Math.atan2;function Y(O,C){var L=O.data,w=O.len(),z,pt,At,rt,_t,xt,ft=y.M,Mt=y.C,K=y.L,R=y.R,tt=y.A,Z=y.Q;for(At=0,rt=0;At<w;){switch(z=L[At++],rt=At,pt=0,z){case ft:pt=1;break;case K:pt=1;break;case Mt:pt=3;break;case Z:pt=2;break;case tt:var ct=C[4],vt=C[5],Ct=it(C[0]*C[0]+C[1]*C[1]),Bt=it(C[2]*C[2]+C[3]*C[3]),It=Q(-C[1]/Bt,C[0]/Ct);L[At]*=Ct,L[At++]+=ct,L[At]*=Bt,L[At++]+=vt,L[At++]*=Ct,L[At++]*=Bt,L[At++]+=It,L[At++]+=It,At+=2,rt=At;break;case R:xt[0]=L[At++],xt[1]=L[At++],Object(ht.applyTransform)(xt,xt,C),L[rt++]=xt[0],L[rt++]=xt[1],xt[0]+=L[At++],xt[1]+=L[At++],Object(ht.applyTransform)(xt,xt,C),L[rt++]=xt[0],L[rt++]=xt[1]}for(_t=0;_t<pt;_t++){var Wt=ot[_t];Wt[0]=L[At++],Wt[1]=L[At++],Object(ht.applyTransform)(Wt,Wt,C),L[rt++]=Wt[0],L[rt++]=Wt[1]}}O.increaseVersion()}var G=S("bYtY"),q=Math.sqrt,N=Math.sin,V=Math.cos,lt=Math.PI;function at(O){return Math.sqrt(O[0]*O[0]+O[1]*O[1])}function gt(O,C){return(O[0]*C[0]+O[1]*C[1])/(at(O)*at(C))}function Tt(O,C){return(O[0]*C[1]<O[1]*C[0]?-1:1)*Math.acos(gt(O,C))}function bt(O,C,L,w,z,pt,At,rt,_t,xt,ft){var Mt=_t*(lt/180),K=V(Mt)*(O-L)/2+N(Mt)*(C-w)/2,R=-1*N(Mt)*(O-L)/2+V(Mt)*(C-w)/2,tt=K*K/(At*At)+R*R/(rt*rt);tt>1&&(At*=q(tt),rt*=q(tt));var Z=(z===pt?-1:1)*q((At*At*(rt*rt)-At*At*(R*R)-rt*rt*(K*K))/(At*At*(R*R)+rt*rt*(K*K)))||0,ct=Z*At*R/rt,vt=Z*-rt*K/At,Ct=(O+L)/2+V(Mt)*ct-N(Mt)*vt,Bt=(C+w)/2+N(Mt)*ct+V(Mt)*vt,It=Tt([1,0],[(K-ct)/At,(R-vt)/rt]),Wt=[(K-ct)/At,(R-vt)/rt],ee=[(-1*K-ct)/At,(-1*R-vt)/rt],ae=Tt(Wt,ee);if(gt(Wt,ee)<=-1&&(ae=lt),gt(Wt,ee)>=1&&(ae=0),ae<0){var ye=Math.round(ae/lt*1e6)/1e6;ae=lt*2+ye%2*lt}ft.addData(xt,Ct,Bt,At,rt,It,ae,Mt,pt)}var nt=/([mlvhzcqtsa])([^mlvhzcqtsa]*)/ig,W=/-?([0-9]*\.)?[0-9]+([eE]-?[0-9]+)?/g;function X(O){var C=new H.a;if(!O)return C;var L=0,w=0,z=L,pt=w,At,rt=H.a.CMD,_t=O.match(nt);if(!_t)return C;for(var xt=0;xt<_t.length;xt++){for(var ft=_t[xt],Mt=ft.charAt(0),K=void 0,R=ft.match(W)||[],tt=R.length,Z=0;Z<tt;Z++)R[Z]=parseFloat(R[Z]);for(var ct=0;ct<tt;){var vt=void 0,Ct=void 0,Bt=void 0,It=void 0,Wt=void 0,ee=void 0,ae=void 0,ye=L,Le=w,_e=void 0,De=void 0;switch(Mt){case"l":L+=R[ct++],w+=R[ct++],K=rt.L,C.addData(K,L,w);break;case"L":L=R[ct++],w=R[ct++],K=rt.L,C.addData(K,L,w);break;case"m":L+=R[ct++],w+=R[ct++],K=rt.M,C.addData(K,L,w),z=L,pt=w,Mt="l";break;case"M":L=R[ct++],w=R[ct++],K=rt.M,C.addData(K,L,w),z=L,pt=w,Mt="L";break;case"h":L+=R[ct++],K=rt.L,C.addData(K,L,w);break;case"H":L=R[ct++],K=rt.L,C.addData(K,L,w);break;case"v":w+=R[ct++],K=rt.L,C.addData(K,L,w);break;case"V":w=R[ct++],K=rt.L,C.addData(K,L,w);break;case"C":K=rt.C,C.addData(K,R[ct++],R[ct++],R[ct++],R[ct++],R[ct++],R[ct++]),L=R[ct-2],w=R[ct-1];break;case"c":K=rt.C,C.addData(K,R[ct++]+L,R[ct++]+w,R[ct++]+L,R[ct++]+w,R[ct++]+L,R[ct++]+w),L+=R[ct-2],w+=R[ct-1];break;case"S":vt=L,Ct=w,_e=C.len(),De=C.data,At===rt.C&&(vt+=L-De[_e-4],Ct+=w-De[_e-3]),K=rt.C,ye=R[ct++],Le=R[ct++],L=R[ct++],w=R[ct++],C.addData(K,vt,Ct,ye,Le,L,w);break;case"s":vt=L,Ct=w,_e=C.len(),De=C.data,At===rt.C&&(vt+=L-De[_e-4],Ct+=w-De[_e-3]),K=rt.C,ye=L+R[ct++],Le=w+R[ct++],L+=R[ct++],w+=R[ct++],C.addData(K,vt,Ct,ye,Le,L,w);break;case"Q":ye=R[ct++],Le=R[ct++],L=R[ct++],w=R[ct++],K=rt.Q,C.addData(K,ye,Le,L,w);break;case"q":ye=R[ct++]+L,Le=R[ct++]+w,L+=R[ct++],w+=R[ct++],K=rt.Q,C.addData(K,ye,Le,L,w);break;case"T":vt=L,Ct=w,_e=C.len(),De=C.data,At===rt.Q&&(vt+=L-De[_e-4],Ct+=w-De[_e-3]),L=R[ct++],w=R[ct++],K=rt.Q,C.addData(K,vt,Ct,L,w);break;case"t":vt=L,Ct=w,_e=C.len(),De=C.data,At===rt.Q&&(vt+=L-De[_e-4],Ct+=w-De[_e-3]),L+=R[ct++],w+=R[ct++],K=rt.Q,C.addData(K,vt,Ct,L,w);break;case"A":Bt=R[ct++],It=R[ct++],Wt=R[ct++],ee=R[ct++],ae=R[ct++],ye=L,Le=w,L=R[ct++],w=R[ct++],K=rt.A,bt(ye,Le,L,w,ee,ae,Bt,It,Wt,K,C);break;case"a":Bt=R[ct++],It=R[ct++],Wt=R[ct++],ee=R[ct++],ae=R[ct++],ye=L,Le=w,L+=R[ct++],w+=R[ct++],K=rt.A,bt(ye,Le,L,w,ee,ae,Bt,It,Wt,K,C);break}}(Mt==="z"||Mt==="Z")&&(K=rt.Z,C.addData(K),L=z,w=pt),At=K}return C.toStatic(),C}var et=function(O){Object(B.a)(C,O);function C(){return O!==null&&O.apply(this,arguments)||this}return C.prototype.applyTransform=function(L){},C}(mt.b);function k(O){return O.setData!=null}function st(O,C){var L=X(O),w=Object(G.extend)({},C);return w.buildPath=function(z){if(k(z)){z.setData(L.data);var pt=z.getContext();pt&&z.rebuildPath(pt,1)}else{var pt=z;L.rebuildPath(pt,1)}},w.applyTransform=function(z){Y(L,z),this.dirtyShape()},w}function $(O,C){return new et(st(O,C))}function D(O,C){var L=st(O,C),w=function(z){Object(B.a)(pt,z);function pt(At){var rt=z.call(this,At)||this;return rt.applyTransform=L.applyTransform,rt.buildPath=L.buildPath,rt}return pt}(et);return w}function T(O,C){for(var L=[],w=O.length,z=0;z<w;z++){var pt=O[z];pt.path||pt.createPathProxy(),pt.shapeChanged()&&pt.buildPath(pt.path,pt.shape,!0),L.push(pt.path)}var At=new mt.b(C);return At.createPathProxy(),At.buildPath=function(rt){if(k(rt)){rt.appendPath(L);var _t=rt.getContext();_t&&rt.rebuildPath(_t,1)}},At}},"NDc/":function(Ge,U,S){"use strict";S.d(U,"a",function(){return H}),S.d(U,"b",function(){return ht});function B(y,ot,it){var Q=ot.x==null?0:ot.x,Y=ot.x2==null?1:ot.x2,G=ot.y==null?0:ot.y,q=ot.y2==null?0:ot.y2;ot.global||(Q=Q*it.width+it.x,Y=Y*it.width+it.x,G=G*it.height+it.y,q=q*it.height+it.y),Q=isNaN(Q)?0:Q,Y=isNaN(Y)?1:Y,G=isNaN(G)?0:G,q=isNaN(q)?0:q;var N=y.createLinearGradient(Q,G,Y,q);return N}function mt(y,ot,it){var Q=it.width,Y=it.height,G=Math.min(Q,Y),q=ot.x==null?.5:ot.x,N=ot.y==null?.5:ot.y,V=ot.r==null?.5:ot.r;ot.global||(q=q*Q+it.x,N=N*Y+it.y,V=V*G);var lt=y.createRadialGradient(q,N,0,q,N,V);return lt}function H(y,ot,it){for(var Q=ot.type==="radial"?mt(y,ot,it):B(y,ot,it),Y=ot.colorStops,G=0;G<Y.length;G++)Q.addColorStop(Y[G].offset,Y[G].color);return Q}function ht(y,ot){if(y===ot||!y&&!ot)return!1;if(!y||!ot||y.length!==ot.length)return!0;for(var it=0;it<y.length;it++)if(y[it]!==ot[it])return!0;return!1}},NohK:function(Ge,U,S){"use strict";Object.defineProperty(U,"__esModule",{value:!0}),U.default=void 0;var B=function(H){var ht=arguments.length>1&&arguments[1]!==void 0?arguments[1]:60,y=null;return function(){for(var ot=this,it=arguments.length,Q=new Array(it),Y=0;Y<it;Y++)Q[Y]=arguments[Y];clearTimeout(y),y=setTimeout(function(){H.apply(ot,Q)},ht)}};U.default=B},OELB:function(Ge,U,S){"use strict";S.d(U,"k",function(){return ht}),S.d(U,"o",function(){return y}),S.d(U,"u",function(){return ot}),S.d(U,"b",function(){return it}),S.d(U,"f",function(){return Q}),S.d(U,"g",function(){return Y}),S.d(U,"e",function(){return G}),S.d(U,"d",function(){return q}),S.d(U,"a",function(){return N}),S.d(U,"t",function(){return V}),S.d(U,"j",function(){return lt}),S.d(U,"n",function(){return gt}),S.d(U,"q",function(){return Tt}),S.d(U,"r",function(){return bt}),S.d(U,"l",function(){return nt}),S.d(U,"p",function(){return W}),S.d(U,"s",function(){return X}),S.d(U,"m",function(){return et}),S.d(U,"i",function(){return k}),S.d(U,"h",function(){return st}),S.d(U,"c",function(){return D});var B=S("bYtY"),mt=1e-4;function H(T){return T.replace(/^\s+|\s+$/g,"")}function ht(T,O,C,L){var w=O[1]-O[0],z=C[1]-C[0];if(w===0)return z===0?C[0]:(C[0]+C[1])/2;if(L)if(w>0){if(T<=O[0])return C[0];if(T>=O[1])return C[1]}else{if(T>=O[0])return C[0];if(T<=O[1])return C[1]}else{if(T===O[0])return C[0];if(T===O[1])return C[1]}return(T-O[0])/w*z+C[0]}function y(T,O){switch(T){case"center":case"middle":T="50%";break;case"left":case"top":T="0%";break;case"right":case"bottom":T="100%";break}return typeof T=="string"?H(T).match(/%$/)?parseFloat(T)/100*O:parseFloat(T):T==null?NaN:+T}function ot(T,O,C){return O==null&&(O=10),O=Math.min(Math.max(0,O),20),T=(+T).toFixed(O),C?T:+T}function it(T){return T.sort(function(O,C){return O-C}),T}function Q(T){if(T=+T,isNaN(T))return 0;for(var O=1,C=0;Math.round(T*O)/O!==T;)O*=10,C++;return C}function Y(T){var O=T.toString(),C=O.indexOf("e");if(C>0){var L=+O.slice(C+1);return L<0?-L:0}else{var w=O.indexOf(".");return w<0?0:O.length-1-w}}function G(T,O){var C=Math.log,L=Math.LN10,w=Math.floor(C(T[1]-T[0])/L),z=Math.round(C(Math.abs(O[1]-O[0]))/L),pt=Math.min(Math.max(-w+z,0),20);return isFinite(pt)?pt:20}function q(T,O,C){if(!T[O])return 0;var L=B.reduce(T,function(R,tt){return R+(isNaN(tt)?0:tt)},0);if(L===0)return 0;for(var w=Math.pow(10,C),z=B.map(T,function(R){return(isNaN(R)?0:R)/L*w*100}),pt=w*100,At=B.map(z,function(R){return Math.floor(R)}),rt=B.reduce(At,function(R,tt){return R+tt},0),_t=B.map(z,function(R,tt){return R-At[tt]});rt<pt;){for(var xt=Number.NEGATIVE_INFINITY,ft=null,Mt=0,K=_t.length;Mt<K;++Mt)_t[Mt]>xt&&(xt=_t[Mt],ft=Mt);++At[ft],_t[ft]=0,++rt}return At[O]/w}var N=9007199254740991;function V(T){var O=Math.PI*2;return(T%O+O)%O}function lt(T){return T>-mt&&T<mt}var at=/^(?:(\d{4})(?:[-\/](\d{1,2})(?:[-\/](\d{1,2})(?:[T ](\d{1,2})(?::(\d{1,2})(?::(\d{1,2})(?:[.,](\d+))?)?)?(Z|[\+\-]\d\d:?\d\d)?)?)?)?)?$/;function gt(T){if(T instanceof Date)return T;if(typeof T=="string"){var O=at.exec(T);if(!O)return new Date(NaN);if(O[8]){var C=+O[4]||0;return O[8].toUpperCase()!=="Z"&&(C-=+O[8].slice(0,3)),new Date(Date.UTC(+O[1],+(O[2]||1)-1,+O[3]||1,C,+(O[5]||0),+O[6]||0,+O[7]||0))}else return new Date(+O[1],+(O[2]||1)-1,+O[3]||1,+O[4]||0,+(O[5]||0),+O[6]||0,+O[7]||0)}else if(T==null)return new Date(NaN);return new Date(Math.round(T))}function Tt(T){return Math.pow(10,bt(T))}function bt(T){if(T===0)return 0;var O=Math.floor(Math.log(T)/Math.LN10);return T/Math.pow(10,O)>=10&&O++,O}function nt(T,O){var C=bt(T),L=Math.pow(10,C),w=T/L,z;return O?w<1.5?z=1:w<2.5?z=2:w<4?z=3:w<7?z=5:z=10:w<1?z=1:w<2?z=2:w<3?z=3:w<5?z=5:z=10,T=z*L,C>=-20?+T.toFixed(C<0?-C:0):T}function W(T,O){var C=(T.length-1)*O+1,L=Math.floor(C),w=+T[L-1],z=C-L;return z?w+z*(T[L]-w):w}function X(T){T.sort(function(rt,_t){return At(rt,_t,0)?-1:1});for(var O=-Infinity,C=1,L=0;L<T.length;){for(var w=T[L].interval,z=T[L].close,pt=0;pt<2;pt++)w[pt]<=O&&(w[pt]=O,z[pt]=pt?1:1-C),O=w[pt],C=z[pt];w[0]===w[1]&&z[0]*z[1]!=1?T.splice(L,1):L++}return T;function At(rt,_t,xt){return rt.interval[xt]<_t.interval[xt]||rt.interval[xt]===_t.interval[xt]&&(rt.close[xt]-_t.close[xt]==(xt?-1:1)||!xt&&At(rt,_t,1))}}function et(T){var O=parseFloat(T);return O==T&&(O!==0||typeof T!="string"||T.indexOf("x")<=0)?O:NaN}function k(T){return!isNaN(et(T))}function st(){return Math.round(Math.random()*9)}function $(T,O){return O===0?T:$(O,T%O)}function D(T,O){return T==null?O:O==null?T:T*O/$(T,O)}},OKJ2:function(Ge,U,S){"use strict";S.d(U,"a",function(){return y}),S.d(U,"b",function(){return ot});var B=S("bYtY"),mt=S("KxfA"),H=S("7aKB"),ht=/\{@(.+?)\}/g,y=function(){function it(){}return it.prototype.getDataParams=function(Q,Y){var G=this.getData(Y),q=this.getRawValue(Q,Y),N=G.getRawIndex(Q),V=G.getName(Q),lt=G.getRawDataItem(Q),at=G.getItemVisual(Q,"style"),gt=at&&at[G.getItemVisual(Q,"drawType")||"fill"],Tt=at&&at.stroke,bt=this.mainType,nt=bt==="series",W=G.userOutput;return{componentType:bt,componentSubType:this.subType,componentIndex:this.componentIndex,seriesType:nt?this.subType:null,seriesIndex:this.seriesIndex,seriesId:nt?this.id:null,seriesName:nt?this.name:null,name:V,dataIndex:N,data:lt,dataType:Y,value:q,color:gt,borderColor:Tt,dimensionNames:W?W.dimensionNames:null,encode:W?W.encode:null,$vars:["seriesName","name","value"]}},it.prototype.getFormattedLabel=function(Q,Y,G,q,N,V){Y=Y||"normal";var lt=this.getData(G),at=this.getDataParams(Q,G);if(V&&(at.value=V.interpolatedValue),q!=null&&B.isArray(at.value)&&(at.value=at.value[q]),!N){var gt=lt.getItemModel(Q);N=gt.get(Y==="normal"?["label","formatter"]:[Y,"label","formatter"])}if(typeof N=="function")return at.status=Y,at.dimensionIndex=q,N(at);if(typeof N=="string"){var Tt=Object(H.f)(N,at);return Tt.replace(ht,function(bt,nt){var W=nt.length,X=nt.charAt(0)==="["&&nt.charAt(W-1)==="]"?+nt.slice(1,W-1):nt,et=Object(mt.e)(lt,Q,X);if(V&&B.isArray(V.interpolatedValue)){var k=lt.getDimensionInfo(X);k&&(et=V.interpolatedValue[k.index])}return et!=null?et+"":""})}},it.prototype.getRawValue=function(Q,Y){return Object(mt.e)(this.getData(Y),Q)},it.prototype.formatTooltip=function(Q,Y,G){},it}();function ot(it){var Q,Y;return B.isObject(it)?it.type&&(Y=it):Q=it,{markupText:Q,markupFragment:Y}}},OQFs:function(Ge,U,S){"use strict";S.d(U,"a",function(){return mt}),S.d(U,"b",function(){return ht});var B=S("KCsZ"),mt=[["lineWidth","width"],["stroke","color"],["opacity"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"],["lineDash","type"],["lineDashOffset","dashOffset"],["lineCap","cap"],["lineJoin","join"],["miterLimit"]],H=Object(B.a)(mt),ht=function(){function y(){}return y.prototype.getLineStyle=function(ot){return H(this,ot)},y}()},OS9S:function(Ge,U,S){"use strict";var B=S("IaEH"),mt=S("Gev7"),H=S("mFDi"),ht=[],y=function(ot){Object(B.a)(it,ot);function it(){var Q=ot!==null&&ot.apply(this,arguments)||this;return Q.notClear=!0,Q.incremental=!0,Q._displayables=[],Q._temporaryDisplayables=[],Q._cursor=0,Q}return it.prototype.traverse=function(Q,Y){Q.call(Y,this)},it.prototype.useStyle=function(){this.style={}},it.prototype.getCursor=function(){return this._cursor},it.prototype.innerAfterBrush=function(){this._cursor=this._displayables.length},it.prototype.clearDisplaybles=function(){this._displayables=[],this._temporaryDisplayables=[],this._cursor=0,this.markRedraw(),this.notClear=!1},it.prototype.clearTemporalDisplayables=function(){this._temporaryDisplayables=[]},it.prototype.addDisplayable=function(Q,Y){Y?this._temporaryDisplayables.push(Q):this._displayables.push(Q),this.markRedraw()},it.prototype.addDisplayables=function(Q,Y){Y=Y||!1;for(var G=0;G<Q.length;G++)this.addDisplayable(Q[G],Y)},it.prototype.getDisplayables=function(){return this._displayables},it.prototype.getTemporalDisplayables=function(){return this._temporaryDisplayables},it.prototype.eachPendingDisplayable=function(Q){for(var Y=this._cursor;Y<this._displayables.length;Y++)Q&&Q(this._displayables[Y]);for(var Y=0;Y<this._temporaryDisplayables.length;Y++)Q&&Q(this._temporaryDisplayables[Y])},it.prototype.update=function(){this.updateTransform();for(var Q=this._cursor;Q<this._displayables.length;Q++){var Y=this._displayables[Q];Y.parent=this,Y.update(),Y.parent=null}for(var Q=0;Q<this._temporaryDisplayables.length;Q++){var Y=this._temporaryDisplayables[Q];Y.parent=this,Y.update(),Y.parent=null}},it.prototype.getBoundingRect=function(){if(!this._rect){for(var Q=new H.a(Infinity,Infinity,-Infinity,-Infinity),Y=0;Y<this._displayables.length;Y++){var G=this._displayables[Y],q=G.getBoundingRect().clone();G.needLocalTransform()&&q.applyTransform(G.getLocalTransform(ht)),Q.union(q)}this._rect=Q}return this._rect},it.prototype.contain=function(Q,Y){var G=this.transformCoordToLocal(Q,Y),q=this.getBoundingRect();if(q.contain(G[0],G[1]))for(var N=0;N<this._displayables.length;N++){var V=this._displayables[N];if(V.contain(Q,Y))return!0}return!1},it}(mt.c);U.a=y},P4Qj:function(Ge,U,S){"use strict";Object.defineProperty(U,"__esModule",{value:!0}),U.removeSensor=U.getSensor=void 0;var B=ht(S("chpo")),mt=S("FxDU"),H=S("24YM");function ht(Q){return Q&&Q.__esModule?Q:{default:Q}}var y={},ot=function(Y){var G=Y.getAttribute(H.SizeSensorId);if(G&&y[G])return y[G];var q=(0,B.default)();Y.setAttribute(H.SizeSensorId,q);var N=(0,mt.createSensor)(Y);return y[q]=N,N};U.getSensor=ot;var it=function(Y){var G=Y.element.getAttribute(H.SizeSensorId);Y.element.removeAttribute(H.SizeSensorId),Y.destroy(),G&&y[G]&&delete y[G]};U.removeSensor=it},PbkX:function(Ge,U,S){"use strict";function B(mt){var H=new XMLHttpRequest;H.open("get",mt.url),H.responseType=mt.responseType||"text",mt.onprogress&&(H.onprogress=function(ht){if(ht.lengthComputable){var y=ht.loaded/ht.total;mt.onprogress(y,ht.loaded,ht.total)}else mt.onprogress(null)}),H.onload=function(ht){H.status>=400?mt.onerror&&mt.onerror():mt.onload&&mt.onload(H.response)},mt.onerror&&(H.onerror=mt.onerror),H.send(null)}U.a={get:B}},QBsz:function(Ge,U,S){"use strict";S.r(U),S.d(U,"create",function(){return B}),S.d(U,"copy",function(){return mt}),S.d(U,"clone",function(){return H}),S.d(U,"set",function(){return ht}),S.d(U,"add",function(){return y}),S.d(U,"scaleAndAdd",function(){return ot}),S.d(U,"sub",function(){return it}),S.d(U,"len",function(){return Q}),S.d(U,"length",function(){return Y}),S.d(U,"lenSquare",function(){return G}),S.d(U,"lengthSquare",function(){return q}),S.d(U,"mul",function(){return N}),S.d(U,"div",function(){return V}),S.d(U,"dot",function(){return lt}),S.d(U,"scale",function(){return at}),S.d(U,"normalize",function(){return gt}),S.d(U,"distance",function(){return Tt}),S.d(U,"dist",function(){return bt}),S.d(U,"distanceSquare",function(){return nt}),S.d(U,"distSquare",function(){return W}),S.d(U,"negate",function(){return X}),S.d(U,"lerp",function(){return et}),S.d(U,"applyTransform",function(){return k}),S.d(U,"min",function(){return st}),S.d(U,"max",function(){return $});function B(D,T){return D==null&&(D=0),T==null&&(T=0),[D,T]}function mt(D,T){return D[0]=T[0],D[1]=T[1],D}function H(D){return[D[0],D[1]]}function ht(D,T,O){return D[0]=T,D[1]=O,D}function y(D,T,O){return D[0]=T[0]+O[0],D[1]=T[1]+O[1],D}function ot(D,T,O,C){return D[0]=T[0]+O[0]*C,D[1]=T[1]+O[1]*C,D}function it(D,T,O){return D[0]=T[0]-O[0],D[1]=T[1]-O[1],D}function Q(D){return Math.sqrt(G(D))}var Y=Q;function G(D){return D[0]*D[0]+D[1]*D[1]}var q=G;function N(D,T,O){return D[0]=T[0]*O[0],D[1]=T[1]*O[1],D}function V(D,T,O){return D[0]=T[0]/O[0],D[1]=T[1]/O[1],D}function lt(D,T){return D[0]*T[0]+D[1]*T[1]}function at(D,T,O){return D[0]=T[0]*O,D[1]=T[1]*O,D}function gt(D,T){var O=Q(T);return O===0?(D[0]=0,D[1]=0):(D[0]=T[0]/O,D[1]=T[1]/O),D}function Tt(D,T){return Math.sqrt((D[0]-T[0])*(D[0]-T[0])+(D[1]-T[1])*(D[1]-T[1]))}var bt=Tt;function nt(D,T){return(D[0]-T[0])*(D[0]-T[0])+(D[1]-T[1])*(D[1]-T[1])}var W=nt;function X(D,T){return D[0]=-T[0],D[1]=-T[1],D}function et(D,T,O,C){return D[0]=T[0]+C*(O[0]-T[0]),D[1]=T[1]+C*(O[1]-T[1]),D}function k(D,T,O){var C=T[0],L=T[1];return D[0]=O[0]*C+O[2]*L+O[4],D[1]=O[1]*C+O[3]*L+O[5],D}function st(D,T,O){return D[0]=Math.min(T[0],O[0]),D[1]=Math.min(T[1],O[1]),D}function $(D,T,O){return D[0]=Math.max(T[0],O[0]),D[1]=Math.max(T[1],O[1]),D}},QEG1:function(Ge,U,S){"use strict";S.d(U,"b",function(){return y}),S.d(U,"a",function(){return ht});var B=S("4NO4"),mt=Object(B.o)(),H=Object(B.o)(),ht=function(){function Y(){}return Y.prototype.getColorFromPalette=function(G,q,N){var V=Object(B.r)(this.get("color",!0)),lt=this.get("colorLayer",!0);return it(this,mt,V,lt,G,q,N)},Y.prototype.clearColorPalette=function(){Q(this,mt)},Y}();function y(Y,G,q,N){var V=Object(B.r)(Y.get(["aria","decal","decals"]));return it(Y,H,V,null,G,q,N)}function ot(Y,G){for(var q=Y.length,N=0;N<q;N++)if(Y[N].length>G)return Y[N];return Y[q-1]}function it(Y,G,q,N,V,lt,at){lt=lt||Y;var gt=G(lt),Tt=gt.paletteIdx||0,bt=gt.paletteNameMap=gt.paletteNameMap||{};if(bt.hasOwnProperty(V))return bt[V];var nt=at==null||!N?q:ot(N,at);if(nt=nt||q,!(!nt||!nt.length)){var W=nt[Tt];return V&&(bt[V]=W),gt.paletteIdx=(Tt+1)%nt.length,W}}function Q(Y,G){G(Y).paletteIdx=0,G(Y).paletteNameMap={}}},"QO+J":function(Ge,U,S){"use strict";Object.defineProperty(U,"__esModule",{value:!0}),U.createSensor=void 0;var B=H(S("NohK")),mt=S("24YM");function H(y){return y&&y.__esModule?y:{default:y}}var ht=function(ot){var it=void 0,Q=[],Y=function(){getComputedStyle(ot).position==="static"&&(ot.style.position="relative");var at=document.createElement("object");return at.onload=function(){at.contentDocument.defaultView.addEventListener("resize",G),G()},at.style.display="block",at.style.position="absolute",at.style.top="0",at.style.left="0",at.style.height="100%",at.style.width="100%",at.style.overflow="hidden",at.style.pointerEvents="none",at.style.zIndex="-1",at.style.opacity="0",at.setAttribute("class",mt.SensorClassName),at.setAttribute("tabindex",mt.SensorTabIndex),at.type="text/html",ot.appendChild(at),at.data="about:blank",at},G=(0,B.default)(function(){Q.forEach(function(lt){lt(ot)})}),q=function(at){it||(it=Y()),Q.indexOf(at)===-1&&Q.push(at)},N=function(){it&&it.parentNode&&(it.contentDocument&&it.contentDocument.defaultView.removeEventListener("resize",G),it.parentNode.removeChild(it),it=void 0,Q=[])},V=function(at){var gt=Q.indexOf(at);gt!==-1&&Q.splice(gt,1),Q.length===0&&it&&N()};return{element:ot,bind:q,destroy:N,unbind:V}};U.createSensor=ht},Qe9p:function(Ge,U,S){"use strict";S.r(U),S.d(U,"parse",function(){return at}),S.d(U,"lift",function(){return bt}),S.d(U,"toHex",function(){return nt}),S.d(U,"fastLerp",function(){return W}),S.d(U,"fastMapToColor",function(){return X}),S.d(U,"lerp",function(){return et}),S.d(U,"mapToColor",function(){return k}),S.d(U,"modifyHSL",function(){return st}),S.d(U,"modifyAlpha",function(){return $}),S.d(U,"stringify",function(){return D}),S.d(U,"lum",function(){return T}),S.d(U,"random",function(){return O});var B=S("1RvN"),mt={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function H(C){return C=Math.round(C),C<0?0:C>255?255:C}function ht(C){return C=Math.round(C),C<0?0:C>360?360:C}function y(C){return C<0?0:C>1?1:C}function ot(C){var L=C;return L.length&&L.charAt(L.length-1)==="%"?H(parseFloat(L)/100*255):H(parseInt(L,10))}function it(C){var L=C;return L.length&&L.charAt(L.length-1)==="%"?y(parseFloat(L)/100):y(parseFloat(L))}function Q(C,L,w){return w<0?w+=1:w>1&&(w-=1),w*6<1?C+(L-C)*w*6:w*2<1?L:w*3<2?C+(L-C)*(2/3-w)*6:C}function Y(C,L,w){return C+(L-C)*w}function G(C,L,w,z,pt){return C[0]=L,C[1]=w,C[2]=z,C[3]=pt,C}function q(C,L){return C[0]=L[0],C[1]=L[1],C[2]=L[2],C[3]=L[3],C}var N=new B.a(20),V=null;function lt(C,L){V&&q(V,L),V=N.put(C,V||L.slice())}function at(C,L){if(!!C){L=L||[];var w=N.get(C);if(w)return q(L,w);C=C+"";var z=C.replace(/ /g,"").toLowerCase();if(z in mt)return q(L,mt[z]),lt(C,L),L;var pt=z.length;if(z.charAt(0)==="#"){if(pt===4||pt===5){var At=parseInt(z.slice(1,4),16);if(!(At>=0&&At<=4095)){G(L,0,0,0,1);return}return G(L,(At&3840)>>4|(At&3840)>>8,At&240|(At&240)>>4,At&15|(At&15)<<4,pt===5?parseInt(z.slice(4),16)/15:1),lt(C,L),L}else if(pt===7||pt===9){var At=parseInt(z.slice(1,7),16);if(!(At>=0&&At<=16777215)){G(L,0,0,0,1);return}return G(L,(At&16711680)>>16,(At&65280)>>8,At&255,pt===9?parseInt(z.slice(7),16)/255:1),lt(C,L),L}return}var rt=z.indexOf("("),_t=z.indexOf(")");if(rt!==-1&&_t+1===pt){var xt=z.substr(0,rt),ft=z.substr(rt+1,_t-(rt+1)).split(","),Mt=1;switch(xt){case"rgba":if(ft.length!==4)return ft.length===3?G(L,+ft[0],+ft[1],+ft[2],1):G(L,0,0,0,1);Mt=it(ft.pop());case"rgb":if(ft.length!==3){G(L,0,0,0,1);return}return G(L,ot(ft[0]),ot(ft[1]),ot(ft[2]),Mt),lt(C,L),L;case"hsla":if(ft.length!==4){G(L,0,0,0,1);return}return ft[3]=it(ft[3]),gt(ft,L),lt(C,L),L;case"hsl":if(ft.length!==3){G(L,0,0,0,1);return}return gt(ft,L),lt(C,L),L;default:return}}G(L,0,0,0,1)}}function gt(C,L){var w=(parseFloat(C[0])%360+360)%360/360,z=it(C[1]),pt=it(C[2]),At=pt<=.5?pt*(z+1):pt+z-pt*z,rt=pt*2-At;return L=L||[],G(L,H(Q(rt,At,w+1/3)*255),H(Q(rt,At,w)*255),H(Q(rt,At,w-1/3)*255),1),C.length===4&&(L[3]=C[3]),L}function Tt(C){if(!!C){var L=C[0]/255,w=C[1]/255,z=C[2]/255,pt=Math.min(L,w,z),At=Math.max(L,w,z),rt=At-pt,_t=(At+pt)/2,xt,ft;if(rt===0)xt=0,ft=0;else{_t<.5?ft=rt/(At+pt):ft=rt/(2-At-pt);var Mt=((At-L)/6+rt/2)/rt,K=((At-w)/6+rt/2)/rt,R=((At-z)/6+rt/2)/rt;L===At?xt=R-K:w===At?xt=1/3+Mt-R:z===At&&(xt=2/3+K-Mt),xt<0&&(xt+=1),xt>1&&(xt-=1)}var tt=[xt*360,ft,_t];return C[3]!=null&&tt.push(C[3]),tt}}function bt(C,L){var w=at(C);if(w){for(var z=0;z<3;z++)L<0?w[z]=w[z]*(1-L)|0:w[z]=(255-w[z])*L+w[z]|0,w[z]>255?w[z]=255:w[z]<0&&(w[z]=0);return D(w,w.length===4?"rgba":"rgb")}}function nt(C){var L=at(C);if(L)return((1<<24)+(L[0]<<16)+(L[1]<<8)+ +L[2]).toString(16).slice(1)}function W(C,L,w){if(!(!(L&&L.length)||!(C>=0&&C<=1))){w=w||[];var z=C*(L.length-1),pt=Math.floor(z),At=Math.ceil(z),rt=L[pt],_t=L[At],xt=z-pt;return w[0]=H(Y(rt[0],_t[0],xt)),w[1]=H(Y(rt[1],_t[1],xt)),w[2]=H(Y(rt[2],_t[2],xt)),w[3]=y(Y(rt[3],_t[3],xt)),w}}var X=W;function et(C,L,w){if(!(!(L&&L.length)||!(C>=0&&C<=1))){var z=C*(L.length-1),pt=Math.floor(z),At=Math.ceil(z),rt=at(L[pt]),_t=at(L[At]),xt=z-pt,ft=D([H(Y(rt[0],_t[0],xt)),H(Y(rt[1],_t[1],xt)),H(Y(rt[2],_t[2],xt)),y(Y(rt[3],_t[3],xt))],"rgba");return w?{color:ft,leftIndex:pt,rightIndex:At,value:z}:ft}}var k=et;function st(C,L,w,z){var pt=at(C);if(C)return pt=Tt(pt),L!=null&&(pt[0]=ht(L)),w!=null&&(pt[1]=it(w)),z!=null&&(pt[2]=it(z)),D(gt(pt),"rgba")}function $(C,L){var w=at(C);if(w&&L!=null)return w[3]=y(L),D(w,"rgba")}function D(C,L){if(!(!C||!C.length)){var w=C[0]+","+C[1]+","+C[2];return(L==="rgba"||L==="hsva"||L==="hsla")&&(w+=","+C[3]),L+"("+w+")"}}function T(C,L){var w=at(C);return w?(.299*w[0]+.587*w[1]+.114*w[2])*w[3]/255+(1-w[3])*L:0}function O(){var C=Math.round(Math.random()*255),L=Math.round(Math.random()*255),w=Math.round(Math.random()*255);return"rgb("+C+","+L+","+w+")"}},QuXc:function(Ge,U,S){"use strict";var B=function(){function mt(H){this.colorStops=H||[]}return mt.prototype.addColorStop=function(H,ht){this.colorStops.push({offset:H,color:ht})},mt}();U.a=B},Qxkt:function(Ge,U,S){"use strict";var B=S("ItGF"),mt=S("Yl7c"),H=S("KCsZ"),ht=[["fill","color"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["opacity"],["shadowColor"]],y=Object(H.a)(ht),ot=function(){function bt(){}return bt.prototype.getAreaStyle=function(nt,W){return y(this,nt,W)},bt}(),it=S("eDfh"),Q=S("dqUG"),Y=["textStyle","color"],G=new Q.a,q=function(){function bt(){}return bt.prototype.getTextColor=function(nt){var W=this.ecModel;return this.getShallow("color")||(!nt&&W?W.get(Y):null)},bt.prototype.getFont=function(){return Object(it.e)({fontStyle:this.getShallow("fontStyle"),fontWeight:this.getShallow("fontWeight"),fontSize:this.getShallow("fontSize"),fontFamily:this.getShallow("fontFamily")},this.ecModel)},bt.prototype.getTextRect=function(nt){return G.useStyle({text:nt,fontStyle:this.getShallow("fontStyle"),fontWeight:this.getShallow("fontWeight"),fontSize:this.getShallow("fontSize"),fontFamily:this.getShallow("fontFamily"),verticalAlign:this.getShallow("verticalAlign")||this.getShallow("baseline"),padding:this.getShallow("padding"),lineHeight:this.getShallow("lineHeight"),rich:this.getShallow("rich")}),G.update(),G.getBoundingRect()},bt}(),N=q,V=S("OQFs"),lt=S("VR9l"),at=S("bYtY"),gt=function(){function bt(nt,W,X){this.parentModel=W,this.ecModel=X,this.option=nt}return bt.prototype.init=function(nt,W,X){for(var et=[],k=3;k<arguments.length;k++)et[k-3]=arguments[k]},bt.prototype.mergeOption=function(nt,W){Object(at.merge)(this.option,nt,!0)},bt.prototype.get=function(nt,W){return nt==null?this.option:this._doGet(this.parsePath(nt),!W&&this.parentModel)},bt.prototype.getShallow=function(nt,W){var X=this.option,et=X==null?X:X[nt];if(et==null&&!W){var k=this.parentModel;k&&(et=k.getShallow(nt))}return et},bt.prototype.getModel=function(nt,W){var X=nt!=null,et=X?this.parsePath(nt):null,k=X?this._doGet(et):this.option;return W=W||this.parentModel&&this.parentModel.getModel(this.resolveParentPath(et)),new bt(k,W,this.ecModel)},bt.prototype.isEmpty=function(){return this.option==null},bt.prototype.restoreData=function(){},bt.prototype.clone=function(){var nt=this.constructor;return new nt(Object(at.clone)(this.option))},bt.prototype.parsePath=function(nt){return typeof nt=="string"?nt.split("."):nt},bt.prototype.resolveParentPath=function(nt){return nt},bt.prototype.isAnimationEnabled=function(){if(!B.a.node&&this.option){if(this.option.animation!=null)return!!this.option.animation;if(this.parentModel)return this.parentModel.isAnimationEnabled()}},bt.prototype._doGet=function(nt,W){var X=this.option;if(!nt)return X;for(var et=0;et<nt.length&&!(!!nt[et]&&(X=X&&typeof X=="object"?X[nt[et]]:null,X==null));et++);return X==null&&W&&(X=W._doGet(this.resolveParentPath(nt),W.parentModel)),X},bt}();Object(mt.b)(gt),Object(mt.a)(gt),Object(at.mixin)(gt,V.b),Object(at.mixin)(gt,lt.b),Object(at.mixin)(gt,ot),Object(at.mixin)(gt,N);var Tt=U.a=gt},R1X6:function(Ge,U,S){"use strict";var B=Math.round(Math.random()*9),mt=function(){function H(){this._id="__ec_inner_"+B++}return H.prototype.get=function(ht){return this._guard(ht)[this._id]},H.prototype.set=function(ht,y){var ot=this._guard(ht);return typeof Object.defineProperty=="function"?Object.defineProperty(ot,this._id,{value:y,enumerable:!1,configurable:!0}):ot[this._id]=y,this},H.prototype.delete=function(ht){return this.has(ht)?(delete this._guard(ht)[this._id],!0):!1},H.prototype.has=function(ht){return!!this._guard(ht)[this._id]},H.prototype._guard=function(ht){if(ht!==Object(ht))throw TypeError("Value of WeakMap is not a non-null object.");return ht},H}();U.a=mt},RXMa:function(Ge,U,S){"use strict";var B=S("IaEH"),mt=S("y+Vt"),H=function(){function y(){this.cx=0,this.cy=0,this.r=0,this.r0=0}return y}(),ht=function(y){Object(B.a)(ot,y);function ot(it){return y.call(this,it)||this}return ot.prototype.getDefaultShape=function(){return new H},ot.prototype.buildPath=function(it,Q){var Y=Q.cx,G=Q.cy,q=Math.PI*2;it.moveTo(Y+Q.r,G),it.arc(Y,G,Q.r,0,q,!1),it.moveTo(Y+Q.r0,G),it.arc(Y,G,Q.r0,0,q,!0)},ot}(mt.b);ht.prototype.type="ring",U.a=ht},SKnc:function(Ge,U,S){"use strict";var B=S("IaEH"),mt=S("QuXc"),H=function(ht){Object(B.a)(y,ht);function y(ot,it,Q,Y,G,q){var N=ht.call(this,G)||this;return N.x=ot==null?0:ot,N.y=it==null?0:it,N.x2=Q==null?1:Q,N.y2=Y==null?0:Y,N.type="linear",N.global=q||!1,N}return y}(mt.a);U.a=H},Sj9i:function(Ge,U,S){"use strict";S.d(U,"a",function(){return V}),S.d(U,"b",function(){return lt}),S.d(U,"f",function(){return at}),S.d(U,"c",function(){return gt}),S.d(U,"g",function(){return Tt}),S.d(U,"e",function(){return bt}),S.d(U,"d",function(){return nt}),S.d(U,"h",function(){return W}),S.d(U,"i",function(){return X}),S.d(U,"m",function(){return et}),S.d(U,"j",function(){return k}),S.d(U,"n",function(){return st}),S.d(U,"l",function(){return $}),S.d(U,"k",function(){return D});var B=S("QBsz"),mt=Math.pow,H=Math.sqrt,ht=1e-8,y=1e-4,ot=H(3),it=1/3,Q=Object(B.create)(),Y=Object(B.create)(),G=Object(B.create)();function q(T){return T>-ht&&T<ht}function N(T){return T>ht||T<-ht}function V(T,O,C,L,w){var z=1-w;return z*z*(z*T+3*w*O)+w*w*(w*L+3*z*C)}function lt(T,O,C,L,w){var z=1-w;return 3*(((O-T)*z+2*(C-O)*w)*z+(L-C)*w*w)}function at(T,O,C,L,w,z){var pt=L+3*(O-C)-T,At=3*(C-O*2+T),rt=3*(O-T),_t=T-w,xt=At*At-3*pt*rt,ft=At*rt-9*pt*_t,Mt=rt*rt-3*At*_t,K=0;if(q(xt)&&q(ft))if(q(At))z[0]=0;else{var R=-rt/At;R>=0&&R<=1&&(z[K++]=R)}else{var tt=ft*ft-4*xt*Mt;if(q(tt)){var Z=ft/xt,R=-At/pt+Z,ct=-Z/2;R>=0&&R<=1&&(z[K++]=R),ct>=0&&ct<=1&&(z[K++]=ct)}else if(tt>0){var vt=H(tt),Ct=xt*At+1.5*pt*(-ft+vt),Bt=xt*At+1.5*pt*(-ft-vt);Ct<0?Ct=-mt(-Ct,it):Ct=mt(Ct,it),Bt<0?Bt=-mt(-Bt,it):Bt=mt(Bt,it);var R=(-At-(Ct+Bt))/(3*pt);R>=0&&R<=1&&(z[K++]=R)}else{var It=(2*xt*At-3*pt*ft)/(2*H(xt*xt*xt)),Wt=Math.acos(It)/3,ee=H(xt),ae=Math.cos(Wt),R=(-At-2*ee*ae)/(3*pt),ct=(-At+ee*(ae+ot*Math.sin(Wt)))/(3*pt),ye=(-At+ee*(ae-ot*Math.sin(Wt)))/(3*pt);R>=0&&R<=1&&(z[K++]=R),ct>=0&&ct<=1&&(z[K++]=ct),ye>=0&&ye<=1&&(z[K++]=ye)}}return K}function gt(T,O,C,L,w){var z=6*C-12*O+6*T,pt=9*O+3*L-3*T-9*C,At=3*O-3*T,rt=0;if(q(pt)){if(N(z)){var _t=-At/z;_t>=0&&_t<=1&&(w[rt++]=_t)}}else{var xt=z*z-4*pt*At;if(q(xt))w[0]=-z/(2*pt);else if(xt>0){var ft=H(xt),_t=(-z+ft)/(2*pt),Mt=(-z-ft)/(2*pt);_t>=0&&_t<=1&&(w[rt++]=_t),Mt>=0&&Mt<=1&&(w[rt++]=Mt)}}return rt}function Tt(T,O,C,L,w,z){var pt=(O-T)*w+T,At=(C-O)*w+O,rt=(L-C)*w+C,_t=(At-pt)*w+pt,xt=(rt-At)*w+At,ft=(xt-_t)*w+_t;z[0]=T,z[1]=pt,z[2]=_t,z[3]=ft,z[4]=ft,z[5]=xt,z[6]=rt,z[7]=L}function bt(T,O,C,L,w,z,pt,At,rt,_t,xt){var ft,Mt=.005,K=Infinity,R,tt,Z,ct;Q[0]=rt,Q[1]=_t;for(var vt=0;vt<1;vt+=.05)Y[0]=V(T,C,w,pt,vt),Y[1]=V(O,L,z,At,vt),Z=Object(B.distSquare)(Q,Y),Z<K&&(ft=vt,K=Z);K=Infinity;for(var Ct=0;Ct<32&&!(Mt<y);Ct++)R=ft-Mt,tt=ft+Mt,Y[0]=V(T,C,w,pt,R),Y[1]=V(O,L,z,At,R),Z=Object(B.distSquare)(Y,Q),R>=0&&Z<K?(ft=R,K=Z):(G[0]=V(T,C,w,pt,tt),G[1]=V(O,L,z,At,tt),ct=Object(B.distSquare)(G,Q),tt<=1&&ct<K?(ft=tt,K=ct):Mt*=.5);return xt&&(xt[0]=V(T,C,w,pt,ft),xt[1]=V(O,L,z,At,ft)),H(K)}function nt(T,O,C,L,w,z,pt,At,rt){for(var _t=T,xt=O,ft=0,Mt=1/rt,K=1;K<=rt;K++){var R=K*Mt,tt=V(T,C,w,pt,R),Z=V(O,L,z,At,R),ct=tt-_t,vt=Z-xt;ft+=Math.sqrt(ct*ct+vt*vt),_t=tt,xt=Z}return ft}function W(T,O,C,L){var w=1-L;return w*(w*T+2*L*O)+L*L*C}function X(T,O,C,L){return 2*((1-L)*(O-T)+L*(C-O))}function et(T,O,C,L,w){var z=T-2*O+C,pt=2*(O-T),At=T-L,rt=0;if(q(z)){if(N(pt)){var _t=-At/pt;_t>=0&&_t<=1&&(w[rt++]=_t)}}else{var xt=pt*pt-4*z*At;if(q(xt)){var _t=-pt/(2*z);_t>=0&&_t<=1&&(w[rt++]=_t)}else if(xt>0){var ft=H(xt),_t=(-pt+ft)/(2*z),Mt=(-pt-ft)/(2*z);_t>=0&&_t<=1&&(w[rt++]=_t),Mt>=0&&Mt<=1&&(w[rt++]=Mt)}}return rt}function k(T,O,C){var L=T+C-2*O;return L===0?.5:(T-O)/L}function st(T,O,C,L,w){var z=(O-T)*L+T,pt=(C-O)*L+O,At=(pt-z)*L+z;w[0]=T,w[1]=z,w[2]=At,w[3]=At,w[4]=pt,w[5]=C}function $(T,O,C,L,w,z,pt,At,rt){var _t,xt=.005,ft=Infinity;Q[0]=pt,Q[1]=At;for(var Mt=0;Mt<1;Mt+=.05){Y[0]=W(T,C,w,Mt),Y[1]=W(O,L,z,Mt);var K=Object(B.distSquare)(Q,Y);K<ft&&(_t=Mt,ft=K)}ft=Infinity;for(var R=0;R<32&&!(xt<y);R++){var tt=_t-xt,Z=_t+xt;Y[0]=W(T,C,w,tt),Y[1]=W(O,L,z,tt);var K=Object(B.distSquare)(Y,Q);if(tt>=0&&K<ft)_t=tt,ft=K;else{G[0]=W(T,C,w,Z),G[1]=W(O,L,z,Z);var ct=Object(B.distSquare)(G,Q);Z<=1&&ct<ft?(_t=Z,ft=ct):xt*=.5}}return rt&&(rt[0]=W(T,C,w,_t),rt[1]=W(O,L,z,_t)),H(ft)}function D(T,O,C,L,w,z,pt){for(var At=T,rt=O,_t=0,xt=1/pt,ft=1;ft<=pt;ft++){var Mt=ft*xt,K=W(T,C,w,Mt),R=W(O,L,z,Mt),tt=K-At,Z=R-rt;_t+=Math.sqrt(tt*tt+Z*Z),At=K,rt=R}return _t}},SqI9:function(Ge,U,S){"use strict";var B=S("IaEH"),mt=S("y+Vt"),H=S("IMiH"),ht=Math.PI,y=ht*2,ot=Math.sin,it=Math.cos,Q=Math.acos,Y=Math.atan2,G=Math.abs,q=Math.sqrt,N=Math.max,V=Math.min,lt=1e-4;function at(X,et,k,st,$,D,T,O){var C=k-X,L=st-et,w=T-$,z=O-D,pt=z*C-w*L;if(!(pt*pt<lt))return pt=(w*(et-D)-z*(X-$))/pt,[X+pt*C,et+pt*L]}function gt(X,et,k,st,$,D,T){var O=X-k,C=et-st,L=(T?D:-D)/q(O*O+C*C),w=L*C,z=-L*O,pt=X+w,At=et+z,rt=k+w,_t=st+z,xt=(pt+rt)/2,ft=(At+_t)/2,Mt=rt-pt,K=_t-At,R=Mt*Mt+K*K,tt=$-D,Z=pt*_t-rt*At,ct=(K<0?-1:1)*q(N(0,tt*tt*R-Z*Z)),vt=(Z*K-Mt*ct)/R,Ct=(-Z*Mt-K*ct)/R,Bt=(Z*K+Mt*ct)/R,It=(-Z*Mt+K*ct)/R,Wt=vt-xt,ee=Ct-ft,ae=Bt-xt,ye=It-ft;return Wt*Wt+ee*ee>ae*ae+ye*ye&&(vt=Bt,Ct=It),{cx:vt,cy:Ct,x01:-w,y01:-z,x11:vt*($/tt-1),y11:Ct*($/tt-1)}}function Tt(X,et){var k=N(et.r,0),st=N(et.r0||0,0),$=k>0,D=st>0;if(!(!$&&!D)){if($||(k=st,st=0),st>k){var T=k;k=st,st=T}var O=!!et.clockwise,C=et.startAngle,L=et.endAngle,w;if(C===L)w=0;else{var z=[C,L];Object(H.b)(z,!O),w=G(z[0]-z[1])}var pt=et.cx,At=et.cy,rt=et.cornerRadius||0,_t=et.innerCornerRadius||0;if(!(k>lt))X.moveTo(pt,At);else if(w>y-lt)X.moveTo(pt+k*it(C),At+k*ot(C)),X.arc(pt,At,k,C,L,!O),st>lt&&(X.moveTo(pt+st*it(L),At+st*ot(L)),X.arc(pt,At,st,L,C,O));else{var xt=G(k-st)/2,ft=V(xt,rt),Mt=V(xt,_t),K=Mt,R=ft,tt=k*it(C),Z=k*ot(C),ct=st*it(L),vt=st*ot(L),Ct=void 0,Bt=void 0,It=void 0,Wt=void 0;if((ft>lt||Mt>lt)&&(Ct=k*it(L),Bt=k*ot(L),It=st*it(C),Wt=st*ot(C),w<ht)){var ee=at(tt,Z,It,Wt,Ct,Bt,ct,vt);if(ee){var ae=tt-ee[0],ye=Z-ee[1],Le=Ct-ee[0],_e=Bt-ee[1],De=1/ot(Q((ae*Le+ye*_e)/(q(ae*ae+ye*ye)*q(Le*Le+_e*_e)))/2),er=q(ee[0]*ee[0]+ee[1]*ee[1]);K=V(Mt,(st-er)/(De-1)),R=V(ft,(k-er)/(De+1))}}if(!(w>lt))X.moveTo(pt+tt,At+Z);else if(R>lt){var Ie=gt(It,Wt,tt,Z,k,R,O),Fe=gt(Ct,Bt,ct,vt,k,R,O);X.moveTo(pt+Ie.cx+Ie.x01,At+Ie.cy+Ie.y01),R<ft?X.arc(pt+Ie.cx,At+Ie.cy,R,Y(Ie.y01,Ie.x01),Y(Fe.y01,Fe.x01),!O):(X.arc(pt+Ie.cx,At+Ie.cy,R,Y(Ie.y01,Ie.x01),Y(Ie.y11,Ie.x11),!O),X.arc(pt,At,k,Y(Ie.cy+Ie.y11,Ie.cx+Ie.x11),Y(Fe.cy+Fe.y11,Fe.cx+Fe.x11),!O),X.arc(pt+Fe.cx,At+Fe.cy,R,Y(Fe.y11,Fe.x11),Y(Fe.y01,Fe.x01),!O))}else X.moveTo(pt+tt,At+Z),X.arc(pt,At,k,C,L,!O);if(!(st>lt)||!(w>lt))X.lineTo(pt+ct,At+vt);else if(K>lt){var Ie=gt(ct,vt,Ct,Bt,st,-K,O),Fe=gt(tt,Z,It,Wt,st,-K,O);X.lineTo(pt+Ie.cx+Ie.x01,At+Ie.cy+Ie.y01),K<Mt?X.arc(pt+Ie.cx,At+Ie.cy,K,Y(Ie.y01,Ie.x01),Y(Fe.y01,Fe.x01),!O):(X.arc(pt+Ie.cx,At+Ie.cy,K,Y(Ie.y01,Ie.x01),Y(Ie.y11,Ie.x11),!O),X.arc(pt,At,st,Y(Ie.cy+Ie.y11,Ie.cx+Ie.x11),Y(Fe.cy+Fe.y11,Fe.cx+Fe.x11),O),X.arc(pt+Fe.cx,At+Fe.cy,K,Y(Fe.y11,Fe.x11),Y(Fe.y01,Fe.x01),!O))}else X.lineTo(pt+ct,At+vt),X.arc(pt,At,st,L,C,O)}X.closePath()}}var bt=function(){function X(){this.cx=0,this.cy=0,this.r0=0,this.r=0,this.startAngle=0,this.endAngle=Math.PI*2,this.clockwise=!0,this.cornerRadius=0,this.innerCornerRadius=0}return X}(),nt=function(X){Object(B.a)(et,X);function et(k){return X.call(this,k)||this}return et.prototype.getDefaultShape=function(){return new bt},et.prototype.buildPath=function(k,st){Tt(k,st)},et.prototype.isZeroArea=function(){return this.shape.startAngle===this.shape.endAngle||this.shape.r===this.shape.r0},et}(mt.b);nt.prototype.type="sector";var W=U.a=nt},T4UG:function(Ge,U,S){"use strict";var B=S("f66r"),mt=S("bYtY"),H=S("ItGF"),ht=S("4NO4"),y=S("bLfw"),ot=S("QEG1"),it=S("OKJ2"),Q=S("+TT/"),Y=S("n7yn"),G=S("Yl7c"),q=S("9yv4"),N=S("9ti/"),V=ht.o();function lt(st,$){return st.getName($)||st.getId($)}var at=function(st){Object(B.b)($,st);function $(){var D=st!==null&&st.apply(this,arguments)||this;return D._selectedDataIndicesMap={},D}return $.prototype.init=function(D,T,O){this.seriesIndex=this.componentIndex,this.dataTask=Object(Y.a)({count:bt,reset:nt}),this.dataTask.context={model:this},this.mergeDefaultAndTheme(D,O);var C=V(this).sourceManager=new q.a(this);C.prepareSource();var L=this.getInitialData(D,O);X(L,this),this.dataTask.context.data=L,V(this).dataBeforeProcessed=L,gt(this),this._initSelectedMapFromData(L)},$.prototype.mergeDefaultAndTheme=function(D,T){var O=Object(Q.d)(this),C=O?Object(Q.f)(D):{},L=this.subType;y.a.hasClass(L)&&(L+="Series"),mt.merge(D,T.getTheme().get(this.subType)),mt.merge(D,this.getDefaultOption()),ht.f(D,"label",["show"]),this.fillDataTextStyle(D.data),O&&Object(Q.h)(D,C,O)},$.prototype.mergeOption=function(D,T){D=mt.merge(this.option,D,!0),this.fillDataTextStyle(D.data);var O=Object(Q.d)(this);O&&Object(Q.h)(this.option,D,O);var C=V(this).sourceManager;C.dirty(),C.prepareSource();var L=this.getInitialData(D,T);X(L,this),this.dataTask.dirty(),this.dataTask.context.data=L,V(this).dataBeforeProcessed=L,gt(this),this._initSelectedMapFromData(L)},$.prototype.fillDataTextStyle=function(D){if(D&&!mt.isTypedArray(D))for(var T=["show"],O=0;O<D.length;O++)D[O]&&D[O].label&&ht.f(D[O],"label",T)},$.prototype.getInitialData=function(D,T){},$.prototype.appendData=function(D){var T=this.getRawData();T.appendData(D.data)},$.prototype.getData=function(D){var T=k(this);if(T){var O=T.context.data;return D==null?O:O.getLinkedData(D)}else return V(this).data},$.prototype.getAllData=function(){var D=this.getData();return D&&D.getLinkedDataAll?D.getLinkedDataAll():[{data:D}]},$.prototype.setData=function(D){var T=k(this);if(T){var O=T.context;O.outputData=D,T!==this.dataTask&&(O.data=D)}V(this).data=D},$.prototype.getSource=function(){return V(this).sourceManager.getSource()},$.prototype.getRawData=function(){return V(this).dataBeforeProcessed},$.prototype.getBaseAxis=function(){var D=this.coordinateSystem;return D&&D.getBaseAxis&&D.getBaseAxis()},$.prototype.formatTooltip=function(D,T,O){return Object(N.a)({series:this,dataIndex:D,multipleSeries:T})},$.prototype.isAnimationEnabled=function(){if(H.a.node)return!1;var D=this.getShallow("animation");return D&&this.getData().count()>this.getShallow("animationThreshold")&&(D=!1),!!D},$.prototype.restoreData=function(){this.dataTask.dirty()},$.prototype.getColorFromPalette=function(D,T,O){var C=this.ecModel,L=ot.a.prototype.getColorFromPalette.call(this,D,T,O);return L||(L=C.getColorFromPalette(D,T,O)),L},$.prototype.coordDimToDataDim=function(D){return this.getRawData().mapDimensionsAll(D)},$.prototype.getProgressive=function(){return this.get("progressive")},$.prototype.getProgressiveThreshold=function(){return this.get("progressiveThreshold")},$.prototype.select=function(D,T){this._innerSelect(this.getData(T),D)},$.prototype.unselect=function(D,T){var O=this.option.selectedMap;if(!!O)for(var C=this.getData(T),L=0;L<D.length;L++){var w=D[L],z=lt(C,w);O[z]=!1,this._selectedDataIndicesMap[z]=-1}},$.prototype.toggleSelect=function(D,T){for(var O=[],C=0;C<D.length;C++)O[0]=D[C],this.isSelected(D[C],T)?this.unselect(O,T):this.select(O,T)},$.prototype.getSelectedDataIndices=function(){for(var D=this._selectedDataIndicesMap,T=mt.keys(D),O=[],C=0;C<T.length;C++){var L=D[T[C]];L>=0&&O.push(L)}return O},$.prototype.isSelected=function(D,T){var O=this.option.selectedMap;if(!O)return!1;var C=this.getData(T),L=lt(C,D);return O[L]||!1},$.prototype._innerSelect=function(D,T){var O,C,L=this.option.selectedMode,w=T.length;if(!(!L||!w)){if(L==="multiple")for(var z=this.option.selectedMap||(this.option.selectedMap={}),pt=0;pt<w;pt++){var At=T[pt],rt=lt(D,At);z[rt]=!0,this._selectedDataIndicesMap[rt]=D.getRawIndex(At)}else if(L==="single"||L===!0){var _t=T[w-1],rt=lt(D,_t);this.option.selectedMap=(O={},O[rt]=!0,O),this._selectedDataIndicesMap=(C={},C[rt]=D.getRawIndex(_t),C)}}},$.prototype._initSelectedMapFromData=function(D){if(!this.option.selectedMap){var T=[];D.hasItemOption&&D.each(function(O){var C=D.getRawDataItem(O);C&&C.selected&&T.push(O)}),T.length>0&&this._innerSelect(D,T)}},$.registerClass=function(D){return y.a.registerClass(D)},$.protoInitialize=function(){var D=$.prototype;D.type="series.__base__",D.seriesIndex=0,D.useColorPaletteOnData=!1,D.ignoreStyleOnData=!1,D.hasSymbolVisual=!1,D.defaultSymbol="circle",D.visualStyleAccessPath="itemStyle",D.visualDrawType="fill"}(),$}(y.a);mt.mixin(at,it.a),mt.mixin(at,ot.a),Object(G.e)(at,y.a);function gt(st){var $=st.name;ht.n(st)||(st.name=Tt(st)||$)}function Tt(st){var $=st.getRawData(),D=$.mapDimensionsAll("seriesName"),T=[];return mt.each(D,function(O){var C=$.getDimensionInfo(O);C.displayName&&T.push(C.displayName)}),T.join(" ")}function bt(st){return st.model.getRawData().count()}function nt(st){var $=st.model;return $.setData($.getRawData().cloneShallow()),W}function W(st,$){$.outputData&&st.end>$.outputData.count()&&$.model.getRawData().cloneShallow($.outputData)}function X(st,$){mt.each(Object(B.c)(st.CHANGABLE_METHODS,st.DOWNSAMPLE_METHODS),function(D){st.wrapMethod(D,mt.curry(et,$))})}function et(st,$){var D=k(st);return D&&D.setOutputEnd(($||this).count()),$}function k(st){var $=(st.ecModel||{}).scheduler,D=$&&$.getPipeline(st.uid);if(D){var T=D.currentTask;if(T){var O=T.agentStubMap;O&&(T=O.get(st.uid))}return T}}U.a=at},T6xi:function(Ge,U,S){"use strict";S.d(U,"a",function(){return y});var B=S("QBsz");function mt(ot,it,Q,Y,G,q,N){var V=(Q-ot)*.5,lt=(Y-it)*.5;return(2*(it-Q)+V+lt)*N+(-3*(it-Q)-2*V-lt)*q+V*G+it}function H(ot,it){for(var Q=ot.length,Y=[],G=0,q=1;q<Q;q++)G+=Object(B.distance)(ot[q-1],ot[q]);var N=G/2;N=N<Q?Q:N;for(var q=0;q<N;q++){var V=q/(N-1)*(it?Q:Q-1),lt=Math.floor(V),at=V-lt,gt=void 0,Tt=ot[lt%Q],bt=void 0,nt=void 0;it?(gt=ot[(lt-1+Q)%Q],bt=ot[(lt+1)%Q],nt=ot[(lt+2)%Q]):(gt=ot[lt===0?lt:lt-1],bt=ot[lt>Q-2?Q-1:lt+1],nt=ot[lt>Q-3?Q-1:lt+2]);var W=at*at,X=at*W;Y.push([mt(gt[0],Tt[0],bt[0],nt[0],at,W,X),mt(gt[1],Tt[1],bt[1],nt[1],at,W,X)])}return Y}function ht(ot,it,Q,Y){var G=[],q=[],N=[],V=[],lt,at,gt,Tt;if(Y){gt=[Infinity,Infinity],Tt=[-Infinity,-Infinity];for(var bt=0,nt=ot.length;bt<nt;bt++)Object(B.min)(gt,gt,ot[bt]),Object(B.max)(Tt,Tt,ot[bt]);Object(B.min)(gt,gt,Y[0]),Object(B.max)(Tt,Tt,Y[1])}for(var bt=0,nt=ot.length;bt<nt;bt++){var W=ot[bt];if(Q)lt=ot[bt?bt-1:nt-1],at=ot[(bt+1)%nt];else if(bt===0||bt===nt-1){G.push(Object(B.clone)(ot[bt]));continue}else lt=ot[bt-1],at=ot[bt+1];Object(B.sub)(q,at,lt),Object(B.scale)(q,q,it);var X=Object(B.distance)(W,lt),et=Object(B.distance)(W,at),k=X+et;k!==0&&(X/=k,et/=k),Object(B.scale)(N,q,-X),Object(B.scale)(V,q,et);var st=Object(B.add)([],W,N),$=Object(B.add)([],W,V);Y&&(Object(B.max)(st,st,gt),Object(B.min)(st,st,Tt),Object(B.max)($,$,gt),Object(B.min)($,$,Tt)),G.push(st),G.push($)}return Q&&G.push(G.shift()),G}function y(ot,it,Q){var Y=it.smooth,G=it.points;if(G&&G.length>=2){if(Y&&Y!=="spline"){var q=ht(G,Y,Q,it.smoothConstraint);ot.moveTo(G[0][0],G[0][1]);for(var N=G.length,V=0;V<(Q?N:N-1);V++){var lt=q[V*2],at=q[V*2+1],gt=G[(V+1)%N];ot.bezierCurveTo(lt[0],lt[1],at[0],at[1],gt[0],gt[1])}}else{Y==="spline"&&(G=H(G,Q)),ot.moveTo(G[0][0],G[0][1]);for(var V=1,Tt=G.length;V<Tt;V++)ot.lineTo(G[V][0],G[V][1])}Q&&ot.closePath()}}},"U/Lg":function(Ge,U,S){"use strict";/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var B=function(R,tt){return B=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Z,ct){Z.__proto__=ct}||function(Z,ct){for(var vt in ct)Object.prototype.hasOwnProperty.call(ct,vt)&&(Z[vt]=ct[vt])},B(R,tt)};function mt(K,R){if(typeof R!="function"&&R!==null)throw new TypeError("Class extends value "+String(R)+" is not a constructor or null");B(K,R);function tt(){this.constructor=K}K.prototype=R===null?Object.create(R):(tt.prototype=R.prototype,new tt)}var H=function(){return H=Object.assign||function(tt){for(var Z,ct=1,vt=arguments.length;ct<vt;ct++){Z=arguments[ct];for(var Ct in Z)Object.prototype.hasOwnProperty.call(Z,Ct)&&(tt[Ct]=Z[Ct])}return tt},H.apply(this,arguments)};function ht(K,R){var tt={};for(var Z in K)Object.prototype.hasOwnProperty.call(K,Z)&&R.indexOf(Z)<0&&(tt[Z]=K[Z]);if(K!=null&&typeof Object.getOwnPropertySymbols=="function")for(var ct=0,Z=Object.getOwnPropertySymbols(K);ct<Z.length;ct++)R.indexOf(Z[ct])<0&&Object.prototype.propertyIsEnumerable.call(K,Z[ct])&&(tt[Z[ct]]=K[Z[ct]]);return tt}function y(K,R,tt,Z){var ct=arguments.length,vt=ct<3?R:Z===null?Z=Object.getOwnPropertyDescriptor(R,tt):Z,Ct;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")vt=Reflect.decorate(K,R,tt,Z);else for(var Bt=K.length-1;Bt>=0;Bt--)(Ct=K[Bt])&&(vt=(ct<3?Ct(vt):ct>3?Ct(R,tt,vt):Ct(R,tt))||vt);return ct>3&&vt&&Object.defineProperty(R,tt,vt),vt}function ot(K,R){return function(tt,Z){R(tt,Z,K)}}function it(K,R){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(K,R)}function Q(K,R,tt,Z){function ct(vt){return vt instanceof tt?vt:new tt(function(Ct){Ct(vt)})}return new(tt||(tt=Promise))(function(vt,Ct){function Bt(ee){try{Wt(Z.next(ee))}catch(ae){Ct(ae)}}function It(ee){try{Wt(Z.throw(ee))}catch(ae){Ct(ae)}}function Wt(ee){ee.done?vt(ee.value):ct(ee.value).then(Bt,It)}Wt((Z=Z.apply(K,R||[])).next())})}function Y(K,R){var tt={label:0,sent:function(){if(vt[0]&1)throw vt[1];return vt[1]},trys:[],ops:[]},Z,ct,vt,Ct;return Ct={next:Bt(0),throw:Bt(1),return:Bt(2)},typeof Symbol=="function"&&(Ct[Symbol.iterator]=function(){return this}),Ct;function Bt(Wt){return function(ee){return It([Wt,ee])}}function It(Wt){if(Z)throw new TypeError("Generator is already executing.");for(;tt;)try{if(Z=1,ct&&(vt=Wt[0]&2?ct.return:Wt[0]?ct.throw||((vt=ct.return)&&vt.call(ct),0):ct.next)&&!(vt=vt.call(ct,Wt[1])).done)return vt;switch(ct=0,vt&&(Wt=[Wt[0]&2,vt.value]),Wt[0]){case 0:case 1:vt=Wt;break;case 4:return tt.label++,{value:Wt[1],done:!1};case 5:tt.label++,ct=Wt[1],Wt=[0];continue;case 7:Wt=tt.ops.pop(),tt.trys.pop();continue;default:if(vt=tt.trys,!(vt=vt.length>0&&vt[vt.length-1])&&(Wt[0]===6||Wt[0]===2)){tt=0;continue}if(Wt[0]===3&&(!vt||Wt[1]>vt[0]&&Wt[1]<vt[3])){tt.label=Wt[1];break}if(Wt[0]===6&&tt.label<vt[1]){tt.label=vt[1],vt=Wt;break}if(vt&&tt.label<vt[2]){tt.label=vt[2],tt.ops.push(Wt);break}vt[2]&&tt.ops.pop(),tt.trys.pop();continue}Wt=R.call(K,tt)}catch(ee){Wt=[6,ee],ct=0}finally{Z=vt=0}if(Wt[0]&5)throw Wt[1];return{value:Wt[0]?Wt[1]:void 0,done:!0}}}var G=Object.create?function(K,R,tt,Z){Z===void 0&&(Z=tt),Object.defineProperty(K,Z,{enumerable:!0,get:function(){return R[tt]}})}:function(K,R,tt,Z){Z===void 0&&(Z=tt),K[Z]=R[tt]};function q(K,R){for(var tt in K)tt!=="default"&&!Object.prototype.hasOwnProperty.call(R,tt)&&G(R,K,tt)}function N(K){var R=typeof Symbol=="function"&&Symbol.iterator,tt=R&&K[R],Z=0;if(tt)return tt.call(K);if(K&&typeof K.length=="number")return{next:function(){return K&&Z>=K.length&&(K=void 0),{value:K&&K[Z++],done:!K}}};throw new TypeError(R?"Object is not iterable.":"Symbol.iterator is not defined.")}function V(K,R){var tt=typeof Symbol=="function"&&K[Symbol.iterator];if(!tt)return K;var Z=tt.call(K),ct,vt=[],Ct;try{for(;(R===void 0||R-- >0)&&!(ct=Z.next()).done;)vt.push(ct.value)}catch(Bt){Ct={error:Bt}}finally{try{ct&&!ct.done&&(tt=Z.return)&&tt.call(Z)}finally{if(Ct)throw Ct.error}}return vt}function lt(){for(var K=[],R=0;R<arguments.length;R++)K=K.concat(V(arguments[R]));return K}function at(){for(var K=0,R=0,tt=arguments.length;R<tt;R++)K+=arguments[R].length;for(var Z=Array(K),ct=0,R=0;R<tt;R++)for(var vt=arguments[R],Ct=0,Bt=vt.length;Ct<Bt;Ct++,ct++)Z[ct]=vt[Ct];return Z}function gt(K,R){for(var tt=0,Z=R.length,ct=K.length;tt<Z;tt++,ct++)K[ct]=R[tt];return K}function Tt(K){return this instanceof Tt?(this.v=K,this):new Tt(K)}function bt(K,R,tt){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Z=tt.apply(K,R||[]),ct,vt=[];return ct={},Ct("next"),Ct("throw"),Ct("return"),ct[Symbol.asyncIterator]=function(){return this},ct;function Ct(ye){Z[ye]&&(ct[ye]=function(Le){return new Promise(function(_e,De){vt.push([ye,Le,_e,De])>1||Bt(ye,Le)})})}function Bt(ye,Le){try{It(Z[ye](Le))}catch(_e){ae(vt[0][3],_e)}}function It(ye){ye.value instanceof Tt?Promise.resolve(ye.value.v).then(Wt,ee):ae(vt[0][2],ye)}function Wt(ye){Bt("next",ye)}function ee(ye){Bt("throw",ye)}function ae(ye,Le){ye(Le),vt.shift(),vt.length&&Bt(vt[0][0],vt[0][1])}}function nt(K){var R,tt;return R={},Z("next"),Z("throw",function(ct){throw ct}),Z("return"),R[Symbol.iterator]=function(){return this},R;function Z(ct,vt){R[ct]=K[ct]?function(Ct){return(tt=!tt)?{value:Tt(K[ct](Ct)),done:ct==="return"}:vt?vt(Ct):Ct}:vt}}function W(K){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var R=K[Symbol.asyncIterator],tt;return R?R.call(K):(K=typeof N=="function"?N(K):K[Symbol.iterator](),tt={},Z("next"),Z("throw"),Z("return"),tt[Symbol.asyncIterator]=function(){return this},tt);function Z(vt){tt[vt]=K[vt]&&function(Ct){return new Promise(function(Bt,It){Ct=K[vt](Ct),ct(Bt,It,Ct.done,Ct.value)})}}function ct(vt,Ct,Bt,It){Promise.resolve(It).then(function(Wt){vt({value:Wt,done:Bt})},Ct)}}function X(K,R){return Object.defineProperty?Object.defineProperty(K,"raw",{value:R}):K.raw=R,K}var et=Object.create?function(K,R){Object.defineProperty(K,"default",{enumerable:!0,value:R})}:function(K,R){K.default=R};function k(K){if(K&&K.__esModule)return K;var R={};if(K!=null)for(var tt in K)tt!=="default"&&Object.prototype.hasOwnProperty.call(K,tt)&&G(R,K,tt);return et(R,K),R}function st(K){return K&&K.__esModule?K:{default:K}}function $(K,R,tt,Z){if(tt==="a"&&!Z)throw new TypeError("Private accessor was defined without a getter");if(typeof R=="function"?K!==R||!Z:!R.has(K))throw new TypeError("Cannot read private member from an object whose class did not declare it");return tt==="m"?Z:tt==="a"?Z.call(K):Z?Z.value:R.get(K)}function D(K,R,tt,Z,ct){if(Z==="m")throw new TypeError("Private method is not writable");if(Z==="a"&&!ct)throw new TypeError("Private accessor was defined without a setter");if(typeof R=="function"?K!==R||!ct:!R.has(K))throw new TypeError("Cannot write private member to an object whose class did not declare it");return Z==="a"?ct.call(K,tt):ct?ct.value=tt:R.set(K,tt),tt}var T=S("MT78"),O=S("q1tI"),C=S.n(O),L=S("u3os");function w(K,R){var tt={};return R.forEach(function(Z){tt[Z]=K[Z]}),tt}function z(K){return typeof K=="function"}function pt(K){return typeof K=="string"}var At=S("aUsF"),rt=S.n(At),_t=function(K){mt(R,K);function R(tt){var Z=K.call(this,tt)||this;return Z.echarts=tt.echarts,Z.ele=null,Z}return R.prototype.componentDidMount=function(){this.renderNewEcharts()},R.prototype.componentDidUpdate=function(tt){var Z=this.props.shouldSetOption;if(!(z(Z)&&!Z(tt,this.props))){if(!rt()(tt.theme,this.props.theme)||!rt()(tt.opts,this.props.opts)||!rt()(tt.onEvents,this.props.onEvents)){this.dispose(),this.renderNewEcharts();return}var ct=["option","notMerge","lazyUpdate","showLoading","loadingOption"];if(!rt()(w(this.props,ct),w(tt,ct))){var vt=this.updateEChartsOption();if(!rt()(tt.style,this.props.style)||!rt()(tt.className,this.props.className))try{vt.resize()}catch(Ct){console.warn(Ct)}}}},R.prototype.componentWillUnmount=function(){this.dispose()},R.prototype.getEchartsInstance=function(){return this.echarts.getInstanceByDom(this.ele)||this.echarts.init(this.ele,this.props.theme,this.props.opts)},R.prototype.dispose=function(){if(this.ele){try{Object(L.clear)(this.ele)}catch(tt){console.warn(tt)}this.echarts.dispose(this.ele)}},R.prototype.renderNewEcharts=function(){var tt=this.props,Z=tt.onEvents,ct=tt.onChartReady,vt=this.updateEChartsOption();this.bindEvents(vt,Z||{}),z(ct)&&ct(vt),this.ele&&Object(L.bind)(this.ele,function(){try{vt.resize()}catch(Ct){console.warn(Ct)}})},R.prototype.bindEvents=function(tt,Z){function ct(Ct,Bt){pt(Ct)&&z(Bt)&&tt.on(Ct,function(It){Bt(It,tt)})}for(var vt in Z)Object.prototype.hasOwnProperty.call(Z,vt)&&ct(vt,Z[vt])},R.prototype.updateEChartsOption=function(){var tt=this.props,Z=tt.option,ct=tt.notMerge,vt=ct===void 0?!1:ct,Ct=tt.lazyUpdate,Bt=Ct===void 0?!1:Ct,It=tt.showLoading,Wt=tt.loadingOption,ee=Wt===void 0?null:Wt,ae=this.getEchartsInstance();return ae.setOption(Z,vt,Bt),It?ae.showLoading(ee):ae.hideLoading(),ae},R.prototype.render=function(){var tt=this,Z=this.props,ct=Z.style,vt=Z.className,Ct=vt===void 0?"":vt,Bt=H({height:300},ct);return C.a.createElement("div",{ref:function(Wt){tt.ele=Wt},style:Bt,className:"echarts-for-react "+Ct})},R}(O.PureComponent),xt=_t,ft=function(K){mt(R,K);function R(tt){var Z=K.call(this,tt)||this;return Z.echarts=T,Z}return R}(xt),Mt=U.a=ft},"U4/e":function(Ge,U,S){"use strict";S.d(U,"a",function(){return ot}),S.d(U,"b",function(){return it});var B=S("bYtY"),mt=S("6GrX"),H=function(){function Q(Y,G,q){this._prepareParams(Y,G,q)}return Q.prototype._prepareParams=function(Y,G,q){q[1]<q[0]&&(q=[NaN,NaN]),this._dataMin=q[0],this._dataMax=q[1];var N=this._isOrdinal=Y.type==="ordinal";this._needCrossZero=G.getNeedCrossZero&&G.getNeedCrossZero();var V=this._modelMinRaw=G.get("min",!0);Object(B.isFunction)(V)?this._modelMinNum=it(Y,V({min:q[0],max:q[1]})):V!=="dataMin"&&(this._modelMinNum=it(Y,V));var lt=this._modelMaxRaw=G.get("max",!0);if(Object(B.isFunction)(lt)?this._modelMaxNum=it(Y,lt({min:q[0],max:q[1]})):lt!=="dataMax"&&(this._modelMaxNum=it(Y,lt)),N)this._axisDataLen=G.getCategories().length;else{var at=G.get("boundaryGap"),gt=Object(B.isArray)(at)?at:[at||0,at||0];typeof gt[0]=="boolean"||typeof gt[1]=="boolean"?this._boundaryGapInner=[0,0]:this._boundaryGapInner=[Object(mt.h)(gt[0],1),Object(mt.h)(gt[1],1)]}},Q.prototype.calculate=function(){var Y=this._isOrdinal,G=this._dataMin,q=this._dataMax,N=this._axisDataLen,V=this._boundaryGapInner,lt=Y?null:q-G||Math.abs(G),at=this._modelMinRaw==="dataMin"?G:this._modelMinNum,gt=this._modelMaxRaw==="dataMax"?q:this._modelMaxNum,Tt=at!=null,bt=gt!=null;at==null&&(at=Y?N?0:NaN:G-V[0]*lt),gt==null&&(gt=Y?N?N-1:NaN:q+V[1]*lt),(at==null||!isFinite(at))&&(at=NaN),(gt==null||!isFinite(gt))&&(gt=NaN),at>gt&&(at=NaN,gt=NaN);var nt=Object(B.eqNaN)(at)||Object(B.eqNaN)(gt)||Y&&!N;this._needCrossZero&&(at>0&&gt>0&&!Tt&&(at=0),at<0&&gt<0&&!bt&&(gt=0));var W=this._determinedMin,X=this._determinedMax;return W!=null&&(at=W,Tt=!0),X!=null&&(gt=X,bt=!0),{min:at,max:gt,minFixed:Tt,maxFixed:bt,isBlank:nt}},Q.prototype.modifyDataMinMax=function(Y,G){this[y[Y]]=G},Q.prototype.setDeterminedMinMax=function(Y,G){var q=ht[Y];this[q]=G},Q.prototype.freeze=function(){this.frozen=!0},Q}(),ht={min:"_determinedMin",max:"_determinedMax"},y={min:"_dataMin",max:"_dataMax"};function ot(Q,Y,G){var q=Q.rawExtentInfo;return q||(q=new H(Q,Y,G),Q.rawExtentInfo=q,q)}function it(Q,Y){return Y==null?null:Object(B.eqNaN)(Y)?NaN:Q.parse(Y)}},UhB0:function(Ge,U,S){"use strict";S.d(U,"c",function(){return bt}),S.d(U,"b",function(){return xt}),S.d(U,"a",function(){return ft});var B=S("Gev7"),mt=S("IMiH"),H=S("Xnb7"),ht=S("NDc/"),y=S("y+Vt"),ot=S("Dagg"),it=S("3U8f"),Q=S("6GrX"),Y=S("bYtY"),G=S("YIpD"),q=S("1bdT"),N=S("OS9S"),V=new mt.a(!0);function lt(K){var R=K.stroke;return!(R==null||R==="none"||!(K.lineWidth>0))}function at(K){var R=K.fill;return R!=null&&R!=="none"}function gt(K,R){if(R.fillOpacity!=null&&R.fillOpacity!==1){var tt=K.globalAlpha;K.globalAlpha=R.fillOpacity*R.opacity,K.fill(),K.globalAlpha=tt}else K.fill()}function Tt(K,R){if(R.strokeOpacity!=null&&R.strokeOpacity!==1){var tt=K.globalAlpha;K.globalAlpha=R.strokeOpacity*R.opacity,K.stroke(),K.globalAlpha=tt}else K.stroke()}function bt(K,R,tt){var Z=Object(H.a)(R.image,R.__image,tt);if(Object(H.c)(Z)){var ct=K.createPattern(Z,R.repeat||"repeat");if(typeof DOMMatrix=="function"&&ct.setTransform){var vt=new DOMMatrix;vt.rotateSelf(0,0,(R.rotation||0)/Math.PI*180),vt.scaleSelf(R.scaleX||1,R.scaleY||1),vt.translateSelf(R.x||0,R.y||0),ct.setTransform(vt)}return ct}}function nt(K,R,tt,Z){var ct=lt(tt),vt=at(tt),Ct=tt.strokePercent,Bt=Ct<1,It=!R.path;(!R.silent||Bt)&&It&&R.createPathProxy();var Wt=R.path||V;if(!Z){var ee=tt.fill,ae=tt.stroke,ye=vt&&!!ee.colorStops,Le=ct&&!!ae.colorStops,_e=vt&&!!ee.image,De=ct&&!!ae.image,er=void 0,Ie=void 0,Fe=void 0,He=void 0,ur=void 0;(ye||Le)&&(ur=R.getBoundingRect()),ye&&(er=R.__dirty?Object(ht.a)(K,ee,ur):R.__canvasFillGradient,R.__canvasFillGradient=er),Le&&(Ie=R.__dirty?Object(ht.a)(K,ae,ur):R.__canvasStrokeGradient,R.__canvasStrokeGradient=Ie),_e&&(Fe=R.__dirty||!R.__canvasFillPattern?bt(K,ee,R):R.__canvasFillPattern,R.__canvasFillPattern=Fe),De&&(He=R.__dirty||!R.__canvasStrokePattern?bt(K,ae,R):R.__canvasStrokePattern,R.__canvasStrokePattern=Fe),ye?K.fillStyle=er:_e&&(Fe?K.fillStyle=Fe:vt=!1),Le?K.strokeStyle=Ie:De&&(He?K.strokeStyle=He:ct=!1)}var br=tt.lineDash&&tt.lineWidth>0&&Object(G.a)(tt.lineDash,tt.lineWidth),kr=tt.lineDashOffset,Xe=!!K.setLineDash,Ut=R.getGlobalScale();if(Wt.setScale(Ut[0],Ut[1],R.segmentIgnoreThreshold),br){var Qt=tt.strokeNoScale&&R.getLineScale?R.getLineScale():1;Qt&&Qt!==1&&(br=Object(Y.map)(br,function(Zt){return Zt/Qt}),kr/=Qt)}var Yt=!0;(It||R.__dirty&y.b.SHAPE_CHANGED_BIT||br&&!Xe&&ct)&&(Wt.setDPR(K.dpr),Bt?Wt.setContext(null):(Wt.setContext(K),Yt=!1),Wt.reset(),br&&!Xe&&(Wt.setLineDash(br),Wt.setLineDashOffset(kr)),R.buildPath(Wt,R.shape,Z),Wt.toStatic(),R.pathUpdated()),Yt&&Wt.rebuildPath(K,Bt?Ct:1),br&&Xe&&(K.setLineDash(br),K.lineDashOffset=kr),Z||(tt.strokeFirst?(ct&&Tt(K,tt),vt&&gt(K,tt)):(vt&&gt(K,tt),ct&&Tt(K,tt))),br&&Xe&&K.setLineDash([])}function W(K,R,tt){var Z=R.__image=Object(H.a)(tt.image,R.__image,R,R.onload);if(!(!Z||!Object(H.c)(Z))){var ct=tt.x||0,vt=tt.y||0,Ct=R.getWidth(),Bt=R.getHeight(),It=Z.width/Z.height;if(Ct==null&&Bt!=null?Ct=Bt*It:Bt==null&&Ct!=null?Bt=Ct/It:Ct==null&&Bt==null&&(Ct=Z.width,Bt=Z.height),tt.sWidth&&tt.sHeight){var Wt=tt.sx||0,ee=tt.sy||0;K.drawImage(Z,Wt,ee,tt.sWidth,tt.sHeight,ct,vt,Ct,Bt)}else if(tt.sx&&tt.sy){var Wt=tt.sx,ee=tt.sy,ae=Ct-Wt,ye=Bt-ee;K.drawImage(Z,Wt,ee,ae,ye,ct,vt,Ct,Bt)}else K.drawImage(Z,ct,vt,Ct,Bt)}}function X(K,R,tt){var Z=tt.text;if(Z!=null&&(Z+=""),Z){K.font=tt.font||Q.a,K.textAlign=tt.textAlign,K.textBaseline=tt.textBaseline;var ct=void 0;if(K.setLineDash){var vt=tt.lineDash&&tt.lineWidth>0&&Object(G.a)(tt.lineDash,tt.lineWidth),Ct=tt.lineDashOffset;if(vt){var Bt=tt.strokeNoScale&&R.getLineScale?R.getLineScale():1;Bt&&Bt!==1&&(vt=Object(Y.map)(vt,function(It){return It/Bt}),Ct/=Bt),K.setLineDash(vt),K.lineDashOffset=Ct,ct=!0}}tt.strokeFirst?(lt(tt)&&K.strokeText(Z,tt.x,tt.y),at(tt)&&K.fillText(Z,tt.x,tt.y)):(at(tt)&&K.fillText(Z,tt.x,tt.y),lt(tt)&&K.strokeText(Z,tt.x,tt.y)),ct&&K.setLineDash([])}}var et=["shadowBlur","shadowOffsetX","shadowOffsetY"],k=[["lineCap","butt"],["lineJoin","miter"],["miterLimit",10]];function st(K,R,tt,Z,ct){var vt=!1;if(!Z&&(tt=tt||{},R===tt))return!1;if(Z||R.opacity!==tt.opacity){vt||(rt(K,ct),vt=!0);var Ct=Math.max(Math.min(R.opacity,1),0);K.globalAlpha=isNaN(Ct)?B.b.opacity:Ct}(Z||R.blend!==tt.blend)&&(vt||(rt(K,ct),vt=!0),K.globalCompositeOperation=R.blend||B.b.blend);for(var Bt=0;Bt<et.length;Bt++){var It=et[Bt];(Z||R[It]!==tt[It])&&(vt||(rt(K,ct),vt=!0),K[It]=K.dpr*(R[It]||0))}return(Z||R.shadowColor!==tt.shadowColor)&&(vt||(rt(K,ct),vt=!0),K.shadowColor=R.shadowColor||B.b.shadowColor),vt}function $(K,R,tt,Z,ct){var vt=_t(R,ct.inHover),Ct=Z?null:tt&&_t(tt,ct.inHover)||{};if(vt===Ct)return!1;var Bt=st(K,vt,Ct,Z,ct);if((Z||vt.fill!==Ct.fill)&&(Bt||(rt(K,ct),Bt=!0),K.fillStyle=vt.fill),(Z||vt.stroke!==Ct.stroke)&&(Bt||(rt(K,ct),Bt=!0),K.strokeStyle=vt.stroke),(Z||vt.opacity!==Ct.opacity)&&(Bt||(rt(K,ct),Bt=!0),K.globalAlpha=vt.opacity==null?1:vt.opacity),R.hasStroke()){var It=vt.lineWidth,Wt=It/(vt.strokeNoScale&&R&&R.getLineScale?R.getLineScale():1);K.lineWidth!==Wt&&(Bt||(rt(K,ct),Bt=!0),K.lineWidth=Wt)}for(var ee=0;ee<k.length;ee++){var ae=k[ee],ye=ae[0];(Z||vt[ye]!==Ct[ye])&&(Bt||(rt(K,ct),Bt=!0),K[ye]=vt[ye]||ae[1])}return Bt}function D(K,R,tt,Z,ct){return st(K,_t(R,ct.inHover),tt&&_t(tt,ct.inHover),Z,ct)}function T(K,R){var tt=R.transform,Z=K.dpr||1;tt?K.setTransform(Z*tt[0],Z*tt[1],Z*tt[2],Z*tt[3],Z*tt[4],Z*tt[5]):K.setTransform(Z,0,0,Z,0,0)}function O(K,R,tt){for(var Z=!1,ct=0;ct<K.length;ct++){var vt=K[ct];Z=Z||vt.isZeroArea(),T(R,vt),R.beginPath(),vt.buildPath(R,vt.shape),R.clip()}tt.allClipped=Z}function C(K,R){return K&&R?K[0]!==R[0]||K[1]!==R[1]||K[2]!==R[2]||K[3]!==R[3]||K[4]!==R[4]||K[5]!==R[5]:!(!K&&!R)}var L=1,w=2,z=3,pt=4;function At(K){var R=at(K),tt=lt(K);return!(K.lineDash||!(+R^+tt)||R&&typeof K.fill!="string"||tt&&typeof K.stroke!="string"||K.strokePercent<1||K.strokeOpacity<1||K.fillOpacity<1)}function rt(K,R){R.batchFill&&K.fill(),R.batchStroke&&K.stroke(),R.batchFill="",R.batchStroke=""}function _t(K,R){return R&&K.__hoverStyle||K.style}function xt(K,R){ft(K,R,{inHover:!1,viewWidth:0,viewHeight:0},!0)}function ft(K,R,tt,Z){var ct=R.transform;if(!R.shouldBePainted(tt.viewWidth,tt.viewHeight,!1,!1)){R.__dirty&=~q.a.REDARAW_BIT,R.__isRendered=!1;return}var vt=R.__clipPaths,Ct=tt.prevElClipPaths,Bt=!1,It=!1;if((!Ct||Object(ht.b)(vt,Ct))&&(Ct&&Ct.length&&(rt(K,tt),K.restore(),It=Bt=!0,tt.prevElClipPaths=null,tt.allClipped=!1,tt.prevEl=null),vt&&vt.length&&(rt(K,tt),K.save(),O(vt,K,tt),Bt=!0),tt.prevElClipPaths=vt),tt.allClipped){R.__isRendered=!1;return}R.beforeBrush&&R.beforeBrush(),R.innerBeforeBrush();var Wt=tt.prevEl;Wt||(It=Bt=!0);var ee=R instanceof y.b&&R.autoBatch&&At(R.style);Bt||C(ct,Wt.transform)?(rt(K,tt),T(K,R)):ee||rt(K,tt);var ae=_t(R,tt.inHover);R instanceof y.b?(tt.lastDrawType!==L&&(It=!0,tt.lastDrawType=L),$(K,R,Wt,It,tt),(!ee||!tt.batchFill&&!tt.batchStroke)&&K.beginPath(),nt(K,R,ae,ee),ee&&(tt.batchFill=ae.fill||"",tt.batchStroke=ae.stroke||"")):R instanceof it.a?(tt.lastDrawType!==z&&(It=!0,tt.lastDrawType=z),$(K,R,Wt,It,tt),X(K,R,ae)):R instanceof ot.a?(tt.lastDrawType!==w&&(It=!0,tt.lastDrawType=w),D(K,R,Wt,It,tt),W(K,R,ae)):R instanceof N.a&&(tt.lastDrawType!==pt&&(It=!0,tt.lastDrawType=pt),Mt(K,R,tt)),ee&&Z&&rt(K,tt),R.innerAfterBrush(),R.afterBrush&&R.afterBrush(),tt.prevEl=R,R.__dirty=0,R.__isRendered=!0}function Mt(K,R,tt){var Z=R.getDisplayables(),ct=R.getTemporalDisplayables();K.save();var vt={prevElClipPaths:null,prevEl:null,allClipped:!1,viewWidth:tt.viewWidth,viewHeight:tt.viewHeight,inHover:tt.inHover},Ct,Bt;for(Ct=R.getCursor(),Bt=Z.length;Ct<Bt;Ct++){var It=Z[Ct];It.beforeBrush&&It.beforeBrush(),It.innerBeforeBrush(),ft(K,It,vt,Ct===Bt-1),It.innerAfterBrush(),It.afterBrush&&It.afterBrush(),vt.prevEl=It}for(var Wt=0,ee=ct.length;Wt<ee;Wt++){var It=ct[Wt];It.beforeBrush&&It.beforeBrush(),It.innerBeforeBrush(),ft(K,It,vt,Wt===ee-1),It.innerAfterBrush(),It.afterBrush&&It.afterBrush(),vt.prevEl=It}R.clearTemporalDisplayables(),R.notClear=!0,K.restore()}},VR9l:function(Ge,U,S){"use strict";S.d(U,"a",function(){return mt}),S.d(U,"b",function(){return ht});var B=S("KCsZ"),mt=[["fill","color"],["stroke","borderColor"],["lineWidth","borderWidth"],["opacity"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"],["lineDash","borderType"],["lineDashOffset","borderDashOffset"],["lineCap","borderCap"],["lineJoin","borderJoin"],["miterLimit","borderMiterLimit"]],H=Object(B.a)(mt),ht=function(){function y(){}return y.prototype.getItemStyle=function(ot,it){return H(this,ot,it)},y}()},Vi4m:function(Ge,U,S){"use strict";var B=S("bYtY"),mt=function(){function H(ht){this.otherDims={},ht!=null&&B.extend(this,ht)}return H}();U.a=mt},W4dC:function(Ge,U,S){"use strict";var B=S("bYtY"),mt=S("LcXL"),H=S("Dagg"),ht=S("2fw6"),y=S("x6Kt"),ot=S("rmlV"),it=S("yxFR"),Q=S("h7HQ"),Y=S("1Jh7"),G=S("Fofx"),q=S("NC18"),N=S("SKnc"),V=S("3e3G"),lt=S("3U8f");function at(Xe){if(Object(B.isString)(Xe)){var Ut=new DOMParser;Xe=Ut.parseFromString(Xe,"text/xml")}var Qt=Xe;for(Qt.nodeType===9&&(Qt=Qt.firstChild);Qt.nodeName.toLowerCase()!=="svg"||Qt.nodeType!==1;)Qt=Qt.nextSibling;return Qt}var gt,Tt={fill:"fill",stroke:"stroke","stroke-width":"lineWidth",opacity:"opacity","fill-opacity":"fillOpacity","stroke-opacity":"strokeOpacity","stroke-dasharray":"lineDash","stroke-dashoffset":"lineDashOffset","stroke-linecap":"lineCap","stroke-linejoin":"lineJoin","stroke-miterlimit":"miterLimit","font-family":"fontFamily","font-size":"fontSize","font-style":"fontStyle","font-weight":"fontWeight","text-anchor":"textAlign",visibility:"visibility",display:"display"},bt=Object(B.keys)(Tt),nt={"alignment-baseline":"textBaseline","stop-color":"stopColor"},W=Object(B.keys)(nt),X=function(){function Xe(){this._defs={},this._root=null}return Xe.prototype.parse=function(Ut,Qt){Qt=Qt||{};var Yt=at(Ut);if(!Yt)throw new Error("Illegal svg");this._defsUsePending=[];var Zt=new mt.a;this._root=Zt;var ce=[],xe=Yt.getAttribute("viewBox")||"",Kt=parseFloat(Yt.getAttribute("width")||Qt.width),Rt=parseFloat(Yt.getAttribute("height")||Qt.height);isNaN(Kt)&&(Kt=null),isNaN(Rt)&&(Rt=null),T(Yt,Zt,null,!0,!1);for(var Jt=Yt.firstChild;Jt;)this._parseNode(Jt,Zt,ce,null,!1,!1),Jt=Jt.nextSibling;w(this._defs,this._defsUsePending),this._defsUsePending=[];var Xt,fe;if(xe){var be=pt(xe);be.length>=4&&(Xt={x:parseFloat(be[0]||0),y:parseFloat(be[1]||0),width:parseFloat(be[2]),height:parseFloat(be[3])})}if(Xt&&Kt!=null&&Rt!=null&&(fe=Mt(Xt,{x:0,y:0,width:Kt,height:Rt}),!Qt.ignoreViewBox)){var Ae=Zt;Zt=new mt.a,Zt.add(Ae),Ae.scaleX=Ae.scaleY=fe.scale,Ae.x=fe.x,Ae.y=fe.y}return!Qt.ignoreRootClip&&Kt!=null&&Rt!=null&&Zt.setClipPath(new y.a({shape:{x:0,y:0,width:Kt,height:Rt}})),{root:Zt,width:Kt,height:Rt,viewBoxRect:Xt,viewBoxTransform:fe,named:ce}},Xe.prototype._parseNode=function(Ut,Qt,Yt,Zt,ce,xe){var Kt=Ut.nodeName.toLowerCase(),Rt,Jt=Zt;if(Kt==="defs"&&(ce=!0),Kt==="text"&&(xe=!0),Kt==="defs"||Kt==="switch")Rt=Qt;else{if(!ce){var Xt=gt[Kt];if(Xt&&Object(B.hasOwn)(gt,Kt)){Rt=Xt.call(this,Ut,Qt);var fe=Ut.getAttribute("name");if(fe){var be={name:fe,namedFrom:null,svgNodeTagLower:Kt,el:Rt};Yt.push(be),Kt==="g"&&(Jt=be)}else Zt&&Yt.push({name:Zt.name,namedFrom:Zt,svgNodeTagLower:Kt,el:Rt});Qt.add(Rt)}}var Ae=et[Kt];if(Ae&&Object(B.hasOwn)(et,Kt)){var Ve=Ae.call(this,Ut),nr=Ut.getAttribute("id");nr&&(this._defs[nr]=Ve)}}if(Rt&&Rt.isGroup)for(var de=Ut.firstChild;de;)de.nodeType===1?this._parseNode(de,Rt,Yt,Jt,ce,xe):de.nodeType===3&&xe&&this._parseText(de,Rt),de=de.nextSibling},Xe.prototype._parseText=function(Ut,Qt){var Yt=new lt.a({style:{text:Ut.textContent},silent:!0,x:this._textX||0,y:this._textY||0});$(Qt,Yt),T(Ut,Yt,this._defsUsePending,!1,!1),O(Yt,Qt);var Zt=Yt.style,ce=Zt.fontSize;ce&&ce<9&&(Zt.fontSize=9,Yt.scaleX*=ce/9,Yt.scaleY*=ce/9);var xe=(Zt.fontSize||Zt.fontFamily)&&[Zt.fontStyle,Zt.fontWeight,(Zt.fontSize||12)+"px",Zt.fontFamily||"sans-serif"].join(" ");Zt.font=xe;var Kt=Yt.getBoundingRect();return this._textX+=Kt.width,Qt.add(Yt),Yt},Xe.internalField=function(){gt={g:function(Qt,Yt){var Zt=new mt.a;return $(Yt,Zt),T(Qt,Zt,this._defsUsePending,!1,!1),Zt},rect:function(Qt,Yt){var Zt=new y.a;return $(Yt,Zt),T(Qt,Zt,this._defsUsePending,!1,!1),Zt.setShape({x:parseFloat(Qt.getAttribute("x")||"0"),y:parseFloat(Qt.getAttribute("y")||"0"),width:parseFloat(Qt.getAttribute("width")||"0"),height:parseFloat(Qt.getAttribute("height")||"0")}),Zt.silent=!0,Zt},circle:function(Qt,Yt){var Zt=new ht.a;return $(Yt,Zt),T(Qt,Zt,this._defsUsePending,!1,!1),Zt.setShape({cx:parseFloat(Qt.getAttribute("cx")||"0"),cy:parseFloat(Qt.getAttribute("cy")||"0"),r:parseFloat(Qt.getAttribute("r")||"0")}),Zt.silent=!0,Zt},line:function(Qt,Yt){var Zt=new it.a;return $(Yt,Zt),T(Qt,Zt,this._defsUsePending,!1,!1),Zt.setShape({x1:parseFloat(Qt.getAttribute("x1")||"0"),y1:parseFloat(Qt.getAttribute("y1")||"0"),x2:parseFloat(Qt.getAttribute("x2")||"0"),y2:parseFloat(Qt.getAttribute("y2")||"0")}),Zt.silent=!0,Zt},ellipse:function(Qt,Yt){var Zt=new ot.a;return $(Yt,Zt),T(Qt,Zt,this._defsUsePending,!1,!1),Zt.setShape({cx:parseFloat(Qt.getAttribute("cx")||"0"),cy:parseFloat(Qt.getAttribute("cy")||"0"),rx:parseFloat(Qt.getAttribute("rx")||"0"),ry:parseFloat(Qt.getAttribute("ry")||"0")}),Zt.silent=!0,Zt},polygon:function(Qt,Yt){var Zt=Qt.getAttribute("points"),ce;Zt&&(ce=D(Zt));var xe=new Q.a({shape:{points:ce||[]},silent:!0});return $(Yt,xe),T(Qt,xe,this._defsUsePending,!1,!1),xe},polyline:function(Qt,Yt){var Zt=Qt.getAttribute("points"),ce;Zt&&(ce=D(Zt));var xe=new Y.a({shape:{points:ce||[]},silent:!0});return $(Yt,xe),T(Qt,xe,this._defsUsePending,!1,!1),xe},image:function(Qt,Yt){var Zt=new H.a;return $(Yt,Zt),T(Qt,Zt,this._defsUsePending,!1,!1),Zt.setStyle({image:Qt.getAttribute("xlink:href"),x:+Qt.getAttribute("x"),y:+Qt.getAttribute("y"),width:+Qt.getAttribute("width"),height:+Qt.getAttribute("height")}),Zt.silent=!0,Zt},text:function(Qt,Yt){var Zt=Qt.getAttribute("x")||"0",ce=Qt.getAttribute("y")||"0",xe=Qt.getAttribute("dx")||"0",Kt=Qt.getAttribute("dy")||"0";this._textX=parseFloat(Zt)+parseFloat(xe),this._textY=parseFloat(ce)+parseFloat(Kt);var Rt=new mt.a;return $(Yt,Rt),T(Qt,Rt,this._defsUsePending,!1,!0),Rt},tspan:function(Qt,Yt){var Zt=Qt.getAttribute("x"),ce=Qt.getAttribute("y");Zt!=null&&(this._textX=parseFloat(Zt)),ce!=null&&(this._textY=parseFloat(ce));var xe=Qt.getAttribute("dx")||"0",Kt=Qt.getAttribute("dy")||"0",Rt=new mt.a;return $(Yt,Rt),T(Qt,Rt,this._defsUsePending,!1,!0),this._textX+=parseFloat(xe),this._textY+=parseFloat(Kt),Rt},path:function(Qt,Yt){var Zt=Qt.getAttribute("d")||"",ce=Object(q.a)(Zt);return $(Yt,ce),T(Qt,ce,this._defsUsePending,!1,!1),ce.silent=!0,ce}}}(),Xe}(),et={lineargradient:function(Ut){var Qt=parseInt(Ut.getAttribute("x1")||"0",10),Yt=parseInt(Ut.getAttribute("y1")||"0",10),Zt=parseInt(Ut.getAttribute("x2")||"10",10),ce=parseInt(Ut.getAttribute("y2")||"0",10),xe=new N.a(Qt,Yt,Zt,ce);return k(Ut,xe),st(Ut,xe),xe},radialgradient:function(Ut){var Qt=parseInt(Ut.getAttribute("cx")||"0",10),Yt=parseInt(Ut.getAttribute("cy")||"0",10),Zt=parseInt(Ut.getAttribute("r")||"0",10),ce=new V.a(Qt,Yt,Zt);return k(Ut,ce),st(Ut,ce),ce}};function k(Xe,Ut){var Qt=Xe.getAttribute("gradientUnits");Qt==="userSpaceOnUse"&&(Ut.global=!0)}function st(Xe,Ut){for(var Qt=Xe.firstChild;Qt;){if(Qt.nodeType===1&&Qt.nodeName.toLocaleLowerCase()==="stop"){var Yt=Qt.getAttribute("offset"),Zt=void 0;Yt&&Yt.indexOf("%")>0?Zt=parseInt(Yt,10)/100:Yt?Zt=parseFloat(Yt):Zt=0;var ce={};xt(Qt,ce,ce);var xe=ce.stopColor||Qt.getAttribute("stop-color")||"#000000";Ut.colorStops.push({offset:Zt,color:xe})}Qt=Qt.nextSibling}}function $(Xe,Ut){Xe&&Xe.__inheritedStyle&&(Ut.__inheritedStyle||(Ut.__inheritedStyle={}),Object(B.defaults)(Ut.__inheritedStyle,Xe.__inheritedStyle))}function D(Xe){for(var Ut=pt(Xe),Qt=[],Yt=0;Yt<Ut.length;Yt+=2){var Zt=parseFloat(Ut[Yt]),ce=parseFloat(Ut[Yt+1]);Qt.push([Zt,ce])}return Qt}function T(Xe,Ut,Qt,Yt,Zt){var ce=Ut,xe=ce.__inheritedStyle=ce.__inheritedStyle||{},Kt={};Xe.nodeType===1&&(rt(Xe,Ut),xt(Xe,xe,Kt),Yt||ft(Xe,xe,Kt)),ce.style=ce.style||{},xe.fill!=null&&(ce.style.fill=L(ce,"fill",xe.fill,Qt)),xe.stroke!=null&&(ce.style.stroke=L(ce,"stroke",xe.stroke,Qt)),Object(B.each)(["lineWidth","opacity","fillOpacity","strokeOpacity","miterLimit","fontSize"],function(Rt){xe[Rt]!=null&&(ce.style[Rt]=parseFloat(xe[Rt]))}),Object(B.each)(["lineDashOffset","lineCap","lineJoin","fontWeight","fontFamily","fontStyle","textAlign"],function(Rt){xe[Rt]!=null&&(ce.style[Rt]=xe[Rt])}),Zt&&(ce.__selfStyle=Kt),xe.lineDash&&(ce.style.lineDash=Object(B.map)(pt(xe.lineDash),function(Rt){return parseFloat(Rt)})),(xe.visibility==="hidden"||xe.visibility==="collapse")&&(ce.invisible=!0),xe.display==="none"&&(ce.ignore=!0),ce.z=-1e4,ce.z2=-1e3}function O(Xe,Ut){var Qt=Ut.__selfStyle;if(Qt){var Yt=Qt.textBaseline,Zt=Yt;!Yt||Yt==="auto"||Yt==="baseline"?Zt="alphabetic":Yt==="before-edge"||Yt==="text-before-edge"?Zt="top":Yt==="after-edge"||Yt==="text-after-edge"?Zt="bottom":(Yt==="central"||Yt==="mathematical")&&(Zt="middle"),Xe.style.textBaseline=Zt}var ce=Ut.__inheritedStyle;if(ce){var xe=ce.textAlign,Kt=xe;xe&&(xe==="middle"&&(Kt="center"),Xe.style.textAlign=Kt)}}var C=/^url\(\s*#(.*?)\)/;function L(Xe,Ut,Qt,Yt){var Zt=Qt&&Qt.match(C);if(Zt){var ce=Object(B.trim)(Zt[1]);Yt.push([Xe,Ut,ce]);return}return Qt==="none"&&(Qt=null),Qt}function w(Xe,Ut){for(var Qt=0;Qt<Ut.length;Qt++){var Yt=Ut[Qt];Yt[0].style[Yt[1]]=Xe[Yt[2]]}}var z=/-?([0-9]*\.)?[0-9]+([eE]-?[0-9]+)?/g;function pt(Xe){return Xe.match(z)||[]}var At=/(translate|scale|rotate|skewX|skewY|matrix)\(([\-\s0-9\.eE,]*)\)/g;function rt(Xe,Ut){var Qt=Xe.getAttribute("transform");if(Qt){Qt=Qt.replace(/,/g," ");var Yt=[],Zt=null;Qt.replace(At,function(Jt,Xt,fe){return Yt.push(Xt,fe),""});for(var ce=Yt.length-1;ce>0;ce-=2){var xe=Yt[ce],Kt=Yt[ce-1],Rt=void 0;switch(Zt=Zt||G.create(),Kt){case"translate":Rt=pt(xe),G.translate(Zt,Zt,[parseFloat(Rt[0]),parseFloat(Rt[1]||"0")]);break;case"scale":Rt=pt(xe),G.scale(Zt,Zt,[parseFloat(Rt[0]),parseFloat(Rt[1]||Rt[0])]);break;case"rotate":Rt=pt(xe),G.rotate(Zt,Zt,-parseFloat(Rt[0])/180*Math.PI);break;case"skew":Rt=pt(xe),console.warn("Skew transform is not supported yet");break;case"matrix":Rt=pt(xe),Zt[0]=parseFloat(Rt[0]),Zt[1]=parseFloat(Rt[1]),Zt[2]=parseFloat(Rt[2]),Zt[3]=parseFloat(Rt[3]),Zt[4]=parseFloat(Rt[4]),Zt[5]=parseFloat(Rt[5]);break}}Ut.setLocalTransform(Zt)}}var _t=/([^\s:;]+)\s*:\s*([^:;]+)/g;function xt(Xe,Ut,Qt){var Yt=Xe.getAttribute("style");if(!!Yt){_t.lastIndex=0;for(var Zt;(Zt=_t.exec(Yt))!=null;){var ce=Zt[1],xe=Object(B.hasOwn)(Tt,ce)?Tt[ce]:null;xe&&(Ut[xe]=Zt[2]);var Kt=Object(B.hasOwn)(nt,ce)?nt[ce]:null;Kt&&(Qt[Kt]=Zt[2])}}}function ft(Xe,Ut,Qt){for(var Yt=0;Yt<bt.length;Yt++){var Zt=bt[Yt],ce=Xe.getAttribute(Zt);ce!=null&&(Ut[Tt[Zt]]=ce)}for(var Yt=0;Yt<W.length;Yt++){var Zt=W[Yt],ce=Xe.getAttribute(Zt);ce!=null&&(Qt[nt[Zt]]=ce)}}function Mt(Xe,Ut){var Qt=Ut.width/Xe.width,Yt=Ut.height/Xe.height,Zt=Math.min(Qt,Yt);return{scale:Zt,x:-(Xe.x+Xe.width/2)*Zt+(Ut.x+Ut.width/2),y:-(Xe.y+Xe.height/2)*Zt+(Ut.y+Ut.height/2)}}function K(Xe,Ut){var Qt=new X;return Qt.parse(Xe,Ut)}var R=S("mFDi"),tt=S("8nly"),Z=Object(B.createHashMap)(["rect","circle","line","ellipse","polygon","polyline","path","text","tspan","g"]),ct=function(){function Xe(Ut,Qt){this.type="geoSVG",this._usedGraphicMap=Object(B.createHashMap)(),this._freedGraphics=[],this._mapName=Ut,this._parsedXML=at(Qt)}return Xe.prototype.load=function(){var Ut=this._firstGraphic;if(!Ut){Ut=this._firstGraphic=this._buildGraphic(this._parsedXML),this._freedGraphics.push(Ut),this._boundingRect=this._firstGraphic.boundingRect.clone();var Qt=Ct(Ut.named),Yt=Qt.regions,Zt=Qt.regionsMap;this._regions=Yt,this._regionsMap=Zt}return{boundingRect:this._boundingRect,regions:this._regions,regionsMap:this._regionsMap}},Xe.prototype._buildGraphic=function(Ut){var Qt,Yt;try{Qt=Ut&&K(Ut,{ignoreViewBox:!0,ignoreRootClip:!0})||{},Yt=Qt.root,Object(B.assert)(Yt!=null)}catch(de){throw new Error(`Invalid svg format
`+de.message)}var Zt=new mt.a;Zt.add(Yt),Zt.isGeoSVGGraphicRoot=!0;var ce=Qt.width,xe=Qt.height,Kt=Qt.viewBoxRect,Rt=this._boundingRect;if(!Rt){var Jt=void 0,Xt=void 0,fe=void 0,be=void 0;if(ce!=null?(Jt=0,fe=ce):Kt&&(Jt=Kt.x,fe=Kt.width),xe!=null?(Xt=0,be=xe):Kt&&(Xt=Kt.y,be=Kt.height),Jt==null||Xt==null){var Ae=Yt.getBoundingRect();Jt==null&&(Jt=Ae.x,fe=Ae.width),Xt==null&&(Xt=Ae.y,be=Ae.height)}Rt=this._boundingRect=new R.a(Jt,Xt,fe,be)}if(Kt){var Ve=Mt(Kt,Rt);Yt.scaleX=Yt.scaleY=Ve.scale,Yt.x=Ve.x,Yt.y=Ve.y}Zt.setClipPath(new y.a({shape:Rt.plain()}));var nr=[];return Object(B.each)(Qt.named,function(de){Z.get(de.svgNodeTagLower)!=null&&(nr.push(de),vt(de.el))}),{root:Zt,boundingRect:Rt,named:nr}},Xe.prototype.useGraphic=function(Ut){var Qt=this._usedGraphicMap,Yt=Qt.get(Ut);return Yt||(Yt=this._freedGraphics.pop()||this._buildGraphic(this._parsedXML),Qt.set(Ut,Yt),Yt)},Xe.prototype.freeGraphic=function(Ut){var Qt=this._usedGraphicMap,Yt=Qt.get(Ut);Yt&&(Qt.removeKey(Ut),this._freedGraphics.push(Yt))},Xe}();function vt(Xe){Xe.silent=!1,Xe.isGroup&&Xe.traverse(function(Ut){Ut.silent=!1})}function Ct(Xe){var Ut=[],Qt=Object(B.createHashMap)();return Object(B.each)(Xe,function(Yt){if(Yt.namedFrom==null){var Zt=new tt.b(Yt.name,Yt.el);Ut.push(Zt),Qt.set(Yt.name,Zt)}}),{regions:Ut,regionsMap:Qt}}for(var Bt=S("vafp"),It=[126,25],Wt=[[[0,3.5],[7,11.2],[15,11.9],[30,7],[42,.7],[52,.7],[56,7.7],[59,.7],[64,.7],[64,0],[5,0],[0,3.5]],[[13,16.1],[19,14.7],[16,21.7],[11,23.1],[13,16.1]],[[12,32.2],[14,38.5],[15,38.5],[13,32.2],[12,32.2]],[[16,47.6],[12,53.2],[13,53.2],[18,47.6],[16,47.6]],[[6,64.4],[8,70],[9,70],[8,64.4],[6,64.4]],[[23,82.6],[29,79.8],[30,79.8],[25,82.6],[23,82.6]],[[37,70.7],[43,62.3],[44,62.3],[39,70.7],[37,70.7]],[[48,51.1],[51,45.5],[53,45.5],[50,51.1],[48,51.1]],[[51,35],[51,28.7],[53,28.7],[53,35],[51,35]],[[52,22.4],[55,17.5],[56,17.5],[53,22.4],[52,22.4]],[[58,12.6],[62,7],[63,7],[60,12.6],[58,12.6]],[[0,3.5],[0,93.1],[64,93.1],[64,0],[63,0],[63,92.4],[1,92.4],[1,3.5],[0,3.5]]],ee=0;ee<Wt.length;ee++)for(var ae=0;ae<Wt[ee].length;ae++)Wt[ee][ae][0]/=10.5,Wt[ee][ae][1]/=-10.5/.75,Wt[ee][ae][0]+=It[0],Wt[ee][ae][1]+=It[1];function ye(Xe,Ut){Xe==="china"&&Ut.push(new tt.a("\u5357\u6D77\u8BF8\u5C9B",B.map(Wt,function(Qt){return{type:"polygon",exterior:Qt}}),It))}var Le=S("F5Ls"),_e=S("a9QJ"),De=[[[123.45165252685547,25.73527164402261],[123.49731445312499,25.73527164402261],[123.49731445312499,25.750734064600884],[123.45165252685547,25.750734064600884],[123.45165252685547,25.73527164402261]]];function er(Xe,Ut){Xe==="china"&&Ut.name==="\u53F0\u6E7E"&&Ut.geometries.push({type:"polygon",exterior:De[0]})}var Ie="name",Fe=function(){function Xe(Ut,Qt,Yt){this.type="geoJSON",this._parsedMap=Object(B.createHashMap)(),this._mapName=Ut,this._specialAreas=Yt,this._geoJSON=ur(Qt)}return Xe.prototype.load=function(Ut,Qt){Qt=Qt||Ie;var Yt=this._parsedMap.get(Qt);if(!Yt){var Zt=this._parseToRegions(Qt);Yt=this._parsedMap.set(Qt,{regions:Zt,boundingRect:He(Zt)})}var ce=Object(B.createHashMap)(),xe=[];return Object(B.each)(Yt.regions,function(Kt){var Rt=Kt.name;Ut&&Ut.hasOwnProperty(Rt)&&(Kt=Kt.cloneShallow(Rt=Ut[Rt])),xe.push(Kt),ce.set(Rt,Kt)}),{regions:xe,boundingRect:Yt.boundingRect||new R.a(0,0,0,0),regionsMap:ce}},Xe.prototype._parseToRegions=function(Ut){var Qt=this._mapName,Yt=this._geoJSON,Zt;try{Zt=Yt?Object(Bt.a)(Yt,Ut):[]}catch(ce){throw new Error(`Invalid geoJson format
`+ce.message)}return ye(Qt,Zt),Object(B.each)(Zt,function(ce){var xe=ce.name;Object(Le.a)(Qt,ce),Object(_e.a)(Qt,ce),er(Qt,ce);var Kt=this._specialAreas&&this._specialAreas[xe];Kt&&ce.transformTo(Kt.left,Kt.top,Kt.width,Kt.height)},this),Zt},Xe.prototype.getMapForUser=function(){return{geoJson:this._geoJSON,geoJSON:this._geoJSON,specialAreas:this._specialAreas}},Xe}();function He(Xe){for(var Ut,Qt=0;Qt<Xe.length;Qt++){var Yt=Xe[Qt].getBoundingRect();Ut=Ut||Yt.clone(),Ut.union(Yt)}return Ut}function ur(Xe){return Object(B.isString)(Xe)?typeof JSON!="undefined"&&JSON.parse?JSON.parse(Xe):new Function("return ("+Xe+");")():Xe}var br=Object(B.createHashMap)(),kr=U.a={registerMap:function(Xe,Ut,Qt){if(Ut.svg){var Yt=new ct(Xe,Ut.svg);br.set(Xe,Yt)}else{var Zt=Ut.geoJson||Ut.geoJSON;Zt&&!Ut.features?Qt=Ut.specialAreas:Zt=Ut;var Yt=new Fe(Xe,Zt,Qt);br.set(Xe,Yt)}},getGeoResource:function(Xe){return br.get(Xe)},getMapForUser:function(Xe){var Ut=br.get(Xe);return Ut&&Ut.type==="geoJSON"&&Ut.getMapForUser()},load:function(Xe,Ut,Qt){var Yt=br.get(Xe);if(!!Yt)return Yt.load(Ut,Qt)}}},Xnb7:function(Ge,U,S){"use strict";S.d(U,"b",function(){return H}),S.d(U,"a",function(){return ht}),S.d(U,"c",function(){return ot});var B=S("1RvN"),mt=new B.a(50);function H(it){if(typeof it=="string"){var Q=mt.get(it);return Q&&Q.image}else return it}function ht(it,Q,Y,G,q){if(it)if(typeof it=="string"){if(Q&&Q.__zrImageSrc===it||!Y)return Q;var N=mt.get(it),V={hostEl:Y,cb:G,cbPayload:q};return N?(Q=N.image,!ot(Q)&&N.pending.push(V)):(Q=new Image,Q.onload=Q.onerror=y,mt.put(it,Q.__cachedImgObj={image:Q,pending:[V]}),Q.src=Q.__zrImageSrc=it),Q}else return it;else return Q}function y(){var it=this.__cachedImgObj;this.onload=this.onerror=this.__cachedImgObj=null;for(var Q=0;Q<it.pending.length;Q++){var Y=it.pending[Q],G=Y.cb;G&&G(this,Y.cbPayload),Y.hostEl.dirty()}it.pending.length=0}function ot(it){return it&&it.width&&it.height}},XoG2:function(Ge,U,S){"use strict";S.d(U,"a",function(){return Q});var B=S("f66r"),mt=S("bLfw"),H=S("sS/r"),ht=S("B/3G"),y=S("9yv4"),ot=function(Y){Object(B.b)(G,Y);function G(){var q=Y!==null&&Y.apply(this,arguments)||this;return q.type="dataset",q}return G.prototype.init=function(q,N,V){Y.prototype.init.call(this,q,N,V),this._sourceManager=new y.a(this),Object(y.b)(this)},G.prototype.mergeOption=function(q,N){Y.prototype.mergeOption.call(this,q,N),Object(y.b)(this)},G.prototype.optionUpdated=function(){this._sourceManager.dirty()},G.prototype.getSourceManager=function(){return this._sourceManager},G.type="dataset",G.defaultOption={seriesLayoutBy:ht.a},G}(mt.a),it=function(Y){Object(B.b)(G,Y);function G(){var q=Y!==null&&Y.apply(this,arguments)||this;return q.type="dataset",q}return G.type="dataset",G}(H.a);function Q(Y){Y.registerComponentModel(ot),Y.registerComponentView(it)}},YH21:function(Ge,U,S){"use strict";S.d(U,"b",function(){return ot}),S.d(U,"c",function(){return Q}),S.d(U,"e",function(){return Y}),S.d(U,"a",function(){return q}),S.d(U,"f",function(){return N}),S.d(U,"g",function(){return V}),S.d(U,"d",function(){return lt});var B=S("ItGF"),mt=S("Ze12"),H=typeof window!="undefined"&&!!window.addEventListener,ht=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,y=[];function ot(gt,Tt,bt,nt){return bt=bt||{},nt||!B.a.canvasSupported?it(gt,Tt,bt):B.a.browser.firefox&&Tt.layerX!=null&&Tt.layerX!==Tt.offsetX?(bt.zrX=Tt.layerX,bt.zrY=Tt.layerY):Tt.offsetX!=null?(bt.zrX=Tt.offsetX,bt.zrY=Tt.offsetY):it(gt,Tt,bt),bt}function it(gt,Tt,bt){if(B.a.domSupported&&gt.getBoundingClientRect){var nt=Tt.clientX,W=Tt.clientY;if(Object(mt.a)(gt)){var X=gt.getBoundingClientRect();bt.zrX=nt-X.left,bt.zrY=W-X.top;return}else if(Object(mt.b)(y,gt,nt,W)){bt.zrX=y[0],bt.zrY=y[1];return}}bt.zrX=bt.zrY=0}function Q(gt){return gt||window.event}function Y(gt,Tt,bt){if(Tt=Q(Tt),Tt.zrX!=null)return Tt;var nt=Tt.type,W=nt&&nt.indexOf("touch")>=0;if(W){var et=nt!=="touchend"?Tt.targetTouches[0]:Tt.changedTouches[0];et&&ot(gt,et,Tt,bt)}else{ot(gt,Tt,Tt,bt);var X=G(Tt);Tt.zrDelta=X?X/120:-(Tt.detail||0)/3}var k=Tt.button;return Tt.which==null&&k!==void 0&&ht.test(Tt.type)&&(Tt.which=k&1?1:k&2?3:k&4?2:0),Tt}function G(gt){var Tt=gt.wheelDelta;if(Tt)return Tt;var bt=gt.deltaX,nt=gt.deltaY;if(bt==null||nt==null)return Tt;var W=Math.abs(nt!==0?nt:bt),X=nt>0?-1:nt<0?1:bt>0?-1:1;return 3*W*X}function q(gt,Tt,bt,nt){H?gt.addEventListener(Tt,bt,nt):gt.attachEvent("on"+Tt,bt)}function N(gt,Tt,bt,nt){H?gt.removeEventListener(Tt,bt,nt):gt.detachEvent("on"+Tt,bt)}var V=H?function(gt){gt.preventDefault(),gt.stopPropagation(),gt.cancelBubble=!0}:function(gt){gt.returnValue=!1,gt.cancelBubble=!0};function lt(gt){return gt.which===2||gt.which===3}function at(gt){return gt.which>1}},YIpD:function(Ge,U,S){"use strict";S.d(U,"a",function(){return mt});var B=S("bYtY");function mt(H,ht){return!H||H==="solid"||!(ht>0)?null:(ht=ht||1,H==="dashed"?[4*ht,2*ht]:H==="dotted"?[ht]:Object(B.isNumber)(H)?[H]:Object(B.isArray)(H)?H:null)}},YXkt:function(Ge,U,S){"use strict";var B=S("bYtY"),mt=S("Qxkt"),H=S("gPAo"),ht=S("KxfA"),y=S("L0Ub"),ot=S("Vi4m"),it=S("B/3G"),Q=S("4NO4"),Y=S("hhxK"),G=S("t9mh"),q=S("7G+c"),N=Math.floor,V=B.isObject,lt=B.map,at="undefined",gt=-1,Tt="e\0\0",bt={float:typeof Float64Array===at?Array:Float64Array,int:typeof Int32Array===at?Array:Int32Array,ordinal:Array,number:Array,time:Array},nt=typeof Uint32Array===at?Array:Uint32Array,W=typeof Int32Array===at?Array:Int32Array,X=typeof Uint16Array===at?Array:Uint16Array,et=["hasItemOption","_nameList","_idList","_invertedIndicesMap","_rawData","_dimValueGetter","_count","_rawCount","_nameDimIdx","_idDimIdx","_nameRepeatCount"],k=["_extent","_approximateExtent","_rawExtent"],st,$,D,T,O,C,L,w,z,pt,At,rt,_t,xt,ft,Mt=function(){function K(R,tt){this.type="list",this._count=0,this._rawCount=0,this._storage={},this._storageArr=[],this._nameList=[],this._idList=[],this._visual={},this._layout={},this._itemVisuals=[],this._itemLayouts=[],this._graphicEls=[],this._rawExtent={},this._extent={},this._approximateExtent={},this._calculationInfo={},this.hasItemOption=!0,this.TRANSFERABLE_METHODS=["cloneShallow","downSample","lttbDownSample","map"],this.CHANGABLE_METHODS=["filterSelf","selectRange"],this.DOWNSAMPLE_METHODS=["downSample","lttbDownSample"],this.getRawIndex=O,R=R||["x","y"];for(var Z={},ct=[],vt={},Ct=0;Ct<R.length;Ct++){var Bt=R[Ct],It=B.isString(Bt)?new ot.a({name:Bt}):Bt instanceof ot.a?Bt:new ot.a(Bt),Wt=It.name;It.type=It.type||"float",It.coordDim||(It.coordDim=Wt,It.coordDimIndex=0);var ee=It.otherDims=It.otherDims||{};ct.push(Wt),Z[Wt]=It,It.index=Ct,It.createInvertedIndices&&(vt[Wt]=[]),ee.itemName===0&&(this._nameDimIdx=Ct,this._nameOrdinalMeta=It.ordinalMeta),ee.itemId===0&&(this._idDimIdx=Ct,this._idOrdinalMeta=It.ordinalMeta)}this.dimensions=ct,this._dimensionInfos=Z,this.hostModel=tt,this._dimensionsSummary=Object(y.b)(this),this._invertedIndicesMap=vt,this.userOutput=this._dimensionsSummary.userOutput}return K.prototype.getDimension=function(R){return(typeof R=="number"||!isNaN(R)&&!this._dimensionInfos.hasOwnProperty(R))&&(R=this.dimensions[R]),R},K.prototype.getDimensionInfo=function(R){return this._dimensionInfos[this.getDimension(R)]},K.prototype.getDimensionsOnCoord=function(){return this._dimensionsSummary.dataDimsOnCoord.slice()},K.prototype.mapDimension=function(R,tt){var Z=this._dimensionsSummary;if(tt==null)return Z.encodeFirstDimNotExtra[R];var ct=Z.encode[R];return ct?ct[tt]:null},K.prototype.mapDimensionsAll=function(R){var tt=this._dimensionsSummary,Z=tt.encode[R];return(Z||[]).slice()},K.prototype.initData=function(R,tt,Z){var ct=Object(q.e)(R)||B.isArrayLike(R),vt=ct?new ht.a(R,this.dimensions.length):R;this._rawData=vt;var Ct=vt.getSource().sourceFormat;this._storage={},this._indices=null,this._dontMakeIdFromName=this._idDimIdx!=null||Ct===it.g||!!vt.fillStorage,this._nameList=(tt||[]).slice(),this._idList=[],this._nameRepeatCount={},Z||(this.hasItemOption=!1),this.defaultDimValueGetter=st[Ct],this._dimValueGetter=Z=Z||this.defaultDimValueGetter,this._dimValueGetterArrayRows=st.arrayRows,this._rawExtent={},this._initDataFromProvider(0,vt.count()),vt.pure&&(this.hasItemOption=!1)},K.prototype.getProvider=function(){return this._rawData},K.prototype.appendData=function(R){var tt=this._rawData,Z=this.count();tt.appendData(R);var ct=tt.count();tt.persistent||(ct+=Z),this._initDataFromProvider(Z,ct,!0)},K.prototype.appendValues=function(R,tt){for(var Z=this._storage,ct=this.dimensions,vt=ct.length,Ct=this._rawExtent,Bt=this.count(),It=Bt+Math.max(R.length,tt?tt.length:0),Wt=0;Wt<vt;Wt++){var ee=ct[Wt];Ct[ee]||(Ct[ee]=_t()),T(Z,this._dimensionInfos[ee],It,!0)}for(var ae=lt(ct,function(He){return Ct[He]}),ye=this._storageArr=lt(ct,function(He){return Z[He]}),Le=[],_e=Bt;_e<It;_e++){for(var De=_e-Bt,er=0;er<vt;er++){var ee=ct[er],Ie=this._dimValueGetterArrayRows(R[De]||Le,ee,De,er);ye[er][_e]=Ie;var Fe=ae[er];Ie<Fe[0]&&(Fe[0]=Ie),Ie>Fe[1]&&(Fe[1]=Ie)}tt&&(this._nameList[_e]=tt[De],this._dontMakeIdFromName||z(this,_e))}this._rawCount=this._count=It,this._extent={},$(this)},K.prototype._initDataFromProvider=function(R,tt,Z){if(!(R>=tt)){for(var ct=this._rawData,vt=this._storage,Ct=this.dimensions,Bt=Ct.length,It=this._dimensionInfos,Wt=this._nameList,ee=this._idList,ae=this._rawExtent,ye=ct.getSource().sourceFormat,Le=ye===it.f,_e=0;_e<Bt;_e++){var De=Ct[_e];ae[De]||(ae[De]=_t()),T(vt,It[De],tt,Z)}var er=this._storageArr=lt(Ct,function(Yt){return vt[Yt]}),Ie=lt(Ct,function(Yt){return ae[Yt]});if(ct.fillStorage)ct.fillStorage(R,tt,er,Ie);else for(var Fe=[],He=R;He<tt;He++){Fe=ct.getItem(He,Fe);for(var ur=0;ur<Bt;ur++){var De=Ct[ur],br=er[ur],kr=this._dimValueGetter(Fe,De,He,ur);br[He]=kr;var Xe=Ie[ur];kr<Xe[0]&&(Xe[0]=kr),kr>Xe[1]&&(Xe[1]=kr)}if(Le&&!ct.pure&&Fe){var Ut=Fe.name;Wt[He]==null&&Ut!=null&&(Wt[He]=Object(Q.e)(Ut,null));var Qt=Fe.id;ee[He]==null&&Qt!=null&&(ee[He]=Object(Q.e)(Qt,null))}this._dontMakeIdFromName||z(this,He)}!ct.persistent&&ct.clean&&ct.clean(),this._rawCount=this._count=tt,this._extent={},$(this)}},K.prototype.count=function(){return this._count},K.prototype.getIndices=function(){var R,tt=this._indices;if(tt){var Z=tt.constructor,ct=this._count;if(Z===Array){R=new Z(ct);for(var vt=0;vt<ct;vt++)R[vt]=tt[vt]}else R=new Z(tt.buffer,0,ct)}else{var Z=D(this);R=new Z(this.count());for(var vt=0;vt<R.length;vt++)R[vt]=vt}return R},K.prototype.getByDimIdx=function(R,tt){if(!(tt>=0&&tt<this._count))return NaN;var Z=this._storageArr[R];return Z?Z[this.getRawIndex(tt)]:NaN},K.prototype.get=function(R,tt){if(!(tt>=0&&tt<this._count))return NaN;var Z=this._storage[R];return Z?Z[this.getRawIndex(tt)]:NaN},K.prototype.getByRawIndex=function(R,tt){if(!(tt>=0&&tt<this._rawCount))return NaN;var Z=this._storage[R];return Z?Z[tt]:NaN},K.prototype.getValues=function(R,tt){var Z=[];B.isArray(R)||(tt=R,R=this.dimensions);for(var ct=0,vt=R.length;ct<vt;ct++)Z.push(this.get(R[ct],tt));return Z},K.prototype.hasValue=function(R){for(var tt=this._dimensionsSummary.dataDimsOnCoord,Z=0,ct=tt.length;Z<ct;Z++)if(isNaN(this.get(tt[Z],R)))return!1;return!0},K.prototype.getDataExtent=function(R){R=this.getDimension(R);var tt=this._storage[R],Z=_t();if(!tt)return Z;var ct=this.count(),vt=!this._indices,Ct;if(vt)return this._rawExtent[R].slice();if(Ct=this._extent[R],Ct)return Ct.slice();Ct=Z;for(var Bt=Ct[0],It=Ct[1],Wt=0;Wt<ct;Wt++){var ee=this.getRawIndex(Wt),ae=tt[ee];ae<Bt&&(Bt=ae),ae>It&&(It=ae)}return Ct=[Bt,It],this._extent[R]=Ct,Ct},K.prototype.getApproximateExtent=function(R){return R=this.getDimension(R),this._approximateExtent[R]||this.getDataExtent(R)},K.prototype.setApproximateExtent=function(R,tt){tt=this.getDimension(tt),this._approximateExtent[tt]=R.slice()},K.prototype.getCalculationInfo=function(R){return this._calculationInfo[R]},K.prototype.setCalculationInfo=function(R,tt){V(R)?B.extend(this._calculationInfo,R):this._calculationInfo[R]=tt},K.prototype.getSum=function(R){var tt=this._storage[R],Z=0;if(tt)for(var ct=0,vt=this.count();ct<vt;ct++){var Ct=this.get(R,ct);isNaN(Ct)||(Z+=Ct)}return Z},K.prototype.getMedian=function(R){var tt=[];this.each(R,function(vt){isNaN(vt)||tt.push(vt)});var Z=tt.sort(function(vt,Ct){return vt-Ct}),ct=this.count();return ct===0?0:ct%2==1?Z[(ct-1)/2]:(Z[ct/2]+Z[ct/2-1])/2},K.prototype.rawIndexOf=function(R,tt){var Z=R&&this._invertedIndicesMap[R],ct=Z[tt];return ct==null||isNaN(ct)?gt:ct},K.prototype.indexOfName=function(R){for(var tt=0,Z=this.count();tt<Z;tt++)if(this.getName(tt)===R)return tt;return-1},K.prototype.indexOfRawIndex=function(R){if(R>=this._rawCount||R<0)return-1;if(!this._indices)return R;var tt=this._indices,Z=tt[R];if(Z!=null&&Z<this._count&&Z===R)return R;for(var ct=0,vt=this._count-1;ct<=vt;){var Ct=(ct+vt)/2|0;if(tt[Ct]<R)ct=Ct+1;else if(tt[Ct]>R)vt=Ct-1;else return Ct}return-1},K.prototype.indicesOfNearest=function(R,tt,Z){var ct=this._storage,vt=ct[R],Ct=[];if(!vt)return Ct;Z==null&&(Z=Infinity);for(var Bt=Infinity,It=-1,Wt=0,ee=0,ae=this.count();ee<ae;ee++){var ye=this.getRawIndex(ee),Le=tt-vt[ye],_e=Math.abs(Le);_e<=Z&&((_e<Bt||_e===Bt&&Le>=0&&It<0)&&(Bt=_e,It=Le,Wt=0),Le===It&&(Ct[Wt++]=ee))}return Ct.length=Wt,Ct},K.prototype.getRawDataItem=function(R){if(this._rawData.persistent)return this._rawData.getItem(this.getRawIndex(R));for(var tt=[],Z=0;Z<this.dimensions.length;Z++){var ct=this.dimensions[Z];tt.push(this.get(ct,R))}return tt},K.prototype.getName=function(R){var tt=this.getRawIndex(R),Z=this._nameList[tt];return Z==null&&this._nameDimIdx!=null&&(Z=w(this,this._nameDimIdx,this._nameOrdinalMeta,tt)),Z==null&&(Z=""),Z},K.prototype.getId=function(R){return L(this,this.getRawIndex(R))},K.prototype.each=function(R,tt,Z,ct){"use strict";var vt=this;if(!!this._count){typeof R=="function"&&(ct=Z,Z=tt,tt=R,R=[]);for(var Ct=Z||ct||this,Bt=lt(pt(R),this.getDimension,this),It=Bt.length,Wt=lt(Bt,function(er){return vt._dimensionInfos[er].index}),ee=this._storageArr,ae=0,ye=this.count();ae<ye;ae++){var Le=this.getRawIndex(ae);switch(It){case 0:tt.call(Ct,ae);break;case 1:tt.call(Ct,ee[Wt[0]][Le],ae);break;case 2:tt.call(Ct,ee[Wt[0]][Le],ee[Wt[1]][Le],ae);break;default:for(var _e=0,De=[];_e<It;_e++)De[_e]=ee[Wt[_e]][Le];De[_e]=ae,tt.apply(Ct,De)}}}},K.prototype.filterSelf=function(R,tt,Z,ct){"use strict";var vt=this;if(!!this._count){typeof R=="function"&&(ct=Z,Z=tt,tt=R,R=[]);for(var Ct=Z||ct||this,Bt=lt(pt(R),this.getDimension,this),It=this.count(),Wt=D(this),ee=new Wt(It),ae=[],ye=Bt.length,Le=0,_e=lt(Bt,function(kr){return vt._dimensionInfos[kr].index}),De=_e[0],er=this._storageArr,Ie=0;Ie<It;Ie++){var Fe=void 0,He=this.getRawIndex(Ie);if(ye===0)Fe=tt.call(Ct,Ie);else if(ye===1){var ur=er[De][He];Fe=tt.call(Ct,ur,Ie)}else{for(var br=0;br<ye;br++)ae[br]=er[_e[br]][He];ae[br]=Ie,Fe=tt.apply(Ct,ae)}Fe&&(ee[Le++]=He)}return Le<It&&(this._indices=ee),this._count=Le,this._extent={},this.getRawIndex=this._indices?C:O,this}},K.prototype.selectRange=function(R){"use strict";var tt=this,Z=this._count;if(!!Z){var ct=[];for(var vt in R)R.hasOwnProperty(vt)&&ct.push(vt);var Ct=ct.length;if(!!Ct){var Bt=this.count(),It=D(this),Wt=new It(Bt),ee=0,ae=ct[0],ye=lt(ct,function(xe){return tt._dimensionInfos[xe].index}),Le=R[ae][0],_e=R[ae][1],De=this._storageArr,er=!1;if(!this._indices){var Ie=0;if(Ct===1){for(var Fe=De[ye[0]],He=0;He<Z;He++){var ur=Fe[He];(ur>=Le&&ur<=_e||isNaN(ur))&&(Wt[ee++]=Ie),Ie++}er=!0}else if(Ct===2){for(var Fe=De[ye[0]],br=De[ye[1]],kr=R[ct[1]][0],Xe=R[ct[1]][1],He=0;He<Z;He++){var ur=Fe[He],Ut=br[He];(ur>=Le&&ur<=_e||isNaN(ur))&&(Ut>=kr&&Ut<=Xe||isNaN(Ut))&&(Wt[ee++]=Ie),Ie++}er=!0}}if(!er)if(Ct===1)for(var He=0;He<Bt;He++){var Qt=this.getRawIndex(He),ur=De[ye[0]][Qt];(ur>=Le&&ur<=_e||isNaN(ur))&&(Wt[ee++]=Qt)}else for(var He=0;He<Bt;He++){for(var Yt=!0,Qt=this.getRawIndex(He),Zt=0;Zt<Ct;Zt++){var ce=ct[Zt],ur=De[ye[Zt]][Qt];(ur<R[ce][0]||ur>R[ce][1])&&(Yt=!1)}Yt&&(Wt[ee++]=this.getRawIndex(He))}return ee<Bt&&(this._indices=Wt),this._count=ee,this._extent={},this.getRawIndex=this._indices?C:O,this}}},K.prototype.mapArray=function(R,tt,Z,ct){"use strict";typeof R=="function"&&(ct=Z,Z=tt,tt=R,R=[]),Z=Z||ct||this;var vt=[];return this.each(R,function(){vt.push(tt&&tt.apply(this,arguments))},Z),vt},K.prototype.map=function(R,tt,Z,ct){"use strict";var vt=Z||ct||this,Ct=lt(pt(R),this.getDimension,this),Bt=rt(this,Ct),It=Bt._storage;Bt._indices=this._indices,Bt.getRawIndex=Bt._indices?C:O;for(var Wt=[],ee=Ct.length,ae=this.count(),ye=[],Le=Bt._rawExtent,_e=0;_e<ae;_e++){for(var De=0;De<ee;De++)ye[De]=this.get(Ct[De],_e);ye[ee]=_e;var er=tt&&tt.apply(vt,ye);if(er!=null){typeof er!="object"&&(Wt[0]=er,er=Wt);for(var Ie=this.getRawIndex(_e),Fe=0;Fe<er.length;Fe++){var He=Ct[Fe],ur=er[Fe],br=Le[He],kr=It[He];kr&&(kr[Ie]=ur),ur<br[0]&&(br[0]=ur),ur>br[1]&&(br[1]=ur)}}}return Bt},K.prototype.downSample=function(R,tt,Z,ct){for(var vt=rt(this,[R]),Ct=vt._storage,Bt=[],It=N(1/tt),Wt=Ct[R],ee=this.count(),ae=vt._rawExtent[R],ye=new(D(this))(ee),Le=0,_e=0;_e<ee;_e+=It){It>ee-_e&&(It=ee-_e,Bt.length=It);for(var De=0;De<It;De++){var er=this.getRawIndex(_e+De);Bt[De]=Wt[er]}var Ie=Z(Bt),Fe=this.getRawIndex(Math.min(_e+ct(Bt,Ie)||0,ee-1));Wt[Fe]=Ie,Ie<ae[0]&&(ae[0]=Ie),Ie>ae[1]&&(ae[1]=Ie),ye[Le++]=Fe}return vt._count=Le,vt._indices=ye,vt.getRawIndex=C,vt},K.prototype.lttbDownSample=function(R,tt){var Z=rt(this,[]),ct=Z._storage,vt=ct[R],Ct=this.count(),Bt=new(D(this))(Ct),It=0,Wt=N(1/tt),ee=this.getRawIndex(0),ae,ye,Le;Bt[It++]=ee;for(var _e=1;_e<Ct-1;_e+=Wt){for(var De=Math.min(_e+Wt,Ct-1),er=Math.min(_e+Wt*2,Ct),Ie=(er+De)/2,Fe=0,He=De;He<er;He++){var ur=this.getRawIndex(He),br=vt[ur];isNaN(br)||(Fe+=br)}Fe/=er-De;var kr=_e,Xe=Math.min(_e+Wt,Ct),Ut=_e-1,Qt=vt[ee];ae=-1,Le=kr;for(var He=kr;He<Xe;He++){var ur=this.getRawIndex(He),br=vt[ur];isNaN(br)||(ye=Math.abs((Ut-Ie)*(br-Qt)-(Ut-He)*(Fe-Qt)),ye>ae&&(ae=ye,Le=ur))}Bt[It++]=Le,ee=Le}return Bt[It++]=this.getRawIndex(Ct-1),Z._count=It,Z._indices=Bt,Z.getRawIndex=C,Z},K.prototype.getItemModel=function(R){var tt=this.hostModel,Z=this.getRawDataItem(R);return new mt.a(Z,tt,tt&&tt.ecModel)},K.prototype.diff=function(R){var tt=this;return new H.a(R?R.getIndices():[],this.getIndices(),function(Z){return L(R,Z)},function(Z){return L(tt,Z)})},K.prototype.getVisual=function(R){var tt=this._visual;return tt&&tt[R]},K.prototype.setVisual=function(R,tt){this._visual=this._visual||{},V(R)?B.extend(this._visual,R):this._visual[R]=tt},K.prototype.getItemVisual=function(R,tt){var Z=this._itemVisuals[R],ct=Z&&Z[tt];return ct==null?this.getVisual(tt):ct},K.prototype.hasItemVisual=function(){return this._itemVisuals.length>0},K.prototype.ensureUniqueItemVisual=function(R,tt){var Z=this._itemVisuals,ct=Z[R];ct||(ct=Z[R]={});var vt=ct[tt];return vt==null&&(vt=this.getVisual(tt),B.isArray(vt)?vt=vt.slice():V(vt)&&(vt=B.extend({},vt)),ct[tt]=vt),vt},K.prototype.setItemVisual=function(R,tt,Z){var ct=this._itemVisuals[R]||{};this._itemVisuals[R]=ct,V(tt)?B.extend(ct,tt):ct[tt]=Z},K.prototype.clearAllVisual=function(){this._visual={},this._itemVisuals=[]},K.prototype.setLayout=function(R,tt){if(V(R)){for(var Z in R)R.hasOwnProperty(Z)&&this.setLayout(Z,R[Z]);return}this._layout[R]=tt},K.prototype.getLayout=function(R){return this._layout[R]},K.prototype.getItemLayout=function(R){return this._itemLayouts[R]},K.prototype.setItemLayout=function(R,tt,Z){this._itemLayouts[R]=Z?B.extend(this._itemLayouts[R]||{},tt):tt},K.prototype.clearItemLayouts=function(){this._itemLayouts.length=0},K.prototype.setItemGraphicEl=function(R,tt){var Z=this.hostModel;if(tt){var ct=Object(Y.a)(tt);ct.dataIndex=R,ct.dataType=this.dataType,ct.seriesIndex=Z&&Z.seriesIndex,tt.type==="group"&&tt.traverse(xt,tt)}this._graphicEls[R]=tt},K.prototype.getItemGraphicEl=function(R){return this._graphicEls[R]},K.prototype.eachItemGraphicEl=function(R,tt){B.each(this._graphicEls,function(Z,ct){Z&&R&&R.call(tt,Z,ct)})},K.prototype.cloneShallow=function(R){if(!R){var tt=lt(this.dimensions,this.getDimensionInfo,this);R=new K(tt,this.hostModel)}if(R._storage=this._storage,R._storageArr=this._storageArr,ft(R,this),this._indices){var Z=this._indices.constructor;if(Z===Array){var ct=this._indices.length;R._indices=new Z(ct);for(var vt=0;vt<ct;vt++)R._indices[vt]=this._indices[vt]}else R._indices=new Z(this._indices)}else R._indices=null;return R.getRawIndex=R._indices?C:O,R},K.prototype.wrapMethod=function(R,tt){var Z=this[R];typeof Z=="function"&&(this.__wrappedMethods=this.__wrappedMethods||[],this.__wrappedMethods.push(R),this[R]=function(){var ct=Z.apply(this,arguments);return tt.apply(this,[ct].concat(B.slice(arguments)))})},K.internalField=function(){st={arrayRows:R,objectRows:function(Z,ct,vt,Ct){return Object(G.d)(Z[ct],this._dimensionInfos[ct])},keyedColumns:R,original:function(Z,ct,vt,Ct){var Bt=Z&&(Z.value==null?Z:Z.value);return!this._rawData.pure&&Object(Q.m)(Z)&&(this.hasItemOption=!0),Object(G.d)(Bt instanceof Array?Bt[Ct]:Bt,this._dimensionInfos[ct])},typedArray:function(Z,ct,vt,Ct){return Z[Ct]}};function R(Z,ct,vt,Ct){return Object(G.d)(Z[Ct],this._dimensionInfos[ct])}$=function(Z){var ct=Z._invertedIndicesMap;B.each(ct,function(vt,Ct){var Bt=Z._dimensionInfos[Ct],It=Bt.ordinalMeta;if(It){vt=ct[Ct]=new W(It.categories.length);for(var Wt=0;Wt<vt.length;Wt++)vt[Wt]=gt;for(var Wt=0;Wt<Z._count;Wt++)vt[Z.get(Ct,Wt)]=Wt}})},w=function(Z,ct,vt,Ct){var Bt,It=Z._storageArr[ct];return It&&(Bt=It[Ct],vt&&vt.categories.length&&(Bt=vt.categories[Bt])),Object(Q.e)(Bt,null)},D=function(Z){return Z._rawCount>65535?nt:X},T=function(Z,ct,vt,Ct){var Bt=bt[ct.type],It=ct.name;if(Ct){var Wt=Z[It],ee=Wt&&Wt.length;if(ee!==vt){for(var ae=new Bt(vt),ye=0;ye<ee;ye++)ae[ye]=Wt[ye];Z[It]=ae}}else Z[It]=new Bt(vt)},O=function(Z){return Z},C=function(Z){return Z<this._count&&Z>=0?this._indices[Z]:-1},L=function(Z,ct){var vt=Z._idList[ct];return vt==null&&Z._idDimIdx!=null&&(vt=w(Z,Z._idDimIdx,Z._idOrdinalMeta,ct)),vt==null&&(vt=Tt+ct),vt},pt=function(Z){return B.isArray(Z)||(Z=Z!=null?[Z]:[]),Z},At=function(Z,ct){for(var vt=0;vt<ct.length;vt++)Z._dimensionInfos[ct[vt]]||console.error("Unkown dimension "+ct[vt])},rt=function(Z,ct){var vt=Z.dimensions,Ct=new K(lt(vt,Z.getDimensionInfo,Z),Z.hostModel);ft(Ct,Z);for(var Bt=Ct._storage={},It=Z._storage,Wt=Ct._storageArr=[],ee=0;ee<vt.length;ee++){var ae=vt[ee];It[ae]&&(B.indexOf(ct,ae)>=0?(Bt[ae]=tt(It[ae]),Ct._rawExtent[ae]=_t(),Ct._extent[ae]=null):Bt[ae]=It[ae],Wt.push(Bt[ae]))}return Ct};function tt(Z){var ct=Z.constructor;return ct===Array?Z.slice():new ct(Z)}_t=function(){return[Infinity,-Infinity]},xt=function(Z){var ct=Object(Y.a)(Z),vt=Object(Y.a)(this);ct.seriesIndex=vt.seriesIndex,ct.dataIndex=vt.dataIndex,ct.dataType=vt.dataType},ft=function(Z,ct){B.each(et.concat(ct.__wrappedMethods||[]),function(vt){ct.hasOwnProperty(vt)&&(Z[vt]=ct[vt])}),Z.__wrappedMethods=ct.__wrappedMethods,B.each(k,function(vt){Z[vt]=B.clone(ct[vt])}),Z._calculationInfo=B.extend({},ct._calculationInfo)},z=function(Z,ct){var vt=Z._nameList,Ct=Z._idList,Bt=Z._nameDimIdx,It=Z._idDimIdx,Wt=vt[ct],ee=Ct[ct];if(Wt==null&&Bt!=null&&(vt[ct]=Wt=w(Z,Bt,Z._nameOrdinalMeta,ct)),ee==null&&It!=null&&(Ct[ct]=ee=w(Z,It,Z._idOrdinalMeta,ct)),ee==null&&Wt!=null){var ae=Z._nameRepeatCount,ye=ae[Wt]=(ae[Wt]||0)+1;ee=Wt,ye>1&&(ee+="__ec__"+ye),Ct[ct]=ee}}}(),K}();U.a=Mt},YgoH:function(Ge,U,S){"use strict";(function(B){var mt=S("PbkX"),H,ht={};ht.supportWebGL=function(){if(H==null)try{var ot=document.createElement("canvas"),it=ot.getContext("webgl")||ot.getContext("experimental-webgl");if(!it)throw new Error}catch(Q){H=!1}return H},ht.Int8Array=typeof Int8Array=="undefined"?Array:Int8Array,ht.Uint8Array=typeof Uint8Array=="undefined"?Array:Uint8Array,ht.Uint16Array=typeof Uint16Array=="undefined"?Array:Uint16Array,ht.Uint32Array=typeof Uint32Array=="undefined"?Array:Uint32Array,ht.Int16Array=typeof Int16Array=="undefined"?Array:Int16Array,ht.Float32Array=typeof Float32Array=="undefined"?Array:Float32Array,ht.Float64Array=typeof Float64Array=="undefined"?Array:Float64Array;var y={};typeof window!="undefined"?y=window:typeof B!="undefined"&&(y=B),ht.requestAnimationFrame=y.requestAnimationFrame||y.msRequestAnimationFrame||y.mozRequestAnimationFrame||y.webkitRequestAnimationFrame||function(ot){setTimeout(ot,16)},ht.createCanvas=function(){return document.createElement("canvas")},ht.createImage=function(){return new y.Image},ht.request={get:mt.a.get},ht.addEventListener=function(ot,it,Q,Y){ot.addEventListener(it,Q,Y)},ht.removeEventListener=function(ot,it,Q){ot.removeEventListener(it,Q)},U.a=ht}).call(this,S("IyRk"))},Yl7c:function(Ge,U,S){"use strict";S.d(U,"f",function(){return ot}),S.d(U,"d",function(){return Q}),S.d(U,"b",function(){return Y}),S.d(U,"e",function(){return q}),S.d(U,"a",function(){return V}),S.d(U,"c",function(){return gt});var B=S("f66r"),mt=S("bYtY"),H=".",ht="___EC__COMPONENT__CONTAINER___",y="___EC__EXTENDED_CLASS___";function ot(Tt){var bt={main:"",sub:""};if(Tt){var nt=Tt.split(H);bt.main=nt[0]||"",bt.sub=nt[1]||""}return bt}function it(Tt){mt.assert(/^[a-zA-Z0-9_]+([.][a-zA-Z0-9_]+)?$/.test(Tt),'componentType "'+Tt+'" illegal')}function Q(Tt){return!!(Tt&&Tt[y])}function Y(Tt,bt){Tt.$constructor=Tt,Tt.extend=function(nt){var W=this;function X(){for(var et=[],k=0;k<arguments.length;k++)et[k]=arguments[k];if(nt.$constructor)nt.$constructor.apply(this,arguments);else if(!G(W))W.apply(this,arguments);else{var st=mt.createObject(X.prototype,new(W.bind.apply(W,Object(B.c)([void 0],et))));return st}}return X[y]=!0,mt.extend(X.prototype,nt),X.extend=this.extend,X.superCall=lt,X.superApply=at,mt.inherits(X,this),X.superClass=W,X}}function G(Tt){return typeof Tt=="function"&&/^class\s/.test(Function.prototype.toString.call(Tt))}function q(Tt,bt){Tt.extend=bt.extend}var N=Math.round(Math.random()*10);function V(Tt){var bt=["__\0is_clz",N++].join("_");Tt.prototype[bt]=!0,Tt.isInstance=function(nt){return!!(nt&&nt[bt])}}function lt(Tt,bt){for(var nt=[],W=2;W<arguments.length;W++)nt[W-2]=arguments[W];return this.superClass.prototype[bt].apply(Tt,nt)}function at(Tt,bt,nt){return this.superClass.prototype[bt].apply(Tt,nt)}function gt(Tt){var bt={};Tt.registerClass=function(W){var X=W.type||W.prototype.type;if(X){it(X),W.prototype.type=X;var et=ot(X);if(!et.sub)bt[et.main]=W;else if(et.sub!==ht){var k=nt(et);k[et.sub]=W}}return W},Tt.getClass=function(W,X,et){var k=bt[W];if(k&&k[ht]&&(k=X?k[X]:null),et&&!k)throw new Error(X?"Component "+W+"."+(X||"")+" is used but not imported.":W+".type should be specified.");return k},Tt.getClassesByMainType=function(W){var X=ot(W),et=[],k=bt[X.main];return k&&k[ht]?mt.each(k,function(st,$){$!==ht&&et.push(st)}):et.push(k),et},Tt.hasClass=function(W){var X=ot(W);return!!bt[X.main]},Tt.getAllClassMainTypes=function(){var W=[];return mt.each(bt,function(X,et){W.push(et)}),W},Tt.hasSubTypes=function(W){var X=ot(W),et=bt[X.main];return et&&et[ht]};function nt(W){var X=bt[W.main];return(!X||!X[ht])&&(X=bt[W.main]={},X[ht]=!0),X}}},Ze12:function(Ge,U,S){"use strict";S.d(U,"c",function(){return it}),S.d(U,"b",function(){return Q}),S.d(U,"a",function(){return q});var B=S("ItGF"),mt=Math.log(2);function H(N,V,lt,at,gt,Tt){var bt=at+"-"+gt,nt=N.length;if(Tt.hasOwnProperty(bt))return Tt[bt];if(V===1){var W=Math.round(Math.log((1<<nt)-1&~gt)/mt);return N[lt][W]}for(var X=at|1<<lt,et=lt+1;at&1<<et;)et++;for(var k=0,st=0,$=0;st<nt;st++){var D=1<<st;D&gt||(k+=($%2?-1:1)*N[lt][st]*H(N,V-1,et,X,gt|D,Tt),$++)}return Tt[bt]=k,k}function ht(N,V){var lt=[[N[0],N[1],1,0,0,0,-V[0]*N[0],-V[0]*N[1]],[0,0,0,N[0],N[1],1,-V[1]*N[0],-V[1]*N[1]],[N[2],N[3],1,0,0,0,-V[2]*N[2],-V[2]*N[3]],[0,0,0,N[2],N[3],1,-V[3]*N[2],-V[3]*N[3]],[N[4],N[5],1,0,0,0,-V[4]*N[4],-V[4]*N[5]],[0,0,0,N[4],N[5],1,-V[5]*N[4],-V[5]*N[5]],[N[6],N[7],1,0,0,0,-V[6]*N[6],-V[6]*N[7]],[0,0,0,N[6],N[7],1,-V[7]*N[6],-V[7]*N[7]]],at={},gt=H(lt,8,0,0,0,at);if(gt!==0){for(var Tt=[],bt=0;bt<8;bt++)for(var nt=0;nt<8;nt++)Tt[nt]==null&&(Tt[nt]=0),Tt[nt]+=((bt+nt)%2?-1:1)*H(lt,7,bt===0?1:0,1<<bt,1<<nt,at)/gt*V[bt];return function(W,X,et){var k=X*Tt[6]+et*Tt[7]+1;W[0]=(X*Tt[0]+et*Tt[1]+Tt[2])/k,W[1]=(X*Tt[3]+et*Tt[4]+Tt[5])/k}}}var y="___zrEVENTSAVED",ot=[];function it(N,V,lt,at,gt){return Q(ot,V,at,gt,!0)&&Q(N,lt,ot[0],ot[1])}function Q(N,V,lt,at,gt){if(V.getBoundingClientRect&&B.a.domSupported&&!q(V)){var Tt=V[y]||(V[y]={}),bt=Y(V,Tt),nt=G(bt,Tt,gt);if(nt)return nt(N,lt,at),!0}return!1}function Y(N,V){var lt=V.markers;if(lt)return lt;lt=V.markers=[];for(var at=["left","right"],gt=["top","bottom"],Tt=0;Tt<4;Tt++){var bt=document.createElement("div"),nt=bt.style,W=Tt%2,X=(Tt>>1)%2;nt.cssText=["position: absolute","visibility: hidden","padding: 0","margin: 0","border-width: 0","user-select: none","width:0","height:0",at[W]+":0",gt[X]+":0",at[1-W]+":auto",gt[1-X]+":auto",""].join("!important;"),N.appendChild(bt),lt.push(bt)}return lt}function G(N,V,lt){for(var at=lt?"invTrans":"trans",gt=V[at],Tt=V.srcCoords,bt=[],nt=[],W=!0,X=0;X<4;X++){var et=N[X].getBoundingClientRect(),k=2*X,st=et.left,$=et.top;bt.push(st,$),W=W&&Tt&&st===Tt[k]&&$===Tt[k+1],nt.push(N[X].offsetLeft,N[X].offsetTop)}return W&&gt?gt:(V.srcCoords=bt,V[at]=lt?ht(nt,bt):ht(bt,nt))}function q(N){return N.nodeName.toUpperCase()==="CANVAS"}},a9QJ:function(Ge,U,S){"use strict";S.d(U,"a",function(){return mt});var B={Russia:[100,60],"United States":[-99,38],"United States of America":[-99,38]};function mt(H,ht){if(H==="world"){var y=B[ht.name];if(y){var ot=[y[0],y[1]];ht.setCenter(ot)}}}},aKvl:function(Ge,U,S){"use strict";S.d(U,"a",function(){return mt});var B=S("Sj9i");function mt(H,ht,y,ot,it,Q,Y,G,q){if(Y===0)return!1;var N=Y;if(q>ht+N&&q>ot+N&&q>Q+N||q<ht-N&&q<ot-N&&q<Q-N||G>H+N&&G>y+N&&G>it+N||G<H-N&&G<y-N&&G<it-N)return!1;var V=Object(B.l)(H,ht,y,ot,it,Q,G,q,null);return V<=N/2}},aUsF:function(Ge,U,S){"use strict";Ge.exports=function B(mt,H){if(mt===H)return!0;if(mt&&H&&typeof mt=="object"&&typeof H=="object"){if(mt.constructor!==H.constructor)return!1;var ht,y,ot;if(Array.isArray(mt)){if(ht=mt.length,ht!=H.length)return!1;for(y=ht;y--!=0;)if(!B(mt[y],H[y]))return!1;return!0}if(mt.constructor===RegExp)return mt.source===H.source&&mt.flags===H.flags;if(mt.valueOf!==Object.prototype.valueOf)return mt.valueOf()===H.valueOf();if(mt.toString!==Object.prototype.toString)return mt.toString()===H.toString();if(ot=Object.keys(mt),ht=ot.length,ht!==Object.keys(H).length)return!1;for(y=ht;y--!=0;)if(!Object.prototype.hasOwnProperty.call(H,ot[y]))return!1;for(y=ht;y--!=0;){var it=ot[y];if(!B(mt[it],H[it]))return!1}return!0}return mt!==mt&&H!==H}},aX58:function(Ge,U,S){"use strict";S.r(U),S.d(U,"init",function(){return Ut}),S.d(U,"dispose",function(){return Qt}),S.d(U,"disposeAll",function(){return Yt}),S.d(U,"getInstance",function(){return Zt}),S.d(U,"registerPainter",function(){return ce}),S.d(U,"version",function(){return xe});var B=S("ItGF"),mt=S("bYtY"),H=S("IaEH"),ht=S("QBsz"),y=function(){function Kt(Rt,Jt){this.target=Rt,this.topTarget=Jt&&Jt.topTarget}return Kt}(),ot=function(){function Kt(Rt){this.handler=Rt,Rt.on("mousedown",this._dragStart,this),Rt.on("mousemove",this._drag,this),Rt.on("mouseup",this._dragEnd,this)}return Kt.prototype._dragStart=function(Rt){for(var Jt=Rt.target;Jt&&!Jt.draggable;)Jt=Jt.parent;Jt&&(this._draggingTarget=Jt,Jt.dragging=!0,this._x=Rt.offsetX,this._y=Rt.offsetY,this.handler.dispatchToElement(new y(Jt,Rt),"dragstart",Rt.event))},Kt.prototype._drag=function(Rt){var Jt=this._draggingTarget;if(Jt){var Xt=Rt.offsetX,fe=Rt.offsetY,be=Xt-this._x,Ae=fe-this._y;this._x=Xt,this._y=fe,Jt.drift(be,Ae,Rt),this.handler.dispatchToElement(new y(Jt,Rt),"drag",Rt.event);var Ve=this.handler.findHover(Xt,fe,Jt).target,nr=this._dropTarget;this._dropTarget=Ve,Jt!==Ve&&(nr&&Ve!==nr&&this.handler.dispatchToElement(new y(nr,Rt),"dragleave",Rt.event),Ve&&Ve!==nr&&this.handler.dispatchToElement(new y(Ve,Rt),"dragenter",Rt.event))}},Kt.prototype._dragEnd=function(Rt){var Jt=this._draggingTarget;Jt&&(Jt.dragging=!1),this.handler.dispatchToElement(new y(Jt,Rt),"dragend",Rt.event),this._dropTarget&&this.handler.dispatchToElement(new y(this._dropTarget,Rt),"drop",Rt.event),this._draggingTarget=null,this._dropTarget=null},Kt}(),it=ot,Q=S("b9Ot"),Y=S("YH21"),G=function(){function Kt(){this._track=[]}return Kt.prototype.recognize=function(Rt,Jt,Xt){return this._doTrack(Rt,Jt,Xt),this._recognize(Rt)},Kt.prototype.clear=function(){return this._track.length=0,this},Kt.prototype._doTrack=function(Rt,Jt,Xt){var fe=Rt.touches;if(!!fe){for(var be={points:[],touches:[],target:Jt,event:Rt},Ae=0,Ve=fe.length;Ae<Ve;Ae++){var nr=fe[Ae],de=Y.b(Xt,nr,{});be.points.push([de.zrX,de.zrY]),be.touches.push(nr)}this._track.push(be)}},Kt.prototype._recognize=function(Rt){for(var Jt in V)if(V.hasOwnProperty(Jt)){var Xt=V[Jt](this._track,Rt);if(Xt)return Xt}},Kt}();function q(Kt){var Rt=Kt[1][0]-Kt[0][0],Jt=Kt[1][1]-Kt[0][1];return Math.sqrt(Rt*Rt+Jt*Jt)}function N(Kt){return[(Kt[0][0]+Kt[1][0])/2,(Kt[0][1]+Kt[1][1])/2]}var V={pinch:function(Rt,Jt){var Xt=Rt.length;if(!!Xt){var fe=(Rt[Xt-1]||{}).points,be=(Rt[Xt-2]||{}).points||fe;if(be&&be.length>1&&fe&&fe.length>1){var Ae=q(fe)/q(be);!isFinite(Ae)&&(Ae=1),Jt.pinchScale=Ae;var Ve=N(fe);return Jt.pinchX=Ve[0],Jt.pinchY=Ve[1],{type:"pinch",target:Rt[0].target,event:Jt}}}}},lt="silent";function at(Kt,Rt,Jt){return{type:Kt,event:Jt,target:Rt.target,topTarget:Rt.topTarget,cancelBubble:!1,offsetX:Jt.zrX,offsetY:Jt.zrY,gestureEvent:Jt.gestureEvent,pinchX:Jt.pinchX,pinchY:Jt.pinchY,pinchScale:Jt.pinchScale,wheelDelta:Jt.zrDelta,zrByTouch:Jt.zrByTouch,which:Jt.which,stop:gt}}function gt(){Y.g(this.event)}var Tt=function(Kt){Object(H.a)(Rt,Kt);function Rt(){var Jt=Kt!==null&&Kt.apply(this,arguments)||this;return Jt.handler=null,Jt}return Rt.prototype.dispose=function(){},Rt.prototype.setCursor=function(){},Rt}(Q.a),bt=function(){function Kt(Rt,Jt){this.x=Rt,this.y=Jt}return Kt}(),nt=["click","dblclick","mousewheel","mouseout","mouseup","mousedown","mousemove","contextmenu"],W=function(Kt){Object(H.a)(Rt,Kt);function Rt(Jt,Xt,fe,be){var Ae=Kt.call(this)||this;return Ae._hovered=new bt(0,0),Ae.storage=Jt,Ae.painter=Xt,Ae.painterRoot=be,fe=fe||new Tt,Ae.proxy=null,Ae.setHandlerProxy(fe),Ae._draggingMgr=new it(Ae),Ae}return Rt.prototype.setHandlerProxy=function(Jt){this.proxy&&this.proxy.dispose(),Jt&&(mt.each(nt,function(Xt){Jt.on&&Jt.on(Xt,this[Xt],this)},this),Jt.handler=this),this.proxy=Jt},Rt.prototype.mousemove=function(Jt){var Xt=Jt.zrX,fe=Jt.zrY,be=et(this,Xt,fe),Ae=this._hovered,Ve=Ae.target;Ve&&!Ve.__zr&&(Ae=this.findHover(Ae.x,Ae.y),Ve=Ae.target);var nr=this._hovered=be?new bt(Xt,fe):this.findHover(Xt,fe),de=nr.target,_r=this.proxy;_r.setCursor&&_r.setCursor(de?de.cursor:"default"),Ve&&de!==Ve&&this.dispatchToElement(Ae,"mouseout",Jt),this.dispatchToElement(nr,"mousemove",Jt),de&&de!==Ve&&this.dispatchToElement(nr,"mouseover",Jt)},Rt.prototype.mouseout=function(Jt){var Xt=Jt.zrEventControl;Xt!=="only_globalout"&&this.dispatchToElement(this._hovered,"mouseout",Jt),Xt!=="no_globalout"&&this.trigger("globalout",{type:"globalout",event:Jt})},Rt.prototype.resize=function(){this._hovered=new bt(0,0)},Rt.prototype.dispatch=function(Jt,Xt){var fe=this[Jt];fe&&fe.call(this,Xt)},Rt.prototype.dispose=function(){this.proxy.dispose(),this.storage=null,this.proxy=null,this.painter=null},Rt.prototype.setCursorStyle=function(Jt){var Xt=this.proxy;Xt.setCursor&&Xt.setCursor(Jt)},Rt.prototype.dispatchToElement=function(Jt,Xt,fe){Jt=Jt||{};var be=Jt.target;if(!(be&&be.silent)){for(var Ae="on"+Xt,Ve=at(Xt,Jt,fe);be&&(be[Ae]&&(Ve.cancelBubble=!!be[Ae].call(be,Ve)),be.trigger(Xt,Ve),be=be.__hostTarget?be.__hostTarget:be.parent,!Ve.cancelBubble););Ve.cancelBubble||(this.trigger(Xt,Ve),this.painter&&this.painter.eachOtherLayer&&this.painter.eachOtherLayer(function(nr){typeof nr[Ae]=="function"&&nr[Ae].call(nr,Ve),nr.trigger&&nr.trigger(Xt,Ve)}))}},Rt.prototype.findHover=function(Jt,Xt,fe){for(var be=this.storage.getDisplayList(),Ae=new bt(Jt,Xt),Ve=be.length-1;Ve>=0;Ve--){var nr=void 0;if(be[Ve]!==fe&&!be[Ve].ignore&&(nr=X(be[Ve],Jt,Xt))&&(!Ae.topTarget&&(Ae.topTarget=be[Ve]),nr!==lt)){Ae.target=be[Ve];break}}return Ae},Rt.prototype.processGesture=function(Jt,Xt){this._gestureMgr||(this._gestureMgr=new G);var fe=this._gestureMgr;Xt==="start"&&fe.clear();var be=fe.recognize(Jt,this.findHover(Jt.zrX,Jt.zrY,null).target,this.proxy.dom);if(Xt==="end"&&fe.clear(),be){var Ae=be.type;Jt.gestureEvent=Ae;var Ve=new bt;Ve.target=be.target,this.dispatchToElement(Ve,Ae,be.event)}},Rt}(Q.a);mt.each(["click","mousedown","mouseup","mousewheel","dblclick","contextmenu"],function(Kt){W.prototype[Kt]=function(Rt){var Jt=Rt.zrX,Xt=Rt.zrY,fe=et(this,Jt,Xt),be,Ae;if((Kt!=="mouseup"||!fe)&&(be=this.findHover(Jt,Xt),Ae=be.target),Kt==="mousedown")this._downEl=Ae,this._downPoint=[Rt.zrX,Rt.zrY],this._upEl=Ae;else if(Kt==="mouseup")this._upEl=Ae;else if(Kt==="click"){if(this._downEl!==this._upEl||!this._downPoint||ht.dist(this._downPoint,[Rt.zrX,Rt.zrY])>4)return;this._downPoint=null}this.dispatchToElement(be,Kt,Rt)}});function X(Kt,Rt,Jt){if(Kt[Kt.rectHover?"rectContain":"contain"](Rt,Jt)){for(var Xt=Kt,fe=void 0,be=!1;Xt;){if(Xt.ignoreClip&&(be=!0),!be){var Ae=Xt.getClipPath();if(Ae&&!Ae.contain(Rt,Jt))return!1;Xt.silent&&(fe=!0)}var Ve=Xt.__hostTarget;Xt=Ve||Xt.parent}return fe?lt:!0}return!1}function et(Kt,Rt,Jt){var Xt=Kt.painter;return Rt<0||Rt>Xt.getWidth()||Jt<0||Jt>Xt.getHeight()}var k=W,st=S("1bdT"),$=S("BPZU"),D=!1;function T(){D||(D=!0,console.warn("z / z2 / zlevel of displayable is invalid, which may cause unexpected errors"))}function O(Kt,Rt){return Kt.zlevel===Rt.zlevel?Kt.z===Rt.z?Kt.z2-Rt.z2:Kt.z-Rt.z:Kt.zlevel-Rt.zlevel}var C=function(){function Kt(){this._roots=[],this._displayList=[],this._displayListLen=0,this.displayableSortFunc=O}return Kt.prototype.traverse=function(Rt,Jt){for(var Xt=0;Xt<this._roots.length;Xt++)this._roots[Xt].traverse(Rt,Jt)},Kt.prototype.getDisplayList=function(Rt,Jt){Jt=Jt||!1;var Xt=this._displayList;return(Rt||!Xt.length)&&this.updateDisplayList(Jt),Xt},Kt.prototype.updateDisplayList=function(Rt){this._displayListLen=0;for(var Jt=this._roots,Xt=this._displayList,fe=0,be=Jt.length;fe<be;fe++)this._updateAndAddDisplayable(Jt[fe],null,Rt);Xt.length=this._displayListLen,B.a.canvasSupported&&Object($.a)(Xt,O)},Kt.prototype._updateAndAddDisplayable=function(Rt,Jt,Xt){if(!(Rt.ignore&&!Xt)){Rt.beforeUpdate(),Rt.update(),Rt.afterUpdate();var fe=Rt.getClipPath();if(Rt.ignoreClip)Jt=null;else if(fe){Jt?Jt=Jt.slice():Jt=[];for(var be=fe,Ae=Rt;be;)be.parent=Ae,be.updateTransform(),Jt.push(be),Ae=be,be=be.getClipPath()}if(Rt.childrenRef){for(var Ve=Rt.childrenRef(),nr=0;nr<Ve.length;nr++){var de=Ve[nr];Rt.__dirty&&(de.__dirty|=st.a.REDARAW_BIT),this._updateAndAddDisplayable(de,Jt,Xt)}Rt.__dirty=0}else{var _r=Rt;Jt&&Jt.length?_r.__clipPaths=Jt:_r.__clipPaths&&_r.__clipPaths.length>0&&(_r.__clipPaths=[]),isNaN(_r.z)&&(T(),_r.z=0),isNaN(_r.z2)&&(T(),_r.z2=0),isNaN(_r.zlevel)&&(T(),_r.zlevel=0),this._displayList[this._displayListLen++]=_r}var Nr=Rt.getDecalElement&&Rt.getDecalElement();Nr&&this._updateAndAddDisplayable(Nr,Jt,Xt);var lr=Rt.getTextGuideLine();lr&&this._updateAndAddDisplayable(lr,Jt,Xt);var pr=Rt.getTextContent();pr&&this._updateAndAddDisplayable(pr,Jt,Xt)}},Kt.prototype.addRoot=function(Rt){Rt.__zr&&Rt.__zr.storage===this||this._roots.push(Rt)},Kt.prototype.delRoot=function(Rt){if(Rt instanceof Array){for(var Jt=0,Xt=Rt.length;Jt<Xt;Jt++)this.delRoot(Rt[Jt]);return}var fe=mt.indexOf(this._roots,Rt);fe>=0&&this._roots.splice(fe,1)},Kt.prototype.delAllRoots=function(){this._roots=[],this._displayList=[],this._displayListLen=0},Kt.prototype.getRoots=function(){return this._roots},Kt.prototype.dispose=function(){this._displayList=null,this._roots=null},Kt}(),L=C,w=S("mLcG"),z=S("Bq2U"),pt=function(Kt){Object(H.a)(Rt,Kt);function Rt(Jt){var Xt=Kt.call(this)||this;return Xt._running=!1,Xt._time=0,Xt._pausedTime=0,Xt._pauseStart=0,Xt._paused=!1,Jt=Jt||{},Xt.stage=Jt.stage||{},Xt.onframe=Jt.onframe||function(){},Xt}return Rt.prototype.addClip=function(Jt){Jt.animation&&this.removeClip(Jt),this._clipsHead?(this._clipsTail.next=Jt,Jt.prev=this._clipsTail,Jt.next=null,this._clipsTail=Jt):this._clipsHead=this._clipsTail=Jt,Jt.animation=this},Rt.prototype.addAnimator=function(Jt){Jt.animation=this;var Xt=Jt.getClip();Xt&&this.addClip(Xt)},Rt.prototype.removeClip=function(Jt){if(!!Jt.animation){var Xt=Jt.prev,fe=Jt.next;Xt?Xt.next=fe:this._clipsHead=fe,fe?fe.prev=Xt:this._clipsTail=Xt,Jt.next=Jt.prev=Jt.animation=null}},Rt.prototype.removeAnimator=function(Jt){var Xt=Jt.getClip();Xt&&this.removeClip(Xt),Jt.animation=null},Rt.prototype.update=function(Jt){for(var Xt=new Date().getTime()-this._pausedTime,fe=Xt-this._time,be=this._clipsHead;be;){var Ae=be.next,Ve=be.step(Xt,fe);Ve&&(be.ondestroy&&be.ondestroy(),this.removeClip(be)),be=Ae}this._time=Xt,Jt||(this.onframe(fe),this.trigger("frame",fe),this.stage.update&&this.stage.update())},Rt.prototype._startLoop=function(){var Jt=this;this._running=!0;function Xt(){Jt._running&&(Object(w.a)(Xt),!Jt._paused&&Jt.update())}Object(w.a)(Xt)},Rt.prototype.start=function(){this._running||(this._time=new Date().getTime(),this._pausedTime=0,this._startLoop())},Rt.prototype.stop=function(){this._running=!1},Rt.prototype.pause=function(){this._paused||(this._pauseStart=new Date().getTime(),this._paused=!0)},Rt.prototype.resume=function(){this._paused&&(this._pausedTime+=new Date().getTime()-this._pauseStart,this._paused=!1)},Rt.prototype.clear=function(){for(var Jt=this._clipsHead;Jt;){var Xt=Jt.next;Jt.prev=Jt.next=Jt.animation=null,Jt=Xt}this._clipsHead=this._clipsTail=null},Rt.prototype.isFinished=function(){return this._clipsHead==null},Rt.prototype.animate=function(Jt,Xt){Xt=Xt||{},this.start();var fe=new z.b(Jt,Xt.loop);return this.addAnimator(fe),fe},Rt}(Q.a),At=pt,rt=300,_t=B.a.domSupported,xt=function(){var Kt=["click","dblclick","mousewheel","wheel","mouseout","mouseup","mousedown","mousemove","contextmenu"],Rt=["touchstart","touchend","touchmove"],Jt={pointerdown:1,pointerup:1,pointermove:1,pointerout:1},Xt=mt.map(Kt,function(fe){var be=fe.replace("mouse","pointer");return Jt.hasOwnProperty(be)?be:fe});return{mouse:Kt,touch:Rt,pointer:Xt}}(),ft={mouse:["mousemove","mouseup"],pointer:["pointermove","pointerup"]},Mt=!1;function K(Kt){var Rt=Kt.pointerType;return Rt==="pen"||Rt==="touch"}function R(Kt){Kt.touching=!0,Kt.touchTimer!=null&&(clearTimeout(Kt.touchTimer),Kt.touchTimer=null),Kt.touchTimer=setTimeout(function(){Kt.touching=!1,Kt.touchTimer=null},700)}function tt(Kt){Kt&&(Kt.zrByTouch=!0)}function Z(Kt,Rt){return Object(Y.e)(Kt.dom,new vt(Kt,Rt),!0)}function ct(Kt,Rt){for(var Jt=Rt,Xt=!1;Jt&&Jt.nodeType!==9&&!(Xt=Jt.domBelongToZr||Jt!==Rt&&Jt===Kt.painterRoot);)Jt=Jt.parentNode;return Xt}var vt=function(){function Kt(Rt,Jt){this.stopPropagation=mt.noop,this.stopImmediatePropagation=mt.noop,this.preventDefault=mt.noop,this.type=Jt.type,this.target=this.currentTarget=Rt.dom,this.pointerType=Jt.pointerType,this.clientX=Jt.clientX,this.clientY=Jt.clientY}return Kt}(),Ct={mousedown:function(Rt){Rt=Object(Y.e)(this.dom,Rt),this.__mayPointerCapture=[Rt.zrX,Rt.zrY],this.trigger("mousedown",Rt)},mousemove:function(Rt){Rt=Object(Y.e)(this.dom,Rt);var Jt=this.__mayPointerCapture;Jt&&(Rt.zrX!==Jt[0]||Rt.zrY!==Jt[1])&&this.__togglePointerCapture(!0),this.trigger("mousemove",Rt)},mouseup:function(Rt){Rt=Object(Y.e)(this.dom,Rt),this.__togglePointerCapture(!1),this.trigger("mouseup",Rt)},mouseout:function(Rt){Rt=Object(Y.e)(this.dom,Rt);var Jt=Rt.toElement||Rt.relatedTarget;ct(this,Jt)||(this.__pointerCapturing&&(Rt.zrEventControl="no_globalout"),this.trigger("mouseout",Rt))},wheel:function(Rt){Mt=!0,Rt=Object(Y.e)(this.dom,Rt),this.trigger("mousewheel",Rt)},mousewheel:function(Rt){Mt||(Rt=Object(Y.e)(this.dom,Rt),this.trigger("mousewheel",Rt))},touchstart:function(Rt){Rt=Object(Y.e)(this.dom,Rt),tt(Rt),this.__lastTouchMoment=new Date,this.handler.processGesture(Rt,"start"),Ct.mousemove.call(this,Rt),Ct.mousedown.call(this,Rt)},touchmove:function(Rt){Rt=Object(Y.e)(this.dom,Rt),tt(Rt),this.handler.processGesture(Rt,"change"),Ct.mousemove.call(this,Rt)},touchend:function(Rt){Rt=Object(Y.e)(this.dom,Rt),tt(Rt),this.handler.processGesture(Rt,"end"),Ct.mouseup.call(this,Rt),+new Date-+this.__lastTouchMoment<rt&&Ct.click.call(this,Rt)},pointerdown:function(Rt){Ct.mousedown.call(this,Rt)},pointermove:function(Rt){K(Rt)||Ct.mousemove.call(this,Rt)},pointerup:function(Rt){Ct.mouseup.call(this,Rt)},pointerout:function(Rt){K(Rt)||Ct.mouseout.call(this,Rt)}};mt.each(["click","dblclick","contextmenu"],function(Kt){Ct[Kt]=function(Rt){Rt=Object(Y.e)(this.dom,Rt),this.trigger(Kt,Rt)}});var Bt={pointermove:function(Rt){K(Rt)||Bt.mousemove.call(this,Rt)},pointerup:function(Rt){Bt.mouseup.call(this,Rt)},mousemove:function(Rt){this.trigger("mousemove",Rt)},mouseup:function(Rt){var Jt=this.__pointerCapturing;this.__togglePointerCapture(!1),this.trigger("mouseup",Rt),Jt&&(Rt.zrEventControl="only_globalout",this.trigger("mouseout",Rt))}};function It(Kt,Rt){var Jt=Rt.domHandlers;B.a.pointerEventsSupported?mt.each(xt.pointer,function(Xt){ee(Rt,Xt,function(fe){Jt[Xt].call(Kt,fe)})}):(B.a.touchEventsSupported&&mt.each(xt.touch,function(Xt){ee(Rt,Xt,function(fe){Jt[Xt].call(Kt,fe),R(Rt)})}),mt.each(xt.mouse,function(Xt){ee(Rt,Xt,function(fe){fe=Object(Y.c)(fe),Rt.touching||Jt[Xt].call(Kt,fe)})}))}function Wt(Kt,Rt){B.a.pointerEventsSupported?mt.each(ft.pointer,Jt):B.a.touchEventsSupported||mt.each(ft.mouse,Jt);function Jt(Xt){function fe(be){be=Object(Y.c)(be),ct(Kt,be.target)||(be=Z(Kt,be),Rt.domHandlers[Xt].call(Kt,be))}ee(Rt,Xt,fe,{capture:!0})}}function ee(Kt,Rt,Jt,Xt){Kt.mounted[Rt]=Jt,Kt.listenerOpts[Rt]=Xt,Object(Y.a)(Kt.domTarget,Rt,Jt,Xt)}function ae(Kt){var Rt=Kt.mounted;for(var Jt in Rt)Rt.hasOwnProperty(Jt)&&Object(Y.f)(Kt.domTarget,Jt,Rt[Jt],Kt.listenerOpts[Jt]);Kt.mounted={}}var ye=function(){function Kt(Rt,Jt){this.mounted={},this.listenerOpts={},this.touching=!1,this.domTarget=Rt,this.domHandlers=Jt}return Kt}(),Le=function(Kt){Object(H.a)(Rt,Kt);function Rt(Jt,Xt){var fe=Kt.call(this)||this;return fe.__pointerCapturing=!1,fe.dom=Jt,fe.painterRoot=Xt,fe._localHandlerScope=new ye(Jt,Ct),_t&&(fe._globalHandlerScope=new ye(document,Bt)),It(fe,fe._localHandlerScope),fe}return Rt.prototype.dispose=function(){ae(this._localHandlerScope),_t&&ae(this._globalHandlerScope)},Rt.prototype.setCursor=function(Jt){this.dom.style&&(this.dom.style.cursor=Jt||"default")},Rt.prototype.__togglePointerCapture=function(Jt){if(this.__mayPointerCapture=null,_t&&+this.__pointerCapturing^+Jt){this.__pointerCapturing=Jt;var Xt=this._globalHandlerScope;Jt?Wt(this,Xt):ae(Xt)}},Rt}(Q.a),_e=Le,De=S("Qe9p"),er=S("LPTA"),Ie=S("LcXL");/*!
* ZRender, a high performance 2d drawing library.
*
* Copyright (c) 2013, Baidu Inc.
* All rights reserved.
*
* LICENSE
* https://github.com/ecomfe/zrender/blob/master/LICENSE.txt
*/var Fe=!B.a.canvasSupported,He={},ur={};function br(Kt){delete ur[Kt]}function kr(Kt){if(!Kt)return!1;if(typeof Kt=="string")return Object(De.lum)(Kt,1)<er.b;if(Kt.colorStops){for(var Rt=Kt.colorStops,Jt=0,Xt=Rt.length,fe=0;fe<Xt;fe++)Jt+=Object(De.lum)(Rt[fe].color,1);return Jt/=Xt,Jt<er.b}return!1}var Xe=function(){function Kt(Rt,Jt,Xt){var fe=this;this._sleepAfterStill=10,this._stillFrameAccum=0,this._needsRefresh=!0,this._needsRefreshHover=!0,this._darkMode=!1,Xt=Xt||{},this.dom=Jt,this.id=Rt;var be=new L,Ae=Xt.renderer||"canvas";if(Fe)throw new Error("IE8 support has been dropped since 5.0");if(He[Ae]||(Ae=mt.keys(He)[0]),!He[Ae])throw new Error("Renderer '"+Ae+"' is not imported. Please import it first.");Xt.useDirtyRect=Xt.useDirtyRect==null?!1:Xt.useDirtyRect;var Ve=new He[Ae](Jt,be,Xt,Rt);this.storage=be,this.painter=Ve;var nr=!B.a.node&&!B.a.worker?new _e(Ve.getViewportRoot(),Ve.root):null;this.handler=new k(be,Ve,nr,Ve.root),this.animation=new At({stage:{update:function(){return fe._flush(!0)}}}),this.animation.start()}return Kt.prototype.add=function(Rt){!Rt||(this.storage.addRoot(Rt),Rt.addSelfToZr(this),this.refresh())},Kt.prototype.remove=function(Rt){!Rt||(this.storage.delRoot(Rt),Rt.removeSelfFromZr(this),this.refresh())},Kt.prototype.configLayer=function(Rt,Jt){this.painter.configLayer&&this.painter.configLayer(Rt,Jt),this.refresh()},Kt.prototype.setBackgroundColor=function(Rt){this.painter.setBackgroundColor&&this.painter.setBackgroundColor(Rt),this.refresh(),this._backgroundColor=Rt,this._darkMode=kr(Rt)},Kt.prototype.getBackgroundColor=function(){return this._backgroundColor},Kt.prototype.setDarkMode=function(Rt){this._darkMode=Rt},Kt.prototype.isDarkMode=function(){return this._darkMode},Kt.prototype.refreshImmediately=function(Rt){Rt||this.animation.update(!0),this._needsRefresh=!1,this.painter.refresh(),this._needsRefresh=!1},Kt.prototype.refresh=function(){this._needsRefresh=!0,this.animation.start()},Kt.prototype.flush=function(){this._flush(!1)},Kt.prototype._flush=function(Rt){var Jt,Xt=new Date().getTime();this._needsRefresh&&(Jt=!0,this.refreshImmediately(Rt)),this._needsRefreshHover&&(Jt=!0,this.refreshHoverImmediately());var fe=new Date().getTime();Jt?(this._stillFrameAccum=0,this.trigger("rendered",{elapsedTime:fe-Xt})):this._sleepAfterStill>0&&(this._stillFrameAccum++,this._stillFrameAccum>this._sleepAfterStill&&this.animation.stop())},Kt.prototype.setSleepAfterStill=function(Rt){this._sleepAfterStill=Rt},Kt.prototype.wakeUp=function(){this.animation.start(),this._stillFrameAccum=0},Kt.prototype.addHover=function(Rt){},Kt.prototype.removeHover=function(Rt){},Kt.prototype.clearHover=function(){},Kt.prototype.refreshHover=function(){this._needsRefreshHover=!0},Kt.prototype.refreshHoverImmediately=function(){this._needsRefreshHover=!1,this.painter.refreshHover&&this.painter.getType()==="canvas"&&this.painter.refreshHover()},Kt.prototype.resize=function(Rt){Rt=Rt||{},this.painter.resize(Rt.width,Rt.height),this.handler.resize()},Kt.prototype.clearAnimation=function(){this.animation.clear()},Kt.prototype.getWidth=function(){return this.painter.getWidth()},Kt.prototype.getHeight=function(){return this.painter.getHeight()},Kt.prototype.pathToImage=function(Rt,Jt){if(this.painter.pathToImage)return this.painter.pathToImage(Rt,Jt)},Kt.prototype.setCursorStyle=function(Rt){this.handler.setCursorStyle(Rt)},Kt.prototype.findHover=function(Rt,Jt){return this.handler.findHover(Rt,Jt)},Kt.prototype.on=function(Rt,Jt,Xt){return this.handler.on(Rt,Jt,Xt),this},Kt.prototype.off=function(Rt,Jt){this.handler.off(Rt,Jt)},Kt.prototype.trigger=function(Rt,Jt){this.handler.trigger(Rt,Jt)},Kt.prototype.clear=function(){for(var Rt=this.storage.getRoots(),Jt=0;Jt<Rt.length;Jt++)Rt[Jt]instanceof Ie.a&&Rt[Jt].removeSelfFromZr(this);this.storage.delAllRoots(),this.painter.clear()},Kt.prototype.dispose=function(){this.animation.stop(),this.clear(),this.storage.dispose(),this.painter.dispose(),this.handler.dispose(),this.animation=this.storage=this.painter=this.handler=null,br(this.id)},Kt}();function Ut(Kt,Rt){var Jt=new Xe(mt.guid(),Kt,Rt);return ur[Jt.id]=Jt,Jt}function Qt(Kt){Kt.dispose()}function Yt(){for(var Kt in ur)ur.hasOwnProperty(Kt)&&ur[Kt].dispose();ur={}}function Zt(Kt){return ur[Kt]}function ce(Kt,Rt){He[Kt]=Rt}var xe="5.1.0"},aX7z:function(Ge,U,S){"use strict";S.d(U,"f",function(){return $}),S.d(U,"i",function(){return T}),S.d(U,"a",function(){return O}),S.d(U,"g",function(){return C}),S.d(U,"h",function(){return L}),S.d(U,"c",function(){return w}),S.d(U,"b",function(){return z}),S.d(U,"e",function(){return At}),S.d(U,"j",function(){return rt}),S.d(U,"d",function(){return _t}),S.d(U,"k",function(){return xt});var B=S("bYtY"),mt=S("GMDS"),H=S("ieMj"),ht=S("4NgU"),y=S("nVfU"),ot=S("mFDi"),it=S("IWp7"),Q=S("f66r"),Y=S("OELB"),G=S("lE7J"),q=ht.a.prototype,N=H.a.prototype,V=Y.g,lt=Y.u,at=Math.floor,gt=Math.ceil,Tt=Math.pow,bt=Math.log,nt=function(ft){Object(Q.b)(Mt,ft);function Mt(){var K=ft!==null&&ft.apply(this,arguments)||this;return K.type="log",K.base=10,K._originalScale=new H.a,K._interval=0,K}return Mt.prototype.getTicks=function(K){var R=this._originalScale,tt=this._extent,Z=R.getExtent(),ct=N.getTicks.call(this,K);return B.map(ct,function(vt){var Ct=vt.value,Bt=Y.u(Tt(this.base,Ct));return Bt=Ct===tt[0]&&this._fixMin?X(Bt,Z[0]):Bt,Bt=Ct===tt[1]&&this._fixMax?X(Bt,Z[1]):Bt,{value:Bt}},this)},Mt.prototype.setExtent=function(K,R){var tt=this.base;K=bt(K)/bt(tt),R=bt(R)/bt(tt),N.setExtent.call(this,K,R)},Mt.prototype.getExtent=function(){var K=this.base,R=q.getExtent.call(this);R[0]=Tt(K,R[0]),R[1]=Tt(K,R[1]);var tt=this._originalScale,Z=tt.getExtent();return this._fixMin&&(R[0]=X(R[0],Z[0])),this._fixMax&&(R[1]=X(R[1],Z[1])),R},Mt.prototype.unionExtent=function(K){this._originalScale.unionExtent(K);var R=this.base;K[0]=bt(K[0])/bt(R),K[1]=bt(K[1])/bt(R),q.unionExtent.call(this,K)},Mt.prototype.unionExtentFromData=function(K,R){this.unionExtent(K.getApproximateExtent(R))},Mt.prototype.niceTicks=function(K){K=K||10;var R=this._extent,tt=R[1]-R[0];if(!(tt===Infinity||tt<=0)){var Z=Y.q(tt),ct=K/tt*Z;for(ct<=.5&&(Z*=10);!isNaN(Z)&&Math.abs(Z)<1&&Math.abs(Z)>0;)Z*=10;var vt=[Y.u(gt(R[0]/Z)*Z),Y.u(at(R[1]/Z)*Z)];this._interval=Z,this._niceExtent=vt}},Mt.prototype.niceExtent=function(K){N.niceExtent.call(this,K),this._fixMin=K.fixMin,this._fixMax=K.fixMax},Mt.prototype.parse=function(K){return K},Mt.prototype.contain=function(K){return K=bt(K)/bt(this.base),G.a(K,this._extent)},Mt.prototype.normalize=function(K){return K=bt(K)/bt(this.base),G.d(K,this._extent)},Mt.prototype.scale=function(K){return K=G.e(K,this._extent),Tt(this.base,K)},Mt.type="log",Mt}(ht.a),W=nt.prototype;W.getMinorTicks=N.getMinorTicks,W.getLabel=N.getLabel;function X(ft,Mt){return lt(ft,V(Mt))}ht.a.registerClass(nt);var et=nt,k=S("7hqr"),st=S("U4/e");function $(ft,Mt){var K=ft.type,R=Object(st.a)(ft,Mt,ft.getExtent()).calculate();ft.setBlank(R.isBlank);var tt=R.min,Z=R.max,ct=Mt.ecModel;if(ct&&K==="time"){var vt=Object(y.e)("bar",ct),Ct=!1;if(B.each(vt,function(Wt){Ct=Ct||Wt.getBaseAxis()===Mt.axis}),Ct){var Bt=Object(y.d)(vt),It=D(tt,Z,Mt,Bt);tt=It.min,Z=It.max}}return{extent:[tt,Z],fixMin:R.minFixed,fixMax:R.maxFixed}}function D(ft,Mt,K,R){var tt=K.axis.getExtent(),Z=tt[1]-tt[0],ct=Object(y.f)(R,K.axis);if(ct===void 0)return{min:ft,max:Mt};var vt=Infinity;B.each(ct,function(ae){vt=Math.min(ae.offset,vt)});var Ct=-Infinity;B.each(ct,function(ae){Ct=Math.max(ae.offset+ae.width,Ct)}),vt=Math.abs(vt),Ct=Math.abs(Ct);var Bt=vt+Ct,It=Mt-ft,Wt=1-(vt+Ct)/Z,ee=It/Wt-It;return Mt+=ee*(Ct/Bt),ft-=ee*(vt/Bt),{min:ft,max:Mt}}function T(ft,Mt){var K=$(ft,Mt),R=K.extent,tt=Mt.get("splitNumber");ft instanceof et&&(ft.base=Mt.get("logBase"));var Z=ft.type;ft.setExtent(R[0],R[1]),ft.niceExtent({splitNumber:tt,fixMin:K.fixMin,fixMax:K.fixMax,minInterval:Z==="interval"||Z==="time"?Mt.get("minInterval"):null,maxInterval:Z==="interval"||Z==="time"?Mt.get("maxInterval"):null});var ct=Mt.get("interval");ct!=null&&ft.setInterval&&ft.setInterval(ct)}function O(ft,Mt){if(Mt=Mt||ft.get("type"),Mt)switch(Mt){case"category":return new mt.a({ordinalMeta:ft.getOrdinalMeta?ft.getOrdinalMeta():ft.getCategories(),extent:[Infinity,-Infinity]});case"time":return new it.a({locale:ft.ecModel.getLocaleModel(),useUTC:ft.ecModel.get("useUTC")});default:return new(ht.a.getClass(Mt)||H.a)}}function C(ft){var Mt=ft.scale.getExtent(),K=Mt[0],R=Mt[1];return!(K>0&&R>0||K<0&&R<0)}function L(ft){var Mt=ft.getLabelModel().get("formatter"),K=ft.type==="category"?ft.scale.getExtent()[0]:null;return ft.scale.type==="time"?function(R){return function(tt,Z){return ft.scale.getFormattedLabel(tt,Z,R)}}(Mt):typeof Mt=="string"?function(R){return function(tt){var Z=ft.scale.getLabel(tt),ct=R.replace("{value}",Z!=null?Z:"");return ct}}(Mt):typeof Mt=="function"?function(R){return function(tt,Z){return K!=null&&(Z=tt.value-K),R(w(ft,tt),Z,tt.level!=null?{level:tt.level}:null)}}(Mt):function(R){return ft.scale.getLabel(R)}}function w(ft,Mt){return ft.type==="category"?ft.scale.getLabel(Mt):Mt.value}function z(ft){var Mt=ft.model,K=ft.scale;if(!(!Mt.get(["axisLabel","show"])||K.isBlank())){var R,tt,Z=K.getExtent();K instanceof mt.a?tt=K.count():(R=K.getTicks(),tt=R.length);var ct=ft.getLabelModel(),vt=L(ft),Ct,Bt=1;tt>40&&(Bt=Math.ceil(tt/40));for(var It=0;It<tt;It+=Bt){var Wt=R?R[It]:{value:Z[0]+It},ee=vt(Wt,It),ae=ct.getTextRect(ee),ye=pt(ae,ct.get("rotate")||0);Ct?Ct.union(ye):Ct=ye}return Ct}}function pt(ft,Mt){var K=Mt*Math.PI/180,R=ft.width,tt=ft.height,Z=R*Math.abs(Math.cos(K))+Math.abs(tt*Math.sin(K)),ct=R*Math.abs(Math.sin(K))+Math.abs(tt*Math.cos(K)),vt=new ot.a(ft.x,ft.y,Z,ct);return vt}function At(ft){var Mt=ft.get("interval");return Mt==null?"auto":Mt}function rt(ft){return ft.type==="category"&&At(ft.getLabelModel())===0}function _t(ft,Mt){var K={};return B.each(ft.mapDimensionsAll(Mt),function(R){K[Object(k.b)(ft,R)]=!0}),B.keys(K)}function xt(ft,Mt,K){Mt&&B.each(_t(Mt,K),function(R){var tt=Mt.getApproximateExtent(R);tt[0]<ft[0]&&(ft[0]=tt[0]),tt[1]>ft[1]&&(ft[1]=tt[1])})}},b9Ot:function(Ge,U,S){"use strict";var B=function(){function mt(H){H&&(this._$eventProcessor=H)}return mt.prototype.on=function(H,ht,y,ot){this._$handlers||(this._$handlers={});var it=this._$handlers;if(typeof ht=="function"&&(ot=y,y=ht,ht=null),!y||!H)return this;var Q=this._$eventProcessor;ht!=null&&Q&&Q.normalizeQuery&&(ht=Q.normalizeQuery(ht)),it[H]||(it[H]=[]);for(var Y=0;Y<it[H].length;Y++)if(it[H][Y].h===y)return this;var G={h:y,query:ht,ctx:ot||this,callAtLast:y.zrEventfulCallAtLast},q=it[H].length-1,N=it[H][q];return N&&N.callAtLast?it[H].splice(q,0,G):it[H].push(G),this},mt.prototype.isSilent=function(H){var ht=this._$handlers;return!ht||!ht[H]||!ht[H].length},mt.prototype.off=function(H,ht){var y=this._$handlers;if(!y)return this;if(!H)return this._$handlers={},this;if(ht){if(y[H]){for(var ot=[],it=0,Q=y[H].length;it<Q;it++)y[H][it].h!==ht&&ot.push(y[H][it]);y[H]=ot}y[H]&&y[H].length===0&&delete y[H]}else delete y[H];return this},mt.prototype.trigger=function(H){for(var ht=[],y=1;y<arguments.length;y++)ht[y-1]=arguments[y];if(!this._$handlers)return this;var ot=this._$handlers[H],it=this._$eventProcessor;if(ot)for(var Q=ht.length,Y=ot.length,G=0;G<Y;G++){var q=ot[G];if(!(it&&it.filter&&q.query!=null&&!it.filter(H,q.query)))switch(Q){case 0:q.h.call(q.ctx);break;case 1:q.h.call(q.ctx,ht[0]);break;case 2:q.h.call(q.ctx,ht[0],ht[1]);break;default:q.h.apply(q.ctx,ht);break}}return it&&it.afterTrigger&&it.afterTrigger(H),this},mt.prototype.triggerWithContext=function(H){if(!this._$handlers)return this;var ht=this._$handlers[H],y=this._$eventProcessor;if(ht)for(var ot=arguments,it=ot.length,Q=ot[it-1],Y=ht.length,G=0;G<Y;G++){var q=ht[G];if(!(y&&y.filter&&q.query!=null&&!y.filter(H,q.query)))switch(it){case 0:q.h.call(Q);break;case 1:q.h.call(Q,ot[0]);break;case 2:q.h.call(Q,ot[0],ot[1]);break;default:q.h.apply(Q,ot.slice(1,it-1));break}}return y&&y.afterTrigger&&y.afterTrigger(H),this},mt}();U.a=B},bLfw:function(Ge,U,S){"use strict";var B=S("f66r"),mt=S("bYtY"),H=S("Qxkt"),ht=S("iRjW"),y=S("Yl7c"),ot=S("4NO4"),it=S("+TT/"),Q=Object(ot.o)(),Y=function(q){Object(B.b)(N,q);function N(V,lt,at){var gt=q.call(this,V,lt,at)||this;return gt.uid=ht.c("ec_cpt_model"),gt}return N.prototype.init=function(V,lt,at){this.mergeDefaultAndTheme(V,at)},N.prototype.mergeDefaultAndTheme=function(V,lt){var at=it.d(this),gt=at?it.f(V):{},Tt=lt.getTheme();mt.merge(V,Tt.get(this.mainType)),mt.merge(V,this.getDefaultOption()),at&&it.h(V,gt,at)},N.prototype.mergeOption=function(V,lt){mt.merge(this.option,V,!0);var at=it.d(this);at&&it.h(this.option,V,at)},N.prototype.optionUpdated=function(V,lt){},N.prototype.getDefaultOption=function(){var V=this.constructor;if(!Object(y.d)(V))return V.defaultOption;var lt=Q(this);if(!lt.defaultOption){for(var at=[],gt=V;gt;){var Tt=gt.prototype.defaultOption;Tt&&at.push(Tt),gt=gt.superClass}for(var bt={},nt=at.length-1;nt>=0;nt--)bt=mt.merge(bt,at[nt],!0);lt.defaultOption=bt}return lt.defaultOption},N.prototype.getReferringComponents=function(V,lt){var at=V+"Index",gt=V+"Id";return Object(ot.v)(this.ecModel,V,{index:this.get(at,!0),id:this.get(gt,!0)},lt)},N.prototype.getBoxLayoutParams=function(){var V=this;return{left:V.get("left"),top:V.get("top"),right:V.get("right"),bottom:V.get("bottom"),width:V.get("width"),height:V.get("height")}},N.protoInitialize=function(){var V=N.prototype;V.type="component",V.id="",V.name="",V.mainType="",V.subType="",V.componentIndex=0}(),N}(H.a);Object(y.e)(Y,H.a),Object(y.c)(Y),ht.a(Y),ht.b(Y,G);function G(q){var N=[];return mt.each(Y.getClassesByMainType(q),function(V){N=N.concat(V.dependencies||V.prototype.dependencies||[])}),N=mt.map(N,function(V){return Object(y.f)(V).main}),q!=="dataset"&&mt.indexOf(N,"dataset")<=0&&N.unshift("dataset"),N}U.a=Y},bYtY:function(Ge,U,S){"use strict";S.r(U),S.d(U,"$override",function(){return N}),S.d(U,"guid",function(){return lt}),S.d(U,"logError",function(){return at}),S.d(U,"clone",function(){return gt}),S.d(U,"merge",function(){return Tt}),S.d(U,"mergeAll",function(){return bt}),S.d(U,"extend",function(){return nt}),S.d(U,"defaults",function(){return W}),S.d(U,"createCanvas",function(){return X}),S.d(U,"indexOf",function(){return et}),S.d(U,"inherits",function(){return k}),S.d(U,"mixin",function(){return st}),S.d(U,"isArrayLike",function(){return $}),S.d(U,"each",function(){return D}),S.d(U,"map",function(){return T}),S.d(U,"reduce",function(){return O}),S.d(U,"filter",function(){return C}),S.d(U,"find",function(){return L}),S.d(U,"keys",function(){return w}),S.d(U,"bind",function(){return pt}),S.d(U,"curry",function(){return At}),S.d(U,"isArray",function(){return rt}),S.d(U,"isFunction",function(){return _t}),S.d(U,"isString",function(){return xt}),S.d(U,"isStringSafe",function(){return ft}),S.d(U,"isNumber",function(){return Mt}),S.d(U,"isObject",function(){return K}),S.d(U,"isBuiltInObject",function(){return R}),S.d(U,"isTypedArray",function(){return tt}),S.d(U,"isDom",function(){return Z}),S.d(U,"isGradientObject",function(){return ct}),S.d(U,"isPatternObject",function(){return vt}),S.d(U,"isRegExp",function(){return Ct}),S.d(U,"eqNaN",function(){return Bt}),S.d(U,"retrieve",function(){return It}),S.d(U,"retrieve2",function(){return Wt}),S.d(U,"retrieve3",function(){return ee}),S.d(U,"slice",function(){return ae}),S.d(U,"normalizeCssArray",function(){return ye}),S.d(U,"assert",function(){return Le}),S.d(U,"trim",function(){return _e}),S.d(U,"setAsPrimitive",function(){return er}),S.d(U,"isPrimitive",function(){return Ie}),S.d(U,"HashMap",function(){return Fe}),S.d(U,"createHashMap",function(){return He}),S.d(U,"concatArray",function(){return ur}),S.d(U,"createObject",function(){return br}),S.d(U,"hasOwn",function(){return kr}),S.d(U,"noop",function(){return Xe});var B={"[object Function]":!0,"[object RegExp]":!0,"[object Date]":!0,"[object Error]":!0,"[object CanvasGradient]":!0,"[object CanvasPattern]":!0,"[object Image]":!0,"[object Canvas]":!0},mt={"[object Int8Array]":!0,"[object Uint8Array]":!0,"[object Uint8ClampedArray]":!0,"[object Int16Array]":!0,"[object Uint16Array]":!0,"[object Int32Array]":!0,"[object Uint32Array]":!0,"[object Float32Array]":!0,"[object Float64Array]":!0},H=Object.prototype.toString,ht=Array.prototype,y=ht.forEach,ot=ht.filter,it=ht.slice,Q=ht.map,Y=function(){}.constructor,G=Y?Y.prototype:null,q={};function N(Ut,Qt){q[Ut]=Qt}var V=2311;function lt(){return V++}function at(){for(var Ut=[],Qt=0;Qt<arguments.length;Qt++)Ut[Qt]=arguments[Qt];typeof console!="undefined"&&console.error.apply(console,Ut)}function gt(Ut){if(Ut==null||typeof Ut!="object")return Ut;var Qt=Ut,Yt=H.call(Ut);if(Yt==="[object Array]"){if(!Ie(Ut)){Qt=[];for(var Zt=0,ce=Ut.length;Zt<ce;Zt++)Qt[Zt]=gt(Ut[Zt])}}else if(mt[Yt]){if(!Ie(Ut)){var xe=Ut.constructor;if(xe.from)Qt=xe.from(Ut);else{Qt=new xe(Ut.length);for(var Zt=0,ce=Ut.length;Zt<ce;Zt++)Qt[Zt]=gt(Ut[Zt])}}}else if(!B[Yt]&&!Ie(Ut)&&!Z(Ut)){Qt={};for(var Kt in Ut)Ut.hasOwnProperty(Kt)&&(Qt[Kt]=gt(Ut[Kt]))}return Qt}function Tt(Ut,Qt,Yt){if(!K(Qt)||!K(Ut))return Yt?gt(Qt):Ut;for(var Zt in Qt)if(Qt.hasOwnProperty(Zt)){var ce=Ut[Zt],xe=Qt[Zt];K(xe)&&K(ce)&&!rt(xe)&&!rt(ce)&&!Z(xe)&&!Z(ce)&&!R(xe)&&!R(ce)&&!Ie(xe)&&!Ie(ce)?Tt(ce,xe,Yt):(Yt||!(Zt in Ut))&&(Ut[Zt]=gt(Qt[Zt]))}return Ut}function bt(Ut,Qt){for(var Yt=Ut[0],Zt=1,ce=Ut.length;Zt<ce;Zt++)Yt=Tt(Yt,Ut[Zt],Qt);return Yt}function nt(Ut,Qt){if(Object.assign)Object.assign(Ut,Qt);else for(var Yt in Qt)Qt.hasOwnProperty(Yt)&&(Ut[Yt]=Qt[Yt]);return Ut}function W(Ut,Qt,Yt){for(var Zt=w(Qt),ce=0;ce<Zt.length;ce++){var xe=Zt[ce];(Yt?Qt[xe]!=null:Ut[xe]==null)&&(Ut[xe]=Qt[xe])}return Ut}var X=function(){return q.createCanvas()};q.createCanvas=function(){return document.createElement("canvas")};function et(Ut,Qt){if(Ut){if(Ut.indexOf)return Ut.indexOf(Qt);for(var Yt=0,Zt=Ut.length;Yt<Zt;Yt++)if(Ut[Yt]===Qt)return Yt}return-1}function k(Ut,Qt){var Yt=Ut.prototype;function Zt(){}Zt.prototype=Qt.prototype,Ut.prototype=new Zt;for(var ce in Yt)Yt.hasOwnProperty(ce)&&(Ut.prototype[ce]=Yt[ce]);Ut.prototype.constructor=Ut,Ut.superClass=Qt}function st(Ut,Qt,Yt){if(Ut="prototype"in Ut?Ut.prototype:Ut,Qt="prototype"in Qt?Qt.prototype:Qt,Object.getOwnPropertyNames)for(var Zt=Object.getOwnPropertyNames(Qt),ce=0;ce<Zt.length;ce++){var xe=Zt[ce];xe!=="constructor"&&(Yt?Qt[xe]!=null:Ut[xe]==null)&&(Ut[xe]=Qt[xe])}else W(Ut,Qt,Yt)}function $(Ut){return!Ut||typeof Ut=="string"?!1:typeof Ut.length=="number"}function D(Ut,Qt,Yt){if(!!(Ut&&Qt))if(Ut.forEach&&Ut.forEach===y)Ut.forEach(Qt,Yt);else if(Ut.length===+Ut.length)for(var Zt=0,ce=Ut.length;Zt<ce;Zt++)Qt.call(Yt,Ut[Zt],Zt,Ut);else for(var xe in Ut)Ut.hasOwnProperty(xe)&&Qt.call(Yt,Ut[xe],xe,Ut)}function T(Ut,Qt,Yt){if(!Ut)return[];if(!Qt)return ae(Ut);if(Ut.map&&Ut.map===Q)return Ut.map(Qt,Yt);for(var Zt=[],ce=0,xe=Ut.length;ce<xe;ce++)Zt.push(Qt.call(Yt,Ut[ce],ce,Ut));return Zt}function O(Ut,Qt,Yt,Zt){if(!!(Ut&&Qt)){for(var ce=0,xe=Ut.length;ce<xe;ce++)Yt=Qt.call(Zt,Yt,Ut[ce],ce,Ut);return Yt}}function C(Ut,Qt,Yt){if(!Ut)return[];if(!Qt)return ae(Ut);if(Ut.filter&&Ut.filter===ot)return Ut.filter(Qt,Yt);for(var Zt=[],ce=0,xe=Ut.length;ce<xe;ce++)Qt.call(Yt,Ut[ce],ce,Ut)&&Zt.push(Ut[ce]);return Zt}function L(Ut,Qt,Yt){if(!!(Ut&&Qt)){for(var Zt=0,ce=Ut.length;Zt<ce;Zt++)if(Qt.call(Yt,Ut[Zt],Zt,Ut))return Ut[Zt]}}function w(Ut){if(!Ut)return[];if(Object.keys)return Object.keys(Ut);var Qt=[];for(var Yt in Ut)Ut.hasOwnProperty(Yt)&&Qt.push(Yt);return Qt}function z(Ut,Qt){for(var Yt=[],Zt=2;Zt<arguments.length;Zt++)Yt[Zt-2]=arguments[Zt];return function(){return Ut.apply(Qt,Yt.concat(it.call(arguments)))}}var pt=G&&_t(G.bind)?G.call.bind(G.bind):z;function At(Ut){for(var Qt=[],Yt=1;Yt<arguments.length;Yt++)Qt[Yt-1]=arguments[Yt];return function(){return Ut.apply(this,Qt.concat(it.call(arguments)))}}function rt(Ut){return Array.isArray?Array.isArray(Ut):H.call(Ut)==="[object Array]"}function _t(Ut){return typeof Ut=="function"}function xt(Ut){return typeof Ut=="string"}function ft(Ut){return H.call(Ut)==="[object String]"}function Mt(Ut){return typeof Ut=="number"}function K(Ut){var Qt=typeof Ut;return Qt==="function"||!!Ut&&Qt==="object"}function R(Ut){return!!B[H.call(Ut)]}function tt(Ut){return!!mt[H.call(Ut)]}function Z(Ut){return typeof Ut=="object"&&typeof Ut.nodeType=="number"&&typeof Ut.ownerDocument=="object"}function ct(Ut){return Ut.colorStops!=null}function vt(Ut){return Ut.image!=null}function Ct(Ut){return H.call(Ut)==="[object RegExp]"}function Bt(Ut){return Ut!==Ut}function It(){for(var Ut=[],Qt=0;Qt<arguments.length;Qt++)Ut[Qt]=arguments[Qt];for(var Yt=0,Zt=Ut.length;Yt<Zt;Yt++)if(Ut[Yt]!=null)return Ut[Yt]}function Wt(Ut,Qt){return Ut!=null?Ut:Qt}function ee(Ut,Qt,Yt){return Ut!=null?Ut:Qt!=null?Qt:Yt}function ae(Ut){for(var Qt=[],Yt=1;Yt<arguments.length;Yt++)Qt[Yt-1]=arguments[Yt];return it.apply(Ut,Qt)}function ye(Ut){if(typeof Ut=="number")return[Ut,Ut,Ut,Ut];var Qt=Ut.length;return Qt===2?[Ut[0],Ut[1],Ut[0],Ut[1]]:Qt===3?[Ut[0],Ut[1],Ut[2],Ut[1]]:Ut}function Le(Ut,Qt){if(!Ut)throw new Error(Qt)}function _e(Ut){return Ut==null?null:typeof Ut.trim=="function"?Ut.trim():Ut.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}var De="__ec_primitive__";function er(Ut){Ut[De]=!0}function Ie(Ut){return Ut[De]}var Fe=function(){function Ut(Qt){this.data={};var Yt=rt(Qt);this.data={};var Zt=this;Qt instanceof Ut?Qt.each(ce):Qt&&D(Qt,ce);function ce(xe,Kt){Yt?Zt.set(xe,Kt):Zt.set(Kt,xe)}}return Ut.prototype.get=function(Qt){return this.data.hasOwnProperty(Qt)?this.data[Qt]:null},Ut.prototype.set=function(Qt,Yt){return this.data[Qt]=Yt},Ut.prototype.each=function(Qt,Yt){for(var Zt in this.data)this.data.hasOwnProperty(Zt)&&Qt.call(Yt,this.data[Zt],Zt)},Ut.prototype.keys=function(){return w(this.data)},Ut.prototype.removeKey=function(Qt){delete this.data[Qt]},Ut}();function He(Ut){return new Fe(Ut)}function ur(Ut,Qt){for(var Yt=new Ut.constructor(Ut.length+Qt.length),Zt=0;Zt<Ut.length;Zt++)Yt[Zt]=Ut[Zt];for(var ce=Ut.length,Zt=0;Zt<Qt.length;Zt++)Yt[Zt+ce]=Qt[Zt];return Yt}function br(Ut,Qt){var Yt;if(Object.create)Yt=Object.create(Ut);else{var Zt=function(){};Zt.prototype=Ut,Yt=new Zt}return Qt&&nt(Yt,Qt),Yt}function kr(Ut,Qt){return Ut.hasOwnProperty(Qt)}function Xe(){}},c2i1:function(Ge,U,S){"use strict";var B=S("bYtY");function mt(it){return"_EC_"+it}var H=function(){function it(Q){this.type="graph",this.nodes=[],this.edges=[],this._nodesMap={},this._edgesMap={},this._directed=Q||!1}return it.prototype.isDirected=function(){return this._directed},it.prototype.addNode=function(Q,Y){Q=Q==null?""+Y:""+Q;var G=this._nodesMap;if(!G[mt(Q)]){var q=new ht(Q,Y);return q.hostGraph=this,this.nodes.push(q),G[mt(Q)]=q,q}},it.prototype.getNodeByIndex=function(Q){var Y=this.data.getRawIndex(Q);return this.nodes[Y]},it.prototype.getNodeById=function(Q){return this._nodesMap[mt(Q)]},it.prototype.addEdge=function(Q,Y,G){var q=this._nodesMap,N=this._edgesMap;if(typeof Q=="number"&&(Q=this.nodes[Q]),typeof Y=="number"&&(Y=this.nodes[Y]),Q instanceof ht||(Q=q[mt(Q)]),Y instanceof ht||(Y=q[mt(Y)]),!(!Q||!Y)){var V=Q.id+"-"+Y.id,lt=new y(Q,Y,G);return lt.hostGraph=this,this._directed&&(Q.outEdges.push(lt),Y.inEdges.push(lt)),Q.edges.push(lt),Q!==Y&&Y.edges.push(lt),this.edges.push(lt),N[V]=lt,lt}},it.prototype.getEdgeByIndex=function(Q){var Y=this.edgeData.getRawIndex(Q);return this.edges[Y]},it.prototype.getEdge=function(Q,Y){Q instanceof ht&&(Q=Q.id),Y instanceof ht&&(Y=Y.id);var G=this._edgesMap;return this._directed?G[Q+"-"+Y]:G[Q+"-"+Y]||G[Y+"-"+Q]},it.prototype.eachNode=function(Q,Y){for(var G=this.nodes,q=G.length,N=0;N<q;N++)G[N].dataIndex>=0&&Q.call(Y,G[N],N)},it.prototype.eachEdge=function(Q,Y){for(var G=this.edges,q=G.length,N=0;N<q;N++)G[N].dataIndex>=0&&G[N].node1.dataIndex>=0&&G[N].node2.dataIndex>=0&&Q.call(Y,G[N],N)},it.prototype.breadthFirstTraverse=function(Q,Y,G,q){if(Y instanceof ht||(Y=this._nodesMap[mt(Y)]),!!Y){for(var N=G==="out"?"outEdges":G==="in"?"inEdges":"edges",V=0;V<this.nodes.length;V++)this.nodes[V].__visited=!1;if(!Q.call(q,Y,null))for(var lt=[Y];lt.length;)for(var at=lt.shift(),gt=at[N],V=0;V<gt.length;V++){var Tt=gt[V],bt=Tt.node1===at?Tt.node2:Tt.node1;if(!bt.__visited){if(Q.call(q,bt,at))return;lt.push(bt),bt.__visited=!0}}}},it.prototype.update=function(){for(var Q=this.data,Y=this.edgeData,G=this.nodes,q=this.edges,N=0,V=G.length;N<V;N++)G[N].dataIndex=-1;for(var N=0,V=Q.count();N<V;N++)G[Q.getRawIndex(N)].dataIndex=N;Y.filterSelf(function(lt){var at=q[Y.getRawIndex(lt)];return at.node1.dataIndex>=0&&at.node2.dataIndex>=0});for(var N=0,V=q.length;N<V;N++)q[N].dataIndex=-1;for(var N=0,V=Y.count();N<V;N++)q[Y.getRawIndex(N)].dataIndex=N},it.prototype.clone=function(){for(var Q=new it(this._directed),Y=this.nodes,G=this.edges,q=0;q<Y.length;q++)Q.addNode(Y[q].id,Y[q].dataIndex);for(var q=0;q<G.length;q++){var N=G[q];Q.addEdge(N.node1.id,N.node2.id,N.dataIndex)}return Q},it}(),ht=function(){function it(Q,Y){this.inEdges=[],this.outEdges=[],this.edges=[],this.dataIndex=-1,this.id=Q==null?"":Q,this.dataIndex=Y==null?-1:Y}return it.prototype.degree=function(){return this.edges.length},it.prototype.inDegree=function(){return this.inEdges.length},it.prototype.outDegree=function(){return this.outEdges.length},it.prototype.getModel=function(Q){if(!(this.dataIndex<0)){var Y=this.hostGraph,G=Y.data.getItemModel(this.dataIndex);return G.getModel(Q)}},it.prototype.getAdjacentDataIndices=function(){for(var Q={edge:[],node:[]},Y=0;Y<this.edges.length;Y++){var G=this.edges[Y];G.dataIndex<0||(Q.edge.push(G.dataIndex),Q.node.push(G.node1.dataIndex,G.node2.dataIndex))}return Q},it}(),y=function(){function it(Q,Y,G){this.dataIndex=-1,this.node1=Q,this.node2=Y,this.dataIndex=G==null?-1:G}return it.prototype.getModel=function(Q){if(!(this.dataIndex<0)){var Y=this.hostGraph,G=Y.edgeData.getItemModel(this.dataIndex);return G.getModel(Q)}},it.prototype.getAdjacentDataIndices=function(){return{edge:[this.dataIndex],node:[this.node1.dataIndex,this.node2.dataIndex]}},it}();function ot(it,Q){return{getValue:function(Y){var G=this[it][Q];return G.get(G.getDimension(Y||"value"),this.dataIndex)},setVisual:function(Y,G){this.dataIndex>=0&&this[it][Q].setItemVisual(this.dataIndex,Y,G)},getVisual:function(Y){return this[it][Q].getItemVisual(this.dataIndex,Y)},setLayout:function(Y,G){this.dataIndex>=0&&this[it][Q].setItemLayout(this.dataIndex,Y,G)},getLayout:function(){return this[it][Q].getItemLayout(this.dataIndex)},getGraphicEl:function(){return this[it][Q].getItemGraphicEl(this.dataIndex)},getRawIndex:function(){return this[it][Q].getRawIndex(this.dataIndex)}}}B.mixin(ht,ot("hostGraph","data")),B.mixin(y,ot("hostGraph","edgeData")),U.a=H},chpo:function(Ge,U,S){"use strict";Object.defineProperty(U,"__esModule",{value:!0}),U.default=void 0;var B=1,mt=function(){return"".concat(B++)};U.default=mt},dqUG:function(Ge,U,S){"use strict";var B=S("IaEH"),mt=S("1AkM"),H=S("3U8f"),ht=S("bYtY"),y=S("6GrX"),ot=S("Dagg"),it=S("x6Kt"),Q=S("mFDi"),Y=S("Fofx"),G=S("Gev7"),q={fill:"#000"},N=2,V={style:Object(ht.defaults)({fill:!0,stroke:!0,fillOpacity:!0,strokeOpacity:!0,lineWidth:!0,fontSize:!0,lineHeight:!0,width:!0,height:!0,textShadowColor:!0,textShadowBlur:!0,textShadowOffsetX:!0,textShadowOffsetY:!0,backgroundColor:!0,padding:!0,borderColor:!0,borderWidth:!0,borderRadius:!0},G.a.style)},lt=function(st){Object(B.a)($,st);function $(D){var T=st.call(this)||this;return T.type="text",T._children=[],T._defaultStyle=q,T.attr(D),T}return $.prototype.childrenRef=function(){return this._children},$.prototype.update=function(){this.styleChanged()&&this._updateSubTexts();for(var D=0;D<this._children.length;D++){var T=this._children[D];T.zlevel=this.zlevel,T.z=this.z,T.z2=this.z2,T.culling=this.culling,T.cursor=this.cursor,T.invisible=this.invisible}var O=this.attachedTransform;if(O){O.updateTransform();var C=O.transform;C?(this.transform=this.transform||[],Object(Y.copy)(this.transform,C)):this.transform=null}else st.prototype.update.call(this)},$.prototype.getComputedTransform=function(){return this.__hostTarget&&(this.__hostTarget.getComputedTransform(),this.__hostTarget.updateInnerText(!0)),this.attachedTransform?this.attachedTransform.getComputedTransform():st.prototype.getComputedTransform.call(this)},$.prototype._updateSubTexts=function(){this._childCursor=0,Tt(this.style),this.style.rich?this._updateRichTexts():this._updatePlainTexts(),this._children.length=this._childCursor,this.styleUpdated()},$.prototype.addSelfToZr=function(D){st.prototype.addSelfToZr.call(this,D);for(var T=0;T<this._children.length;T++)this._children[T].__zr=D},$.prototype.removeSelfFromZr=function(D){st.prototype.removeSelfFromZr.call(this,D);for(var T=0;T<this._children.length;T++)this._children[T].__zr=null},$.prototype.getBoundingRect=function(){if(this.styleChanged()&&this._updateSubTexts(),!this._rect){for(var D=new Q.a(0,0,0,0),T=this._children,O=[],C=null,L=0;L<T.length;L++){var w=T[L],z=w.getBoundingRect(),pt=w.getLocalTransform(O);pt?(D.copy(z),D.applyTransform(pt),C=C||D.clone(),C.union(D)):(C=C||z.clone(),C.union(z))}this._rect=C||D}return this._rect},$.prototype.setDefaultTextStyle=function(D){this._defaultStyle=D||q},$.prototype.setTextContent=function(D){throw new Error("Can't attach text on another text")},$.prototype._mergeStyle=function(D,T){if(!T)return D;var O=T.rich,C=D.rich||O&&{};return Object(ht.extend)(D,T),O&&C?(this._mergeRich(C,O),D.rich=C):C&&(D.rich=C),D},$.prototype._mergeRich=function(D,T){for(var O=Object(ht.keys)(T),C=0;C<O.length;C++){var L=O[C];D[L]=D[L]||{},Object(ht.extend)(D[L],T[L])}},$.prototype.getAnimationStyleProps=function(){return V},$.prototype._getOrCreateChild=function(D){var T=this._children[this._childCursor];return(!T||!(T instanceof D))&&(T=new D),this._children[this._childCursor++]=T,T.__zr=this.__zr,T.parent=this,T},$.prototype._updatePlainTexts=function(){var D=this.style,T=D.font||y.a,O=D.padding,C=et(D),L=Object(mt.a)(C,D),w=k(D),z=!!D.backgroundColor,pt=L.outerHeight,At=L.lines,rt=L.lineHeight,_t=this._defaultStyle,xt=D.x||0,ft=D.y||0,Mt=D.align||_t.align||"left",K=D.verticalAlign||_t.verticalAlign||"top",R=xt,tt=Object(y.c)(ft,L.contentHeight,K);if(w||O){var Z=L.width;O&&(Z+=O[1]+O[3]);var ct=Object(y.b)(xt,Z,Mt),vt=Object(y.c)(ft,pt,K);w&&this._renderBackground(D,D,ct,vt,Z,pt)}tt+=rt/2,O&&(R=X(xt,Mt,O),K==="top"?tt+=O[0]:K==="bottom"&&(tt-=O[2]));for(var Ct=0,Bt=!1,It=W("fill"in D?D.fill:(Bt=!0,_t.fill)),Wt=nt("stroke"in D?D.stroke:!z&&(!_t.autoStroke||Bt)?(Ct=N,_t.stroke):null),ee=D.textShadowBlur>0,ae=D.width!=null&&(D.overflow==="truncate"||D.overflow==="break"||D.overflow==="breakAll"),ye=L.calculatedLineHeight,Le=0;Le<At.length;Le++){var _e=this._getOrCreateChild(H.a),De=_e.createStyle();_e.useStyle(De),De.text=At[Le],De.x=R,De.y=tt,Mt&&(De.textAlign=Mt),De.textBaseline="middle",De.opacity=D.opacity,De.strokeFirst=!0,ee&&(De.shadowBlur=D.textShadowBlur||0,De.shadowColor=D.textShadowColor||"transparent",De.shadowOffsetX=D.textShadowOffsetX||0,De.shadowOffsetY=D.textShadowOffsetY||0),Wt&&(De.stroke=Wt,De.lineWidth=D.lineWidth||Ct,De.lineDash=D.lineDash,De.lineDashOffset=D.lineDashOffset||0),It&&(De.fill=It),De.font=T,tt+=rt,ae&&_e.setBoundingRect(new Q.a(Object(y.b)(De.x,D.width,De.textAlign),Object(y.c)(De.y,ye,De.textBaseline),D.width,ye))}},$.prototype._updateRichTexts=function(){var D=this.style,T=et(D),O=Object(mt.b)(T,D),C=O.width,L=O.outerWidth,w=O.outerHeight,z=D.padding,pt=D.x||0,At=D.y||0,rt=this._defaultStyle,_t=D.align||rt.align,xt=D.verticalAlign||rt.verticalAlign,ft=Object(y.b)(pt,L,_t),Mt=Object(y.c)(At,w,xt),K=ft,R=Mt;z&&(K+=z[3],R+=z[0]);var tt=K+C;k(D)&&this._renderBackground(D,D,ft,Mt,L,w);for(var Z=!!D.backgroundColor,ct=0;ct<O.lines.length;ct++){for(var vt=O.lines[ct],Ct=vt.tokens,Bt=Ct.length,It=vt.lineHeight,Wt=vt.width,ee=0,ae=K,ye=tt,Le=Bt-1,_e=void 0;ee<Bt&&(_e=Ct[ee],!_e.align||_e.align==="left");)this._placeToken(_e,D,It,R,ae,"left",Z),Wt-=_e.width,ae+=_e.width,ee++;for(;Le>=0&&(_e=Ct[Le],_e.align==="right");)this._placeToken(_e,D,It,R,ye,"right",Z),Wt-=_e.width,ye-=_e.width,Le--;for(ae+=(C-(ae-K)-(tt-ye)-Wt)/2;ee<=Le;)_e=Ct[ee],this._placeToken(_e,D,It,R,ae+_e.width/2,"center",Z),ae+=_e.width,ee++;R+=It}},$.prototype._placeToken=function(D,T,O,C,L,w,z){var pt=T.rich[D.styleName]||{};pt.text=D.text;var At=D.verticalAlign,rt=C+O/2;At==="top"?rt=C+D.height/2:At==="bottom"&&(rt=C+O-D.height/2);var _t=!D.isLineHolder&&k(pt);_t&&this._renderBackground(pt,T,w==="right"?L-D.width:w==="center"?L-D.width/2:L,rt-D.height/2,D.width,D.height);var xt=!!pt.backgroundColor,ft=D.textPadding;ft&&(L=X(L,w,ft),rt-=D.height/2-ft[0]-D.innerHeight/2);var Mt=this._getOrCreateChild(H.a),K=Mt.createStyle();Mt.useStyle(K);var R=this._defaultStyle,tt=!1,Z=0,ct=nt("fill"in pt?pt.fill:"fill"in T?T.fill:(tt=!0,R.fill)),vt=nt("stroke"in pt?pt.stroke:"stroke"in T?T.stroke:!xt&&!z&&(!R.autoStroke||tt)?(Z=N,R.stroke):null),Ct=pt.textShadowBlur>0||T.textShadowBlur>0;K.text=D.text,K.x=L,K.y=rt,Ct&&(K.shadowBlur=pt.textShadowBlur||T.textShadowBlur||0,K.shadowColor=pt.textShadowColor||T.textShadowColor||"transparent",K.shadowOffsetX=pt.textShadowOffsetX||T.textShadowOffsetX||0,K.shadowOffsetY=pt.textShadowOffsetY||T.textShadowOffsetY||0),K.textAlign=w,K.textBaseline="middle",K.font=D.font||y.a,K.opacity=Object(ht.retrieve3)(pt.opacity,T.opacity,1),vt&&(K.lineWidth=Object(ht.retrieve3)(pt.lineWidth,T.lineWidth,Z),K.lineDash=Object(ht.retrieve2)(pt.lineDash,T.lineDash),K.lineDashOffset=T.lineDashOffset||0,K.stroke=vt),ct&&(K.fill=ct);var Bt=D.contentWidth,It=D.contentHeight;Mt.setBoundingRect(new Q.a(Object(y.b)(K.x,Bt,K.textAlign),Object(y.c)(K.y,It,K.textBaseline),Bt,It))},$.prototype._renderBackground=function(D,T,O,C,L,w){var z=D.backgroundColor,pt=D.borderWidth,At=D.borderColor,rt=Object(ht.isString)(z),_t=D.borderRadius,xt=this,ft,Mt;if(rt||pt&&At){ft=this._getOrCreateChild(it.a),ft.useStyle(ft.createStyle()),ft.style.fill=null;var K=ft.shape;K.x=O,K.y=C,K.width=L,K.height=w,K.r=_t,ft.dirtyShape()}if(rt){var R=ft.style;R.fill=z||null,R.fillOpacity=Object(ht.retrieve2)(D.fillOpacity,1)}else if(z&&z.image){Mt=this._getOrCreateChild(ot.a),Mt.onload=function(){xt.dirtyStyle()};var tt=Mt.style;tt.image=z.image,tt.x=O,tt.y=C,tt.width=L,tt.height=w}if(pt&&At){var R=ft.style;R.lineWidth=pt,R.stroke=At,R.strokeOpacity=Object(ht.retrieve2)(D.strokeOpacity,1),R.lineDash=D.borderDash,R.lineDashOffset=D.borderDashOffset||0,ft.strokeContainThreshold=0,ft.hasFill()&&ft.hasStroke()&&(R.strokeFirst=!0,R.lineWidth*=2)}var Z=(ft||Mt).style;Z.shadowBlur=D.shadowBlur||0,Z.shadowColor=D.shadowColor||"transparent",Z.shadowOffsetX=D.shadowOffsetX||0,Z.shadowOffsetY=D.shadowOffsetY||0,Z.opacity=Object(ht.retrieve3)(D.opacity,T.opacity,1)},$.makeFont=function(D){var T="";if(D.fontSize||D.fontFamily||D.fontWeight){var O="";typeof D.fontSize=="string"&&(D.fontSize.indexOf("px")!==-1||D.fontSize.indexOf("rem")!==-1||D.fontSize.indexOf("em")!==-1)?O=D.fontSize:isNaN(+D.fontSize)?O="12px":O=D.fontSize+"px",T=[D.fontStyle,D.fontWeight,O,D.fontFamily||"sans-serif"].join(" ")}return T&&Object(ht.trim)(T)||D.textFont||D.font},$}(G.c),at={left:!0,right:1,center:1},gt={top:1,bottom:1,middle:1};function Tt(st){return bt(st),Object(ht.each)(st.rich,bt),st}function bt(st){if(st){st.font=lt.makeFont(st);var $=st.align;$==="middle"&&($="center"),st.align=$==null||at[$]?$:"left";var D=st.verticalAlign;D==="center"&&(D="middle"),st.verticalAlign=D==null||gt[D]?D:"top";var T=st.padding;T&&(st.padding=Object(ht.normalizeCssArray)(st.padding))}}function nt(st,$){return st==null||$<=0||st==="transparent"||st==="none"?null:st.image||st.colorStops?"#000":st}function W(st){return st==null||st==="none"?null:st.image||st.colorStops?"#000":st}function X(st,$,D){return $==="right"?st-D[1]:$==="center"?st+D[3]/2-D[1]/2:st+D[3]}function et(st){var $=st.text;return $!=null&&($+=""),$}function k(st){return!!(st.backgroundColor||st.borderWidth&&st.borderColor)}U.a=lt},eDfh:function(Ge,U,S){"use strict";S.d(U,"h",function(){return G}),S.d(U,"f",function(){return q}),S.d(U,"c",function(){return N}),S.d(U,"b",function(){return V}),S.d(U,"e",function(){return W}),S.d(U,"g",function(){return X}),S.d(U,"i",function(){return et}),S.d(U,"a",function(){return k}),S.d(U,"d",function(){return st});var B=S("dqUG"),mt=S("bYtY"),H=S("fWwa"),ht=S("4NO4"),y=S("IwbS"),ot=S("hhxK"),it={};function Q($,D){for(var T=0;T<H.g.length;T++){var O=H.g[T],C=D[O],L=$.ensureState(O);L.style=L.style||{},L.style.text=C}var w=$.currentStates.slice();$.clearStates(!0),$.setStyle({text:D.normal}),$.useStates(w,!0)}function Y($,D,T){var O=$.labelFetcher,C=$.labelDataIndex,L=$.labelDimIndex,w=D.normal,z;O&&(z=O.getFormattedLabel(C,"normal",null,L,w&&w.get("formatter"),T!=null?{interpolatedValue:T}:null)),z==null&&(z=Object(mt.isFunction)($.defaultText)?$.defaultText(C,$,T):$.defaultText);for(var pt={normal:z},At=0;At<H.g.length;At++){var rt=H.g[At],_t=D[rt];pt[rt]=Object(mt.retrieve2)(O?O.getFormattedLabel(C,rt,null,L,_t&&_t.get("formatter")):null,z)}return pt}function G($,D,T,O){T=T||it;for(var C=$ instanceof B.a,L=!1,w=0;w<H.a.length;w++){var z=D[H.a[w]];if(z&&z.getShallow("show")){L=!0;break}}var pt=C?$:$.getTextContent();if(L){C||(pt||(pt=new B.a,$.setTextContent(pt)),$.stateProxy&&(pt.stateProxy=$.stateProxy));var At=Y(T,D),rt=D.normal,_t=!!rt.getShallow("show"),xt=N(rt,O&&O.normal,T,!1,!C);xt.text=At.normal,C||$.setTextConfig(V(rt,T,!1));for(var w=0;w<H.g.length;w++){var ft=H.g[w],z=D[ft];if(z){var Mt=pt.ensureState(ft),K=!!Object(mt.retrieve2)(z.getShallow("show"),_t);if(K!==_t&&(Mt.ignore=!K),Mt.style=N(z,O&&O[ft],T,!0,!C),Mt.style.text=At[ft],!C){var R=$.ensureState(ft);R.textConfig=V(z,T,!0)}}}pt.silent=!!rt.getShallow("silent"),pt.style.x!=null&&(xt.x=pt.style.x),pt.style.y!=null&&(xt.y=pt.style.y),pt.ignore=!_t,pt.useStyle(xt),pt.dirty(),T.enableTextSetter&&(X(pt).setLabelText=function(tt){var Z=Y(T,D,tt);Q(pt,Z)})}else pt&&(pt.ignore=!0);$.dirty()}function q($,D){D=D||"label";for(var T={normal:$.getModel(D)},O=0;O<H.g.length;O++){var C=H.g[O];T[C]=$.getModel([C,D])}return T}function N($,D,T,O,C){var L={};return lt(L,$,T,O,C),D&&Object(mt.extend)(L,D),L}function V($,D,T){D=D||{};var O={},C,L=$.getShallow("rotate"),w=Object(mt.retrieve2)($.getShallow("distance"),T?null:5),z=$.getShallow("offset");return C=$.getShallow("position")||(T?null:"inside"),C==="outside"&&(C=D.defaultOutsidePosition||"top"),C!=null&&(O.position=C),z!=null&&(O.offset=z),L!=null&&(L*=Math.PI/180,O.rotation=L),w!=null&&(O.distance=w),O.outsideFill=$.get("color")==="inherit"?D.inheritColor||null:"auto",O}function lt($,D,T,O,C){T=T||it;var L=D.ecModel,w=L&&L.option.textStyle,z=at(D),pt;if(z){pt={};for(var At in z)if(z.hasOwnProperty(At)){var rt=D.getModel(["rich",At]);nt(pt[At]={},rt,w,T,O,C,!1,!0)}}pt&&($.rich=pt);var _t=D.get("overflow");_t&&($.overflow=_t);var xt=D.get("minMargin");xt!=null&&($.margin=xt),nt($,D,w,T,O,C,!0,!1)}function at($){for(var D;$&&$!==$.ecModel;){var T=($.option||it).rich;if(T){D=D||{};for(var O=Object(mt.keys)(T),C=0;C<O.length;C++){var L=O[C];D[L]=1}}$=$.parentModel}return D}var gt=["fontStyle","fontWeight","fontSize","fontFamily","textShadowColor","textShadowBlur","textShadowOffsetX","textShadowOffsetY"],Tt=["align","lineHeight","width","height","tag","verticalAlign"],bt=["padding","borderWidth","borderRadius","borderDashOffset","backgroundColor","borderColor","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY"];function nt($,D,T,O,C,L,w,z){T=!C&&T||it;var pt=O&&O.inheritColor,At=D.getShallow("color"),rt=D.getShallow("textBorderColor"),_t=Object(mt.retrieve2)(D.getShallow("opacity"),T.opacity);(At==="inherit"||At==="auto")&&(pt?At=pt:At=null),(rt==="inherit"||rt==="auto")&&(pt?rt=pt:rt=null),L||(At=At||T.color,rt=rt||T.textBorderColor),At!=null&&($.fill=At),rt!=null&&($.stroke=rt);var xt=Object(mt.retrieve2)(D.getShallow("textBorderWidth"),T.textBorderWidth);xt!=null&&($.lineWidth=xt);var ft=Object(mt.retrieve2)(D.getShallow("textBorderType"),T.textBorderType);ft!=null&&($.lineDash=ft);var Mt=Object(mt.retrieve2)(D.getShallow("textBorderDashOffset"),T.textBorderDashOffset);Mt!=null&&($.lineDashOffset=Mt),!C&&_t==null&&!z&&(_t=O&&O.defaultOpacity),_t!=null&&($.opacity=_t),!C&&!L&&$.fill==null&&O.inheritColor&&($.fill=O.inheritColor);for(var K=0;K<gt.length;K++){var R=gt[K],tt=Object(mt.retrieve2)(D.getShallow(R),T[R]);tt!=null&&($[R]=tt)}for(var K=0;K<Tt.length;K++){var R=Tt[K],tt=D.getShallow(R);tt!=null&&($[R]=tt)}if($.verticalAlign==null){var Z=D.getShallow("baseline");Z!=null&&($.verticalAlign=Z)}if(!w||!O.disableBox){for(var K=0;K<bt.length;K++){var R=bt[K],tt=D.getShallow(R);tt!=null&&($[R]=tt)}var ct=D.getShallow("borderType");ct!=null&&($.borderDash=ct),($.backgroundColor==="auto"||$.backgroundColor==="inherit")&&pt&&($.backgroundColor=pt),($.borderColor==="auto"||$.borderColor==="inherit")&&pt&&($.borderColor=pt)}}function W($,D){var T=D&&D.getModel("textStyle");return Object(mt.trim)([$.fontStyle||T&&T.getShallow("fontStyle")||"",$.fontWeight||T&&T.getShallow("fontWeight")||"",($.fontSize||T&&T.getShallow("fontSize")||12)+"px",$.fontFamily||T&&T.getShallow("fontFamily")||"sans-serif"].join(" "))}var X=Object(ht.o)();function et($,D,T,O){if(!!$){var C=X($);C.prevValue=C.value,C.value=T;var L=D.normal;C.valueAnimation=L.get("valueAnimation"),C.valueAnimation&&(C.precision=L.get("precision"),C.defaultInterpolatedText=O,C.statesModels=D)}}function k($,D,T,O,C){var L=X($);if(!L.valueAnimation)return;var w=L.defaultInterpolatedText,z=Object(mt.retrieve2)(L.interpolatedValue,L.prevValue),pt=L.value;function At(rt){var _t=Object(ht.k)(T,L.precision,z,pt,rt);L.interpolatedValue=rt===1?null:_t;var xt=Y({labelDataIndex:D,labelFetcher:C,defaultText:w?w(_t):_t+""},L.statesModels,_t);Q($,xt)}(z==null?y.initProps:y.updateProps)($,{},O,D,null,At)}function st($,D,T){Object(ot.a)($).dataIndex=D,Object(ot.a)($).dataType=T}},f66r:function(Ge,U,S){"use strict";S.d(U,"b",function(){return mt}),S.d(U,"a",function(){return H}),S.d(U,"c",function(){return at});/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var B=function(T,O){return B=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(C,L){C.__proto__=L}||function(C,L){for(var w in L)Object.prototype.hasOwnProperty.call(L,w)&&(C[w]=L[w])},B(T,O)};function mt(D,T){B(D,T);function O(){this.constructor=D}D.prototype=T===null?Object.create(T):(O.prototype=T.prototype,new O)}var H=function(){return H=Object.assign||function(O){for(var C,L=1,w=arguments.length;L<w;L++){C=arguments[L];for(var z in C)Object.prototype.hasOwnProperty.call(C,z)&&(O[z]=C[z])}return O},H.apply(this,arguments)};function ht(D,T){var O={};for(var C in D)Object.prototype.hasOwnProperty.call(D,C)&&T.indexOf(C)<0&&(O[C]=D[C]);if(D!=null&&typeof Object.getOwnPropertySymbols=="function")for(var L=0,C=Object.getOwnPropertySymbols(D);L<C.length;L++)T.indexOf(C[L])<0&&Object.prototype.propertyIsEnumerable.call(D,C[L])&&(O[C[L]]=D[C[L]]);return O}function y(D,T,O,C){var L=arguments.length,w=L<3?T:C===null?C=Object.getOwnPropertyDescriptor(T,O):C,z;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")w=Reflect.decorate(D,T,O,C);else for(var pt=D.length-1;pt>=0;pt--)(z=D[pt])&&(w=(L<3?z(w):L>3?z(T,O,w):z(T,O))||w);return L>3&&w&&Object.defineProperty(T,O,w),w}function ot(D,T){return function(O,C){T(O,C,D)}}function it(D,T){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(D,T)}function Q(D,T,O,C){function L(w){return w instanceof O?w:new O(function(z){z(w)})}return new(O||(O=Promise))(function(w,z){function pt(_t){try{rt(C.next(_t))}catch(xt){z(xt)}}function At(_t){try{rt(C.throw(_t))}catch(xt){z(xt)}}function rt(_t){_t.done?w(_t.value):L(_t.value).then(pt,At)}rt((C=C.apply(D,T||[])).next())})}function Y(D,T){var O={label:0,sent:function(){if(w[0]&1)throw w[1];return w[1]},trys:[],ops:[]},C,L,w,z;return z={next:pt(0),throw:pt(1),return:pt(2)},typeof Symbol=="function"&&(z[Symbol.iterator]=function(){return this}),z;function pt(rt){return function(_t){return At([rt,_t])}}function At(rt){if(C)throw new TypeError("Generator is already executing.");for(;O;)try{if(C=1,L&&(w=rt[0]&2?L.return:rt[0]?L.throw||((w=L.return)&&w.call(L),0):L.next)&&!(w=w.call(L,rt[1])).done)return w;switch(L=0,w&&(rt=[rt[0]&2,w.value]),rt[0]){case 0:case 1:w=rt;break;case 4:return O.label++,{value:rt[1],done:!1};case 5:O.label++,L=rt[1],rt=[0];continue;case 7:rt=O.ops.pop(),O.trys.pop();continue;default:if(w=O.trys,!(w=w.length>0&&w[w.length-1])&&(rt[0]===6||rt[0]===2)){O=0;continue}if(rt[0]===3&&(!w||rt[1]>w[0]&&rt[1]<w[3])){O.label=rt[1];break}if(rt[0]===6&&O.label<w[1]){O.label=w[1],w=rt;break}if(w&&O.label<w[2]){O.label=w[2],O.ops.push(rt);break}w[2]&&O.ops.pop(),O.trys.pop();continue}rt=T.call(D,O)}catch(_t){rt=[6,_t],L=0}finally{C=w=0}if(rt[0]&5)throw rt[1];return{value:rt[0]?rt[1]:void 0,done:!0}}}var G=Object.create?function(D,T,O,C){C===void 0&&(C=O),Object.defineProperty(D,C,{enumerable:!0,get:function(){return T[O]}})}:function(D,T,O,C){C===void 0&&(C=O),D[C]=T[O]};function q(D,T){for(var O in D)O!=="default"&&!Object.prototype.hasOwnProperty.call(T,O)&&G(T,D,O)}function N(D){var T=typeof Symbol=="function"&&Symbol.iterator,O=T&&D[T],C=0;if(O)return O.call(D);if(D&&typeof D.length=="number")return{next:function(){return D&&C>=D.length&&(D=void 0),{value:D&&D[C++],done:!D}}};throw new TypeError(T?"Object is not iterable.":"Symbol.iterator is not defined.")}function V(D,T){var O=typeof Symbol=="function"&&D[Symbol.iterator];if(!O)return D;var C=O.call(D),L,w=[],z;try{for(;(T===void 0||T-- >0)&&!(L=C.next()).done;)w.push(L.value)}catch(pt){z={error:pt}}finally{try{L&&!L.done&&(O=C.return)&&O.call(C)}finally{if(z)throw z.error}}return w}function lt(){for(var D=[],T=0;T<arguments.length;T++)D=D.concat(V(arguments[T]));return D}function at(){for(var D=0,T=0,O=arguments.length;T<O;T++)D+=arguments[T].length;for(var C=Array(D),L=0,T=0;T<O;T++)for(var w=arguments[T],z=0,pt=w.length;z<pt;z++,L++)C[L]=w[z];return C}function gt(D){return this instanceof gt?(this.v=D,this):new gt(D)}function Tt(D,T,O){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var C=O.apply(D,T||[]),L,w=[];return L={},z("next"),z("throw"),z("return"),L[Symbol.asyncIterator]=function(){return this},L;function z(ft){C[ft]&&(L[ft]=function(Mt){return new Promise(function(K,R){w.push([ft,Mt,K,R])>1||pt(ft,Mt)})})}function pt(ft,Mt){try{At(C[ft](Mt))}catch(K){xt(w[0][3],K)}}function At(ft){ft.value instanceof gt?Promise.resolve(ft.value.v).then(rt,_t):xt(w[0][2],ft)}function rt(ft){pt("next",ft)}function _t(ft){pt("throw",ft)}function xt(ft,Mt){ft(Mt),w.shift(),w.length&&pt(w[0][0],w[0][1])}}function bt(D){var T,O;return T={},C("next"),C("throw",function(L){throw L}),C("return"),T[Symbol.iterator]=function(){return this},T;function C(L,w){T[L]=D[L]?function(z){return(O=!O)?{value:gt(D[L](z)),done:L==="return"}:w?w(z):z}:w}}function nt(D){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var T=D[Symbol.asyncIterator],O;return T?T.call(D):(D=typeof N=="function"?N(D):D[Symbol.iterator](),O={},C("next"),C("throw"),C("return"),O[Symbol.asyncIterator]=function(){return this},O);function C(w){O[w]=D[w]&&function(z){return new Promise(function(pt,At){z=D[w](z),L(pt,At,z.done,z.value)})}}function L(w,z,pt,At){Promise.resolve(At).then(function(rt){w({value:rt,done:pt})},z)}}function W(D,T){return Object.defineProperty?Object.defineProperty(D,"raw",{value:T}):D.raw=T,D}var X=Object.create?function(D,T){Object.defineProperty(D,"default",{enumerable:!0,value:T})}:function(D,T){D.default=T};function et(D){if(D&&D.__esModule)return D;var T={};if(D!=null)for(var O in D)O!=="default"&&Object.prototype.hasOwnProperty.call(D,O)&&G(T,D,O);return X(T,D),T}function k(D){return D&&D.__esModule?D:{default:D}}function st(D,T){if(!T.has(D))throw new TypeError("attempted to get private field on non-instance");return T.get(D)}function $(D,T,O){if(!T.has(D))throw new TypeError("attempted to set private field on non-instance");return T.set(D,O),O}},fWwa:function(Ge,U,S){"use strict";S.d(U,"d",function(){return q}),S.d(U,"e",function(){return N}),S.d(U,"g",function(){return V}),S.d(U,"a",function(){return lt}),S.d(U,"j",function(){return at}),S.d(U,"c",function(){return Tt}),S.d(U,"b",function(){return bt}),S.d(U,"f",function(){return nt}),S.d(U,"i",function(){return W}),S.d(U,"h",function(){return X}),S.d(U,"H",function(){return At}),S.d(U,"G",function(){return R}),S.d(U,"r",function(){return ct}),S.d(U,"C",function(){return vt}),S.d(U,"q",function(){return Ct}),S.d(U,"B",function(){return Bt}),S.d(U,"s",function(){return It}),S.d(U,"D",function(){return Wt}),S.d(U,"k",function(){return ae}),S.d(U,"l",function(){return Le}),S.d(U,"m",function(){return _e}),S.d(U,"t",function(){return De}),S.d(U,"x",function(){return er}),S.d(U,"w",function(){return Ie}),S.d(U,"J",function(){return Fe}),S.d(U,"K",function(){return He}),S.d(U,"u",function(){return ur}),S.d(U,"o",function(){return br}),S.d(U,"p",function(){return kr}),S.d(U,"I",function(){return Qt}),S.d(U,"F",function(){return Yt}),S.d(U,"y",function(){return Zt}),S.d(U,"n",function(){return ce}),S.d(U,"v",function(){return xe}),S.d(U,"A",function(){return Kt}),S.d(U,"z",function(){return Rt}),S.d(U,"E",function(){return Jt});var B=S("1RvN"),mt=S("bYtY"),H=S("hhxK"),ht=S("Qe9p"),y=S("4NO4"),ot=S("y+Vt"),it=1,Q={},Y=Object(y.o)(),G=0,q=1,N=2,V=["emphasis","blur","select"],lt=["normal","emphasis","blur","select"],at=10,gt=9,Tt="highlight",bt="downplay",nt="select",W="unselect",X="toggleSelect";function et(Xt){return Xt!=null&&Xt!=="none"}var k=new B.a(100);function st(Xt){if(typeof Xt!="string")return Xt;var fe=k.get(Xt);return fe||(fe=ht.lift(Xt,-.1),k.put(Xt,fe)),fe}function $(Xt,fe,be){Xt.onHoverStateChange&&(Xt.hoverState||0)!==be&&Xt.onHoverStateChange(fe),Xt.hoverState=be}function D(Xt){$(Xt,"emphasis",N)}function T(Xt){Xt.hoverState===N&&$(Xt,"normal",G)}function O(Xt){$(Xt,"blur",q)}function C(Xt){Xt.hoverState===q&&$(Xt,"normal",G)}function L(Xt){Xt.selected=!0}function w(Xt){Xt.selected=!1}function z(Xt,fe,be){fe(Xt,be)}function pt(Xt,fe,be){z(Xt,fe,be),Xt.isGroup&&Xt.traverse(function(Ae){z(Ae,fe,be)})}function At(Xt,fe){switch(fe){case"emphasis":Xt.hoverState=N;break;case"normal":Xt.hoverState=G;break;case"blur":Xt.hoverState=q;break;case"select":Xt.selected=!0}}function rt(Xt){Xt.isGroup?Xt.traverse(function(fe){fe.clearStates()}):Xt.clearStates()}function _t(Xt,fe,be,Ae){for(var Ve=Xt.style,nr={},de=0;de<fe.length;de++){var _r=fe[de],Nr=Ve[_r];nr[_r]=Nr==null?Ae&&Ae[_r]:Nr}for(var de=0;de<Xt.animators.length;de++){var lr=Xt.animators[de];lr.__fromStateTransition&&lr.__fromStateTransition.indexOf(be)<0&&lr.targetName==="style"&&lr.saveFinalToTarget(nr,fe)}return nr}function xt(Xt,fe,be,Ae){var Ve=be&&Object(mt.indexOf)(be,"select")>=0,nr=!1;if(Xt instanceof ot.b){var de=Y(Xt),_r=Ve&&de.selectFill||de.normalFill,Nr=Ve&&de.selectStroke||de.normalStroke;if(et(_r)||et(Nr)){Ae=Ae||{};var lr=Ae.style||{};!et(lr.fill)&&et(_r)?(nr=!0,Ae=Object(mt.extend)({},Ae),lr=Object(mt.extend)({},lr),lr.fill=st(_r)):!et(lr.stroke)&&et(Nr)&&(nr||(Ae=Object(mt.extend)({},Ae),lr=Object(mt.extend)({},lr)),lr.stroke=st(Nr)),Ae.style=lr}}if(Ae&&Ae.z2==null){nr||(Ae=Object(mt.extend)({},Ae));var pr=Xt.z2EmphasisLift;Ae.z2=Xt.z2+(pr!=null?pr:at)}return Ae}function ft(Xt,fe,be){if(be&&be.z2==null){be=Object(mt.extend)({},be);var Ae=Xt.z2SelectLift;be.z2=Xt.z2+(Ae!=null?Ae:gt)}return be}function Mt(Xt,fe,be){var Ae=Object(mt.indexOf)(Xt.currentStates,fe)>=0,Ve=Xt.style.opacity,nr=Ae?null:_t(Xt,["opacity"],fe,{opacity:1});be=be||{};var de=be.style||{};return de.opacity==null&&(be=Object(mt.extend)({},be),de=Object(mt.extend)({opacity:Ae?Ve:nr.opacity*.1},de),be.style=de),be}function K(Xt,fe){var be=this.states[Xt];if(this.style){if(Xt==="emphasis")return xt(this,Xt,fe,be);if(Xt==="blur")return Mt(this,Xt,be);if(Xt==="select")return ft(this,Xt,be)}return be}function R(Xt){Xt.stateProxy=K;var fe=Xt.getTextContent(),be=Xt.getTextGuideLine();fe&&(fe.stateProxy=K),be&&(be.stateProxy=K)}function tt(Xt,fe){!ee(Xt,fe)&&!Xt.__highByOuter&&pt(Xt,D)}function Z(Xt,fe){!ee(Xt,fe)&&!Xt.__highByOuter&&pt(Xt,T)}function ct(Xt,fe){Xt.__highByOuter|=1<<(fe||0),pt(Xt,D)}function vt(Xt,fe){!(Xt.__highByOuter&=~(1<<(fe||0)))&&pt(Xt,T)}function Ct(Xt){pt(Xt,O)}function Bt(Xt){pt(Xt,C)}function It(Xt){pt(Xt,L)}function Wt(Xt){pt(Xt,w)}function ee(Xt,fe){return Xt.__highDownSilentOnTouch&&fe.zrByTouch}function ae(Xt){var fe=Xt.getModel();fe.eachComponent(function(be,Ae){var Ve=be==="series"?Xt.getViewOfSeriesModel(Ae):Xt.getViewOfComponentModel(Ae);Ve.group.traverse(function(nr){C(nr)})})}function ye(Xt,fe,be,Ae){var Ve=Ae.getModel();be=be||"coordinateSystem";function nr(lr,pr){for(var zn=0;zn<pr.length;zn++){var sa=lr.getItemGraphicEl(pr[zn]);sa&&Bt(sa)}}if(Xt!=null&&!(!fe||fe==="none")){var de=Ve.getSeriesByIndex(Xt),_r=de.coordinateSystem;_r&&_r.master&&(_r=_r.master);var Nr=[];Ve.eachSeries(function(lr){var pr=de===lr,zn=lr.coordinateSystem;zn&&zn.master&&(zn=zn.master);var sa=zn&&_r?zn===_r:pr;if(!(be==="series"&&!pr||be==="coordinateSystem"&&!sa||fe==="series"&&pr)){var Ze=Ae.getViewOfSeriesModel(lr);if(Ze.group.traverse(function(Ne){O(Ne)}),Object(mt.isArrayLike)(fe))nr(lr.getData(),fe);else if(Object(mt.isObject)(fe))for(var Ur=Object(mt.keys)(fe),qe=0;qe<Ur.length;qe++)nr(lr.getData(Ur[qe]),fe[Ur[qe]]);Nr.push(lr)}}),Ve.eachComponent(function(lr,pr){if(lr!=="series"){var zn=Ae.getViewOfComponentModel(pr);zn&&zn.blurSeries&&zn.blurSeries(Nr,Ve)}})}}function Le(Xt,fe,be){if(!(Xt==null||fe==null)){var Ae=be.getModel().getComponent(Xt,fe);if(!!Ae){var Ve=be.getViewOfComponentModel(Ae);!Ve||!Ve.focusBlurEnabled||Ve.group.traverse(function(nr){O(nr)})}}}function _e(Xt,fe,be){var Ae=Xt.seriesIndex,Ve=Xt.getData(fe.dataType),nr=Object(y.u)(Ve,fe);nr=(Object(mt.isArray)(nr)?nr[0]:nr)||0;var de=Ve.getItemGraphicEl(nr);if(!de)for(var _r=Ve.count(),Nr=0;!de&&Nr<_r;)de=Ve.getItemGraphicEl(Nr++);if(de){var lr=Object(H.a)(de);ye(Ae,lr.focus,lr.blurScope,be)}else{var pr=Xt.get(["emphasis","focus"]),zn=Xt.get(["emphasis","blurScope"]);pr!=null&&ye(Ae,pr,zn,be)}}function De(Xt,fe,be,Ae){var Ve={focusSelf:!1,dispatchers:null};if(Xt==null||Xt==="series"||fe==null||be==null)return Ve;var nr=Ae.getModel().getComponent(Xt,fe);if(!nr)return Ve;var de=Ae.getViewOfComponentModel(nr);if(!de||!de.findHighDownDispatchers)return Ve;for(var _r=de.findHighDownDispatchers(be),Nr,lr=0;lr<_r.length;lr++)if(Object(H.a)(_r[lr]).focus==="self"){Nr=!0;break}return{focusSelf:Nr,dispatchers:_r}}function er(Xt,fe,be){var Ae=Object(H.a)(Xt),Ve=De(Ae.componentMainType,Ae.componentIndex,Ae.componentHighDownName,be),nr=Ve.dispatchers,de=Ve.focusSelf;nr?(de&&Le(Ae.componentMainType,Ae.componentIndex,be),Object(mt.each)(nr,function(_r){return tt(_r,fe)})):(ye(Ae.seriesIndex,Ae.focus,Ae.blurScope,be),Ae.focus==="self"&&Le(Ae.componentMainType,Ae.componentIndex,be),tt(Xt,fe))}function Ie(Xt,fe,be){ae(be);var Ae=Object(H.a)(Xt),Ve=De(Ae.componentMainType,Ae.componentIndex,Ae.componentHighDownName,be).dispatchers;Ve?Object(mt.each)(Ve,function(nr){return Z(nr,fe)}):Z(Xt,fe)}function Fe(Xt,fe,be){if(!!Kt(fe)){var Ae=fe.dataType,Ve=Xt.getData(Ae),nr=Object(y.u)(Ve,fe);Object(mt.isArray)(nr)||(nr=[nr]),Xt[fe.type===X?"toggleSelect":fe.type===nt?"select":"unselect"](nr,Ae)}}function He(Xt){var fe=Xt.getAllData();Object(mt.each)(fe,function(be){var Ae=be.data,Ve=be.type;Ae.eachItemGraphicEl(function(nr,de){Xt.isSelected(de,Ve)?It(nr):Wt(nr)})})}function ur(Xt){var fe=[];return Xt.eachSeries(function(be){var Ae=be.getAllData();Object(mt.each)(Ae,function(Ve){var nr=Ve.data,de=Ve.type,_r=be.getSelectedDataIndices();if(_r.length>0){var Nr={dataIndex:_r,seriesIndex:be.seriesIndex};de!=null&&(Nr.dataType=de),fe.push(Nr)}})}),fe}function br(Xt,fe,be){Yt(Xt,!0),pt(Xt,R),kr(Xt,fe,be)}function kr(Xt,fe,be){var Ae=Object(H.a)(Xt);fe!=null?(Ae.focus=fe,Ae.blurScope=be):Ae.focus&&(Ae.focus=null)}var Xe=["emphasis","blur","select"],Ut={itemStyle:"getItemStyle",lineStyle:"getLineStyle",areaStyle:"getAreaStyle"};function Qt(Xt,fe,be,Ae){be=be||"itemStyle";for(var Ve=0;Ve<Xe.length;Ve++){var nr=Xe[Ve],de=fe.getModel([nr,be]),_r=Xt.ensureState(nr);_r.style=Ae?Ae(de):de[Ut[be]]()}}function Yt(Xt,fe){var be=fe===!1,Ae=Xt;Xt.highDownSilentOnTouch&&(Ae.__highDownSilentOnTouch=Xt.highDownSilentOnTouch),(!be||Ae.__highDownDispatcher)&&(Ae.__highByOuter=Ae.__highByOuter||0,Ae.__highDownDispatcher=!be)}function Zt(Xt){return!!(Xt&&Xt.__highDownDispatcher)}function ce(Xt,fe,be){var Ae=Object(H.a)(Xt);Ae.componentMainType=fe.mainType,Ae.componentIndex=fe.componentIndex,Ae.componentHighDownName=be}function xe(Xt){var fe=Q[Xt];return fe==null&&it<=32&&(fe=Q[Xt]=it++),fe}function Kt(Xt){var fe=Xt.type;return fe===nt||fe===W||fe===X}function Rt(Xt){var fe=Xt.type;return fe===Tt||fe===bt}function Jt(Xt){var fe=Y(Xt);fe.normalFill=Xt.style.fill,fe.normalStroke=Xt.style.stroke;var be=Xt.states.select||{};fe.selectFill=be.style&&be.style.fill||null,fe.selectStroke=be.style&&be.style.stroke||null}},gPAo:function(Ge,U,S){"use strict";function B(ht){return ht==null?0:ht.length||1}function mt(ht){return ht}var H=function(){function ht(y,ot,it,Q,Y,G){this._old=y,this._new=ot,this._oldKeyGetter=it||mt,this._newKeyGetter=Q||mt,this.context=Y,this._diffModeMultiple=G==="multiple"}return ht.prototype.add=function(y){return this._add=y,this},ht.prototype.update=function(y){return this._update=y,this},ht.prototype.updateManyToOne=function(y){return this._updateManyToOne=y,this},ht.prototype.updateOneToMany=function(y){return this._updateOneToMany=y,this},ht.prototype.remove=function(y){return this._remove=y,this},ht.prototype.execute=function(){this[this._diffModeMultiple?"_executeMultiple":"_executeOneToOne"]()},ht.prototype._executeOneToOne=function(){var y=this._old,ot=this._new,it={},Q=new Array(y.length),Y=new Array(ot.length);this._initIndexMap(y,null,Q,"_oldKeyGetter"),this._initIndexMap(ot,it,Y,"_newKeyGetter");for(var G=0;G<y.length;G++){var q=Q[G],N=it[q],V=B(N);if(V>1){var lt=N.shift();N.length===1&&(it[q]=N[0]),this._update&&this._update(lt,G)}else V===1?(it[q]=null,this._update&&this._update(N,G)):this._remove&&this._remove(G)}this._performRestAdd(Y,it)},ht.prototype._executeMultiple=function(){var y=this._old,ot=this._new,it={},Q={},Y=[],G=[];this._initIndexMap(y,it,Y,"_oldKeyGetter"),this._initIndexMap(ot,Q,G,"_newKeyGetter");for(var q=0;q<Y.length;q++){var N=Y[q],V=it[N],lt=Q[N],at=B(V),gt=B(lt);if(at>1&&gt===1)this._updateManyToOne&&this._updateManyToOne(lt,V),Q[N]=null;else if(at===1&&gt>1)this._updateOneToMany&&this._updateOneToMany(lt,V),Q[N]=null;else if(at===1&&gt===1)this._update&&this._update(lt,V),Q[N]=null;else if(at>1)for(var Tt=0;Tt<at;Tt++)this._remove&&this._remove(V[Tt]);else this._remove&&this._remove(V)}this._performRestAdd(G,Q)},ht.prototype._performRestAdd=function(y,ot){for(var it=0;it<y.length;it++){var Q=y[it],Y=ot[Q],G=B(Y);if(G>1)for(var q=0;q<G;q++)this._add&&this._add(Y[q]);else G===1&&this._add&&this._add(Y);ot[Q]=null}},ht.prototype._initIndexMap=function(y,ot,it,Q){for(var Y=this._diffModeMultiple,G=0;G<y.length;G++){var q="_ec_"+this[Q](y[G],G);if(Y||(it[G]=q),!!ot){var N=ot[q],V=B(N);V===0?(ot[q]=G,Y&&it.push(q)):V===1?ot[q]=[N,G]:N.push(G)}}},ht}();U.a=H},h7HQ:function(Ge,U,S){"use strict";var B=S("IaEH"),mt=S("y+Vt"),H=S("T6xi"),ht=function(){function ot(){this.points=null,this.smooth=0,this.smoothConstraint=null}return ot}(),y=function(ot){Object(B.a)(it,ot);function it(Q){return ot.call(this,Q)||this}return it.prototype.getDefaultShape=function(){return new ht},it.prototype.buildPath=function(Q,Y){H.a(Q,Y,!0)},it}(mt.b);y.prototype.type="polygon",U.a=y},hM6l:function(Ge,U,S){"use strict";var B=S("bYtY"),mt=S("OELB"),H=S("6GrX"),ht=S("4NO4"),y=S("aX7z"),ot=Object(ht.o)();function it(D){return D.type==="category"?Y(D):N(D)}function Q(D,T){return D.type==="category"?q(D,T):{ticks:B.map(D.scale.getTicks(),function(O){return O.value})}}function Y(D){var T=D.getLabelModel(),O=G(D,T);return!T.get("show")||D.scale.isBlank()?{labels:[],labelCategoryInterval:O.labelCategoryInterval}:O}function G(D,T){var O=V(D,"labels"),C=Object(y.e)(T),L=lt(O,C);if(L)return L;var w,z;return B.isFunction(C)?w=W(D,C):(z=C==="auto"?gt(D):C,w=nt(D,z)),at(O,C,{labels:w,labelCategoryInterval:z})}function q(D,T){var O=V(D,"ticks"),C=Object(y.e)(T),L=lt(O,C);if(L)return L;var w,z;if((!T.get("show")||D.scale.isBlank())&&(w=[]),B.isFunction(C))w=W(D,C,!0);else if(C==="auto"){var pt=G(D,D.getLabelModel());z=pt.labelCategoryInterval,w=B.map(pt.labels,function(At){return At.tickValue})}else z=C,w=nt(D,z,!0);return at(O,C,{ticks:w,tickCategoryInterval:z})}function N(D){var T=D.scale.getTicks(),O=Object(y.h)(D);return{labels:B.map(T,function(C,L){return{formattedLabel:O(C,L),rawLabel:D.scale.getLabel(C),tickValue:C.value}})}}function V(D,T){return ot(D)[T]||(ot(D)[T]=[])}function lt(D,T){for(var O=0;O<D.length;O++)if(D[O].key===T)return D[O].value}function at(D,T,O){return D.push({key:T,value:O}),O}function gt(D){var T=ot(D).autoInterval;return T!=null?T:ot(D).autoInterval=D.calculateCategoryInterval()}function Tt(D){var T=bt(D),O=Object(y.h)(D),C=(T.axisRotate-T.labelRotate)/180*Math.PI,L=D.scale,w=L.getExtent(),z=L.count();if(w[1]-w[0]<1)return 0;var pt=1;z>40&&(pt=Math.max(1,Math.floor(z/40)));for(var At=w[0],rt=D.dataToCoord(At+1)-D.dataToCoord(At),_t=Math.abs(rt*Math.cos(C)),xt=Math.abs(rt*Math.sin(C)),ft=0,Mt=0;At<=w[1];At+=pt){var K=0,R=0,tt=H.e(O({value:At}),T.font,"center","top");K=tt.width*1.3,R=tt.height*1.3,ft=Math.max(ft,K,7),Mt=Math.max(Mt,R,7)}var Z=ft/_t,ct=Mt/xt;isNaN(Z)&&(Z=Infinity),isNaN(ct)&&(ct=Infinity);var vt=Math.max(0,Math.floor(Math.min(Z,ct))),Ct=ot(D.model),Bt=D.getExtent(),It=Ct.lastAutoInterval,Wt=Ct.lastTickCount;return It!=null&&Wt!=null&&Math.abs(It-vt)<=1&&Math.abs(Wt-z)<=1&&It>vt&&Ct.axisExtent0===Bt[0]&&Ct.axisExtent1===Bt[1]?vt=It:(Ct.lastTickCount=z,Ct.lastAutoInterval=vt,Ct.axisExtent0=Bt[0],Ct.axisExtent1=Bt[1]),vt}function bt(D){var T=D.getLabelModel();return{axisRotate:D.getRotate?D.getRotate():D.isHorizontal&&!D.isHorizontal()?90:0,labelRotate:T.get("rotate")||0,font:T.getFont()}}function nt(D,T,O){var C=Object(y.h)(D),L=D.scale,w=L.getExtent(),z=D.getLabelModel(),pt=[],At=Math.max((T||0)+1,1),rt=w[0],_t=L.count();rt!==0&&At>1&&_t/At>2&&(rt=Math.round(Math.ceil(rt/At)*At));var xt=Object(y.j)(D),ft=z.get("showMinLabel")||xt,Mt=z.get("showMaxLabel")||xt;ft&&rt!==w[0]&&R(w[0]);for(var K=rt;K<=w[1];K+=At)R(K);Mt&&K-At!==w[1]&&R(w[1]);function R(tt){var Z={value:tt};pt.push(O?tt:{formattedLabel:C(Z),rawLabel:L.getLabel(Z),tickValue:tt})}return pt}function W(D,T,O){var C=D.scale,L=Object(y.h)(D),w=[];return B.each(C.getTicks(),function(z){var pt=C.getLabel(z),At=z.value;T(z.value,pt)&&w.push(O?At:{formattedLabel:L(z),rawLabel:pt,tickValue:At})}),w}var X=[0,1],et=function(){function D(T,O,C){this.onBand=!1,this.inverse=!1,this.dim=T,this.scale=O,this._extent=C||[0,0]}return D.prototype.contain=function(T){var O=this._extent,C=Math.min(O[0],O[1]),L=Math.max(O[0],O[1]);return T>=C&&T<=L},D.prototype.containData=function(T){return this.scale.contain(T)},D.prototype.getExtent=function(){return this._extent.slice()},D.prototype.getPixelPrecision=function(T){return Object(mt.e)(T||this.scale.getExtent(),this._extent)},D.prototype.setExtent=function(T,O){var C=this._extent;C[0]=T,C[1]=O},D.prototype.dataToCoord=function(T,O){var C=this._extent,L=this.scale;return T=L.normalize(T),this.onBand&&L.type==="ordinal"&&(C=C.slice(),k(C,L.count())),Object(mt.k)(T,X,C,O)},D.prototype.coordToData=function(T,O){var C=this._extent,L=this.scale;this.onBand&&L.type==="ordinal"&&(C=C.slice(),k(C,L.count()));var w=Object(mt.k)(T,C,X,O);return this.scale.scale(w)},D.prototype.pointToData=function(T,O){},D.prototype.getTicksCoords=function(T){T=T||{};var O=T.tickModel||this.getTickModel(),C=Q(this,O),L=C.ticks,w=Object(B.map)(L,function(pt){return{coord:this.dataToCoord(this.scale.type==="ordinal"?this.scale.getRawOrdinalNumber(pt):pt),tickValue:pt}},this),z=O.get("alignWithLabel");return st(this,w,z,T.clamp),w},D.prototype.getMinorTicksCoords=function(){if(this.scale.type==="ordinal")return[];var T=this.model.getModel("minorTick"),O=T.get("splitNumber");O>0&&O<100||(O=5);var C=this.scale.getMinorTicks(O),L=Object(B.map)(C,function(w){return Object(B.map)(w,function(z){return{coord:this.dataToCoord(z),tickValue:z}},this)},this);return L},D.prototype.getViewLabels=function(){return it(this).labels},D.prototype.getLabelModel=function(){return this.model.getModel("axisLabel")},D.prototype.getTickModel=function(){return this.model.getModel("axisTick")},D.prototype.getBandWidth=function(){var T=this._extent,O=this.scale.getExtent(),C=O[1]-O[0]+(this.onBand?1:0);C===0&&(C=1);var L=Math.abs(T[1]-T[0]);return Math.abs(L)/C},D.prototype.calculateCategoryInterval=function(){return Tt(this)},D}();function k(D,T){var O=D[1]-D[0],C=T,L=O/C/2;D[0]+=L,D[1]-=L}function st(D,T,O,C){var L=T.length;if(!D.onBand||O||!L)return;var w=D.getExtent(),z,pt;if(L===1)T[0].coord=w[0],z=T[1]={coord:w[0]};else{var At=T[L-1].tickValue-T[0].tickValue,rt=(T[L-1].coord-T[0].coord)/At;Object(B.each)(T,function(Mt){Mt.coord-=rt/2});var _t=D.scale.getExtent();pt=1+_t[1]-T[L-1].tickValue,z={coord:T[L-1].coord+rt*pt},T.push(z)}var xt=w[0]>w[1];ft(T[0].coord,w[0])&&(C?T[0].coord=w[0]:T.shift()),C&&ft(w[0],T[0].coord)&&T.unshift({coord:w[0]}),ft(w[1],z.coord)&&(C?z.coord=w[1]:T.pop()),C&&ft(z.coord,w[1])&&T.push({coord:w[1]});function ft(Mt,K){return Mt=Object(mt.u)(Mt),K=Object(mt.u)(K),xt?Mt>K:Mt<K}}var $=U.a=et},hX1E:function(Ge,U,S){"use strict";S.d(U,"a",function(){return mt});var B=Math.PI*2;function mt(H){return H%=B,H<0&&(H+=B),H}},hYLj:function(Ge,U,S){"use strict";var B=S("Fofx"),mt=S("QBsz"),H=B.identity,ht=5e-5;function y(q){return q>ht||q<-ht}var ot=[],it=[],Q=B.create(),Y=Math.abs,G=function(){function q(){}return q.prototype.setPosition=function(N){this.x=N[0],this.y=N[1]},q.prototype.setScale=function(N){this.scaleX=N[0],this.scaleY=N[1]},q.prototype.setOrigin=function(N){this.originX=N[0],this.originY=N[1]},q.prototype.needLocalTransform=function(){return y(this.rotation)||y(this.x)||y(this.y)||y(this.scaleX-1)||y(this.scaleY-1)},q.prototype.updateTransform=function(){var N=this.parent,V=N&&N.transform,lt=this.needLocalTransform(),at=this.transform;if(!(lt||V)){at&&H(at);return}at=at||B.create(),lt?this.getLocalTransform(at):H(at),V&&(lt?B.mul(at,N.transform,at):B.copy(at,N.transform)),this.transform=at,this._resolveGlobalScaleRatio(at)},q.prototype._resolveGlobalScaleRatio=function(N){var V=this.globalScaleRatio;if(V!=null&&V!==1){this.getGlobalScale(ot);var lt=ot[0]<0?-1:1,at=ot[1]<0?-1:1,gt=((ot[0]-lt)*V+lt)/ot[0]||0,Tt=((ot[1]-at)*V+at)/ot[1]||0;N[0]*=gt,N[1]*=gt,N[2]*=Tt,N[3]*=Tt}this.invTransform=this.invTransform||B.create(),B.invert(this.invTransform,N)},q.prototype.getLocalTransform=function(N){return q.getLocalTransform(this,N)},q.prototype.getComputedTransform=function(){for(var N=this,V=[];N;)V.push(N),N=N.parent;for(;N=V.pop();)N.updateTransform();return this.transform},q.prototype.setLocalTransform=function(N){if(!!N){var V=N[0]*N[0]+N[1]*N[1],lt=N[2]*N[2]+N[3]*N[3];y(V-1)&&(V=Math.sqrt(V)),y(lt-1)&&(lt=Math.sqrt(lt)),N[0]<0&&(V=-V),N[3]<0&&(lt=-lt),this.rotation=Math.atan2(-N[1]/lt,N[0]/V),V<0&&lt<0&&(this.rotation+=Math.PI,V=-V,lt=-lt),this.x=N[4],this.y=N[5],this.scaleX=V,this.scaleY=lt}},q.prototype.decomposeTransform=function(){if(!!this.transform){var N=this.parent,V=this.transform;N&&N.transform&&(B.mul(it,N.invTransform,V),V=it);var lt=this.originX,at=this.originY;(lt||at)&&(Q[4]=lt,Q[5]=at,B.mul(it,V,Q),it[4]-=lt,it[5]-=at,V=it),this.setLocalTransform(V)}},q.prototype.getGlobalScale=function(N){var V=this.transform;return N=N||[],V?(N[0]=Math.sqrt(V[0]*V[0]+V[1]*V[1]),N[1]=Math.sqrt(V[2]*V[2]+V[3]*V[3]),V[0]<0&&(N[0]=-N[0]),V[3]<0&&(N[1]=-N[1]),N):(N[0]=1,N[1]=1,N)},q.prototype.transformCoordToLocal=function(N,V){var lt=[N,V],at=this.invTransform;return at&&mt.applyTransform(lt,lt,at),lt},q.prototype.transformCoordToGlobal=function(N,V){var lt=[N,V],at=this.transform;return at&&mt.applyTransform(lt,lt,at),lt},q.prototype.getLineScale=function(){var N=this.transform;return N&&Y(N[0]-1)>1e-10&&Y(N[3]-1)>1e-10?Math.sqrt(Y(N[0]*N[3]-N[2]*N[1])):1},q.getLocalTransform=function(N,V){V=V||[],H(V);var lt=N.originX||0,at=N.originY||0,gt=N.scaleX,Tt=N.scaleY,bt=N.rotation||0,nt=N.x,W=N.y;return V[4]-=lt,V[5]-=at,V[0]*=gt,V[1]*=Tt,V[2]*=gt,V[3]*=Tt,V[4]*=gt,V[5]*=Tt,bt&&B.rotate(V,V,bt),V[4]+=lt,V[5]+=at,V[4]+=nt,V[5]+=W,V},q.initDefaultProps=function(){var N=q.prototype;N.x=0,N.y=0,N.scaleX=1,N.scaleY=1,N.originX=0,N.originY=0,N.rotation=0,N.globalScaleRatio=1}(),q}();U.a=G},hhxK:function(Ge,U,S){"use strict";S.d(U,"a",function(){return mt});var B=S("4NO4"),mt=Object(B.o)()},hyiK:function(Ge,U,S){"use strict";S.d(U,"a",function(){return B});function B(mt,H,ht,y,ot,it){if(it>H&&it>y||it<H&&it<y||y===H)return 0;var Q=(it-H)/(y-H),Y=y<H?1:-1;(Q===1||Q===0)&&(Y=y<H?.5:-.5);var G=Q*(ht-mt)+mt;return G===ot?Infinity:G>ot?Y:0}},iLNv:function(Ge,U,S){"use strict";S.d(U,"c",function(){return ht}),S.d(U,"b",function(){return y}),S.d(U,"a",function(){return ot});var B="\0__throttleOriginMethod",mt="\0__throttleRate",H="\0__throttleType";function ht(it,Q,Y){var G,q=0,N=0,V=null,lt,at,gt,Tt;Q=Q||0;function bt(){N=new Date().getTime(),V=null,it.apply(at,gt||[])}var nt=function(){for(var W=[],X=0;X<arguments.length;X++)W[X]=arguments[X];G=new Date().getTime(),at=this,gt=W;var et=Tt||Q,k=Tt||Y;Tt=null,lt=G-(k?q:N)-et,clearTimeout(V),k?V=setTimeout(bt,et):lt>=0?bt():V=setTimeout(bt,-lt),q=G};return nt.clear=function(){V&&(clearTimeout(V),V=null)},nt.debounceNextCall=function(W){Tt=W},nt}function y(it,Q,Y,G){var q=it[Q];if(!!q){var N=q[B]||q,V=q[H],lt=q[mt];if(lt!==Y||V!==G){if(Y==null||!G)return it[Q]=N;q=it[Q]=ht(N,Y,G==="debounce"),q[B]=N,q[H]=G,q[mt]=Y}return q}}function ot(it,Q){var Y=it[Q];Y&&Y[B]&&(it[Q]=Y[B])}},iRjW:function(Ge,U,S){"use strict";S.d(U,"c",function(){return ht}),S.d(U,"a",function(){return y}),S.d(U,"b",function(){return ot}),S.d(U,"d",function(){return it});var B=S("bYtY"),mt=S("Yl7c"),H=Math.round(Math.random()*10);function ht(Q){return[Q||"",H++].join("_")}function y(Q){var Y={};Q.registerSubTypeDefaulter=function(G,q){var N=Object(mt.f)(G);Y[N.main]=q},Q.determineSubType=function(G,q){var N=q.type;if(!N){var V=Object(mt.f)(G).main;Q.hasSubTypes(G)&&Y[V]&&(N=Y[V](q))}return N}}function ot(Q,Y){Q.topologicalTravel=function(V,lt,at,gt){if(!V.length)return;var Tt=G(lt),bt=Tt.graph,nt=Tt.noEntryList,W={};for(B.each(V,function(D){W[D]=!0});nt.length;){var X=nt.pop(),et=bt[X],k=!!W[X];k&&(at.call(gt,X,et.originalDeps.slice()),delete W[X]),B.each(et.successor,k?$:st)}B.each(W,function(){var D="";throw new Error(D)});function st(D){bt[D].entryCount--,bt[D].entryCount===0&&nt.push(D)}function $(D){W[D]=!0,st(D)}};function G(V){var lt={},at=[];return B.each(V,function(gt){var Tt=q(lt,gt),bt=Tt.originalDeps=Y(gt),nt=N(bt,V);Tt.entryCount=nt.length,Tt.entryCount===0&&at.push(gt),B.each(nt,function(W){B.indexOf(Tt.predecessor,W)<0&&Tt.predecessor.push(W);var X=q(lt,W);B.indexOf(X.successor,W)<0&&X.successor.push(gt)})}),{graph:lt,noEntryList:at}}function q(V,lt){return V[lt]||(V[lt]={predecessor:[],successor:[]}),V[lt]}function N(V,lt){var at=[];return B.each(V,function(gt){B.indexOf(lt,gt)>=0&&at.push(gt)}),at}}function it(Q,Y){return B.merge(B.merge({},Q,!0),Y,!0)}},ibaq:function(Ge,U,S){"use strict";S.d(U,"e",function(){return D}),S.d(U,"c",function(){return C}),S.d(U,"b",function(){return L}),S.d(U,"d",function(){return pt}),S.d(U,"a",function(){return At});var B=S("3Oj7"),mt=S("y+Vt"),H=S("1Jh7"),ht=S("IMiH"),y=S("hX1E"),ot=S("Sj9i"),it=S("bYtY"),Q=S("Fofx"),Y=S("QBsz"),G=S("fWwa"),q=Math.PI*2,N=ht.a.CMD,V=["top","right","bottom","left"];function lt(rt,_t,xt,ft,Mt){var K=xt.width,R=xt.height;switch(rt){case"top":ft.set(xt.x+K/2,xt.y-_t),Mt.set(0,-1);break;case"bottom":ft.set(xt.x+K/2,xt.y+R+_t),Mt.set(0,1);break;case"left":ft.set(xt.x-_t,xt.y+R/2),Mt.set(-1,0);break;case"right":ft.set(xt.x+K+_t,xt.y+R/2),Mt.set(1,0);break}}function at(rt,_t,xt,ft,Mt,K,R,tt,Z){R-=rt,tt-=_t;var ct=Math.sqrt(R*R+tt*tt);R/=ct,tt/=ct;var vt=R*xt+rt,Ct=tt*xt+_t;if(Math.abs(ft-Mt)%q<1e-4)return Z[0]=vt,Z[1]=Ct,ct-xt;if(K){var Bt=ft;ft=Object(y.a)(Mt),Mt=Object(y.a)(Bt)}else ft=Object(y.a)(ft),Mt=Object(y.a)(Mt);ft>Mt&&(Mt+=q);var It=Math.atan2(tt,R);if(It<0&&(It+=q),It>=ft&&It<=Mt||It+q>=ft&&It+q<=Mt)return Z[0]=vt,Z[1]=Ct,ct-xt;var Wt=xt*Math.cos(ft)+rt,ee=xt*Math.sin(ft)+_t,ae=xt*Math.cos(Mt)+rt,ye=xt*Math.sin(Mt)+_t,Le=(Wt-R)*(Wt-R)+(ee-tt)*(ee-tt),_e=(ae-R)*(ae-R)+(ye-tt)*(ye-tt);return Le<_e?(Z[0]=Wt,Z[1]=ee,Math.sqrt(Le)):(Z[0]=ae,Z[1]=ye,Math.sqrt(_e))}function gt(rt,_t,xt,ft,Mt,K,R,tt){var Z=Mt-rt,ct=K-_t,vt=xt-rt,Ct=ft-_t,Bt=Math.sqrt(vt*vt+Ct*Ct);vt/=Bt,Ct/=Bt;var It=Z*vt+ct*Ct,Wt=It/Bt;tt&&(Wt=Math.min(Math.max(Wt,0),1)),Wt*=Bt;var ee=R[0]=rt+Wt*vt,ae=R[1]=_t+Wt*Ct;return Math.sqrt((ee-Mt)*(ee-Mt)+(ae-K)*(ae-K))}function Tt(rt,_t,xt,ft,Mt,K,R){xt<0&&(rt=rt+xt,xt=-xt),ft<0&&(_t=_t+ft,ft=-ft);var tt=rt+xt,Z=_t+ft,ct=R[0]=Math.min(Math.max(Mt,rt),tt),vt=R[1]=Math.min(Math.max(K,_t),Z);return Math.sqrt((ct-Mt)*(ct-Mt)+(vt-K)*(vt-K))}var bt=[];function nt(rt,_t,xt){var ft=Tt(_t.x,_t.y,_t.width,_t.height,rt.x,rt.y,bt);return xt.set(bt[0],bt[1]),ft}function W(rt,_t,xt){for(var ft=0,Mt=0,K=0,R=0,tt,Z,ct=Infinity,vt=_t.data,Ct=rt.x,Bt=rt.y,It=0;It<vt.length;){var Wt=vt[It++];It===1&&(ft=vt[It],Mt=vt[It+1],K=ft,R=Mt);var ee=ct;switch(Wt){case N.M:K=vt[It++],R=vt[It++],ft=K,Mt=R;break;case N.L:ee=gt(ft,Mt,vt[It],vt[It+1],Ct,Bt,bt,!0),ft=vt[It++],Mt=vt[It++];break;case N.C:ee=Object(ot.e)(ft,Mt,vt[It++],vt[It++],vt[It++],vt[It++],vt[It],vt[It+1],Ct,Bt,bt),ft=vt[It++],Mt=vt[It++];break;case N.Q:ee=Object(ot.l)(ft,Mt,vt[It++],vt[It++],vt[It],vt[It+1],Ct,Bt,bt),ft=vt[It++],Mt=vt[It++];break;case N.A:var ae=vt[It++],ye=vt[It++],Le=vt[It++],_e=vt[It++],De=vt[It++],er=vt[It++];It+=1;var Ie=!!(1-vt[It++]);tt=Math.cos(De)*Le+ae,Z=Math.sin(De)*_e+ye,It<=1&&(K=tt,R=Z);var Fe=(Ct-ae)*_e/Le+ae;ee=at(ae,ye,_e,De,De+er,Ie,Fe,Bt,bt),ft=Math.cos(De+er)*Le+ae,Mt=Math.sin(De+er)*_e+ye;break;case N.R:K=ft=vt[It++],R=Mt=vt[It++];var He=vt[It++],ur=vt[It++];ee=Tt(K,R,He,ur,Ct,Bt,bt);break;case N.Z:ee=gt(ft,Mt,K,R,Ct,Bt,bt,!0),ft=K,Mt=R;break}ee<ct&&(ct=ee,xt.set(bt[0],bt[1]))}return ct}var X=new B.a,et=new B.a,k=new B.a,st=new B.a,$=new B.a;function D(rt,_t){if(!!rt){var xt=rt.getTextGuideLine(),ft=rt.getTextContent();if(!!(ft&&xt)){var Mt=rt.textGuideLineConfig||{},K=[[0,0],[0,0],[0,0]],R=Mt.candidates||V,tt=ft.getBoundingRect().clone();tt.applyTransform(ft.getComputedTransform());var Z=Infinity,ct=Mt.anchor,vt=rt.getComputedTransform(),Ct=vt&&Object(Q.invert)([],vt),Bt=_t.get("length2")||0;ct&&k.copy(ct);for(var It=0;It<R.length;It++){var Wt=R[It];lt(Wt,0,tt,X,st),B.a.scaleAndAdd(et,X,st,Bt),et.transform(Ct);var ee=rt.getBoundingRect(),ae=ct?ct.distance(et):rt instanceof mt.b?W(et,rt.path,k):nt(et,ee,k);ae<Z&&(Z=ae,et.transform(vt),k.transform(vt),k.toArray(K[0]),et.toArray(K[1]),X.toArray(K[2]))}C(K,_t.get("minTurnAngle")),xt.setShape({points:K})}}}var T=[],O=new B.a;function C(rt,_t){if(_t<=180&&_t>0){_t=_t/180*Math.PI,X.fromArray(rt[0]),et.fromArray(rt[1]),k.fromArray(rt[2]),B.a.sub(st,X,et),B.a.sub($,k,et);var xt=st.len(),ft=$.len();if(!(xt<.001||ft<.001)){st.scale(1/xt),$.scale(1/ft);var Mt=st.dot($),K=Math.cos(_t);if(K<Mt){var R=gt(et.x,et.y,k.x,k.y,X.x,X.y,T,!1);O.fromArray(T),O.scaleAndAdd($,R/Math.tan(Math.PI-_t));var tt=k.x!==et.x?(O.x-et.x)/(k.x-et.x):(O.y-et.y)/(k.y-et.y);if(isNaN(tt))return;tt<0?B.a.copy(O,et):tt>1&&B.a.copy(O,k),O.toArray(rt[1])}}}}function L(rt,_t,xt){if(xt<=180&&xt>0){xt=xt/180*Math.PI,X.fromArray(rt[0]),et.fromArray(rt[1]),k.fromArray(rt[2]),B.a.sub(st,et,X),B.a.sub($,k,et);var ft=st.len(),Mt=$.len();if(!(ft<.001||Mt<.001)){st.scale(1/ft),$.scale(1/Mt);var K=st.dot(_t),R=Math.cos(xt);if(K<R){var tt=gt(et.x,et.y,k.x,k.y,X.x,X.y,T,!1);O.fromArray(T);var Z=Math.PI/2,ct=Math.acos($.dot(_t)),vt=Z+ct-xt;if(vt>=Z)B.a.copy(O,k);else{O.scaleAndAdd($,tt/Math.tan(Math.PI/2-vt));var Ct=k.x!==et.x?(O.x-et.x)/(k.x-et.x):(O.y-et.y)/(k.y-et.y);if(isNaN(Ct))return;Ct<0?B.a.copy(O,et):Ct>1&&B.a.copy(O,k)}O.toArray(rt[1])}}}}function w(rt,_t,xt,ft){var Mt=xt==="normal",K=Mt?rt:rt.ensureState(xt);K.ignore=_t;var R=ft.get("smooth");R&&R===!0&&(R=.3),K.shape=K.shape||{},R>0&&(K.shape.smooth=R);var tt=ft.getModel("lineStyle").getLineStyle();Mt?rt.useStyle(tt):K.style=tt}function z(rt,_t){var xt=_t.smooth,ft=_t.points;if(!!ft)if(rt.moveTo(ft[0][0],ft[0][1]),xt>0&&ft.length>=3){var Mt=Y.dist(ft[0],ft[1]),K=Y.dist(ft[1],ft[2]);if(!Mt||!K){rt.lineTo(ft[1][0],ft[1][1]),rt.lineTo(ft[2][0],ft[2][1]);return}var R=Math.min(Mt,K)*xt,tt=Y.lerp([],ft[1],ft[0],R/Mt),Z=Y.lerp([],ft[1],ft[2],R/K),ct=Y.lerp([],tt,Z,.5);rt.bezierCurveTo(tt[0],tt[1],tt[0],tt[1],ct[0],ct[1]),rt.bezierCurveTo(Z[0],Z[1],Z[0],Z[1],ft[2][0],ft[2][1])}else for(var vt=1;vt<ft.length;vt++)rt.lineTo(ft[vt][0],ft[vt][1])}function pt(rt,_t,xt){var ft=rt.getTextGuideLine(),Mt=rt.getTextContent();if(!Mt){ft&&rt.removeTextGuideLine();return}for(var K=_t.normal,R=K.get("show"),tt=Mt.ignore,Z=0;Z<G.a.length;Z++){var ct=G.a[Z],vt=_t[ct],Ct=ct==="normal";if(vt){var Bt=vt.get("show"),It=Ct?tt:Object(it.retrieve2)(Mt.states[ct]&&Mt.states[ct].ignore,tt);if(It||!Object(it.retrieve2)(Bt,R)){var Wt=Ct?ft:ft&&ft.states.normal;Wt&&(Wt.ignore=!0);continue}ft||(ft=new H.a,rt.setTextGuideLine(ft),!Ct&&(tt||!R)&&w(ft,!0,"normal",_t.normal),rt.stateProxy&&(ft.stateProxy=rt.stateProxy)),w(ft,!1,ct,vt)}}if(ft){Object(it.defaults)(ft.style,xt),ft.style.fill=null;var ee=K.get("showAbove"),ae=rt.textGuideLineConfig=rt.textGuideLineConfig||{};ae.showAbove=ee||!1,ft.buildPath=z}}function At(rt,_t){_t=_t||"labelLine";for(var xt={normal:rt.getModel(_t)},ft=0;ft<G.g.length;ft++){var Mt=G.g[ft];xt[Mt]=rt.getModel([Mt,_t])}return xt}},ieMj:function(Ge,U,S){"use strict";var B=S("f66r"),mt=S("OELB"),H=S("7aKB"),ht=S("4NgU"),y=S("lE7J"),ot=mt.u,it=function(Q){Object(B.b)(Y,Q);function Y(){var G=Q!==null&&Q.apply(this,arguments)||this;return G.type="interval",G._interval=0,G._intervalPrecision=2,G}return Y.prototype.parse=function(G){return G},Y.prototype.contain=function(G){return y.a(G,this._extent)},Y.prototype.normalize=function(G){return y.d(G,this._extent)},Y.prototype.scale=function(G){return y.e(G,this._extent)},Y.prototype.setExtent=function(G,q){var N=this._extent;isNaN(G)||(N[0]=parseFloat(G)),isNaN(q)||(N[1]=parseFloat(q))},Y.prototype.unionExtent=function(G){var q=this._extent;G[0]<q[0]&&(q[0]=G[0]),G[1]>q[1]&&(q[1]=G[1]),this.setExtent(q[0],q[1])},Y.prototype.getInterval=function(){return this._interval},Y.prototype.setInterval=function(G){this._interval=G,this._niceExtent=this._extent.slice(),this._intervalPrecision=y.b(G)},Y.prototype.getTicks=function(G){var q=this._interval,N=this._extent,V=this._niceExtent,lt=this._intervalPrecision,at=[];if(!q)return at;var gt=1e4;N[0]<V[0]&&(G?at.push({value:ot(V[0]-q,lt)}):at.push({value:N[0]}));for(var Tt=V[0];Tt<=V[1]&&(at.push({value:Tt}),Tt=ot(Tt+q,lt),Tt!==at[at.length-1].value);)if(at.length>gt)return[];var bt=at.length?at[at.length-1].value:V[1];return N[1]>bt&&(G?at.push({value:ot(bt+q,lt)}):at.push({value:N[1]})),at},Y.prototype.getMinorTicks=function(G){for(var q=this.getTicks(!0),N=[],V=this.getExtent(),lt=1;lt<q.length;lt++){for(var at=q[lt],gt=q[lt-1],Tt=0,bt=[],nt=at.value-gt.value,W=nt/G;Tt<G-1;){var X=ot(gt.value+(Tt+1)*W);X>V[0]&&X<V[1]&&bt.push(X),Tt++}N.push(bt)}return N},Y.prototype.getLabel=function(G,q){if(G==null)return"";var N=q&&q.precision;N==null?N=mt.g(G.value)||0:N==="auto"&&(N=this._intervalPrecision);var V=ot(G.value,N,!0);return H.a(V)},Y.prototype.niceTicks=function(G,q,N){G=G||5;var V=this._extent,lt=V[1]-V[0];if(!!isFinite(lt)){lt<0&&(lt=-lt,V.reverse());var at=y.c(V,G,q,N);this._intervalPrecision=at.intervalPrecision,this._interval=at.interval,this._niceExtent=at.niceTickExtent}},Y.prototype.niceExtent=function(G){var q=this._extent;if(q[0]===q[1])if(q[0]!==0){var N=q[0];G.fixMax||(q[1]+=N/2),q[0]-=N/2}else q[1]=1;var V=q[1]-q[0];isFinite(V)||(q[0]=0,q[1]=1),this.niceTicks(G.splitNumber,G.minInterval,G.maxInterval);var lt=this._interval;G.fixMin||(q[0]=ot(Math.floor(q[0]/lt)*lt)),G.fixMax||(q[1]=ot(Math.ceil(q[1]/lt)*lt))},Y.type="interval",Y}(ht.a);ht.a.registerClass(it),U.a=it},j5sG:function(Ge,U,S){"use strict";Object.defineProperty(U,"__esModule",{value:!0}),U.createSensor=void 0;var B=mt(S("NohK"));function mt(ht){return ht&&ht.__esModule?ht:{default:ht}}var H=function(y){var ot=void 0,it=[],Q=(0,B.default)(function(){it.forEach(function(V){V(y)})}),Y=function(){var lt=new ResizeObserver(Q);return lt.observe(y),Q(),lt},G=function(lt){ot||(ot=Y()),it.indexOf(lt)===-1&&it.push(lt)},q=function(){ot.disconnect(),it=[],ot=void 0},N=function(lt){var at=it.indexOf(lt);at!==-1&&it.splice(at,1),it.length===0&&ot&&q()};return{element:y,bind:G,destroy:q,unbind:N}};U.createSensor=H},jCWc:function(Ge,U,S){"use strict";var B=S("cIOH"),mt=S.n(B),H=S("1GLa")},jTL6:function(Ge,U,S){"use strict";var B=S("IaEH"),mt=S("y+Vt"),H=function(){function y(){this.cx=0,this.cy=0,this.r=0,this.startAngle=0,this.endAngle=Math.PI*2,this.clockwise=!0}return y}(),ht=function(y){Object(B.a)(ot,y);function ot(it){return y.call(this,it)||this}return ot.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},ot.prototype.getDefaultShape=function(){return new H},ot.prototype.buildPath=function(it,Q){var Y=Q.cx,G=Q.cy,q=Math.max(Q.r,0),N=Q.startAngle,V=Q.endAngle,lt=Q.clockwise,at=Math.cos(N),gt=Math.sin(N);it.moveTo(at*q+Y,gt*q+G),it.arc(Y,G,q,N,V,!lt)},ot}(mt.b);ht.prototype.type="arc",U.a=ht},jkPA:function(Ge,U,S){"use strict";var B=S("bYtY"),mt=function(){function ht(y){this.categories=y.categories||[],this._needCollect=y.needCollect,this._deduplication=y.deduplication}return ht.createByAxisModel=function(y){var ot=y.option,it=ot.data,Q=it&&Object(B.map)(it,H);return new ht({categories:Q,needCollect:!Q,deduplication:ot.dedplication!==!1})},ht.prototype.getOrdinal=function(y){return this._getOrCreateMap().get(y)},ht.prototype.parseAndCollect=function(y){var ot,it=this._needCollect;if(typeof y!="string"&&!it)return y;if(it&&!this._deduplication)return ot=this.categories.length,this.categories[ot]=y,ot;var Q=this._getOrCreateMap();return ot=Q.get(y),ot==null&&(it?(ot=this.categories.length,this.categories[ot]=y,Q.set(y,ot)):ot=NaN),ot},ht.prototype._getOrCreateMap=function(){return this._map||(this._map=Object(B.createHashMap)(this.categories))},ht}();function H(ht){return Object(B.isObject)(ht)&&ht.value!=null?ht.value:ht+""}U.a=mt},kPKH:function(Ge,U,S){"use strict";var B=S("/kpp");U.a=B.a},lE7J:function(Ge,U,S){"use strict";S.d(U,"c",function(){return H}),S.d(U,"b",function(){return ht}),S.d(U,"a",function(){return it}),S.d(U,"d",function(){return Q}),S.d(U,"e",function(){return Y});var B=S("OELB"),mt=B.u;function H(G,q,N,V){var lt={},at=G[1]-G[0],gt=lt.interval=B.l(at/q,!0);N!=null&&gt<N&&(gt=lt.interval=N),V!=null&&gt>V&&(gt=lt.interval=V);var Tt=lt.intervalPrecision=ht(gt),bt=lt.niceTickExtent=[mt(Math.ceil(G[0]/gt)*gt,Tt),mt(Math.floor(G[1]/gt)*gt,Tt)];return ot(bt,G),lt}function ht(G){return B.g(G)+2}function y(G,q,N){G[q]=Math.max(Math.min(G[q],N[1]),N[0])}function ot(G,q){!isFinite(G[0])&&(G[0]=q[0]),!isFinite(G[1])&&(G[1]=q[1]),y(G,0,q),y(G,1,q),G[0]>G[1]&&(G[0]=G[1])}function it(G,q){return G>=q[0]&&G<=q[1]}function Q(G,q){return q[1]===q[0]?.5:(G-q[0])/(q[1]-q[0])}function Y(G,q){return G*(q[1]-q[0])+q[0]}},loD1:function(Ge,U,S){"use strict";S.d(U,"a",function(){return B});function B(mt,H,ht,y,ot,it,Q){if(ot===0)return!1;var Y=ot,G=0,q=mt;if(Q>H+Y&&Q>y+Y||Q<H-Y&&Q<y-Y||it>mt+Y&&it>ht+Y||it<mt-Y&&it<ht-Y)return!1;if(mt!==ht)G=(H-y)/(mt-ht),q=(mt*y-ht*H)/(mt-ht);else return Math.abs(it-mt)<=Y/2;var N=G*it-Q+q,V=N*N/(G*G+1);return V<=Y/2*Y/2}},mFDi:function(Ge,U,S){"use strict";var B=S("Fofx"),mt=S("3Oj7"),H=Math.min,ht=Math.max,y=new mt.a,ot=new mt.a,it=new mt.a,Q=new mt.a,Y=new mt.a,G=new mt.a,q=function(){function N(V,lt,at,gt){at<0&&isFinite(at)&&(V=V+at,at=-at),gt<0&&isFinite(gt)&&(lt=lt+gt,gt=-gt),this.x=V,this.y=lt,this.width=at,this.height=gt}return N.prototype.union=function(V){var lt=H(V.x,this.x),at=H(V.y,this.y);isFinite(this.x)&&isFinite(this.width)?this.width=ht(V.x+V.width,this.x+this.width)-lt:this.width=V.width,isFinite(this.y)&&isFinite(this.height)?this.height=ht(V.y+V.height,this.y+this.height)-at:this.height=V.height,this.x=lt,this.y=at},N.prototype.applyTransform=function(V){N.applyTransform(this,this,V)},N.prototype.calculateTransform=function(V){var lt=this,at=V.width/lt.width,gt=V.height/lt.height,Tt=B.create();return B.translate(Tt,Tt,[-lt.x,-lt.y]),B.scale(Tt,Tt,[at,gt]),B.translate(Tt,Tt,[V.x,V.y]),Tt},N.prototype.intersect=function(V,lt){if(!V)return!1;V instanceof N||(V=N.create(V));var at=this,gt=at.x,Tt=at.x+at.width,bt=at.y,nt=at.y+at.height,W=V.x,X=V.x+V.width,et=V.y,k=V.y+V.height,st=!(Tt<W||X<gt||nt<et||k<bt);if(lt){var $=Infinity,D=0,T=Math.abs(Tt-W),O=Math.abs(X-gt),C=Math.abs(nt-et),L=Math.abs(k-bt),w=Math.min(T,O),z=Math.min(C,L);Tt<W||X<gt?w>D&&(D=w,T<O?mt.a.set(G,-T,0):mt.a.set(G,O,0)):w<$&&($=w,T<O?mt.a.set(Y,T,0):mt.a.set(Y,-O,0)),nt<et||k<bt?z>D&&(D=z,C<L?mt.a.set(G,0,-C):mt.a.set(G,0,L)):w<$&&($=w,C<L?mt.a.set(Y,0,C):mt.a.set(Y,0,-L))}return lt&&mt.a.copy(lt,st?Y:G),st},N.prototype.contain=function(V,lt){var at=this;return V>=at.x&&V<=at.x+at.width&&lt>=at.y&&lt<=at.y+at.height},N.prototype.clone=function(){return new N(this.x,this.y,this.width,this.height)},N.prototype.copy=function(V){N.copy(this,V)},N.prototype.plain=function(){return{x:this.x,y:this.y,width:this.width,height:this.height}},N.prototype.isFinite=function(){return isFinite(this.x)&&isFinite(this.y)&&isFinite(this.width)&&isFinite(this.height)},N.prototype.isZero=function(){return this.width===0||this.height===0},N.create=function(V){return new N(V.x,V.y,V.width,V.height)},N.copy=function(V,lt){V.x=lt.x,V.y=lt.y,V.width=lt.width,V.height=lt.height},N.applyTransform=function(V,lt,at){if(!at){V!==lt&&N.copy(V,lt);return}if(at[1]<1e-5&&at[1]>-1e-5&&at[2]<1e-5&&at[2]>-1e-5){var gt=at[0],Tt=at[3],bt=at[4],nt=at[5];V.x=lt.x*gt+bt,V.y=lt.y*Tt+nt,V.width=lt.width*gt,V.height=lt.height*Tt,V.width<0&&(V.x+=V.width,V.width=-V.width),V.height<0&&(V.y+=V.height,V.height=-V.height);return}y.x=it.x=lt.x,y.y=Q.y=lt.y,ot.x=Q.x=lt.x+lt.width,ot.y=it.y=lt.y+lt.height,y.transform(at),Q.transform(at),ot.transform(at),it.transform(at),V.x=H(y.x,ot.x,it.x,Q.x),V.y=H(y.y,ot.y,it.y,Q.y);var W=ht(y.x,ot.x,it.x,Q.x),X=ht(y.y,ot.y,it.y,Q.y);V.width=W-V.x,V.height=X-V.y},N}();U.a=q},mLcG:function(Ge,U,S){"use strict";var B;B=typeof window!="undefined"&&(window.requestAnimationFrame&&window.requestAnimationFrame.bind(window)||window.msRequestAnimationFrame&&window.msRequestAnimationFrame.bind(window)||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame)||function(mt){return setTimeout(mt,16)},U.a=B},mYpf:function(Ge,U,S){"use strict";S.d(U,"a",function(){return H});var B=S("dqUG"),mt=S("7a4p");function H(ht,y,ot,it,Q,Y,G,q){Object(mt.a)("getTextRect is deprecated.");var N=new B.a({style:{text:ht,font:y,align:ot,verticalAlign:it,padding:Q,rich:Y,overflow:G?"truncate":null,lineHeight:q}});return N.getBoundingRect()}},n7yn:function(Ge,U,S){"use strict";S.d(U,"a",function(){return mt});var B=S("bYtY");function mt(y){return new H(y)}var H=function(){function y(ot){ot=ot||{},this._reset=ot.reset,this._plan=ot.plan,this._count=ot.count,this._onDirty=ot.onDirty,this._dirty=!0}return y.prototype.perform=function(ot){var it=this._upstream,Q=ot&&ot.skip;if(this._dirty&&it){var Y=this.context;Y.data=Y.outputData=it.context.outputData}this.__pipeline&&(this.__pipeline.currentTask=this);var G;this._plan&&!Q&&(G=this._plan(this.context));var q=at(this._modBy),N=this._modDataCount||0,V=at(ot&&ot.modBy),lt=ot&&ot.modDataCount||0;(q!==V||N!==lt)&&(G="reset");function at(k){return!(k>=1)&&(k=1),k}var gt;(this._dirty||G==="reset")&&(this._dirty=!1,gt=this._doReset(Q)),this._modBy=V,this._modDataCount=lt;var Tt=ot&&ot.step;if(it?this._dueEnd=it._outputDueEnd:this._dueEnd=this._count?this._count(this.context):Infinity,this._progress){var bt=this._dueIndex,nt=Math.min(Tt!=null?this._dueIndex+Tt:Infinity,this._dueEnd);if(!Q&&(gt||bt<nt)){var W=this._progress;if(Object(B.isArray)(W))for(var X=0;X<W.length;X++)this._doProgress(W[X],bt,nt,V,lt);else this._doProgress(W,bt,nt,V,lt)}this._dueIndex=nt;var et=this._settedOutputEnd!=null?this._settedOutputEnd:nt;this._outputDueEnd=et}else this._dueIndex=this._outputDueEnd=this._settedOutputEnd!=null?this._settedOutputEnd:this._dueEnd;return this.unfinished()},y.prototype.dirty=function(){this._dirty=!0,this._onDirty&&this._onDirty(this.context)},y.prototype._doProgress=function(ot,it,Q,Y,G){ht.reset(it,Q,Y,G),this._callingProgress=ot,this._callingProgress({start:it,end:Q,count:Q-it,next:ht.next},this.context)},y.prototype._doReset=function(ot){this._dueIndex=this._outputDueEnd=this._dueEnd=0,this._settedOutputEnd=null;var it,Q;!ot&&this._reset&&(it=this._reset(this.context),it&&it.progress&&(Q=it.forceFirstProgress,it=it.progress),Object(B.isArray)(it)&&!it.length&&(it=null)),this._progress=it,this._modBy=this._modDataCount=null;var Y=this._downstream;return Y&&Y.dirty(),Q},y.prototype.unfinished=function(){return this._progress&&this._dueIndex<this._dueEnd},y.prototype.pipe=function(ot){(this._downstream!==ot||this._dirty)&&(this._downstream=ot,ot._upstream=this,ot.dirty())},y.prototype.dispose=function(){this._disposed||(this._upstream&&(this._upstream._downstream=null),this._downstream&&(this._downstream._upstream=null),this._dirty=!1,this._disposed=!0)},y.prototype.getUpstream=function(){return this._upstream},y.prototype.getDownstream=function(){return this._downstream},y.prototype.setOutputEnd=function(ot){this._outputDueEnd=this._settedOutputEnd=ot},y}(),ht=function(){var y,ot,it,Q,Y,G={reset:function(V,lt,at,gt){ot=V,y=lt,it=at,Q=gt,Y=Math.ceil(Q/it),G.next=it>1&&Q>0?N:q}};return G;function q(){return ot<y?ot++:null}function N(){var V=ot%Y*it+Math.ceil(ot/Y),lt=ot>=y?null:V<Q?V:ot;return ot++,lt}}()},nPnh:function(Ge,U,S){"use strict";S.d(U,"b",function(){return mt}),S.d(U,"c",function(){return H}),S.d(U,"a",function(){return ht});var B=Math.round;function mt(y,ot,it){if(!!ot){var Q=ot.x1,Y=ot.x2,G=ot.y1,q=ot.y2;y.x1=Q,y.x2=Y,y.y1=G,y.y2=q;var N=it&&it.lineWidth;return N&&(B(Q*2)===B(Y*2)&&(y.x1=y.x2=ht(Q,N,!0)),B(G*2)===B(q*2)&&(y.y1=y.y2=ht(G,N,!0))),y}}function H(y,ot,it){if(!!ot){var Q=ot.x,Y=ot.y,G=ot.width,q=ot.height;y.x=Q,y.y=Y,y.width=G,y.height=q;var N=it&&it.lineWidth;return N&&(y.x=ht(Q,N,!0),y.y=ht(Y,N,!0),y.width=Math.max(ht(Q+G,N,!1)-y.x,G===0?0:1),y.height=Math.max(ht(Y+q,N,!1)-y.y,q===0?0:1)),y}}function ht(y,ot,it){if(!ot)return y;var Q=B(y*2);return(Q+B(ot))%2==0?Q/2:(Q+(it?1:-1))/2}},nVfU:function(Ge,U,S){"use strict";S.d(U,"a",function(){return G}),S.d(U,"e",function(){return q}),S.d(U,"d",function(){return V}),S.d(U,"f",function(){return at}),S.d(U,"c",function(){return gt}),S.d(U,"b",function(){return Tt});var B=S("bYtY"),mt=S("OELB"),H=S("7hqr"),ht=S("zM3Q"),y="__ec_stack_",ot=.5,it=typeof Float32Array!="undefined"?Float32Array:Array;function Q(X){return X.get("stack")||y+X.seriesIndex}function Y(X){return X.dim+X.index}function G(X){var et=[],k=X.axis,st="axis0";if(k.type==="category"){for(var $=k.getBandWidth(),D=0;D<X.count;D++)et.push(B.defaults({bandWidth:$,axisKey:st,stackId:y+D},X));for(var T=lt(et),O=[],D=0;D<X.count;D++){var C=T[st][y+D];C.offsetCenter=C.offset+C.width/2,O.push(C)}return O}}function q(X,et){var k=[];return et.eachSeriesByType(X,function(st){bt(st)&&!nt(st)&&k.push(st)}),k}function N(X){var et={};B.each(X,function(C){var L=C.coordinateSystem,w=L.getBaseAxis();if(!(w.type!=="time"&&w.type!=="value"))for(var z=C.getData(),pt=w.dim+"_"+w.index,At=z.mapDimension(w.dim),rt=0,_t=z.count();rt<_t;++rt){var xt=z.get(At,rt);et[pt]?et[pt].push(xt):et[pt]=[xt]}});var k={};for(var st in et)if(et.hasOwnProperty(st)){var $=et[st];if($){$.sort(function(C,L){return C-L});for(var D=null,T=1;T<$.length;++T){var O=$[T]-$[T-1];O>0&&(D=D===null?O:Math.min(D,O))}k[st]=D}}return k}function V(X){var et=N(X),k=[];return B.each(X,function(st){var $=st.coordinateSystem,D=$.getBaseAxis(),T=D.getExtent(),O;if(D.type==="category")O=D.getBandWidth();else if(D.type==="value"||D.type==="time"){var C=D.dim+"_"+D.index,L=et[C],w=Math.abs(T[1]-T[0]),z=D.scale.getExtent(),pt=Math.abs(z[1]-z[0]);O=L?w/pt*L:w}else{var At=st.getData();O=Math.abs(T[1]-T[0])/At.count()}var rt=Object(mt.o)(st.get("barWidth"),O),_t=Object(mt.o)(st.get("barMaxWidth"),O),xt=Object(mt.o)(st.get("barMinWidth")||1,O),ft=st.get("barGap"),Mt=st.get("barCategoryGap");k.push({bandWidth:O,barWidth:rt,barMaxWidth:_t,barMinWidth:xt,barGap:ft,barCategoryGap:Mt,axisKey:Y(D),stackId:Q(st)})}),lt(k)}function lt(X){var et={};B.each(X,function(st,$){var D=st.axisKey,T=st.bandWidth,O=et[D]||{bandWidth:T,remainedWidth:T,autoWidthCount:0,categoryGap:null,gap:"20%",stacks:{}},C=O.stacks;et[D]=O;var L=st.stackId;C[L]||O.autoWidthCount++,C[L]=C[L]||{width:0,maxWidth:0};var w=st.barWidth;w&&!C[L].width&&(C[L].width=w,w=Math.min(O.remainedWidth,w),O.remainedWidth-=w);var z=st.barMaxWidth;z&&(C[L].maxWidth=z);var pt=st.barMinWidth;pt&&(C[L].minWidth=pt);var At=st.barGap;At!=null&&(O.gap=At);var rt=st.barCategoryGap;rt!=null&&(O.categoryGap=rt)});var k={};return B.each(et,function(st,$){k[$]={};var D=st.stacks,T=st.bandWidth,O=st.categoryGap;if(O==null){var C=B.keys(D).length;O=Math.max(35-C*4,15)+"%"}var L=Object(mt.o)(O,T),w=Object(mt.o)(st.gap,1),z=st.remainedWidth,pt=st.autoWidthCount,At=(z-L)/(pt+(pt-1)*w);At=Math.max(At,0),B.each(D,function(ft){var Mt=ft.maxWidth,K=ft.minWidth;if(ft.width){var R=ft.width;Mt&&(R=Math.min(R,Mt)),K&&(R=Math.max(R,K)),ft.width=R,z-=R+w*R,pt--}else{var R=At;Mt&&Mt<R&&(R=Math.min(Mt,z)),K&&K>R&&(R=K),R!==At&&(ft.width=R,z-=R+w*R,pt--)}}),At=(z-L)/(pt+(pt-1)*w),At=Math.max(At,0);var rt=0,_t;B.each(D,function(ft,Mt){ft.width||(ft.width=At),_t=ft,rt+=ft.width*(1+w)}),_t&&(rt-=_t.width*w);var xt=-rt/2;B.each(D,function(ft,Mt){k[$][Mt]=k[$][Mt]||{bandWidth:T,offset:xt,width:ft.width},xt+=ft.width*(1+w)})}),k}function at(X,et,k){if(X&&et){var st=X[Y(et)];return st!=null&&k!=null?st[Q(k)]:st}}function gt(X,et){var k=q(X,et),st=V(k),$={};B.each(k,function(D){var T=D.getData(),O=D.coordinateSystem,C=O.getBaseAxis(),L=Q(D),w=st[Y(C)][L],z=w.offset,pt=w.width,At=O.getOtherAxis(C),rt=D.get("barMinHeight")||0;$[L]=$[L]||[],T.setLayout({bandWidth:w.bandWidth,offset:z,size:pt});for(var _t=T.mapDimension(At.dim),xt=T.mapDimension(C.dim),ft=Object(H.c)(T,_t),Mt=At.isHorizontal(),K=W(C,At,ft),R=0,tt=T.count();R<tt;R++){var Z=T.get(_t,R),ct=T.get(xt,R),vt=Z>=0?"p":"n",Ct=K;ft&&($[L][ct]||($[L][ct]={p:K,n:K}),Ct=$[L][ct][vt]);var Bt=void 0,It=void 0,Wt=void 0,ee=void 0;if(Mt){var ae=O.dataToPoint([Z,ct]);Bt=Ct,It=ae[1]+z,Wt=ae[0]-K,ee=pt,Math.abs(Wt)<rt&&(Wt=(Wt<0?-1:1)*rt),isNaN(Wt)||ft&&($[L][ct][vt]+=Wt)}else{var ae=O.dataToPoint([ct,Z]);Bt=ae[0]+z,It=Ct,Wt=pt,ee=ae[1]-K,Math.abs(ee)<rt&&(ee=(ee<=0?-1:1)*rt),isNaN(ee)||ft&&($[L][ct][vt]+=ee)}T.setItemLayout(R,{x:Bt,y:It,width:Wt,height:ee})}})}var Tt={seriesType:"bar",plan:Object(ht.a)(),reset:function(X){if(!(!bt(X)||!nt(X))){var et=X.getData(),k=X.coordinateSystem,st=k.master.getRect(),$=k.getBaseAxis(),D=k.getOtherAxis($),T=et.mapDimension(D.dim),O=et.mapDimension($.dim),C=D.isHorizontal(),L=C?0:1,w=at(V([X]),$,X).width;return w>ot||(w=ot),{progress:function(z,pt){for(var At=z.count,rt=new it(At*2),_t=new it(At*2),xt=new it(At),ft,Mt=[],K=[],R=0,tt=0;(ft=z.next())!=null;)K[L]=pt.get(T,ft),K[1-L]=pt.get(O,ft),Mt=k.dataToPoint(K,null,Mt),_t[R]=C?st.x+st.width:Mt[0],rt[R++]=Mt[0],_t[R]=C?Mt[1]:st.y+st.height,rt[R++]=Mt[1],xt[tt++]=ft;pt.setLayout({largePoints:rt,largeDataIndices:xt,largeBackgroundPoints:_t,barWidth:w,valueAxisStart:W($,D,!1),backgroundStart:C?st.x:st.y,valueAxisHorizontal:C})}}}}};function bt(X){return X.coordinateSystem&&X.coordinateSystem.type==="cartesian2d"}function nt(X){return X.pipelineContext&&X.pipelineContext.large}function W(X,et,k){return et.toGlobalCoord(et.dataToCoord(et.type==="log"?1:0))}},oVpE:function(Ge,U,S){"use strict";S.d(U,"b",function(){return at}),S.d(U,"a",function(){return bt});var B=S("bYtY"),mt=S("y+Vt"),H=S("yxFR"),ht=S("x6Kt"),y=S("2fw6"),ot=S("IwbS"),it=S("mFDi"),Q=S("6GrX"),Y=mt.b.extend({type:"triangle",shape:{cx:0,cy:0,width:0,height:0},buildPath:function(nt,W){var X=W.cx,et=W.cy,k=W.width/2,st=W.height/2;nt.moveTo(X,et-st),nt.lineTo(X+k,et+st),nt.lineTo(X-k,et+st),nt.closePath()}}),G=mt.b.extend({type:"diamond",shape:{cx:0,cy:0,width:0,height:0},buildPath:function(nt,W){var X=W.cx,et=W.cy,k=W.width/2,st=W.height/2;nt.moveTo(X,et-st),nt.lineTo(X+k,et),nt.lineTo(X,et+st),nt.lineTo(X-k,et),nt.closePath()}}),q=mt.b.extend({type:"pin",shape:{x:0,y:0,width:0,height:0},buildPath:function(nt,W){var X=W.x,et=W.y,k=W.width/5*3,st=Math.max(k,W.height),$=k/2,D=$*$/(st-$),T=et-st+$+D,O=Math.asin(D/$),C=Math.cos(O)*$,L=Math.sin(O),w=Math.cos(O),z=$*.6,pt=$*.7;nt.moveTo(X-C,T+D),nt.arc(X,T,$,Math.PI-O,Math.PI*2+O),nt.bezierCurveTo(X+C-L*z,T+D+w*z,X,et-pt,X,et),nt.bezierCurveTo(X,et-pt,X-C+L*z,T+D+w*z,X-C,T+D),nt.closePath()}}),N=mt.b.extend({type:"arrow",shape:{x:0,y:0,width:0,height:0},buildPath:function(nt,W){var X=W.height,et=W.width,k=W.x,st=W.y,$=et/3*2;nt.moveTo(k,st),nt.lineTo(k+$,st+X),nt.lineTo(k,st+X/4*3),nt.lineTo(k-$,st+X),nt.lineTo(k,st),nt.closePath()}}),V={line:H.a,rect:ht.a,roundRect:ht.a,square:ht.a,circle:y.a,diamond:G,pin:q,arrow:N,triangle:Y},lt={line:function(nt,W,X,et,k){k.x1=nt,k.y1=W+et/2,k.x2=nt+X,k.y2=W+et/2},rect:function(nt,W,X,et,k){k.x=nt,k.y=W,k.width=X,k.height=et},roundRect:function(nt,W,X,et,k){k.x=nt,k.y=W,k.width=X,k.height=et,k.r=Math.min(X,et)/4},square:function(nt,W,X,et,k){var st=Math.min(X,et);k.x=nt,k.y=W,k.width=st,k.height=st},circle:function(nt,W,X,et,k){k.cx=nt+X/2,k.cy=W+et/2,k.r=Math.min(X,et)/2},diamond:function(nt,W,X,et,k){k.cx=nt+X/2,k.cy=W+et/2,k.width=X,k.height=et},pin:function(nt,W,X,et,k){k.x=nt+X/2,k.y=W+et/2,k.width=X,k.height=et},arrow:function(nt,W,X,et,k){k.x=nt+X/2,k.y=W+et/2,k.width=X,k.height=et},triangle:function(nt,W,X,et,k){k.cx=nt+X/2,k.cy=W+et/2,k.width=X,k.height=et}},at={};B.each(V,function(nt,W){at[W]=new nt});var gt=mt.b.extend({type:"symbol",shape:{symbolType:"",x:0,y:0,width:0,height:0},calculateTextPosition:function(nt,W,X){var et=Object(Q.d)(nt,W,X),k=this.shape;return k&&k.symbolType==="pin"&&W.position==="inside"&&(et.y=X.y+X.height*.4),et},buildPath:function(nt,W,X){var et=W.symbolType;if(et!=="none"){var k=at[et];k||(et="rect",k=at[et]),lt[et](W.x,W.y,W.width,W.height,k.shape),k.buildPath(nt,k.shape,X)}}});function Tt(nt,W){if(this.type!=="image"){var X=this.style;this.__isEmptyBrush?(X.stroke=nt,X.fill=W||"#fff",X.lineWidth=2):this.shape.symbolType==="line"?X.stroke=nt:X.fill=nt,this.markRedraw()}}function bt(nt,W,X,et,k,st,$){var D=nt.indexOf("empty")===0;D&&(nt=nt.substr(5,1).toLowerCase()+nt.substr(6));var T;return nt.indexOf("image://")===0?T=ot.makeImage(nt.slice(8),new it.a(W,X,et,k),$?"center":"cover"):nt.indexOf("path://")===0?T=ot.makePath(nt.slice(7),{},new it.a(W,X,et,k),$?"center":"cover"):T=new gt({shape:{symbolType:nt,x:W,y:X,width:et,height:k}}),T.__isEmptyBrush=D,T.setColor=Tt,st&&T.setColor(st),T}},qnTB:function(Ge,U,S){"use strict";S.d(U,"ab",function(){return it.A}),S.d(U,"l",function(){return it.d}),S.d(U,"g",function(){return it.a}),S.d(U,"B",function(){return it.l}),S.d(U,"j",function(){return it.b}),S.d(U,"m",function(){return it.e}),S.d(U,"n",function(){return it.f}),S.d(U,"o",function(){return it.g}),S.d(U,"w",function(){return it.i}),S.d(U,"x",function(){return it.j}),S.d(U,"R",function(){return it.w}),S.d(U,"P",function(){return it.u}),S.d(U,"Q",function(){return it.v}),S.d(U,"N",function(){return it.s}),S.d(U,"O",function(){return it.t}),S.d(U,"H",function(){return it.m}),S.d(U,"I",function(){return it.n}),S.d(U,"v",function(){return it.h}),S.d(U,"L",function(){return it.q}),S.d(U,"J",function(){return it.o}),S.d(U,"T",function(){return it.y}),S.d(U,"K",function(){return it.p}),S.d(U,"U",function(){return it.z}),S.d(U,"M",function(){return it.r}),S.d(U,"y",function(){return it.k}),S.d(U,"S",function(){return it.x}),S.d(U,"k",function(){return it.c}),S.d(U,"cb",function(){return N}),S.d(U,"D",function(){return V}),S.d(U,"Z",function(){return lt}),S.d(U,"bb",function(){return at}),S.d(U,"i",function(){return gt}),S.d(U,"V",function(){return Tt.c}),S.d(U,"A",function(){return B}),S.d(U,"X",function(){return At.a}),S.d(U,"F",function(){return rt.a}),S.d(U,"G",function(){return rt.a}),S.d(U,"E",function(){return mt}),S.d(U,"W",function(){return H}),S.d(U,"z",function(){return ht}),S.d(U,"u",function(){return y}),S.d(U,"Y",function(){return ot}),S.d(U,"p",function(){return ur.a}),S.d(U,"e",function(){return br.a}),S.d(U,"f",function(){return X.a}),S.d(U,"a",function(){return kr.a}),S.d(U,"c",function(){return Q.a}),S.d(U,"d",function(){return Y.a}),S.d(U,"h",function(){return G.a}),S.d(U,"b",function(){return q.a}),S.d(U,"C",function(){return Xe.b}),S.d(U,"r",function(){return Ut}),S.d(U,"s",function(){return Qt}),S.d(U,"t",function(){return Yt}),S.d(U,"q",function(){return Zt});var B={};S.r(B),S.d(B,"createList",function(){return C}),S.d(B,"getLayoutRect",function(){return et.g}),S.d(B,"createDimensions",function(){return D.a}),S.d(B,"dataStack",function(){return L}),S.d(B,"createSymbol",function(){return T.a}),S.d(B,"createScale",function(){return w}),S.d(B,"mixinAxisModelCommonMethods",function(){return z}),S.d(B,"getECData",function(){return st.a}),S.d(B,"enableHoverEmphasis",function(){return O.o}),S.d(B,"createTextStyle",function(){return pt});var mt={};S.r(mt),S.d(mt,"linearMap",function(){return _t.k}),S.d(mt,"round",function(){return _t.u}),S.d(mt,"asc",function(){return _t.b}),S.d(mt,"getPrecision",function(){return _t.f}),S.d(mt,"getPrecisionSafe",function(){return _t.g}),S.d(mt,"getPixelPrecision",function(){return _t.e}),S.d(mt,"getPercentWithPrecision",function(){return _t.d}),S.d(mt,"MAX_SAFE_INTEGER",function(){return _t.a}),S.d(mt,"remRadian",function(){return _t.t}),S.d(mt,"isRadianAroundZero",function(){return _t.j}),S.d(mt,"parseDate",function(){return _t.n}),S.d(mt,"quantity",function(){return _t.q}),S.d(mt,"quantityExponent",function(){return _t.r}),S.d(mt,"nice",function(){return _t.l}),S.d(mt,"quantile",function(){return _t.p}),S.d(mt,"reformIntervals",function(){return _t.s}),S.d(mt,"isNumeric",function(){return _t.i}),S.d(mt,"numericToNumber",function(){return _t.m});var H={};S.r(H),S.d(H,"parse",function(){return _t.n}),S.d(H,"format",function(){return xt.h});var ht={};S.r(ht),S.d(ht,"extendShape",function(){return ft.extendShape}),S.d(ht,"extendPath",function(){return ft.extendPath}),S.d(ht,"makePath",function(){return ft.makePath}),S.d(ht,"makeImage",function(){return ft.makeImage}),S.d(ht,"mergePath",function(){return ft.mergePath}),S.d(ht,"resizePath",function(){return ft.resizePath}),S.d(ht,"createIcon",function(){return ft.createIcon}),S.d(ht,"updateProps",function(){return ft.updateProps}),S.d(ht,"initProps",function(){return ft.initProps}),S.d(ht,"getTransform",function(){return ft.getTransform}),S.d(ht,"clipPointsByRect",function(){return ft.clipPointsByRect}),S.d(ht,"clipRectByRect",function(){return ft.clipRectByRect}),S.d(ht,"registerShape",function(){return ft.registerShape}),S.d(ht,"getShapeClass",function(){return ft.getShapeClass}),S.d(ht,"Group",function(){return Mt.a}),S.d(ht,"Image",function(){return K.a}),S.d(ht,"Text",function(){return R.a}),S.d(ht,"Circle",function(){return tt.a}),S.d(ht,"Ellipse",function(){return Z.a}),S.d(ht,"Sector",function(){return ct.a}),S.d(ht,"Ring",function(){return vt.a}),S.d(ht,"Polygon",function(){return Ct.a}),S.d(ht,"Polyline",function(){return Bt.a}),S.d(ht,"Rect",function(){return It.a}),S.d(ht,"Line",function(){return Wt.a}),S.d(ht,"BezierCurve",function(){return ee.a}),S.d(ht,"Arc",function(){return ae.a}),S.d(ht,"IncrementalDisplayable",function(){return ye.a}),S.d(ht,"CompoundPath",function(){return Le.a}),S.d(ht,"LinearGradient",function(){return _e.a}),S.d(ht,"RadialGradient",function(){return De.a}),S.d(ht,"BoundingRect",function(){return er.a});var y={};S.r(y),S.d(y,"addCommas",function(){return Ie.a}),S.d(y,"toCamelCase",function(){return Ie.k}),S.d(y,"normalizeCssArray",function(){return Ie.j}),S.d(y,"encodeHTML",function(){return Ie.d}),S.d(y,"formatTpl",function(){return Ie.f}),S.d(y,"getTooltipMarker",function(){return Ie.h}),S.d(y,"formatTime",function(){return Ie.e}),S.d(y,"capitalFirst",function(){return Ie.b}),S.d(y,"truncateText",function(){return Fe.c}),S.d(y,"getTextRect",function(){return He.a});var ot={};S.r(ot),S.d(ot,"map",function(){return at.map}),S.d(ot,"each",function(){return at.each}),S.d(ot,"indexOf",function(){return at.indexOf}),S.d(ot,"inherits",function(){return at.inherits}),S.d(ot,"reduce",function(){return at.reduce}),S.d(ot,"filter",function(){return at.filter}),S.d(ot,"bind",function(){return at.bind}),S.d(ot,"curry",function(){return at.curry}),S.d(ot,"isArray",function(){return at.isArray}),S.d(ot,"isString",function(){return at.isString}),S.d(ot,"isObject",function(){return at.isObject}),S.d(ot,"isFunction",function(){return at.isFunction}),S.d(ot,"extend",function(){return at.extend}),S.d(ot,"defaults",function(){return at.defaults}),S.d(ot,"clone",function(){return at.clone}),S.d(ot,"merge",function(){return at.merge});var it=S("G+eS"),Q=S("bLfw"),Y=S("sS/r"),G=S("T4UG"),q=S("6Ic6"),N=S("aX58"),V=S("Fofx"),lt=S("QBsz"),at=S("bYtY"),gt=S("Qe9p"),Tt=S("iLNv"),bt=S("MwEJ"),nt=S("aX7z"),W=S("ICMv"),X=S("Qxkt"),et=S("+TT/"),k=S("7hqr"),st=S("hhxK"),$=S("eDfh"),D=S("sdST"),T=S("oVpE"),O=S("fWwa");function C(ce){return Object(bt.a)(ce.getSource(),ce)}var L={isDimensionStacked:k.c,enableDataStack:k.a,getStackedDimension:k.b};function w(ce,xe){var Kt=xe;xe instanceof X.a||(Kt=new X.a(xe));var Rt=nt.a(Kt);return Rt.setExtent(ce[0],ce[1]),nt.i(Rt,Kt),Rt}function z(ce){at.mixin(ce,W.a)}function pt(ce,xe){return xe=xe||{},Object($.c)(ce,null,null,xe.state!=="normal")}var At=S("IrRn"),rt=S("vafp"),_t=S("OELB"),xt=S("+Hau"),ft=S("IwbS"),Mt=S("LcXL"),K=S("Dagg"),R=S("dqUG"),tt=S("2fw6"),Z=S("rmlV"),ct=S("SqI9"),vt=S("RXMa"),Ct=S("h7HQ"),Bt=S("1Jh7"),It=S("x6Kt"),Wt=S("yxFR"),ee=S("rA99"),ae=S("jTL6"),ye=S("OS9S"),Le=S("1MYJ"),_e=S("SKnc"),De=S("3e3G"),er=S("mFDi"),Ie=S("7aKB"),Fe=S("1AkM"),He=S("mYpf"),ur=S("ItGF"),br=S("YXkt"),kr=S("hM6l"),Xe=S("UhB0");function Ut(ce){var xe=Q.a.extend(ce);return Q.a.registerClass(xe),xe}function Qt(ce){var xe=Y.a.extend(ce);return Y.a.registerClass(xe),xe}function Yt(ce){var xe=G.a.extend(ce);return G.a.registerClass(xe),xe}function Zt(ce){var xe=q.a.extend(ce);return q.a.registerClass(xe),xe}},rA99:function(Ge,U,S){"use strict";var B=S("IaEH"),mt=S("y+Vt"),H=S("QBsz"),ht=S("Sj9i"),y=[],ot=function(){function Y(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.cpx1=0,this.cpy1=0,this.percent=1}return Y}();function it(Y,G,q){var N=Y.cpx2,V=Y.cpy2;return N===null||V===null?[(q?ht.b:ht.a)(Y.x1,Y.cpx1,Y.cpx2,Y.x2,G),(q?ht.b:ht.a)(Y.y1,Y.cpy1,Y.cpy2,Y.y2,G)]:[(q?ht.i:ht.h)(Y.x1,Y.cpx1,Y.x2,G),(q?ht.i:ht.h)(Y.y1,Y.cpy1,Y.y2,G)]}var Q=function(Y){Object(B.a)(G,Y);function G(q){return Y.call(this,q)||this}return G.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},G.prototype.getDefaultShape=function(){return new ot},G.prototype.buildPath=function(q,N){var V=N.x1,lt=N.y1,at=N.x2,gt=N.y2,Tt=N.cpx1,bt=N.cpy1,nt=N.cpx2,W=N.cpy2,X=N.percent;X!==0&&(q.moveTo(V,lt),nt==null||W==null?(X<1&&(Object(ht.n)(V,Tt,at,X,y),Tt=y[1],at=y[2],Object(ht.n)(lt,bt,gt,X,y),bt=y[1],gt=y[2]),q.quadraticCurveTo(Tt,bt,at,gt)):(X<1&&(Object(ht.g)(V,Tt,nt,at,X,y),Tt=y[1],nt=y[2],at=y[3],Object(ht.g)(lt,bt,W,gt,X,y),bt=y[1],W=y[2],gt=y[3]),q.bezierCurveTo(Tt,bt,nt,W,at,gt)))},G.prototype.pointAt=function(q){return it(this.shape,q,!1)},G.prototype.tangentAt=function(q){var N=it(this.shape,q,!0);return H.normalize(N,N)},G}(mt.b);Q.prototype.type="bezier-curve",U.a=Q},rmlV:function(Ge,U,S){"use strict";var B=S("IaEH"),mt=S("y+Vt"),H=function(){function y(){this.cx=0,this.cy=0,this.rx=0,this.ry=0}return y}(),ht=function(y){Object(B.a)(ot,y);function ot(it){return y.call(this,it)||this}return ot.prototype.getDefaultShape=function(){return new H},ot.prototype.buildPath=function(it,Q){var Y=.5522848,G=Q.cx,q=Q.cy,N=Q.rx,V=Q.ry,lt=N*Y,at=V*Y;it.moveTo(G-N,q),it.bezierCurveTo(G-N,q-at,G-lt,q-V,G,q-V),it.bezierCurveTo(G+lt,q-V,G+N,q-at,G+N,q),it.bezierCurveTo(G+N,q+at,G+lt,q+V,G,q+V),it.bezierCurveTo(G-lt,q+V,G-N,q+at,G-N,q),it.closePath()},ot}(mt.b);ht.prototype.type="ellipse",U.a=ht},s8Fb:function(Ge,U,S){"use strict";S.d(U,"a",function(){return G});var B=S("R1X6"),mt=S("1RvN"),H=S("bYtY"),ht=S("OELB"),y=S("oVpE"),ot=S("UhB0"),it=new B.a,Q=new mt.a(100),Y=["symbol","symbolSize","symbolKeepAspect","color","backgroundColor","dashArrayX","dashArrayY","maxTileWidth","maxTileHeight"];function G(gt,Tt){if(gt==="none")return null;var bt=Tt.getDevicePixelRatio(),nt=Tt.getZr(),W=nt.painter.type==="svg";gt.dirty&&it.delete(gt);var X=it.get(gt);if(X)return X;var et=Object(H.defaults)(gt,{symbol:"rect",symbolSize:1,symbolKeepAspect:!0,color:"rgba(0, 0, 0, 0.2)",backgroundColor:null,dashArrayX:5,dashArrayY:5,rotation:0,maxTileWidth:512,maxTileHeight:512});et.backgroundColor==="none"&&(et.backgroundColor=null);var k={repeat:"repeat"};return st(k),k.rotation=et.rotation,k.scaleX=k.scaleY=W?1:1/bt,it.set(gt,k),gt.dirty=!1,k;function st($){for(var D=[bt],T=!0,O=0;O<Y.length;++O){var C=et[Y[O]],L=typeof C;if(C!=null&&!Object(H.isArray)(C)&&L!=="string"&&L!=="number"&&L!=="boolean"){T=!1;break}D.push(C)}var w;if(T){w=D.join(",")+(W?"-svg":"");var z=Q.get(w);z&&(W?$.svgElement=z:$.image=z)}var pt=N(et.dashArrayX),At=V(et.dashArrayY),rt=q(et.symbol),_t=lt(pt),xt=at(At),ft=!W&&Object(H.createCanvas)(),Mt=W&&nt.painter.createSVGElement("g"),K=tt(),R;ft&&(ft.width=K.width*bt,ft.height=K.height*bt,R=ft.getContext("2d")),Z(),T&&Q.put(w,ft||Mt),$.image=ft,$.svgElement=Mt,$.svgWidth=K.width,$.svgHeight=K.height;function tt(){for(var ct=1,vt=0,Ct=_t.length;vt<Ct;++vt)ct=Object(ht.c)(ct,_t[vt]);for(var Bt=1,vt=0,Ct=rt.length;vt<Ct;++vt)Bt=Object(ht.c)(Bt,rt[vt].length);ct*=Bt;var It=xt*_t.length*rt.length;if(!1)var Wt;return{width:Math.max(1,Math.min(ct,et.maxTileWidth)),height:Math.max(1,Math.min(It,et.maxTileHeight))}}function Z(){R&&(R.clearRect(0,0,ft.width,ft.height),et.backgroundColor&&(R.fillStyle=et.backgroundColor,R.fillRect(0,0,ft.width,ft.height)));for(var ct=0,vt=0;vt<At.length;++vt)ct+=At[vt];if(ct<=0)return;for(var Ct=-xt,Bt=0,It=0,Wt=0;Ct<K.height;){if(Bt%2==0){for(var ee=It/2%rt.length,ae=0,ye=0,Le=0;ae<K.width*2;){for(var _e=0,vt=0;vt<pt[Wt].length;++vt)_e+=pt[Wt][vt];if(_e<=0)break;if(ye%2==0){var De=(1-et.symbolSize)*.5,er=ae+pt[Wt][ye]*De,Ie=Ct+At[Bt]*De,Fe=pt[Wt][ye]*et.symbolSize,He=At[Bt]*et.symbolSize,ur=Le/2%rt[ee].length;br(er,Ie,Fe,He,rt[ee][ur])}ae+=pt[Wt][ye],++Le,++ye,ye===pt[Wt].length&&(ye=0)}++Wt,Wt===pt.length&&(Wt=0)}Ct+=At[Bt],++It,++Bt,Bt===At.length&&(Bt=0)}function br(kr,Xe,Ut,Qt,Yt){var Zt=W?1:bt,ce=Object(y.a)(Yt,kr*Zt,Xe*Zt,Ut*Zt,Qt*Zt,et.color,et.symbolKeepAspect);W?Mt.appendChild(nt.painter.paintOne(ce)):Object(ot.b)(R,ce)}}}}function q(gt){if(!gt||gt.length===0)return[["rect"]];if(typeof gt=="string")return[[gt]];for(var Tt=!0,bt=0;bt<gt.length;++bt)if(typeof gt[bt]!="string"){Tt=!1;break}if(Tt)return q([gt]);for(var nt=[],bt=0;bt<gt.length;++bt)typeof gt[bt]=="string"?nt.push([gt[bt]]):nt.push(gt[bt]);return nt}function N(gt){if(!gt||gt.length===0)return[[0,0]];if(typeof gt=="number"){var Tt=Math.ceil(gt);return[[Tt,Tt]]}for(var bt=!0,nt=0;nt<gt.length;++nt)if(typeof gt[nt]!="number"){bt=!1;break}if(bt)return N([gt]);for(var W=[],nt=0;nt<gt.length;++nt)if(typeof gt[nt]=="number"){var Tt=Math.ceil(gt[nt]);W.push([Tt,Tt])}else{var Tt=Object(H.map)(gt[nt],function(k){return Math.ceil(k)});Tt.length%2==1?W.push(Tt.concat(Tt)):W.push(Tt)}return W}function V(gt){if(!gt||typeof gt=="object"&&gt.length===0)return[0,0];if(typeof gt=="number"){var Tt=Math.ceil(gt);return[Tt,Tt]}var bt=Object(H.map)(gt,function(nt){return Math.ceil(nt)});return gt.length%2?bt.concat(bt):bt}function lt(gt){return Object(H.map)(gt,function(Tt){return at(Tt)})}function at(gt){for(var Tt=0,bt=0;bt<gt.length;++bt)Tt+=gt[bt];return gt.length%2==1?Tt*2:Tt}},"sS/r":function(Ge,U,S){"use strict";var B=S("LcXL"),mt=S("iRjW"),H=S("Yl7c"),ht=function(){function y(){this.group=new B.a,this.uid=mt.c("viewComponent")}return y.prototype.init=function(ot,it){},y.prototype.render=function(ot,it,Q,Y){},y.prototype.dispose=function(ot,it){},y.prototype.updateView=function(ot,it,Q,Y){},y.prototype.updateLayout=function(ot,it,Q,Y){},y.prototype.updateVisual=function(ot,it,Q,Y){},y.prototype.blurSeries=function(ot,it){},y}();H.b(ht),H.c(ht),U.a=ht},sdST:function(Ge,U,S){"use strict";S.d(U,"a",function(){return q});var B=S("bYtY"),mt=S("4NO4"),H=S("D5nY"),ht=S("7G+c"),y=S("B/3G"),ot=S("Vi4m");function it(N,V,lt){Object(ht.e)(V)||(V=Object(ht.c)(V)),lt=lt||{},N=(N||[]).slice();for(var at=(lt.dimsDef||[]).slice(),gt=Object(B.createHashMap)(),Tt=Object(B.createHashMap)(),bt=[],nt=Q(V,N,at,lt.dimCount),W=0;W<nt;W++){var X=at[W],et=at[W]=Object(B.extend)({},Object(B.isObject)(X)?X:{name:X}),k=et.name,st=bt[W]=new ot.a;k!=null&&gt.get(k)==null&&(st.name=st.displayName=k,gt.set(k,W)),et.type!=null&&(st.type=et.type),et.displayName!=null&&(st.displayName=et.displayName)}var $=lt.encodeDef;!$&&lt.encodeDefaulter&&($=lt.encodeDefaulter(V,nt));var D=Object(B.createHashMap)($);D.each(function(rt,_t){var xt=Object(mt.r)(rt).slice();if(xt.length===1&&!Object(B.isString)(xt[0])&&xt[0]<0){D.set(_t,!1);return}var ft=D.set(_t,[]);Object(B.each)(xt,function(Mt,K){var R=Object(B.isString)(Mt)?gt.get(Mt):Mt;R!=null&&R<nt&&(ft[K]=R,O(bt[R],_t,K))})});var T=0;Object(B.each)(N,function(rt){var _t,xt,ft,Mt;if(Object(B.isString)(rt))_t=rt,Mt={};else{Mt=rt,_t=Mt.name;var K=Mt.ordinalMeta;Mt.ordinalMeta=null,Mt=Object(B.clone)(Mt),Mt.ordinalMeta=K,xt=Mt.dimsDef,ft=Mt.otherDims,Mt.name=Mt.coordDim=Mt.coordDimIndex=Mt.dimsDef=Mt.otherDims=null}var R=D.get(_t);if(R!==!1){if(R=Object(mt.r)(R),!R.length)for(var tt=0;tt<(xt&&xt.length||1);tt++){for(;T<bt.length&&bt[T].coordDim!=null;)T++;T<bt.length&&R.push(T++)}Object(B.each)(R,function(Z,ct){var vt=bt[Z];if(O(Object(B.defaults)(vt,Mt),_t,ct),vt.name==null&&xt){var Ct=xt[ct];!Object(B.isObject)(Ct)&&(Ct={name:Ct}),vt.name=vt.displayName=Ct.name,vt.defaultTooltip=Ct.defaultTooltip}ft&&Object(B.defaults)(vt.otherDims,ft)})}});function O(rt,_t,xt){y.i.get(_t)!=null?rt.otherDims[_t]=xt:(rt.coordDim=_t,rt.coordDimIndex=xt,Tt.set(_t,!0))}var C=lt.generateCoord,L=lt.generateCoordCount,w=L!=null;L=C?L||1:0;for(var z=C||"value",pt=0;pt<nt;pt++){var st=bt[pt]=bt[pt]||new ot.a,At=st.coordDim;At==null&&(st.coordDim=Y(z,Tt,w),st.coordDimIndex=0,(!C||L<=0)&&(st.isExtraCoord=!0),L--),st.name==null&&(st.name=Y(st.coordDim,gt,!1)),st.type==null&&(Object(H.b)(V,pt)===H.a.Must||st.isExtraCoord&&(st.otherDims.itemName!=null||st.otherDims.seriesName!=null))&&(st.type="ordinal")}return bt}function Q(N,V,lt,at){var gt=Math.max(N.dimensionsDetectedCount||1,V.length,lt.length,at||0);return Object(B.each)(V,function(Tt){var bt;Object(B.isObject)(Tt)&&(bt=Tt.dimsDef)&&(gt=Math.max(gt,bt.length))}),gt}function Y(N,V,lt){if(lt||V.get(N)!=null){for(var at=0;V.get(N+at)!=null;)at++;N+=at}return V.set(N,!0),N}var G=it;function q(N,V){return V=V||{},G(V.coordDimensions||[],N,{dimsDef:V.dimensionsDefine||N.dimensionsDefine,encodeDef:V.encodeDefine||N.encodeDefine,dimCount:V.dimensionsCount,encodeDefaulter:V.encodeDefaulter,generateCoord:V.generateCoord,generateCoordCount:V.generateCoordCount})}},t9mh:function(Ge,U,S){"use strict";S.d(U,"d",function(){return ht}),S.d(U,"c",function(){return ot}),S.d(U,"a",function(){return Y}),S.d(U,"b",function(){return q});var B=S("OELB"),mt=S("bYtY"),H=S("7a4p");function ht(N,V){var lt=V&&V.type;if(lt==="ordinal"){var at=V&&V.ordinalMeta;return at?at.parseAndCollect(N):N}return lt==="time"&&typeof N!="number"&&N!=null&&N!=="-"&&(N=+Object(B.n)(N)),N==null||N===""?NaN:+N}var y=Object(mt.createHashMap)({number:function(N){return parseFloat(N)},time:function(N){return+Object(B.n)(N)},trim:function(N){return typeof N=="string"?Object(mt.trim)(N):N}});function ot(N){return y.get(N)}var it={lt:function(N,V){return N<V},lte:function(N,V){return N<=V},gt:function(N,V){return N>V},gte:function(N,V){return N>=V}},Q=function(){function N(V,lt){if(typeof lt!="number"){var at="";Object(H.b)(at)}this._opFn=it[V],this._rvalFloat=Object(B.m)(lt)}return N.prototype.evaluate=function(V){return typeof V=="number"?this._opFn(V,this._rvalFloat):this._opFn(Object(B.m)(V),this._rvalFloat)},N}(),Y=function(){function N(V,lt){var at=V==="desc";this._resultLT=at?1:-1,lt==null&&(lt=at?"min":"max"),this._incomparable=lt==="min"?-Infinity:Infinity}return N.prototype.evaluate=function(V,lt){var at=typeof V,gt=typeof lt,Tt=at==="number"?V:Object(B.m)(V),bt=gt==="number"?lt:Object(B.m)(lt),nt=isNaN(Tt),W=isNaN(bt);if(nt&&(Tt=this._incomparable),W&&(bt=this._incomparable),nt&&W){var X=at==="string",et=gt==="string";X&&(Tt=et?V:0),et&&(bt=X?lt:0)}return Tt<bt?this._resultLT:Tt>bt?-this._resultLT:0},N}(),G=function(){function N(V,lt){this._rval=lt,this._isEQ=V,this._rvalTypeof=typeof lt,this._rvalFloat=Object(B.m)(lt)}return N.prototype.evaluate=function(V){var lt=V===this._rval;if(!lt){var at=typeof V;at!==this._rvalTypeof&&(at==="number"||this._rvalTypeof==="number")&&(lt=Object(B.m)(V)===this._rvalFloat)}return this._isEQ?lt:!lt},N}();function q(N,V){return N==="eq"||N==="ne"?new G(N==="eq",V):Object(mt.hasOwn)(it,N)?new Q(N,V):null}},u3os:function(Ge,U,S){"use strict";Object.defineProperty(U,"__esModule",{value:!0}),U.ver=U.clear=U.bind=void 0;var B=S("P4Qj"),mt=function(ot,it){var Q=(0,B.getSensor)(ot);return Q.bind(it),function(){Q.unbind(it)}};U.bind=mt;var H=function(ot){var it=(0,B.getSensor)(ot);(0,B.removeSensor)(it)};U.clear=H;var ht="1.0.1";U.ver=ht},vafp:function(Ge,U,S){"use strict";S.d(U,"a",function(){return y});var B=S("bYtY"),mt=S("8nly");function H(ot){if(!ot.UTF8Encoding)return ot;var it=ot,Q=it.UTF8Scale;Q==null&&(Q=1024);for(var Y=it.features,G=0;G<Y.length;G++){var q=Y[G],N=q.geometry;if(N.type==="Polygon")for(var V=N.coordinates,lt=0;lt<V.length;lt++)V[lt]=ht(V[lt],N.encodeOffsets[lt],Q);else if(N.type==="MultiPolygon")for(var V=N.coordinates,lt=0;lt<V.length;lt++)for(var at=V[lt],gt=0;gt<at.length;gt++)at[gt]=ht(at[gt],N.encodeOffsets[lt][gt],Q)}return it.UTF8Encoding=!1,it}function ht(ot,it,Q){for(var Y=[],G=it[0],q=it[1],N=0;N<ot.length;N+=2){var V=ot.charCodeAt(N)-64,lt=ot.charCodeAt(N+1)-64;V=V>>1^-(V&1),lt=lt>>1^-(lt&1),V+=G,lt+=q,G=V,q=lt,Y.push([V/Q,lt/Q])}return Y}function y(ot,it){return ot=H(ot),B.map(B.filter(ot.features,function(Q){return Q.geometry&&Q.properties&&Q.geometry.coordinates.length>0}),function(Q){var Y=Q.properties,G=Q.geometry,q=[];if(G.type==="Polygon"){var N=G.coordinates;q.push({type:"polygon",exterior:N[0],interiors:N.slice(1)})}if(G.type==="MultiPolygon"){var N=G.coordinates;B.each(N,function(at){at[0]&&q.push({type:"polygon",exterior:at[0],interiors:at.slice(1)})})}var V=new mt.a(Y[it||"name"],q,Y.cp);return V.properties=Y,V})}},x6Kt:function(Ge,U,S){"use strict";var B=S("IaEH"),mt=S("y+Vt");function H(Y,G){var q=G.x,N=G.y,V=G.width,lt=G.height,at=G.r,gt,Tt,bt,nt;V<0&&(q=q+V,V=-V),lt<0&&(N=N+lt,lt=-lt),typeof at=="number"?gt=Tt=bt=nt=at:at instanceof Array?at.length===1?gt=Tt=bt=nt=at[0]:at.length===2?(gt=bt=at[0],Tt=nt=at[1]):at.length===3?(gt=at[0],Tt=nt=at[1],bt=at[2]):(gt=at[0],Tt=at[1],bt=at[2],nt=at[3]):gt=Tt=bt=nt=0;var W;gt+Tt>V&&(W=gt+Tt,gt*=V/W,Tt*=V/W),bt+nt>V&&(W=bt+nt,bt*=V/W,nt*=V/W),Tt+bt>lt&&(W=Tt+bt,Tt*=lt/W,bt*=lt/W),gt+nt>lt&&(W=gt+nt,gt*=lt/W,nt*=lt/W),Y.moveTo(q+gt,N),Y.lineTo(q+V-Tt,N),Tt!==0&&Y.arc(q+V-Tt,N+Tt,Tt,-Math.PI/2,0),Y.lineTo(q+V,N+lt-bt),bt!==0&&Y.arc(q+V-bt,N+lt-bt,bt,0,Math.PI/2),Y.lineTo(q+nt,N+lt),nt!==0&&Y.arc(q+nt,N+lt-nt,nt,Math.PI/2,Math.PI),Y.lineTo(q,N+gt),gt!==0&&Y.arc(q+gt,N+gt,gt,Math.PI,Math.PI*1.5)}var ht=S("nPnh"),y=function(){function Y(){this.x=0,this.y=0,this.width=0,this.height=0}return Y}(),ot={},it=function(Y){Object(B.a)(G,Y);function G(q){return Y.call(this,q)||this}return G.prototype.getDefaultShape=function(){return new y},G.prototype.buildPath=function(q,N){var V,lt,at,gt;if(this.subPixelOptimize){var Tt=Object(ht.c)(ot,N,this.style);V=Tt.x,lt=Tt.y,at=Tt.width,gt=Tt.height,Tt.r=N.r,N=Tt}else V=N.x,lt=N.y,at=N.width,gt=N.height;N.r?H(q,N):q.rect(V,lt,at,gt)},G.prototype.isZeroArea=function(){return!this.shape.width||!this.shape.height},G}(mt.b);it.prototype.type="rect";var Q=U.a=it},"y+Vt":function(Ge,U,S){"use strict";S.d(U,"a",function(){return C});var B=S("IaEH"),mt=S("Gev7"),H=S("1bdT"),ht=S("IMiH"),y=S("loD1"),ot=S("Sj9i");function it(At,rt,_t,xt,ft,Mt,K,R,tt,Z,ct){if(tt===0)return!1;var vt=tt;if(ct>rt+vt&&ct>xt+vt&&ct>Mt+vt&&ct>R+vt||ct<rt-vt&&ct<xt-vt&&ct<Mt-vt&&ct<R-vt||Z>At+vt&&Z>_t+vt&&Z>ft+vt&&Z>K+vt||Z<At-vt&&Z<_t-vt&&Z<ft-vt&&Z<K-vt)return!1;var Ct=ot.e(At,rt,_t,xt,ft,Mt,K,R,Z,ct,null);return Ct<=vt/2}var Q=S("aKvl"),Y=S("hX1E"),G=Math.PI*2;function q(At,rt,_t,xt,ft,Mt,K,R,tt){if(K===0)return!1;var Z=K;R-=At,tt-=rt;var ct=Math.sqrt(R*R+tt*tt);if(ct-Z>_t||ct+Z<_t)return!1;if(Math.abs(xt-ft)%G<1e-4)return!0;if(Mt){var vt=xt;xt=Object(Y.a)(ft),ft=Object(Y.a)(vt)}else xt=Object(Y.a)(xt),ft=Object(Y.a)(ft);xt>ft&&(ft+=G);var Ct=Math.atan2(tt,R);return Ct<0&&(Ct+=G),Ct>=xt&&Ct<=ft||Ct+G>=xt&&Ct+G<=ft}var N=S("hyiK"),V=ht.a.CMD,lt=Math.PI*2,at=1e-4;function gt(At,rt){return Math.abs(At-rt)<at}var Tt=[-1,-1,-1],bt=[-1,-1];function nt(){var At=bt[0];bt[0]=bt[1],bt[1]=At}function W(At,rt,_t,xt,ft,Mt,K,R,tt,Z){if(Z>rt&&Z>xt&&Z>Mt&&Z>R||Z<rt&&Z<xt&&Z<Mt&&Z<R)return 0;var ct=ot.f(rt,xt,Mt,R,Z,Tt);if(ct===0)return 0;for(var vt=0,Ct=-1,Bt=void 0,It=void 0,Wt=0;Wt<ct;Wt++){var ee=Tt[Wt],ae=ee===0||ee===1?.5:1,ye=ot.a(At,_t,ft,K,ee);ye<tt||(Ct<0&&(Ct=ot.c(rt,xt,Mt,R,bt),bt[1]<bt[0]&&Ct>1&&nt(),Bt=ot.a(rt,xt,Mt,R,bt[0]),Ct>1&&(It=ot.a(rt,xt,Mt,R,bt[1]))),Ct===2?ee<bt[0]?vt+=Bt<rt?ae:-ae:ee<bt[1]?vt+=It<Bt?ae:-ae:vt+=R<It?ae:-ae:ee<bt[0]?vt+=Bt<rt?ae:-ae:vt+=R<Bt?ae:-ae)}return vt}function X(At,rt,_t,xt,ft,Mt,K,R){if(R>rt&&R>xt&&R>Mt||R<rt&&R<xt&&R<Mt)return 0;var tt=ot.m(rt,xt,Mt,R,Tt);if(tt===0)return 0;var Z=ot.j(rt,xt,Mt);if(Z>=0&&Z<=1){for(var ct=0,vt=ot.h(rt,xt,Mt,Z),Ct=0;Ct<tt;Ct++){var Bt=Tt[Ct]===0||Tt[Ct]===1?.5:1,It=ot.h(At,_t,ft,Tt[Ct]);It<K||(Tt[Ct]<Z?ct+=vt<rt?Bt:-Bt:ct+=Mt<vt?Bt:-Bt)}return ct}else{var Bt=Tt[0]===0||Tt[0]===1?.5:1,It=ot.h(At,_t,ft,Tt[0]);return It<K?0:Mt<rt?Bt:-Bt}}function et(At,rt,_t,xt,ft,Mt,K,R){if(R-=rt,R>_t||R<-_t)return 0;var tt=Math.sqrt(_t*_t-R*R);Tt[0]=-tt,Tt[1]=tt;var Z=Math.abs(xt-ft);if(Z<1e-4)return 0;if(Z>=lt-1e-4){xt=0,ft=lt;var ct=Mt?1:-1;return K>=Tt[0]+At&&K<=Tt[1]+At?ct:0}if(xt>ft){var vt=xt;xt=ft,ft=vt}xt<0&&(xt+=lt,ft+=lt);for(var Ct=0,Bt=0;Bt<2;Bt++){var It=Tt[Bt];if(It+At>K){var Wt=Math.atan2(R,It),ct=Mt?1:-1;Wt<0&&(Wt=lt+Wt),(Wt>=xt&&Wt<=ft||Wt+lt>=xt&&Wt+lt<=ft)&&(Wt>Math.PI/2&&Wt<Math.PI*1.5&&(ct=-ct),Ct+=ct)}}return Ct}function k(At,rt,_t,xt,ft){for(var Mt=At.data,K=At.len(),R=0,tt=0,Z=0,ct=0,vt=0,Ct,Bt,It=0;It<K;){var Wt=Mt[It++],ee=It===1;switch(Wt===V.M&&It>1&&(_t||(R+=Object(N.a)(tt,Z,ct,vt,xt,ft))),ee&&(tt=Mt[It],Z=Mt[It+1],ct=tt,vt=Z),Wt){case V.M:ct=Mt[It++],vt=Mt[It++],tt=ct,Z=vt;break;case V.L:if(_t){if(y.a(tt,Z,Mt[It],Mt[It+1],rt,xt,ft))return!0}else R+=Object(N.a)(tt,Z,Mt[It],Mt[It+1],xt,ft)||0;tt=Mt[It++],Z=Mt[It++];break;case V.C:if(_t){if(it(tt,Z,Mt[It++],Mt[It++],Mt[It++],Mt[It++],Mt[It],Mt[It+1],rt,xt,ft))return!0}else R+=W(tt,Z,Mt[It++],Mt[It++],Mt[It++],Mt[It++],Mt[It],Mt[It+1],xt,ft)||0;tt=Mt[It++],Z=Mt[It++];break;case V.Q:if(_t){if(Q.a(tt,Z,Mt[It++],Mt[It++],Mt[It],Mt[It+1],rt,xt,ft))return!0}else R+=X(tt,Z,Mt[It++],Mt[It++],Mt[It],Mt[It+1],xt,ft)||0;tt=Mt[It++],Z=Mt[It++];break;case V.A:var ae=Mt[It++],ye=Mt[It++],Le=Mt[It++],_e=Mt[It++],De=Mt[It++],er=Mt[It++];It+=1;var Ie=!!(1-Mt[It++]);Ct=Math.cos(De)*Le+ae,Bt=Math.sin(De)*_e+ye,ee?(ct=Ct,vt=Bt):R+=Object(N.a)(tt,Z,Ct,Bt,xt,ft);var Fe=(xt-ae)*_e/Le+ae;if(_t){if(q(ae,ye,_e,De,De+er,Ie,rt,Fe,ft))return!0}else R+=et(ae,ye,_e,De,De+er,Ie,Fe,ft);tt=Math.cos(De+er)*Le+ae,Z=Math.sin(De+er)*_e+ye;break;case V.R:ct=tt=Mt[It++],vt=Z=Mt[It++];var He=Mt[It++],ur=Mt[It++];if(Ct=ct+He,Bt=vt+ur,_t){if(y.a(ct,vt,Ct,vt,rt,xt,ft)||y.a(Ct,vt,Ct,Bt,rt,xt,ft)||y.a(Ct,Bt,ct,Bt,rt,xt,ft)||y.a(ct,Bt,ct,vt,rt,xt,ft))return!0}else R+=Object(N.a)(Ct,vt,Ct,Bt,xt,ft),R+=Object(N.a)(ct,Bt,ct,vt,xt,ft);break;case V.Z:if(_t){if(y.a(tt,Z,ct,vt,rt,xt,ft))return!0}else R+=Object(N.a)(tt,Z,ct,vt,xt,ft);tt=ct,Z=vt;break}}return!_t&&!gt(Z,vt)&&(R+=Object(N.a)(tt,Z,ct,vt,xt,ft)||0),R!==0}function st(At,rt,_t){return k(At,0,!1,rt,_t)}function $(At,rt,_t,xt){return k(At,rt,!0,_t,xt)}var D=S("bYtY"),T=S("Qe9p"),O=S("LPTA"),C=Object(D.defaults)({fill:"#000",stroke:null,strokePercent:1,fillOpacity:1,strokeOpacity:1,lineDashOffset:0,lineWidth:1,lineCap:"butt",miterLimit:10,strokeNoScale:!1,strokeFirst:!1},mt.b),L={style:Object(D.defaults)({fill:!0,stroke:!0,strokePercent:!0,fillOpacity:!0,strokeOpacity:!0,lineDashOffset:!0,lineWidth:!0,miterLimit:!0},mt.a.style)},w=["x","y","rotation","scaleX","scaleY","originX","originY","invisible","culling","z","z2","zlevel","parent"],z=function(At){Object(B.a)(rt,At);function rt(_t){return At.call(this,_t)||this}return rt.prototype.update=function(){var _t=this;At.prototype.update.call(this);var xt=this.style;if(xt.decal){var ft=this._decalEl=this._decalEl||new rt;ft.buildPath===rt.prototype.buildPath&&(ft.buildPath=function(tt){_t.buildPath(tt,_t.shape)}),ft.silent=!0;var Mt=ft.style;for(var K in xt)Mt[K]!==xt[K]&&(Mt[K]=xt[K]);Mt.fill=xt.fill?xt.decal:null,Mt.decal=null,Mt.shadowColor=null,xt.strokeFirst&&(Mt.stroke=null);for(var R=0;R<w.length;++R)ft[w[R]]=this[w[R]];ft.__dirty|=H.a.REDARAW_BIT}else this._decalEl&&(this._decalEl=null)},rt.prototype.getDecalElement=function(){return this._decalEl},rt.prototype._init=function(_t){var xt=Object(D.keys)(_t);this.shape=this.getDefaultShape();var ft=this.getDefaultStyle();ft&&this.useStyle(ft);for(var Mt=0;Mt<xt.length;Mt++){var K=xt[Mt],R=_t[K];K==="style"?this.style?Object(D.extend)(this.style,R):this.useStyle(R):K==="shape"?Object(D.extend)(this.shape,R):At.prototype.attrKV.call(this,K,R)}this.style||this.useStyle({})},rt.prototype.getDefaultStyle=function(){return null},rt.prototype.getDefaultShape=function(){return{}},rt.prototype.canBeInsideText=function(){return this.hasFill()},rt.prototype.getInsideTextFill=function(){var _t=this.style.fill;if(_t!=="none"){if(Object(D.isString)(_t)){var xt=Object(T.lum)(_t,0);return xt>.5?O.a:xt>.2?O.c:O.d}else if(_t)return O.d}return O.a},rt.prototype.getInsideTextStroke=function(_t){var xt=this.style.fill;if(Object(D.isString)(xt)){var ft=this.__zr,Mt=!!(ft&&ft.isDarkMode()),K=Object(T.lum)(_t,0)<O.b;if(Mt===K)return xt}},rt.prototype.buildPath=function(_t,xt,ft){},rt.prototype.pathUpdated=function(){this.__dirty&=~rt.SHAPE_CHANGED_BIT},rt.prototype.createPathProxy=function(){this.path=new ht.a(!1)},rt.prototype.hasStroke=function(){var _t=this.style,xt=_t.stroke;return!(xt==null||xt==="none"||!(_t.lineWidth>0))},rt.prototype.hasFill=function(){var _t=this.style,xt=_t.fill;return xt!=null&&xt!=="none"},rt.prototype.getBoundingRect=function(){var _t=this._rect,xt=this.style,ft=!_t;if(ft){var Mt=!1;this.path||(Mt=!0,this.createPathProxy());var K=this.path;(Mt||this.__dirty&rt.SHAPE_CHANGED_BIT)&&(K.beginPath(),this.buildPath(K,this.shape,!1),this.pathUpdated()),_t=K.getBoundingRect()}if(this._rect=_t,this.hasStroke()&&this.path&&this.path.len()>0){var R=this._rectWithStroke||(this._rectWithStroke=_t.clone());if(this.__dirty||ft){R.copy(_t);var tt=xt.strokeNoScale?this.getLineScale():1,Z=xt.lineWidth;if(!this.hasFill()){var ct=this.strokeContainThreshold;Z=Math.max(Z,ct==null?4:ct)}tt>1e-10&&(R.width+=Z/tt,R.height+=Z/tt,R.x-=Z/tt/2,R.y-=Z/tt/2)}return R}return _t},rt.prototype.contain=function(_t,xt){var ft=this.transformCoordToLocal(_t,xt),Mt=this.getBoundingRect(),K=this.style;if(_t=ft[0],xt=ft[1],Mt.contain(_t,xt)){var R=this.path;if(this.hasStroke()){var tt=K.lineWidth,Z=K.strokeNoScale?this.getLineScale():1;if(Z>1e-10&&(this.hasFill()||(tt=Math.max(tt,this.strokeContainThreshold)),$(R,tt/Z,_t,xt)))return!0}if(this.hasFill())return st(R,_t,xt)}return!1},rt.prototype.dirtyShape=function(){this.__dirty|=rt.SHAPE_CHANGED_BIT,this._rect&&(this._rect=null),this._decalEl&&this._decalEl.dirtyShape(),this.markRedraw()},rt.prototype.dirty=function(){this.dirtyStyle(),this.dirtyShape()},rt.prototype.animateShape=function(_t){return this.animate("shape",_t)},rt.prototype.updateDuringAnimation=function(_t){_t==="style"?this.dirtyStyle():_t==="shape"?this.dirtyShape():this.markRedraw()},rt.prototype.attrKV=function(_t,xt){_t==="shape"?this.setShape(xt):At.prototype.attrKV.call(this,_t,xt)},rt.prototype.setShape=function(_t,xt){var ft=this.shape;return ft||(ft=this.shape={}),typeof _t=="string"?ft[_t]=xt:Object(D.extend)(ft,_t),this.dirtyShape(),this},rt.prototype.shapeChanged=function(){return!!(this.__dirty&rt.SHAPE_CHANGED_BIT)},rt.prototype.createStyle=function(_t){return Object(D.createObject)(C,_t)},rt.prototype._innerSaveToNormal=function(_t){At.prototype._innerSaveToNormal.call(this,_t);var xt=this._normalState;_t.shape&&!xt.shape&&(xt.shape=Object(D.extend)({},this.shape))},rt.prototype._applyStateObj=function(_t,xt,ft,Mt,K,R){At.prototype._applyStateObj.call(this,_t,xt,ft,Mt,K,R);var tt=!(xt&&Mt),Z;if(xt&&xt.shape?K?Mt?Z=xt.shape:(Z=Object(D.extend)({},ft.shape),Object(D.extend)(Z,xt.shape)):(Z=Object(D.extend)({},Mt?this.shape:ft.shape),Object(D.extend)(Z,xt.shape)):tt&&(Z=ft.shape),Z)if(K){this.shape=Object(D.extend)({},this.shape);for(var ct={},vt=Object(D.keys)(Z),Ct=0;Ct<vt.length;Ct++){var Bt=vt[Ct];typeof Z[Bt]=="object"?this.shape[Bt]=Z[Bt]:ct[Bt]=Z[Bt]}this._transitionState(_t,{shape:ct},R)}else this.shape=Z,this.dirtyShape()},rt.prototype._mergeStates=function(_t){for(var xt=At.prototype._mergeStates.call(this,_t),ft,Mt=0;Mt<_t.length;Mt++){var K=_t[Mt];K.shape&&(ft=ft||{},this._mergeStyle(ft,K.shape))}return ft&&(xt.shape=ft),xt},rt.prototype.getAnimationStyleProps=function(){return L},rt.prototype.isZeroArea=function(){return!1},rt.extend=function(_t){var xt=function(Mt){Object(B.a)(K,Mt);function K(R){var tt=Mt.call(this,R)||this;return _t.init&&_t.init.call(tt,R),tt}return K.prototype.getDefaultStyle=function(){return Object(D.clone)(_t.style)},K.prototype.getDefaultShape=function(){return Object(D.clone)(_t.shape)},K}(rt);for(var ft in _t)typeof _t[ft]=="function"&&(xt.prototype[ft]=_t[ft]);return xt},rt.SHAPE_CHANGED_BIT=4,rt.initDefaultProps=function(){var _t=rt.prototype;_t.type="path",_t.strokeContainThreshold=5,_t.segmentIgnoreThreshold=0,_t.subPixelOptimize=!1,_t.autoBatch=!1,_t.__dirty=H.a.REDARAW_BIT|mt.c.STYLE_CHANGED_BIT|rt.SHAPE_CHANGED_BIT}(),rt}(mt.c),pt=U.b=z},yoD8:function(Ge,U,S){"use strict";var B=S("3Oj7"),mt=[0,0],H=[0,0],ht=new B.a,y=new B.a,ot=function(){function it(Q,Y){this._corners=[],this._axes=[],this._origin=[0,0];for(var G=0;G<4;G++)this._corners[G]=new B.a;for(var G=0;G<2;G++)this._axes[G]=new B.a;Q&&this.fromBoundingRect(Q,Y)}return it.prototype.fromBoundingRect=function(Q,Y){var G=this._corners,q=this._axes,N=Q.x,V=Q.y,lt=N+Q.width,at=V+Q.height;if(G[0].set(N,V),G[1].set(lt,V),G[2].set(lt,at),G[3].set(N,at),Y)for(var gt=0;gt<4;gt++)G[gt].transform(Y);B.a.sub(q[0],G[1],G[0]),B.a.sub(q[1],G[3],G[0]),q[0].normalize(),q[1].normalize();for(var gt=0;gt<2;gt++)this._origin[gt]=q[gt].dot(G[0])},it.prototype.intersect=function(Q,Y){var G=!0,q=!Y;return ht.set(Infinity,Infinity),y.set(0,0),!this._intersectCheckOneSide(this,Q,ht,y,q,1)&&(G=!1,q)||!this._intersectCheckOneSide(Q,this,ht,y,q,-1)&&(G=!1,q)||q||B.a.copy(Y,G?ht:y),G},it.prototype._intersectCheckOneSide=function(Q,Y,G,q,N,V){for(var lt=!0,at=0;at<2;at++){var gt=this._axes[at];if(this._getProjMinMaxOnAxis(at,Q._corners,mt),this._getProjMinMaxOnAxis(at,Y._corners,H),mt[1]<H[0]||mt[0]>H[1]){if(lt=!1,N)return lt;var Tt=Math.abs(H[0]-mt[1]),bt=Math.abs(mt[0]-H[1]);Math.min(Tt,bt)>q.len()&&(Tt<bt?B.a.scale(q,gt,-Tt*V):B.a.scale(q,gt,bt*V))}else if(G){var Tt=Math.abs(H[0]-mt[1]),bt=Math.abs(mt[0]-H[1]);Math.min(Tt,bt)<G.len()&&(Tt<bt?B.a.scale(G,gt,Tt*V):B.a.scale(G,gt,-bt*V))}}return lt},it.prototype._getProjMinMaxOnAxis=function(Q,Y,G){for(var q=this._axes[Q],N=this._origin,V=Y[0].dot(q)+N[Q],lt=V,at=V,gt=1;gt<Y.length;gt++){var Tt=Y[gt].dot(q)+N[Q];lt=Math.min(Tt,lt),at=Math.max(Tt,at)}G[0]=lt,G[1]=at},it}();U.a=ot},yxFR:function(Ge,U,S){"use strict";var B=S("IaEH"),mt=S("y+Vt"),H=S("nPnh"),ht={},y=function(){function it(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.percent=1}return it}(),ot=function(it){Object(B.a)(Q,it);function Q(Y){return it.call(this,Y)||this}return Q.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},Q.prototype.getDefaultShape=function(){return new y},Q.prototype.buildPath=function(Y,G){var q,N,V,lt;if(this.subPixelOptimize){var at=Object(H.b)(ht,G,this.style);q=at.x1,N=at.y1,V=at.x2,lt=at.y2}else q=G.x1,N=G.y1,V=G.x2,lt=G.y2;var gt=G.percent;gt!==0&&(Y.moveTo(q,N),gt<1&&(V=q*(1-gt)+V*gt,lt=N*(1-gt)+lt*gt),Y.lineTo(V,lt))},Q.prototype.pointAt=function(Y){var G=this.shape;return[G.x1*(1-Y)+G.x2*Y,G.y1*(1-Y)+G.y2*Y]},Q}(mt.b);ot.prototype.type="line",U.a=ot},z35g:function(Ge,U,S){"use strict";var B=S("bYtY"),mt=function(){function H(ht){this.type="cartesian",this._dimList=[],this._axes={},this.name=ht||""}return H.prototype.getAxis=function(ht){return this._axes[ht]},H.prototype.getAxes=function(){return B.map(this._dimList,function(ht){return this._axes[ht]},this)},H.prototype.getAxesByScale=function(ht){return ht=ht.toLowerCase(),B.filter(this.getAxes(),function(y){return y.scale.type===ht})},H.prototype.addAxis=function(ht){var y=ht.dim;this._axes[y]=ht,this._dimList.push(y)},H}();U.a=mt},zM3Q:function(Ge,U,S){"use strict";S.d(U,"a",function(){return mt});var B=S("4NO4");function mt(){var H=Object(B.o)();return function(ht){var y=H(ht),ot=ht.pipelineContext,it=!!y.large,Q=!!y.progressiveRender,Y=y.large=!!(ot&&ot.large),G=y.progressiveRender=!!(ot&&ot.progressiveRender);return(it!==Y||Q!==G)&&"reset"}}}}]);
